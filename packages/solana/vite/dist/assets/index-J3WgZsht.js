var Wn=Object.defineProperty;var jn=(tt,et,rt)=>et in tt?Wn(tt,et,{enumerable:!0,configurable:!0,writable:!0,value:rt}):tt[et]=rt;var Un=(tt,et,rt)=>jn(tt,typeof et!="symbol"?et+"":et,rt);(function(){const et=document.createElement("link").relList;if(et&&et.supports&&et.supports("modulepreload"))return;for(const at of document.querySelectorAll('link[rel="modulepreload"]'))nt(at);new MutationObserver(at=>{for(const it of at)if(it.type==="childList")for(const st of it.addedNodes)st.tagName==="LINK"&&st.rel==="modulepreload"&&nt(st)}).observe(document,{childList:!0,subtree:!0});function rt(at){const it={};return at.integrity&&(it.integrity=at.integrity),at.referrerPolicy&&(it.referrerPolicy=at.referrerPolicy),at.crossOrigin==="use-credentials"?it.credentials="include":at.crossOrigin==="anonymous"?it.credentials="omit":it.credentials="same-origin",it}function nt(at){if(at.ep)return;at.ep=!0;const it=rt(at);fetch(at.href,it)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$5(tt){return tt&&tt.__esModule&&Object.prototype.hasOwnProperty.call(tt,"default")?tt.default:tt}function getAugmentedNamespace(tt){if(tt.__esModule)return tt;var et=tt.default;if(typeof et=="function"){var rt=function nt(){return this instanceof nt?Reflect.construct(et,arguments,this.constructor):et.apply(this,arguments)};rt.prototype=et.prototype}else rt={};return Object.defineProperty(rt,"__esModule",{value:!0}),Object.keys(tt).forEach(function(nt){var at=Object.getOwnPropertyDescriptor(tt,nt);Object.defineProperty(rt,nt,at.get?at:{enumerable:!0,get:function(){return tt[nt]}})}),rt}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$4=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$4=Symbol.for("react.forward_ref"),w$3=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$3(tt){return tt===null||typeof tt!="object"?null:(tt=z$3&&tt[z$3]||tt["@@iterator"],typeof tt=="function"?tt:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$3={};function E$2(tt,et,rt){this.props=tt,this.context=et,this.refs=D$3,this.updater=rt||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(tt,et){if(typeof tt!="object"&&typeof tt!="function"&&tt!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,tt,et,"setState")};E$2.prototype.forceUpdate=function(tt){this.updater.enqueueForceUpdate(this,tt,"forceUpdate")};function F$3(){}F$3.prototype=E$2.prototype;function G$3(tt,et,rt){this.props=tt,this.context=et,this.refs=D$3,this.updater=rt||B$2}var H$2=G$3.prototype=new F$3;H$2.constructor=G$3;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$3=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$3(tt,et,rt){var nt,at={},it=null,st=null;if(et!=null)for(nt in et.ref!==void 0&&(st=et.ref),et.key!==void 0&&(it=""+et.key),et)J$2.call(et,nt)&&!L$2.hasOwnProperty(nt)&&(at[nt]=et[nt]);var dt=arguments.length-2;if(dt===1)at.children=rt;else if(1<dt){for(var pt=Array(dt),mt=0;mt<dt;mt++)pt[mt]=arguments[mt+2];at.children=pt}if(tt&&tt.defaultProps)for(nt in dt=tt.defaultProps,dt)at[nt]===void 0&&(at[nt]=dt[nt]);return{$$typeof:l$3,type:tt,key:it,ref:st,props:at,_owner:K$2.current}}function N$2(tt,et){return{$$typeof:l$3,type:tt.type,key:et,ref:tt.ref,props:tt.props,_owner:tt._owner}}function O$2(tt){return typeof tt=="object"&&tt!==null&&tt.$$typeof===l$3}function escape(tt){var et={"=":"=0",":":"=2"};return"$"+tt.replace(/[=:]/g,function(rt){return et[rt]})}var P$2=/\/+/g;function Q$3(tt,et){return typeof tt=="object"&&tt!==null&&tt.key!=null?escape(""+tt.key):et.toString(36)}function R$1(tt,et,rt,nt,at){var it=typeof tt;(it==="undefined"||it==="boolean")&&(tt=null);var st=!1;if(tt===null)st=!0;else switch(it){case"string":case"number":st=!0;break;case"object":switch(tt.$$typeof){case l$3:case n$4:st=!0}}if(st)return st=tt,at=at(st),tt=nt===""?"."+Q$3(st,0):nt,I$3(at)?(rt="",tt!=null&&(rt=tt.replace(P$2,"$&/")+"/"),R$1(at,et,rt,"",function(mt){return mt})):at!=null&&(O$2(at)&&(at=N$2(at,rt+(!at.key||st&&st.key===at.key?"":(""+at.key).replace(P$2,"$&/")+"/")+tt)),et.push(at)),1;if(st=0,nt=nt===""?".":nt+":",I$3(tt))for(var dt=0;dt<tt.length;dt++){it=tt[dt];var pt=nt+Q$3(it,dt);st+=R$1(it,et,rt,pt,at)}else if(pt=A$3(tt),typeof pt=="function")for(tt=pt.call(tt),dt=0;!(it=tt.next()).done;)it=it.value,pt=nt+Q$3(it,dt++),st+=R$1(it,et,rt,pt,at);else if(it==="object")throw et=String(tt),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(tt).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.");return st}function S$3(tt,et,rt){if(tt==null)return tt;var nt=[],at=0;return R$1(tt,nt,"","",function(it){return et.call(rt,it,at++)}),nt}function T$4(tt){if(tt._status===-1){var et=tt._result;et=et(),et.then(function(rt){(tt._status===0||tt._status===-1)&&(tt._status=1,tt._result=rt)},function(rt){(tt._status===0||tt._status===-1)&&(tt._status=2,tt._result=rt)}),tt._status===-1&&(tt._status=0,tt._result=et)}if(tt._status===1)return tt._result.default;throw tt._result}var U$3={current:null},V$3={transition:null},W$3={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$2};function X$3(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$3,forEach:function(tt,et,rt){S$3(tt,function(){et.apply(this,arguments)},rt)},count:function(tt){var et=0;return S$3(tt,function(){et++}),et},toArray:function(tt){return S$3(tt,function(et){return et})||[]},only:function(tt){if(!O$2(tt))throw Error("React.Children.only expected to receive a single React element child.");return tt}};react_production_min.Component=E$2;react_production_min.Fragment=p$4;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$3;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$3;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.act=X$3;react_production_min.cloneElement=function(tt,et,rt){if(tt==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+tt+".");var nt=C$2({},tt.props),at=tt.key,it=tt.ref,st=tt._owner;if(et!=null){if(et.ref!==void 0&&(it=et.ref,st=K$2.current),et.key!==void 0&&(at=""+et.key),tt.type&&tt.type.defaultProps)var dt=tt.type.defaultProps;for(pt in et)J$2.call(et,pt)&&!L$2.hasOwnProperty(pt)&&(nt[pt]=et[pt]===void 0&&dt!==void 0?dt[pt]:et[pt])}var pt=arguments.length-2;if(pt===1)nt.children=rt;else if(1<pt){dt=Array(pt);for(var mt=0;mt<pt;mt++)dt[mt]=arguments[mt+2];nt.children=dt}return{$$typeof:l$3,type:tt.type,key:at,ref:it,props:nt,_owner:st}};react_production_min.createContext=function(tt){return tt={$$typeof:u$2,_currentValue:tt,_currentValue2:tt,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},tt.Provider={$$typeof:t$2,_context:tt},tt.Consumer=tt};react_production_min.createElement=M$3;react_production_min.createFactory=function(tt){var et=M$3.bind(null,tt);return et.type=tt,et};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(tt){return{$$typeof:v$4,render:tt}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(tt){return{$$typeof:y$2,_payload:{_status:-1,_result:tt},_init:T$4}};react_production_min.memo=function(tt,et){return{$$typeof:x$2,type:tt,compare:et===void 0?null:et}};react_production_min.startTransition=function(tt){var et=V$3.transition;V$3.transition={};try{tt()}finally{V$3.transition=et}};react_production_min.unstable_act=X$3;react_production_min.useCallback=function(tt,et){return U$3.current.useCallback(tt,et)};react_production_min.useContext=function(tt){return U$3.current.useContext(tt)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(tt){return U$3.current.useDeferredValue(tt)};react_production_min.useEffect=function(tt,et){return U$3.current.useEffect(tt,et)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(tt,et,rt){return U$3.current.useImperativeHandle(tt,et,rt)};react_production_min.useInsertionEffect=function(tt,et){return U$3.current.useInsertionEffect(tt,et)};react_production_min.useLayoutEffect=function(tt,et){return U$3.current.useLayoutEffect(tt,et)};react_production_min.useMemo=function(tt,et){return U$3.current.useMemo(tt,et)};react_production_min.useReducer=function(tt,et,rt){return U$3.current.useReducer(tt,et,rt)};react_production_min.useRef=function(tt){return U$3.current.useRef(tt)};react_production_min.useState=function(tt){return U$3.current.useState(tt)};react_production_min.useSyncExternalStore=function(tt,et,rt){return U$3.current.useSyncExternalStore(tt,et,rt)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs$5(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$2=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$3=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$2(tt,et,rt){var nt,at={},it=null,st=null;rt!==void 0&&(it=""+rt),et.key!==void 0&&(it=""+et.key),et.ref!==void 0&&(st=et.ref);for(nt in et)m$4.call(et,nt)&&!p$3.hasOwnProperty(nt)&&(at[nt]=et[nt]);if(tt&&tt.defaultProps)for(nt in et=tt.defaultProps,et)at[nt]===void 0&&(at[nt]=et[nt]);return{$$typeof:k$2,type:tt,key:it,ref:st,props:at,_owner:n$3.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(tt){function et($t,Et){var ct=$t.length;$t.push(Et);e:for(;0<ct;){var St=ct-1>>>1,Mt=$t[St];if(0<at(Mt,Et))$t[St]=Et,$t[ct]=Mt,ct=St;else break e}}function rt($t){return $t.length===0?null:$t[0]}function nt($t){if($t.length===0)return null;var Et=$t[0],ct=$t.pop();if(ct!==Et){$t[0]=ct;e:for(var St=0,Mt=$t.length,Lt=Mt>>>1;St<Lt;){var Ut=2*(St+1)-1,Kt=$t[Ut],Ht=Ut+1,Ft=$t[Ht];if(0>at(Kt,ct))Ht<Mt&&0>at(Ft,Kt)?($t[St]=Ft,$t[Ht]=ct,St=Ht):($t[St]=Kt,$t[Ut]=ct,St=Ut);else if(Ht<Mt&&0>at(Ft,ct))$t[St]=Ft,$t[Ht]=ct,St=Ht;else break e}}return Et}function at($t,Et){var ct=$t.sortIndex-Et.sortIndex;return ct!==0?ct:$t.id-Et.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;tt.unstable_now=function(){return it.now()}}else{var st=Date,dt=st.now();tt.unstable_now=function(){return st.now()-dt}}var pt=[],mt=[],yt=1,Rt=null,Tt=3,At=!1,xt=!1,Nt=!1,Ct=typeof setTimeout=="function"?setTimeout:null,Ot=typeof clearTimeout=="function"?clearTimeout:null,kt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Pt($t){for(var Et=rt(mt);Et!==null;){if(Et.callback===null)nt(mt);else if(Et.startTime<=$t)nt(mt),Et.sortIndex=Et.expirationTime,et(pt,Et);else break;Et=rt(mt)}}function Dt($t){if(Nt=!1,Pt($t),!xt)if(rt(pt)!==null)xt=!0,wt(Gt);else{var Et=rt(mt);Et!==null&&bt(Dt,Et.startTime-$t)}}function Gt($t,Et){xt=!1,Nt&&(Nt=!1,Ot(tr),tr=-1),At=!0;var ct=Tt;try{for(Pt(Et),Rt=rt(pt);Rt!==null&&(!(Rt.expirationTime>Et)||$t&&!It());){var St=Rt.callback;if(typeof St=="function"){Rt.callback=null,Tt=Rt.priorityLevel;var Mt=St(Rt.expirationTime<=Et);Et=tt.unstable_now(),typeof Mt=="function"?Rt.callback=Mt:Rt===rt(pt)&&nt(pt),Pt(Et)}else nt(pt);Rt=rt(pt)}if(Rt!==null)var Lt=!0;else{var Ut=rt(mt);Ut!==null&&bt(Dt,Ut.startTime-Et),Lt=!1}return Lt}finally{Rt=null,Tt=ct,At=!1}}var jt=!1,Yt=null,tr=-1,er=5,lr=-1;function It(){return!(tt.unstable_now()-lr<er)}function ot(){if(Yt!==null){var $t=tt.unstable_now();lr=$t;var Et=!0;try{Et=Yt(!0,$t)}finally{Et?ft():(jt=!1,Yt=null)}}else jt=!1}var ft;if(typeof kt=="function")ft=function(){kt(ot)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,vt=ht.port2;ht.port1.onmessage=ot,ft=function(){vt.postMessage(null)}}else ft=function(){Ct(ot,0)};function wt($t){Yt=$t,jt||(jt=!0,ft())}function bt($t,Et){tr=Ct(function(){$t(tt.unstable_now())},Et)}tt.unstable_IdlePriority=5,tt.unstable_ImmediatePriority=1,tt.unstable_LowPriority=4,tt.unstable_NormalPriority=3,tt.unstable_Profiling=null,tt.unstable_UserBlockingPriority=2,tt.unstable_cancelCallback=function($t){$t.callback=null},tt.unstable_continueExecution=function(){xt||At||(xt=!0,wt(Gt))},tt.unstable_forceFrameRate=function($t){0>$t||125<$t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):er=0<$t?Math.floor(1e3/$t):5},tt.unstable_getCurrentPriorityLevel=function(){return Tt},tt.unstable_getFirstCallbackNode=function(){return rt(pt)},tt.unstable_next=function($t){switch(Tt){case 1:case 2:case 3:var Et=3;break;default:Et=Tt}var ct=Tt;Tt=Et;try{return $t()}finally{Tt=ct}},tt.unstable_pauseExecution=function(){},tt.unstable_requestPaint=function(){},tt.unstable_runWithPriority=function($t,Et){switch($t){case 1:case 2:case 3:case 4:case 5:break;default:$t=3}var ct=Tt;Tt=$t;try{return Et()}finally{Tt=ct}},tt.unstable_scheduleCallback=function($t,Et,ct){var St=tt.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?St+ct:St):ct=St,$t){case 1:var Mt=-1;break;case 2:Mt=250;break;case 5:Mt=1073741823;break;case 4:Mt=1e4;break;default:Mt=5e3}return Mt=ct+Mt,$t={id:yt++,callback:Et,priorityLevel:$t,startTime:ct,expirationTime:Mt,sortIndex:-1},ct>St?($t.sortIndex=ct,et(mt,$t),rt(pt)===null&&$t===rt(mt)&&(Nt?(Ot(tr),tr=-1):Nt=!0,bt(Dt,ct-St))):($t.sortIndex=Mt,et(pt,$t),xt||At||(xt=!0,wt(Gt))),$t},tt.unstable_shouldYield=It,tt.unstable_wrapCallback=function($t){var Et=Tt;return function(){var ct=Tt;Tt=Et;try{return $t.apply(this,arguments)}finally{Tt=ct}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(tt){for(var et="https://reactjs.org/docs/error-decoder.html?invariant="+tt,rt=1;rt<arguments.length;rt++)et+="&args[]="+encodeURIComponent(arguments[rt]);return"Minified React error #"+tt+"; visit "+et+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(tt,et){ha(tt,et),ha(tt+"Capture",et)}function ha(tt,et){for(ea[tt]=et,tt=0;tt<et.length;tt++)da.add(et[tt])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(tt){return ja.call(ma,tt)?!0:ja.call(la,tt)?!1:ka.test(tt)?ma[tt]=!0:(la[tt]=!0,!1)}function pa(tt,et,rt,nt){if(rt!==null&&rt.type===0)return!1;switch(typeof et){case"function":case"symbol":return!0;case"boolean":return nt?!1:rt!==null?!rt.acceptsBooleans:(tt=tt.toLowerCase().slice(0,5),tt!=="data-"&&tt!=="aria-");default:return!1}}function qa(tt,et,rt,nt){if(et===null||typeof et>"u"||pa(tt,et,rt,nt))return!0;if(nt)return!1;if(rt!==null)switch(rt.type){case 3:return!et;case 4:return et===!1;case 5:return isNaN(et);case 6:return isNaN(et)||1>et}return!1}function v$3(tt,et,rt,nt,at,it,st){this.acceptsBooleans=et===2||et===3||et===4,this.attributeName=nt,this.attributeNamespace=at,this.mustUseProperty=rt,this.propertyName=tt,this.type=et,this.sanitizeURL=it,this.removeEmptyString=st}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(tt){z$2[tt]=new v$3(tt,0,!1,tt,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(tt){var et=tt[0];z$2[et]=new v$3(et,1,!1,tt[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(tt){z$2[tt]=new v$3(tt,2,!1,tt.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(tt){z$2[tt]=new v$3(tt,2,!1,tt,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(tt){z$2[tt]=new v$3(tt,3,!1,tt.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(tt){z$2[tt]=new v$3(tt,3,!0,tt,null,!1,!1)});["capture","download"].forEach(function(tt){z$2[tt]=new v$3(tt,4,!1,tt,null,!1,!1)});["cols","rows","size","span"].forEach(function(tt){z$2[tt]=new v$3(tt,6,!1,tt,null,!1,!1)});["rowSpan","start"].forEach(function(tt){z$2[tt]=new v$3(tt,5,!1,tt.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(tt){return tt[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(tt){var et=tt.replace(ra,sa);z$2[et]=new v$3(et,1,!1,tt,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(tt){var et=tt.replace(ra,sa);z$2[et]=new v$3(et,1,!1,tt,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(tt){var et=tt.replace(ra,sa);z$2[et]=new v$3(et,1,!1,tt,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(tt){z$2[tt]=new v$3(tt,1,!1,tt.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$3("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(tt){z$2[tt]=new v$3(tt,1,!1,tt.toLowerCase(),null,!0,!0)});function ta(tt,et,rt,nt){var at=z$2.hasOwnProperty(et)?z$2[et]:null;(at!==null?at.type!==0:nt||!(2<et.length)||et[0]!=="o"&&et[0]!=="O"||et[1]!=="n"&&et[1]!=="N")&&(qa(et,rt,at,nt)&&(rt=null),nt||at===null?oa(et)&&(rt===null?tt.removeAttribute(et):tt.setAttribute(et,""+rt)):at.mustUseProperty?tt[at.propertyName]=rt===null?at.type===3?!1:"":rt:(et=at.attributeName,nt=at.attributeNamespace,rt===null?tt.removeAttribute(et):(at=at.type,rt=at===3||at===4&&rt===!0?"":""+rt,nt?tt.setAttributeNS(nt,et,rt):tt.setAttribute(et,rt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(tt){return tt===null||typeof tt!="object"?null:(tt=Ja&&tt[Ja]||tt["@@iterator"],typeof tt=="function"?tt:null)}var A$2=Object.assign,La;function Ma(tt){if(La===void 0)try{throw Error()}catch(rt){var et=rt.stack.trim().match(/\n( *(at )?)/);La=et&&et[1]||""}return`
`+La+tt}var Na=!1;function Oa(tt,et){if(!tt||Na)return"";Na=!0;var rt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(et)if(et=function(){throw Error()},Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(mt){var nt=mt}Reflect.construct(tt,[],et)}else{try{et.call()}catch(mt){nt=mt}tt.call(et.prototype)}else{try{throw Error()}catch(mt){nt=mt}tt()}}catch(mt){if(mt&&nt&&typeof mt.stack=="string"){for(var at=mt.stack.split(`
`),it=nt.stack.split(`
`),st=at.length-1,dt=it.length-1;1<=st&&0<=dt&&at[st]!==it[dt];)dt--;for(;1<=st&&0<=dt;st--,dt--)if(at[st]!==it[dt]){if(st!==1||dt!==1)do if(st--,dt--,0>dt||at[st]!==it[dt]){var pt=`
`+at[st].replace(" at new "," at ");return tt.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",tt.displayName)),pt}while(1<=st&&0<=dt);break}}}finally{Na=!1,Error.prepareStackTrace=rt}return(tt=tt?tt.displayName||tt.name:"")?Ma(tt):""}function Pa(tt){switch(tt.tag){case 5:return Ma(tt.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return tt=Oa(tt.type,!1),tt;case 11:return tt=Oa(tt.type.render,!1),tt;case 1:return tt=Oa(tt.type,!0),tt;default:return""}}function Qa(tt){if(tt==null)return null;if(typeof tt=="function")return tt.displayName||tt.name||null;if(typeof tt=="string")return tt;switch(tt){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof tt=="object")switch(tt.$$typeof){case Ca:return(tt.displayName||"Context")+".Consumer";case Ba:return(tt._context.displayName||"Context")+".Provider";case Da:var et=tt.render;return tt=tt.displayName,tt||(tt=et.displayName||et.name||"",tt=tt!==""?"ForwardRef("+tt+")":"ForwardRef"),tt;case Ga:return et=tt.displayName||null,et!==null?et:Qa(tt.type)||"Memo";case Ha:et=tt._payload,tt=tt._init;try{return Qa(tt(et))}catch{}}return null}function Ra(tt){var et=tt.type;switch(tt.tag){case 24:return"Cache";case 9:return(et.displayName||"Context")+".Consumer";case 10:return(et._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return tt=et.render,tt=tt.displayName||tt.name||"",et.displayName||(tt!==""?"ForwardRef("+tt+")":"ForwardRef");case 7:return"Fragment";case 5:return et;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(et);case 8:return et===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof et=="function")return et.displayName||et.name||null;if(typeof et=="string")return et}return null}function Sa(tt){switch(typeof tt){case"boolean":case"number":case"string":case"undefined":return tt;case"object":return tt;default:return""}}function Ta(tt){var et=tt.type;return(tt=tt.nodeName)&&tt.toLowerCase()==="input"&&(et==="checkbox"||et==="radio")}function Ua(tt){var et=Ta(tt)?"checked":"value",rt=Object.getOwnPropertyDescriptor(tt.constructor.prototype,et),nt=""+tt[et];if(!tt.hasOwnProperty(et)&&typeof rt<"u"&&typeof rt.get=="function"&&typeof rt.set=="function"){var at=rt.get,it=rt.set;return Object.defineProperty(tt,et,{configurable:!0,get:function(){return at.call(this)},set:function(st){nt=""+st,it.call(this,st)}}),Object.defineProperty(tt,et,{enumerable:rt.enumerable}),{getValue:function(){return nt},setValue:function(st){nt=""+st},stopTracking:function(){tt._valueTracker=null,delete tt[et]}}}}function Va(tt){tt._valueTracker||(tt._valueTracker=Ua(tt))}function Wa(tt){if(!tt)return!1;var et=tt._valueTracker;if(!et)return!0;var rt=et.getValue(),nt="";return tt&&(nt=Ta(tt)?tt.checked?"true":"false":tt.value),tt=nt,tt!==rt?(et.setValue(tt),!0):!1}function Xa(tt){if(tt=tt||(typeof document<"u"?document:void 0),typeof tt>"u")return null;try{return tt.activeElement||tt.body}catch{return tt.body}}function Ya(tt,et){var rt=et.checked;return A$2({},et,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:rt??tt._wrapperState.initialChecked})}function Za(tt,et){var rt=et.defaultValue==null?"":et.defaultValue,nt=et.checked!=null?et.checked:et.defaultChecked;rt=Sa(et.value!=null?et.value:rt),tt._wrapperState={initialChecked:nt,initialValue:rt,controlled:et.type==="checkbox"||et.type==="radio"?et.checked!=null:et.value!=null}}function ab(tt,et){et=et.checked,et!=null&&ta(tt,"checked",et,!1)}function bb(tt,et){ab(tt,et);var rt=Sa(et.value),nt=et.type;if(rt!=null)nt==="number"?(rt===0&&tt.value===""||tt.value!=rt)&&(tt.value=""+rt):tt.value!==""+rt&&(tt.value=""+rt);else if(nt==="submit"||nt==="reset"){tt.removeAttribute("value");return}et.hasOwnProperty("value")?cb(tt,et.type,rt):et.hasOwnProperty("defaultValue")&&cb(tt,et.type,Sa(et.defaultValue)),et.checked==null&&et.defaultChecked!=null&&(tt.defaultChecked=!!et.defaultChecked)}function db(tt,et,rt){if(et.hasOwnProperty("value")||et.hasOwnProperty("defaultValue")){var nt=et.type;if(!(nt!=="submit"&&nt!=="reset"||et.value!==void 0&&et.value!==null))return;et=""+tt._wrapperState.initialValue,rt||et===tt.value||(tt.value=et),tt.defaultValue=et}rt=tt.name,rt!==""&&(tt.name=""),tt.defaultChecked=!!tt._wrapperState.initialChecked,rt!==""&&(tt.name=rt)}function cb(tt,et,rt){(et!=="number"||Xa(tt.ownerDocument)!==tt)&&(rt==null?tt.defaultValue=""+tt._wrapperState.initialValue:tt.defaultValue!==""+rt&&(tt.defaultValue=""+rt))}var eb=Array.isArray;function fb(tt,et,rt,nt){if(tt=tt.options,et){et={};for(var at=0;at<rt.length;at++)et["$"+rt[at]]=!0;for(rt=0;rt<tt.length;rt++)at=et.hasOwnProperty("$"+tt[rt].value),tt[rt].selected!==at&&(tt[rt].selected=at),at&&nt&&(tt[rt].defaultSelected=!0)}else{for(rt=""+Sa(rt),et=null,at=0;at<tt.length;at++){if(tt[at].value===rt){tt[at].selected=!0,nt&&(tt[at].defaultSelected=!0);return}et!==null||tt[at].disabled||(et=tt[at])}et!==null&&(et.selected=!0)}}function gb(tt,et){if(et.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$2({},et,{value:void 0,defaultValue:void 0,children:""+tt._wrapperState.initialValue})}function hb(tt,et){var rt=et.value;if(rt==null){if(rt=et.children,et=et.defaultValue,rt!=null){if(et!=null)throw Error(p$2(92));if(eb(rt)){if(1<rt.length)throw Error(p$2(93));rt=rt[0]}et=rt}et==null&&(et=""),rt=et}tt._wrapperState={initialValue:Sa(rt)}}function ib(tt,et){var rt=Sa(et.value),nt=Sa(et.defaultValue);rt!=null&&(rt=""+rt,rt!==tt.value&&(tt.value=rt),et.defaultValue==null&&tt.defaultValue!==rt&&(tt.defaultValue=rt)),nt!=null&&(tt.defaultValue=""+nt)}function jb(tt){var et=tt.textContent;et===tt._wrapperState.initialValue&&et!==""&&et!==null&&(tt.value=et)}function kb(tt){switch(tt){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(tt,et){return tt==null||tt==="http://www.w3.org/1999/xhtml"?kb(et):tt==="http://www.w3.org/2000/svg"&&et==="foreignObject"?"http://www.w3.org/1999/xhtml":tt}var mb,nb=function(tt){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(et,rt,nt,at){MSApp.execUnsafeLocalFunction(function(){return tt(et,rt,nt,at)})}:tt}(function(tt,et){if(tt.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in tt)tt.innerHTML=et;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+et.valueOf().toString()+"</svg>",et=mb.firstChild;tt.firstChild;)tt.removeChild(tt.firstChild);for(;et.firstChild;)tt.appendChild(et.firstChild)}});function ob(tt,et){if(et){var rt=tt.firstChild;if(rt&&rt===tt.lastChild&&rt.nodeType===3){rt.nodeValue=et;return}}tt.textContent=et}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(tt){qb.forEach(function(et){et=et+tt.charAt(0).toUpperCase()+tt.substring(1),pb[et]=pb[tt]})});function rb(tt,et,rt){return et==null||typeof et=="boolean"||et===""?"":rt||typeof et!="number"||et===0||pb.hasOwnProperty(tt)&&pb[tt]?(""+et).trim():et+"px"}function sb(tt,et){tt=tt.style;for(var rt in et)if(et.hasOwnProperty(rt)){var nt=rt.indexOf("--")===0,at=rb(rt,et[rt],nt);rt==="float"&&(rt="cssFloat"),nt?tt.setProperty(rt,at):tt[rt]=at}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(tt,et){if(et){if(tb[tt]&&(et.children!=null||et.dangerouslySetInnerHTML!=null))throw Error(p$2(137,tt));if(et.dangerouslySetInnerHTML!=null){if(et.children!=null)throw Error(p$2(60));if(typeof et.dangerouslySetInnerHTML!="object"||!("__html"in et.dangerouslySetInnerHTML))throw Error(p$2(61))}if(et.style!=null&&typeof et.style!="object")throw Error(p$2(62))}}function vb(tt,et){if(tt.indexOf("-")===-1)return typeof et.is=="string";switch(tt){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(tt){return tt=tt.target||tt.srcElement||window,tt.correspondingUseElement&&(tt=tt.correspondingUseElement),tt.nodeType===3?tt.parentNode:tt}var yb=null,zb=null,Ab=null;function Bb(tt){if(tt=Cb(tt)){if(typeof yb!="function")throw Error(p$2(280));var et=tt.stateNode;et&&(et=Db(et),yb(tt.stateNode,tt.type,et))}}function Eb(tt){zb?Ab?Ab.push(tt):Ab=[tt]:zb=tt}function Fb(){if(zb){var tt=zb,et=Ab;if(Ab=zb=null,Bb(tt),et)for(tt=0;tt<et.length;tt++)Bb(et[tt])}}function Gb(tt,et){return tt(et)}function Hb(){}var Ib=!1;function Jb(tt,et,rt){if(Ib)return tt(et,rt);Ib=!0;try{return Gb(tt,et,rt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(tt,et){var rt=tt.stateNode;if(rt===null)return null;var nt=Db(rt);if(nt===null)return null;rt=nt[et];e:switch(et){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(nt=!nt.disabled)||(tt=tt.type,nt=!(tt==="button"||tt==="input"||tt==="select"||tt==="textarea")),tt=!nt;break e;default:tt=!1}if(tt)return null;if(rt&&typeof rt!="function")throw Error(p$2(231,et,typeof rt));return rt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(tt,et,rt,nt,at,it,st,dt,pt){var mt=Array.prototype.slice.call(arguments,3);try{et.apply(rt,mt)}catch(yt){this.onError(yt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(tt){Ob=!0,Pb=tt}};function Tb(tt,et,rt,nt,at,it,st,dt,pt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(tt,et,rt,nt,at,it,st,dt,pt){if(Tb.apply(this,arguments),Ob){if(Ob){var mt=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=mt)}}function Vb(tt){var et=tt,rt=tt;if(tt.alternate)for(;et.return;)et=et.return;else{tt=et;do et=tt,et.flags&4098&&(rt=et.return),tt=et.return;while(tt)}return et.tag===3?rt:null}function Wb(tt){if(tt.tag===13){var et=tt.memoizedState;if(et===null&&(tt=tt.alternate,tt!==null&&(et=tt.memoizedState)),et!==null)return et.dehydrated}return null}function Xb(tt){if(Vb(tt)!==tt)throw Error(p$2(188))}function Yb(tt){var et=tt.alternate;if(!et){if(et=Vb(tt),et===null)throw Error(p$2(188));return et!==tt?null:tt}for(var rt=tt,nt=et;;){var at=rt.return;if(at===null)break;var it=at.alternate;if(it===null){if(nt=at.return,nt!==null){rt=nt;continue}break}if(at.child===it.child){for(it=at.child;it;){if(it===rt)return Xb(at),tt;if(it===nt)return Xb(at),et;it=it.sibling}throw Error(p$2(188))}if(rt.return!==nt.return)rt=at,nt=it;else{for(var st=!1,dt=at.child;dt;){if(dt===rt){st=!0,rt=at,nt=it;break}if(dt===nt){st=!0,nt=at,rt=it;break}dt=dt.sibling}if(!st){for(dt=it.child;dt;){if(dt===rt){st=!0,rt=it,nt=at;break}if(dt===nt){st=!0,nt=it,rt=at;break}dt=dt.sibling}if(!st)throw Error(p$2(189))}}if(rt.alternate!==nt)throw Error(p$2(190))}if(rt.tag!==3)throw Error(p$2(188));return rt.stateNode.current===rt?tt:et}function Zb(tt){return tt=Yb(tt),tt!==null?$b(tt):null}function $b(tt){if(tt.tag===5||tt.tag===6)return tt;for(tt=tt.child;tt!==null;){var et=$b(tt);if(et!==null)return et;tt=tt.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec$1=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(tt){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,tt,void 0,(tt.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(tt){return tt>>>=0,tt===0?32:31-(pc(tt)/qc|0)|0}var rc=64,sc=4194304;function tc(tt){switch(tt&-tt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return tt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return tt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return tt}}function uc(tt,et){var rt=tt.pendingLanes;if(rt===0)return 0;var nt=0,at=tt.suspendedLanes,it=tt.pingedLanes,st=rt&268435455;if(st!==0){var dt=st&~at;dt!==0?nt=tc(dt):(it&=st,it!==0&&(nt=tc(it)))}else st=rt&~at,st!==0?nt=tc(st):it!==0&&(nt=tc(it));if(nt===0)return 0;if(et!==0&&et!==nt&&!(et&at)&&(at=nt&-nt,it=et&-et,at>=it||at===16&&(it&4194240)!==0))return et;if(nt&4&&(nt|=rt&16),et=tt.entangledLanes,et!==0)for(tt=tt.entanglements,et&=nt;0<et;)rt=31-oc(et),at=1<<rt,nt|=tt[rt],et&=~at;return nt}function vc(tt,et){switch(tt){case 1:case 2:case 4:return et+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return et+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(tt,et){for(var rt=tt.suspendedLanes,nt=tt.pingedLanes,at=tt.expirationTimes,it=tt.pendingLanes;0<it;){var st=31-oc(it),dt=1<<st,pt=at[st];pt===-1?(!(dt&rt)||dt&nt)&&(at[st]=vc(dt,et)):pt<=et&&(tt.expiredLanes|=dt),it&=~dt}}function xc(tt){return tt=tt.pendingLanes&-1073741825,tt!==0?tt:tt&1073741824?1073741824:0}function yc(){var tt=rc;return rc<<=1,!(rc&4194240)&&(rc=64),tt}function zc(tt){for(var et=[],rt=0;31>rt;rt++)et.push(tt);return et}function Ac(tt,et,rt){tt.pendingLanes|=et,et!==536870912&&(tt.suspendedLanes=0,tt.pingedLanes=0),tt=tt.eventTimes,et=31-oc(et),tt[et]=rt}function Bc(tt,et){var rt=tt.pendingLanes&~et;tt.pendingLanes=et,tt.suspendedLanes=0,tt.pingedLanes=0,tt.expiredLanes&=et,tt.mutableReadLanes&=et,tt.entangledLanes&=et,et=tt.entanglements;var nt=tt.eventTimes;for(tt=tt.expirationTimes;0<rt;){var at=31-oc(rt),it=1<<at;et[at]=0,nt[at]=-1,tt[at]=-1,rt&=~it}}function Cc(tt,et){var rt=tt.entangledLanes|=et;for(tt=tt.entanglements;rt;){var nt=31-oc(rt),at=1<<nt;at&et|tt[nt]&et&&(tt[nt]|=et),rt&=~at}}var C$1=0;function Dc(tt){return tt&=-tt,1<tt?4<tt?tt&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(tt,et){switch(tt){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(et.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(et.pointerId)}}function Tc(tt,et,rt,nt,at,it){return tt===null||tt.nativeEvent!==it?(tt={blockedOn:et,domEventName:rt,eventSystemFlags:nt,nativeEvent:it,targetContainers:[at]},et!==null&&(et=Cb(et),et!==null&&Fc(et)),tt):(tt.eventSystemFlags|=nt,et=tt.targetContainers,at!==null&&et.indexOf(at)===-1&&et.push(at),tt)}function Uc(tt,et,rt,nt,at){switch(et){case"focusin":return Lc=Tc(Lc,tt,et,rt,nt,at),!0;case"dragenter":return Mc=Tc(Mc,tt,et,rt,nt,at),!0;case"mouseover":return Nc=Tc(Nc,tt,et,rt,nt,at),!0;case"pointerover":var it=at.pointerId;return Oc.set(it,Tc(Oc.get(it)||null,tt,et,rt,nt,at)),!0;case"gotpointercapture":return it=at.pointerId,Pc.set(it,Tc(Pc.get(it)||null,tt,et,rt,nt,at)),!0}return!1}function Vc(tt){var et=Wc(tt.target);if(et!==null){var rt=Vb(et);if(rt!==null){if(et=rt.tag,et===13){if(et=Wb(rt),et!==null){tt.blockedOn=et,Ic(tt.priority,function(){Gc(rt)});return}}else if(et===3&&rt.stateNode.current.memoizedState.isDehydrated){tt.blockedOn=rt.tag===3?rt.stateNode.containerInfo:null;return}}}tt.blockedOn=null}function Xc(tt){if(tt.blockedOn!==null)return!1;for(var et=tt.targetContainers;0<et.length;){var rt=Yc(tt.domEventName,tt.eventSystemFlags,et[0],tt.nativeEvent);if(rt===null){rt=tt.nativeEvent;var nt=new rt.constructor(rt.type,rt);wb=nt,rt.target.dispatchEvent(nt),wb=null}else return et=Cb(rt),et!==null&&Fc(et),tt.blockedOn=rt,!1;et.shift()}return!0}function Zc(tt,et,rt){Xc(tt)&&rt.delete(et)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(tt,et){tt.blockedOn===et&&(tt.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(tt){function et(at){return ad(at,tt)}if(0<Kc.length){ad(Kc[0],tt);for(var rt=1;rt<Kc.length;rt++){var nt=Kc[rt];nt.blockedOn===tt&&(nt.blockedOn=null)}}for(Lc!==null&&ad(Lc,tt),Mc!==null&&ad(Mc,tt),Nc!==null&&ad(Nc,tt),Oc.forEach(et),Pc.forEach(et),rt=0;rt<Qc.length;rt++)nt=Qc[rt],nt.blockedOn===tt&&(nt.blockedOn=null);for(;0<Qc.length&&(rt=Qc[0],rt.blockedOn===null);)Vc(rt),rt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(tt,et,rt,nt){var at=C$1,it=cd.transition;cd.transition=null;try{C$1=1,fd(tt,et,rt,nt)}finally{C$1=at,cd.transition=it}}function gd(tt,et,rt,nt){var at=C$1,it=cd.transition;cd.transition=null;try{C$1=4,fd(tt,et,rt,nt)}finally{C$1=at,cd.transition=it}}function fd(tt,et,rt,nt){if(dd){var at=Yc(tt,et,rt,nt);if(at===null)hd(tt,et,nt,id,rt),Sc(tt,nt);else if(Uc(at,tt,et,rt,nt))nt.stopPropagation();else if(Sc(tt,nt),et&4&&-1<Rc.indexOf(tt)){for(;at!==null;){var it=Cb(at);if(it!==null&&Ec(it),it=Yc(tt,et,rt,nt),it===null&&hd(tt,et,nt,id,rt),it===at)break;at=it}at!==null&&nt.stopPropagation()}else hd(tt,et,nt,null,rt)}}var id=null;function Yc(tt,et,rt,nt){if(id=null,tt=xb(nt),tt=Wc(tt),tt!==null)if(et=Vb(tt),et===null)tt=null;else if(rt=et.tag,rt===13){if(tt=Wb(et),tt!==null)return tt;tt=null}else if(rt===3){if(et.stateNode.current.memoizedState.isDehydrated)return et.tag===3?et.stateNode.containerInfo:null;tt=null}else et!==tt&&(tt=null);return id=tt,null}function jd(tt){switch(tt){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var tt,et=ld,rt=et.length,nt,at="value"in kd?kd.value:kd.textContent,it=at.length;for(tt=0;tt<rt&&et[tt]===at[tt];tt++);var st=rt-tt;for(nt=1;nt<=st&&et[rt-nt]===at[it-nt];nt++);return md=at.slice(tt,1<nt?1-nt:void 0)}function od(tt){var et=tt.keyCode;return"charCode"in tt?(tt=tt.charCode,tt===0&&et===13&&(tt=13)):tt=et,tt===10&&(tt=13),32<=tt||tt===13?tt:0}function pd(){return!0}function qd(){return!1}function rd(tt){function et(rt,nt,at,it,st){this._reactName=rt,this._targetInst=at,this.type=nt,this.nativeEvent=it,this.target=st,this.currentTarget=null;for(var dt in tt)tt.hasOwnProperty(dt)&&(rt=tt[dt],this[dt]=rt?rt(it):it[dt]);return this.isDefaultPrevented=(it.defaultPrevented!=null?it.defaultPrevented:it.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(et.prototype,{preventDefault:function(){this.defaultPrevented=!0;var rt=this.nativeEvent;rt&&(rt.preventDefault?rt.preventDefault():typeof rt.returnValue!="unknown"&&(rt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var rt=this.nativeEvent;rt&&(rt.stopPropagation?rt.stopPropagation():typeof rt.cancelBubble!="unknown"&&(rt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),et}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(tt){return tt.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(tt){return tt.relatedTarget===void 0?tt.fromElement===tt.srcElement?tt.toElement:tt.fromElement:tt.relatedTarget},movementX:function(tt){return"movementX"in tt?tt.movementX:(tt!==yd&&(yd&&tt.type==="mousemove"?(wd=tt.screenX-yd.screenX,xd=tt.screenY-yd.screenY):xd=wd=0,yd=tt),wd)},movementY:function(tt){return"movementY"in tt?tt.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(tt){return"clipboardData"in tt?tt.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(tt){var et=this.nativeEvent;return et.getModifierState?et.getModifierState(tt):(tt=Od[tt])?!!et[tt]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(tt){if(tt.key){var et=Md[tt.key]||tt.key;if(et!=="Unidentified")return et}return tt.type==="keypress"?(tt=od(tt),tt===13?"Enter":String.fromCharCode(tt)):tt.type==="keydown"||tt.type==="keyup"?Nd[tt.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(tt){return tt.type==="keypress"?od(tt):0},keyCode:function(tt){return tt.type==="keydown"||tt.type==="keyup"?tt.keyCode:0},which:function(tt){return tt.type==="keypress"?od(tt):tt.type==="keydown"||tt.type==="keyup"?tt.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(tt){return"deltaX"in tt?tt.deltaX:"wheelDeltaX"in tt?-tt.wheelDeltaX:0},deltaY:function(tt){return"deltaY"in tt?tt.deltaY:"wheelDeltaY"in tt?-tt.wheelDeltaY:"wheelDelta"in tt?-tt.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be$2=null;ia&&"documentMode"in document&&(be$2=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$2,de$2=ia&&(!ae$1||be$2&&8<be$2&&11>=be$2),ee$2=" ",fe$2=!1;function ge$2(tt,et){switch(tt){case"keyup":return $d.indexOf(et.keyCode)!==-1;case"keydown":return et.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(tt){return tt=tt.detail,typeof tt=="object"&&"data"in tt?tt.data:null}var ie$1=!1;function je$1(tt,et){switch(tt){case"compositionend":return he$2(et);case"keypress":return et.which!==32?null:(fe$2=!0,ee$2);case"textInput":return tt=et.data,tt===ee$2&&fe$2?null:tt;default:return null}}function ke$1(tt,et){if(ie$1)return tt==="compositionend"||!ae$1&&ge$2(tt,et)?(tt=nd(),md=ld=kd=null,ie$1=!1,tt):null;switch(tt){case"paste":return null;case"keypress":if(!(et.ctrlKey||et.altKey||et.metaKey)||et.ctrlKey&&et.altKey){if(et.char&&1<et.char.length)return et.char;if(et.which)return String.fromCharCode(et.which)}return null;case"compositionend":return de$2&&et.locale!=="ko"?null:et.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(tt){var et=tt&&tt.nodeName&&tt.nodeName.toLowerCase();return et==="input"?!!le$2[tt.type]:et==="textarea"}function ne$2(tt,et,rt,nt){Eb(nt),et=oe$2(et,"onChange"),0<et.length&&(rt=new td("onChange","change",null,rt,nt),tt.push({event:rt,listeners:et}))}var pe$2=null,qe$1=null;function re$2(tt){se$2(tt,0)}function te$1(tt){var et=ue$1(tt);if(Wa(et))return tt}function ve$2(tt,et){if(tt==="change")return et}var we$1=!1;if(ia){var xe$2;if(ia){var ye$2="oninput"in document;if(!ye$2){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$2=typeof ze$1.oninput=="function"}xe$2=ye$2}else xe$2=!1;we$1=xe$2&&(!document.documentMode||9<document.documentMode)}function Ae$2(){pe$2&&(pe$2.detachEvent("onpropertychange",Be$1),qe$1=pe$2=null)}function Be$1(tt){if(tt.propertyName==="value"&&te$1(qe$1)){var et=[];ne$2(et,qe$1,tt,xb(tt)),Jb(re$2,et)}}function Ce(tt,et,rt){tt==="focusin"?(Ae$2(),pe$2=et,qe$1=rt,pe$2.attachEvent("onpropertychange",Be$1)):tt==="focusout"&&Ae$2()}function De$1(tt){if(tt==="selectionchange"||tt==="keyup"||tt==="keydown")return te$1(qe$1)}function Ee$2(tt,et){if(tt==="click")return te$1(et)}function Fe$1(tt,et){if(tt==="input"||tt==="change")return te$1(et)}function Ge(tt,et){return tt===et&&(tt!==0||1/tt===1/et)||tt!==tt&&et!==et}var He=typeof Object.is=="function"?Object.is:Ge;function Ie$1(tt,et){if(He(tt,et))return!0;if(typeof tt!="object"||tt===null||typeof et!="object"||et===null)return!1;var rt=Object.keys(tt),nt=Object.keys(et);if(rt.length!==nt.length)return!1;for(nt=0;nt<rt.length;nt++){var at=rt[nt];if(!ja.call(et,at)||!He(tt[at],et[at]))return!1}return!0}function Je(tt){for(;tt&&tt.firstChild;)tt=tt.firstChild;return tt}function Ke(tt,et){var rt=Je(tt);tt=0;for(var nt;rt;){if(rt.nodeType===3){if(nt=tt+rt.textContent.length,tt<=et&&nt>=et)return{node:rt,offset:et-tt};tt=nt}e:{for(;rt;){if(rt.nextSibling){rt=rt.nextSibling;break e}rt=rt.parentNode}rt=void 0}rt=Je(rt)}}function Le(tt,et){return tt&&et?tt===et?!0:tt&&tt.nodeType===3?!1:et&&et.nodeType===3?Le(tt,et.parentNode):"contains"in tt?tt.contains(et):tt.compareDocumentPosition?!!(tt.compareDocumentPosition(et)&16):!1:!1}function Me$1(){for(var tt=window,et=Xa();et instanceof tt.HTMLIFrameElement;){try{var rt=typeof et.contentWindow.location.href=="string"}catch{rt=!1}if(rt)tt=et.contentWindow;else break;et=Xa(tt.document)}return et}function Ne$1(tt){var et=tt&&tt.nodeName&&tt.nodeName.toLowerCase();return et&&(et==="input"&&(tt.type==="text"||tt.type==="search"||tt.type==="tel"||tt.type==="url"||tt.type==="password")||et==="textarea"||tt.contentEditable==="true")}function Oe$1(tt){var et=Me$1(),rt=tt.focusedElem,nt=tt.selectionRange;if(et!==rt&&rt&&rt.ownerDocument&&Le(rt.ownerDocument.documentElement,rt)){if(nt!==null&&Ne$1(rt)){if(et=nt.start,tt=nt.end,tt===void 0&&(tt=et),"selectionStart"in rt)rt.selectionStart=et,rt.selectionEnd=Math.min(tt,rt.value.length);else if(tt=(et=rt.ownerDocument||document)&&et.defaultView||window,tt.getSelection){tt=tt.getSelection();var at=rt.textContent.length,it=Math.min(nt.start,at);nt=nt.end===void 0?it:Math.min(nt.end,at),!tt.extend&&it>nt&&(at=nt,nt=it,it=at),at=Ke(rt,it);var st=Ke(rt,nt);at&&st&&(tt.rangeCount!==1||tt.anchorNode!==at.node||tt.anchorOffset!==at.offset||tt.focusNode!==st.node||tt.focusOffset!==st.offset)&&(et=et.createRange(),et.setStart(at.node,at.offset),tt.removeAllRanges(),it>nt?(tt.addRange(et),tt.extend(st.node,st.offset)):(et.setEnd(st.node,st.offset),tt.addRange(et)))}}for(et=[],tt=rt;tt=tt.parentNode;)tt.nodeType===1&&et.push({element:tt,left:tt.scrollLeft,top:tt.scrollTop});for(typeof rt.focus=="function"&&rt.focus(),rt=0;rt<et.length;rt++)tt=et[rt],tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$2=null,Se$2=null,Te$2=!1;function Ue(tt,et,rt){var nt=rt.window===rt?rt.document:rt.nodeType===9?rt:rt.ownerDocument;Te$2||Qe==null||Qe!==Xa(nt)||(nt=Qe,"selectionStart"in nt&&Ne$1(nt)?nt={start:nt.selectionStart,end:nt.selectionEnd}:(nt=(nt.ownerDocument&&nt.ownerDocument.defaultView||window).getSelection(),nt={anchorNode:nt.anchorNode,anchorOffset:nt.anchorOffset,focusNode:nt.focusNode,focusOffset:nt.focusOffset}),Se$2&&Ie$1(Se$2,nt)||(Se$2=nt,nt=oe$2(Re$2,"onSelect"),0<nt.length&&(et=new td("onSelect","select",null,et,rt),tt.push({event:et,listeners:nt}),et.target=Qe)))}function Ve$1(tt,et){var rt={};return rt[tt.toLowerCase()]=et.toLowerCase(),rt["Webkit"+tt]="webkit"+et,rt["Moz"+tt]="moz"+et,rt}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe={},Ye$1={};ia&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze(tt){if(Xe[tt])return Xe[tt];if(!We$1[tt])return tt;var et=We$1[tt],rt;for(rt in et)if(et.hasOwnProperty(rt)&&rt in Ye$1)return Xe[tt]=et[rt];return tt}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(tt,et){df.set(tt,et),fa(et,[tt])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(tt,et,rt){var nt=tt.type||"unknown-event";tt.currentTarget=rt,Ub(nt,et,void 0,tt),tt.currentTarget=null}function se$2(tt,et){et=(et&4)!==0;for(var rt=0;rt<tt.length;rt++){var nt=tt[rt],at=nt.event;nt=nt.listeners;e:{var it=void 0;if(et)for(var st=nt.length-1;0<=st;st--){var dt=nt[st],pt=dt.instance,mt=dt.currentTarget;if(dt=dt.listener,pt!==it&&at.isPropagationStopped())break e;nf(at,dt,mt),it=pt}else for(st=0;st<nt.length;st++){if(dt=nt[st],pt=dt.instance,mt=dt.currentTarget,dt=dt.listener,pt!==it&&at.isPropagationStopped())break e;nf(at,dt,mt),it=pt}}}if(Qb)throw tt=Rb,Qb=!1,Rb=null,tt}function D$2(tt,et){var rt=et[of$1];rt===void 0&&(rt=et[of$1]=new Set);var nt=tt+"__bubble";rt.has(nt)||(pf(et,tt,2,!1),rt.add(nt))}function qf(tt,et,rt){var nt=0;et&&(nt|=4),pf(rt,tt,nt,et)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(tt){if(!tt[rf]){tt[rf]=!0,da.forEach(function(rt){rt!=="selectionchange"&&(mf.has(rt)||qf(rt,!1,tt),qf(rt,!0,tt))});var et=tt.nodeType===9?tt:tt.ownerDocument;et===null||et[rf]||(et[rf]=!0,qf("selectionchange",!1,et))}}function pf(tt,et,rt,nt){switch(jd(et)){case 1:var at=ed;break;case 4:at=gd;break;default:at=fd}rt=at.bind(null,et,rt,tt),at=void 0,!Lb||et!=="touchstart"&&et!=="touchmove"&&et!=="wheel"||(at=!0),nt?at!==void 0?tt.addEventListener(et,rt,{capture:!0,passive:at}):tt.addEventListener(et,rt,!0):at!==void 0?tt.addEventListener(et,rt,{passive:at}):tt.addEventListener(et,rt,!1)}function hd(tt,et,rt,nt,at){var it=nt;if(!(et&1)&&!(et&2)&&nt!==null)e:for(;;){if(nt===null)return;var st=nt.tag;if(st===3||st===4){var dt=nt.stateNode.containerInfo;if(dt===at||dt.nodeType===8&&dt.parentNode===at)break;if(st===4)for(st=nt.return;st!==null;){var pt=st.tag;if((pt===3||pt===4)&&(pt=st.stateNode.containerInfo,pt===at||pt.nodeType===8&&pt.parentNode===at))return;st=st.return}for(;dt!==null;){if(st=Wc(dt),st===null)return;if(pt=st.tag,pt===5||pt===6){nt=it=st;continue e}dt=dt.parentNode}}nt=nt.return}Jb(function(){var mt=it,yt=xb(rt),Rt=[];e:{var Tt=df.get(tt);if(Tt!==void 0){var At=td,xt=tt;switch(tt){case"keypress":if(od(rt)===0)break e;case"keydown":case"keyup":At=Rd;break;case"focusin":xt="focus",At=Fd;break;case"focusout":xt="blur",At=Fd;break;case"beforeblur":case"afterblur":At=Fd;break;case"click":if(rt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":At=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":At=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":At=Vd;break;case $e:case af:case bf:At=Hd;break;case cf:At=Xd;break;case"scroll":At=vd;break;case"wheel":At=Zd;break;case"copy":case"cut":case"paste":At=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":At=Td}var Nt=(et&4)!==0,Ct=!Nt&&tt==="scroll",Ot=Nt?Tt!==null?Tt+"Capture":null:Tt;Nt=[];for(var kt=mt,Pt;kt!==null;){Pt=kt;var Dt=Pt.stateNode;if(Pt.tag===5&&Dt!==null&&(Pt=Dt,Ot!==null&&(Dt=Kb(kt,Ot),Dt!=null&&Nt.push(tf(kt,Dt,Pt)))),Ct)break;kt=kt.return}0<Nt.length&&(Tt=new At(Tt,xt,null,rt,yt),Rt.push({event:Tt,listeners:Nt}))}}if(!(et&7)){e:{if(Tt=tt==="mouseover"||tt==="pointerover",At=tt==="mouseout"||tt==="pointerout",Tt&&rt!==wb&&(xt=rt.relatedTarget||rt.fromElement)&&(Wc(xt)||xt[uf]))break e;if((At||Tt)&&(Tt=yt.window===yt?yt:(Tt=yt.ownerDocument)?Tt.defaultView||Tt.parentWindow:window,At?(xt=rt.relatedTarget||rt.toElement,At=mt,xt=xt?Wc(xt):null,xt!==null&&(Ct=Vb(xt),xt!==Ct||xt.tag!==5&&xt.tag!==6)&&(xt=null)):(At=null,xt=mt),At!==xt)){if(Nt=Bd,Dt="onMouseLeave",Ot="onMouseEnter",kt="mouse",(tt==="pointerout"||tt==="pointerover")&&(Nt=Td,Dt="onPointerLeave",Ot="onPointerEnter",kt="pointer"),Ct=At==null?Tt:ue$1(At),Pt=xt==null?Tt:ue$1(xt),Tt=new Nt(Dt,kt+"leave",At,rt,yt),Tt.target=Ct,Tt.relatedTarget=Pt,Dt=null,Wc(yt)===mt&&(Nt=new Nt(Ot,kt+"enter",xt,rt,yt),Nt.target=Pt,Nt.relatedTarget=Ct,Dt=Nt),Ct=Dt,At&&xt)t:{for(Nt=At,Ot=xt,kt=0,Pt=Nt;Pt;Pt=vf(Pt))kt++;for(Pt=0,Dt=Ot;Dt;Dt=vf(Dt))Pt++;for(;0<kt-Pt;)Nt=vf(Nt),kt--;for(;0<Pt-kt;)Ot=vf(Ot),Pt--;for(;kt--;){if(Nt===Ot||Ot!==null&&Nt===Ot.alternate)break t;Nt=vf(Nt),Ot=vf(Ot)}Nt=null}else Nt=null;At!==null&&wf(Rt,Tt,At,Nt,!1),xt!==null&&Ct!==null&&wf(Rt,Ct,xt,Nt,!0)}}e:{if(Tt=mt?ue$1(mt):window,At=Tt.nodeName&&Tt.nodeName.toLowerCase(),At==="select"||At==="input"&&Tt.type==="file")var Gt=ve$2;else if(me(Tt))if(we$1)Gt=Fe$1;else{Gt=De$1;var jt=Ce}else(At=Tt.nodeName)&&At.toLowerCase()==="input"&&(Tt.type==="checkbox"||Tt.type==="radio")&&(Gt=Ee$2);if(Gt&&(Gt=Gt(tt,mt))){ne$2(Rt,Gt,rt,yt);break e}jt&&jt(tt,Tt,mt),tt==="focusout"&&(jt=Tt._wrapperState)&&jt.controlled&&Tt.type==="number"&&cb(Tt,"number",Tt.value)}switch(jt=mt?ue$1(mt):window,tt){case"focusin":(me(jt)||jt.contentEditable==="true")&&(Qe=jt,Re$2=mt,Se$2=null);break;case"focusout":Se$2=Re$2=Qe=null;break;case"mousedown":Te$2=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$2=!1,Ue(Rt,rt,yt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(Rt,rt,yt)}var Yt;if(ae$1)e:{switch(tt){case"compositionstart":var tr="onCompositionStart";break e;case"compositionend":tr="onCompositionEnd";break e;case"compositionupdate":tr="onCompositionUpdate";break e}tr=void 0}else ie$1?ge$2(tt,rt)&&(tr="onCompositionEnd"):tt==="keydown"&&rt.keyCode===229&&(tr="onCompositionStart");tr&&(de$2&&rt.locale!=="ko"&&(ie$1||tr!=="onCompositionStart"?tr==="onCompositionEnd"&&ie$1&&(Yt=nd()):(kd=yt,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),jt=oe$2(mt,tr),0<jt.length&&(tr=new Ld(tr,tt,null,rt,yt),Rt.push({event:tr,listeners:jt}),Yt?tr.data=Yt:(Yt=he$2(rt),Yt!==null&&(tr.data=Yt)))),(Yt=ce$1?je$1(tt,rt):ke$1(tt,rt))&&(mt=oe$2(mt,"onBeforeInput"),0<mt.length&&(yt=new Ld("onBeforeInput","beforeinput",null,rt,yt),Rt.push({event:yt,listeners:mt}),yt.data=Yt))}se$2(Rt,et)})}function tf(tt,et,rt){return{instance:tt,listener:et,currentTarget:rt}}function oe$2(tt,et){for(var rt=et+"Capture",nt=[];tt!==null;){var at=tt,it=at.stateNode;at.tag===5&&it!==null&&(at=it,it=Kb(tt,rt),it!=null&&nt.unshift(tf(tt,it,at)),it=Kb(tt,et),it!=null&&nt.push(tf(tt,it,at))),tt=tt.return}return nt}function vf(tt){if(tt===null)return null;do tt=tt.return;while(tt&&tt.tag!==5);return tt||null}function wf(tt,et,rt,nt,at){for(var it=et._reactName,st=[];rt!==null&&rt!==nt;){var dt=rt,pt=dt.alternate,mt=dt.stateNode;if(pt!==null&&pt===nt)break;dt.tag===5&&mt!==null&&(dt=mt,at?(pt=Kb(rt,it),pt!=null&&st.unshift(tf(rt,pt,dt))):at||(pt=Kb(rt,it),pt!=null&&st.push(tf(rt,pt,dt)))),rt=rt.return}st.length!==0&&tt.push({event:et,listeners:st})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(tt){return(typeof tt=="string"?tt:""+tt).replace(xf,`
`).replace(yf,"")}function Af(tt,et,rt){if(et=zf(et),zf(tt)!==et&&rt)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(tt,et){return tt==="textarea"||tt==="noscript"||typeof et.children=="string"||typeof et.children=="number"||typeof et.dangerouslySetInnerHTML=="object"&&et.dangerouslySetInnerHTML!==null&&et.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(tt){return Hf.resolve(null).then(tt).catch(If)}:Ff;function If(tt){setTimeout(function(){throw tt})}function Kf(tt,et){var rt=et,nt=0;do{var at=rt.nextSibling;if(tt.removeChild(rt),at&&at.nodeType===8)if(rt=at.data,rt==="/$"){if(nt===0){tt.removeChild(at),bd(et);return}nt--}else rt!=="$"&&rt!=="$?"&&rt!=="$!"||nt++;rt=at}while(rt);bd(et)}function Lf(tt){for(;tt!=null;tt=tt.nextSibling){var et=tt.nodeType;if(et===1||et===3)break;if(et===8){if(et=tt.data,et==="$"||et==="$!"||et==="$?")break;if(et==="/$")return null}}return tt}function Mf(tt){tt=tt.previousSibling;for(var et=0;tt;){if(tt.nodeType===8){var rt=tt.data;if(rt==="$"||rt==="$!"||rt==="$?"){if(et===0)return tt;et--}else rt==="/$"&&et++}tt=tt.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of$1="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(tt){var et=tt[Of];if(et)return et;for(var rt=tt.parentNode;rt;){if(et=rt[uf]||rt[Of]){if(rt=et.alternate,et.child!==null||rt!==null&&rt.child!==null)for(tt=Mf(tt);tt!==null;){if(rt=tt[Of])return rt;tt=Mf(tt)}return et}tt=rt,rt=tt.parentNode}return null}function Cb(tt){return tt=tt[Of]||tt[uf],!tt||tt.tag!==5&&tt.tag!==6&&tt.tag!==13&&tt.tag!==3?null:tt}function ue$1(tt){if(tt.tag===5||tt.tag===6)return tt.stateNode;throw Error(p$2(33))}function Db(tt){return tt[Pf]||null}var Sf=[],Tf=-1;function Uf(tt){return{current:tt}}function E$1(tt){0>Tf||(tt.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$2(tt,et){Tf++,Sf[Tf]=tt.current,tt.current=et}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(tt,et){var rt=tt.type.contextTypes;if(!rt)return Vf;var nt=tt.stateNode;if(nt&&nt.__reactInternalMemoizedUnmaskedChildContext===et)return nt.__reactInternalMemoizedMaskedChildContext;var at={},it;for(it in rt)at[it]=et[it];return nt&&(tt=tt.stateNode,tt.__reactInternalMemoizedUnmaskedChildContext=et,tt.__reactInternalMemoizedMaskedChildContext=at),at}function Zf(tt){return tt=tt.childContextTypes,tt!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(tt,et,rt){if(H$1.current!==Vf)throw Error(p$2(168));G$2(H$1,et),G$2(Wf,rt)}function bg(tt,et,rt){var nt=tt.stateNode;if(et=et.childContextTypes,typeof nt.getChildContext!="function")return rt;nt=nt.getChildContext();for(var at in nt)if(!(at in et))throw Error(p$2(108,Ra(tt)||"Unknown",at));return A$2({},rt,nt)}function cg(tt){return tt=(tt=tt.stateNode)&&tt.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$2(H$1,tt),G$2(Wf,Wf.current),!0}function dg(tt,et,rt){var nt=tt.stateNode;if(!nt)throw Error(p$2(169));rt?(tt=bg(tt,et,Xf),nt.__reactInternalMemoizedMergedChildContext=tt,E$1(Wf),E$1(H$1),G$2(H$1,tt)):E$1(Wf),G$2(Wf,rt)}var eg=null,fg=!1,gg=!1;function hg(tt){eg===null?eg=[tt]:eg.push(tt)}function ig(tt){fg=!0,hg(tt)}function jg(){if(!gg&&eg!==null){gg=!0;var tt=0,et=C$1;try{var rt=eg;for(C$1=1;tt<rt.length;tt++){var nt=rt[tt];do nt=nt(!0);while(nt!==null)}eg=null,fg=!1}catch(at){throw eg!==null&&(eg=eg.slice(tt+1)),ac(fc,jg),at}finally{C$1=et,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(tt,et){kg[lg++]=ng,kg[lg++]=mg,mg=tt,ng=et}function ug(tt,et,rt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=tt;var nt=rg;tt=sg;var at=32-oc(nt)-1;nt&=~(1<<at),rt+=1;var it=32-oc(et)+at;if(30<it){var st=at-at%5;it=(nt&(1<<st)-1).toString(32),nt>>=st,at-=st,rg=1<<32-oc(et)+at|rt<<at|nt,sg=it+tt}else rg=1<<it|rt<<at|nt,sg=tt}function vg(tt){tt.return!==null&&(tg(tt,1),ug(tt,1,0))}function wg(tt){for(;tt===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;tt===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$2=!1,zg=null;function Ag(tt,et){var rt=Bg(5,null,null,0);rt.elementType="DELETED",rt.stateNode=et,rt.return=tt,et=tt.deletions,et===null?(tt.deletions=[rt],tt.flags|=16):et.push(rt)}function Cg(tt,et){switch(tt.tag){case 5:var rt=tt.type;return et=et.nodeType!==1||rt.toLowerCase()!==et.nodeName.toLowerCase()?null:et,et!==null?(tt.stateNode=et,xg=tt,yg=Lf(et.firstChild),!0):!1;case 6:return et=tt.pendingProps===""||et.nodeType!==3?null:et,et!==null?(tt.stateNode=et,xg=tt,yg=null,!0):!1;case 13:return et=et.nodeType!==8?null:et,et!==null?(rt=qg!==null?{id:rg,overflow:sg}:null,tt.memoizedState={dehydrated:et,treeContext:rt,retryLane:1073741824},rt=Bg(18,null,null,0),rt.stateNode=et,rt.return=tt,tt.child=rt,xg=tt,yg=null,!0):!1;default:return!1}}function Dg(tt){return(tt.mode&1)!==0&&(tt.flags&128)===0}function Eg(tt){if(I$2){var et=yg;if(et){var rt=et;if(!Cg(tt,et)){if(Dg(tt))throw Error(p$2(418));et=Lf(rt.nextSibling);var nt=xg;et&&Cg(tt,et)?Ag(nt,rt):(tt.flags=tt.flags&-4097|2,I$2=!1,xg=tt)}}else{if(Dg(tt))throw Error(p$2(418));tt.flags=tt.flags&-4097|2,I$2=!1,xg=tt}}}function Fg(tt){for(tt=tt.return;tt!==null&&tt.tag!==5&&tt.tag!==3&&tt.tag!==13;)tt=tt.return;xg=tt}function Gg(tt){if(tt!==xg)return!1;if(!I$2)return Fg(tt),I$2=!0,!1;var et;if((et=tt.tag!==3)&&!(et=tt.tag!==5)&&(et=tt.type,et=et!=="head"&&et!=="body"&&!Ef(tt.type,tt.memoizedProps)),et&&(et=yg)){if(Dg(tt))throw Hg(),Error(p$2(418));for(;et;)Ag(tt,et),et=Lf(et.nextSibling)}if(Fg(tt),tt.tag===13){if(tt=tt.memoizedState,tt=tt!==null?tt.dehydrated:null,!tt)throw Error(p$2(317));e:{for(tt=tt.nextSibling,et=0;tt;){if(tt.nodeType===8){var rt=tt.data;if(rt==="/$"){if(et===0){yg=Lf(tt.nextSibling);break e}et--}else rt!=="$"&&rt!=="$!"&&rt!=="$?"||et++}tt=tt.nextSibling}yg=null}}else yg=xg?Lf(tt.stateNode.nextSibling):null;return!0}function Hg(){for(var tt=yg;tt;)tt=Lf(tt.nextSibling)}function Ig(){yg=xg=null,I$2=!1}function Jg(tt){zg===null?zg=[tt]:zg.push(tt)}var Kg=ua.ReactCurrentBatchConfig;function Lg(tt,et,rt){if(tt=rt.ref,tt!==null&&typeof tt!="function"&&typeof tt!="object"){if(rt._owner){if(rt=rt._owner,rt){if(rt.tag!==1)throw Error(p$2(309));var nt=rt.stateNode}if(!nt)throw Error(p$2(147,tt));var at=nt,it=""+tt;return et!==null&&et.ref!==null&&typeof et.ref=="function"&&et.ref._stringRef===it?et.ref:(et=function(st){var dt=at.refs;st===null?delete dt[it]:dt[it]=st},et._stringRef=it,et)}if(typeof tt!="string")throw Error(p$2(284));if(!rt._owner)throw Error(p$2(290,tt))}return tt}function Mg(tt,et){throw tt=Object.prototype.toString.call(et),Error(p$2(31,tt==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":tt))}function Ng(tt){var et=tt._init;return et(tt._payload)}function Og(tt){function et(Ot,kt){if(tt){var Pt=Ot.deletions;Pt===null?(Ot.deletions=[kt],Ot.flags|=16):Pt.push(kt)}}function rt(Ot,kt){if(!tt)return null;for(;kt!==null;)et(Ot,kt),kt=kt.sibling;return null}function nt(Ot,kt){for(Ot=new Map;kt!==null;)kt.key!==null?Ot.set(kt.key,kt):Ot.set(kt.index,kt),kt=kt.sibling;return Ot}function at(Ot,kt){return Ot=Pg(Ot,kt),Ot.index=0,Ot.sibling=null,Ot}function it(Ot,kt,Pt){return Ot.index=Pt,tt?(Pt=Ot.alternate,Pt!==null?(Pt=Pt.index,Pt<kt?(Ot.flags|=2,kt):Pt):(Ot.flags|=2,kt)):(Ot.flags|=1048576,kt)}function st(Ot){return tt&&Ot.alternate===null&&(Ot.flags|=2),Ot}function dt(Ot,kt,Pt,Dt){return kt===null||kt.tag!==6?(kt=Qg(Pt,Ot.mode,Dt),kt.return=Ot,kt):(kt=at(kt,Pt),kt.return=Ot,kt)}function pt(Ot,kt,Pt,Dt){var Gt=Pt.type;return Gt===ya?yt(Ot,kt,Pt.props.children,Dt,Pt.key):kt!==null&&(kt.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===Ha&&Ng(Gt)===kt.type)?(Dt=at(kt,Pt.props),Dt.ref=Lg(Ot,kt,Pt),Dt.return=Ot,Dt):(Dt=Rg(Pt.type,Pt.key,Pt.props,null,Ot.mode,Dt),Dt.ref=Lg(Ot,kt,Pt),Dt.return=Ot,Dt)}function mt(Ot,kt,Pt,Dt){return kt===null||kt.tag!==4||kt.stateNode.containerInfo!==Pt.containerInfo||kt.stateNode.implementation!==Pt.implementation?(kt=Sg(Pt,Ot.mode,Dt),kt.return=Ot,kt):(kt=at(kt,Pt.children||[]),kt.return=Ot,kt)}function yt(Ot,kt,Pt,Dt,Gt){return kt===null||kt.tag!==7?(kt=Tg(Pt,Ot.mode,Dt,Gt),kt.return=Ot,kt):(kt=at(kt,Pt),kt.return=Ot,kt)}function Rt(Ot,kt,Pt){if(typeof kt=="string"&&kt!==""||typeof kt=="number")return kt=Qg(""+kt,Ot.mode,Pt),kt.return=Ot,kt;if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case va:return Pt=Rg(kt.type,kt.key,kt.props,null,Ot.mode,Pt),Pt.ref=Lg(Ot,null,kt),Pt.return=Ot,Pt;case wa:return kt=Sg(kt,Ot.mode,Pt),kt.return=Ot,kt;case Ha:var Dt=kt._init;return Rt(Ot,Dt(kt._payload),Pt)}if(eb(kt)||Ka(kt))return kt=Tg(kt,Ot.mode,Pt,null),kt.return=Ot,kt;Mg(Ot,kt)}return null}function Tt(Ot,kt,Pt,Dt){var Gt=kt!==null?kt.key:null;if(typeof Pt=="string"&&Pt!==""||typeof Pt=="number")return Gt!==null?null:dt(Ot,kt,""+Pt,Dt);if(typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case va:return Pt.key===Gt?pt(Ot,kt,Pt,Dt):null;case wa:return Pt.key===Gt?mt(Ot,kt,Pt,Dt):null;case Ha:return Gt=Pt._init,Tt(Ot,kt,Gt(Pt._payload),Dt)}if(eb(Pt)||Ka(Pt))return Gt!==null?null:yt(Ot,kt,Pt,Dt,null);Mg(Ot,Pt)}return null}function At(Ot,kt,Pt,Dt,Gt){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number")return Ot=Ot.get(Pt)||null,dt(kt,Ot,""+Dt,Gt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case va:return Ot=Ot.get(Dt.key===null?Pt:Dt.key)||null,pt(kt,Ot,Dt,Gt);case wa:return Ot=Ot.get(Dt.key===null?Pt:Dt.key)||null,mt(kt,Ot,Dt,Gt);case Ha:var jt=Dt._init;return At(Ot,kt,Pt,jt(Dt._payload),Gt)}if(eb(Dt)||Ka(Dt))return Ot=Ot.get(Pt)||null,yt(kt,Ot,Dt,Gt,null);Mg(kt,Dt)}return null}function xt(Ot,kt,Pt,Dt){for(var Gt=null,jt=null,Yt=kt,tr=kt=0,er=null;Yt!==null&&tr<Pt.length;tr++){Yt.index>tr?(er=Yt,Yt=null):er=Yt.sibling;var lr=Tt(Ot,Yt,Pt[tr],Dt);if(lr===null){Yt===null&&(Yt=er);break}tt&&Yt&&lr.alternate===null&&et(Ot,Yt),kt=it(lr,kt,tr),jt===null?Gt=lr:jt.sibling=lr,jt=lr,Yt=er}if(tr===Pt.length)return rt(Ot,Yt),I$2&&tg(Ot,tr),Gt;if(Yt===null){for(;tr<Pt.length;tr++)Yt=Rt(Ot,Pt[tr],Dt),Yt!==null&&(kt=it(Yt,kt,tr),jt===null?Gt=Yt:jt.sibling=Yt,jt=Yt);return I$2&&tg(Ot,tr),Gt}for(Yt=nt(Ot,Yt);tr<Pt.length;tr++)er=At(Yt,Ot,tr,Pt[tr],Dt),er!==null&&(tt&&er.alternate!==null&&Yt.delete(er.key===null?tr:er.key),kt=it(er,kt,tr),jt===null?Gt=er:jt.sibling=er,jt=er);return tt&&Yt.forEach(function(It){return et(Ot,It)}),I$2&&tg(Ot,tr),Gt}function Nt(Ot,kt,Pt,Dt){var Gt=Ka(Pt);if(typeof Gt!="function")throw Error(p$2(150));if(Pt=Gt.call(Pt),Pt==null)throw Error(p$2(151));for(var jt=Gt=null,Yt=kt,tr=kt=0,er=null,lr=Pt.next();Yt!==null&&!lr.done;tr++,lr=Pt.next()){Yt.index>tr?(er=Yt,Yt=null):er=Yt.sibling;var It=Tt(Ot,Yt,lr.value,Dt);if(It===null){Yt===null&&(Yt=er);break}tt&&Yt&&It.alternate===null&&et(Ot,Yt),kt=it(It,kt,tr),jt===null?Gt=It:jt.sibling=It,jt=It,Yt=er}if(lr.done)return rt(Ot,Yt),I$2&&tg(Ot,tr),Gt;if(Yt===null){for(;!lr.done;tr++,lr=Pt.next())lr=Rt(Ot,lr.value,Dt),lr!==null&&(kt=it(lr,kt,tr),jt===null?Gt=lr:jt.sibling=lr,jt=lr);return I$2&&tg(Ot,tr),Gt}for(Yt=nt(Ot,Yt);!lr.done;tr++,lr=Pt.next())lr=At(Yt,Ot,tr,lr.value,Dt),lr!==null&&(tt&&lr.alternate!==null&&Yt.delete(lr.key===null?tr:lr.key),kt=it(lr,kt,tr),jt===null?Gt=lr:jt.sibling=lr,jt=lr);return tt&&Yt.forEach(function(ot){return et(Ot,ot)}),I$2&&tg(Ot,tr),Gt}function Ct(Ot,kt,Pt,Dt){if(typeof Pt=="object"&&Pt!==null&&Pt.type===ya&&Pt.key===null&&(Pt=Pt.props.children),typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case va:e:{for(var Gt=Pt.key,jt=kt;jt!==null;){if(jt.key===Gt){if(Gt=Pt.type,Gt===ya){if(jt.tag===7){rt(Ot,jt.sibling),kt=at(jt,Pt.props.children),kt.return=Ot,Ot=kt;break e}}else if(jt.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===Ha&&Ng(Gt)===jt.type){rt(Ot,jt.sibling),kt=at(jt,Pt.props),kt.ref=Lg(Ot,jt,Pt),kt.return=Ot,Ot=kt;break e}rt(Ot,jt);break}else et(Ot,jt);jt=jt.sibling}Pt.type===ya?(kt=Tg(Pt.props.children,Ot.mode,Dt,Pt.key),kt.return=Ot,Ot=kt):(Dt=Rg(Pt.type,Pt.key,Pt.props,null,Ot.mode,Dt),Dt.ref=Lg(Ot,kt,Pt),Dt.return=Ot,Ot=Dt)}return st(Ot);case wa:e:{for(jt=Pt.key;kt!==null;){if(kt.key===jt)if(kt.tag===4&&kt.stateNode.containerInfo===Pt.containerInfo&&kt.stateNode.implementation===Pt.implementation){rt(Ot,kt.sibling),kt=at(kt,Pt.children||[]),kt.return=Ot,Ot=kt;break e}else{rt(Ot,kt);break}else et(Ot,kt);kt=kt.sibling}kt=Sg(Pt,Ot.mode,Dt),kt.return=Ot,Ot=kt}return st(Ot);case Ha:return jt=Pt._init,Ct(Ot,kt,jt(Pt._payload),Dt)}if(eb(Pt))return xt(Ot,kt,Pt,Dt);if(Ka(Pt))return Nt(Ot,kt,Pt,Dt);Mg(Ot,Pt)}return typeof Pt=="string"&&Pt!==""||typeof Pt=="number"?(Pt=""+Pt,kt!==null&&kt.tag===6?(rt(Ot,kt.sibling),kt=at(kt,Pt),kt.return=Ot,Ot=kt):(rt(Ot,kt),kt=Qg(Pt,Ot.mode,Dt),kt.return=Ot,Ot=kt),st(Ot)):rt(Ot,kt)}return Ct}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(tt){var et=Wg.current;E$1(Wg),tt._currentValue=et}function bh(tt,et,rt){for(;tt!==null;){var nt=tt.alternate;if((tt.childLanes&et)!==et?(tt.childLanes|=et,nt!==null&&(nt.childLanes|=et)):nt!==null&&(nt.childLanes&et)!==et&&(nt.childLanes|=et),tt===rt)break;tt=tt.return}}function ch(tt,et){Xg=tt,Zg=Yg=null,tt=tt.dependencies,tt!==null&&tt.firstContext!==null&&(tt.lanes&et&&(dh$1=!0),tt.firstContext=null)}function eh(tt){var et=tt._currentValue;if(Zg!==tt)if(tt={context:tt,memoizedValue:et,next:null},Yg===null){if(Xg===null)throw Error(p$2(308));Yg=tt,Xg.dependencies={lanes:0,firstContext:tt}}else Yg=Yg.next=tt;return et}var fh=null;function gh(tt){fh===null?fh=[tt]:fh.push(tt)}function hh(tt,et,rt,nt){var at=et.interleaved;return at===null?(rt.next=rt,gh(et)):(rt.next=at.next,at.next=rt),et.interleaved=rt,ih(tt,nt)}function ih(tt,et){tt.lanes|=et;var rt=tt.alternate;for(rt!==null&&(rt.lanes|=et),rt=tt,tt=tt.return;tt!==null;)tt.childLanes|=et,rt=tt.alternate,rt!==null&&(rt.childLanes|=et),rt=tt,tt=tt.return;return rt.tag===3?rt.stateNode:null}var jh=!1;function kh(tt){tt.updateQueue={baseState:tt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(tt,et){tt=tt.updateQueue,et.updateQueue===tt&&(et.updateQueue={baseState:tt.baseState,firstBaseUpdate:tt.firstBaseUpdate,lastBaseUpdate:tt.lastBaseUpdate,shared:tt.shared,effects:tt.effects})}function mh(tt,et){return{eventTime:tt,lane:et,tag:0,payload:null,callback:null,next:null}}function nh(tt,et,rt){var nt=tt.updateQueue;if(nt===null)return null;if(nt=nt.shared,K$1&2){var at=nt.pending;return at===null?et.next=et:(et.next=at.next,at.next=et),nt.pending=et,ih(tt,rt)}return at=nt.interleaved,at===null?(et.next=et,gh(nt)):(et.next=at.next,at.next=et),nt.interleaved=et,ih(tt,rt)}function oh(tt,et,rt){if(et=et.updateQueue,et!==null&&(et=et.shared,(rt&4194240)!==0)){var nt=et.lanes;nt&=tt.pendingLanes,rt|=nt,et.lanes=rt,Cc(tt,rt)}}function ph(tt,et){var rt=tt.updateQueue,nt=tt.alternate;if(nt!==null&&(nt=nt.updateQueue,rt===nt)){var at=null,it=null;if(rt=rt.firstBaseUpdate,rt!==null){do{var st={eventTime:rt.eventTime,lane:rt.lane,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null};it===null?at=it=st:it=it.next=st,rt=rt.next}while(rt!==null);it===null?at=it=et:it=it.next=et}else at=it=et;rt={baseState:nt.baseState,firstBaseUpdate:at,lastBaseUpdate:it,shared:nt.shared,effects:nt.effects},tt.updateQueue=rt;return}tt=rt.lastBaseUpdate,tt===null?rt.firstBaseUpdate=et:tt.next=et,rt.lastBaseUpdate=et}function qh(tt,et,rt,nt){var at=tt.updateQueue;jh=!1;var it=at.firstBaseUpdate,st=at.lastBaseUpdate,dt=at.shared.pending;if(dt!==null){at.shared.pending=null;var pt=dt,mt=pt.next;pt.next=null,st===null?it=mt:st.next=mt,st=pt;var yt=tt.alternate;yt!==null&&(yt=yt.updateQueue,dt=yt.lastBaseUpdate,dt!==st&&(dt===null?yt.firstBaseUpdate=mt:dt.next=mt,yt.lastBaseUpdate=pt))}if(it!==null){var Rt=at.baseState;st=0,yt=mt=pt=null,dt=it;do{var Tt=dt.lane,At=dt.eventTime;if((nt&Tt)===Tt){yt!==null&&(yt=yt.next={eventTime:At,lane:0,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null});e:{var xt=tt,Nt=dt;switch(Tt=et,At=rt,Nt.tag){case 1:if(xt=Nt.payload,typeof xt=="function"){Rt=xt.call(At,Rt,Tt);break e}Rt=xt;break e;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=Nt.payload,Tt=typeof xt=="function"?xt.call(At,Rt,Tt):xt,Tt==null)break e;Rt=A$2({},Rt,Tt);break e;case 2:jh=!0}}dt.callback!==null&&dt.lane!==0&&(tt.flags|=64,Tt=at.effects,Tt===null?at.effects=[dt]:Tt.push(dt))}else At={eventTime:At,lane:Tt,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null},yt===null?(mt=yt=At,pt=Rt):yt=yt.next=At,st|=Tt;if(dt=dt.next,dt===null){if(dt=at.shared.pending,dt===null)break;Tt=dt,dt=Tt.next,Tt.next=null,at.lastBaseUpdate=Tt,at.shared.pending=null}}while(!0);if(yt===null&&(pt=Rt),at.baseState=pt,at.firstBaseUpdate=mt,at.lastBaseUpdate=yt,et=at.shared.interleaved,et!==null){at=et;do st|=at.lane,at=at.next;while(at!==et)}else it===null&&(at.shared.lanes=0);rh|=st,tt.lanes=st,tt.memoizedState=Rt}}function sh(tt,et,rt){if(tt=et.effects,et.effects=null,tt!==null)for(et=0;et<tt.length;et++){var nt=tt[et],at=nt.callback;if(at!==null){if(nt.callback=null,nt=rt,typeof at!="function")throw Error(p$2(191,at));at.call(nt)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(tt){if(tt===th)throw Error(p$2(174));return tt}function yh(tt,et){switch(G$2(wh,et),G$2(vh,tt),G$2(uh,th),tt=et.nodeType,tt){case 9:case 11:et=(et=et.documentElement)?et.namespaceURI:lb(null,"");break;default:tt=tt===8?et.parentNode:et,et=tt.namespaceURI||null,tt=tt.tagName,et=lb(et,tt)}E$1(uh),G$2(uh,et)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah(tt){xh(wh.current);var et=xh(uh.current),rt=lb(et,tt.type);et!==rt&&(G$2(vh,tt),G$2(uh,rt))}function Bh(tt){vh.current===tt&&(E$1(uh),E$1(vh))}var L$1=Uf(0);function Ch(tt){for(var et=tt;et!==null;){if(et.tag===13){var rt=et.memoizedState;if(rt!==null&&(rt=rt.dehydrated,rt===null||rt.data==="$?"||rt.data==="$!"))return et}else if(et.tag===19&&et.memoizedProps.revealOrder!==void 0){if(et.flags&128)return et}else if(et.child!==null){et.child.return=et,et=et.child;continue}if(et===tt)break;for(;et.sibling===null;){if(et.return===null||et.return===tt)return null;et=et.return}et.sibling.return=et.return,et=et.sibling}return null}var Dh=[];function Eh(){for(var tt=0;tt<Dh.length;tt++)Dh[tt]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$2=null,N$1=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p$2(321))}function Mh(tt,et){if(et===null)return!1;for(var rt=0;rt<et.length&&rt<tt.length;rt++)if(!He(tt[rt],et[rt]))return!1;return!0}function Nh(tt,et,rt,nt,at,it){if(Hh=it,M$2=et,et.memoizedState=null,et.updateQueue=null,et.lanes=0,Fh.current=tt===null||tt.memoizedState===null?Oh:Ph,tt=rt(nt,at),Jh){it=0;do{if(Jh=!1,Kh=0,25<=it)throw Error(p$2(301));it+=1,O$1=N$1=null,et.updateQueue=null,Fh.current=Qh,tt=rt(nt,at)}while(Jh)}if(Fh.current=Rh,et=N$1!==null&&N$1.next!==null,Hh=0,O$1=N$1=M$2=null,Ih=!1,et)throw Error(p$2(300));return tt}function Sh(){var tt=Kh!==0;return Kh=0,tt}function Th(){var tt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$2.memoizedState=O$1=tt:O$1=O$1.next=tt,O$1}function Uh(){if(N$1===null){var tt=M$2.alternate;tt=tt!==null?tt.memoizedState:null}else tt=N$1.next;var et=O$1===null?M$2.memoizedState:O$1.next;if(et!==null)O$1=et,N$1=tt;else{if(tt===null)throw Error(p$2(310));N$1=tt,tt={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O$1===null?M$2.memoizedState=O$1=tt:O$1=O$1.next=tt}return O$1}function Vh(tt,et){return typeof et=="function"?et(tt):et}function Wh(tt){var et=Uh(),rt=et.queue;if(rt===null)throw Error(p$2(311));rt.lastRenderedReducer=tt;var nt=N$1,at=nt.baseQueue,it=rt.pending;if(it!==null){if(at!==null){var st=at.next;at.next=it.next,it.next=st}nt.baseQueue=at=it,rt.pending=null}if(at!==null){it=at.next,nt=nt.baseState;var dt=st=null,pt=null,mt=it;do{var yt=mt.lane;if((Hh&yt)===yt)pt!==null&&(pt=pt.next={lane:0,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),nt=mt.hasEagerState?mt.eagerState:tt(nt,mt.action);else{var Rt={lane:yt,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null};pt===null?(dt=pt=Rt,st=nt):pt=pt.next=Rt,M$2.lanes|=yt,rh|=yt}mt=mt.next}while(mt!==null&&mt!==it);pt===null?st=nt:pt.next=dt,He(nt,et.memoizedState)||(dh$1=!0),et.memoizedState=nt,et.baseState=st,et.baseQueue=pt,rt.lastRenderedState=nt}if(tt=rt.interleaved,tt!==null){at=tt;do it=at.lane,M$2.lanes|=it,rh|=it,at=at.next;while(at!==tt)}else at===null&&(rt.lanes=0);return[et.memoizedState,rt.dispatch]}function Xh(tt){var et=Uh(),rt=et.queue;if(rt===null)throw Error(p$2(311));rt.lastRenderedReducer=tt;var nt=rt.dispatch,at=rt.pending,it=et.memoizedState;if(at!==null){rt.pending=null;var st=at=at.next;do it=tt(it,st.action),st=st.next;while(st!==at);He(it,et.memoizedState)||(dh$1=!0),et.memoizedState=it,et.baseQueue===null&&(et.baseState=it),rt.lastRenderedState=it}return[it,nt]}function Yh(){}function Zh(tt,et){var rt=M$2,nt=Uh(),at=et(),it=!He(nt.memoizedState,at);if(it&&(nt.memoizedState=at,dh$1=!0),nt=nt.queue,$h(ai.bind(null,rt,nt,tt),[tt]),nt.getSnapshot!==et||it||O$1!==null&&O$1.memoizedState.tag&1){if(rt.flags|=2048,bi(9,ci.bind(null,rt,nt,at,et),void 0,null),Q$2===null)throw Error(p$2(349));Hh&30||di(rt,et,at)}return at}function di(tt,et,rt){tt.flags|=16384,tt={getSnapshot:et,value:rt},et=M$2.updateQueue,et===null?(et={lastEffect:null,stores:null},M$2.updateQueue=et,et.stores=[tt]):(rt=et.stores,rt===null?et.stores=[tt]:rt.push(tt))}function ci(tt,et,rt,nt){et.value=rt,et.getSnapshot=nt,ei(et)&&fi(tt)}function ai(tt,et,rt){return rt(function(){ei(et)&&fi(tt)})}function ei(tt){var et=tt.getSnapshot;tt=tt.value;try{var rt=et();return!He(tt,rt)}catch{return!0}}function fi(tt){var et=ih(tt,1);et!==null&&gi(et,tt,1,-1)}function hi(tt){var et=Th();return typeof tt=="function"&&(tt=tt()),et.memoizedState=et.baseState=tt,tt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:tt},et.queue=tt,tt=tt.dispatch=ii.bind(null,M$2,tt),[et.memoizedState,tt]}function bi(tt,et,rt,nt){return tt={tag:tt,create:et,destroy:rt,deps:nt,next:null},et=M$2.updateQueue,et===null?(et={lastEffect:null,stores:null},M$2.updateQueue=et,et.lastEffect=tt.next=tt):(rt=et.lastEffect,rt===null?et.lastEffect=tt.next=tt:(nt=rt.next,rt.next=tt,tt.next=nt,et.lastEffect=tt)),tt}function ji(){return Uh().memoizedState}function ki(tt,et,rt,nt){var at=Th();M$2.flags|=tt,at.memoizedState=bi(1|et,rt,void 0,nt===void 0?null:nt)}function li(tt,et,rt,nt){var at=Uh();nt=nt===void 0?null:nt;var it=void 0;if(N$1!==null){var st=N$1.memoizedState;if(it=st.destroy,nt!==null&&Mh(nt,st.deps)){at.memoizedState=bi(et,rt,it,nt);return}}M$2.flags|=tt,at.memoizedState=bi(1|et,rt,it,nt)}function mi(tt,et){return ki(8390656,8,tt,et)}function $h(tt,et){return li(2048,8,tt,et)}function ni(tt,et){return li(4,2,tt,et)}function oi(tt,et){return li(4,4,tt,et)}function pi(tt,et){if(typeof et=="function")return tt=tt(),et(tt),function(){et(null)};if(et!=null)return tt=tt(),et.current=tt,function(){et.current=null}}function qi(tt,et,rt){return rt=rt!=null?rt.concat([tt]):null,li(4,4,pi.bind(null,et,tt),rt)}function ri(){}function si(tt,et){var rt=Uh();et=et===void 0?null:et;var nt=rt.memoizedState;return nt!==null&&et!==null&&Mh(et,nt[1])?nt[0]:(rt.memoizedState=[tt,et],tt)}function ti(tt,et){var rt=Uh();et=et===void 0?null:et;var nt=rt.memoizedState;return nt!==null&&et!==null&&Mh(et,nt[1])?nt[0]:(tt=tt(),rt.memoizedState=[tt,et],tt)}function ui(tt,et,rt){return Hh&21?(He(rt,et)||(rt=yc(),M$2.lanes|=rt,rh|=rt,tt.baseState=!0),et):(tt.baseState&&(tt.baseState=!1,dh$1=!0),tt.memoizedState=rt)}function vi(tt,et){var rt=C$1;C$1=rt!==0&&4>rt?rt:4,tt(!0);var nt=Gh.transition;Gh.transition={};try{tt(!1),et()}finally{C$1=rt,Gh.transition=nt}}function wi(){return Uh().memoizedState}function xi(tt,et,rt){var nt=yi(tt);if(rt={lane:nt,action:rt,hasEagerState:!1,eagerState:null,next:null},zi(tt))Ai(et,rt);else if(rt=hh(tt,et,rt,nt),rt!==null){var at=R();gi(rt,tt,nt,at),Bi(rt,et,nt)}}function ii(tt,et,rt){var nt=yi(tt),at={lane:nt,action:rt,hasEagerState:!1,eagerState:null,next:null};if(zi(tt))Ai(et,at);else{var it=tt.alternate;if(tt.lanes===0&&(it===null||it.lanes===0)&&(it=et.lastRenderedReducer,it!==null))try{var st=et.lastRenderedState,dt=it(st,rt);if(at.hasEagerState=!0,at.eagerState=dt,He(dt,st)){var pt=et.interleaved;pt===null?(at.next=at,gh(et)):(at.next=pt.next,pt.next=at),et.interleaved=at;return}}catch{}finally{}rt=hh(tt,et,at,nt),rt!==null&&(at=R(),gi(rt,tt,nt,at),Bi(rt,et,nt))}}function zi(tt){var et=tt.alternate;return tt===M$2||et!==null&&et===M$2}function Ai(tt,et){Jh=Ih=!0;var rt=tt.pending;rt===null?et.next=et:(et.next=rt.next,rt.next=et),tt.pending=et}function Bi(tt,et,rt){if(rt&4194240){var nt=et.lanes;nt&=tt.pendingLanes,rt|=nt,et.lanes=rt,Cc(tt,rt)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(tt,et){return Th().memoizedState=[tt,et===void 0?null:et],tt},useContext:eh,useEffect:mi,useImperativeHandle:function(tt,et,rt){return rt=rt!=null?rt.concat([tt]):null,ki(4194308,4,pi.bind(null,et,tt),rt)},useLayoutEffect:function(tt,et){return ki(4194308,4,tt,et)},useInsertionEffect:function(tt,et){return ki(4,2,tt,et)},useMemo:function(tt,et){var rt=Th();return et=et===void 0?null:et,tt=tt(),rt.memoizedState=[tt,et],tt},useReducer:function(tt,et,rt){var nt=Th();return et=rt!==void 0?rt(et):et,nt.memoizedState=nt.baseState=et,tt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tt,lastRenderedState:et},nt.queue=tt,tt=tt.dispatch=xi.bind(null,M$2,tt),[nt.memoizedState,tt]},useRef:function(tt){var et=Th();return tt={current:tt},et.memoizedState=tt},useState:hi,useDebugValue:ri,useDeferredValue:function(tt){return Th().memoizedState=tt},useTransition:function(){var tt=hi(!1),et=tt[0];return tt=vi.bind(null,tt[1]),Th().memoizedState=tt,[et,tt]},useMutableSource:function(){},useSyncExternalStore:function(tt,et,rt){var nt=M$2,at=Th();if(I$2){if(rt===void 0)throw Error(p$2(407));rt=rt()}else{if(rt=et(),Q$2===null)throw Error(p$2(349));Hh&30||di(nt,et,rt)}at.memoizedState=rt;var it={value:rt,getSnapshot:et};return at.queue=it,mi(ai.bind(null,nt,it,tt),[tt]),nt.flags|=2048,bi(9,ci.bind(null,nt,it,rt,et),void 0,null),rt},useId:function(){var tt=Th(),et=Q$2.identifierPrefix;if(I$2){var rt=sg,nt=rg;rt=(nt&~(1<<32-oc(nt)-1)).toString(32)+rt,et=":"+et+"R"+rt,rt=Kh++,0<rt&&(et+="H"+rt.toString(32)),et+=":"}else rt=Lh++,et=":"+et+"r"+rt.toString(32)+":";return tt.memoizedState=et},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(tt){var et=Uh();return ui(et,N$1.memoizedState,tt)},useTransition:function(){var tt=Wh(Vh)[0],et=Uh().memoizedState;return[tt,et]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(tt){var et=Uh();return N$1===null?et.memoizedState=tt:ui(et,N$1.memoizedState,tt)},useTransition:function(){var tt=Xh(Vh)[0],et=Uh().memoizedState;return[tt,et]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(tt,et){if(tt&&tt.defaultProps){et=A$2({},et),tt=tt.defaultProps;for(var rt in tt)et[rt]===void 0&&(et[rt]=tt[rt]);return et}return et}function Di(tt,et,rt,nt){et=tt.memoizedState,rt=rt(nt,et),rt=rt==null?et:A$2({},et,rt),tt.memoizedState=rt,tt.lanes===0&&(tt.updateQueue.baseState=rt)}var Ei={isMounted:function(tt){return(tt=tt._reactInternals)?Vb(tt)===tt:!1},enqueueSetState:function(tt,et,rt){tt=tt._reactInternals;var nt=R(),at=yi(tt),it=mh(nt,at);it.payload=et,rt!=null&&(it.callback=rt),et=nh(tt,it,at),et!==null&&(gi(et,tt,at,nt),oh(et,tt,at))},enqueueReplaceState:function(tt,et,rt){tt=tt._reactInternals;var nt=R(),at=yi(tt),it=mh(nt,at);it.tag=1,it.payload=et,rt!=null&&(it.callback=rt),et=nh(tt,it,at),et!==null&&(gi(et,tt,at,nt),oh(et,tt,at))},enqueueForceUpdate:function(tt,et){tt=tt._reactInternals;var rt=R(),nt=yi(tt),at=mh(rt,nt);at.tag=2,et!=null&&(at.callback=et),et=nh(tt,at,nt),et!==null&&(gi(et,tt,nt,rt),oh(et,tt,nt))}};function Fi(tt,et,rt,nt,at,it,st){return tt=tt.stateNode,typeof tt.shouldComponentUpdate=="function"?tt.shouldComponentUpdate(nt,it,st):et.prototype&&et.prototype.isPureReactComponent?!Ie$1(rt,nt)||!Ie$1(at,it):!0}function Gi(tt,et,rt){var nt=!1,at=Vf,it=et.contextType;return typeof it=="object"&&it!==null?it=eh(it):(at=Zf(et)?Xf:H$1.current,nt=et.contextTypes,it=(nt=nt!=null)?Yf(tt,at):Vf),et=new et(rt,it),tt.memoizedState=et.state!==null&&et.state!==void 0?et.state:null,et.updater=Ei,tt.stateNode=et,et._reactInternals=tt,nt&&(tt=tt.stateNode,tt.__reactInternalMemoizedUnmaskedChildContext=at,tt.__reactInternalMemoizedMaskedChildContext=it),et}function Hi(tt,et,rt,nt){tt=et.state,typeof et.componentWillReceiveProps=="function"&&et.componentWillReceiveProps(rt,nt),typeof et.UNSAFE_componentWillReceiveProps=="function"&&et.UNSAFE_componentWillReceiveProps(rt,nt),et.state!==tt&&Ei.enqueueReplaceState(et,et.state,null)}function Ii(tt,et,rt,nt){var at=tt.stateNode;at.props=rt,at.state=tt.memoizedState,at.refs={},kh(tt);var it=et.contextType;typeof it=="object"&&it!==null?at.context=eh(it):(it=Zf(et)?Xf:H$1.current,at.context=Yf(tt,it)),at.state=tt.memoizedState,it=et.getDerivedStateFromProps,typeof it=="function"&&(Di(tt,et,it,rt),at.state=tt.memoizedState),typeof et.getDerivedStateFromProps=="function"||typeof at.getSnapshotBeforeUpdate=="function"||typeof at.UNSAFE_componentWillMount!="function"&&typeof at.componentWillMount!="function"||(et=at.state,typeof at.componentWillMount=="function"&&at.componentWillMount(),typeof at.UNSAFE_componentWillMount=="function"&&at.UNSAFE_componentWillMount(),et!==at.state&&Ei.enqueueReplaceState(at,at.state,null),qh(tt,rt,at,nt),at.state=tt.memoizedState),typeof at.componentDidMount=="function"&&(tt.flags|=4194308)}function Ji(tt,et){try{var rt="",nt=et;do rt+=Pa(nt),nt=nt.return;while(nt);var at=rt}catch(it){at=`
Error generating stack: `+it.message+`
`+it.stack}return{value:tt,source:et,stack:at,digest:null}}function Ki(tt,et,rt){return{value:tt,source:null,stack:rt??null,digest:et??null}}function Li(tt,et){try{console.error(et.value)}catch(rt){setTimeout(function(){throw rt})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(tt,et,rt){rt=mh(-1,rt),rt.tag=3,rt.payload={element:null};var nt=et.value;return rt.callback=function(){Oi||(Oi=!0,Pi=nt),Li(tt,et)},rt}function Qi(tt,et,rt){rt=mh(-1,rt),rt.tag=3;var nt=tt.type.getDerivedStateFromError;if(typeof nt=="function"){var at=et.value;rt.payload=function(){return nt(at)},rt.callback=function(){Li(tt,et)}}var it=tt.stateNode;return it!==null&&typeof it.componentDidCatch=="function"&&(rt.callback=function(){Li(tt,et),typeof nt!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var st=et.stack;this.componentDidCatch(et.value,{componentStack:st!==null?st:""})}),rt}function Si(tt,et,rt){var nt=tt.pingCache;if(nt===null){nt=tt.pingCache=new Mi;var at=new Set;nt.set(et,at)}else at=nt.get(et),at===void 0&&(at=new Set,nt.set(et,at));at.has(rt)||(at.add(rt),tt=Ti.bind(null,tt,et,rt),et.then(tt,tt))}function Ui(tt){do{var et;if((et=tt.tag===13)&&(et=tt.memoizedState,et=et!==null?et.dehydrated!==null:!0),et)return tt;tt=tt.return}while(tt!==null);return null}function Vi(tt,et,rt,nt,at){return tt.mode&1?(tt.flags|=65536,tt.lanes=at,tt):(tt===et?tt.flags|=65536:(tt.flags|=128,rt.flags|=131072,rt.flags&=-52805,rt.tag===1&&(rt.alternate===null?rt.tag=17:(et=mh(-1,1),et.tag=2,nh(rt,et,1))),rt.lanes|=1),tt)}var Wi=ua.ReactCurrentOwner,dh$1=!1;function Xi(tt,et,rt,nt){et.child=tt===null?Vg(et,null,rt,nt):Ug(et,tt.child,rt,nt)}function Yi(tt,et,rt,nt,at){rt=rt.render;var it=et.ref;return ch(et,at),nt=Nh(tt,et,rt,nt,it,at),rt=Sh(),tt!==null&&!dh$1?(et.updateQueue=tt.updateQueue,et.flags&=-2053,tt.lanes&=~at,Zi(tt,et,at)):(I$2&&rt&&vg(et),et.flags|=1,Xi(tt,et,nt,at),et.child)}function $i(tt,et,rt,nt,at){if(tt===null){var it=rt.type;return typeof it=="function"&&!aj(it)&&it.defaultProps===void 0&&rt.compare===null&&rt.defaultProps===void 0?(et.tag=15,et.type=it,bj(tt,et,it,nt,at)):(tt=Rg(rt.type,null,nt,et,et.mode,at),tt.ref=et.ref,tt.return=et,et.child=tt)}if(it=tt.child,!(tt.lanes&at)){var st=it.memoizedProps;if(rt=rt.compare,rt=rt!==null?rt:Ie$1,rt(st,nt)&&tt.ref===et.ref)return Zi(tt,et,at)}return et.flags|=1,tt=Pg(it,nt),tt.ref=et.ref,tt.return=et,et.child=tt}function bj(tt,et,rt,nt,at){if(tt!==null){var it=tt.memoizedProps;if(Ie$1(it,nt)&&tt.ref===et.ref)if(dh$1=!1,et.pendingProps=nt=it,(tt.lanes&at)!==0)tt.flags&131072&&(dh$1=!0);else return et.lanes=tt.lanes,Zi(tt,et,at)}return cj(tt,et,rt,nt,at)}function dj(tt,et,rt){var nt=et.pendingProps,at=nt.children,it=tt!==null?tt.memoizedState:null;if(nt.mode==="hidden")if(!(et.mode&1))et.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$2(ej,fj),fj|=rt;else{if(!(rt&1073741824))return tt=it!==null?it.baseLanes|rt:rt,et.lanes=et.childLanes=1073741824,et.memoizedState={baseLanes:tt,cachePool:null,transitions:null},et.updateQueue=null,G$2(ej,fj),fj|=tt,null;et.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt=it!==null?it.baseLanes:rt,G$2(ej,fj),fj|=nt}else it!==null?(nt=it.baseLanes|rt,et.memoizedState=null):nt=rt,G$2(ej,fj),fj|=nt;return Xi(tt,et,at,rt),et.child}function gj(tt,et){var rt=et.ref;(tt===null&&rt!==null||tt!==null&&tt.ref!==rt)&&(et.flags|=512,et.flags|=2097152)}function cj(tt,et,rt,nt,at){var it=Zf(rt)?Xf:H$1.current;return it=Yf(et,it),ch(et,at),rt=Nh(tt,et,rt,nt,it,at),nt=Sh(),tt!==null&&!dh$1?(et.updateQueue=tt.updateQueue,et.flags&=-2053,tt.lanes&=~at,Zi(tt,et,at)):(I$2&&nt&&vg(et),et.flags|=1,Xi(tt,et,rt,at),et.child)}function hj(tt,et,rt,nt,at){if(Zf(rt)){var it=!0;cg(et)}else it=!1;if(ch(et,at),et.stateNode===null)ij(tt,et),Gi(et,rt,nt),Ii(et,rt,nt,at),nt=!0;else if(tt===null){var st=et.stateNode,dt=et.memoizedProps;st.props=dt;var pt=st.context,mt=rt.contextType;typeof mt=="object"&&mt!==null?mt=eh(mt):(mt=Zf(rt)?Xf:H$1.current,mt=Yf(et,mt));var yt=rt.getDerivedStateFromProps,Rt=typeof yt=="function"||typeof st.getSnapshotBeforeUpdate=="function";Rt||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(dt!==nt||pt!==mt)&&Hi(et,st,nt,mt),jh=!1;var Tt=et.memoizedState;st.state=Tt,qh(et,nt,st,at),pt=et.memoizedState,dt!==nt||Tt!==pt||Wf.current||jh?(typeof yt=="function"&&(Di(et,rt,yt,nt),pt=et.memoizedState),(dt=jh||Fi(et,rt,dt,nt,Tt,pt,mt))?(Rt||typeof st.UNSAFE_componentWillMount!="function"&&typeof st.componentWillMount!="function"||(typeof st.componentWillMount=="function"&&st.componentWillMount(),typeof st.UNSAFE_componentWillMount=="function"&&st.UNSAFE_componentWillMount()),typeof st.componentDidMount=="function"&&(et.flags|=4194308)):(typeof st.componentDidMount=="function"&&(et.flags|=4194308),et.memoizedProps=nt,et.memoizedState=pt),st.props=nt,st.state=pt,st.context=mt,nt=dt):(typeof st.componentDidMount=="function"&&(et.flags|=4194308),nt=!1)}else{st=et.stateNode,lh(tt,et),dt=et.memoizedProps,mt=et.type===et.elementType?dt:Ci(et.type,dt),st.props=mt,Rt=et.pendingProps,Tt=st.context,pt=rt.contextType,typeof pt=="object"&&pt!==null?pt=eh(pt):(pt=Zf(rt)?Xf:H$1.current,pt=Yf(et,pt));var At=rt.getDerivedStateFromProps;(yt=typeof At=="function"||typeof st.getSnapshotBeforeUpdate=="function")||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(dt!==Rt||Tt!==pt)&&Hi(et,st,nt,pt),jh=!1,Tt=et.memoizedState,st.state=Tt,qh(et,nt,st,at);var xt=et.memoizedState;dt!==Rt||Tt!==xt||Wf.current||jh?(typeof At=="function"&&(Di(et,rt,At,nt),xt=et.memoizedState),(mt=jh||Fi(et,rt,mt,nt,Tt,xt,pt)||!1)?(yt||typeof st.UNSAFE_componentWillUpdate!="function"&&typeof st.componentWillUpdate!="function"||(typeof st.componentWillUpdate=="function"&&st.componentWillUpdate(nt,xt,pt),typeof st.UNSAFE_componentWillUpdate=="function"&&st.UNSAFE_componentWillUpdate(nt,xt,pt)),typeof st.componentDidUpdate=="function"&&(et.flags|=4),typeof st.getSnapshotBeforeUpdate=="function"&&(et.flags|=1024)):(typeof st.componentDidUpdate!="function"||dt===tt.memoizedProps&&Tt===tt.memoizedState||(et.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||dt===tt.memoizedProps&&Tt===tt.memoizedState||(et.flags|=1024),et.memoizedProps=nt,et.memoizedState=xt),st.props=nt,st.state=xt,st.context=pt,nt=mt):(typeof st.componentDidUpdate!="function"||dt===tt.memoizedProps&&Tt===tt.memoizedState||(et.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||dt===tt.memoizedProps&&Tt===tt.memoizedState||(et.flags|=1024),nt=!1)}return jj(tt,et,rt,nt,it,at)}function jj(tt,et,rt,nt,at,it){gj(tt,et);var st=(et.flags&128)!==0;if(!nt&&!st)return at&&dg(et,rt,!1),Zi(tt,et,it);nt=et.stateNode,Wi.current=et;var dt=st&&typeof rt.getDerivedStateFromError!="function"?null:nt.render();return et.flags|=1,tt!==null&&st?(et.child=Ug(et,tt.child,null,it),et.child=Ug(et,null,dt,it)):Xi(tt,et,dt,it),et.memoizedState=nt.state,at&&dg(et,rt,!0),et.child}function kj(tt){var et=tt.stateNode;et.pendingContext?ag(tt,et.pendingContext,et.pendingContext!==et.context):et.context&&ag(tt,et.context,!1),yh(tt,et.containerInfo)}function lj(tt,et,rt,nt,at){return Ig(),Jg(at),et.flags|=256,Xi(tt,et,rt,nt),et.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(tt){return{baseLanes:tt,cachePool:null,transitions:null}}function oj(tt,et,rt){var nt=et.pendingProps,at=L$1.current,it=!1,st=(et.flags&128)!==0,dt;if((dt=st)||(dt=tt!==null&&tt.memoizedState===null?!1:(at&2)!==0),dt?(it=!0,et.flags&=-129):(tt===null||tt.memoizedState!==null)&&(at|=1),G$2(L$1,at&1),tt===null)return Eg(et),tt=et.memoizedState,tt!==null&&(tt=tt.dehydrated,tt!==null)?(et.mode&1?tt.data==="$!"?et.lanes=8:et.lanes=1073741824:et.lanes=1,null):(st=nt.children,tt=nt.fallback,it?(nt=et.mode,it=et.child,st={mode:"hidden",children:st},!(nt&1)&&it!==null?(it.childLanes=0,it.pendingProps=st):it=pj(st,nt,0,null),tt=Tg(tt,nt,rt,null),it.return=et,tt.return=et,it.sibling=tt,et.child=it,et.child.memoizedState=nj(rt),et.memoizedState=mj,tt):qj(et,st));if(at=tt.memoizedState,at!==null&&(dt=at.dehydrated,dt!==null))return rj(tt,et,st,nt,dt,at,rt);if(it){it=nt.fallback,st=et.mode,at=tt.child,dt=at.sibling;var pt={mode:"hidden",children:nt.children};return!(st&1)&&et.child!==at?(nt=et.child,nt.childLanes=0,nt.pendingProps=pt,et.deletions=null):(nt=Pg(at,pt),nt.subtreeFlags=at.subtreeFlags&14680064),dt!==null?it=Pg(dt,it):(it=Tg(it,st,rt,null),it.flags|=2),it.return=et,nt.return=et,nt.sibling=it,et.child=nt,nt=it,it=et.child,st=tt.child.memoizedState,st=st===null?nj(rt):{baseLanes:st.baseLanes|rt,cachePool:null,transitions:st.transitions},it.memoizedState=st,it.childLanes=tt.childLanes&~rt,et.memoizedState=mj,nt}return it=tt.child,tt=it.sibling,nt=Pg(it,{mode:"visible",children:nt.children}),!(et.mode&1)&&(nt.lanes=rt),nt.return=et,nt.sibling=null,tt!==null&&(rt=et.deletions,rt===null?(et.deletions=[tt],et.flags|=16):rt.push(tt)),et.child=nt,et.memoizedState=null,nt}function qj(tt,et){return et=pj({mode:"visible",children:et},tt.mode,0,null),et.return=tt,tt.child=et}function sj(tt,et,rt,nt){return nt!==null&&Jg(nt),Ug(et,tt.child,null,rt),tt=qj(et,et.pendingProps.children),tt.flags|=2,et.memoizedState=null,tt}function rj(tt,et,rt,nt,at,it,st){if(rt)return et.flags&256?(et.flags&=-257,nt=Ki(Error(p$2(422))),sj(tt,et,st,nt)):et.memoizedState!==null?(et.child=tt.child,et.flags|=128,null):(it=nt.fallback,at=et.mode,nt=pj({mode:"visible",children:nt.children},at,0,null),it=Tg(it,at,st,null),it.flags|=2,nt.return=et,it.return=et,nt.sibling=it,et.child=nt,et.mode&1&&Ug(et,tt.child,null,st),et.child.memoizedState=nj(st),et.memoizedState=mj,it);if(!(et.mode&1))return sj(tt,et,st,null);if(at.data==="$!"){if(nt=at.nextSibling&&at.nextSibling.dataset,nt)var dt=nt.dgst;return nt=dt,it=Error(p$2(419)),nt=Ki(it,nt,void 0),sj(tt,et,st,nt)}if(dt=(st&tt.childLanes)!==0,dh$1||dt){if(nt=Q$2,nt!==null){switch(st&-st){case 4:at=2;break;case 16:at=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:at=32;break;case 536870912:at=268435456;break;default:at=0}at=at&(nt.suspendedLanes|st)?0:at,at!==0&&at!==it.retryLane&&(it.retryLane=at,ih(tt,at),gi(nt,tt,at,-1))}return tj(),nt=Ki(Error(p$2(421))),sj(tt,et,st,nt)}return at.data==="$?"?(et.flags|=128,et.child=tt.child,et=uj.bind(null,tt),at._reactRetry=et,null):(tt=it.treeContext,yg=Lf(at.nextSibling),xg=et,I$2=!0,zg=null,tt!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=tt.id,sg=tt.overflow,qg=et),et=qj(et,nt.children),et.flags|=4096,et)}function vj(tt,et,rt){tt.lanes|=et;var nt=tt.alternate;nt!==null&&(nt.lanes|=et),bh(tt.return,et,rt)}function wj(tt,et,rt,nt,at){var it=tt.memoizedState;it===null?tt.memoizedState={isBackwards:et,rendering:null,renderingStartTime:0,last:nt,tail:rt,tailMode:at}:(it.isBackwards=et,it.rendering=null,it.renderingStartTime=0,it.last=nt,it.tail=rt,it.tailMode=at)}function xj(tt,et,rt){var nt=et.pendingProps,at=nt.revealOrder,it=nt.tail;if(Xi(tt,et,nt.children,rt),nt=L$1.current,nt&2)nt=nt&1|2,et.flags|=128;else{if(tt!==null&&tt.flags&128)e:for(tt=et.child;tt!==null;){if(tt.tag===13)tt.memoizedState!==null&&vj(tt,rt,et);else if(tt.tag===19)vj(tt,rt,et);else if(tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===et)break e;for(;tt.sibling===null;){if(tt.return===null||tt.return===et)break e;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}nt&=1}if(G$2(L$1,nt),!(et.mode&1))et.memoizedState=null;else switch(at){case"forwards":for(rt=et.child,at=null;rt!==null;)tt=rt.alternate,tt!==null&&Ch(tt)===null&&(at=rt),rt=rt.sibling;rt=at,rt===null?(at=et.child,et.child=null):(at=rt.sibling,rt.sibling=null),wj(et,!1,at,rt,it);break;case"backwards":for(rt=null,at=et.child,et.child=null;at!==null;){if(tt=at.alternate,tt!==null&&Ch(tt)===null){et.child=at;break}tt=at.sibling,at.sibling=rt,rt=at,at=tt}wj(et,!0,rt,null,it);break;case"together":wj(et,!1,null,null,void 0);break;default:et.memoizedState=null}return et.child}function ij(tt,et){!(et.mode&1)&&tt!==null&&(tt.alternate=null,et.alternate=null,et.flags|=2)}function Zi(tt,et,rt){if(tt!==null&&(et.dependencies=tt.dependencies),rh|=et.lanes,!(rt&et.childLanes))return null;if(tt!==null&&et.child!==tt.child)throw Error(p$2(153));if(et.child!==null){for(tt=et.child,rt=Pg(tt,tt.pendingProps),et.child=rt,rt.return=et;tt.sibling!==null;)tt=tt.sibling,rt=rt.sibling=Pg(tt,tt.pendingProps),rt.return=et;rt.sibling=null}return et.child}function yj(tt,et,rt){switch(et.tag){case 3:kj(et),Ig();break;case 5:Ah(et);break;case 1:Zf(et.type)&&cg(et);break;case 4:yh(et,et.stateNode.containerInfo);break;case 10:var nt=et.type._context,at=et.memoizedProps.value;G$2(Wg,nt._currentValue),nt._currentValue=at;break;case 13:if(nt=et.memoizedState,nt!==null)return nt.dehydrated!==null?(G$2(L$1,L$1.current&1),et.flags|=128,null):rt&et.child.childLanes?oj(tt,et,rt):(G$2(L$1,L$1.current&1),tt=Zi(tt,et,rt),tt!==null?tt.sibling:null);G$2(L$1,L$1.current&1);break;case 19:if(nt=(rt&et.childLanes)!==0,tt.flags&128){if(nt)return xj(tt,et,rt);et.flags|=128}if(at=et.memoizedState,at!==null&&(at.rendering=null,at.tail=null,at.lastEffect=null),G$2(L$1,L$1.current),nt)break;return null;case 22:case 23:return et.lanes=0,dj(tt,et,rt)}return Zi(tt,et,rt)}var zj,Aj,Bj,Cj;zj=function(tt,et){for(var rt=et.child;rt!==null;){if(rt.tag===5||rt.tag===6)tt.appendChild(rt.stateNode);else if(rt.tag!==4&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===et)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===et)return;rt=rt.return}rt.sibling.return=rt.return,rt=rt.sibling}};Aj=function(){};Bj=function(tt,et,rt,nt){var at=tt.memoizedProps;if(at!==nt){tt=et.stateNode,xh(uh.current);var it=null;switch(rt){case"input":at=Ya(tt,at),nt=Ya(tt,nt),it=[];break;case"select":at=A$2({},at,{value:void 0}),nt=A$2({},nt,{value:void 0}),it=[];break;case"textarea":at=gb(tt,at),nt=gb(tt,nt),it=[];break;default:typeof at.onClick!="function"&&typeof nt.onClick=="function"&&(tt.onclick=Bf)}ub(rt,nt);var st;rt=null;for(mt in at)if(!nt.hasOwnProperty(mt)&&at.hasOwnProperty(mt)&&at[mt]!=null)if(mt==="style"){var dt=at[mt];for(st in dt)dt.hasOwnProperty(st)&&(rt||(rt={}),rt[st]="")}else mt!=="dangerouslySetInnerHTML"&&mt!=="children"&&mt!=="suppressContentEditableWarning"&&mt!=="suppressHydrationWarning"&&mt!=="autoFocus"&&(ea.hasOwnProperty(mt)?it||(it=[]):(it=it||[]).push(mt,null));for(mt in nt){var pt=nt[mt];if(dt=at!=null?at[mt]:void 0,nt.hasOwnProperty(mt)&&pt!==dt&&(pt!=null||dt!=null))if(mt==="style")if(dt){for(st in dt)!dt.hasOwnProperty(st)||pt&&pt.hasOwnProperty(st)||(rt||(rt={}),rt[st]="");for(st in pt)pt.hasOwnProperty(st)&&dt[st]!==pt[st]&&(rt||(rt={}),rt[st]=pt[st])}else rt||(it||(it=[]),it.push(mt,rt)),rt=pt;else mt==="dangerouslySetInnerHTML"?(pt=pt?pt.__html:void 0,dt=dt?dt.__html:void 0,pt!=null&&dt!==pt&&(it=it||[]).push(mt,pt)):mt==="children"?typeof pt!="string"&&typeof pt!="number"||(it=it||[]).push(mt,""+pt):mt!=="suppressContentEditableWarning"&&mt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(mt)?(pt!=null&&mt==="onScroll"&&D$2("scroll",tt),it||dt===pt||(it=[])):(it=it||[]).push(mt,pt))}rt&&(it=it||[]).push("style",rt);var mt=it;(et.updateQueue=mt)&&(et.flags|=4)}};Cj=function(tt,et,rt,nt){rt!==nt&&(et.flags|=4)};function Dj(tt,et){if(!I$2)switch(tt.tailMode){case"hidden":et=tt.tail;for(var rt=null;et!==null;)et.alternate!==null&&(rt=et),et=et.sibling;rt===null?tt.tail=null:rt.sibling=null;break;case"collapsed":rt=tt.tail;for(var nt=null;rt!==null;)rt.alternate!==null&&(nt=rt),rt=rt.sibling;nt===null?et||tt.tail===null?tt.tail=null:tt.tail.sibling=null:nt.sibling=null}}function S$2(tt){var et=tt.alternate!==null&&tt.alternate.child===tt.child,rt=0,nt=0;if(et)for(var at=tt.child;at!==null;)rt|=at.lanes|at.childLanes,nt|=at.subtreeFlags&14680064,nt|=at.flags&14680064,at.return=tt,at=at.sibling;else for(at=tt.child;at!==null;)rt|=at.lanes|at.childLanes,nt|=at.subtreeFlags,nt|=at.flags,at.return=tt,at=at.sibling;return tt.subtreeFlags|=nt,tt.childLanes=rt,et}function Ej(tt,et,rt){var nt=et.pendingProps;switch(wg(et),et.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$2(et),null;case 1:return Zf(et.type)&&$f(),S$2(et),null;case 3:return nt=et.stateNode,zh(),E$1(Wf),E$1(H$1),Eh(),nt.pendingContext&&(nt.context=nt.pendingContext,nt.pendingContext=null),(tt===null||tt.child===null)&&(Gg(et)?et.flags|=4:tt===null||tt.memoizedState.isDehydrated&&!(et.flags&256)||(et.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(tt,et),S$2(et),null;case 5:Bh(et);var at=xh(wh.current);if(rt=et.type,tt!==null&&et.stateNode!=null)Bj(tt,et,rt,nt,at),tt.ref!==et.ref&&(et.flags|=512,et.flags|=2097152);else{if(!nt){if(et.stateNode===null)throw Error(p$2(166));return S$2(et),null}if(tt=xh(uh.current),Gg(et)){nt=et.stateNode,rt=et.type;var it=et.memoizedProps;switch(nt[Of]=et,nt[Pf]=it,tt=(et.mode&1)!==0,rt){case"dialog":D$2("cancel",nt),D$2("close",nt);break;case"iframe":case"object":case"embed":D$2("load",nt);break;case"video":case"audio":for(at=0;at<lf.length;at++)D$2(lf[at],nt);break;case"source":D$2("error",nt);break;case"img":case"image":case"link":D$2("error",nt),D$2("load",nt);break;case"details":D$2("toggle",nt);break;case"input":Za(nt,it),D$2("invalid",nt);break;case"select":nt._wrapperState={wasMultiple:!!it.multiple},D$2("invalid",nt);break;case"textarea":hb(nt,it),D$2("invalid",nt)}ub(rt,it),at=null;for(var st in it)if(it.hasOwnProperty(st)){var dt=it[st];st==="children"?typeof dt=="string"?nt.textContent!==dt&&(it.suppressHydrationWarning!==!0&&Af(nt.textContent,dt,tt),at=["children",dt]):typeof dt=="number"&&nt.textContent!==""+dt&&(it.suppressHydrationWarning!==!0&&Af(nt.textContent,dt,tt),at=["children",""+dt]):ea.hasOwnProperty(st)&&dt!=null&&st==="onScroll"&&D$2("scroll",nt)}switch(rt){case"input":Va(nt),db(nt,it,!0);break;case"textarea":Va(nt),jb(nt);break;case"select":case"option":break;default:typeof it.onClick=="function"&&(nt.onclick=Bf)}nt=at,et.updateQueue=nt,nt!==null&&(et.flags|=4)}else{st=at.nodeType===9?at:at.ownerDocument,tt==="http://www.w3.org/1999/xhtml"&&(tt=kb(rt)),tt==="http://www.w3.org/1999/xhtml"?rt==="script"?(tt=st.createElement("div"),tt.innerHTML="<script><\/script>",tt=tt.removeChild(tt.firstChild)):typeof nt.is=="string"?tt=st.createElement(rt,{is:nt.is}):(tt=st.createElement(rt),rt==="select"&&(st=tt,nt.multiple?st.multiple=!0:nt.size&&(st.size=nt.size))):tt=st.createElementNS(tt,rt),tt[Of]=et,tt[Pf]=nt,zj(tt,et,!1,!1),et.stateNode=tt;e:{switch(st=vb(rt,nt),rt){case"dialog":D$2("cancel",tt),D$2("close",tt),at=nt;break;case"iframe":case"object":case"embed":D$2("load",tt),at=nt;break;case"video":case"audio":for(at=0;at<lf.length;at++)D$2(lf[at],tt);at=nt;break;case"source":D$2("error",tt),at=nt;break;case"img":case"image":case"link":D$2("error",tt),D$2("load",tt),at=nt;break;case"details":D$2("toggle",tt),at=nt;break;case"input":Za(tt,nt),at=Ya(tt,nt),D$2("invalid",tt);break;case"option":at=nt;break;case"select":tt._wrapperState={wasMultiple:!!nt.multiple},at=A$2({},nt,{value:void 0}),D$2("invalid",tt);break;case"textarea":hb(tt,nt),at=gb(tt,nt),D$2("invalid",tt);break;default:at=nt}ub(rt,at),dt=at;for(it in dt)if(dt.hasOwnProperty(it)){var pt=dt[it];it==="style"?sb(tt,pt):it==="dangerouslySetInnerHTML"?(pt=pt?pt.__html:void 0,pt!=null&&nb(tt,pt)):it==="children"?typeof pt=="string"?(rt!=="textarea"||pt!=="")&&ob(tt,pt):typeof pt=="number"&&ob(tt,""+pt):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(ea.hasOwnProperty(it)?pt!=null&&it==="onScroll"&&D$2("scroll",tt):pt!=null&&ta(tt,it,pt,st))}switch(rt){case"input":Va(tt),db(tt,nt,!1);break;case"textarea":Va(tt),jb(tt);break;case"option":nt.value!=null&&tt.setAttribute("value",""+Sa(nt.value));break;case"select":tt.multiple=!!nt.multiple,it=nt.value,it!=null?fb(tt,!!nt.multiple,it,!1):nt.defaultValue!=null&&fb(tt,!!nt.multiple,nt.defaultValue,!0);break;default:typeof at.onClick=="function"&&(tt.onclick=Bf)}switch(rt){case"button":case"input":case"select":case"textarea":nt=!!nt.autoFocus;break e;case"img":nt=!0;break e;default:nt=!1}}nt&&(et.flags|=4)}et.ref!==null&&(et.flags|=512,et.flags|=2097152)}return S$2(et),null;case 6:if(tt&&et.stateNode!=null)Cj(tt,et,tt.memoizedProps,nt);else{if(typeof nt!="string"&&et.stateNode===null)throw Error(p$2(166));if(rt=xh(wh.current),xh(uh.current),Gg(et)){if(nt=et.stateNode,rt=et.memoizedProps,nt[Of]=et,(it=nt.nodeValue!==rt)&&(tt=xg,tt!==null))switch(tt.tag){case 3:Af(nt.nodeValue,rt,(tt.mode&1)!==0);break;case 5:tt.memoizedProps.suppressHydrationWarning!==!0&&Af(nt.nodeValue,rt,(tt.mode&1)!==0)}it&&(et.flags|=4)}else nt=(rt.nodeType===9?rt:rt.ownerDocument).createTextNode(nt),nt[Of]=et,et.stateNode=nt}return S$2(et),null;case 13:if(E$1(L$1),nt=et.memoizedState,tt===null||tt.memoizedState!==null&&tt.memoizedState.dehydrated!==null){if(I$2&&yg!==null&&et.mode&1&&!(et.flags&128))Hg(),Ig(),et.flags|=98560,it=!1;else if(it=Gg(et),nt!==null&&nt.dehydrated!==null){if(tt===null){if(!it)throw Error(p$2(318));if(it=et.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$2(317));it[Of]=et}else Ig(),!(et.flags&128)&&(et.memoizedState=null),et.flags|=4;S$2(et),it=!1}else zg!==null&&(Fj(zg),zg=null),it=!0;if(!it)return et.flags&65536?et:null}return et.flags&128?(et.lanes=rt,et):(nt=nt!==null,nt!==(tt!==null&&tt.memoizedState!==null)&&nt&&(et.child.flags|=8192,et.mode&1&&(tt===null||L$1.current&1?T$3===0&&(T$3=3):tj())),et.updateQueue!==null&&(et.flags|=4),S$2(et),null);case 4:return zh(),Aj(tt,et),tt===null&&sf(et.stateNode.containerInfo),S$2(et),null;case 10:return ah(et.type._context),S$2(et),null;case 17:return Zf(et.type)&&$f(),S$2(et),null;case 19:if(E$1(L$1),it=et.memoizedState,it===null)return S$2(et),null;if(nt=(et.flags&128)!==0,st=it.rendering,st===null)if(nt)Dj(it,!1);else{if(T$3!==0||tt!==null&&tt.flags&128)for(tt=et.child;tt!==null;){if(st=Ch(tt),st!==null){for(et.flags|=128,Dj(it,!1),nt=st.updateQueue,nt!==null&&(et.updateQueue=nt,et.flags|=4),et.subtreeFlags=0,nt=rt,rt=et.child;rt!==null;)it=rt,tt=nt,it.flags&=14680066,st=it.alternate,st===null?(it.childLanes=0,it.lanes=tt,it.child=null,it.subtreeFlags=0,it.memoizedProps=null,it.memoizedState=null,it.updateQueue=null,it.dependencies=null,it.stateNode=null):(it.childLanes=st.childLanes,it.lanes=st.lanes,it.child=st.child,it.subtreeFlags=0,it.deletions=null,it.memoizedProps=st.memoizedProps,it.memoizedState=st.memoizedState,it.updateQueue=st.updateQueue,it.type=st.type,tt=st.dependencies,it.dependencies=tt===null?null:{lanes:tt.lanes,firstContext:tt.firstContext}),rt=rt.sibling;return G$2(L$1,L$1.current&1|2),et.child}tt=tt.sibling}it.tail!==null&&B$1()>Gj&&(et.flags|=128,nt=!0,Dj(it,!1),et.lanes=4194304)}else{if(!nt)if(tt=Ch(st),tt!==null){if(et.flags|=128,nt=!0,rt=tt.updateQueue,rt!==null&&(et.updateQueue=rt,et.flags|=4),Dj(it,!0),it.tail===null&&it.tailMode==="hidden"&&!st.alternate&&!I$2)return S$2(et),null}else 2*B$1()-it.renderingStartTime>Gj&&rt!==1073741824&&(et.flags|=128,nt=!0,Dj(it,!1),et.lanes=4194304);it.isBackwards?(st.sibling=et.child,et.child=st):(rt=it.last,rt!==null?rt.sibling=st:et.child=st,it.last=st)}return it.tail!==null?(et=it.tail,it.rendering=et,it.tail=et.sibling,it.renderingStartTime=B$1(),et.sibling=null,rt=L$1.current,G$2(L$1,nt?rt&1|2:rt&1),et):(S$2(et),null);case 22:case 23:return Hj(),nt=et.memoizedState!==null,tt!==null&&tt.memoizedState!==null!==nt&&(et.flags|=8192),nt&&et.mode&1?fj&1073741824&&(S$2(et),et.subtreeFlags&6&&(et.flags|=8192)):S$2(et),null;case 24:return null;case 25:return null}throw Error(p$2(156,et.tag))}function Ij(tt,et){switch(wg(et),et.tag){case 1:return Zf(et.type)&&$f(),tt=et.flags,tt&65536?(et.flags=tt&-65537|128,et):null;case 3:return zh(),E$1(Wf),E$1(H$1),Eh(),tt=et.flags,tt&65536&&!(tt&128)?(et.flags=tt&-65537|128,et):null;case 5:return Bh(et),null;case 13:if(E$1(L$1),tt=et.memoizedState,tt!==null&&tt.dehydrated!==null){if(et.alternate===null)throw Error(p$2(340));Ig()}return tt=et.flags,tt&65536?(et.flags=tt&-65537|128,et):null;case 19:return E$1(L$1),null;case 4:return zh(),null;case 10:return ah(et.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$2=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Lj(tt,et){var rt=tt.ref;if(rt!==null)if(typeof rt=="function")try{rt(null)}catch(nt){W$2(tt,et,nt)}else rt.current=null}function Mj(tt,et,rt){try{rt()}catch(nt){W$2(tt,et,nt)}}var Nj=!1;function Oj(tt,et){if(Cf=dd,tt=Me$1(),Ne$1(tt)){if("selectionStart"in tt)var rt={start:tt.selectionStart,end:tt.selectionEnd};else e:{rt=(rt=tt.ownerDocument)&&rt.defaultView||window;var nt=rt.getSelection&&rt.getSelection();if(nt&&nt.rangeCount!==0){rt=nt.anchorNode;var at=nt.anchorOffset,it=nt.focusNode;nt=nt.focusOffset;try{rt.nodeType,it.nodeType}catch{rt=null;break e}var st=0,dt=-1,pt=-1,mt=0,yt=0,Rt=tt,Tt=null;t:for(;;){for(var At;Rt!==rt||at!==0&&Rt.nodeType!==3||(dt=st+at),Rt!==it||nt!==0&&Rt.nodeType!==3||(pt=st+nt),Rt.nodeType===3&&(st+=Rt.nodeValue.length),(At=Rt.firstChild)!==null;)Tt=Rt,Rt=At;for(;;){if(Rt===tt)break t;if(Tt===rt&&++mt===at&&(dt=st),Tt===it&&++yt===nt&&(pt=st),(At=Rt.nextSibling)!==null)break;Rt=Tt,Tt=Rt.parentNode}Rt=At}rt=dt===-1||pt===-1?null:{start:dt,end:pt}}else rt=null}rt=rt||{start:0,end:0}}else rt=null;for(Df={focusedElem:tt,selectionRange:rt},dd=!1,V$2=et;V$2!==null;)if(et=V$2,tt=et.child,(et.subtreeFlags&1028)!==0&&tt!==null)tt.return=et,V$2=tt;else for(;V$2!==null;){et=V$2;try{var xt=et.alternate;if(et.flags&1024)switch(et.tag){case 0:case 11:case 15:break;case 1:if(xt!==null){var Nt=xt.memoizedProps,Ct=xt.memoizedState,Ot=et.stateNode,kt=Ot.getSnapshotBeforeUpdate(et.elementType===et.type?Nt:Ci(et.type,Nt),Ct);Ot.__reactInternalSnapshotBeforeUpdate=kt}break;case 3:var Pt=et.stateNode.containerInfo;Pt.nodeType===1?Pt.textContent="":Pt.nodeType===9&&Pt.documentElement&&Pt.removeChild(Pt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(Dt){W$2(et,et.return,Dt)}if(tt=et.sibling,tt!==null){tt.return=et.return,V$2=tt;break}V$2=et.return}return xt=Nj,Nj=!1,xt}function Pj(tt,et,rt){var nt=et.updateQueue;if(nt=nt!==null?nt.lastEffect:null,nt!==null){var at=nt=nt.next;do{if((at.tag&tt)===tt){var it=at.destroy;at.destroy=void 0,it!==void 0&&Mj(et,rt,it)}at=at.next}while(at!==nt)}}function Qj(tt,et){if(et=et.updateQueue,et=et!==null?et.lastEffect:null,et!==null){var rt=et=et.next;do{if((rt.tag&tt)===tt){var nt=rt.create;rt.destroy=nt()}rt=rt.next}while(rt!==et)}}function Rj(tt){var et=tt.ref;if(et!==null){var rt=tt.stateNode;switch(tt.tag){case 5:tt=rt;break;default:tt=rt}typeof et=="function"?et(tt):et.current=tt}}function Sj(tt){var et=tt.alternate;et!==null&&(tt.alternate=null,Sj(et)),tt.child=null,tt.deletions=null,tt.sibling=null,tt.tag===5&&(et=tt.stateNode,et!==null&&(delete et[Of],delete et[Pf],delete et[of$1],delete et[Qf],delete et[Rf])),tt.stateNode=null,tt.return=null,tt.dependencies=null,tt.memoizedProps=null,tt.memoizedState=null,tt.pendingProps=null,tt.stateNode=null,tt.updateQueue=null}function Tj(tt){return tt.tag===5||tt.tag===3||tt.tag===4}function Uj(tt){e:for(;;){for(;tt.sibling===null;){if(tt.return===null||Tj(tt.return))return null;tt=tt.return}for(tt.sibling.return=tt.return,tt=tt.sibling;tt.tag!==5&&tt.tag!==6&&tt.tag!==18;){if(tt.flags&2||tt.child===null||tt.tag===4)continue e;tt.child.return=tt,tt=tt.child}if(!(tt.flags&2))return tt.stateNode}}function Vj(tt,et,rt){var nt=tt.tag;if(nt===5||nt===6)tt=tt.stateNode,et?rt.nodeType===8?rt.parentNode.insertBefore(tt,et):rt.insertBefore(tt,et):(rt.nodeType===8?(et=rt.parentNode,et.insertBefore(tt,rt)):(et=rt,et.appendChild(tt)),rt=rt._reactRootContainer,rt!=null||et.onclick!==null||(et.onclick=Bf));else if(nt!==4&&(tt=tt.child,tt!==null))for(Vj(tt,et,rt),tt=tt.sibling;tt!==null;)Vj(tt,et,rt),tt=tt.sibling}function Wj(tt,et,rt){var nt=tt.tag;if(nt===5||nt===6)tt=tt.stateNode,et?rt.insertBefore(tt,et):rt.appendChild(tt);else if(nt!==4&&(tt=tt.child,tt!==null))for(Wj(tt,et,rt),tt=tt.sibling;tt!==null;)Wj(tt,et,rt),tt=tt.sibling}var X$2=null,Xj=!1;function Yj(tt,et,rt){for(rt=rt.child;rt!==null;)Zj(tt,et,rt),rt=rt.sibling}function Zj(tt,et,rt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,rt)}catch{}switch(rt.tag){case 5:U$2||Lj(rt,et);case 6:var nt=X$2,at=Xj;X$2=null,Yj(tt,et,rt),X$2=nt,Xj=at,X$2!==null&&(Xj?(tt=X$2,rt=rt.stateNode,tt.nodeType===8?tt.parentNode.removeChild(rt):tt.removeChild(rt)):X$2.removeChild(rt.stateNode));break;case 18:X$2!==null&&(Xj?(tt=X$2,rt=rt.stateNode,tt.nodeType===8?Kf(tt.parentNode,rt):tt.nodeType===1&&Kf(tt,rt),bd(tt)):Kf(X$2,rt.stateNode));break;case 4:nt=X$2,at=Xj,X$2=rt.stateNode.containerInfo,Xj=!0,Yj(tt,et,rt),X$2=nt,Xj=at;break;case 0:case 11:case 14:case 15:if(!U$2&&(nt=rt.updateQueue,nt!==null&&(nt=nt.lastEffect,nt!==null))){at=nt=nt.next;do{var it=at,st=it.destroy;it=it.tag,st!==void 0&&(it&2||it&4)&&Mj(rt,et,st),at=at.next}while(at!==nt)}Yj(tt,et,rt);break;case 1:if(!U$2&&(Lj(rt,et),nt=rt.stateNode,typeof nt.componentWillUnmount=="function"))try{nt.props=rt.memoizedProps,nt.state=rt.memoizedState,nt.componentWillUnmount()}catch(dt){W$2(rt,et,dt)}Yj(tt,et,rt);break;case 21:Yj(tt,et,rt);break;case 22:rt.mode&1?(U$2=(nt=U$2)||rt.memoizedState!==null,Yj(tt,et,rt),U$2=nt):Yj(tt,et,rt);break;default:Yj(tt,et,rt)}}function ak(tt){var et=tt.updateQueue;if(et!==null){tt.updateQueue=null;var rt=tt.stateNode;rt===null&&(rt=tt.stateNode=new Kj),et.forEach(function(nt){var at=bk.bind(null,tt,nt);rt.has(nt)||(rt.add(nt),nt.then(at,at))})}}function ck(tt,et){var rt=et.deletions;if(rt!==null)for(var nt=0;nt<rt.length;nt++){var at=rt[nt];try{var it=tt,st=et,dt=st;e:for(;dt!==null;){switch(dt.tag){case 5:X$2=dt.stateNode,Xj=!1;break e;case 3:X$2=dt.stateNode.containerInfo,Xj=!0;break e;case 4:X$2=dt.stateNode.containerInfo,Xj=!0;break e}dt=dt.return}if(X$2===null)throw Error(p$2(160));Zj(it,st,at),X$2=null,Xj=!1;var pt=at.alternate;pt!==null&&(pt.return=null),at.return=null}catch(mt){W$2(at,et,mt)}}if(et.subtreeFlags&12854)for(et=et.child;et!==null;)dk(et,tt),et=et.sibling}function dk(tt,et){var rt=tt.alternate,nt=tt.flags;switch(tt.tag){case 0:case 11:case 14:case 15:if(ck(et,tt),ek(tt),nt&4){try{Pj(3,tt,tt.return),Qj(3,tt)}catch(Nt){W$2(tt,tt.return,Nt)}try{Pj(5,tt,tt.return)}catch(Nt){W$2(tt,tt.return,Nt)}}break;case 1:ck(et,tt),ek(tt),nt&512&&rt!==null&&Lj(rt,rt.return);break;case 5:if(ck(et,tt),ek(tt),nt&512&&rt!==null&&Lj(rt,rt.return),tt.flags&32){var at=tt.stateNode;try{ob(at,"")}catch(Nt){W$2(tt,tt.return,Nt)}}if(nt&4&&(at=tt.stateNode,at!=null)){var it=tt.memoizedProps,st=rt!==null?rt.memoizedProps:it,dt=tt.type,pt=tt.updateQueue;if(tt.updateQueue=null,pt!==null)try{dt==="input"&&it.type==="radio"&&it.name!=null&&ab(at,it),vb(dt,st);var mt=vb(dt,it);for(st=0;st<pt.length;st+=2){var yt=pt[st],Rt=pt[st+1];yt==="style"?sb(at,Rt):yt==="dangerouslySetInnerHTML"?nb(at,Rt):yt==="children"?ob(at,Rt):ta(at,yt,Rt,mt)}switch(dt){case"input":bb(at,it);break;case"textarea":ib(at,it);break;case"select":var Tt=at._wrapperState.wasMultiple;at._wrapperState.wasMultiple=!!it.multiple;var At=it.value;At!=null?fb(at,!!it.multiple,At,!1):Tt!==!!it.multiple&&(it.defaultValue!=null?fb(at,!!it.multiple,it.defaultValue,!0):fb(at,!!it.multiple,it.multiple?[]:"",!1))}at[Pf]=it}catch(Nt){W$2(tt,tt.return,Nt)}}break;case 6:if(ck(et,tt),ek(tt),nt&4){if(tt.stateNode===null)throw Error(p$2(162));at=tt.stateNode,it=tt.memoizedProps;try{at.nodeValue=it}catch(Nt){W$2(tt,tt.return,Nt)}}break;case 3:if(ck(et,tt),ek(tt),nt&4&&rt!==null&&rt.memoizedState.isDehydrated)try{bd(et.containerInfo)}catch(Nt){W$2(tt,tt.return,Nt)}break;case 4:ck(et,tt),ek(tt);break;case 13:ck(et,tt),ek(tt),at=tt.child,at.flags&8192&&(it=at.memoizedState!==null,at.stateNode.isHidden=it,!it||at.alternate!==null&&at.alternate.memoizedState!==null||(fk=B$1())),nt&4&&ak(tt);break;case 22:if(yt=rt!==null&&rt.memoizedState!==null,tt.mode&1?(U$2=(mt=U$2)||yt,ck(et,tt),U$2=mt):ck(et,tt),ek(tt),nt&8192){if(mt=tt.memoizedState!==null,(tt.stateNode.isHidden=mt)&&!yt&&tt.mode&1)for(V$2=tt,yt=tt.child;yt!==null;){for(Rt=V$2=yt;V$2!==null;){switch(Tt=V$2,At=Tt.child,Tt.tag){case 0:case 11:case 14:case 15:Pj(4,Tt,Tt.return);break;case 1:Lj(Tt,Tt.return);var xt=Tt.stateNode;if(typeof xt.componentWillUnmount=="function"){nt=Tt,rt=Tt.return;try{et=nt,xt.props=et.memoizedProps,xt.state=et.memoizedState,xt.componentWillUnmount()}catch(Nt){W$2(nt,rt,Nt)}}break;case 5:Lj(Tt,Tt.return);break;case 22:if(Tt.memoizedState!==null){gk(Rt);continue}}At!==null?(At.return=Tt,V$2=At):gk(Rt)}yt=yt.sibling}e:for(yt=null,Rt=tt;;){if(Rt.tag===5){if(yt===null){yt=Rt;try{at=Rt.stateNode,mt?(it=at.style,typeof it.setProperty=="function"?it.setProperty("display","none","important"):it.display="none"):(dt=Rt.stateNode,pt=Rt.memoizedProps.style,st=pt!=null&&pt.hasOwnProperty("display")?pt.display:null,dt.style.display=rb("display",st))}catch(Nt){W$2(tt,tt.return,Nt)}}}else if(Rt.tag===6){if(yt===null)try{Rt.stateNode.nodeValue=mt?"":Rt.memoizedProps}catch(Nt){W$2(tt,tt.return,Nt)}}else if((Rt.tag!==22&&Rt.tag!==23||Rt.memoizedState===null||Rt===tt)&&Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}if(Rt===tt)break e;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===tt)break e;yt===Rt&&(yt=null),Rt=Rt.return}yt===Rt&&(yt=null),Rt.sibling.return=Rt.return,Rt=Rt.sibling}}break;case 19:ck(et,tt),ek(tt),nt&4&&ak(tt);break;case 21:break;default:ck(et,tt),ek(tt)}}function ek(tt){var et=tt.flags;if(et&2){try{e:{for(var rt=tt.return;rt!==null;){if(Tj(rt)){var nt=rt;break e}rt=rt.return}throw Error(p$2(160))}switch(nt.tag){case 5:var at=nt.stateNode;nt.flags&32&&(ob(at,""),nt.flags&=-33);var it=Uj(tt);Wj(tt,it,at);break;case 3:case 4:var st=nt.stateNode.containerInfo,dt=Uj(tt);Vj(tt,dt,st);break;default:throw Error(p$2(161))}}catch(pt){W$2(tt,tt.return,pt)}tt.flags&=-3}et&4096&&(tt.flags&=-4097)}function hk(tt,et,rt){V$2=tt,ik(tt)}function ik(tt,et,rt){for(var nt=(tt.mode&1)!==0;V$2!==null;){var at=V$2,it=at.child;if(at.tag===22&&nt){var st=at.memoizedState!==null||Jj;if(!st){var dt=at.alternate,pt=dt!==null&&dt.memoizedState!==null||U$2;dt=Jj;var mt=U$2;if(Jj=st,(U$2=pt)&&!mt)for(V$2=at;V$2!==null;)st=V$2,pt=st.child,st.tag===22&&st.memoizedState!==null?jk(at):pt!==null?(pt.return=st,V$2=pt):jk(at);for(;it!==null;)V$2=it,ik(it),it=it.sibling;V$2=at,Jj=dt,U$2=mt}kk(tt)}else at.subtreeFlags&8772&&it!==null?(it.return=at,V$2=it):kk(tt)}}function kk(tt){for(;V$2!==null;){var et=V$2;if(et.flags&8772){var rt=et.alternate;try{if(et.flags&8772)switch(et.tag){case 0:case 11:case 15:U$2||Qj(5,et);break;case 1:var nt=et.stateNode;if(et.flags&4&&!U$2)if(rt===null)nt.componentDidMount();else{var at=et.elementType===et.type?rt.memoizedProps:Ci(et.type,rt.memoizedProps);nt.componentDidUpdate(at,rt.memoizedState,nt.__reactInternalSnapshotBeforeUpdate)}var it=et.updateQueue;it!==null&&sh(et,it,nt);break;case 3:var st=et.updateQueue;if(st!==null){if(rt=null,et.child!==null)switch(et.child.tag){case 5:rt=et.child.stateNode;break;case 1:rt=et.child.stateNode}sh(et,st,rt)}break;case 5:var dt=et.stateNode;if(rt===null&&et.flags&4){rt=dt;var pt=et.memoizedProps;switch(et.type){case"button":case"input":case"select":case"textarea":pt.autoFocus&&rt.focus();break;case"img":pt.src&&(rt.src=pt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(et.memoizedState===null){var mt=et.alternate;if(mt!==null){var yt=mt.memoizedState;if(yt!==null){var Rt=yt.dehydrated;Rt!==null&&bd(Rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U$2||et.flags&512&&Rj(et)}catch(Tt){W$2(et,et.return,Tt)}}if(et===tt){V$2=null;break}if(rt=et.sibling,rt!==null){rt.return=et.return,V$2=rt;break}V$2=et.return}}function gk(tt){for(;V$2!==null;){var et=V$2;if(et===tt){V$2=null;break}var rt=et.sibling;if(rt!==null){rt.return=et.return,V$2=rt;break}V$2=et.return}}function jk(tt){for(;V$2!==null;){var et=V$2;try{switch(et.tag){case 0:case 11:case 15:var rt=et.return;try{Qj(4,et)}catch(pt){W$2(et,rt,pt)}break;case 1:var nt=et.stateNode;if(typeof nt.componentDidMount=="function"){var at=et.return;try{nt.componentDidMount()}catch(pt){W$2(et,at,pt)}}var it=et.return;try{Rj(et)}catch(pt){W$2(et,it,pt)}break;case 5:var st=et.return;try{Rj(et)}catch(pt){W$2(et,st,pt)}}}catch(pt){W$2(et,et.return,pt)}if(et===tt){V$2=null;break}var dt=et.sibling;if(dt!==null){dt.return=et.return,V$2=dt;break}V$2=et.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$1=0,Q$2=null,Y$2=null,Z$2=0,fj=0,ej=Uf(0),T$3=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K$1&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(tt){return tt.mode&1?K$1&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(tt=C$1,tt!==0||(tt=window.event,tt=tt===void 0?16:jd(tt.type)),tt):1}function gi(tt,et,rt,nt){if(50<yk)throw yk=0,zk=null,Error(p$2(185));Ac(tt,rt,nt),(!(K$1&2)||tt!==Q$2)&&(tt===Q$2&&(!(K$1&2)&&(qk|=rt),T$3===4&&Ck(tt,Z$2)),Dk(tt,nt),rt===1&&K$1===0&&!(et.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(tt,et){var rt=tt.callbackNode;wc(tt,et);var nt=uc(tt,tt===Q$2?Z$2:0);if(nt===0)rt!==null&&bc(rt),tt.callbackNode=null,tt.callbackPriority=0;else if(et=nt&-nt,tt.callbackPriority!==et){if(rt!=null&&bc(rt),et===1)tt.tag===0?ig(Ek.bind(null,tt)):hg(Ek.bind(null,tt)),Jf(function(){!(K$1&6)&&jg()}),rt=null;else{switch(Dc(nt)){case 1:rt=fc;break;case 4:rt=gc;break;case 16:rt=hc;break;case 536870912:rt=jc;break;default:rt=hc}rt=Fk(rt,Gk.bind(null,tt))}tt.callbackPriority=et,tt.callbackNode=rt}}function Gk(tt,et){if(Ak=-1,Bk=0,K$1&6)throw Error(p$2(327));var rt=tt.callbackNode;if(Hk()&&tt.callbackNode!==rt)return null;var nt=uc(tt,tt===Q$2?Z$2:0);if(nt===0)return null;if(nt&30||nt&tt.expiredLanes||et)et=Ik(tt,nt);else{et=nt;var at=K$1;K$1|=2;var it=Jk();(Q$2!==tt||Z$2!==et)&&(uk=null,Gj=B$1()+500,Kk(tt,et));do try{Lk();break}catch(dt){Mk(tt,dt)}while(!0);$g(),mk.current=it,K$1=at,Y$2!==null?et=0:(Q$2=null,Z$2=0,et=T$3)}if(et!==0){if(et===2&&(at=xc(tt),at!==0&&(nt=at,et=Nk(tt,at))),et===1)throw rt=pk,Kk(tt,0),Ck(tt,nt),Dk(tt,B$1()),rt;if(et===6)Ck(tt,nt);else{if(at=tt.current.alternate,!(nt&30)&&!Ok(at)&&(et=Ik(tt,nt),et===2&&(it=xc(tt),it!==0&&(nt=it,et=Nk(tt,it))),et===1))throw rt=pk,Kk(tt,0),Ck(tt,nt),Dk(tt,B$1()),rt;switch(tt.finishedWork=at,tt.finishedLanes=nt,et){case 0:case 1:throw Error(p$2(345));case 2:Pk(tt,tk,uk);break;case 3:if(Ck(tt,nt),(nt&130023424)===nt&&(et=fk+500-B$1(),10<et)){if(uc(tt,0)!==0)break;if(at=tt.suspendedLanes,(at&nt)!==nt){R(),tt.pingedLanes|=tt.suspendedLanes&at;break}tt.timeoutHandle=Ff(Pk.bind(null,tt,tk,uk),et);break}Pk(tt,tk,uk);break;case 4:if(Ck(tt,nt),(nt&4194240)===nt)break;for(et=tt.eventTimes,at=-1;0<nt;){var st=31-oc(nt);it=1<<st,st=et[st],st>at&&(at=st),nt&=~it}if(nt=at,nt=B$1()-nt,nt=(120>nt?120:480>nt?480:1080>nt?1080:1920>nt?1920:3e3>nt?3e3:4320>nt?4320:1960*lk(nt/1960))-nt,10<nt){tt.timeoutHandle=Ff(Pk.bind(null,tt,tk,uk),nt);break}Pk(tt,tk,uk);break;case 5:Pk(tt,tk,uk);break;default:throw Error(p$2(329))}}}return Dk(tt,B$1()),tt.callbackNode===rt?Gk.bind(null,tt):null}function Nk(tt,et){var rt=sk;return tt.current.memoizedState.isDehydrated&&(Kk(tt,et).flags|=256),tt=Ik(tt,et),tt!==2&&(et=tk,tk=rt,et!==null&&Fj(et)),tt}function Fj(tt){tk===null?tk=tt:tk.push.apply(tk,tt)}function Ok(tt){for(var et=tt;;){if(et.flags&16384){var rt=et.updateQueue;if(rt!==null&&(rt=rt.stores,rt!==null))for(var nt=0;nt<rt.length;nt++){var at=rt[nt],it=at.getSnapshot;at=at.value;try{if(!He(it(),at))return!1}catch{return!1}}}if(rt=et.child,et.subtreeFlags&16384&&rt!==null)rt.return=et,et=rt;else{if(et===tt)break;for(;et.sibling===null;){if(et.return===null||et.return===tt)return!0;et=et.return}et.sibling.return=et.return,et=et.sibling}}return!0}function Ck(tt,et){for(et&=~rk,et&=~qk,tt.suspendedLanes|=et,tt.pingedLanes&=~et,tt=tt.expirationTimes;0<et;){var rt=31-oc(et),nt=1<<rt;tt[rt]=-1,et&=~nt}}function Ek(tt){if(K$1&6)throw Error(p$2(327));Hk();var et=uc(tt,0);if(!(et&1))return Dk(tt,B$1()),null;var rt=Ik(tt,et);if(tt.tag!==0&&rt===2){var nt=xc(tt);nt!==0&&(et=nt,rt=Nk(tt,nt))}if(rt===1)throw rt=pk,Kk(tt,0),Ck(tt,et),Dk(tt,B$1()),rt;if(rt===6)throw Error(p$2(345));return tt.finishedWork=tt.current.alternate,tt.finishedLanes=et,Pk(tt,tk,uk),Dk(tt,B$1()),null}function Qk(tt,et){var rt=K$1;K$1|=1;try{return tt(et)}finally{K$1=rt,K$1===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(tt){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var et=K$1;K$1|=1;var rt=ok.transition,nt=C$1;try{if(ok.transition=null,C$1=1,tt)return tt()}finally{C$1=nt,ok.transition=rt,K$1=et,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(tt,et){tt.finishedWork=null,tt.finishedLanes=0;var rt=tt.timeoutHandle;if(rt!==-1&&(tt.timeoutHandle=-1,Gf(rt)),Y$2!==null)for(rt=Y$2.return;rt!==null;){var nt=rt;switch(wg(nt),nt.tag){case 1:nt=nt.type.childContextTypes,nt!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H$1),Eh();break;case 5:Bh(nt);break;case 4:zh();break;case 13:E$1(L$1);break;case 19:E$1(L$1);break;case 10:ah(nt.type._context);break;case 22:case 23:Hj()}rt=rt.return}if(Q$2=tt,Y$2=tt=Pg(tt.current,null),Z$2=fj=et,T$3=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(et=0;et<fh.length;et++)if(rt=fh[et],nt=rt.interleaved,nt!==null){rt.interleaved=null;var at=nt.next,it=rt.pending;if(it!==null){var st=it.next;it.next=at,nt.next=st}rt.pending=nt}fh=null}return tt}function Mk(tt,et){do{var rt=Y$2;try{if($g(),Fh.current=Rh,Ih){for(var nt=M$2.memoizedState;nt!==null;){var at=nt.queue;at!==null&&(at.pending=null),nt=nt.next}Ih=!1}if(Hh=0,O$1=N$1=M$2=null,Jh=!1,Kh=0,nk.current=null,rt===null||rt.return===null){T$3=1,pk=et,Y$2=null;break}e:{var it=tt,st=rt.return,dt=rt,pt=et;if(et=Z$2,dt.flags|=32768,pt!==null&&typeof pt=="object"&&typeof pt.then=="function"){var mt=pt,yt=dt,Rt=yt.tag;if(!(yt.mode&1)&&(Rt===0||Rt===11||Rt===15)){var Tt=yt.alternate;Tt?(yt.updateQueue=Tt.updateQueue,yt.memoizedState=Tt.memoizedState,yt.lanes=Tt.lanes):(yt.updateQueue=null,yt.memoizedState=null)}var At=Ui(st);if(At!==null){At.flags&=-257,Vi(At,st,dt,it,et),At.mode&1&&Si(it,mt,et),et=At,pt=mt;var xt=et.updateQueue;if(xt===null){var Nt=new Set;Nt.add(pt),et.updateQueue=Nt}else xt.add(pt);break e}else{if(!(et&1)){Si(it,mt,et),tj();break e}pt=Error(p$2(426))}}else if(I$2&&dt.mode&1){var Ct=Ui(st);if(Ct!==null){!(Ct.flags&65536)&&(Ct.flags|=256),Vi(Ct,st,dt,it,et),Jg(Ji(pt,dt));break e}}it=pt=Ji(pt,dt),T$3!==4&&(T$3=2),sk===null?sk=[it]:sk.push(it),it=st;do{switch(it.tag){case 3:it.flags|=65536,et&=-et,it.lanes|=et;var Ot=Ni(it,pt,et);ph(it,Ot);break e;case 1:dt=pt;var kt=it.type,Pt=it.stateNode;if(!(it.flags&128)&&(typeof kt.getDerivedStateFromError=="function"||Pt!==null&&typeof Pt.componentDidCatch=="function"&&(Ri===null||!Ri.has(Pt)))){it.flags|=65536,et&=-et,it.lanes|=et;var Dt=Qi(it,dt,et);ph(it,Dt);break e}}it=it.return}while(it!==null)}Sk(rt)}catch(Gt){et=Gt,Y$2===rt&&rt!==null&&(Y$2=rt=rt.return);continue}break}while(!0)}function Jk(){var tt=mk.current;return mk.current=Rh,tt===null?Rh:tt}function tj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),Q$2===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$2,Z$2)}function Ik(tt,et){var rt=K$1;K$1|=2;var nt=Jk();(Q$2!==tt||Z$2!==et)&&(uk=null,Kk(tt,et));do try{Tk();break}catch(at){Mk(tt,at)}while(!0);if($g(),K$1=rt,mk.current=nt,Y$2!==null)throw Error(p$2(261));return Q$2=null,Z$2=0,T$3}function Tk(){for(;Y$2!==null;)Uk(Y$2)}function Lk(){for(;Y$2!==null&&!cc();)Uk(Y$2)}function Uk(tt){var et=Vk(tt.alternate,tt,fj);tt.memoizedProps=tt.pendingProps,et===null?Sk(tt):Y$2=et,nk.current=null}function Sk(tt){var et=tt;do{var rt=et.alternate;if(tt=et.return,et.flags&32768){if(rt=Ij(rt,et),rt!==null){rt.flags&=32767,Y$2=rt;return}if(tt!==null)tt.flags|=32768,tt.subtreeFlags=0,tt.deletions=null;else{T$3=6,Y$2=null;return}}else if(rt=Ej(rt,et,fj),rt!==null){Y$2=rt;return}if(et=et.sibling,et!==null){Y$2=et;return}Y$2=et=tt}while(et!==null);T$3===0&&(T$3=5)}function Pk(tt,et,rt){var nt=C$1,at=ok.transition;try{ok.transition=null,C$1=1,Wk(tt,et,rt,nt)}finally{ok.transition=at,C$1=nt}return null}function Wk(tt,et,rt,nt){do Hk();while(wk!==null);if(K$1&6)throw Error(p$2(327));rt=tt.finishedWork;var at=tt.finishedLanes;if(rt===null)return null;if(tt.finishedWork=null,tt.finishedLanes=0,rt===tt.current)throw Error(p$2(177));tt.callbackNode=null,tt.callbackPriority=0;var it=rt.lanes|rt.childLanes;if(Bc(tt,it),tt===Q$2&&(Y$2=Q$2=null,Z$2=0),!(rt.subtreeFlags&2064)&&!(rt.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),it=(rt.flags&15990)!==0,rt.subtreeFlags&15990||it){it=ok.transition,ok.transition=null;var st=C$1;C$1=1;var dt=K$1;K$1|=4,nk.current=null,Oj(tt,rt),dk(rt,tt),Oe$1(Df),dd=!!Cf,Df=Cf=null,tt.current=rt,hk(rt),dc(),K$1=dt,C$1=st,ok.transition=it}else tt.current=rt;if(vk&&(vk=!1,wk=tt,xk=at),it=tt.pendingLanes,it===0&&(Ri=null),mc(rt.stateNode),Dk(tt,B$1()),et!==null)for(nt=tt.onRecoverableError,rt=0;rt<et.length;rt++)at=et[rt],nt(at.value,{componentStack:at.stack,digest:at.digest});if(Oi)throw Oi=!1,tt=Pi,Pi=null,tt;return xk&1&&tt.tag!==0&&Hk(),it=tt.pendingLanes,it&1?tt===zk?yk++:(yk=0,zk=tt):yk=0,jg(),null}function Hk(){if(wk!==null){var tt=Dc(xk),et=ok.transition,rt=C$1;try{if(ok.transition=null,C$1=16>tt?16:tt,wk===null)var nt=!1;else{if(tt=wk,wk=null,xk=0,K$1&6)throw Error(p$2(331));var at=K$1;for(K$1|=4,V$2=tt.current;V$2!==null;){var it=V$2,st=it.child;if(V$2.flags&16){var dt=it.deletions;if(dt!==null){for(var pt=0;pt<dt.length;pt++){var mt=dt[pt];for(V$2=mt;V$2!==null;){var yt=V$2;switch(yt.tag){case 0:case 11:case 15:Pj(8,yt,it)}var Rt=yt.child;if(Rt!==null)Rt.return=yt,V$2=Rt;else for(;V$2!==null;){yt=V$2;var Tt=yt.sibling,At=yt.return;if(Sj(yt),yt===mt){V$2=null;break}if(Tt!==null){Tt.return=At,V$2=Tt;break}V$2=At}}}var xt=it.alternate;if(xt!==null){var Nt=xt.child;if(Nt!==null){xt.child=null;do{var Ct=Nt.sibling;Nt.sibling=null,Nt=Ct}while(Nt!==null)}}V$2=it}}if(it.subtreeFlags&2064&&st!==null)st.return=it,V$2=st;else e:for(;V$2!==null;){if(it=V$2,it.flags&2048)switch(it.tag){case 0:case 11:case 15:Pj(9,it,it.return)}var Ot=it.sibling;if(Ot!==null){Ot.return=it.return,V$2=Ot;break e}V$2=it.return}}var kt=tt.current;for(V$2=kt;V$2!==null;){st=V$2;var Pt=st.child;if(st.subtreeFlags&2064&&Pt!==null)Pt.return=st,V$2=Pt;else e:for(st=kt;V$2!==null;){if(dt=V$2,dt.flags&2048)try{switch(dt.tag){case 0:case 11:case 15:Qj(9,dt)}}catch(Gt){W$2(dt,dt.return,Gt)}if(dt===st){V$2=null;break e}var Dt=dt.sibling;if(Dt!==null){Dt.return=dt.return,V$2=Dt;break e}V$2=dt.return}}if(K$1=at,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,tt)}catch{}nt=!0}return nt}finally{C$1=rt,ok.transition=et}}return!1}function Xk(tt,et,rt){et=Ji(rt,et),et=Ni(tt,et,1),tt=nh(tt,et,1),et=R(),tt!==null&&(Ac(tt,1,et),Dk(tt,et))}function W$2(tt,et,rt){if(tt.tag===3)Xk(tt,tt,rt);else for(;et!==null;){if(et.tag===3){Xk(et,tt,rt);break}else if(et.tag===1){var nt=et.stateNode;if(typeof et.type.getDerivedStateFromError=="function"||typeof nt.componentDidCatch=="function"&&(Ri===null||!Ri.has(nt))){tt=Ji(rt,tt),tt=Qi(et,tt,1),et=nh(et,tt,1),tt=R(),et!==null&&(Ac(et,1,tt),Dk(et,tt));break}}et=et.return}}function Ti(tt,et,rt){var nt=tt.pingCache;nt!==null&&nt.delete(et),et=R(),tt.pingedLanes|=tt.suspendedLanes&rt,Q$2===tt&&(Z$2&rt)===rt&&(T$3===4||T$3===3&&(Z$2&130023424)===Z$2&&500>B$1()-fk?Kk(tt,0):rk|=rt),Dk(tt,et)}function Yk(tt,et){et===0&&(tt.mode&1?(et=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):et=1);var rt=R();tt=ih(tt,et),tt!==null&&(Ac(tt,et,rt),Dk(tt,rt))}function uj(tt){var et=tt.memoizedState,rt=0;et!==null&&(rt=et.retryLane),Yk(tt,rt)}function bk(tt,et){var rt=0;switch(tt.tag){case 13:var nt=tt.stateNode,at=tt.memoizedState;at!==null&&(rt=at.retryLane);break;case 19:nt=tt.stateNode;break;default:throw Error(p$2(314))}nt!==null&&nt.delete(et),Yk(tt,rt)}var Vk;Vk=function(tt,et,rt){if(tt!==null)if(tt.memoizedProps!==et.pendingProps||Wf.current)dh$1=!0;else{if(!(tt.lanes&rt)&&!(et.flags&128))return dh$1=!1,yj(tt,et,rt);dh$1=!!(tt.flags&131072)}else dh$1=!1,I$2&&et.flags&1048576&&ug(et,ng,et.index);switch(et.lanes=0,et.tag){case 2:var nt=et.type;ij(tt,et),tt=et.pendingProps;var at=Yf(et,H$1.current);ch(et,rt),at=Nh(null,et,nt,tt,at,rt);var it=Sh();return et.flags|=1,typeof at=="object"&&at!==null&&typeof at.render=="function"&&at.$$typeof===void 0?(et.tag=1,et.memoizedState=null,et.updateQueue=null,Zf(nt)?(it=!0,cg(et)):it=!1,et.memoizedState=at.state!==null&&at.state!==void 0?at.state:null,kh(et),at.updater=Ei,et.stateNode=at,at._reactInternals=et,Ii(et,nt,tt,rt),et=jj(null,et,nt,!0,it,rt)):(et.tag=0,I$2&&it&&vg(et),Xi(null,et,at,rt),et=et.child),et;case 16:nt=et.elementType;e:{switch(ij(tt,et),tt=et.pendingProps,at=nt._init,nt=at(nt._payload),et.type=nt,at=et.tag=Zk(nt),tt=Ci(nt,tt),at){case 0:et=cj(null,et,nt,tt,rt);break e;case 1:et=hj(null,et,nt,tt,rt);break e;case 11:et=Yi(null,et,nt,tt,rt);break e;case 14:et=$i(null,et,nt,Ci(nt.type,tt),rt);break e}throw Error(p$2(306,nt,""))}return et;case 0:return nt=et.type,at=et.pendingProps,at=et.elementType===nt?at:Ci(nt,at),cj(tt,et,nt,at,rt);case 1:return nt=et.type,at=et.pendingProps,at=et.elementType===nt?at:Ci(nt,at),hj(tt,et,nt,at,rt);case 3:e:{if(kj(et),tt===null)throw Error(p$2(387));nt=et.pendingProps,it=et.memoizedState,at=it.element,lh(tt,et),qh(et,nt,null,rt);var st=et.memoizedState;if(nt=st.element,it.isDehydrated)if(it={element:nt,isDehydrated:!1,cache:st.cache,pendingSuspenseBoundaries:st.pendingSuspenseBoundaries,transitions:st.transitions},et.updateQueue.baseState=it,et.memoizedState=it,et.flags&256){at=Ji(Error(p$2(423)),et),et=lj(tt,et,nt,rt,at);break e}else if(nt!==at){at=Ji(Error(p$2(424)),et),et=lj(tt,et,nt,rt,at);break e}else for(yg=Lf(et.stateNode.containerInfo.firstChild),xg=et,I$2=!0,zg=null,rt=Vg(et,null,nt,rt),et.child=rt;rt;)rt.flags=rt.flags&-3|4096,rt=rt.sibling;else{if(Ig(),nt===at){et=Zi(tt,et,rt);break e}Xi(tt,et,nt,rt)}et=et.child}return et;case 5:return Ah(et),tt===null&&Eg(et),nt=et.type,at=et.pendingProps,it=tt!==null?tt.memoizedProps:null,st=at.children,Ef(nt,at)?st=null:it!==null&&Ef(nt,it)&&(et.flags|=32),gj(tt,et),Xi(tt,et,st,rt),et.child;case 6:return tt===null&&Eg(et),null;case 13:return oj(tt,et,rt);case 4:return yh(et,et.stateNode.containerInfo),nt=et.pendingProps,tt===null?et.child=Ug(et,null,nt,rt):Xi(tt,et,nt,rt),et.child;case 11:return nt=et.type,at=et.pendingProps,at=et.elementType===nt?at:Ci(nt,at),Yi(tt,et,nt,at,rt);case 7:return Xi(tt,et,et.pendingProps,rt),et.child;case 8:return Xi(tt,et,et.pendingProps.children,rt),et.child;case 12:return Xi(tt,et,et.pendingProps.children,rt),et.child;case 10:e:{if(nt=et.type._context,at=et.pendingProps,it=et.memoizedProps,st=at.value,G$2(Wg,nt._currentValue),nt._currentValue=st,it!==null)if(He(it.value,st)){if(it.children===at.children&&!Wf.current){et=Zi(tt,et,rt);break e}}else for(it=et.child,it!==null&&(it.return=et);it!==null;){var dt=it.dependencies;if(dt!==null){st=it.child;for(var pt=dt.firstContext;pt!==null;){if(pt.context===nt){if(it.tag===1){pt=mh(-1,rt&-rt),pt.tag=2;var mt=it.updateQueue;if(mt!==null){mt=mt.shared;var yt=mt.pending;yt===null?pt.next=pt:(pt.next=yt.next,yt.next=pt),mt.pending=pt}}it.lanes|=rt,pt=it.alternate,pt!==null&&(pt.lanes|=rt),bh(it.return,rt,et),dt.lanes|=rt;break}pt=pt.next}}else if(it.tag===10)st=it.type===et.type?null:it.child;else if(it.tag===18){if(st=it.return,st===null)throw Error(p$2(341));st.lanes|=rt,dt=st.alternate,dt!==null&&(dt.lanes|=rt),bh(st,rt,et),st=it.sibling}else st=it.child;if(st!==null)st.return=it;else for(st=it;st!==null;){if(st===et){st=null;break}if(it=st.sibling,it!==null){it.return=st.return,st=it;break}st=st.return}it=st}Xi(tt,et,at.children,rt),et=et.child}return et;case 9:return at=et.type,nt=et.pendingProps.children,ch(et,rt),at=eh(at),nt=nt(at),et.flags|=1,Xi(tt,et,nt,rt),et.child;case 14:return nt=et.type,at=Ci(nt,et.pendingProps),at=Ci(nt.type,at),$i(tt,et,nt,at,rt);case 15:return bj(tt,et,et.type,et.pendingProps,rt);case 17:return nt=et.type,at=et.pendingProps,at=et.elementType===nt?at:Ci(nt,at),ij(tt,et),et.tag=1,Zf(nt)?(tt=!0,cg(et)):tt=!1,ch(et,rt),Gi(et,nt,at),Ii(et,nt,at,rt),jj(null,et,nt,!0,tt,rt);case 19:return xj(tt,et,rt);case 22:return dj(tt,et,rt)}throw Error(p$2(156,et.tag))};function Fk(tt,et){return ac(tt,et)}function $k(tt,et,rt,nt){this.tag=tt,this.key=rt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=et,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=nt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(tt,et,rt,nt){return new $k(tt,et,rt,nt)}function aj(tt){return tt=tt.prototype,!(!tt||!tt.isReactComponent)}function Zk(tt){if(typeof tt=="function")return aj(tt)?1:0;if(tt!=null){if(tt=tt.$$typeof,tt===Da)return 11;if(tt===Ga)return 14}return 2}function Pg(tt,et){var rt=tt.alternate;return rt===null?(rt=Bg(tt.tag,et,tt.key,tt.mode),rt.elementType=tt.elementType,rt.type=tt.type,rt.stateNode=tt.stateNode,rt.alternate=tt,tt.alternate=rt):(rt.pendingProps=et,rt.type=tt.type,rt.flags=0,rt.subtreeFlags=0,rt.deletions=null),rt.flags=tt.flags&14680064,rt.childLanes=tt.childLanes,rt.lanes=tt.lanes,rt.child=tt.child,rt.memoizedProps=tt.memoizedProps,rt.memoizedState=tt.memoizedState,rt.updateQueue=tt.updateQueue,et=tt.dependencies,rt.dependencies=et===null?null:{lanes:et.lanes,firstContext:et.firstContext},rt.sibling=tt.sibling,rt.index=tt.index,rt.ref=tt.ref,rt}function Rg(tt,et,rt,nt,at,it){var st=2;if(nt=tt,typeof tt=="function")aj(tt)&&(st=1);else if(typeof tt=="string")st=5;else e:switch(tt){case ya:return Tg(rt.children,at,it,et);case za:st=8,at|=8;break;case Aa:return tt=Bg(12,rt,et,at|2),tt.elementType=Aa,tt.lanes=it,tt;case Ea:return tt=Bg(13,rt,et,at),tt.elementType=Ea,tt.lanes=it,tt;case Fa:return tt=Bg(19,rt,et,at),tt.elementType=Fa,tt.lanes=it,tt;case Ia:return pj(rt,at,it,et);default:if(typeof tt=="object"&&tt!==null)switch(tt.$$typeof){case Ba:st=10;break e;case Ca:st=9;break e;case Da:st=11;break e;case Ga:st=14;break e;case Ha:st=16,nt=null;break e}throw Error(p$2(130,tt==null?tt:typeof tt,""))}return et=Bg(st,rt,et,at),et.elementType=tt,et.type=nt,et.lanes=it,et}function Tg(tt,et,rt,nt){return tt=Bg(7,tt,nt,et),tt.lanes=rt,tt}function pj(tt,et,rt,nt){return tt=Bg(22,tt,nt,et),tt.elementType=Ia,tt.lanes=rt,tt.stateNode={isHidden:!1},tt}function Qg(tt,et,rt){return tt=Bg(6,tt,null,et),tt.lanes=rt,tt}function Sg(tt,et,rt){return et=Bg(4,tt.children!==null?tt.children:[],tt.key,et),et.lanes=rt,et.stateNode={containerInfo:tt.containerInfo,pendingChildren:null,implementation:tt.implementation},et}function al(tt,et,rt,nt,at){this.tag=et,this.containerInfo=tt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=nt,this.onRecoverableError=at,this.mutableSourceEagerHydrationData=null}function bl(tt,et,rt,nt,at,it,st,dt,pt){return tt=new al(tt,et,rt,dt,pt),et===1?(et=1,it===!0&&(et|=8)):et=0,it=Bg(3,null,null,et),tt.current=it,it.stateNode=tt,it.memoizedState={element:nt,isDehydrated:rt,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(it),tt}function cl(tt,et,rt){var nt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:nt==null?null:""+nt,children:tt,containerInfo:et,implementation:rt}}function dl(tt){if(!tt)return Vf;tt=tt._reactInternals;e:{if(Vb(tt)!==tt||tt.tag!==1)throw Error(p$2(170));var et=tt;do{switch(et.tag){case 3:et=et.stateNode.context;break e;case 1:if(Zf(et.type)){et=et.stateNode.__reactInternalMemoizedMergedChildContext;break e}}et=et.return}while(et!==null);throw Error(p$2(171))}if(tt.tag===1){var rt=tt.type;if(Zf(rt))return bg(tt,rt,et)}return et}function el(tt,et,rt,nt,at,it,st,dt,pt){return tt=bl(rt,nt,!0,tt,at,it,st,dt,pt),tt.context=dl(null),rt=tt.current,nt=R(),at=yi(rt),it=mh(nt,at),it.callback=et??null,nh(rt,it,at),tt.current.lanes=at,Ac(tt,at,nt),Dk(tt,nt),tt}function fl(tt,et,rt,nt){var at=et.current,it=R(),st=yi(at);return rt=dl(rt),et.context===null?et.context=rt:et.pendingContext=rt,et=mh(it,st),et.payload={element:tt},nt=nt===void 0?null:nt,nt!==null&&(et.callback=nt),tt=nh(at,et,st),tt!==null&&(gi(tt,at,st,it),oh(tt,at,st)),st}function gl(tt){if(tt=tt.current,!tt.child)return null;switch(tt.child.tag){case 5:return tt.child.stateNode;default:return tt.child.stateNode}}function hl(tt,et){if(tt=tt.memoizedState,tt!==null&&tt.dehydrated!==null){var rt=tt.retryLane;tt.retryLane=rt!==0&&rt<et?rt:et}}function il(tt,et){hl(tt,et),(tt=tt.alternate)&&hl(tt,et)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(tt){console.error(tt)};function ll(tt){this._internalRoot=tt}ml.prototype.render=ll.prototype.render=function(tt){var et=this._internalRoot;if(et===null)throw Error(p$2(409));fl(tt,et,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var tt=this._internalRoot;if(tt!==null){this._internalRoot=null;var et=tt.containerInfo;Rk(function(){fl(null,tt,null,null)}),et[uf]=null}};function ml(tt){this._internalRoot=tt}ml.prototype.unstable_scheduleHydration=function(tt){if(tt){var et=Hc();tt={blockedOn:null,target:tt,priority:et};for(var rt=0;rt<Qc.length&&et!==0&&et<Qc[rt].priority;rt++);Qc.splice(rt,0,tt),rt===0&&Vc(tt)}};function nl(tt){return!(!tt||tt.nodeType!==1&&tt.nodeType!==9&&tt.nodeType!==11)}function ol(tt){return!(!tt||tt.nodeType!==1&&tt.nodeType!==9&&tt.nodeType!==11&&(tt.nodeType!==8||tt.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(tt,et,rt,nt,at){if(at){if(typeof nt=="function"){var it=nt;nt=function(){var mt=gl(st);it.call(mt)}}var st=el(et,nt,tt,0,null,!1,!1,"",pl);return tt._reactRootContainer=st,tt[uf]=st.current,sf(tt.nodeType===8?tt.parentNode:tt),Rk(),st}for(;at=tt.lastChild;)tt.removeChild(at);if(typeof nt=="function"){var dt=nt;nt=function(){var mt=gl(pt);dt.call(mt)}}var pt=bl(tt,0,!1,null,null,!1,!1,"",pl);return tt._reactRootContainer=pt,tt[uf]=pt.current,sf(tt.nodeType===8?tt.parentNode:tt),Rk(function(){fl(et,pt,rt,nt)}),pt}function rl(tt,et,rt,nt,at){var it=rt._reactRootContainer;if(it){var st=it;if(typeof at=="function"){var dt=at;at=function(){var pt=gl(st);dt.call(pt)}}fl(et,st,tt,at)}else st=ql(rt,et,tt,at,nt);return gl(st)}Ec=function(tt){switch(tt.tag){case 3:var et=tt.stateNode;if(et.current.memoizedState.isDehydrated){var rt=tc(et.pendingLanes);rt!==0&&(Cc(et,rt|1),Dk(et,B$1()),!(K$1&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var nt=ih(tt,1);if(nt!==null){var at=R();gi(nt,tt,1,at)}}),il(tt,1)}};Fc=function(tt){if(tt.tag===13){var et=ih(tt,134217728);if(et!==null){var rt=R();gi(et,tt,134217728,rt)}il(tt,134217728)}};Gc=function(tt){if(tt.tag===13){var et=yi(tt),rt=ih(tt,et);if(rt!==null){var nt=R();gi(rt,tt,et,nt)}il(tt,et)}};Hc=function(){return C$1};Ic=function(tt,et){var rt=C$1;try{return C$1=tt,et()}finally{C$1=rt}};yb=function(tt,et,rt){switch(et){case"input":if(bb(tt,rt),et=rt.name,rt.type==="radio"&&et!=null){for(rt=tt;rt.parentNode;)rt=rt.parentNode;for(rt=rt.querySelectorAll("input[name="+JSON.stringify(""+et)+'][type="radio"]'),et=0;et<rt.length;et++){var nt=rt[et];if(nt!==tt&&nt.form===tt.form){var at=Db(nt);if(!at)throw Error(p$2(90));Wa(nt),bb(nt,at)}}}break;case"textarea":ib(tt,rt);break;case"select":et=rt.value,et!=null&&fb(tt,!!rt.multiple,et,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(tt){return tt=Zb(tt),tt===null?null:tt.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(tt,et){var rt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(et))throw Error(p$2(200));return cl(tt,et,null,rt)};reactDom_production_min.createRoot=function(tt,et){if(!nl(tt))throw Error(p$2(299));var rt=!1,nt="",at=kl;return et!=null&&(et.unstable_strictMode===!0&&(rt=!0),et.identifierPrefix!==void 0&&(nt=et.identifierPrefix),et.onRecoverableError!==void 0&&(at=et.onRecoverableError)),et=bl(tt,1,!1,null,null,rt,!1,nt,at),tt[uf]=et.current,sf(tt.nodeType===8?tt.parentNode:tt),new ll(et)};reactDom_production_min.findDOMNode=function(tt){if(tt==null)return null;if(tt.nodeType===1)return tt;var et=tt._reactInternals;if(et===void 0)throw typeof tt.render=="function"?Error(p$2(188)):(tt=Object.keys(tt).join(","),Error(p$2(268,tt)));return tt=Zb(et),tt=tt===null?null:tt.stateNode,tt};reactDom_production_min.flushSync=function(tt){return Rk(tt)};reactDom_production_min.hydrate=function(tt,et,rt){if(!ol(et))throw Error(p$2(200));return rl(null,tt,et,!0,rt)};reactDom_production_min.hydrateRoot=function(tt,et,rt){if(!nl(tt))throw Error(p$2(405));var nt=rt!=null&&rt.hydratedSources||null,at=!1,it="",st=kl;if(rt!=null&&(rt.unstable_strictMode===!0&&(at=!0),rt.identifierPrefix!==void 0&&(it=rt.identifierPrefix),rt.onRecoverableError!==void 0&&(st=rt.onRecoverableError)),et=el(et,null,tt,1,rt??null,at,!1,it,st),tt[uf]=et.current,sf(tt),nt)for(tt=0;tt<nt.length;tt++)rt=nt[tt],at=rt._getVersion,at=at(rt._source),et.mutableSourceEagerHydrationData==null?et.mutableSourceEagerHydrationData=[rt,at]:et.mutableSourceEagerHydrationData.push(rt,at);return new ml(et)};reactDom_production_min.render=function(tt,et,rt){if(!ol(et))throw Error(p$2(200));return rl(null,tt,et,!1,rt)};reactDom_production_min.unmountComponentAtNode=function(tt){if(!ol(tt))throw Error(p$2(40));return tt._reactRootContainer?(Rk(function(){rl(null,null,tt,!1,function(){tt._reactRootContainer=null,tt[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(tt,et,rt,nt){if(!ol(rt))throw Error(p$2(200));if(tt==null||tt._reactInternals===void 0)throw Error(p$2(38));return rl(tt,et,rt,!1,nt)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(tt){console.error(tt)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m$3=reactDomExports;createRoot=m$3.createRoot,m$3.hydrateRoot;var buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$2=0,len=code.length;i$2<len;++i$2)lookup[i$2]=code[i$2],revLookup[code.charCodeAt(i$2)]=i$2;revLookup[45]=62;revLookup[95]=63;function getLens(tt){var et=tt.length;if(et%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var rt=tt.indexOf("=");rt===-1&&(rt=et);var nt=rt===et?0:4-rt%4;return[rt,nt]}function byteLength(tt){var et=getLens(tt),rt=et[0],nt=et[1];return(rt+nt)*3/4-nt}function _byteLength(tt,et,rt){return(et+rt)*3/4-rt}function toByteArray(tt){var et,rt=getLens(tt),nt=rt[0],at=rt[1],it=new Arr(_byteLength(tt,nt,at)),st=0,dt=at>0?nt-4:nt,pt;for(pt=0;pt<dt;pt+=4)et=revLookup[tt.charCodeAt(pt)]<<18|revLookup[tt.charCodeAt(pt+1)]<<12|revLookup[tt.charCodeAt(pt+2)]<<6|revLookup[tt.charCodeAt(pt+3)],it[st++]=et>>16&255,it[st++]=et>>8&255,it[st++]=et&255;return at===2&&(et=revLookup[tt.charCodeAt(pt)]<<2|revLookup[tt.charCodeAt(pt+1)]>>4,it[st++]=et&255),at===1&&(et=revLookup[tt.charCodeAt(pt)]<<10|revLookup[tt.charCodeAt(pt+1)]<<4|revLookup[tt.charCodeAt(pt+2)]>>2,it[st++]=et>>8&255,it[st++]=et&255),it}function tripletToBase64(tt){return lookup[tt>>18&63]+lookup[tt>>12&63]+lookup[tt>>6&63]+lookup[tt&63]}function encodeChunk(tt,et,rt){for(var nt,at=[],it=et;it<rt;it+=3)nt=(tt[it]<<16&16711680)+(tt[it+1]<<8&65280)+(tt[it+2]&255),at.push(tripletToBase64(nt));return at.join("")}function fromByteArray(tt){for(var et,rt=tt.length,nt=rt%3,at=[],it=16383,st=0,dt=rt-nt;st<dt;st+=it)at.push(encodeChunk(tt,st,st+it>dt?dt:st+it));return nt===1?(et=tt[rt-1],at.push(lookup[et>>2]+lookup[et<<4&63]+"==")):nt===2&&(et=(tt[rt-2]<<8)+tt[rt-1],at.push(lookup[et>>10]+lookup[et>>4&63]+lookup[et<<2&63]+"=")),at.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(tt,et,rt,nt,at){var it,st,dt=at*8-nt-1,pt=(1<<dt)-1,mt=pt>>1,yt=-7,Rt=rt?at-1:0,Tt=rt?-1:1,At=tt[et+Rt];for(Rt+=Tt,it=At&(1<<-yt)-1,At>>=-yt,yt+=dt;yt>0;it=it*256+tt[et+Rt],Rt+=Tt,yt-=8);for(st=it&(1<<-yt)-1,it>>=-yt,yt+=nt;yt>0;st=st*256+tt[et+Rt],Rt+=Tt,yt-=8);if(it===0)it=1-mt;else{if(it===pt)return st?NaN:(At?-1:1)*(1/0);st=st+Math.pow(2,nt),it=it-mt}return(At?-1:1)*st*Math.pow(2,it-nt)};ieee754.write=function(tt,et,rt,nt,at,it){var st,dt,pt,mt=it*8-at-1,yt=(1<<mt)-1,Rt=yt>>1,Tt=at===23?Math.pow(2,-24)-Math.pow(2,-77):0,At=nt?0:it-1,xt=nt?1:-1,Nt=et<0||et===0&&1/et<0?1:0;for(et=Math.abs(et),isNaN(et)||et===1/0?(dt=isNaN(et)?1:0,st=yt):(st=Math.floor(Math.log(et)/Math.LN2),et*(pt=Math.pow(2,-st))<1&&(st--,pt*=2),st+Rt>=1?et+=Tt/pt:et+=Tt*Math.pow(2,1-Rt),et*pt>=2&&(st++,pt/=2),st+Rt>=yt?(dt=0,st=yt):st+Rt>=1?(dt=(et*pt-1)*Math.pow(2,at),st=st+Rt):(dt=et*Math.pow(2,Rt-1)*Math.pow(2,at),st=0));at>=8;tt[rt+At]=dt&255,At+=xt,dt/=256,at-=8);for(st=st<<at|dt,mt+=at;mt>0;tt[rt+At]=st&255,At+=xt,st/=256,mt-=8);tt[rt+At-xt]|=Nt*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(tt){const et=base64Js,rt=ieee754,nt=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;tt.Buffer=yt,tt.SlowBuffer=Gt,tt.INSPECT_MAX_BYTES=50;const at=2147483647;tt.kMaxLength=at;const{Uint8Array:it,ArrayBuffer:st,SharedArrayBuffer:dt}=globalThis;yt.TYPED_ARRAY_SUPPORT=pt(),!yt.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function pt(){try{const Xt=new it(1),Bt={foo:function(){return 42}};return Object.setPrototypeOf(Bt,it.prototype),Object.setPrototypeOf(Xt,Bt),Xt.foo()===42}catch{return!1}}Object.defineProperty(yt.prototype,"parent",{enumerable:!0,get:function(){if(yt.isBuffer(this))return this.buffer}}),Object.defineProperty(yt.prototype,"offset",{enumerable:!0,get:function(){if(yt.isBuffer(this))return this.byteOffset}});function mt(Xt){if(Xt>at)throw new RangeError('The value "'+Xt+'" is invalid for option "size"');const Bt=new it(Xt);return Object.setPrototypeOf(Bt,yt.prototype),Bt}function yt(Xt,Bt,Wt){if(typeof Xt=="number"){if(typeof Bt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return xt(Xt)}return Rt(Xt,Bt,Wt)}yt.poolSize=8192;function Rt(Xt,Bt,Wt){if(typeof Xt=="string")return Nt(Xt,Bt);if(st.isView(Xt))return Ot(Xt);if(Xt==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Xt);if(Ar(Xt,st)||Xt&&Ar(Xt.buffer,st)||typeof dt<"u"&&(Ar(Xt,dt)||Xt&&Ar(Xt.buffer,dt)))return kt(Xt,Bt,Wt);if(typeof Xt=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const nr=Xt.valueOf&&Xt.valueOf();if(nr!=null&&nr!==Xt)return yt.from(nr,Bt,Wt);const cr=Pt(Xt);if(cr)return cr;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Xt[Symbol.toPrimitive]=="function")return yt.from(Xt[Symbol.toPrimitive]("string"),Bt,Wt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Xt)}yt.from=function(Xt,Bt,Wt){return Rt(Xt,Bt,Wt)},Object.setPrototypeOf(yt.prototype,it.prototype),Object.setPrototypeOf(yt,it);function Tt(Xt){if(typeof Xt!="number")throw new TypeError('"size" argument must be of type number');if(Xt<0)throw new RangeError('The value "'+Xt+'" is invalid for option "size"')}function At(Xt,Bt,Wt){return Tt(Xt),Xt<=0?mt(Xt):Bt!==void 0?typeof Wt=="string"?mt(Xt).fill(Bt,Wt):mt(Xt).fill(Bt):mt(Xt)}yt.alloc=function(Xt,Bt,Wt){return At(Xt,Bt,Wt)};function xt(Xt){return Tt(Xt),mt(Xt<0?0:Dt(Xt)|0)}yt.allocUnsafe=function(Xt){return xt(Xt)},yt.allocUnsafeSlow=function(Xt){return xt(Xt)};function Nt(Xt,Bt){if((typeof Bt!="string"||Bt==="")&&(Bt="utf8"),!yt.isEncoding(Bt))throw new TypeError("Unknown encoding: "+Bt);const Wt=jt(Xt,Bt)|0;let nr=mt(Wt);const cr=nr.write(Xt,Bt);return cr!==Wt&&(nr=nr.slice(0,cr)),nr}function Ct(Xt){const Bt=Xt.length<0?0:Dt(Xt.length)|0,Wt=mt(Bt);for(let nr=0;nr<Bt;nr+=1)Wt[nr]=Xt[nr]&255;return Wt}function Ot(Xt){if(Ar(Xt,it)){const Bt=new it(Xt);return kt(Bt.buffer,Bt.byteOffset,Bt.byteLength)}return Ct(Xt)}function kt(Xt,Bt,Wt){if(Bt<0||Xt.byteLength<Bt)throw new RangeError('"offset" is outside of buffer bounds');if(Xt.byteLength<Bt+(Wt||0))throw new RangeError('"length" is outside of buffer bounds');let nr;return Bt===void 0&&Wt===void 0?nr=new it(Xt):Wt===void 0?nr=new it(Xt,Bt):nr=new it(Xt,Bt,Wt),Object.setPrototypeOf(nr,yt.prototype),nr}function Pt(Xt){if(yt.isBuffer(Xt)){const Bt=Dt(Xt.length)|0,Wt=mt(Bt);return Wt.length===0||Xt.copy(Wt,0,0,Bt),Wt}if(Xt.length!==void 0)return typeof Xt.length!="number"||gn(Xt.length)?mt(0):Ct(Xt);if(Xt.type==="Buffer"&&Array.isArray(Xt.data))return Ct(Xt.data)}function Dt(Xt){if(Xt>=at)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+at.toString(16)+" bytes");return Xt|0}function Gt(Xt){return+Xt!=Xt&&(Xt=0),yt.alloc(+Xt)}yt.isBuffer=function(Bt){return Bt!=null&&Bt._isBuffer===!0&&Bt!==yt.prototype},yt.compare=function(Bt,Wt){if(Ar(Bt,it)&&(Bt=yt.from(Bt,Bt.offset,Bt.byteLength)),Ar(Wt,it)&&(Wt=yt.from(Wt,Wt.offset,Wt.byteLength)),!yt.isBuffer(Bt)||!yt.isBuffer(Wt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Bt===Wt)return 0;let nr=Bt.length,cr=Wt.length;for(let Sr=0,_r=Math.min(nr,cr);Sr<_r;++Sr)if(Bt[Sr]!==Wt[Sr]){nr=Bt[Sr],cr=Wt[Sr];break}return nr<cr?-1:cr<nr?1:0},yt.isEncoding=function(Bt){switch(String(Bt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},yt.concat=function(Bt,Wt){if(!Array.isArray(Bt))throw new TypeError('"list" argument must be an Array of Buffers');if(Bt.length===0)return yt.alloc(0);let nr;if(Wt===void 0)for(Wt=0,nr=0;nr<Bt.length;++nr)Wt+=Bt[nr].length;const cr=yt.allocUnsafe(Wt);let Sr=0;for(nr=0;nr<Bt.length;++nr){let _r=Bt[nr];if(Ar(_r,it))Sr+_r.length>cr.length?(yt.isBuffer(_r)||(_r=yt.from(_r)),_r.copy(cr,Sr)):it.prototype.set.call(cr,_r,Sr);else if(yt.isBuffer(_r))_r.copy(cr,Sr);else throw new TypeError('"list" argument must be an Array of Buffers');Sr+=_r.length}return cr};function jt(Xt,Bt){if(yt.isBuffer(Xt))return Xt.length;if(st.isView(Xt)||Ar(Xt,st))return Xt.byteLength;if(typeof Xt!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Xt);const Wt=Xt.length,nr=arguments.length>2&&arguments[2]===!0;if(!nr&&Wt===0)return 0;let cr=!1;for(;;)switch(Bt){case"ascii":case"latin1":case"binary":return Wt;case"utf8":case"utf-8":return Wr(Xt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Wt*2;case"hex":return Wt>>>1;case"base64":return an(Xt).length;default:if(cr)return nr?-1:Wr(Xt).length;Bt=(""+Bt).toLowerCase(),cr=!0}}yt.byteLength=jt;function Yt(Xt,Bt,Wt){let nr=!1;if((Bt===void 0||Bt<0)&&(Bt=0),Bt>this.length||((Wt===void 0||Wt>this.length)&&(Wt=this.length),Wt<=0)||(Wt>>>=0,Bt>>>=0,Wt<=Bt))return"";for(Xt||(Xt="utf8");;)switch(Xt){case"hex":return Mt(this,Bt,Wt);case"utf8":case"utf-8":return bt(this,Bt,Wt);case"ascii":return ct(this,Bt,Wt);case"latin1":case"binary":return St(this,Bt,Wt);case"base64":return wt(this,Bt,Wt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Lt(this,Bt,Wt);default:if(nr)throw new TypeError("Unknown encoding: "+Xt);Xt=(Xt+"").toLowerCase(),nr=!0}}yt.prototype._isBuffer=!0;function tr(Xt,Bt,Wt){const nr=Xt[Bt];Xt[Bt]=Xt[Wt],Xt[Wt]=nr}yt.prototype.swap16=function(){const Bt=this.length;if(Bt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Wt=0;Wt<Bt;Wt+=2)tr(this,Wt,Wt+1);return this},yt.prototype.swap32=function(){const Bt=this.length;if(Bt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Wt=0;Wt<Bt;Wt+=4)tr(this,Wt,Wt+3),tr(this,Wt+1,Wt+2);return this},yt.prototype.swap64=function(){const Bt=this.length;if(Bt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Wt=0;Wt<Bt;Wt+=8)tr(this,Wt,Wt+7),tr(this,Wt+1,Wt+6),tr(this,Wt+2,Wt+5),tr(this,Wt+3,Wt+4);return this},yt.prototype.toString=function(){const Bt=this.length;return Bt===0?"":arguments.length===0?bt(this,0,Bt):Yt.apply(this,arguments)},yt.prototype.toLocaleString=yt.prototype.toString,yt.prototype.equals=function(Bt){if(!yt.isBuffer(Bt))throw new TypeError("Argument must be a Buffer");return this===Bt?!0:yt.compare(this,Bt)===0},yt.prototype.inspect=function(){let Bt="";const Wt=tt.INSPECT_MAX_BYTES;return Bt=this.toString("hex",0,Wt).replace(/(.{2})/g,"$1 ").trim(),this.length>Wt&&(Bt+=" ... "),"<Buffer "+Bt+">"},nt&&(yt.prototype[nt]=yt.prototype.inspect),yt.prototype.compare=function(Bt,Wt,nr,cr,Sr){if(Ar(Bt,it)&&(Bt=yt.from(Bt,Bt.offset,Bt.byteLength)),!yt.isBuffer(Bt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Bt);if(Wt===void 0&&(Wt=0),nr===void 0&&(nr=Bt?Bt.length:0),cr===void 0&&(cr=0),Sr===void 0&&(Sr=this.length),Wt<0||nr>Bt.length||cr<0||Sr>this.length)throw new RangeError("out of range index");if(cr>=Sr&&Wt>=nr)return 0;if(cr>=Sr)return-1;if(Wt>=nr)return 1;if(Wt>>>=0,nr>>>=0,cr>>>=0,Sr>>>=0,this===Bt)return 0;let _r=Sr-cr,xr=nr-Wt;const pn=Math.min(_r,xr),Tr=this.slice(cr,Sr),Ur=Bt.slice(Wt,nr);for(let un=0;un<pn;++un)if(Tr[un]!==Ur[un]){_r=Tr[un],xr=Ur[un];break}return _r<xr?-1:xr<_r?1:0};function er(Xt,Bt,Wt,nr,cr){if(Xt.length===0)return-1;if(typeof Wt=="string"?(nr=Wt,Wt=0):Wt>2147483647?Wt=2147483647:Wt<-2147483648&&(Wt=-2147483648),Wt=+Wt,gn(Wt)&&(Wt=cr?0:Xt.length-1),Wt<0&&(Wt=Xt.length+Wt),Wt>=Xt.length){if(cr)return-1;Wt=Xt.length-1}else if(Wt<0)if(cr)Wt=0;else return-1;if(typeof Bt=="string"&&(Bt=yt.from(Bt,nr)),yt.isBuffer(Bt))return Bt.length===0?-1:lr(Xt,Bt,Wt,nr,cr);if(typeof Bt=="number")return Bt=Bt&255,typeof it.prototype.indexOf=="function"?cr?it.prototype.indexOf.call(Xt,Bt,Wt):it.prototype.lastIndexOf.call(Xt,Bt,Wt):lr(Xt,[Bt],Wt,nr,cr);throw new TypeError("val must be string, number or Buffer")}function lr(Xt,Bt,Wt,nr,cr){let Sr=1,_r=Xt.length,xr=Bt.length;if(nr!==void 0&&(nr=String(nr).toLowerCase(),nr==="ucs2"||nr==="ucs-2"||nr==="utf16le"||nr==="utf-16le")){if(Xt.length<2||Bt.length<2)return-1;Sr=2,_r/=2,xr/=2,Wt/=2}function pn(Ur,un){return Sr===1?Ur[un]:Ur.readUInt16BE(un*Sr)}let Tr;if(cr){let Ur=-1;for(Tr=Wt;Tr<_r;Tr++)if(pn(Xt,Tr)===pn(Bt,Ur===-1?0:Tr-Ur)){if(Ur===-1&&(Ur=Tr),Tr-Ur+1===xr)return Ur*Sr}else Ur!==-1&&(Tr-=Tr-Ur),Ur=-1}else for(Wt+xr>_r&&(Wt=_r-xr),Tr=Wt;Tr>=0;Tr--){let Ur=!0;for(let un=0;un<xr;un++)if(pn(Xt,Tr+un)!==pn(Bt,un)){Ur=!1;break}if(Ur)return Tr}return-1}yt.prototype.includes=function(Bt,Wt,nr){return this.indexOf(Bt,Wt,nr)!==-1},yt.prototype.indexOf=function(Bt,Wt,nr){return er(this,Bt,Wt,nr,!0)},yt.prototype.lastIndexOf=function(Bt,Wt,nr){return er(this,Bt,Wt,nr,!1)};function It(Xt,Bt,Wt,nr){Wt=Number(Wt)||0;const cr=Xt.length-Wt;nr?(nr=Number(nr),nr>cr&&(nr=cr)):nr=cr;const Sr=Bt.length;nr>Sr/2&&(nr=Sr/2);let _r;for(_r=0;_r<nr;++_r){const xr=parseInt(Bt.substr(_r*2,2),16);if(gn(xr))return _r;Xt[Wt+_r]=xr}return _r}function ot(Xt,Bt,Wt,nr){return Er(Wr(Bt,Xt.length-Wt),Xt,Wt,nr)}function ft(Xt,Bt,Wt,nr){return Er($r(Bt),Xt,Wt,nr)}function ht(Xt,Bt,Wt,nr){return Er(an(Bt),Xt,Wt,nr)}function vt(Xt,Bt,Wt,nr){return Er(Cr(Bt,Xt.length-Wt),Xt,Wt,nr)}yt.prototype.write=function(Bt,Wt,nr,cr){if(Wt===void 0)cr="utf8",nr=this.length,Wt=0;else if(nr===void 0&&typeof Wt=="string")cr=Wt,nr=this.length,Wt=0;else if(isFinite(Wt))Wt=Wt>>>0,isFinite(nr)?(nr=nr>>>0,cr===void 0&&(cr="utf8")):(cr=nr,nr=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Sr=this.length-Wt;if((nr===void 0||nr>Sr)&&(nr=Sr),Bt.length>0&&(nr<0||Wt<0)||Wt>this.length)throw new RangeError("Attempt to write outside buffer bounds");cr||(cr="utf8");let _r=!1;for(;;)switch(cr){case"hex":return It(this,Bt,Wt,nr);case"utf8":case"utf-8":return ot(this,Bt,Wt,nr);case"ascii":case"latin1":case"binary":return ft(this,Bt,Wt,nr);case"base64":return ht(this,Bt,Wt,nr);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt(this,Bt,Wt,nr);default:if(_r)throw new TypeError("Unknown encoding: "+cr);cr=(""+cr).toLowerCase(),_r=!0}},yt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function wt(Xt,Bt,Wt){return Bt===0&&Wt===Xt.length?et.fromByteArray(Xt):et.fromByteArray(Xt.slice(Bt,Wt))}function bt(Xt,Bt,Wt){Wt=Math.min(Xt.length,Wt);const nr=[];let cr=Bt;for(;cr<Wt;){const Sr=Xt[cr];let _r=null,xr=Sr>239?4:Sr>223?3:Sr>191?2:1;if(cr+xr<=Wt){let pn,Tr,Ur,un;switch(xr){case 1:Sr<128&&(_r=Sr);break;case 2:pn=Xt[cr+1],(pn&192)===128&&(un=(Sr&31)<<6|pn&63,un>127&&(_r=un));break;case 3:pn=Xt[cr+1],Tr=Xt[cr+2],(pn&192)===128&&(Tr&192)===128&&(un=(Sr&15)<<12|(pn&63)<<6|Tr&63,un>2047&&(un<55296||un>57343)&&(_r=un));break;case 4:pn=Xt[cr+1],Tr=Xt[cr+2],Ur=Xt[cr+3],(pn&192)===128&&(Tr&192)===128&&(Ur&192)===128&&(un=(Sr&15)<<18|(pn&63)<<12|(Tr&63)<<6|Ur&63,un>65535&&un<1114112&&(_r=un))}}_r===null?(_r=65533,xr=1):_r>65535&&(_r-=65536,nr.push(_r>>>10&1023|55296),_r=56320|_r&1023),nr.push(_r),cr+=xr}return Et(nr)}const $t=4096;function Et(Xt){const Bt=Xt.length;if(Bt<=$t)return String.fromCharCode.apply(String,Xt);let Wt="",nr=0;for(;nr<Bt;)Wt+=String.fromCharCode.apply(String,Xt.slice(nr,nr+=$t));return Wt}function ct(Xt,Bt,Wt){let nr="";Wt=Math.min(Xt.length,Wt);for(let cr=Bt;cr<Wt;++cr)nr+=String.fromCharCode(Xt[cr]&127);return nr}function St(Xt,Bt,Wt){let nr="";Wt=Math.min(Xt.length,Wt);for(let cr=Bt;cr<Wt;++cr)nr+=String.fromCharCode(Xt[cr]);return nr}function Mt(Xt,Bt,Wt){const nr=Xt.length;(!Bt||Bt<0)&&(Bt=0),(!Wt||Wt<0||Wt>nr)&&(Wt=nr);let cr="";for(let Sr=Bt;Sr<Wt;++Sr)cr+=Or[Xt[Sr]];return cr}function Lt(Xt,Bt,Wt){const nr=Xt.slice(Bt,Wt);let cr="";for(let Sr=0;Sr<nr.length-1;Sr+=2)cr+=String.fromCharCode(nr[Sr]+nr[Sr+1]*256);return cr}yt.prototype.slice=function(Bt,Wt){const nr=this.length;Bt=~~Bt,Wt=Wt===void 0?nr:~~Wt,Bt<0?(Bt+=nr,Bt<0&&(Bt=0)):Bt>nr&&(Bt=nr),Wt<0?(Wt+=nr,Wt<0&&(Wt=0)):Wt>nr&&(Wt=nr),Wt<Bt&&(Wt=Bt);const cr=this.subarray(Bt,Wt);return Object.setPrototypeOf(cr,yt.prototype),cr};function Ut(Xt,Bt,Wt){if(Xt%1!==0||Xt<0)throw new RangeError("offset is not uint");if(Xt+Bt>Wt)throw new RangeError("Trying to access beyond buffer length")}yt.prototype.readUintLE=yt.prototype.readUIntLE=function(Bt,Wt,nr){Bt=Bt>>>0,Wt=Wt>>>0,nr||Ut(Bt,Wt,this.length);let cr=this[Bt],Sr=1,_r=0;for(;++_r<Wt&&(Sr*=256);)cr+=this[Bt+_r]*Sr;return cr},yt.prototype.readUintBE=yt.prototype.readUIntBE=function(Bt,Wt,nr){Bt=Bt>>>0,Wt=Wt>>>0,nr||Ut(Bt,Wt,this.length);let cr=this[Bt+--Wt],Sr=1;for(;Wt>0&&(Sr*=256);)cr+=this[Bt+--Wt]*Sr;return cr},yt.prototype.readUint8=yt.prototype.readUInt8=function(Bt,Wt){return Bt=Bt>>>0,Wt||Ut(Bt,1,this.length),this[Bt]},yt.prototype.readUint16LE=yt.prototype.readUInt16LE=function(Bt,Wt){return Bt=Bt>>>0,Wt||Ut(Bt,2,this.length),this[Bt]|this[Bt+1]<<8},yt.prototype.readUint16BE=yt.prototype.readUInt16BE=function(Bt,Wt){return Bt=Bt>>>0,Wt||Ut(Bt,2,this.length),this[Bt]<<8|this[Bt+1]},yt.prototype.readUint32LE=yt.prototype.readUInt32LE=function(Bt,Wt){return Bt=Bt>>>0,Wt||Ut(Bt,4,this.length),(this[Bt]|this[Bt+1]<<8|this[Bt+2]<<16)+this[Bt+3]*16777216},yt.prototype.readUint32BE=yt.prototype.readUInt32BE=function(Bt,Wt){return Bt=Bt>>>0,Wt||Ut(Bt,4,this.length),this[Bt]*16777216+(this[Bt+1]<<16|this[Bt+2]<<8|this[Bt+3])},yt.prototype.readBigUInt64LE=Lr(function(Bt){Bt=Bt>>>0,pr(Bt,"offset");const Wt=this[Bt],nr=this[Bt+7];(Wt===void 0||nr===void 0)&&Fr(Bt,this.length-8);const cr=Wt+this[++Bt]*2**8+this[++Bt]*2**16+this[++Bt]*2**24,Sr=this[++Bt]+this[++Bt]*2**8+this[++Bt]*2**16+nr*2**24;return BigInt(cr)+(BigInt(Sr)<<BigInt(32))}),yt.prototype.readBigUInt64BE=Lr(function(Bt){Bt=Bt>>>0,pr(Bt,"offset");const Wt=this[Bt],nr=this[Bt+7];(Wt===void 0||nr===void 0)&&Fr(Bt,this.length-8);const cr=Wt*2**24+this[++Bt]*2**16+this[++Bt]*2**8+this[++Bt],Sr=this[++Bt]*2**24+this[++Bt]*2**16+this[++Bt]*2**8+nr;return(BigInt(cr)<<BigInt(32))+BigInt(Sr)}),yt.prototype.readIntLE=function(Bt,Wt,nr){Bt=Bt>>>0,Wt=Wt>>>0,nr||Ut(Bt,Wt,this.length);let cr=this[Bt],Sr=1,_r=0;for(;++_r<Wt&&(Sr*=256);)cr+=this[Bt+_r]*Sr;return Sr*=128,cr>=Sr&&(cr-=Math.pow(2,8*Wt)),cr},yt.prototype.readIntBE=function(Bt,Wt,nr){Bt=Bt>>>0,Wt=Wt>>>0,nr||Ut(Bt,Wt,this.length);let cr=Wt,Sr=1,_r=this[Bt+--cr];for(;cr>0&&(Sr*=256);)_r+=this[Bt+--cr]*Sr;return Sr*=128,_r>=Sr&&(_r-=Math.pow(2,8*Wt)),_r},yt.prototype.readInt8=function(Bt,Wt){return Bt=Bt>>>0,Wt||Ut(Bt,1,this.length),this[Bt]&128?(255-this[Bt]+1)*-1:this[Bt]},yt.prototype.readInt16LE=function(Bt,Wt){Bt=Bt>>>0,Wt||Ut(Bt,2,this.length);const nr=this[Bt]|this[Bt+1]<<8;return nr&32768?nr|4294901760:nr},yt.prototype.readInt16BE=function(Bt,Wt){Bt=Bt>>>0,Wt||Ut(Bt,2,this.length);const nr=this[Bt+1]|this[Bt]<<8;return nr&32768?nr|4294901760:nr},yt.prototype.readInt32LE=function(Bt,Wt){return Bt=Bt>>>0,Wt||Ut(Bt,4,this.length),this[Bt]|this[Bt+1]<<8|this[Bt+2]<<16|this[Bt+3]<<24},yt.prototype.readInt32BE=function(Bt,Wt){return Bt=Bt>>>0,Wt||Ut(Bt,4,this.length),this[Bt]<<24|this[Bt+1]<<16|this[Bt+2]<<8|this[Bt+3]},yt.prototype.readBigInt64LE=Lr(function(Bt){Bt=Bt>>>0,pr(Bt,"offset");const Wt=this[Bt],nr=this[Bt+7];(Wt===void 0||nr===void 0)&&Fr(Bt,this.length-8);const cr=this[Bt+4]+this[Bt+5]*2**8+this[Bt+6]*2**16+(nr<<24);return(BigInt(cr)<<BigInt(32))+BigInt(Wt+this[++Bt]*2**8+this[++Bt]*2**16+this[++Bt]*2**24)}),yt.prototype.readBigInt64BE=Lr(function(Bt){Bt=Bt>>>0,pr(Bt,"offset");const Wt=this[Bt],nr=this[Bt+7];(Wt===void 0||nr===void 0)&&Fr(Bt,this.length-8);const cr=(Wt<<24)+this[++Bt]*2**16+this[++Bt]*2**8+this[++Bt];return(BigInt(cr)<<BigInt(32))+BigInt(this[++Bt]*2**24+this[++Bt]*2**16+this[++Bt]*2**8+nr)}),yt.prototype.readFloatLE=function(Bt,Wt){return Bt=Bt>>>0,Wt||Ut(Bt,4,this.length),rt.read(this,Bt,!0,23,4)},yt.prototype.readFloatBE=function(Bt,Wt){return Bt=Bt>>>0,Wt||Ut(Bt,4,this.length),rt.read(this,Bt,!1,23,4)},yt.prototype.readDoubleLE=function(Bt,Wt){return Bt=Bt>>>0,Wt||Ut(Bt,8,this.length),rt.read(this,Bt,!0,52,8)},yt.prototype.readDoubleBE=function(Bt,Wt){return Bt=Bt>>>0,Wt||Ut(Bt,8,this.length),rt.read(this,Bt,!1,52,8)};function Kt(Xt,Bt,Wt,nr,cr,Sr){if(!yt.isBuffer(Xt))throw new TypeError('"buffer" argument must be a Buffer instance');if(Bt>cr||Bt<Sr)throw new RangeError('"value" argument is out of bounds');if(Wt+nr>Xt.length)throw new RangeError("Index out of range")}yt.prototype.writeUintLE=yt.prototype.writeUIntLE=function(Bt,Wt,nr,cr){if(Bt=+Bt,Wt=Wt>>>0,nr=nr>>>0,!cr){const xr=Math.pow(2,8*nr)-1;Kt(this,Bt,Wt,nr,xr,0)}let Sr=1,_r=0;for(this[Wt]=Bt&255;++_r<nr&&(Sr*=256);)this[Wt+_r]=Bt/Sr&255;return Wt+nr},yt.prototype.writeUintBE=yt.prototype.writeUIntBE=function(Bt,Wt,nr,cr){if(Bt=+Bt,Wt=Wt>>>0,nr=nr>>>0,!cr){const xr=Math.pow(2,8*nr)-1;Kt(this,Bt,Wt,nr,xr,0)}let Sr=nr-1,_r=1;for(this[Wt+Sr]=Bt&255;--Sr>=0&&(_r*=256);)this[Wt+Sr]=Bt/_r&255;return Wt+nr},yt.prototype.writeUint8=yt.prototype.writeUInt8=function(Bt,Wt,nr){return Bt=+Bt,Wt=Wt>>>0,nr||Kt(this,Bt,Wt,1,255,0),this[Wt]=Bt&255,Wt+1},yt.prototype.writeUint16LE=yt.prototype.writeUInt16LE=function(Bt,Wt,nr){return Bt=+Bt,Wt=Wt>>>0,nr||Kt(this,Bt,Wt,2,65535,0),this[Wt]=Bt&255,this[Wt+1]=Bt>>>8,Wt+2},yt.prototype.writeUint16BE=yt.prototype.writeUInt16BE=function(Bt,Wt,nr){return Bt=+Bt,Wt=Wt>>>0,nr||Kt(this,Bt,Wt,2,65535,0),this[Wt]=Bt>>>8,this[Wt+1]=Bt&255,Wt+2},yt.prototype.writeUint32LE=yt.prototype.writeUInt32LE=function(Bt,Wt,nr){return Bt=+Bt,Wt=Wt>>>0,nr||Kt(this,Bt,Wt,4,4294967295,0),this[Wt+3]=Bt>>>24,this[Wt+2]=Bt>>>16,this[Wt+1]=Bt>>>8,this[Wt]=Bt&255,Wt+4},yt.prototype.writeUint32BE=yt.prototype.writeUInt32BE=function(Bt,Wt,nr){return Bt=+Bt,Wt=Wt>>>0,nr||Kt(this,Bt,Wt,4,4294967295,0),this[Wt]=Bt>>>24,this[Wt+1]=Bt>>>16,this[Wt+2]=Bt>>>8,this[Wt+3]=Bt&255,Wt+4};function Ht(Xt,Bt,Wt,nr,cr){ur(Bt,nr,cr,Xt,Wt,7);let Sr=Number(Bt&BigInt(4294967295));Xt[Wt++]=Sr,Sr=Sr>>8,Xt[Wt++]=Sr,Sr=Sr>>8,Xt[Wt++]=Sr,Sr=Sr>>8,Xt[Wt++]=Sr;let _r=Number(Bt>>BigInt(32)&BigInt(4294967295));return Xt[Wt++]=_r,_r=_r>>8,Xt[Wt++]=_r,_r=_r>>8,Xt[Wt++]=_r,_r=_r>>8,Xt[Wt++]=_r,Wt}function Ft(Xt,Bt,Wt,nr,cr){ur(Bt,nr,cr,Xt,Wt,7);let Sr=Number(Bt&BigInt(4294967295));Xt[Wt+7]=Sr,Sr=Sr>>8,Xt[Wt+6]=Sr,Sr=Sr>>8,Xt[Wt+5]=Sr,Sr=Sr>>8,Xt[Wt+4]=Sr;let _r=Number(Bt>>BigInt(32)&BigInt(4294967295));return Xt[Wt+3]=_r,_r=_r>>8,Xt[Wt+2]=_r,_r=_r>>8,Xt[Wt+1]=_r,_r=_r>>8,Xt[Wt]=_r,Wt+8}yt.prototype.writeBigUInt64LE=Lr(function(Bt,Wt=0){return Ht(this,Bt,Wt,BigInt(0),BigInt("0xffffffffffffffff"))}),yt.prototype.writeBigUInt64BE=Lr(function(Bt,Wt=0){return Ft(this,Bt,Wt,BigInt(0),BigInt("0xffffffffffffffff"))}),yt.prototype.writeIntLE=function(Bt,Wt,nr,cr){if(Bt=+Bt,Wt=Wt>>>0,!cr){const pn=Math.pow(2,8*nr-1);Kt(this,Bt,Wt,nr,pn-1,-pn)}let Sr=0,_r=1,xr=0;for(this[Wt]=Bt&255;++Sr<nr&&(_r*=256);)Bt<0&&xr===0&&this[Wt+Sr-1]!==0&&(xr=1),this[Wt+Sr]=(Bt/_r>>0)-xr&255;return Wt+nr},yt.prototype.writeIntBE=function(Bt,Wt,nr,cr){if(Bt=+Bt,Wt=Wt>>>0,!cr){const pn=Math.pow(2,8*nr-1);Kt(this,Bt,Wt,nr,pn-1,-pn)}let Sr=nr-1,_r=1,xr=0;for(this[Wt+Sr]=Bt&255;--Sr>=0&&(_r*=256);)Bt<0&&xr===0&&this[Wt+Sr+1]!==0&&(xr=1),this[Wt+Sr]=(Bt/_r>>0)-xr&255;return Wt+nr},yt.prototype.writeInt8=function(Bt,Wt,nr){return Bt=+Bt,Wt=Wt>>>0,nr||Kt(this,Bt,Wt,1,127,-128),Bt<0&&(Bt=255+Bt+1),this[Wt]=Bt&255,Wt+1},yt.prototype.writeInt16LE=function(Bt,Wt,nr){return Bt=+Bt,Wt=Wt>>>0,nr||Kt(this,Bt,Wt,2,32767,-32768),this[Wt]=Bt&255,this[Wt+1]=Bt>>>8,Wt+2},yt.prototype.writeInt16BE=function(Bt,Wt,nr){return Bt=+Bt,Wt=Wt>>>0,nr||Kt(this,Bt,Wt,2,32767,-32768),this[Wt]=Bt>>>8,this[Wt+1]=Bt&255,Wt+2},yt.prototype.writeInt32LE=function(Bt,Wt,nr){return Bt=+Bt,Wt=Wt>>>0,nr||Kt(this,Bt,Wt,4,2147483647,-2147483648),this[Wt]=Bt&255,this[Wt+1]=Bt>>>8,this[Wt+2]=Bt>>>16,this[Wt+3]=Bt>>>24,Wt+4},yt.prototype.writeInt32BE=function(Bt,Wt,nr){return Bt=+Bt,Wt=Wt>>>0,nr||Kt(this,Bt,Wt,4,2147483647,-2147483648),Bt<0&&(Bt=4294967295+Bt+1),this[Wt]=Bt>>>24,this[Wt+1]=Bt>>>16,this[Wt+2]=Bt>>>8,this[Wt+3]=Bt&255,Wt+4},yt.prototype.writeBigInt64LE=Lr(function(Bt,Wt=0){return Ht(this,Bt,Wt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),yt.prototype.writeBigInt64BE=Lr(function(Bt,Wt=0){return Ft(this,Bt,Wt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function zt(Xt,Bt,Wt,nr,cr,Sr){if(Wt+nr>Xt.length)throw new RangeError("Index out of range");if(Wt<0)throw new RangeError("Index out of range")}function ir(Xt,Bt,Wt,nr,cr){return Bt=+Bt,Wt=Wt>>>0,cr||zt(Xt,Bt,Wt,4),rt.write(Xt,Bt,Wt,nr,23,4),Wt+4}yt.prototype.writeFloatLE=function(Bt,Wt,nr){return ir(this,Bt,Wt,!0,nr)},yt.prototype.writeFloatBE=function(Bt,Wt,nr){return ir(this,Bt,Wt,!1,nr)};function sr(Xt,Bt,Wt,nr,cr){return Bt=+Bt,Wt=Wt>>>0,cr||zt(Xt,Bt,Wt,8),rt.write(Xt,Bt,Wt,nr,52,8),Wt+8}yt.prototype.writeDoubleLE=function(Bt,Wt,nr){return sr(this,Bt,Wt,!0,nr)},yt.prototype.writeDoubleBE=function(Bt,Wt,nr){return sr(this,Bt,Wt,!1,nr)},yt.prototype.copy=function(Bt,Wt,nr,cr){if(!yt.isBuffer(Bt))throw new TypeError("argument should be a Buffer");if(nr||(nr=0),!cr&&cr!==0&&(cr=this.length),Wt>=Bt.length&&(Wt=Bt.length),Wt||(Wt=0),cr>0&&cr<nr&&(cr=nr),cr===nr||Bt.length===0||this.length===0)return 0;if(Wt<0)throw new RangeError("targetStart out of bounds");if(nr<0||nr>=this.length)throw new RangeError("Index out of range");if(cr<0)throw new RangeError("sourceEnd out of bounds");cr>this.length&&(cr=this.length),Bt.length-Wt<cr-nr&&(cr=Bt.length-Wt+nr);const Sr=cr-nr;return this===Bt&&typeof it.prototype.copyWithin=="function"?this.copyWithin(Wt,nr,cr):it.prototype.set.call(Bt,this.subarray(nr,cr),Wt),Sr},yt.prototype.fill=function(Bt,Wt,nr,cr){if(typeof Bt=="string"){if(typeof Wt=="string"?(cr=Wt,Wt=0,nr=this.length):typeof nr=="string"&&(cr=nr,nr=this.length),cr!==void 0&&typeof cr!="string")throw new TypeError("encoding must be a string");if(typeof cr=="string"&&!yt.isEncoding(cr))throw new TypeError("Unknown encoding: "+cr);if(Bt.length===1){const _r=Bt.charCodeAt(0);(cr==="utf8"&&_r<128||cr==="latin1")&&(Bt=_r)}}else typeof Bt=="number"?Bt=Bt&255:typeof Bt=="boolean"&&(Bt=Number(Bt));if(Wt<0||this.length<Wt||this.length<nr)throw new RangeError("Out of range index");if(nr<=Wt)return this;Wt=Wt>>>0,nr=nr===void 0?this.length:nr>>>0,Bt||(Bt=0);let Sr;if(typeof Bt=="number")for(Sr=Wt;Sr<nr;++Sr)this[Sr]=Bt;else{const _r=yt.isBuffer(Bt)?Bt:yt.from(Bt,cr),xr=_r.length;if(xr===0)throw new TypeError('The value "'+Bt+'" is invalid for argument "value"');for(Sr=0;Sr<nr-Wt;++Sr)this[Sr+Wt]=_r[Sr%xr]}return this};const ar={};function Vt(Xt,Bt,Wt){ar[Xt]=class extends Wt{constructor(){super(),Object.defineProperty(this,"message",{value:Bt.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Xt}]`,this.stack,delete this.name}get code(){return Xt}set code(cr){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:cr,writable:!0})}toString(){return`${this.name} [${Xt}]: ${this.message}`}}}Vt("ERR_BUFFER_OUT_OF_BOUNDS",function(Xt){return Xt?`${Xt} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Vt("ERR_INVALID_ARG_TYPE",function(Xt,Bt){return`The "${Xt}" argument must be of type number. Received type ${typeof Bt}`},TypeError),Vt("ERR_OUT_OF_RANGE",function(Xt,Bt,Wt){let nr=`The value of "${Xt}" is out of range.`,cr=Wt;return Number.isInteger(Wt)&&Math.abs(Wt)>2**32?cr=fr(String(Wt)):typeof Wt=="bigint"&&(cr=String(Wt),(Wt>BigInt(2)**BigInt(32)||Wt<-(BigInt(2)**BigInt(32)))&&(cr=fr(cr)),cr+="n"),nr+=` It must be ${Bt}. Received ${cr}`,nr},RangeError);function fr(Xt){let Bt="",Wt=Xt.length;const nr=Xt[0]==="-"?1:0;for(;Wt>=nr+4;Wt-=3)Bt=`_${Xt.slice(Wt-3,Wt)}${Bt}`;return`${Xt.slice(0,Wt)}${Bt}`}function Gr(Xt,Bt,Wt){pr(Bt,"offset"),(Xt[Bt]===void 0||Xt[Bt+Wt]===void 0)&&Fr(Bt,Xt.length-(Wt+1))}function ur(Xt,Bt,Wt,nr,cr,Sr){if(Xt>Wt||Xt<Bt){const _r=typeof Bt=="bigint"?"n":"";let xr;throw Bt===0||Bt===BigInt(0)?xr=`>= 0${_r} and < 2${_r} ** ${(Sr+1)*8}${_r}`:xr=`>= -(2${_r} ** ${(Sr+1)*8-1}${_r}) and < 2 ** ${(Sr+1)*8-1}${_r}`,new ar.ERR_OUT_OF_RANGE("value",xr,Xt)}Gr(nr,cr,Sr)}function pr(Xt,Bt){if(typeof Xt!="number")throw new ar.ERR_INVALID_ARG_TYPE(Bt,"number",Xt)}function Fr(Xt,Bt,Wt){throw Math.floor(Xt)!==Xt?(pr(Xt,Wt),new ar.ERR_OUT_OF_RANGE("offset","an integer",Xt)):Bt<0?new ar.ERR_BUFFER_OUT_OF_BOUNDS:new ar.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Bt}`,Xt)}const yr=/[^+/0-9A-Za-z-_]/g;function hr(Xt){if(Xt=Xt.split("=")[0],Xt=Xt.trim().replace(yr,""),Xt.length<2)return"";for(;Xt.length%4!==0;)Xt=Xt+"=";return Xt}function Wr(Xt,Bt){Bt=Bt||1/0;let Wt;const nr=Xt.length;let cr=null;const Sr=[];for(let _r=0;_r<nr;++_r){if(Wt=Xt.charCodeAt(_r),Wt>55295&&Wt<57344){if(!cr){if(Wt>56319){(Bt-=3)>-1&&Sr.push(239,191,189);continue}else if(_r+1===nr){(Bt-=3)>-1&&Sr.push(239,191,189);continue}cr=Wt;continue}if(Wt<56320){(Bt-=3)>-1&&Sr.push(239,191,189),cr=Wt;continue}Wt=(cr-55296<<10|Wt-56320)+65536}else cr&&(Bt-=3)>-1&&Sr.push(239,191,189);if(cr=null,Wt<128){if((Bt-=1)<0)break;Sr.push(Wt)}else if(Wt<2048){if((Bt-=2)<0)break;Sr.push(Wt>>6|192,Wt&63|128)}else if(Wt<65536){if((Bt-=3)<0)break;Sr.push(Wt>>12|224,Wt>>6&63|128,Wt&63|128)}else if(Wt<1114112){if((Bt-=4)<0)break;Sr.push(Wt>>18|240,Wt>>12&63|128,Wt>>6&63|128,Wt&63|128)}else throw new Error("Invalid code point")}return Sr}function $r(Xt){const Bt=[];for(let Wt=0;Wt<Xt.length;++Wt)Bt.push(Xt.charCodeAt(Wt)&255);return Bt}function Cr(Xt,Bt){let Wt,nr,cr;const Sr=[];for(let _r=0;_r<Xt.length&&!((Bt-=2)<0);++_r)Wt=Xt.charCodeAt(_r),nr=Wt>>8,cr=Wt%256,Sr.push(cr),Sr.push(nr);return Sr}function an(Xt){return et.toByteArray(hr(Xt))}function Er(Xt,Bt,Wt,nr){let cr;for(cr=0;cr<nr&&!(cr+Wt>=Bt.length||cr>=Xt.length);++cr)Bt[cr+Wt]=Xt[cr];return cr}function Ar(Xt,Bt){return Xt instanceof Bt||Xt!=null&&Xt.constructor!=null&&Xt.constructor.name!=null&&Xt.constructor.name===Bt.name}function gn(Xt){return Xt!==Xt}const Or=function(){const Xt="0123456789abcdef",Bt=new Array(256);for(let Wt=0;Wt<16;++Wt){const nr=Wt*16;for(let cr=0;cr<16;++cr)Bt[nr+cr]=Xt[Wt]+Xt[cr]}return Bt}();function Lr(Xt){return typeof BigInt>"u"?wn:Xt}function wn(){throw new Error("BigInt not supported")}})(buffer$1);const Buffer=buffer$1.Buffer,Blob$4=buffer$1.Blob,BlobOptions=buffer$1.BlobOptions,Buffer$1=buffer$1.Buffer,File=buffer$1.File,FileOptions=buffer$1.FileOptions,INSPECT_MAX_BYTES=buffer$1.INSPECT_MAX_BYTES,SlowBuffer=buffer$1.SlowBuffer,TranscodeEncoding=buffer$1.TranscodeEncoding,atob=buffer$1.atob,btoa=buffer$1.btoa,constants$4=buffer$1.constants,isAscii=buffer$1.isAscii,isUtf8=buffer$1.isUtf8,kMaxLength=buffer$1.kMaxLength,kStringMaxLength=buffer$1.kStringMaxLength,resolveObjectURL=buffer$1.resolveObjectURL,transcode=buffer$1.transcode,dist$3=Object.freeze(Object.defineProperty({__proto__:null,Blob:Blob$4,BlobOptions,Buffer:Buffer$1,File,FileOptions,INSPECT_MAX_BYTES,SlowBuffer,TranscodeEncoding,atob,btoa,constants:constants$4,default:Buffer,isAscii,isUtf8,kMaxLength,kStringMaxLength,resolveObjectURL,transcode},Symbol.toStringTag,{value:"Module"}));function number$2(tt){if(!Number.isSafeInteger(tt)||tt<0)throw new Error(`positive integer expected, not ${tt}`)}function isBytes$1(tt){return tt instanceof Uint8Array||tt!=null&&typeof tt=="object"&&tt.constructor.name==="Uint8Array"}function bytes(tt,...et){if(!isBytes$1(tt))throw new Error("Uint8Array expected");if(et.length>0&&!et.includes(tt.length))throw new Error(`Uint8Array expected of length ${et}, not of length=${tt.length}`)}function hash$2(tt){if(typeof tt!="function"||typeof tt.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$2(tt.outputLen),number$2(tt.blockLen)}function exists(tt,et=!0){if(tt.destroyed)throw new Error("Hash instance has been destroyed");if(et&&tt.finished)throw new Error("Hash#digest() has already been called")}function output(tt,et){bytes(tt);const rt=et.outputLen;if(tt.length<rt)throw new Error(`digestInto() expects output buffer of length at least ${rt}`)}const crypto$1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u32$2=tt=>new Uint32Array(tt.buffer,tt.byteOffset,Math.floor(tt.byteLength/4)),createView=tt=>new DataView(tt.buffer,tt.byteOffset,tt.byteLength),rotr=(tt,et)=>tt<<32-et|tt>>>et,isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,byteSwap=tt=>tt<<24&4278190080|tt<<8&16711680|tt>>>8&65280|tt>>>24&255;function byteSwap32(tt){for(let et=0;et<tt.length;et++)tt[et]=byteSwap(tt[et])}function utf8ToBytes$1(tt){if(typeof tt!="string")throw new Error(`utf8ToBytes expected string, got ${typeof tt}`);return new Uint8Array(new TextEncoder().encode(tt))}function toBytes(tt){return typeof tt=="string"&&(tt=utf8ToBytes$1(tt)),bytes(tt),tt}function concatBytes$1(...tt){let et=0;for(let nt=0;nt<tt.length;nt++){const at=tt[nt];bytes(at),et+=at.length}const rt=new Uint8Array(et);for(let nt=0,at=0;nt<tt.length;nt++){const it=tt[nt];rt.set(it,at),at+=it.length}return rt}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(tt){const et=nt=>tt().update(toBytes(nt)).digest(),rt=tt();return et.outputLen=rt.outputLen,et.blockLen=rt.blockLen,et.create=()=>tt(),et}function randomBytes(tt=32){if(crypto$1&&typeof crypto$1.getRandomValues=="function")return crypto$1.getRandomValues(new Uint8Array(tt));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64(tt,et,rt,nt){if(typeof tt.setBigUint64=="function")return tt.setBigUint64(et,rt,nt);const at=BigInt(32),it=BigInt(4294967295),st=Number(rt>>at&it),dt=Number(rt&it),pt=nt?4:0,mt=nt?0:4;tt.setUint32(et+pt,st,nt),tt.setUint32(et+mt,dt,nt)}const Chi=(tt,et,rt)=>tt&et^~tt&rt,Maj=(tt,et,rt)=>tt&et^tt&rt^et&rt;class HashMD extends Hash{constructor(et,rt,nt,at){super(),this.blockLen=et,this.outputLen=rt,this.padOffset=nt,this.isLE=at,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(et),this.view=createView(this.buffer)}update(et){exists(this);const{view:rt,buffer:nt,blockLen:at}=this;et=toBytes(et);const it=et.length;for(let st=0;st<it;){const dt=Math.min(at-this.pos,it-st);if(dt===at){const pt=createView(et);for(;at<=it-st;st+=at)this.process(pt,st);continue}nt.set(et.subarray(st,st+dt),this.pos),this.pos+=dt,st+=dt,this.pos===at&&(this.process(rt,0),this.pos=0)}return this.length+=et.length,this.roundClean(),this}digestInto(et){exists(this),output(et,this),this.finished=!0;const{buffer:rt,view:nt,blockLen:at,isLE:it}=this;let{pos:st}=this;rt[st++]=128,this.buffer.subarray(st).fill(0),this.padOffset>at-st&&(this.process(nt,0),st=0);for(let Rt=st;Rt<at;Rt++)rt[Rt]=0;setBigUint64(nt,at-8,BigInt(this.length*8),it),this.process(nt,0);const dt=createView(et),pt=this.outputLen;if(pt%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const mt=pt/4,yt=this.get();if(mt>yt.length)throw new Error("_sha2: outputLen bigger than state");for(let Rt=0;Rt<mt;Rt++)dt.setUint32(4*Rt,yt[Rt],it)}digest(){const{buffer:et,outputLen:rt}=this;this.digestInto(et);const nt=et.slice(0,rt);return this.destroy(),nt}_cloneInto(et){et||(et=new this.constructor),et.set(...this.get());const{blockLen:rt,buffer:nt,length:at,finished:it,destroyed:st,pos:dt}=this;return et.length=at,et.pos=dt,et.finished=it,et.destroyed=st,at%rt&&et.buffer.set(nt),et}}const U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(tt,et=!1){return et?{h:Number(tt&U32_MASK64),l:Number(tt>>_32n&U32_MASK64)}:{h:Number(tt>>_32n&U32_MASK64)|0,l:Number(tt&U32_MASK64)|0}}function split$1(tt,et=!1){let rt=new Uint32Array(tt.length),nt=new Uint32Array(tt.length);for(let at=0;at<tt.length;at++){const{h:it,l:st}=fromBig(tt[at],et);[rt[at],nt[at]]=[it,st]}return[rt,nt]}const toBig=(tt,et)=>BigInt(tt>>>0)<<_32n|BigInt(et>>>0),shrSH=(tt,et,rt)=>tt>>>rt,shrSL=(tt,et,rt)=>tt<<32-rt|et>>>rt,rotrSH=(tt,et,rt)=>tt>>>rt|et<<32-rt,rotrSL=(tt,et,rt)=>tt<<32-rt|et>>>rt,rotrBH=(tt,et,rt)=>tt<<64-rt|et>>>rt-32,rotrBL=(tt,et,rt)=>tt>>>rt-32|et<<64-rt,rotr32H=(tt,et)=>et,rotr32L=(tt,et)=>tt,rotlSH=(tt,et,rt)=>tt<<rt|et>>>32-rt,rotlSL=(tt,et,rt)=>et<<rt|tt>>>32-rt,rotlBH=(tt,et,rt)=>et<<rt-32|tt>>>64-rt,rotlBL=(tt,et,rt)=>tt<<rt-32|et>>>64-rt;function add$4(tt,et,rt,nt){const at=(et>>>0)+(nt>>>0);return{h:tt+rt+(at/2**32|0)|0,l:at|0}}const add3L=(tt,et,rt)=>(tt>>>0)+(et>>>0)+(rt>>>0),add3H=(tt,et,rt,nt)=>et+rt+nt+(tt/2**32|0)|0,add4L=(tt,et,rt,nt)=>(tt>>>0)+(et>>>0)+(rt>>>0)+(nt>>>0),add4H=(tt,et,rt,nt,at)=>et+rt+nt+at+(tt/2**32|0)|0,add5L=(tt,et,rt,nt,at)=>(tt>>>0)+(et>>>0)+(rt>>>0)+(nt>>>0)+(at>>>0),add5H=(tt,et,rt,nt,at,it)=>et+rt+nt+at+it+(tt/2**32|0)|0,u64$3={fromBig,split:split$1,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add:add$4,add3L,add3H,add4L,add4H,add5H,add5L},[SHA512_Kh,SHA512_Kl]=u64$3.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(tt=>BigInt(tt))),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);class SHA512 extends HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:et,Al:rt,Bh:nt,Bl:at,Ch:it,Cl:st,Dh:dt,Dl:pt,Eh:mt,El:yt,Fh:Rt,Fl:Tt,Gh:At,Gl:xt,Hh:Nt,Hl:Ct}=this;return[et,rt,nt,at,it,st,dt,pt,mt,yt,Rt,Tt,At,xt,Nt,Ct]}set(et,rt,nt,at,it,st,dt,pt,mt,yt,Rt,Tt,At,xt,Nt,Ct){this.Ah=et|0,this.Al=rt|0,this.Bh=nt|0,this.Bl=at|0,this.Ch=it|0,this.Cl=st|0,this.Dh=dt|0,this.Dl=pt|0,this.Eh=mt|0,this.El=yt|0,this.Fh=Rt|0,this.Fl=Tt|0,this.Gh=At|0,this.Gl=xt|0,this.Hh=Nt|0,this.Hl=Ct|0}process(et,rt){for(let Pt=0;Pt<16;Pt++,rt+=4)SHA512_W_H[Pt]=et.getUint32(rt),SHA512_W_L[Pt]=et.getUint32(rt+=4);for(let Pt=16;Pt<80;Pt++){const Dt=SHA512_W_H[Pt-15]|0,Gt=SHA512_W_L[Pt-15]|0,jt=u64$3.rotrSH(Dt,Gt,1)^u64$3.rotrSH(Dt,Gt,8)^u64$3.shrSH(Dt,Gt,7),Yt=u64$3.rotrSL(Dt,Gt,1)^u64$3.rotrSL(Dt,Gt,8)^u64$3.shrSL(Dt,Gt,7),tr=SHA512_W_H[Pt-2]|0,er=SHA512_W_L[Pt-2]|0,lr=u64$3.rotrSH(tr,er,19)^u64$3.rotrBH(tr,er,61)^u64$3.shrSH(tr,er,6),It=u64$3.rotrSL(tr,er,19)^u64$3.rotrBL(tr,er,61)^u64$3.shrSL(tr,er,6),ot=u64$3.add4L(Yt,It,SHA512_W_L[Pt-7],SHA512_W_L[Pt-16]),ft=u64$3.add4H(ot,jt,lr,SHA512_W_H[Pt-7],SHA512_W_H[Pt-16]);SHA512_W_H[Pt]=ft|0,SHA512_W_L[Pt]=ot|0}let{Ah:nt,Al:at,Bh:it,Bl:st,Ch:dt,Cl:pt,Dh:mt,Dl:yt,Eh:Rt,El:Tt,Fh:At,Fl:xt,Gh:Nt,Gl:Ct,Hh:Ot,Hl:kt}=this;for(let Pt=0;Pt<80;Pt++){const Dt=u64$3.rotrSH(Rt,Tt,14)^u64$3.rotrSH(Rt,Tt,18)^u64$3.rotrBH(Rt,Tt,41),Gt=u64$3.rotrSL(Rt,Tt,14)^u64$3.rotrSL(Rt,Tt,18)^u64$3.rotrBL(Rt,Tt,41),jt=Rt&At^~Rt&Nt,Yt=Tt&xt^~Tt&Ct,tr=u64$3.add5L(kt,Gt,Yt,SHA512_Kl[Pt],SHA512_W_L[Pt]),er=u64$3.add5H(tr,Ot,Dt,jt,SHA512_Kh[Pt],SHA512_W_H[Pt]),lr=tr|0,It=u64$3.rotrSH(nt,at,28)^u64$3.rotrBH(nt,at,34)^u64$3.rotrBH(nt,at,39),ot=u64$3.rotrSL(nt,at,28)^u64$3.rotrBL(nt,at,34)^u64$3.rotrBL(nt,at,39),ft=nt&it^nt&dt^it&dt,ht=at&st^at&pt^st&pt;Ot=Nt|0,kt=Ct|0,Nt=At|0,Ct=xt|0,At=Rt|0,xt=Tt|0,{h:Rt,l:Tt}=u64$3.add(mt|0,yt|0,er|0,lr|0),mt=dt|0,yt=pt|0,dt=it|0,pt=st|0,it=nt|0,st=at|0;const vt=u64$3.add3L(lr,ot,ht);nt=u64$3.add3H(vt,er,It,ft),at=vt|0}({h:nt,l:at}=u64$3.add(this.Ah|0,this.Al|0,nt|0,at|0)),{h:it,l:st}=u64$3.add(this.Bh|0,this.Bl|0,it|0,st|0),{h:dt,l:pt}=u64$3.add(this.Ch|0,this.Cl|0,dt|0,pt|0),{h:mt,l:yt}=u64$3.add(this.Dh|0,this.Dl|0,mt|0,yt|0),{h:Rt,l:Tt}=u64$3.add(this.Eh|0,this.El|0,Rt|0,Tt|0),{h:At,l:xt}=u64$3.add(this.Fh|0,this.Fl|0,At|0,xt|0),{h:Nt,l:Ct}=u64$3.add(this.Gh|0,this.Gl|0,Nt|0,Ct|0),{h:Ot,l:kt}=u64$3.add(this.Hh|0,this.Hl|0,Ot|0,kt|0),this.set(nt,at,it,st,dt,pt,mt,yt,Rt,Tt,At,xt,Nt,Ct,Ot,kt)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sha512$2=wrapConstructor(()=>new SHA512);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$5=BigInt(0),_1n$7=BigInt(1),_2n$5=BigInt(2);function isBytes(tt){return tt instanceof Uint8Array||tt!=null&&typeof tt=="object"&&tt.constructor.name==="Uint8Array"}function abytes(tt){if(!isBytes(tt))throw new Error("Uint8Array expected")}const hexes=Array.from({length:256},(tt,et)=>et.toString(16).padStart(2,"0"));function bytesToHex(tt){abytes(tt);let et="";for(let rt=0;rt<tt.length;rt++)et+=hexes[tt[rt]];return et}function numberToHexUnpadded(tt){const et=tt.toString(16);return et.length&1?`0${et}`:et}function hexToNumber(tt){if(typeof tt!="string")throw new Error("hex string expected, got "+typeof tt);return BigInt(tt===""?"0":`0x${tt}`)}const asciis={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16(tt){if(tt>=asciis._0&&tt<=asciis._9)return tt-asciis._0;if(tt>=asciis._A&&tt<=asciis._F)return tt-(asciis._A-10);if(tt>=asciis._a&&tt<=asciis._f)return tt-(asciis._a-10)}function hexToBytes(tt){if(typeof tt!="string")throw new Error("hex string expected, got "+typeof tt);const et=tt.length,rt=et/2;if(et%2)throw new Error("padded hex string expected, got unpadded hex of length "+et);const nt=new Uint8Array(rt);for(let at=0,it=0;at<rt;at++,it+=2){const st=asciiToBase16(tt.charCodeAt(it)),dt=asciiToBase16(tt.charCodeAt(it+1));if(st===void 0||dt===void 0){const pt=tt[it]+tt[it+1];throw new Error('hex string expected, got non-hex character "'+pt+'" at index '+it)}nt[at]=st*16+dt}return nt}function bytesToNumberBE(tt){return hexToNumber(bytesToHex(tt))}function bytesToNumberLE(tt){return abytes(tt),hexToNumber(bytesToHex(Uint8Array.from(tt).reverse()))}function numberToBytesBE(tt,et){return hexToBytes(tt.toString(16).padStart(et*2,"0"))}function numberToBytesLE(tt,et){return numberToBytesBE(tt,et).reverse()}function numberToVarBytesBE(tt){return hexToBytes(numberToHexUnpadded(tt))}function ensureBytes(tt,et,rt){let nt;if(typeof et=="string")try{nt=hexToBytes(et)}catch(it){throw new Error(`${tt} must be valid hex string, got "${et}". Cause: ${it}`)}else if(isBytes(et))nt=Uint8Array.from(et);else throw new Error(`${tt} must be hex string or Uint8Array`);const at=nt.length;if(typeof rt=="number"&&at!==rt)throw new Error(`${tt} expected ${rt} bytes, got ${at}`);return nt}function concatBytes(...tt){let et=0;for(let nt=0;nt<tt.length;nt++){const at=tt[nt];abytes(at),et+=at.length}const rt=new Uint8Array(et);for(let nt=0,at=0;nt<tt.length;nt++){const it=tt[nt];rt.set(it,at),at+=it.length}return rt}function equalBytes(tt,et){if(tt.length!==et.length)return!1;let rt=0;for(let nt=0;nt<tt.length;nt++)rt|=tt[nt]^et[nt];return rt===0}function utf8ToBytes(tt){if(typeof tt!="string")throw new Error(`utf8ToBytes expected string, got ${typeof tt}`);return new Uint8Array(new TextEncoder().encode(tt))}function bitLen(tt){let et;for(et=0;tt>_0n$5;tt>>=_1n$7,et+=1);return et}function bitGet(tt,et){return tt>>BigInt(et)&_1n$7}function bitSet(tt,et,rt){return tt|(rt?_1n$7:_0n$5)<<BigInt(et)}const bitMask=tt=>(_2n$5<<BigInt(tt-1))-_1n$7,u8n=tt=>new Uint8Array(tt),u8fr=tt=>Uint8Array.from(tt);function createHmacDrbg(tt,et,rt){if(typeof tt!="number"||tt<2)throw new Error("hashLen must be a number");if(typeof et!="number"||et<2)throw new Error("qByteLen must be a number");if(typeof rt!="function")throw new Error("hmacFn must be a function");let nt=u8n(tt),at=u8n(tt),it=0;const st=()=>{nt.fill(1),at.fill(0),it=0},dt=(...Rt)=>rt(at,nt,...Rt),pt=(Rt=u8n())=>{at=dt(u8fr([0]),Rt),nt=dt(),Rt.length!==0&&(at=dt(u8fr([1]),Rt),nt=dt())},mt=()=>{if(it++>=1e3)throw new Error("drbg: tried 1000 values");let Rt=0;const Tt=[];for(;Rt<et;){nt=dt();const At=nt.slice();Tt.push(At),Rt+=nt.length}return concatBytes(...Tt)};return(Rt,Tt)=>{st(),pt(Rt);let At;for(;!(At=Tt(mt()));)pt();return st(),At}}const validatorFns={bigint:tt=>typeof tt=="bigint",function:tt=>typeof tt=="function",boolean:tt=>typeof tt=="boolean",string:tt=>typeof tt=="string",stringOrUint8Array:tt=>typeof tt=="string"||isBytes(tt),isSafeInteger:tt=>Number.isSafeInteger(tt),array:tt=>Array.isArray(tt),field:(tt,et)=>et.Fp.isValid(tt),hash:tt=>typeof tt=="function"&&Number.isSafeInteger(tt.outputLen)};function validateObject(tt,et,rt={}){const nt=(at,it,st)=>{const dt=validatorFns[it];if(typeof dt!="function")throw new Error(`Invalid validator "${it}", expected function`);const pt=tt[at];if(!(st&&pt===void 0)&&!dt(pt,tt))throw new Error(`Invalid param ${String(at)}=${pt} (${typeof pt}), expected ${it}`)};for(const[at,it]of Object.entries(et))nt(at,it,!1);for(const[at,it]of Object.entries(rt))nt(at,it,!0);return tt}const ut=Object.freeze(Object.defineProperty({__proto__:null,abytes,bitGet,bitLen,bitMask,bitSet,bytesToHex,bytesToNumberBE,bytesToNumberLE,concatBytes,createHmacDrbg,ensureBytes,equalBytes,hexToBytes,hexToNumber,isBytes,numberToBytesBE,numberToBytesLE,numberToHexUnpadded,numberToVarBytesBE,utf8ToBytes,validateObject},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$4=BigInt(0),_1n$6=BigInt(1),_2n$4=BigInt(2),_3n$1=BigInt(3),_4n=BigInt(4),_5n$1=BigInt(5),_8n$1=BigInt(8);BigInt(9);BigInt(16);function mod(tt,et){const rt=tt%et;return rt>=_0n$4?rt:et+rt}function pow(tt,et,rt){if(rt<=_0n$4||et<_0n$4)throw new Error("Expected power/modulo > 0");if(rt===_1n$6)return _0n$4;let nt=_1n$6;for(;et>_0n$4;)et&_1n$6&&(nt=nt*tt%rt),tt=tt*tt%rt,et>>=_1n$6;return nt}function pow2(tt,et,rt){let nt=tt;for(;et-- >_0n$4;)nt*=nt,nt%=rt;return nt}function invert$1(tt,et){if(tt===_0n$4||et<=_0n$4)throw new Error(`invert: expected positive integers, got n=${tt} mod=${et}`);let rt=mod(tt,et),nt=et,at=_0n$4,it=_1n$6;for(;rt!==_0n$4;){const dt=nt/rt,pt=nt%rt,mt=at-it*dt;nt=rt,rt=pt,at=it,it=mt}if(nt!==_1n$6)throw new Error("invert: does not exist");return mod(at,et)}function tonelliShanks(tt){const et=(tt-_1n$6)/_2n$4;let rt,nt,at;for(rt=tt-_1n$6,nt=0;rt%_2n$4===_0n$4;rt/=_2n$4,nt++);for(at=_2n$4;at<tt&&pow(at,et,tt)!==tt-_1n$6;at++);if(nt===1){const st=(tt+_1n$6)/_4n;return function(pt,mt){const yt=pt.pow(mt,st);if(!pt.eql(pt.sqr(yt),mt))throw new Error("Cannot find square root");return yt}}const it=(rt+_1n$6)/_2n$4;return function(dt,pt){if(dt.pow(pt,et)===dt.neg(dt.ONE))throw new Error("Cannot find square root");let mt=nt,yt=dt.pow(dt.mul(dt.ONE,at),rt),Rt=dt.pow(pt,it),Tt=dt.pow(pt,rt);for(;!dt.eql(Tt,dt.ONE);){if(dt.eql(Tt,dt.ZERO))return dt.ZERO;let At=1;for(let Nt=dt.sqr(Tt);At<mt&&!dt.eql(Nt,dt.ONE);At++)Nt=dt.sqr(Nt);const xt=dt.pow(yt,_1n$6<<BigInt(mt-At-1));yt=dt.sqr(xt),Rt=dt.mul(Rt,xt),Tt=dt.mul(Tt,yt),mt=At}return Rt}}function FpSqrt(tt){if(tt%_4n===_3n$1){const et=(tt+_1n$6)/_4n;return function(nt,at){const it=nt.pow(at,et);if(!nt.eql(nt.sqr(it),at))throw new Error("Cannot find square root");return it}}if(tt%_8n$1===_5n$1){const et=(tt-_5n$1)/_8n$1;return function(nt,at){const it=nt.mul(at,_2n$4),st=nt.pow(it,et),dt=nt.mul(at,st),pt=nt.mul(nt.mul(dt,_2n$4),st),mt=nt.mul(dt,nt.sub(pt,nt.ONE));if(!nt.eql(nt.sqr(mt),at))throw new Error("Cannot find square root");return mt}}return tonelliShanks(tt)}const isNegativeLE=(tt,et)=>(mod(tt,et)&_1n$6)===_1n$6,FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(tt){const et={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},rt=FIELD_FIELDS.reduce((nt,at)=>(nt[at]="function",nt),et);return validateObject(tt,rt)}function FpPow(tt,et,rt){if(rt<_0n$4)throw new Error("Expected power > 0");if(rt===_0n$4)return tt.ONE;if(rt===_1n$6)return et;let nt=tt.ONE,at=et;for(;rt>_0n$4;)rt&_1n$6&&(nt=tt.mul(nt,at)),at=tt.sqr(at),rt>>=_1n$6;return nt}function FpInvertBatch(tt,et){const rt=new Array(et.length),nt=et.reduce((it,st,dt)=>tt.is0(st)?it:(rt[dt]=it,tt.mul(it,st)),tt.ONE),at=tt.inv(nt);return et.reduceRight((it,st,dt)=>tt.is0(st)?it:(rt[dt]=tt.mul(it,rt[dt]),tt.mul(it,st)),at),rt}function nLength(tt,et){const rt=et!==void 0?et:tt.toString(2).length,nt=Math.ceil(rt/8);return{nBitLength:rt,nByteLength:nt}}function Field(tt,et,rt=!1,nt={}){if(tt<=_0n$4)throw new Error(`Expected Field ORDER > 0, got ${tt}`);const{nBitLength:at,nByteLength:it}=nLength(tt,et);if(it>2048)throw new Error("Field lengths over 2048 bytes are not supported");const st=FpSqrt(tt),dt=Object.freeze({ORDER:tt,BITS:at,BYTES:it,MASK:bitMask(at),ZERO:_0n$4,ONE:_1n$6,create:pt=>mod(pt,tt),isValid:pt=>{if(typeof pt!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof pt}`);return _0n$4<=pt&&pt<tt},is0:pt=>pt===_0n$4,isOdd:pt=>(pt&_1n$6)===_1n$6,neg:pt=>mod(-pt,tt),eql:(pt,mt)=>pt===mt,sqr:pt=>mod(pt*pt,tt),add:(pt,mt)=>mod(pt+mt,tt),sub:(pt,mt)=>mod(pt-mt,tt),mul:(pt,mt)=>mod(pt*mt,tt),pow:(pt,mt)=>FpPow(dt,pt,mt),div:(pt,mt)=>mod(pt*invert$1(mt,tt),tt),sqrN:pt=>pt*pt,addN:(pt,mt)=>pt+mt,subN:(pt,mt)=>pt-mt,mulN:(pt,mt)=>pt*mt,inv:pt=>invert$1(pt,tt),sqrt:nt.sqrt||(pt=>st(dt,pt)),invertBatch:pt=>FpInvertBatch(dt,pt),cmov:(pt,mt,yt)=>yt?mt:pt,toBytes:pt=>rt?numberToBytesLE(pt,it):numberToBytesBE(pt,it),fromBytes:pt=>{if(pt.length!==it)throw new Error(`Fp.fromBytes: expected ${it}, got ${pt.length}`);return rt?bytesToNumberLE(pt):bytesToNumberBE(pt)}});return Object.freeze(dt)}function FpSqrtEven(tt,et){if(!tt.isOdd)throw new Error("Field doesn't have isOdd");const rt=tt.sqrt(et);return tt.isOdd(rt)?tt.neg(rt):rt}function getFieldBytesLength(tt){if(typeof tt!="bigint")throw new Error("field order must be bigint");const et=tt.toString(2).length;return Math.ceil(et/8)}function getMinHashLength(tt){const et=getFieldBytesLength(tt);return et+Math.ceil(et/2)}function mapHashToField(tt,et,rt=!1){const nt=tt.length,at=getFieldBytesLength(et),it=getMinHashLength(et);if(nt<16||nt<it||nt>1024)throw new Error(`expected ${it}-1024 bytes of input, got ${nt}`);const st=rt?bytesToNumberBE(tt):bytesToNumberLE(tt),dt=mod(st,et-_1n$6)+_1n$6;return rt?numberToBytesLE(dt,at):numberToBytesBE(dt,at)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$5=BigInt(1);function wNAF(tt,et){const rt=(at,it)=>{const st=it.negate();return at?st:it},nt=at=>{const it=Math.ceil(et/at)+1,st=2**(at-1);return{windows:it,windowSize:st}};return{constTimeNegate:rt,unsafeLadder(at,it){let st=tt.ZERO,dt=at;for(;it>_0n$3;)it&_1n$5&&(st=st.add(dt)),dt=dt.double(),it>>=_1n$5;return st},precomputeWindow(at,it){const{windows:st,windowSize:dt}=nt(it),pt=[];let mt=at,yt=mt;for(let Rt=0;Rt<st;Rt++){yt=mt,pt.push(yt);for(let Tt=1;Tt<dt;Tt++)yt=yt.add(mt),pt.push(yt);mt=yt.double()}return pt},wNAF(at,it,st){const{windows:dt,windowSize:pt}=nt(at);let mt=tt.ZERO,yt=tt.BASE;const Rt=BigInt(2**at-1),Tt=2**at,At=BigInt(at);for(let xt=0;xt<dt;xt++){const Nt=xt*pt;let Ct=Number(st&Rt);st>>=At,Ct>pt&&(Ct-=Tt,st+=_1n$5);const Ot=Nt,kt=Nt+Math.abs(Ct)-1,Pt=xt%2!==0,Dt=Ct<0;Ct===0?yt=yt.add(rt(Pt,it[Ot])):mt=mt.add(rt(Dt,it[kt]))}return{p:mt,f:yt}},wNAFCached(at,it,st,dt){const pt=at._WINDOW_SIZE||1;let mt=it.get(at);return mt||(mt=this.precomputeWindow(at,pt),pt!==1&&it.set(at,dt(mt))),this.wNAF(pt,mt,st)}}}function validateBasic(tt){return validateField(tt.Fp),validateObject(tt,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(tt.n,tt.nBitLength),...tt,p:tt.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0),_1n$4=BigInt(1),_2n$3=BigInt(2),_8n=BigInt(8),VERIFY_DEFAULT={zip215:!0};function validateOpts$1(tt){const et=validateBasic(tt);return validateObject(tt,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...et})}function twistedEdwards(tt){const et=validateOpts$1(tt),{Fp:rt,n:nt,prehash:at,hash:it,randomBytes:st,nByteLength:dt,h:pt}=et,mt=_2n$3<<BigInt(dt*8)-_1n$4,yt=rt.create,Rt=et.uvRatio||(($t,Et)=>{try{return{isValid:!0,value:rt.sqrt($t*rt.inv(Et))}}catch{return{isValid:!1,value:_0n$2}}}),Tt=et.adjustScalarBytes||($t=>$t),At=et.domain||(($t,Et,ct)=>{if(Et.length||ct)throw new Error("Contexts/pre-hash are not supported");return $t}),xt=$t=>typeof $t=="bigint"&&_0n$2<$t,Nt=($t,Et)=>xt($t)&&xt(Et)&&$t<Et,Ct=$t=>$t===_0n$2||Nt($t,mt);function Ot($t,Et){if(Nt($t,Et))return $t;throw new Error(`Expected valid scalar < ${Et}, got ${typeof $t} ${$t}`)}function kt($t){return $t===_0n$2?$t:Ot($t,nt)}const Pt=new Map;function Dt($t){if(!($t instanceof Gt))throw new Error("ExtendedPoint expected")}class Gt{constructor(Et,ct,St,Mt){if(this.ex=Et,this.ey=ct,this.ez=St,this.et=Mt,!Ct(Et))throw new Error("x required");if(!Ct(ct))throw new Error("y required");if(!Ct(St))throw new Error("z required");if(!Ct(Mt))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(Et){if(Et instanceof Gt)throw new Error("extended point not allowed");const{x:ct,y:St}=Et||{};if(!Ct(ct)||!Ct(St))throw new Error("invalid affine point");return new Gt(ct,St,_1n$4,yt(ct*St))}static normalizeZ(Et){const ct=rt.invertBatch(Et.map(St=>St.ez));return Et.map((St,Mt)=>St.toAffine(ct[Mt])).map(Gt.fromAffine)}_setWindowSize(Et){this._WINDOW_SIZE=Et,Pt.delete(this)}assertValidity(){const{a:Et,d:ct}=et;if(this.is0())throw new Error("bad point: ZERO");const{ex:St,ey:Mt,ez:Lt,et:Ut}=this,Kt=yt(St*St),Ht=yt(Mt*Mt),Ft=yt(Lt*Lt),zt=yt(Ft*Ft),ir=yt(Kt*Et),sr=yt(Ft*yt(ir+Ht)),ar=yt(zt+yt(ct*yt(Kt*Ht)));if(sr!==ar)throw new Error("bad point: equation left != right (1)");const Vt=yt(St*Mt),fr=yt(Lt*Ut);if(Vt!==fr)throw new Error("bad point: equation left != right (2)")}equals(Et){Dt(Et);const{ex:ct,ey:St,ez:Mt}=this,{ex:Lt,ey:Ut,ez:Kt}=Et,Ht=yt(ct*Kt),Ft=yt(Lt*Mt),zt=yt(St*Kt),ir=yt(Ut*Mt);return Ht===Ft&&zt===ir}is0(){return this.equals(Gt.ZERO)}negate(){return new Gt(yt(-this.ex),this.ey,this.ez,yt(-this.et))}double(){const{a:Et}=et,{ex:ct,ey:St,ez:Mt}=this,Lt=yt(ct*ct),Ut=yt(St*St),Kt=yt(_2n$3*yt(Mt*Mt)),Ht=yt(Et*Lt),Ft=ct+St,zt=yt(yt(Ft*Ft)-Lt-Ut),ir=Ht+Ut,sr=ir-Kt,ar=Ht-Ut,Vt=yt(zt*sr),fr=yt(ir*ar),Gr=yt(zt*ar),ur=yt(sr*ir);return new Gt(Vt,fr,ur,Gr)}add(Et){Dt(Et);const{a:ct,d:St}=et,{ex:Mt,ey:Lt,ez:Ut,et:Kt}=this,{ex:Ht,ey:Ft,ez:zt,et:ir}=Et;if(ct===BigInt(-1)){const Cr=yt((Lt-Mt)*(Ft+Ht)),an=yt((Lt+Mt)*(Ft-Ht)),Er=yt(an-Cr);if(Er===_0n$2)return this.double();const Ar=yt(Ut*_2n$3*ir),gn=yt(Kt*_2n$3*zt),Or=gn+Ar,Lr=an+Cr,wn=gn-Ar,Xt=yt(Or*Er),Bt=yt(Lr*wn),Wt=yt(Or*wn),nr=yt(Er*Lr);return new Gt(Xt,Bt,nr,Wt)}const sr=yt(Mt*Ht),ar=yt(Lt*Ft),Vt=yt(Kt*St*ir),fr=yt(Ut*zt),Gr=yt((Mt+Lt)*(Ht+Ft)-sr-ar),ur=fr-Vt,pr=fr+Vt,Fr=yt(ar-ct*sr),yr=yt(Gr*ur),hr=yt(pr*Fr),Wr=yt(Gr*Fr),$r=yt(ur*pr);return new Gt(yr,hr,$r,Wr)}subtract(Et){return this.add(Et.negate())}wNAF(Et){return tr.wNAFCached(this,Pt,Et,Gt.normalizeZ)}multiply(Et){const{p:ct,f:St}=this.wNAF(Ot(Et,nt));return Gt.normalizeZ([ct,St])[0]}multiplyUnsafe(Et){let ct=kt(Et);return ct===_0n$2?Yt:this.equals(Yt)||ct===_1n$4?this:this.equals(jt)?this.wNAF(ct).p:tr.unsafeLadder(this,ct)}isSmallOrder(){return this.multiplyUnsafe(pt).is0()}isTorsionFree(){return tr.unsafeLadder(this,nt).is0()}toAffine(Et){const{ex:ct,ey:St,ez:Mt}=this,Lt=this.is0();Et==null&&(Et=Lt?_8n:rt.inv(Mt));const Ut=yt(ct*Et),Kt=yt(St*Et),Ht=yt(Mt*Et);if(Lt)return{x:_0n$2,y:_1n$4};if(Ht!==_1n$4)throw new Error("invZ was invalid");return{x:Ut,y:Kt}}clearCofactor(){const{h:Et}=et;return Et===_1n$4?this:this.multiplyUnsafe(Et)}static fromHex(Et,ct=!1){const{d:St,a:Mt}=et,Lt=rt.BYTES;Et=ensureBytes("pointHex",Et,Lt);const Ut=Et.slice(),Kt=Et[Lt-1];Ut[Lt-1]=Kt&-129;const Ht=bytesToNumberLE(Ut);Ht===_0n$2||(ct?Ot(Ht,mt):Ot(Ht,rt.ORDER));const Ft=yt(Ht*Ht),zt=yt(Ft-_1n$4),ir=yt(St*Ft-Mt);let{isValid:sr,value:ar}=Rt(zt,ir);if(!sr)throw new Error("Point.fromHex: invalid y coordinate");const Vt=(ar&_1n$4)===_1n$4,fr=(Kt&128)!==0;if(!ct&&ar===_0n$2&&fr)throw new Error("Point.fromHex: x=0 and x_0=1");return fr!==Vt&&(ar=yt(-ar)),Gt.fromAffine({x:ar,y:Ht})}static fromPrivateKey(Et){return It(Et).point}toRawBytes(){const{x:Et,y:ct}=this.toAffine(),St=numberToBytesLE(ct,rt.BYTES);return St[St.length-1]|=Et&_1n$4?128:0,St}toHex(){return bytesToHex(this.toRawBytes())}}Gt.BASE=new Gt(et.Gx,et.Gy,_1n$4,yt(et.Gx*et.Gy)),Gt.ZERO=new Gt(_0n$2,_1n$4,_1n$4,_0n$2);const{BASE:jt,ZERO:Yt}=Gt,tr=wNAF(Gt,dt*8);function er($t){return mod($t,nt)}function lr($t){return er(bytesToNumberLE($t))}function It($t){const Et=dt;$t=ensureBytes("private key",$t,Et);const ct=ensureBytes("hashed private key",it($t),2*Et),St=Tt(ct.slice(0,Et)),Mt=ct.slice(Et,2*Et),Lt=lr(St),Ut=jt.multiply(Lt),Kt=Ut.toRawBytes();return{head:St,prefix:Mt,scalar:Lt,point:Ut,pointBytes:Kt}}function ot($t){return It($t).pointBytes}function ft($t=new Uint8Array,...Et){const ct=concatBytes(...Et);return lr(it(At(ct,ensureBytes("context",$t),!!at)))}function ht($t,Et,ct={}){$t=ensureBytes("message",$t),at&&($t=at($t));const{prefix:St,scalar:Mt,pointBytes:Lt}=It(Et),Ut=ft(ct.context,St,$t),Kt=jt.multiply(Ut).toRawBytes(),Ht=ft(ct.context,Kt,Lt,$t),Ft=er(Ut+Ht*Mt);kt(Ft);const zt=concatBytes(Kt,numberToBytesLE(Ft,rt.BYTES));return ensureBytes("result",zt,dt*2)}const vt=VERIFY_DEFAULT;function wt($t,Et,ct,St=vt){const{context:Mt,zip215:Lt}=St,Ut=rt.BYTES;$t=ensureBytes("signature",$t,2*Ut),Et=ensureBytes("message",Et),at&&(Et=at(Et));const Kt=bytesToNumberLE($t.slice(Ut,2*Ut));let Ht,Ft,zt;try{Ht=Gt.fromHex(ct,Lt),Ft=Gt.fromHex($t.slice(0,Ut),Lt),zt=jt.multiplyUnsafe(Kt)}catch{return!1}if(!Lt&&Ht.isSmallOrder())return!1;const ir=ft(Mt,Ft.toRawBytes(),Ht.toRawBytes(),Et);return Ft.add(Ht.multiplyUnsafe(ir)).subtract(zt).clearCofactor().equals(Gt.ZERO)}return jt._setWindowSize(8),{CURVE:et,getPublicKey:ot,sign:ht,verify:wt,ExtendedPoint:Gt,utils:{getExtendedPublicKey:It,randomPrivateKey:()=>st(rt.BYTES),precompute($t=8,Et=Gt.BASE){return Et._setWindowSize($t),Et.multiply(BigInt(3)),Et}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ED25519_P=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ED25519_SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _1n$3=BigInt(1),_2n$2=BigInt(2),_5n=BigInt(5),_10n=BigInt(10),_20n=BigInt(20),_40n=BigInt(40),_80n=BigInt(80);function ed25519_pow_2_252_3(tt){const et=ED25519_P,nt=tt*tt%et*tt%et,at=pow2(nt,_2n$2,et)*nt%et,it=pow2(at,_1n$3,et)*tt%et,st=pow2(it,_5n,et)*it%et,dt=pow2(st,_10n,et)*st%et,pt=pow2(dt,_20n,et)*dt%et,mt=pow2(pt,_40n,et)*pt%et,yt=pow2(mt,_80n,et)*mt%et,Rt=pow2(yt,_80n,et)*mt%et,Tt=pow2(Rt,_10n,et)*st%et;return{pow_p_5_8:pow2(Tt,_2n$2,et)*tt%et,b2:nt}}function adjustScalarBytes(tt){return tt[0]&=248,tt[31]&=127,tt[31]|=64,tt}function uvRatio(tt,et){const rt=ED25519_P,nt=mod(et*et*et,rt),at=mod(nt*nt*et,rt),it=ed25519_pow_2_252_3(tt*at).pow_p_5_8;let st=mod(tt*nt*it,rt);const dt=mod(et*st*st,rt),pt=st,mt=mod(st*ED25519_SQRT_M1,rt),yt=dt===tt,Rt=dt===mod(-tt,rt),Tt=dt===mod(-tt*ED25519_SQRT_M1,rt);return yt&&(st=pt),(Rt||Tt)&&(st=mt),isNegativeLE(st,rt)&&(st=mod(-st,rt)),{isValid:yt||Rt,value:st}}const Fp$1=Field(ED25519_P,void 0,!0),ed25519Defaults={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Fp$1,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sha512$2,randomBytes,adjustScalarBytes,uvRatio},ed25519=twistedEdwards(ed25519Defaults);function ed25519_domain(tt,et,rt){if(et.length>255)throw new Error("Context is too big");return concatBytes$1(utf8ToBytes$1("SigEd25519 no Ed25519 collisions"),new Uint8Array([rt?1:0,et.length]),et,tt)}({...ed25519Defaults});({...ed25519Defaults});const ELL2_C1=(Fp$1.ORDER+BigInt(3))/BigInt(8);Fp$1.pow(_2n$2,ELL2_C1);Fp$1.sqrt(Fp$1.neg(Fp$1.ONE));(Fp$1.ORDER-BigInt(5))/BigInt(8);BigInt(486662);FpSqrtEven(Fp$1,Fp$1.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var bn$6={exports:{}};const require$$0$2=getAugmentedNamespace(dist$3);bn$6.exports;(function(tt){(function(et,rt){function nt(ft,ht){if(!ft)throw new Error(ht||"Assertion failed")}function at(ft,ht){ft.super_=ht;var vt=function(){};vt.prototype=ht.prototype,ft.prototype=new vt,ft.prototype.constructor=ft}function it(ft,ht,vt){if(it.isBN(ft))return ft;this.negative=0,this.words=null,this.length=0,this.red=null,ft!==null&&((ht==="le"||ht==="be")&&(vt=ht,ht=10),this._init(ft||0,ht||10,vt||"be"))}typeof et=="object"?et.exports=it:rt.BN=it,it.BN=it,it.wordSize=26;var st;try{typeof window<"u"&&typeof window.Buffer<"u"?st=window.Buffer:st=require$$0$2.Buffer}catch{}it.isBN=function(ht){return ht instanceof it?!0:ht!==null&&typeof ht=="object"&&ht.constructor.wordSize===it.wordSize&&Array.isArray(ht.words)},it.max=function(ht,vt){return ht.cmp(vt)>0?ht:vt},it.min=function(ht,vt){return ht.cmp(vt)<0?ht:vt},it.prototype._init=function(ht,vt,wt){if(typeof ht=="number")return this._initNumber(ht,vt,wt);if(typeof ht=="object")return this._initArray(ht,vt,wt);vt==="hex"&&(vt=16),nt(vt===(vt|0)&&vt>=2&&vt<=36),ht=ht.toString().replace(/\s+/g,"");var bt=0;ht[0]==="-"&&(bt++,this.negative=1),bt<ht.length&&(vt===16?this._parseHex(ht,bt,wt):(this._parseBase(ht,vt,bt),wt==="le"&&this._initArray(this.toArray(),vt,wt)))},it.prototype._initNumber=function(ht,vt,wt){ht<0&&(this.negative=1,ht=-ht),ht<67108864?(this.words=[ht&67108863],this.length=1):ht<4503599627370496?(this.words=[ht&67108863,ht/67108864&67108863],this.length=2):(nt(ht<9007199254740992),this.words=[ht&67108863,ht/67108864&67108863,1],this.length=3),wt==="le"&&this._initArray(this.toArray(),vt,wt)},it.prototype._initArray=function(ht,vt,wt){if(nt(typeof ht.length=="number"),ht.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ht.length/3),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var $t,Et,ct=0;if(wt==="be")for(bt=ht.length-1,$t=0;bt>=0;bt-=3)Et=ht[bt]|ht[bt-1]<<8|ht[bt-2]<<16,this.words[$t]|=Et<<ct&67108863,this.words[$t+1]=Et>>>26-ct&67108863,ct+=24,ct>=26&&(ct-=26,$t++);else if(wt==="le")for(bt=0,$t=0;bt<ht.length;bt+=3)Et=ht[bt]|ht[bt+1]<<8|ht[bt+2]<<16,this.words[$t]|=Et<<ct&67108863,this.words[$t+1]=Et>>>26-ct&67108863,ct+=24,ct>=26&&(ct-=26,$t++);return this._strip()};function dt(ft,ht){var vt=ft.charCodeAt(ht);if(vt>=48&&vt<=57)return vt-48;if(vt>=65&&vt<=70)return vt-55;if(vt>=97&&vt<=102)return vt-87;nt(!1,"Invalid character in "+ft)}function pt(ft,ht,vt){var wt=dt(ft,vt);return vt-1>=ht&&(wt|=dt(ft,vt-1)<<4),wt}it.prototype._parseHex=function(ht,vt,wt){this.length=Math.ceil((ht.length-vt)/6),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var $t=0,Et=0,ct;if(wt==="be")for(bt=ht.length-1;bt>=vt;bt-=2)ct=pt(ht,vt,bt)<<$t,this.words[Et]|=ct&67108863,$t>=18?($t-=18,Et+=1,this.words[Et]|=ct>>>26):$t+=8;else{var St=ht.length-vt;for(bt=St%2===0?vt+1:vt;bt<ht.length;bt+=2)ct=pt(ht,vt,bt)<<$t,this.words[Et]|=ct&67108863,$t>=18?($t-=18,Et+=1,this.words[Et]|=ct>>>26):$t+=8}this._strip()};function mt(ft,ht,vt,wt){for(var bt=0,$t=0,Et=Math.min(ft.length,vt),ct=ht;ct<Et;ct++){var St=ft.charCodeAt(ct)-48;bt*=wt,St>=49?$t=St-49+10:St>=17?$t=St-17+10:$t=St,nt(St>=0&&$t<wt,"Invalid character"),bt+=$t}return bt}it.prototype._parseBase=function(ht,vt,wt){this.words=[0],this.length=1;for(var bt=0,$t=1;$t<=67108863;$t*=vt)bt++;bt--,$t=$t/vt|0;for(var Et=ht.length-wt,ct=Et%bt,St=Math.min(Et,Et-ct)+wt,Mt=0,Lt=wt;Lt<St;Lt+=bt)Mt=mt(ht,Lt,Lt+bt,vt),this.imuln($t),this.words[0]+Mt<67108864?this.words[0]+=Mt:this._iaddn(Mt);if(ct!==0){var Ut=1;for(Mt=mt(ht,Lt,ht.length,vt),Lt=0;Lt<ct;Lt++)Ut*=vt;this.imuln(Ut),this.words[0]+Mt<67108864?this.words[0]+=Mt:this._iaddn(Mt)}this._strip()},it.prototype.copy=function(ht){ht.words=new Array(this.length);for(var vt=0;vt<this.length;vt++)ht.words[vt]=this.words[vt];ht.length=this.length,ht.negative=this.negative,ht.red=this.red};function yt(ft,ht){ft.words=ht.words,ft.length=ht.length,ft.negative=ht.negative,ft.red=ht.red}if(it.prototype._move=function(ht){yt(ht,this)},it.prototype.clone=function(){var ht=new it(null);return this.copy(ht),ht},it.prototype._expand=function(ht){for(;this.length<ht;)this.words[this.length++]=0;return this},it.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},it.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{it.prototype[Symbol.for("nodejs.util.inspect.custom")]=Rt}catch{it.prototype.inspect=Rt}else it.prototype.inspect=Rt;function Rt(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var Tt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],At=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],xt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];it.prototype.toString=function(ht,vt){ht=ht||10,vt=vt|0||1;var wt;if(ht===16||ht==="hex"){wt="";for(var bt=0,$t=0,Et=0;Et<this.length;Et++){var ct=this.words[Et],St=((ct<<bt|$t)&16777215).toString(16);$t=ct>>>24-bt&16777215,bt+=2,bt>=26&&(bt-=26,Et--),$t!==0||Et!==this.length-1?wt=Tt[6-St.length]+St+wt:wt=St+wt}for($t!==0&&(wt=$t.toString(16)+wt);wt.length%vt!==0;)wt="0"+wt;return this.negative!==0&&(wt="-"+wt),wt}if(ht===(ht|0)&&ht>=2&&ht<=36){var Mt=At[ht],Lt=xt[ht];wt="";var Ut=this.clone();for(Ut.negative=0;!Ut.isZero();){var Kt=Ut.modrn(Lt).toString(ht);Ut=Ut.idivn(Lt),Ut.isZero()?wt=Kt+wt:wt=Tt[Mt-Kt.length]+Kt+wt}for(this.isZero()&&(wt="0"+wt);wt.length%vt!==0;)wt="0"+wt;return this.negative!==0&&(wt="-"+wt),wt}nt(!1,"Base should be between 2 and 36")},it.prototype.toNumber=function(){var ht=this.words[0];return this.length===2?ht+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ht+=4503599627370496+this.words[1]*67108864:this.length>2&&nt(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ht:ht},it.prototype.toJSON=function(){return this.toString(16,2)},st&&(it.prototype.toBuffer=function(ht,vt){return this.toArrayLike(st,ht,vt)}),it.prototype.toArray=function(ht,vt){return this.toArrayLike(Array,ht,vt)};var Nt=function(ht,vt){return ht.allocUnsafe?ht.allocUnsafe(vt):new ht(vt)};it.prototype.toArrayLike=function(ht,vt,wt){this._strip();var bt=this.byteLength(),$t=wt||Math.max(1,bt);nt(bt<=$t,"byte array longer than desired length"),nt($t>0,"Requested array length <= 0");var Et=Nt(ht,$t),ct=vt==="le"?"LE":"BE";return this["_toArrayLike"+ct](Et,bt),Et},it.prototype._toArrayLikeLE=function(ht,vt){for(var wt=0,bt=0,$t=0,Et=0;$t<this.length;$t++){var ct=this.words[$t]<<Et|bt;ht[wt++]=ct&255,wt<ht.length&&(ht[wt++]=ct>>8&255),wt<ht.length&&(ht[wt++]=ct>>16&255),Et===6?(wt<ht.length&&(ht[wt++]=ct>>24&255),bt=0,Et=0):(bt=ct>>>24,Et+=2)}if(wt<ht.length)for(ht[wt++]=bt;wt<ht.length;)ht[wt++]=0},it.prototype._toArrayLikeBE=function(ht,vt){for(var wt=ht.length-1,bt=0,$t=0,Et=0;$t<this.length;$t++){var ct=this.words[$t]<<Et|bt;ht[wt--]=ct&255,wt>=0&&(ht[wt--]=ct>>8&255),wt>=0&&(ht[wt--]=ct>>16&255),Et===6?(wt>=0&&(ht[wt--]=ct>>24&255),bt=0,Et=0):(bt=ct>>>24,Et+=2)}if(wt>=0)for(ht[wt--]=bt;wt>=0;)ht[wt--]=0},Math.clz32?it.prototype._countBits=function(ht){return 32-Math.clz32(ht)}:it.prototype._countBits=function(ht){var vt=ht,wt=0;return vt>=4096&&(wt+=13,vt>>>=13),vt>=64&&(wt+=7,vt>>>=7),vt>=8&&(wt+=4,vt>>>=4),vt>=2&&(wt+=2,vt>>>=2),wt+vt},it.prototype._zeroBits=function(ht){if(ht===0)return 26;var vt=ht,wt=0;return vt&8191||(wt+=13,vt>>>=13),vt&127||(wt+=7,vt>>>=7),vt&15||(wt+=4,vt>>>=4),vt&3||(wt+=2,vt>>>=2),vt&1||wt++,wt},it.prototype.bitLength=function(){var ht=this.words[this.length-1],vt=this._countBits(ht);return(this.length-1)*26+vt};function Ct(ft){for(var ht=new Array(ft.bitLength()),vt=0;vt<ht.length;vt++){var wt=vt/26|0,bt=vt%26;ht[vt]=ft.words[wt]>>>bt&1}return ht}it.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ht=0,vt=0;vt<this.length;vt++){var wt=this._zeroBits(this.words[vt]);if(ht+=wt,wt!==26)break}return ht},it.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},it.prototype.toTwos=function(ht){return this.negative!==0?this.abs().inotn(ht).iaddn(1):this.clone()},it.prototype.fromTwos=function(ht){return this.testn(ht-1)?this.notn(ht).iaddn(1).ineg():this.clone()},it.prototype.isNeg=function(){return this.negative!==0},it.prototype.neg=function(){return this.clone().ineg()},it.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},it.prototype.iuor=function(ht){for(;this.length<ht.length;)this.words[this.length++]=0;for(var vt=0;vt<ht.length;vt++)this.words[vt]=this.words[vt]|ht.words[vt];return this._strip()},it.prototype.ior=function(ht){return nt((this.negative|ht.negative)===0),this.iuor(ht)},it.prototype.or=function(ht){return this.length>ht.length?this.clone().ior(ht):ht.clone().ior(this)},it.prototype.uor=function(ht){return this.length>ht.length?this.clone().iuor(ht):ht.clone().iuor(this)},it.prototype.iuand=function(ht){var vt;this.length>ht.length?vt=ht:vt=this;for(var wt=0;wt<vt.length;wt++)this.words[wt]=this.words[wt]&ht.words[wt];return this.length=vt.length,this._strip()},it.prototype.iand=function(ht){return nt((this.negative|ht.negative)===0),this.iuand(ht)},it.prototype.and=function(ht){return this.length>ht.length?this.clone().iand(ht):ht.clone().iand(this)},it.prototype.uand=function(ht){return this.length>ht.length?this.clone().iuand(ht):ht.clone().iuand(this)},it.prototype.iuxor=function(ht){var vt,wt;this.length>ht.length?(vt=this,wt=ht):(vt=ht,wt=this);for(var bt=0;bt<wt.length;bt++)this.words[bt]=vt.words[bt]^wt.words[bt];if(this!==vt)for(;bt<vt.length;bt++)this.words[bt]=vt.words[bt];return this.length=vt.length,this._strip()},it.prototype.ixor=function(ht){return nt((this.negative|ht.negative)===0),this.iuxor(ht)},it.prototype.xor=function(ht){return this.length>ht.length?this.clone().ixor(ht):ht.clone().ixor(this)},it.prototype.uxor=function(ht){return this.length>ht.length?this.clone().iuxor(ht):ht.clone().iuxor(this)},it.prototype.inotn=function(ht){nt(typeof ht=="number"&&ht>=0);var vt=Math.ceil(ht/26)|0,wt=ht%26;this._expand(vt),wt>0&&vt--;for(var bt=0;bt<vt;bt++)this.words[bt]=~this.words[bt]&67108863;return wt>0&&(this.words[bt]=~this.words[bt]&67108863>>26-wt),this._strip()},it.prototype.notn=function(ht){return this.clone().inotn(ht)},it.prototype.setn=function(ht,vt){nt(typeof ht=="number"&&ht>=0);var wt=ht/26|0,bt=ht%26;return this._expand(wt+1),vt?this.words[wt]=this.words[wt]|1<<bt:this.words[wt]=this.words[wt]&~(1<<bt),this._strip()},it.prototype.iadd=function(ht){var vt;if(this.negative!==0&&ht.negative===0)return this.negative=0,vt=this.isub(ht),this.negative^=1,this._normSign();if(this.negative===0&&ht.negative!==0)return ht.negative=0,vt=this.isub(ht),ht.negative=1,vt._normSign();var wt,bt;this.length>ht.length?(wt=this,bt=ht):(wt=ht,bt=this);for(var $t=0,Et=0;Et<bt.length;Et++)vt=(wt.words[Et]|0)+(bt.words[Et]|0)+$t,this.words[Et]=vt&67108863,$t=vt>>>26;for(;$t!==0&&Et<wt.length;Et++)vt=(wt.words[Et]|0)+$t,this.words[Et]=vt&67108863,$t=vt>>>26;if(this.length=wt.length,$t!==0)this.words[this.length]=$t,this.length++;else if(wt!==this)for(;Et<wt.length;Et++)this.words[Et]=wt.words[Et];return this},it.prototype.add=function(ht){var vt;return ht.negative!==0&&this.negative===0?(ht.negative=0,vt=this.sub(ht),ht.negative^=1,vt):ht.negative===0&&this.negative!==0?(this.negative=0,vt=ht.sub(this),this.negative=1,vt):this.length>ht.length?this.clone().iadd(ht):ht.clone().iadd(this)},it.prototype.isub=function(ht){if(ht.negative!==0){ht.negative=0;var vt=this.iadd(ht);return ht.negative=1,vt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ht),this.negative=1,this._normSign();var wt=this.cmp(ht);if(wt===0)return this.negative=0,this.length=1,this.words[0]=0,this;var bt,$t;wt>0?(bt=this,$t=ht):(bt=ht,$t=this);for(var Et=0,ct=0;ct<$t.length;ct++)vt=(bt.words[ct]|0)-($t.words[ct]|0)+Et,Et=vt>>26,this.words[ct]=vt&67108863;for(;Et!==0&&ct<bt.length;ct++)vt=(bt.words[ct]|0)+Et,Et=vt>>26,this.words[ct]=vt&67108863;if(Et===0&&ct<bt.length&&bt!==this)for(;ct<bt.length;ct++)this.words[ct]=bt.words[ct];return this.length=Math.max(this.length,ct),bt!==this&&(this.negative=1),this._strip()},it.prototype.sub=function(ht){return this.clone().isub(ht)};function Ot(ft,ht,vt){vt.negative=ht.negative^ft.negative;var wt=ft.length+ht.length|0;vt.length=wt,wt=wt-1|0;var bt=ft.words[0]|0,$t=ht.words[0]|0,Et=bt*$t,ct=Et&67108863,St=Et/67108864|0;vt.words[0]=ct;for(var Mt=1;Mt<wt;Mt++){for(var Lt=St>>>26,Ut=St&67108863,Kt=Math.min(Mt,ht.length-1),Ht=Math.max(0,Mt-ft.length+1);Ht<=Kt;Ht++){var Ft=Mt-Ht|0;bt=ft.words[Ft]|0,$t=ht.words[Ht]|0,Et=bt*$t+Ut,Lt+=Et/67108864|0,Ut=Et&67108863}vt.words[Mt]=Ut|0,St=Lt|0}return St!==0?vt.words[Mt]=St|0:vt.length--,vt._strip()}var kt=function(ht,vt,wt){var bt=ht.words,$t=vt.words,Et=wt.words,ct=0,St,Mt,Lt,Ut=bt[0]|0,Kt=Ut&8191,Ht=Ut>>>13,Ft=bt[1]|0,zt=Ft&8191,ir=Ft>>>13,sr=bt[2]|0,ar=sr&8191,Vt=sr>>>13,fr=bt[3]|0,Gr=fr&8191,ur=fr>>>13,pr=bt[4]|0,Fr=pr&8191,yr=pr>>>13,hr=bt[5]|0,Wr=hr&8191,$r=hr>>>13,Cr=bt[6]|0,an=Cr&8191,Er=Cr>>>13,Ar=bt[7]|0,gn=Ar&8191,Or=Ar>>>13,Lr=bt[8]|0,wn=Lr&8191,Xt=Lr>>>13,Bt=bt[9]|0,Wt=Bt&8191,nr=Bt>>>13,cr=$t[0]|0,Sr=cr&8191,_r=cr>>>13,xr=$t[1]|0,pn=xr&8191,Tr=xr>>>13,Ur=$t[2]|0,un=Ur&8191,Ir=Ur>>>13,Nr=$t[3]|0,zr=Nr&8191,br=Nr>>>13,Dr=$t[4]|0,yn=Dr&8191,Mr=Dr>>>13,qr=$t[5]|0,Sn=qr&8191,Br=qr>>>13,Hr=$t[6]|0,Zt=Hr&8191,Qt=Hr>>>13,Jt=$t[7]|0,qt=Jt&8191,rr=Jt>>>13,dr=$t[8]|0,Rr=dr&8191,vr=dr>>>13,wr=$t[9]|0,Yr=wr&8191,jr=wr>>>13;wt.negative=ht.negative^vt.negative,wt.length=19,St=Math.imul(Kt,Sr),Mt=Math.imul(Kt,_r),Mt=Mt+Math.imul(Ht,Sr)|0,Lt=Math.imul(Ht,_r);var mn=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(mn>>>26)|0,mn&=67108863,St=Math.imul(zt,Sr),Mt=Math.imul(zt,_r),Mt=Mt+Math.imul(ir,Sr)|0,Lt=Math.imul(ir,_r),St=St+Math.imul(Kt,pn)|0,Mt=Mt+Math.imul(Kt,Tr)|0,Mt=Mt+Math.imul(Ht,pn)|0,Lt=Lt+Math.imul(Ht,Tr)|0;var Jr=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,St=Math.imul(ar,Sr),Mt=Math.imul(ar,_r),Mt=Mt+Math.imul(Vt,Sr)|0,Lt=Math.imul(Vt,_r),St=St+Math.imul(zt,pn)|0,Mt=Mt+Math.imul(zt,Tr)|0,Mt=Mt+Math.imul(ir,pn)|0,Lt=Lt+Math.imul(ir,Tr)|0,St=St+Math.imul(Kt,un)|0,Mt=Mt+Math.imul(Kt,Ir)|0,Mt=Mt+Math.imul(Ht,un)|0,Lt=Lt+Math.imul(Ht,Ir)|0;var cn=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(cn>>>26)|0,cn&=67108863,St=Math.imul(Gr,Sr),Mt=Math.imul(Gr,_r),Mt=Mt+Math.imul(ur,Sr)|0,Lt=Math.imul(ur,_r),St=St+Math.imul(ar,pn)|0,Mt=Mt+Math.imul(ar,Tr)|0,Mt=Mt+Math.imul(Vt,pn)|0,Lt=Lt+Math.imul(Vt,Tr)|0,St=St+Math.imul(zt,un)|0,Mt=Mt+Math.imul(zt,Ir)|0,Mt=Mt+Math.imul(ir,un)|0,Lt=Lt+Math.imul(ir,Ir)|0,St=St+Math.imul(Kt,zr)|0,Mt=Mt+Math.imul(Kt,br)|0,Mt=Mt+Math.imul(Ht,zr)|0,Lt=Lt+Math.imul(Ht,br)|0;var ln=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(ln>>>26)|0,ln&=67108863,St=Math.imul(Fr,Sr),Mt=Math.imul(Fr,_r),Mt=Mt+Math.imul(yr,Sr)|0,Lt=Math.imul(yr,_r),St=St+Math.imul(Gr,pn)|0,Mt=Mt+Math.imul(Gr,Tr)|0,Mt=Mt+Math.imul(ur,pn)|0,Lt=Lt+Math.imul(ur,Tr)|0,St=St+Math.imul(ar,un)|0,Mt=Mt+Math.imul(ar,Ir)|0,Mt=Mt+Math.imul(Vt,un)|0,Lt=Lt+Math.imul(Vt,Ir)|0,St=St+Math.imul(zt,zr)|0,Mt=Mt+Math.imul(zt,br)|0,Mt=Mt+Math.imul(ir,zr)|0,Lt=Lt+Math.imul(ir,br)|0,St=St+Math.imul(Kt,yn)|0,Mt=Mt+Math.imul(Kt,Mr)|0,Mt=Mt+Math.imul(Ht,yn)|0,Lt=Lt+Math.imul(Ht,Mr)|0;var vn=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(vn>>>26)|0,vn&=67108863,St=Math.imul(Wr,Sr),Mt=Math.imul(Wr,_r),Mt=Mt+Math.imul($r,Sr)|0,Lt=Math.imul($r,_r),St=St+Math.imul(Fr,pn)|0,Mt=Mt+Math.imul(Fr,Tr)|0,Mt=Mt+Math.imul(yr,pn)|0,Lt=Lt+Math.imul(yr,Tr)|0,St=St+Math.imul(Gr,un)|0,Mt=Mt+Math.imul(Gr,Ir)|0,Mt=Mt+Math.imul(ur,un)|0,Lt=Lt+Math.imul(ur,Ir)|0,St=St+Math.imul(ar,zr)|0,Mt=Mt+Math.imul(ar,br)|0,Mt=Mt+Math.imul(Vt,zr)|0,Lt=Lt+Math.imul(Vt,br)|0,St=St+Math.imul(zt,yn)|0,Mt=Mt+Math.imul(zt,Mr)|0,Mt=Mt+Math.imul(ir,yn)|0,Lt=Lt+Math.imul(ir,Mr)|0,St=St+Math.imul(Kt,Sn)|0,Mt=Mt+Math.imul(Kt,Br)|0,Mt=Mt+Math.imul(Ht,Sn)|0,Lt=Lt+Math.imul(Ht,Br)|0;var _n=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(_n>>>26)|0,_n&=67108863,St=Math.imul(an,Sr),Mt=Math.imul(an,_r),Mt=Mt+Math.imul(Er,Sr)|0,Lt=Math.imul(Er,_r),St=St+Math.imul(Wr,pn)|0,Mt=Mt+Math.imul(Wr,Tr)|0,Mt=Mt+Math.imul($r,pn)|0,Lt=Lt+Math.imul($r,Tr)|0,St=St+Math.imul(Fr,un)|0,Mt=Mt+Math.imul(Fr,Ir)|0,Mt=Mt+Math.imul(yr,un)|0,Lt=Lt+Math.imul(yr,Ir)|0,St=St+Math.imul(Gr,zr)|0,Mt=Mt+Math.imul(Gr,br)|0,Mt=Mt+Math.imul(ur,zr)|0,Lt=Lt+Math.imul(ur,br)|0,St=St+Math.imul(ar,yn)|0,Mt=Mt+Math.imul(ar,Mr)|0,Mt=Mt+Math.imul(Vt,yn)|0,Lt=Lt+Math.imul(Vt,Mr)|0,St=St+Math.imul(zt,Sn)|0,Mt=Mt+Math.imul(zt,Br)|0,Mt=Mt+Math.imul(ir,Sn)|0,Lt=Lt+Math.imul(ir,Br)|0,St=St+Math.imul(Kt,Zt)|0,Mt=Mt+Math.imul(Kt,Qt)|0,Mt=Mt+Math.imul(Ht,Zt)|0,Lt=Lt+Math.imul(Ht,Qt)|0;var fn=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(fn>>>26)|0,fn&=67108863,St=Math.imul(gn,Sr),Mt=Math.imul(gn,_r),Mt=Mt+Math.imul(Or,Sr)|0,Lt=Math.imul(Or,_r),St=St+Math.imul(an,pn)|0,Mt=Mt+Math.imul(an,Tr)|0,Mt=Mt+Math.imul(Er,pn)|0,Lt=Lt+Math.imul(Er,Tr)|0,St=St+Math.imul(Wr,un)|0,Mt=Mt+Math.imul(Wr,Ir)|0,Mt=Mt+Math.imul($r,un)|0,Lt=Lt+Math.imul($r,Ir)|0,St=St+Math.imul(Fr,zr)|0,Mt=Mt+Math.imul(Fr,br)|0,Mt=Mt+Math.imul(yr,zr)|0,Lt=Lt+Math.imul(yr,br)|0,St=St+Math.imul(Gr,yn)|0,Mt=Mt+Math.imul(Gr,Mr)|0,Mt=Mt+Math.imul(ur,yn)|0,Lt=Lt+Math.imul(ur,Mr)|0,St=St+Math.imul(ar,Sn)|0,Mt=Mt+Math.imul(ar,Br)|0,Mt=Mt+Math.imul(Vt,Sn)|0,Lt=Lt+Math.imul(Vt,Br)|0,St=St+Math.imul(zt,Zt)|0,Mt=Mt+Math.imul(zt,Qt)|0,Mt=Mt+Math.imul(ir,Zt)|0,Lt=Lt+Math.imul(ir,Qt)|0,St=St+Math.imul(Kt,qt)|0,Mt=Mt+Math.imul(Kt,rr)|0,Mt=Mt+Math.imul(Ht,qt)|0,Lt=Lt+Math.imul(Ht,rr)|0;var hn=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(hn>>>26)|0,hn&=67108863,St=Math.imul(wn,Sr),Mt=Math.imul(wn,_r),Mt=Mt+Math.imul(Xt,Sr)|0,Lt=Math.imul(Xt,_r),St=St+Math.imul(gn,pn)|0,Mt=Mt+Math.imul(gn,Tr)|0,Mt=Mt+Math.imul(Or,pn)|0,Lt=Lt+Math.imul(Or,Tr)|0,St=St+Math.imul(an,un)|0,Mt=Mt+Math.imul(an,Ir)|0,Mt=Mt+Math.imul(Er,un)|0,Lt=Lt+Math.imul(Er,Ir)|0,St=St+Math.imul(Wr,zr)|0,Mt=Mt+Math.imul(Wr,br)|0,Mt=Mt+Math.imul($r,zr)|0,Lt=Lt+Math.imul($r,br)|0,St=St+Math.imul(Fr,yn)|0,Mt=Mt+Math.imul(Fr,Mr)|0,Mt=Mt+Math.imul(yr,yn)|0,Lt=Lt+Math.imul(yr,Mr)|0,St=St+Math.imul(Gr,Sn)|0,Mt=Mt+Math.imul(Gr,Br)|0,Mt=Mt+Math.imul(ur,Sn)|0,Lt=Lt+Math.imul(ur,Br)|0,St=St+Math.imul(ar,Zt)|0,Mt=Mt+Math.imul(ar,Qt)|0,Mt=Mt+Math.imul(Vt,Zt)|0,Lt=Lt+Math.imul(Vt,Qt)|0,St=St+Math.imul(zt,qt)|0,Mt=Mt+Math.imul(zt,rr)|0,Mt=Mt+Math.imul(ir,qt)|0,Lt=Lt+Math.imul(ir,rr)|0,St=St+Math.imul(Kt,Rr)|0,Mt=Mt+Math.imul(Kt,vr)|0,Mt=Mt+Math.imul(Ht,Rr)|0,Lt=Lt+Math.imul(Ht,vr)|0;var dn=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(dn>>>26)|0,dn&=67108863,St=Math.imul(Wt,Sr),Mt=Math.imul(Wt,_r),Mt=Mt+Math.imul(nr,Sr)|0,Lt=Math.imul(nr,_r),St=St+Math.imul(wn,pn)|0,Mt=Mt+Math.imul(wn,Tr)|0,Mt=Mt+Math.imul(Xt,pn)|0,Lt=Lt+Math.imul(Xt,Tr)|0,St=St+Math.imul(gn,un)|0,Mt=Mt+Math.imul(gn,Ir)|0,Mt=Mt+Math.imul(Or,un)|0,Lt=Lt+Math.imul(Or,Ir)|0,St=St+Math.imul(an,zr)|0,Mt=Mt+Math.imul(an,br)|0,Mt=Mt+Math.imul(Er,zr)|0,Lt=Lt+Math.imul(Er,br)|0,St=St+Math.imul(Wr,yn)|0,Mt=Mt+Math.imul(Wr,Mr)|0,Mt=Mt+Math.imul($r,yn)|0,Lt=Lt+Math.imul($r,Mr)|0,St=St+Math.imul(Fr,Sn)|0,Mt=Mt+Math.imul(Fr,Br)|0,Mt=Mt+Math.imul(yr,Sn)|0,Lt=Lt+Math.imul(yr,Br)|0,St=St+Math.imul(Gr,Zt)|0,Mt=Mt+Math.imul(Gr,Qt)|0,Mt=Mt+Math.imul(ur,Zt)|0,Lt=Lt+Math.imul(ur,Qt)|0,St=St+Math.imul(ar,qt)|0,Mt=Mt+Math.imul(ar,rr)|0,Mt=Mt+Math.imul(Vt,qt)|0,Lt=Lt+Math.imul(Vt,rr)|0,St=St+Math.imul(zt,Rr)|0,Mt=Mt+Math.imul(zt,vr)|0,Mt=Mt+Math.imul(ir,Rr)|0,Lt=Lt+Math.imul(ir,vr)|0,St=St+Math.imul(Kt,Yr)|0,Mt=Mt+Math.imul(Kt,jr)|0,Mt=Mt+Math.imul(Ht,Yr)|0,Lt=Lt+Math.imul(Ht,jr)|0;var tn=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(tn>>>26)|0,tn&=67108863,St=Math.imul(Wt,pn),Mt=Math.imul(Wt,Tr),Mt=Mt+Math.imul(nr,pn)|0,Lt=Math.imul(nr,Tr),St=St+Math.imul(wn,un)|0,Mt=Mt+Math.imul(wn,Ir)|0,Mt=Mt+Math.imul(Xt,un)|0,Lt=Lt+Math.imul(Xt,Ir)|0,St=St+Math.imul(gn,zr)|0,Mt=Mt+Math.imul(gn,br)|0,Mt=Mt+Math.imul(Or,zr)|0,Lt=Lt+Math.imul(Or,br)|0,St=St+Math.imul(an,yn)|0,Mt=Mt+Math.imul(an,Mr)|0,Mt=Mt+Math.imul(Er,yn)|0,Lt=Lt+Math.imul(Er,Mr)|0,St=St+Math.imul(Wr,Sn)|0,Mt=Mt+Math.imul(Wr,Br)|0,Mt=Mt+Math.imul($r,Sn)|0,Lt=Lt+Math.imul($r,Br)|0,St=St+Math.imul(Fr,Zt)|0,Mt=Mt+Math.imul(Fr,Qt)|0,Mt=Mt+Math.imul(yr,Zt)|0,Lt=Lt+Math.imul(yr,Qt)|0,St=St+Math.imul(Gr,qt)|0,Mt=Mt+Math.imul(Gr,rr)|0,Mt=Mt+Math.imul(ur,qt)|0,Lt=Lt+Math.imul(ur,rr)|0,St=St+Math.imul(ar,Rr)|0,Mt=Mt+Math.imul(ar,vr)|0,Mt=Mt+Math.imul(Vt,Rr)|0,Lt=Lt+Math.imul(Vt,vr)|0,St=St+Math.imul(zt,Yr)|0,Mt=Mt+Math.imul(zt,jr)|0,Mt=Mt+Math.imul(ir,Yr)|0,Lt=Lt+Math.imul(ir,jr)|0;var sn=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(sn>>>26)|0,sn&=67108863,St=Math.imul(Wt,un),Mt=Math.imul(Wt,Ir),Mt=Mt+Math.imul(nr,un)|0,Lt=Math.imul(nr,Ir),St=St+Math.imul(wn,zr)|0,Mt=Mt+Math.imul(wn,br)|0,Mt=Mt+Math.imul(Xt,zr)|0,Lt=Lt+Math.imul(Xt,br)|0,St=St+Math.imul(gn,yn)|0,Mt=Mt+Math.imul(gn,Mr)|0,Mt=Mt+Math.imul(Or,yn)|0,Lt=Lt+Math.imul(Or,Mr)|0,St=St+Math.imul(an,Sn)|0,Mt=Mt+Math.imul(an,Br)|0,Mt=Mt+Math.imul(Er,Sn)|0,Lt=Lt+Math.imul(Er,Br)|0,St=St+Math.imul(Wr,Zt)|0,Mt=Mt+Math.imul(Wr,Qt)|0,Mt=Mt+Math.imul($r,Zt)|0,Lt=Lt+Math.imul($r,Qt)|0,St=St+Math.imul(Fr,qt)|0,Mt=Mt+Math.imul(Fr,rr)|0,Mt=Mt+Math.imul(yr,qt)|0,Lt=Lt+Math.imul(yr,rr)|0,St=St+Math.imul(Gr,Rr)|0,Mt=Mt+Math.imul(Gr,vr)|0,Mt=Mt+Math.imul(ur,Rr)|0,Lt=Lt+Math.imul(ur,vr)|0,St=St+Math.imul(ar,Yr)|0,Mt=Mt+Math.imul(ar,jr)|0,Mt=Mt+Math.imul(Vt,Yr)|0,Lt=Lt+Math.imul(Vt,jr)|0;var Qr=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,St=Math.imul(Wt,zr),Mt=Math.imul(Wt,br),Mt=Mt+Math.imul(nr,zr)|0,Lt=Math.imul(nr,br),St=St+Math.imul(wn,yn)|0,Mt=Mt+Math.imul(wn,Mr)|0,Mt=Mt+Math.imul(Xt,yn)|0,Lt=Lt+Math.imul(Xt,Mr)|0,St=St+Math.imul(gn,Sn)|0,Mt=Mt+Math.imul(gn,Br)|0,Mt=Mt+Math.imul(Or,Sn)|0,Lt=Lt+Math.imul(Or,Br)|0,St=St+Math.imul(an,Zt)|0,Mt=Mt+Math.imul(an,Qt)|0,Mt=Mt+Math.imul(Er,Zt)|0,Lt=Lt+Math.imul(Er,Qt)|0,St=St+Math.imul(Wr,qt)|0,Mt=Mt+Math.imul(Wr,rr)|0,Mt=Mt+Math.imul($r,qt)|0,Lt=Lt+Math.imul($r,rr)|0,St=St+Math.imul(Fr,Rr)|0,Mt=Mt+Math.imul(Fr,vr)|0,Mt=Mt+Math.imul(yr,Rr)|0,Lt=Lt+Math.imul(yr,vr)|0,St=St+Math.imul(Gr,Yr)|0,Mt=Mt+Math.imul(Gr,jr)|0,Mt=Mt+Math.imul(ur,Yr)|0,Lt=Lt+Math.imul(ur,jr)|0;var rn=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(rn>>>26)|0,rn&=67108863,St=Math.imul(Wt,yn),Mt=Math.imul(Wt,Mr),Mt=Mt+Math.imul(nr,yn)|0,Lt=Math.imul(nr,Mr),St=St+Math.imul(wn,Sn)|0,Mt=Mt+Math.imul(wn,Br)|0,Mt=Mt+Math.imul(Xt,Sn)|0,Lt=Lt+Math.imul(Xt,Br)|0,St=St+Math.imul(gn,Zt)|0,Mt=Mt+Math.imul(gn,Qt)|0,Mt=Mt+Math.imul(Or,Zt)|0,Lt=Lt+Math.imul(Or,Qt)|0,St=St+Math.imul(an,qt)|0,Mt=Mt+Math.imul(an,rr)|0,Mt=Mt+Math.imul(Er,qt)|0,Lt=Lt+Math.imul(Er,rr)|0,St=St+Math.imul(Wr,Rr)|0,Mt=Mt+Math.imul(Wr,vr)|0,Mt=Mt+Math.imul($r,Rr)|0,Lt=Lt+Math.imul($r,vr)|0,St=St+Math.imul(Fr,Yr)|0,Mt=Mt+Math.imul(Fr,jr)|0,Mt=Mt+Math.imul(yr,Yr)|0,Lt=Lt+Math.imul(yr,jr)|0;var nn=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(nn>>>26)|0,nn&=67108863,St=Math.imul(Wt,Sn),Mt=Math.imul(Wt,Br),Mt=Mt+Math.imul(nr,Sn)|0,Lt=Math.imul(nr,Br),St=St+Math.imul(wn,Zt)|0,Mt=Mt+Math.imul(wn,Qt)|0,Mt=Mt+Math.imul(Xt,Zt)|0,Lt=Lt+Math.imul(Xt,Qt)|0,St=St+Math.imul(gn,qt)|0,Mt=Mt+Math.imul(gn,rr)|0,Mt=Mt+Math.imul(Or,qt)|0,Lt=Lt+Math.imul(Or,rr)|0,St=St+Math.imul(an,Rr)|0,Mt=Mt+Math.imul(an,vr)|0,Mt=Mt+Math.imul(Er,Rr)|0,Lt=Lt+Math.imul(Er,vr)|0,St=St+Math.imul(Wr,Yr)|0,Mt=Mt+Math.imul(Wr,jr)|0,Mt=Mt+Math.imul($r,Yr)|0,Lt=Lt+Math.imul($r,jr)|0;var Xr=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,St=Math.imul(Wt,Zt),Mt=Math.imul(Wt,Qt),Mt=Mt+Math.imul(nr,Zt)|0,Lt=Math.imul(nr,Qt),St=St+Math.imul(wn,qt)|0,Mt=Mt+Math.imul(wn,rr)|0,Mt=Mt+Math.imul(Xt,qt)|0,Lt=Lt+Math.imul(Xt,rr)|0,St=St+Math.imul(gn,Rr)|0,Mt=Mt+Math.imul(gn,vr)|0,Mt=Mt+Math.imul(Or,Rr)|0,Lt=Lt+Math.imul(Or,vr)|0,St=St+Math.imul(an,Yr)|0,Mt=Mt+Math.imul(an,jr)|0,Mt=Mt+Math.imul(Er,Yr)|0,Lt=Lt+Math.imul(Er,jr)|0;var kr=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(kr>>>26)|0,kr&=67108863,St=Math.imul(Wt,qt),Mt=Math.imul(Wt,rr),Mt=Mt+Math.imul(nr,qt)|0,Lt=Math.imul(nr,rr),St=St+Math.imul(wn,Rr)|0,Mt=Mt+Math.imul(wn,vr)|0,Mt=Mt+Math.imul(Xt,Rr)|0,Lt=Lt+Math.imul(Xt,vr)|0,St=St+Math.imul(gn,Yr)|0,Mt=Mt+Math.imul(gn,jr)|0,Mt=Mt+Math.imul(Or,Yr)|0,Lt=Lt+Math.imul(Or,jr)|0;var Pr=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,St=Math.imul(Wt,Rr),Mt=Math.imul(Wt,vr),Mt=Mt+Math.imul(nr,Rr)|0,Lt=Math.imul(nr,vr),St=St+Math.imul(wn,Yr)|0,Mt=Mt+Math.imul(wn,jr)|0,Mt=Mt+Math.imul(Xt,Yr)|0,Lt=Lt+Math.imul(Xt,jr)|0;var Zr=(ct+St|0)+((Mt&8191)<<13)|0;ct=(Lt+(Mt>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,St=Math.imul(Wt,Yr),Mt=Math.imul(Wt,jr),Mt=Mt+Math.imul(nr,Yr)|0,Lt=Math.imul(nr,jr);var Kr=(ct+St|0)+((Mt&8191)<<13)|0;return ct=(Lt+(Mt>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,Et[0]=mn,Et[1]=Jr,Et[2]=cn,Et[3]=ln,Et[4]=vn,Et[5]=_n,Et[6]=fn,Et[7]=hn,Et[8]=dn,Et[9]=tn,Et[10]=sn,Et[11]=Qr,Et[12]=rn,Et[13]=nn,Et[14]=Xr,Et[15]=kr,Et[16]=Pr,Et[17]=Zr,Et[18]=Kr,ct!==0&&(Et[19]=ct,wt.length++),wt};Math.imul||(kt=Ot);function Pt(ft,ht,vt){vt.negative=ht.negative^ft.negative,vt.length=ft.length+ht.length;for(var wt=0,bt=0,$t=0;$t<vt.length-1;$t++){var Et=bt;bt=0;for(var ct=wt&67108863,St=Math.min($t,ht.length-1),Mt=Math.max(0,$t-ft.length+1);Mt<=St;Mt++){var Lt=$t-Mt,Ut=ft.words[Lt]|0,Kt=ht.words[Mt]|0,Ht=Ut*Kt,Ft=Ht&67108863;Et=Et+(Ht/67108864|0)|0,Ft=Ft+ct|0,ct=Ft&67108863,Et=Et+(Ft>>>26)|0,bt+=Et>>>26,Et&=67108863}vt.words[$t]=ct,wt=Et,Et=bt}return wt!==0?vt.words[$t]=wt:vt.length--,vt._strip()}function Dt(ft,ht,vt){return Pt(ft,ht,vt)}it.prototype.mulTo=function(ht,vt){var wt,bt=this.length+ht.length;return this.length===10&&ht.length===10?wt=kt(this,ht,vt):bt<63?wt=Ot(this,ht,vt):bt<1024?wt=Pt(this,ht,vt):wt=Dt(this,ht,vt),wt},it.prototype.mul=function(ht){var vt=new it(null);return vt.words=new Array(this.length+ht.length),this.mulTo(ht,vt)},it.prototype.mulf=function(ht){var vt=new it(null);return vt.words=new Array(this.length+ht.length),Dt(this,ht,vt)},it.prototype.imul=function(ht){return this.clone().mulTo(ht,this)},it.prototype.imuln=function(ht){var vt=ht<0;vt&&(ht=-ht),nt(typeof ht=="number"),nt(ht<67108864);for(var wt=0,bt=0;bt<this.length;bt++){var $t=(this.words[bt]|0)*ht,Et=($t&67108863)+(wt&67108863);wt>>=26,wt+=$t/67108864|0,wt+=Et>>>26,this.words[bt]=Et&67108863}return wt!==0&&(this.words[bt]=wt,this.length++),vt?this.ineg():this},it.prototype.muln=function(ht){return this.clone().imuln(ht)},it.prototype.sqr=function(){return this.mul(this)},it.prototype.isqr=function(){return this.imul(this.clone())},it.prototype.pow=function(ht){var vt=Ct(ht);if(vt.length===0)return new it(1);for(var wt=this,bt=0;bt<vt.length&&vt[bt]===0;bt++,wt=wt.sqr());if(++bt<vt.length)for(var $t=wt.sqr();bt<vt.length;bt++,$t=$t.sqr())vt[bt]!==0&&(wt=wt.mul($t));return wt},it.prototype.iushln=function(ht){nt(typeof ht=="number"&&ht>=0);var vt=ht%26,wt=(ht-vt)/26,bt=67108863>>>26-vt<<26-vt,$t;if(vt!==0){var Et=0;for($t=0;$t<this.length;$t++){var ct=this.words[$t]&bt,St=(this.words[$t]|0)-ct<<vt;this.words[$t]=St|Et,Et=ct>>>26-vt}Et&&(this.words[$t]=Et,this.length++)}if(wt!==0){for($t=this.length-1;$t>=0;$t--)this.words[$t+wt]=this.words[$t];for($t=0;$t<wt;$t++)this.words[$t]=0;this.length+=wt}return this._strip()},it.prototype.ishln=function(ht){return nt(this.negative===0),this.iushln(ht)},it.prototype.iushrn=function(ht,vt,wt){nt(typeof ht=="number"&&ht>=0);var bt;vt?bt=(vt-vt%26)/26:bt=0;var $t=ht%26,Et=Math.min((ht-$t)/26,this.length),ct=67108863^67108863>>>$t<<$t,St=wt;if(bt-=Et,bt=Math.max(0,bt),St){for(var Mt=0;Mt<Et;Mt++)St.words[Mt]=this.words[Mt];St.length=Et}if(Et!==0)if(this.length>Et)for(this.length-=Et,Mt=0;Mt<this.length;Mt++)this.words[Mt]=this.words[Mt+Et];else this.words[0]=0,this.length=1;var Lt=0;for(Mt=this.length-1;Mt>=0&&(Lt!==0||Mt>=bt);Mt--){var Ut=this.words[Mt]|0;this.words[Mt]=Lt<<26-$t|Ut>>>$t,Lt=Ut&ct}return St&&Lt!==0&&(St.words[St.length++]=Lt),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},it.prototype.ishrn=function(ht,vt,wt){return nt(this.negative===0),this.iushrn(ht,vt,wt)},it.prototype.shln=function(ht){return this.clone().ishln(ht)},it.prototype.ushln=function(ht){return this.clone().iushln(ht)},it.prototype.shrn=function(ht){return this.clone().ishrn(ht)},it.prototype.ushrn=function(ht){return this.clone().iushrn(ht)},it.prototype.testn=function(ht){nt(typeof ht=="number"&&ht>=0);var vt=ht%26,wt=(ht-vt)/26,bt=1<<vt;if(this.length<=wt)return!1;var $t=this.words[wt];return!!($t&bt)},it.prototype.imaskn=function(ht){nt(typeof ht=="number"&&ht>=0);var vt=ht%26,wt=(ht-vt)/26;if(nt(this.negative===0,"imaskn works only with positive numbers"),this.length<=wt)return this;if(vt!==0&&wt++,this.length=Math.min(wt,this.length),vt!==0){var bt=67108863^67108863>>>vt<<vt;this.words[this.length-1]&=bt}return this._strip()},it.prototype.maskn=function(ht){return this.clone().imaskn(ht)},it.prototype.iaddn=function(ht){return nt(typeof ht=="number"),nt(ht<67108864),ht<0?this.isubn(-ht):this.negative!==0?this.length===1&&(this.words[0]|0)<=ht?(this.words[0]=ht-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ht),this.negative=1,this):this._iaddn(ht)},it.prototype._iaddn=function(ht){this.words[0]+=ht;for(var vt=0;vt<this.length&&this.words[vt]>=67108864;vt++)this.words[vt]-=67108864,vt===this.length-1?this.words[vt+1]=1:this.words[vt+1]++;return this.length=Math.max(this.length,vt+1),this},it.prototype.isubn=function(ht){if(nt(typeof ht=="number"),nt(ht<67108864),ht<0)return this.iaddn(-ht);if(this.negative!==0)return this.negative=0,this.iaddn(ht),this.negative=1,this;if(this.words[0]-=ht,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var vt=0;vt<this.length&&this.words[vt]<0;vt++)this.words[vt]+=67108864,this.words[vt+1]-=1;return this._strip()},it.prototype.addn=function(ht){return this.clone().iaddn(ht)},it.prototype.subn=function(ht){return this.clone().isubn(ht)},it.prototype.iabs=function(){return this.negative=0,this},it.prototype.abs=function(){return this.clone().iabs()},it.prototype._ishlnsubmul=function(ht,vt,wt){var bt=ht.length+wt,$t;this._expand(bt);var Et,ct=0;for($t=0;$t<ht.length;$t++){Et=(this.words[$t+wt]|0)+ct;var St=(ht.words[$t]|0)*vt;Et-=St&67108863,ct=(Et>>26)-(St/67108864|0),this.words[$t+wt]=Et&67108863}for(;$t<this.length-wt;$t++)Et=(this.words[$t+wt]|0)+ct,ct=Et>>26,this.words[$t+wt]=Et&67108863;if(ct===0)return this._strip();for(nt(ct===-1),ct=0,$t=0;$t<this.length;$t++)Et=-(this.words[$t]|0)+ct,ct=Et>>26,this.words[$t]=Et&67108863;return this.negative=1,this._strip()},it.prototype._wordDiv=function(ht,vt){var wt=this.length-ht.length,bt=this.clone(),$t=ht,Et=$t.words[$t.length-1]|0,ct=this._countBits(Et);wt=26-ct,wt!==0&&($t=$t.ushln(wt),bt.iushln(wt),Et=$t.words[$t.length-1]|0);var St=bt.length-$t.length,Mt;if(vt!=="mod"){Mt=new it(null),Mt.length=St+1,Mt.words=new Array(Mt.length);for(var Lt=0;Lt<Mt.length;Lt++)Mt.words[Lt]=0}var Ut=bt.clone()._ishlnsubmul($t,1,St);Ut.negative===0&&(bt=Ut,Mt&&(Mt.words[St]=1));for(var Kt=St-1;Kt>=0;Kt--){var Ht=(bt.words[$t.length+Kt]|0)*67108864+(bt.words[$t.length+Kt-1]|0);for(Ht=Math.min(Ht/Et|0,67108863),bt._ishlnsubmul($t,Ht,Kt);bt.negative!==0;)Ht--,bt.negative=0,bt._ishlnsubmul($t,1,Kt),bt.isZero()||(bt.negative^=1);Mt&&(Mt.words[Kt]=Ht)}return Mt&&Mt._strip(),bt._strip(),vt!=="div"&&wt!==0&&bt.iushrn(wt),{div:Mt||null,mod:bt}},it.prototype.divmod=function(ht,vt,wt){if(nt(!ht.isZero()),this.isZero())return{div:new it(0),mod:new it(0)};var bt,$t,Et;return this.negative!==0&&ht.negative===0?(Et=this.neg().divmod(ht,vt),vt!=="mod"&&(bt=Et.div.neg()),vt!=="div"&&($t=Et.mod.neg(),wt&&$t.negative!==0&&$t.iadd(ht)),{div:bt,mod:$t}):this.negative===0&&ht.negative!==0?(Et=this.divmod(ht.neg(),vt),vt!=="mod"&&(bt=Et.div.neg()),{div:bt,mod:Et.mod}):this.negative&ht.negative?(Et=this.neg().divmod(ht.neg(),vt),vt!=="div"&&($t=Et.mod.neg(),wt&&$t.negative!==0&&$t.isub(ht)),{div:Et.div,mod:$t}):ht.length>this.length||this.cmp(ht)<0?{div:new it(0),mod:this}:ht.length===1?vt==="div"?{div:this.divn(ht.words[0]),mod:null}:vt==="mod"?{div:null,mod:new it(this.modrn(ht.words[0]))}:{div:this.divn(ht.words[0]),mod:new it(this.modrn(ht.words[0]))}:this._wordDiv(ht,vt)},it.prototype.div=function(ht){return this.divmod(ht,"div",!1).div},it.prototype.mod=function(ht){return this.divmod(ht,"mod",!1).mod},it.prototype.umod=function(ht){return this.divmod(ht,"mod",!0).mod},it.prototype.divRound=function(ht){var vt=this.divmod(ht);if(vt.mod.isZero())return vt.div;var wt=vt.div.negative!==0?vt.mod.isub(ht):vt.mod,bt=ht.ushrn(1),$t=ht.andln(1),Et=wt.cmp(bt);return Et<0||$t===1&&Et===0?vt.div:vt.div.negative!==0?vt.div.isubn(1):vt.div.iaddn(1)},it.prototype.modrn=function(ht){var vt=ht<0;vt&&(ht=-ht),nt(ht<=67108863);for(var wt=(1<<26)%ht,bt=0,$t=this.length-1;$t>=0;$t--)bt=(wt*bt+(this.words[$t]|0))%ht;return vt?-bt:bt},it.prototype.modn=function(ht){return this.modrn(ht)},it.prototype.idivn=function(ht){var vt=ht<0;vt&&(ht=-ht),nt(ht<=67108863);for(var wt=0,bt=this.length-1;bt>=0;bt--){var $t=(this.words[bt]|0)+wt*67108864;this.words[bt]=$t/ht|0,wt=$t%ht}return this._strip(),vt?this.ineg():this},it.prototype.divn=function(ht){return this.clone().idivn(ht)},it.prototype.egcd=function(ht){nt(ht.negative===0),nt(!ht.isZero());var vt=this,wt=ht.clone();vt.negative!==0?vt=vt.umod(ht):vt=vt.clone();for(var bt=new it(1),$t=new it(0),Et=new it(0),ct=new it(1),St=0;vt.isEven()&&wt.isEven();)vt.iushrn(1),wt.iushrn(1),++St;for(var Mt=wt.clone(),Lt=vt.clone();!vt.isZero();){for(var Ut=0,Kt=1;!(vt.words[0]&Kt)&&Ut<26;++Ut,Kt<<=1);if(Ut>0)for(vt.iushrn(Ut);Ut-- >0;)(bt.isOdd()||$t.isOdd())&&(bt.iadd(Mt),$t.isub(Lt)),bt.iushrn(1),$t.iushrn(1);for(var Ht=0,Ft=1;!(wt.words[0]&Ft)&&Ht<26;++Ht,Ft<<=1);if(Ht>0)for(wt.iushrn(Ht);Ht-- >0;)(Et.isOdd()||ct.isOdd())&&(Et.iadd(Mt),ct.isub(Lt)),Et.iushrn(1),ct.iushrn(1);vt.cmp(wt)>=0?(vt.isub(wt),bt.isub(Et),$t.isub(ct)):(wt.isub(vt),Et.isub(bt),ct.isub($t))}return{a:Et,b:ct,gcd:wt.iushln(St)}},it.prototype._invmp=function(ht){nt(ht.negative===0),nt(!ht.isZero());var vt=this,wt=ht.clone();vt.negative!==0?vt=vt.umod(ht):vt=vt.clone();for(var bt=new it(1),$t=new it(0),Et=wt.clone();vt.cmpn(1)>0&&wt.cmpn(1)>0;){for(var ct=0,St=1;!(vt.words[0]&St)&&ct<26;++ct,St<<=1);if(ct>0)for(vt.iushrn(ct);ct-- >0;)bt.isOdd()&&bt.iadd(Et),bt.iushrn(1);for(var Mt=0,Lt=1;!(wt.words[0]&Lt)&&Mt<26;++Mt,Lt<<=1);if(Mt>0)for(wt.iushrn(Mt);Mt-- >0;)$t.isOdd()&&$t.iadd(Et),$t.iushrn(1);vt.cmp(wt)>=0?(vt.isub(wt),bt.isub($t)):(wt.isub(vt),$t.isub(bt))}var Ut;return vt.cmpn(1)===0?Ut=bt:Ut=$t,Ut.cmpn(0)<0&&Ut.iadd(ht),Ut},it.prototype.gcd=function(ht){if(this.isZero())return ht.abs();if(ht.isZero())return this.abs();var vt=this.clone(),wt=ht.clone();vt.negative=0,wt.negative=0;for(var bt=0;vt.isEven()&&wt.isEven();bt++)vt.iushrn(1),wt.iushrn(1);do{for(;vt.isEven();)vt.iushrn(1);for(;wt.isEven();)wt.iushrn(1);var $t=vt.cmp(wt);if($t<0){var Et=vt;vt=wt,wt=Et}else if($t===0||wt.cmpn(1)===0)break;vt.isub(wt)}while(!0);return wt.iushln(bt)},it.prototype.invm=function(ht){return this.egcd(ht).a.umod(ht)},it.prototype.isEven=function(){return(this.words[0]&1)===0},it.prototype.isOdd=function(){return(this.words[0]&1)===1},it.prototype.andln=function(ht){return this.words[0]&ht},it.prototype.bincn=function(ht){nt(typeof ht=="number");var vt=ht%26,wt=(ht-vt)/26,bt=1<<vt;if(this.length<=wt)return this._expand(wt+1),this.words[wt]|=bt,this;for(var $t=bt,Et=wt;$t!==0&&Et<this.length;Et++){var ct=this.words[Et]|0;ct+=$t,$t=ct>>>26,ct&=67108863,this.words[Et]=ct}return $t!==0&&(this.words[Et]=$t,this.length++),this},it.prototype.isZero=function(){return this.length===1&&this.words[0]===0},it.prototype.cmpn=function(ht){var vt=ht<0;if(this.negative!==0&&!vt)return-1;if(this.negative===0&&vt)return 1;this._strip();var wt;if(this.length>1)wt=1;else{vt&&(ht=-ht),nt(ht<=67108863,"Number is too big");var bt=this.words[0]|0;wt=bt===ht?0:bt<ht?-1:1}return this.negative!==0?-wt|0:wt},it.prototype.cmp=function(ht){if(this.negative!==0&&ht.negative===0)return-1;if(this.negative===0&&ht.negative!==0)return 1;var vt=this.ucmp(ht);return this.negative!==0?-vt|0:vt},it.prototype.ucmp=function(ht){if(this.length>ht.length)return 1;if(this.length<ht.length)return-1;for(var vt=0,wt=this.length-1;wt>=0;wt--){var bt=this.words[wt]|0,$t=ht.words[wt]|0;if(bt!==$t){bt<$t?vt=-1:bt>$t&&(vt=1);break}}return vt},it.prototype.gtn=function(ht){return this.cmpn(ht)===1},it.prototype.gt=function(ht){return this.cmp(ht)===1},it.prototype.gten=function(ht){return this.cmpn(ht)>=0},it.prototype.gte=function(ht){return this.cmp(ht)>=0},it.prototype.ltn=function(ht){return this.cmpn(ht)===-1},it.prototype.lt=function(ht){return this.cmp(ht)===-1},it.prototype.lten=function(ht){return this.cmpn(ht)<=0},it.prototype.lte=function(ht){return this.cmp(ht)<=0},it.prototype.eqn=function(ht){return this.cmpn(ht)===0},it.prototype.eq=function(ht){return this.cmp(ht)===0},it.red=function(ht){return new It(ht)},it.prototype.toRed=function(ht){return nt(!this.red,"Already a number in reduction context"),nt(this.negative===0,"red works only with positives"),ht.convertTo(this)._forceRed(ht)},it.prototype.fromRed=function(){return nt(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},it.prototype._forceRed=function(ht){return this.red=ht,this},it.prototype.forceRed=function(ht){return nt(!this.red,"Already a number in reduction context"),this._forceRed(ht)},it.prototype.redAdd=function(ht){return nt(this.red,"redAdd works only with red numbers"),this.red.add(this,ht)},it.prototype.redIAdd=function(ht){return nt(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ht)},it.prototype.redSub=function(ht){return nt(this.red,"redSub works only with red numbers"),this.red.sub(this,ht)},it.prototype.redISub=function(ht){return nt(this.red,"redISub works only with red numbers"),this.red.isub(this,ht)},it.prototype.redShl=function(ht){return nt(this.red,"redShl works only with red numbers"),this.red.shl(this,ht)},it.prototype.redMul=function(ht){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ht),this.red.mul(this,ht)},it.prototype.redIMul=function(ht){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ht),this.red.imul(this,ht)},it.prototype.redSqr=function(){return nt(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},it.prototype.redISqr=function(){return nt(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},it.prototype.redSqrt=function(){return nt(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},it.prototype.redInvm=function(){return nt(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},it.prototype.redNeg=function(){return nt(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},it.prototype.redPow=function(ht){return nt(this.red&&!ht.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ht)};var Gt={k256:null,p224:null,p192:null,p25519:null};function jt(ft,ht){this.name=ft,this.p=new it(ht,16),this.n=this.p.bitLength(),this.k=new it(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}jt.prototype._tmp=function(){var ht=new it(null);return ht.words=new Array(Math.ceil(this.n/13)),ht},jt.prototype.ireduce=function(ht){var vt=ht,wt;do this.split(vt,this.tmp),vt=this.imulK(vt),vt=vt.iadd(this.tmp),wt=vt.bitLength();while(wt>this.n);var bt=wt<this.n?-1:vt.ucmp(this.p);return bt===0?(vt.words[0]=0,vt.length=1):bt>0?vt.isub(this.p):vt.strip!==void 0?vt.strip():vt._strip(),vt},jt.prototype.split=function(ht,vt){ht.iushrn(this.n,0,vt)},jt.prototype.imulK=function(ht){return ht.imul(this.k)};function Yt(){jt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}at(Yt,jt),Yt.prototype.split=function(ht,vt){for(var wt=4194303,bt=Math.min(ht.length,9),$t=0;$t<bt;$t++)vt.words[$t]=ht.words[$t];if(vt.length=bt,ht.length<=9){ht.words[0]=0,ht.length=1;return}var Et=ht.words[9];for(vt.words[vt.length++]=Et&wt,$t=10;$t<ht.length;$t++){var ct=ht.words[$t]|0;ht.words[$t-10]=(ct&wt)<<4|Et>>>22,Et=ct}Et>>>=22,ht.words[$t-10]=Et,Et===0&&ht.length>10?ht.length-=10:ht.length-=9},Yt.prototype.imulK=function(ht){ht.words[ht.length]=0,ht.words[ht.length+1]=0,ht.length+=2;for(var vt=0,wt=0;wt<ht.length;wt++){var bt=ht.words[wt]|0;vt+=bt*977,ht.words[wt]=vt&67108863,vt=bt*64+(vt/67108864|0)}return ht.words[ht.length-1]===0&&(ht.length--,ht.words[ht.length-1]===0&&ht.length--),ht};function tr(){jt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}at(tr,jt);function er(){jt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}at(er,jt);function lr(){jt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}at(lr,jt),lr.prototype.imulK=function(ht){for(var vt=0,wt=0;wt<ht.length;wt++){var bt=(ht.words[wt]|0)*19+vt,$t=bt&67108863;bt>>>=26,ht.words[wt]=$t,vt=bt}return vt!==0&&(ht.words[ht.length++]=vt),ht},it._prime=function(ht){if(Gt[ht])return Gt[ht];var vt;if(ht==="k256")vt=new Yt;else if(ht==="p224")vt=new tr;else if(ht==="p192")vt=new er;else if(ht==="p25519")vt=new lr;else throw new Error("Unknown prime "+ht);return Gt[ht]=vt,vt};function It(ft){if(typeof ft=="string"){var ht=it._prime(ft);this.m=ht.p,this.prime=ht}else nt(ft.gtn(1),"modulus must be greater than 1"),this.m=ft,this.prime=null}It.prototype._verify1=function(ht){nt(ht.negative===0,"red works only with positives"),nt(ht.red,"red works only with red numbers")},It.prototype._verify2=function(ht,vt){nt((ht.negative|vt.negative)===0,"red works only with positives"),nt(ht.red&&ht.red===vt.red,"red works only with red numbers")},It.prototype.imod=function(ht){return this.prime?this.prime.ireduce(ht)._forceRed(this):(yt(ht,ht.umod(this.m)._forceRed(this)),ht)},It.prototype.neg=function(ht){return ht.isZero()?ht.clone():this.m.sub(ht)._forceRed(this)},It.prototype.add=function(ht,vt){this._verify2(ht,vt);var wt=ht.add(vt);return wt.cmp(this.m)>=0&&wt.isub(this.m),wt._forceRed(this)},It.prototype.iadd=function(ht,vt){this._verify2(ht,vt);var wt=ht.iadd(vt);return wt.cmp(this.m)>=0&&wt.isub(this.m),wt},It.prototype.sub=function(ht,vt){this._verify2(ht,vt);var wt=ht.sub(vt);return wt.cmpn(0)<0&&wt.iadd(this.m),wt._forceRed(this)},It.prototype.isub=function(ht,vt){this._verify2(ht,vt);var wt=ht.isub(vt);return wt.cmpn(0)<0&&wt.iadd(this.m),wt},It.prototype.shl=function(ht,vt){return this._verify1(ht),this.imod(ht.ushln(vt))},It.prototype.imul=function(ht,vt){return this._verify2(ht,vt),this.imod(ht.imul(vt))},It.prototype.mul=function(ht,vt){return this._verify2(ht,vt),this.imod(ht.mul(vt))},It.prototype.isqr=function(ht){return this.imul(ht,ht.clone())},It.prototype.sqr=function(ht){return this.mul(ht,ht)},It.prototype.sqrt=function(ht){if(ht.isZero())return ht.clone();var vt=this.m.andln(3);if(nt(vt%2===1),vt===3){var wt=this.m.add(new it(1)).iushrn(2);return this.pow(ht,wt)}for(var bt=this.m.subn(1),$t=0;!bt.isZero()&&bt.andln(1)===0;)$t++,bt.iushrn(1);nt(!bt.isZero());var Et=new it(1).toRed(this),ct=Et.redNeg(),St=this.m.subn(1).iushrn(1),Mt=this.m.bitLength();for(Mt=new it(2*Mt*Mt).toRed(this);this.pow(Mt,St).cmp(ct)!==0;)Mt.redIAdd(ct);for(var Lt=this.pow(Mt,bt),Ut=this.pow(ht,bt.addn(1).iushrn(1)),Kt=this.pow(ht,bt),Ht=$t;Kt.cmp(Et)!==0;){for(var Ft=Kt,zt=0;Ft.cmp(Et)!==0;zt++)Ft=Ft.redSqr();nt(zt<Ht);var ir=this.pow(Lt,new it(1).iushln(Ht-zt-1));Ut=Ut.redMul(ir),Lt=ir.redSqr(),Kt=Kt.redMul(Lt),Ht=zt}return Ut},It.prototype.invm=function(ht){var vt=ht._invmp(this.m);return vt.negative!==0?(vt.negative=0,this.imod(vt).redNeg()):this.imod(vt)},It.prototype.pow=function(ht,vt){if(vt.isZero())return new it(1).toRed(this);if(vt.cmpn(1)===0)return ht.clone();var wt=4,bt=new Array(1<<wt);bt[0]=new it(1).toRed(this),bt[1]=ht;for(var $t=2;$t<bt.length;$t++)bt[$t]=this.mul(bt[$t-1],ht);var Et=bt[0],ct=0,St=0,Mt=vt.bitLength()%26;for(Mt===0&&(Mt=26),$t=vt.length-1;$t>=0;$t--){for(var Lt=vt.words[$t],Ut=Mt-1;Ut>=0;Ut--){var Kt=Lt>>Ut&1;if(Et!==bt[0]&&(Et=this.sqr(Et)),Kt===0&&ct===0){St=0;continue}ct<<=1,ct|=Kt,St++,!(St!==wt&&($t!==0||Ut!==0))&&(Et=this.mul(Et,bt[ct]),St=0,ct=0)}Mt=26}return Et},It.prototype.convertTo=function(ht){var vt=ht.umod(this.m);return vt===ht?vt.clone():vt},It.prototype.convertFrom=function(ht){var vt=ht.clone();return vt.red=null,vt},it.mont=function(ht){return new ot(ht)};function ot(ft){It.call(this,ft),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new it(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}at(ot,It),ot.prototype.convertTo=function(ht){return this.imod(ht.ushln(this.shift))},ot.prototype.convertFrom=function(ht){var vt=this.imod(ht.mul(this.rinv));return vt.red=null,vt},ot.prototype.imul=function(ht,vt){if(ht.isZero()||vt.isZero())return ht.words[0]=0,ht.length=1,ht;var wt=ht.imul(vt),bt=wt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),$t=wt.isub(bt).iushrn(this.shift),Et=$t;return $t.cmp(this.m)>=0?Et=$t.isub(this.m):$t.cmpn(0)<0&&(Et=$t.iadd(this.m)),Et._forceRed(this)},ot.prototype.mul=function(ht,vt){if(ht.isZero()||vt.isZero())return new it(0)._forceRed(this);var wt=ht.mul(vt),bt=wt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),$t=wt.isub(bt).iushrn(this.shift),Et=$t;return $t.cmp(this.m)>=0?Et=$t.isub(this.m):$t.cmpn(0)<0&&(Et=$t.iadd(this.m)),Et._forceRed(this)},ot.prototype.invm=function(ht){var vt=this.imod(ht._invmp(this.m).mul(this.r2));return vt._forceRed(this)}})(tt,commonjsGlobal$1)})(bn$6);var bnExports=bn$6.exports;const BN=getDefaultExportFromCjs$5(bnExports);var safeBuffer$1={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(tt,et){var rt=require$$0$2,nt=rt.Buffer;function at(st,dt){for(var pt in st)dt[pt]=st[pt]}nt.from&&nt.alloc&&nt.allocUnsafe&&nt.allocUnsafeSlow?tt.exports=rt:(at(rt,et),et.Buffer=it);function it(st,dt,pt){return nt(st,dt,pt)}it.prototype=Object.create(nt.prototype),at(nt,it),it.from=function(st,dt,pt){if(typeof st=="number")throw new TypeError("Argument must not be a number");return nt(st,dt,pt)},it.alloc=function(st,dt,pt){if(typeof st!="number")throw new TypeError("Argument must be a number");var mt=nt(st);return dt!==void 0?typeof pt=="string"?mt.fill(dt,pt):mt.fill(dt):mt.fill(0),mt},it.allocUnsafe=function(st){if(typeof st!="number")throw new TypeError("Argument must be a number");return nt(st)},it.allocUnsafeSlow=function(st){if(typeof st!="number")throw new TypeError("Argument must be a number");return rt.SlowBuffer(st)}})(safeBuffer$1,safeBuffer$1.exports);var safeBufferExports=safeBuffer$1.exports,_Buffer$1=safeBufferExports.Buffer;function base$5(tt){if(tt.length>=255)throw new TypeError("Alphabet too long");for(var et=new Uint8Array(256),rt=0;rt<et.length;rt++)et[rt]=255;for(var nt=0;nt<tt.length;nt++){var at=tt.charAt(nt),it=at.charCodeAt(0);if(et[it]!==255)throw new TypeError(at+" is ambiguous");et[it]=nt}var st=tt.length,dt=tt.charAt(0),pt=Math.log(st)/Math.log(256),mt=Math.log(256)/Math.log(st);function yt(At){if((Array.isArray(At)||At instanceof Uint8Array)&&(At=_Buffer$1.from(At)),!_Buffer$1.isBuffer(At))throw new TypeError("Expected Buffer");if(At.length===0)return"";for(var xt=0,Nt=0,Ct=0,Ot=At.length;Ct!==Ot&&At[Ct]===0;)Ct++,xt++;for(var kt=(Ot-Ct)*mt+1>>>0,Pt=new Uint8Array(kt);Ct!==Ot;){for(var Dt=At[Ct],Gt=0,jt=kt-1;(Dt!==0||Gt<Nt)&&jt!==-1;jt--,Gt++)Dt+=256*Pt[jt]>>>0,Pt[jt]=Dt%st>>>0,Dt=Dt/st>>>0;if(Dt!==0)throw new Error("Non-zero carry");Nt=Gt,Ct++}for(var Yt=kt-Nt;Yt!==kt&&Pt[Yt]===0;)Yt++;for(var tr=dt.repeat(xt);Yt<kt;++Yt)tr+=tt.charAt(Pt[Yt]);return tr}function Rt(At){if(typeof At!="string")throw new TypeError("Expected String");if(At.length===0)return _Buffer$1.alloc(0);for(var xt=0,Nt=0,Ct=0;At[xt]===dt;)Nt++,xt++;for(var Ot=(At.length-xt)*pt+1>>>0,kt=new Uint8Array(Ot);At[xt];){var Pt=et[At.charCodeAt(xt)];if(Pt===255)return;for(var Dt=0,Gt=Ot-1;(Pt!==0||Dt<Ct)&&Gt!==-1;Gt--,Dt++)Pt+=st*kt[Gt]>>>0,kt[Gt]=Pt%256>>>0,Pt=Pt/256>>>0;if(Pt!==0)throw new Error("Non-zero carry");Ct=Dt,xt++}for(var jt=Ot-Ct;jt!==Ot&&kt[jt]===0;)jt++;var Yt=_Buffer$1.allocUnsafe(Nt+(Ot-jt));Yt.fill(0,0,Nt);for(var tr=Nt;jt!==Ot;)Yt[tr++]=kt[jt++];return Yt}function Tt(At){var xt=Rt(At);if(xt)return xt;throw new Error("Non-base"+st+" character")}return{encode:yt,decodeUnsafe:Rt,decode:Tt}}var src$4=base$5,basex$3=src$4,ALPHABET$3="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58$4=basex$3(ALPHABET$3);const bs58$5=getDefaultExportFromCjs$5(bs58$4),SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends HashMD{constructor(){super(64,32,8,!1),this.A=SHA256_IV[0]|0,this.B=SHA256_IV[1]|0,this.C=SHA256_IV[2]|0,this.D=SHA256_IV[3]|0,this.E=SHA256_IV[4]|0,this.F=SHA256_IV[5]|0,this.G=SHA256_IV[6]|0,this.H=SHA256_IV[7]|0}get(){const{A:et,B:rt,C:nt,D:at,E:it,F:st,G:dt,H:pt}=this;return[et,rt,nt,at,it,st,dt,pt]}set(et,rt,nt,at,it,st,dt,pt){this.A=et|0,this.B=rt|0,this.C=nt|0,this.D=at|0,this.E=it|0,this.F=st|0,this.G=dt|0,this.H=pt|0}process(et,rt){for(let Rt=0;Rt<16;Rt++,rt+=4)SHA256_W[Rt]=et.getUint32(rt,!1);for(let Rt=16;Rt<64;Rt++){const Tt=SHA256_W[Rt-15],At=SHA256_W[Rt-2],xt=rotr(Tt,7)^rotr(Tt,18)^Tt>>>3,Nt=rotr(At,17)^rotr(At,19)^At>>>10;SHA256_W[Rt]=Nt+SHA256_W[Rt-7]+xt+SHA256_W[Rt-16]|0}let{A:nt,B:at,C:it,D:st,E:dt,F:pt,G:mt,H:yt}=this;for(let Rt=0;Rt<64;Rt++){const Tt=rotr(dt,6)^rotr(dt,11)^rotr(dt,25),At=yt+Tt+Chi(dt,pt,mt)+SHA256_K[Rt]+SHA256_W[Rt]|0,Nt=(rotr(nt,2)^rotr(nt,13)^rotr(nt,22))+Maj(nt,at,it)|0;yt=mt,mt=pt,pt=dt,dt=st+At|0,st=it,it=at,at=nt,nt=At+Nt|0}nt=nt+this.A|0,at=at+this.B|0,it=it+this.C|0,st=st+this.D|0,dt=dt+this.E|0,pt=pt+this.F|0,mt=mt+this.G|0,yt=yt+this.H|0,this.set(nt,at,it,st,dt,pt,mt,yt)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256$2=wrapConstructor(()=>new SHA256);var lib$1={};function inRange(tt,et,rt){return et<=tt&&tt<=rt}function ToDictionary(tt){if(tt===void 0)return{};if(tt===Object(tt))return tt;throw TypeError("Could not convert argument to dictionary")}function stringToCodePoints(tt){for(var et=String(tt),rt=et.length,nt=0,at=[];nt<rt;){var it=et.charCodeAt(nt);if(it<55296||it>57343)at.push(it);else if(56320<=it&&it<=57343)at.push(65533);else if(55296<=it&&it<=56319)if(nt===rt-1)at.push(65533);else{var st=tt.charCodeAt(nt+1);if(56320<=st&&st<=57343){var dt=it&1023,pt=st&1023;at.push(65536+(dt<<10)+pt),nt+=1}else at.push(65533)}nt+=1}return at}function codePointsToString(tt){for(var et="",rt=0;rt<tt.length;++rt){var nt=tt[rt];nt<=65535?et+=String.fromCharCode(nt):(nt-=65536,et+=String.fromCharCode((nt>>10)+55296,(nt&1023)+56320))}return et}var end_of_stream=-1;function Stream(tt){this.tokens=[].slice.call(tt)}Stream.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():end_of_stream},prepend:function(tt){if(Array.isArray(tt))for(var et=tt;et.length;)this.tokens.unshift(et.pop());else this.tokens.unshift(tt)},push:function(tt){if(Array.isArray(tt))for(var et=tt;et.length;)this.tokens.push(et.shift());else this.tokens.push(tt)}};var finished=-1;function decoderError(tt,et){if(tt)throw TypeError("Decoder error");return et||65533}var DEFAULT_ENCODING="utf-8";function TextDecoder$2(tt,et){if(!(this instanceof TextDecoder$2))return new TextDecoder$2(tt,et);if(tt=tt!==void 0?String(tt).toLowerCase():DEFAULT_ENCODING,tt!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");et=ToDictionary(et),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!et.fatal,this._ignoreBOM=!!et.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}TextDecoder$2.prototype={decode:function(et,rt){var nt;typeof et=="object"&&et instanceof ArrayBuffer?nt=new Uint8Array(et):typeof et=="object"&&"buffer"in et&&et.buffer instanceof ArrayBuffer?nt=new Uint8Array(et.buffer,et.byteOffset,et.byteLength):nt=new Uint8Array(0),rt=ToDictionary(rt),this._streaming||(this._decoder=new UTF8Decoder({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!rt.stream;for(var at=new Stream(nt),it=[],st;!at.endOfStream()&&(st=this._decoder.handler(at,at.read()),st!==finished);)st!==null&&(Array.isArray(st)?it.push.apply(it,st):it.push(st));if(!this._streaming){do{if(st=this._decoder.handler(at,at.read()),st===finished)break;st!==null&&(Array.isArray(st)?it.push.apply(it,st):it.push(st))}while(!at.endOfStream());this._decoder=null}return it.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(it[0]===65279?(this._BOMseen=!0,it.shift()):this._BOMseen=!0),codePointsToString(it)}};function TextEncoder$1(tt,et){if(!(this instanceof TextEncoder$1))return new TextEncoder$1(tt,et);if(tt=tt!==void 0?String(tt).toLowerCase():DEFAULT_ENCODING,tt!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");et=ToDictionary(et),this._streaming=!1,this._encoder=null,this._options={fatal:!!et.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}TextEncoder$1.prototype={encode:function(et,rt){et=et?String(et):"",rt=ToDictionary(rt),this._streaming||(this._encoder=new UTF8Encoder(this._options)),this._streaming=!!rt.stream;for(var nt=[],at=new Stream(stringToCodePoints(et)),it;!at.endOfStream()&&(it=this._encoder.handler(at,at.read()),it!==finished);)Array.isArray(it)?nt.push.apply(nt,it):nt.push(it);if(!this._streaming){for(;it=this._encoder.handler(at,at.read()),it!==finished;)Array.isArray(it)?nt.push.apply(nt,it):nt.push(it);this._encoder=null}return new Uint8Array(nt)}};function UTF8Decoder(tt){var et=tt.fatal,rt=0,nt=0,at=0,it=128,st=191;this.handler=function(dt,pt){if(pt===end_of_stream&&at!==0)return at=0,decoderError(et);if(pt===end_of_stream)return finished;if(at===0){if(inRange(pt,0,127))return pt;if(inRange(pt,194,223))at=1,rt=pt-192;else if(inRange(pt,224,239))pt===224&&(it=160),pt===237&&(st=159),at=2,rt=pt-224;else if(inRange(pt,240,244))pt===240&&(it=144),pt===244&&(st=143),at=3,rt=pt-240;else return decoderError(et);return rt=rt<<6*at,null}if(!inRange(pt,it,st))return rt=at=nt=0,it=128,st=191,dt.prepend(pt),decoderError(et);if(it=128,st=191,nt+=1,rt+=pt-128<<6*(at-nt),nt!==at)return null;var mt=rt;return rt=at=nt=0,mt}}function UTF8Encoder(tt){tt.fatal,this.handler=function(et,rt){if(rt===end_of_stream)return finished;if(inRange(rt,0,127))return rt;var nt,at;inRange(rt,128,2047)?(nt=1,at=192):inRange(rt,2048,65535)?(nt=2,at=224):inRange(rt,65536,1114111)&&(nt=3,at=240);for(var it=[(rt>>6*nt)+at];nt>0;){var st=rt>>6*(nt-1);it.push(128|st&63),nt-=1}return it}}const encoding$2=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:TextDecoder$2,TextEncoder:TextEncoder$1},Symbol.toStringTag,{value:"Module"})),require$$2$2=getAugmentedNamespace(encoding$2);var __createBinding$1=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(tt,et,rt,nt){nt===void 0&&(nt=rt),Object.defineProperty(tt,nt,{enumerable:!0,get:function(){return et[rt]}})}:function(tt,et,rt,nt){nt===void 0&&(nt=rt),tt[nt]=et[rt]}),__setModuleDefault$1=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(tt,et){Object.defineProperty(tt,"default",{enumerable:!0,value:et})}:function(tt,et){tt.default=et}),__decorate$1=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(tt,et,rt,nt){var at=arguments.length,it=at<3?et:nt===null?nt=Object.getOwnPropertyDescriptor(et,rt):nt,st;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")it=Reflect.decorate(tt,et,rt,nt);else for(var dt=tt.length-1;dt>=0;dt--)(st=tt[dt])&&(it=(at<3?st(it):at>3?st(et,rt,it):st(et,rt))||it);return at>3&&it&&Object.defineProperty(et,rt,it),it},__importStar$1=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(tt){if(tt&&tt.__esModule)return tt;var et={};if(tt!=null)for(var rt in tt)rt!=="default"&&Object.hasOwnProperty.call(tt,rt)&&__createBinding$1(et,tt,rt);return __setModuleDefault$1(et,tt),et},__importDefault$1=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(tt){return tt&&tt.__esModule?tt:{default:tt}};Object.defineProperty(lib$1,"__esModule",{value:!0});var deserializeUnchecked_1=lib$1.deserializeUnchecked=deserialize_1=lib$1.deserialize=serialize_1=lib$1.serialize=lib$1.BinaryReader=lib$1.BinaryWriter=lib$1.BorshError=lib$1.baseDecode=lib$1.baseEncode=void 0;const bn_js_1$1=__importDefault$1(bnExports),bs58_1$1=__importDefault$1(bs58$4),encoding$1=__importStar$1(require$$2$2),ResolvedTextDecoder=typeof TextDecoder!="function"?encoding$1.TextDecoder:TextDecoder,textDecoder$1=new ResolvedTextDecoder("utf-8",{fatal:!0});function baseEncode$1(tt){return typeof tt=="string"&&(tt=Buffer.from(tt,"utf8")),bs58_1$1.default.encode(Buffer.from(tt))}lib$1.baseEncode=baseEncode$1;function baseDecode$1(tt){return Buffer.from(bs58_1$1.default.decode(tt))}lib$1.baseDecode=baseDecode$1;const INITIAL_LENGTH$1=1024;let BorshError$1=class extends Error{constructor(et){super(et),this.fieldPath=[],this.originalMessage=et}addToFieldPath(et){this.fieldPath.splice(0,0,et),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};lib$1.BorshError=BorshError$1;let BinaryWriter$1=class{constructor(){this.buf=Buffer.alloc(INITIAL_LENGTH$1),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(INITIAL_LENGTH$1)]))}writeU8(et){this.maybeResize(),this.buf.writeUInt8(et,this.length),this.length+=1}writeU16(et){this.maybeResize(),this.buf.writeUInt16LE(et,this.length),this.length+=2}writeU32(et){this.maybeResize(),this.buf.writeUInt32LE(et,this.length),this.length+=4}writeU64(et){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1$1.default(et).toArray("le",8)))}writeU128(et){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1$1.default(et).toArray("le",16)))}writeU256(et){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1$1.default(et).toArray("le",32)))}writeU512(et){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1$1.default(et).toArray("le",64)))}writeBuffer(et){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),et,Buffer.alloc(INITIAL_LENGTH$1)]),this.length+=et.length}writeString(et){this.maybeResize();const rt=Buffer.from(et,"utf8");this.writeU32(rt.length),this.writeBuffer(rt)}writeFixedArray(et){this.writeBuffer(Buffer.from(et))}writeArray(et,rt){this.maybeResize(),this.writeU32(et.length);for(const nt of et)this.maybeResize(),rt(nt)}toArray(){return this.buf.subarray(0,this.length)}};lib$1.BinaryWriter=BinaryWriter$1;function handlingRangeError$1(tt,et,rt){const nt=rt.value;rt.value=function(...at){try{return nt.apply(this,at)}catch(it){if(it instanceof RangeError){const st=it.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(st)>=0)throw new BorshError$1("Reached the end of buffer when deserializing")}throw it}}}let BinaryReader$1=class{constructor(et){this.buf=et,this.offset=0}readU8(){const et=this.buf.readUInt8(this.offset);return this.offset+=1,et}readU16(){const et=this.buf.readUInt16LE(this.offset);return this.offset+=2,et}readU32(){const et=this.buf.readUInt32LE(this.offset);return this.offset+=4,et}readU64(){const et=this.readBuffer(8);return new bn_js_1$1.default(et,"le")}readU128(){const et=this.readBuffer(16);return new bn_js_1$1.default(et,"le")}readU256(){const et=this.readBuffer(32);return new bn_js_1$1.default(et,"le")}readU512(){const et=this.readBuffer(64);return new bn_js_1$1.default(et,"le")}readBuffer(et){if(this.offset+et>this.buf.length)throw new BorshError$1(`Expected buffer length ${et} isn't within bounds`);const rt=this.buf.slice(this.offset,this.offset+et);return this.offset+=et,rt}readString(){const et=this.readU32(),rt=this.readBuffer(et);try{return textDecoder$1.decode(rt)}catch(nt){throw new BorshError$1(`Error decoding UTF-8 string: ${nt}`)}}readFixedArray(et){return new Uint8Array(this.readBuffer(et))}readArray(et){const rt=this.readU32(),nt=Array();for(let at=0;at<rt;++at)nt.push(et());return nt}};__decorate$1([handlingRangeError$1],BinaryReader$1.prototype,"readU8",null);__decorate$1([handlingRangeError$1],BinaryReader$1.prototype,"readU16",null);__decorate$1([handlingRangeError$1],BinaryReader$1.prototype,"readU32",null);__decorate$1([handlingRangeError$1],BinaryReader$1.prototype,"readU64",null);__decorate$1([handlingRangeError$1],BinaryReader$1.prototype,"readU128",null);__decorate$1([handlingRangeError$1],BinaryReader$1.prototype,"readU256",null);__decorate$1([handlingRangeError$1],BinaryReader$1.prototype,"readU512",null);__decorate$1([handlingRangeError$1],BinaryReader$1.prototype,"readString",null);__decorate$1([handlingRangeError$1],BinaryReader$1.prototype,"readFixedArray",null);__decorate$1([handlingRangeError$1],BinaryReader$1.prototype,"readArray",null);lib$1.BinaryReader=BinaryReader$1;function capitalizeFirstLetter$1(tt){return tt.charAt(0).toUpperCase()+tt.slice(1)}function serializeField$1(tt,et,rt,nt,at){try{if(typeof nt=="string")at[`write${capitalizeFirstLetter$1(nt)}`](rt);else if(nt instanceof Array)if(typeof nt[0]=="number"){if(rt.length!==nt[0])throw new BorshError$1(`Expecting byte array of length ${nt[0]}, but got ${rt.length} bytes`);at.writeFixedArray(rt)}else if(nt.length===2&&typeof nt[1]=="number"){if(rt.length!==nt[1])throw new BorshError$1(`Expecting byte array of length ${nt[1]}, but got ${rt.length} bytes`);for(let it=0;it<nt[1];it++)serializeField$1(tt,null,rt[it],nt[0],at)}else at.writeArray(rt,it=>{serializeField$1(tt,et,it,nt[0],at)});else if(nt.kind!==void 0)switch(nt.kind){case"option":{rt==null?at.writeU8(0):(at.writeU8(1),serializeField$1(tt,et,rt,nt.type,at));break}case"map":{at.writeU32(rt.size),rt.forEach((it,st)=>{serializeField$1(tt,et,st,nt.key,at),serializeField$1(tt,et,it,nt.value,at)});break}default:throw new BorshError$1(`FieldType ${nt} unrecognized`)}else serializeStruct$1(tt,rt,at)}catch(it){throw it instanceof BorshError$1&&it.addToFieldPath(et),it}}function serializeStruct$1(tt,et,rt){if(typeof et.borshSerialize=="function"){et.borshSerialize(rt);return}const nt=tt.get(et.constructor);if(!nt)throw new BorshError$1(`Class ${et.constructor.name} is missing in schema`);if(nt.kind==="struct")nt.fields.map(([at,it])=>{serializeField$1(tt,at,et[at],it,rt)});else if(nt.kind==="enum"){const at=et[nt.field];for(let it=0;it<nt.values.length;++it){const[st,dt]=nt.values[it];if(st===at){rt.writeU8(it),serializeField$1(tt,st,et[st],dt,rt);break}}}else throw new BorshError$1(`Unexpected schema kind: ${nt.kind} for ${et.constructor.name}`)}function serialize$1(tt,et,rt=BinaryWriter$1){const nt=new rt;return serializeStruct$1(tt,et,nt),nt.toArray()}var serialize_1=lib$1.serialize=serialize$1;function deserializeField$1(tt,et,rt,nt){try{if(typeof rt=="string")return nt[`read${capitalizeFirstLetter$1(rt)}`]();if(rt instanceof Array){if(typeof rt[0]=="number")return nt.readFixedArray(rt[0]);if(typeof rt[1]=="number"){const at=[];for(let it=0;it<rt[1];it++)at.push(deserializeField$1(tt,null,rt[0],nt));return at}else return nt.readArray(()=>deserializeField$1(tt,et,rt[0],nt))}if(rt.kind==="option")return nt.readU8()?deserializeField$1(tt,et,rt.type,nt):void 0;if(rt.kind==="map"){let at=new Map;const it=nt.readU32();for(let st=0;st<it;st++){const dt=deserializeField$1(tt,et,rt.key,nt),pt=deserializeField$1(tt,et,rt.value,nt);at.set(dt,pt)}return at}return deserializeStruct$1(tt,rt,nt)}catch(at){throw at instanceof BorshError$1&&at.addToFieldPath(et),at}}function deserializeStruct$1(tt,et,rt){if(typeof et.borshDeserialize=="function")return et.borshDeserialize(rt);const nt=tt.get(et);if(!nt)throw new BorshError$1(`Class ${et.name} is missing in schema`);if(nt.kind==="struct"){const at={};for(const[it,st]of tt.get(et).fields)at[it]=deserializeField$1(tt,it,st,rt);return new et(at)}if(nt.kind==="enum"){const at=rt.readU8();if(at>=nt.values.length)throw new BorshError$1(`Enum index: ${at} is out of range`);const[it,st]=nt.values[at],dt=deserializeField$1(tt,it,st,rt);return new et({[it]:dt})}throw new BorshError$1(`Unexpected schema kind: ${nt.kind} for ${et.constructor.name}`)}function deserialize$1(tt,et,rt,nt=BinaryReader$1){const at=new nt(rt),it=deserializeStruct$1(tt,et,at);if(at.offset<rt.length)throw new BorshError$1(`Unexpected ${rt.length-at.offset} bytes after deserialized data`);return it}var deserialize_1=lib$1.deserialize=deserialize$1;function deserializeUnchecked$1(tt,et,rt,nt=BinaryReader$1){const at=new nt(rt);return deserializeStruct$1(tt,et,at)}deserializeUnchecked_1=lib$1.deserializeUnchecked=deserializeUnchecked$1;var Layout$4={};Object.defineProperty(Layout$4,"__esModule",{value:!0});Layout$4.s16=Layout$4.s8=Layout$4.nu64be=Layout$4.u48be=Layout$4.u40be=Layout$4.u32be=Layout$4.u24be=Layout$4.u16be=nu64$1=Layout$4.nu64=Layout$4.u48=Layout$4.u40=u32$1=Layout$4.u32=Layout$4.u24=u16=Layout$4.u16=u8$1=Layout$4.u8=offset$1=Layout$4.offset=Layout$4.greedy=Layout$4.Constant=Layout$4.UTF8=Layout$4.CString=Layout$4.Blob=Layout$4.Boolean=Layout$4.BitField=Layout$4.BitStructure=Layout$4.VariantLayout=Layout$4.Union=Layout$4.UnionLayoutDiscriminator=Layout$4.UnionDiscriminator=Layout$4.Structure=Layout$4.Sequence=Layout$4.DoubleBE=Layout$4.Double=Layout$4.FloatBE=Layout$4.Float=Layout$4.NearInt64BE=Layout$4.NearInt64=Layout$4.NearUInt64BE=Layout$4.NearUInt64=Layout$4.IntBE=Layout$4.Int=Layout$4.UIntBE=Layout$4.UInt=Layout$4.OffsetLayout=Layout$4.GreedyCount=Layout$4.ExternalLayout=Layout$4.bindConstructorLayout=Layout$4.nameWithProperty=Layout$4.Layout=Layout$4.uint8ArrayToBuffer=Layout$4.checkUint8Array=void 0;Layout$4.constant=Layout$4.utf8=Layout$4.cstr=blob$1=Layout$4.blob=Layout$4.unionLayoutDiscriminator=Layout$4.union=seq=Layout$4.seq=Layout$4.bits=struct$1=Layout$4.struct=Layout$4.f64be=Layout$4.f64=Layout$4.f32be=Layout$4.f32=Layout$4.ns64be=Layout$4.s48be=Layout$4.s40be=Layout$4.s32be=Layout$4.s24be=Layout$4.s16be=ns64$1=Layout$4.ns64=Layout$4.s48=Layout$4.s40=Layout$4.s32=Layout$4.s24=void 0;const buffer_1=require$$0$2;function checkUint8Array(tt){if(!(tt instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Layout$4.checkUint8Array=checkUint8Array;function uint8ArrayToBuffer(tt){return checkUint8Array(tt),buffer_1.Buffer.from(tt.buffer,tt.byteOffset,tt.length)}Layout$4.uint8ArrayToBuffer=uint8ArrayToBuffer;let Layout$3=class{constructor(et,rt){if(!Number.isInteger(et))throw new TypeError("span must be an integer");this.span=et,this.property=rt}makeDestinationObject(){return{}}getSpan(et,rt){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(et){const rt=Object.create(this.constructor.prototype);return Object.assign(rt,this),rt.property=et,rt}fromArray(et){}};Layout$4.Layout=Layout$3;function nameWithProperty$2(tt,et){return et.property?tt+"["+et.property+"]":tt}Layout$4.nameWithProperty=nameWithProperty$2;function bindConstructorLayout$1(tt,et){if(typeof tt!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(tt,"layout_"))throw new Error("Class is already bound to a layout");if(!(et&&et instanceof Layout$3))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(et,"boundConstructor_"))throw new Error("layout is already bound to a constructor");tt.layout_=et,et.boundConstructor_=tt,et.makeDestinationObject=()=>new tt,Object.defineProperty(tt.prototype,"encode",{value(rt,nt){return et.encode(this,rt,nt)},writable:!0}),Object.defineProperty(tt,"decode",{value(rt,nt){return et.decode(rt,nt)},writable:!0})}Layout$4.bindConstructorLayout=bindConstructorLayout$1;let ExternalLayout$2=class extends Layout$3{isCount(){throw new Error("ExternalLayout is abstract")}};Layout$4.ExternalLayout=ExternalLayout$2;let GreedyCount$1=class extends ExternalLayout$2{constructor(et=1,rt){if(!Number.isInteger(et)||0>=et)throw new TypeError("elementSpan must be a (positive) integer");super(-1,rt),this.elementSpan=et}isCount(){return!0}decode(et,rt=0){checkUint8Array(et);const nt=et.length-rt;return Math.floor(nt/this.elementSpan)}encode(et,rt,nt){return 0}};Layout$4.GreedyCount=GreedyCount$1;let OffsetLayout$2=class extends ExternalLayout$2{constructor(et,rt=0,nt){if(!(et instanceof Layout$3))throw new TypeError("layout must be a Layout");if(!Number.isInteger(rt))throw new TypeError("offset must be integer or undefined");super(et.span,nt||et.property),this.layout=et,this.offset=rt}isCount(){return this.layout instanceof UInt$2||this.layout instanceof UIntBE$2}decode(et,rt=0){return this.layout.decode(et,rt+this.offset)}encode(et,rt,nt=0){return this.layout.encode(et,rt,nt+this.offset)}};Layout$4.OffsetLayout=OffsetLayout$2;let UInt$2=class extends Layout$3{constructor(et,rt){if(super(et,rt),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(et,rt=0){return uint8ArrayToBuffer(et).readUIntLE(rt,this.span)}encode(et,rt,nt=0){return uint8ArrayToBuffer(rt).writeUIntLE(et,nt,this.span),this.span}};Layout$4.UInt=UInt$2;let UIntBE$2=class extends Layout$3{constructor(et,rt){if(super(et,rt),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(et,rt=0){return uint8ArrayToBuffer(et).readUIntBE(rt,this.span)}encode(et,rt,nt=0){return uint8ArrayToBuffer(rt).writeUIntBE(et,nt,this.span),this.span}};Layout$4.UIntBE=UIntBE$2;let Int$1=class extends Layout$3{constructor(et,rt){if(super(et,rt),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(et,rt=0){return uint8ArrayToBuffer(et).readIntLE(rt,this.span)}encode(et,rt,nt=0){return uint8ArrayToBuffer(rt).writeIntLE(et,nt,this.span),this.span}};Layout$4.Int=Int$1;let IntBE$1=class extends Layout$3{constructor(et,rt){if(super(et,rt),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(et,rt=0){return uint8ArrayToBuffer(et).readIntBE(rt,this.span)}encode(et,rt,nt=0){return uint8ArrayToBuffer(rt).writeIntBE(et,nt,this.span),this.span}};Layout$4.IntBE=IntBE$1;const V2E32$2=Math.pow(2,32);function divmodInt64$2(tt){const et=Math.floor(tt/V2E32$2),rt=tt-et*V2E32$2;return{hi32:et,lo32:rt}}function roundedInt64$2(tt,et){return tt*V2E32$2+et}let NearUInt64$2=class extends Layout$3{constructor(et){super(8,et)}decode(et,rt=0){const nt=uint8ArrayToBuffer(et),at=nt.readUInt32LE(rt),it=nt.readUInt32LE(rt+4);return roundedInt64$2(it,at)}encode(et,rt,nt=0){const at=divmodInt64$2(et),it=uint8ArrayToBuffer(rt);return it.writeUInt32LE(at.lo32,nt),it.writeUInt32LE(at.hi32,nt+4),8}};Layout$4.NearUInt64=NearUInt64$2;let NearUInt64BE$1=class extends Layout$3{constructor(et){super(8,et)}decode(et,rt=0){const nt=uint8ArrayToBuffer(et),at=nt.readUInt32BE(rt),it=nt.readUInt32BE(rt+4);return roundedInt64$2(at,it)}encode(et,rt,nt=0){const at=divmodInt64$2(et),it=uint8ArrayToBuffer(rt);return it.writeUInt32BE(at.hi32,nt),it.writeUInt32BE(at.lo32,nt+4),8}};Layout$4.NearUInt64BE=NearUInt64BE$1;let NearInt64$2=class extends Layout$3{constructor(et){super(8,et)}decode(et,rt=0){const nt=uint8ArrayToBuffer(et),at=nt.readUInt32LE(rt),it=nt.readInt32LE(rt+4);return roundedInt64$2(it,at)}encode(et,rt,nt=0){const at=divmodInt64$2(et),it=uint8ArrayToBuffer(rt);return it.writeUInt32LE(at.lo32,nt),it.writeInt32LE(at.hi32,nt+4),8}};Layout$4.NearInt64=NearInt64$2;let NearInt64BE$1=class extends Layout$3{constructor(et){super(8,et)}decode(et,rt=0){const nt=uint8ArrayToBuffer(et),at=nt.readInt32BE(rt),it=nt.readUInt32BE(rt+4);return roundedInt64$2(at,it)}encode(et,rt,nt=0){const at=divmodInt64$2(et),it=uint8ArrayToBuffer(rt);return it.writeInt32BE(at.hi32,nt),it.writeUInt32BE(at.lo32,nt+4),8}};Layout$4.NearInt64BE=NearInt64BE$1;let Float$1=class extends Layout$3{constructor(et){super(4,et)}decode(et,rt=0){return uint8ArrayToBuffer(et).readFloatLE(rt)}encode(et,rt,nt=0){return uint8ArrayToBuffer(rt).writeFloatLE(et,nt),4}};Layout$4.Float=Float$1;let FloatBE$1=class extends Layout$3{constructor(et){super(4,et)}decode(et,rt=0){return uint8ArrayToBuffer(et).readFloatBE(rt)}encode(et,rt,nt=0){return uint8ArrayToBuffer(rt).writeFloatBE(et,nt),4}};Layout$4.FloatBE=FloatBE$1;let Double$1=class extends Layout$3{constructor(et){super(8,et)}decode(et,rt=0){return uint8ArrayToBuffer(et).readDoubleLE(rt)}encode(et,rt,nt=0){return uint8ArrayToBuffer(rt).writeDoubleLE(et,nt),8}};Layout$4.Double=Double$1;let DoubleBE$1=class extends Layout$3{constructor(et){super(8,et)}decode(et,rt=0){return uint8ArrayToBuffer(et).readDoubleBE(rt)}encode(et,rt,nt=0){return uint8ArrayToBuffer(rt).writeDoubleBE(et,nt),8}};Layout$4.DoubleBE=DoubleBE$1;let Sequence$1=class extends Layout$3{constructor(et,rt,nt){if(!(et instanceof Layout$3))throw new TypeError("elementLayout must be a Layout");if(!(rt instanceof ExternalLayout$2&&rt.isCount()||Number.isInteger(rt)&&0<=rt))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let at=-1;!(rt instanceof ExternalLayout$2)&&0<et.span&&(at=rt*et.span),super(at,nt),this.elementLayout=et,this.count=rt}getSpan(et,rt=0){if(0<=this.span)return this.span;let nt=0,at=this.count;if(at instanceof ExternalLayout$2&&(at=at.decode(et,rt)),0<this.elementLayout.span)nt=at*this.elementLayout.span;else{let it=0;for(;it<at;)nt+=this.elementLayout.getSpan(et,rt+nt),++it}return nt}decode(et,rt=0){const nt=[];let at=0,it=this.count;for(it instanceof ExternalLayout$2&&(it=it.decode(et,rt));at<it;)nt.push(this.elementLayout.decode(et,rt)),rt+=this.elementLayout.getSpan(et,rt),at+=1;return nt}encode(et,rt,nt=0){const at=this.elementLayout,it=et.reduce((st,dt)=>st+at.encode(dt,rt,nt+st),0);return this.count instanceof ExternalLayout$2&&this.count.encode(et.length,rt,nt),it}};Layout$4.Sequence=Sequence$1;let Structure$2=class extends Layout$3{constructor(et,rt,nt){if(!(Array.isArray(et)&&et.reduce((it,st)=>it&&st instanceof Layout$3,!0)))throw new TypeError("fields must be array of Layout instances");typeof rt=="boolean"&&nt===void 0&&(nt=rt,rt=void 0);for(const it of et)if(0>it.span&&it.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let at=-1;try{at=et.reduce((it,st)=>it+st.getSpan(),0)}catch{}super(at,rt),this.fields=et,this.decodePrefixes=!!nt}getSpan(et,rt=0){if(0<=this.span)return this.span;let nt=0;try{nt=this.fields.reduce((at,it)=>{const st=it.getSpan(et,rt);return rt+=st,at+st},0)}catch{throw new RangeError("indeterminate span")}return nt}decode(et,rt=0){checkUint8Array(et);const nt=this.makeDestinationObject();for(const at of this.fields)if(at.property!==void 0&&(nt[at.property]=at.decode(et,rt)),rt+=at.getSpan(et,rt),this.decodePrefixes&&et.length===rt)break;return nt}encode(et,rt,nt=0){const at=nt;let it=0,st=0;for(const dt of this.fields){let pt=dt.span;if(st=0<pt?pt:0,dt.property!==void 0){const mt=et[dt.property];mt!==void 0&&(st=dt.encode(mt,rt,nt),0>pt&&(pt=dt.getSpan(rt,nt)))}it=nt,nt+=pt}return it+st-at}fromArray(et){const rt=this.makeDestinationObject();for(const nt of this.fields)nt.property!==void 0&&0<et.length&&(rt[nt.property]=et.shift());return rt}layoutFor(et){if(typeof et!="string")throw new TypeError("property must be string");for(const rt of this.fields)if(rt.property===et)return rt}offsetOf(et){if(typeof et!="string")throw new TypeError("property must be string");let rt=0;for(const nt of this.fields){if(nt.property===et)return rt;0>nt.span?rt=-1:0<=rt&&(rt+=nt.span)}}};Layout$4.Structure=Structure$2;let UnionDiscriminator$2=class{constructor(et){this.property=et}decode(et,rt){throw new Error("UnionDiscriminator is abstract")}encode(et,rt,nt){throw new Error("UnionDiscriminator is abstract")}};Layout$4.UnionDiscriminator=UnionDiscriminator$2;let UnionLayoutDiscriminator$2=class extends UnionDiscriminator$2{constructor(et,rt){if(!(et instanceof ExternalLayout$2&&et.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(rt||et.property||"variant"),this.layout=et}decode(et,rt){return this.layout.decode(et,rt)}encode(et,rt,nt){return this.layout.encode(et,rt,nt)}};Layout$4.UnionLayoutDiscriminator=UnionLayoutDiscriminator$2;let Union$2=class extends Layout$3{constructor(et,rt,nt){let at;if(et instanceof UInt$2||et instanceof UIntBE$2)at=new UnionLayoutDiscriminator$2(new OffsetLayout$2(et));else if(et instanceof ExternalLayout$2&&et.isCount())at=new UnionLayoutDiscriminator$2(et);else if(et instanceof UnionDiscriminator$2)at=et;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(rt===void 0&&(rt=null),!(rt===null||rt instanceof Layout$3))throw new TypeError("defaultLayout must be null or a Layout");if(rt!==null){if(0>rt.span)throw new Error("defaultLayout must have constant span");rt.property===void 0&&(rt=rt.replicate("content"))}let it=-1;rt&&(it=rt.span,0<=it&&(et instanceof UInt$2||et instanceof UIntBE$2)&&(it+=at.layout.span)),super(it,nt),this.discriminator=at,this.usesPrefixDiscriminator=et instanceof UInt$2||et instanceof UIntBE$2,this.defaultLayout=rt,this.registry={};let st=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(dt){return st(dt)},this.configGetSourceVariant=function(dt){st=dt.bind(this)}}getSpan(et,rt=0){if(0<=this.span)return this.span;const nt=this.getVariant(et,rt);if(!nt)throw new Error("unable to determine span for unrecognized variant");return nt.getSpan(et,rt)}defaultGetSourceVariant(et){if(Object.prototype.hasOwnProperty.call(et,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(et,this.defaultLayout.property))return;const rt=this.registry[et[this.discriminator.property]];if(rt&&(!rt.layout||rt.property&&Object.prototype.hasOwnProperty.call(et,rt.property)))return rt}else for(const rt in this.registry){const nt=this.registry[rt];if(nt.property&&Object.prototype.hasOwnProperty.call(et,nt.property))return nt}throw new Error("unable to infer src variant")}decode(et,rt=0){let nt;const at=this.discriminator,it=at.decode(et,rt),st=this.registry[it];if(st===void 0){const dt=this.defaultLayout;let pt=0;this.usesPrefixDiscriminator&&(pt=at.layout.span),nt=this.makeDestinationObject(),nt[at.property]=it,nt[dt.property]=dt.decode(et,rt+pt)}else nt=st.decode(et,rt);return nt}encode(et,rt,nt=0){const at=this.getSourceVariant(et);if(at===void 0){const it=this.discriminator,st=this.defaultLayout;let dt=0;return this.usesPrefixDiscriminator&&(dt=it.layout.span),it.encode(et[it.property],rt,nt),dt+st.encode(et[st.property],rt,nt+dt)}return at.encode(et,rt,nt)}addVariant(et,rt,nt){const at=new VariantLayout$2(this,et,rt,nt);return this.registry[et]=at,at}getVariant(et,rt=0){let nt;return et instanceof Uint8Array?nt=this.discriminator.decode(et,rt):nt=et,this.registry[nt]}};Layout$4.Union=Union$2;let VariantLayout$2=class extends Layout$3{constructor(et,rt,nt,at){if(!(et instanceof Union$2))throw new TypeError("union must be a Union");if(!Number.isInteger(rt)||0>rt)throw new TypeError("variant must be a (non-negative) integer");if(typeof nt=="string"&&at===void 0&&(at=nt,nt=null),nt){if(!(nt instanceof Layout$3))throw new TypeError("layout must be a Layout");if(et.defaultLayout!==null&&0<=nt.span&&nt.span>et.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof at!="string")throw new TypeError("variant must have a String property")}let it=et.span;0>et.span&&(it=nt?nt.span:0,0<=it&&et.usesPrefixDiscriminator&&(it+=et.discriminator.layout.span)),super(it,at),this.union=et,this.variant=rt,this.layout=nt||null}getSpan(et,rt=0){if(0<=this.span)return this.span;let nt=0;this.union.usesPrefixDiscriminator&&(nt=this.union.discriminator.layout.span);let at=0;return this.layout&&(at=this.layout.getSpan(et,rt+nt)),nt+at}decode(et,rt=0){const nt=this.makeDestinationObject();if(this!==this.union.getVariant(et,rt))throw new Error("variant mismatch");let at=0;return this.union.usesPrefixDiscriminator&&(at=this.union.discriminator.layout.span),this.layout?nt[this.property]=this.layout.decode(et,rt+at):this.property?nt[this.property]=!0:this.union.usesPrefixDiscriminator&&(nt[this.union.discriminator.property]=this.variant),nt}encode(et,rt,nt=0){let at=0;if(this.union.usesPrefixDiscriminator&&(at=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(et,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,rt,nt);let it=at;if(this.layout&&(this.layout.encode(et[this.property],rt,nt+at),it+=this.layout.getSpan(rt,nt+at),0<=this.union.span&&it>this.union.span))throw new Error("encoded variant overruns containing union");return it}fromArray(et){if(this.layout)return this.layout.fromArray(et)}};Layout$4.VariantLayout=VariantLayout$2;function fixBitwiseResult$1(tt){return 0>tt&&(tt+=4294967296),tt}let BitStructure$1=class extends Layout$3{constructor(et,rt,nt){if(!(et instanceof UInt$2||et instanceof UIntBE$2))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof rt=="string"&&nt===void 0&&(nt=rt,rt=!1),4<et.span)throw new RangeError("word cannot exceed 32 bits");super(et.span,nt),this.word=et,this.msb=!!rt,this.fields=[];let at=0;this._packedSetValue=function(it){return at=fixBitwiseResult$1(it),this},this._packedGetValue=function(){return at}}decode(et,rt=0){const nt=this.makeDestinationObject(),at=this.word.decode(et,rt);this._packedSetValue(at);for(const it of this.fields)it.property!==void 0&&(nt[it.property]=it.decode(et));return nt}encode(et,rt,nt=0){const at=this.word.decode(rt,nt);this._packedSetValue(at);for(const it of this.fields)if(it.property!==void 0){const st=et[it.property];st!==void 0&&it.encode(st)}return this.word.encode(this._packedGetValue(),rt,nt)}addField(et,rt){const nt=new BitField$1(this,et,rt);return this.fields.push(nt),nt}addBoolean(et){const rt=new Boolean$2(this,et);return this.fields.push(rt),rt}fieldFor(et){if(typeof et!="string")throw new TypeError("property must be string");for(const rt of this.fields)if(rt.property===et)return rt}};Layout$4.BitStructure=BitStructure$1;let BitField$1=class{constructor(et,rt,nt){if(!(et instanceof BitStructure$1))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(rt)||0>=rt)throw new TypeError("bits must be positive integer");const at=8*et.span,it=et.fields.reduce((st,dt)=>st+dt.bits,0);if(rt+it>at)throw new Error("bits too long for span remainder ("+(at-it)+" of "+at+" remain)");this.container=et,this.bits=rt,this.valueMask=(1<<rt)-1,rt===32&&(this.valueMask=4294967295),this.start=it,this.container.msb&&(this.start=at-it-rt),this.wordMask=fixBitwiseResult$1(this.valueMask<<this.start),this.property=nt}decode(et,rt){const nt=this.container._packedGetValue();return fixBitwiseResult$1(nt&this.wordMask)>>>this.start}encode(et){if(typeof et!="number"||!Number.isInteger(et)||et!==fixBitwiseResult$1(et&this.valueMask))throw new TypeError(nameWithProperty$2("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const rt=this.container._packedGetValue(),nt=fixBitwiseResult$1(et<<this.start);this.container._packedSetValue(fixBitwiseResult$1(rt&~this.wordMask)|nt)}};Layout$4.BitField=BitField$1;let Boolean$2=class extends BitField$1{constructor(et,rt){super(et,1,rt)}decode(et,rt){return!!super.decode(et,rt)}encode(et){typeof et=="boolean"&&(et=+et),super.encode(et)}};Layout$4.Boolean=Boolean$2;let Blob$3=class extends Layout$3{constructor(et,rt){if(!(et instanceof ExternalLayout$2&&et.isCount()||Number.isInteger(et)&&0<=et))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let nt=-1;et instanceof ExternalLayout$2||(nt=et),super(nt,rt),this.length=et}getSpan(et,rt){let nt=this.span;return 0>nt&&(nt=this.length.decode(et,rt)),nt}decode(et,rt=0){let nt=this.span;return 0>nt&&(nt=this.length.decode(et,rt)),uint8ArrayToBuffer(et).slice(rt,rt+nt)}encode(et,rt,nt){let at=this.length;if(this.length instanceof ExternalLayout$2&&(at=et.length),!(et instanceof Uint8Array&&at===et.length))throw new TypeError(nameWithProperty$2("Blob.encode",this)+" requires (length "+at+") Uint8Array as src");if(nt+at>rt.length)throw new RangeError("encoding overruns Uint8Array");const it=uint8ArrayToBuffer(et);return uint8ArrayToBuffer(rt).write(it.toString("hex"),nt,at,"hex"),this.length instanceof ExternalLayout$2&&this.length.encode(at,rt,nt),at}};Layout$4.Blob=Blob$3;let CString$1=class extends Layout$3{constructor(et){super(-1,et)}getSpan(et,rt=0){checkUint8Array(et);let nt=rt;for(;nt<et.length&&et[nt]!==0;)nt+=1;return 1+nt-rt}decode(et,rt=0){const nt=this.getSpan(et,rt);return uint8ArrayToBuffer(et).slice(rt,rt+nt-1).toString("utf-8")}encode(et,rt,nt=0){typeof et!="string"&&(et=String(et));const at=buffer_1.Buffer.from(et,"utf8"),it=at.length;if(nt+it>rt.length)throw new RangeError("encoding overruns Buffer");const st=uint8ArrayToBuffer(rt);return at.copy(st,nt),st[nt+it]=0,it+1}};Layout$4.CString=CString$1;let UTF8$1=class extends Layout$3{constructor(et,rt){if(typeof et=="string"&&rt===void 0&&(rt=et,et=void 0),et===void 0)et=-1;else if(!Number.isInteger(et))throw new TypeError("maxSpan must be an integer");super(-1,rt),this.maxSpan=et}getSpan(et,rt=0){return checkUint8Array(et),et.length-rt}decode(et,rt=0){const nt=this.getSpan(et,rt);if(0<=this.maxSpan&&this.maxSpan<nt)throw new RangeError("text length exceeds maxSpan");return uint8ArrayToBuffer(et).slice(rt,rt+nt).toString("utf-8")}encode(et,rt,nt=0){typeof et!="string"&&(et=String(et));const at=buffer_1.Buffer.from(et,"utf8"),it=at.length;if(0<=this.maxSpan&&this.maxSpan<it)throw new RangeError("text length exceeds maxSpan");if(nt+it>rt.length)throw new RangeError("encoding overruns Buffer");return at.copy(uint8ArrayToBuffer(rt),nt),it}};Layout$4.UTF8=UTF8$1;let Constant$1=class extends Layout$3{constructor(et,rt){super(0,rt),this.value=et}decode(et,rt){return this.value}encode(et,rt,nt){return 0}};Layout$4.Constant=Constant$1;Layout$4.greedy=(tt,et)=>new GreedyCount$1(tt,et);var offset$1=Layout$4.offset=(tt,et,rt)=>new OffsetLayout$2(tt,et,rt),u8$1=Layout$4.u8=tt=>new UInt$2(1,tt),u16=Layout$4.u16=tt=>new UInt$2(2,tt);Layout$4.u24=tt=>new UInt$2(3,tt);var u32$1=Layout$4.u32=tt=>new UInt$2(4,tt);Layout$4.u40=tt=>new UInt$2(5,tt);Layout$4.u48=tt=>new UInt$2(6,tt);var nu64$1=Layout$4.nu64=tt=>new NearUInt64$2(tt);Layout$4.u16be=tt=>new UIntBE$2(2,tt);Layout$4.u24be=tt=>new UIntBE$2(3,tt);Layout$4.u32be=tt=>new UIntBE$2(4,tt);Layout$4.u40be=tt=>new UIntBE$2(5,tt);Layout$4.u48be=tt=>new UIntBE$2(6,tt);Layout$4.nu64be=tt=>new NearUInt64BE$1(tt);Layout$4.s8=tt=>new Int$1(1,tt);Layout$4.s16=tt=>new Int$1(2,tt);Layout$4.s24=tt=>new Int$1(3,tt);Layout$4.s32=tt=>new Int$1(4,tt);Layout$4.s40=tt=>new Int$1(5,tt);Layout$4.s48=tt=>new Int$1(6,tt);var ns64$1=Layout$4.ns64=tt=>new NearInt64$2(tt);Layout$4.s16be=tt=>new IntBE$1(2,tt);Layout$4.s24be=tt=>new IntBE$1(3,tt);Layout$4.s32be=tt=>new IntBE$1(4,tt);Layout$4.s40be=tt=>new IntBE$1(5,tt);Layout$4.s48be=tt=>new IntBE$1(6,tt);Layout$4.ns64be=tt=>new NearInt64BE$1(tt);Layout$4.f32=tt=>new Float$1(tt);Layout$4.f32be=tt=>new FloatBE$1(tt);Layout$4.f64=tt=>new Double$1(tt);Layout$4.f64be=tt=>new DoubleBE$1(tt);var struct$1=Layout$4.struct=(tt,et,rt)=>new Structure$2(tt,et,rt);Layout$4.bits=(tt,et,rt)=>new BitStructure$1(tt,et,rt);var seq=Layout$4.seq=(tt,et,rt)=>new Sequence$1(tt,et,rt);Layout$4.union=(tt,et,rt)=>new Union$2(tt,et,rt);Layout$4.unionLayoutDiscriminator=(tt,et)=>new UnionLayoutDiscriminator$2(tt,et);var blob$1=Layout$4.blob=(tt,et)=>new Blob$3(tt,et);Layout$4.cstr=tt=>new CString$1(tt);Layout$4.utf8=(tt,et)=>new UTF8$1(tt,et);Layout$4.constant=(tt,et)=>new Constant$1(tt,et);var browser$e={};Object.defineProperty(browser$e,"__esModule",{value:!0});function toBigIntLE(tt){{const et=Buffer.from(tt);et.reverse();const rt=et.toString("hex");return rt.length===0?BigInt(0):BigInt(`0x${rt}`)}}var toBigIntLE_1=browser$e.toBigIntLE=toBigIntLE;function toBigIntBE(tt){{const et=tt.toString("hex");return et.length===0?BigInt(0):BigInt(`0x${et}`)}}browser$e.toBigIntBE=toBigIntBE;function toBufferLE(tt,et){{const rt=tt.toString(16),nt=Buffer.from(rt.padStart(et*2,"0").slice(0,et*2),"hex");return nt.reverse(),nt}}var toBufferLE_1=browser$e.toBufferLE=toBufferLE;function toBufferBE(tt,et){{const rt=tt.toString(16);return Buffer.from(rt.padStart(et*2,"0").slice(0,et*2),"hex")}}browser$e.toBufferBE=toBufferBE;let StructError$1=class extends TypeError{constructor(et,rt){let nt;const{message:at,explanation:it,...st}=et,{path:dt}=et,pt=dt.length===0?at:`At path: ${dt.join(".")} -- ${at}`;super(it??pt),it!=null&&(this.cause=pt),Object.assign(this,st),this.name=this.constructor.name,this.failures=()=>nt??(nt=[et,...rt()])}};function isIterable$1(tt){return isObject$1(tt)&&typeof tt[Symbol.iterator]=="function"}function isObject$1(tt){return typeof tt=="object"&&tt!=null}function print$1(tt){return typeof tt=="symbol"?tt.toString():typeof tt=="string"?JSON.stringify(tt):`${tt}`}function shiftIterator$1(tt){const{done:et,value:rt}=tt.next();return et?void 0:rt}function toFailure$1(tt,et,rt,nt){if(tt===!0)return;tt===!1?tt={}:typeof tt=="string"&&(tt={message:tt});const{path:at,branch:it}=et,{type:st}=rt,{refinement:dt,message:pt=`Expected a value of type \`${st}\`${dt?` with refinement \`${dt}\``:""}, but received: \`${print$1(nt)}\``}=tt;return{value:nt,type:st,refinement:dt,key:at[at.length-1],path:at,branch:it,...tt,message:pt}}function*toFailures$1(tt,et,rt,nt){isIterable$1(tt)||(tt=[tt]);for(const at of tt){const it=toFailure$1(at,et,rt,nt);it&&(yield it)}}function*run$1(tt,et,rt={}){const{path:nt=[],branch:at=[tt],coerce:it=!1,mask:st=!1}=rt,dt={path:nt,branch:at};if(it&&(tt=et.coercer(tt,dt),st&&et.type!=="type"&&isObject$1(et.schema)&&isObject$1(tt)&&!Array.isArray(tt)))for(const mt in tt)et.schema[mt]===void 0&&delete tt[mt];let pt="valid";for(const mt of et.validator(tt,dt))mt.explanation=rt.message,pt="not_valid",yield[mt,void 0];for(let[mt,yt,Rt]of et.entries(tt,dt)){const Tt=run$1(yt,Rt,{path:mt===void 0?nt:[...nt,mt],branch:mt===void 0?at:[...at,yt],coerce:it,mask:st,message:rt.message});for(const At of Tt)At[0]?(pt=At[0].refinement!=null?"not_refined":"not_valid",yield[At[0],void 0]):it&&(yt=At[1],mt===void 0?tt=yt:tt instanceof Map?tt.set(mt,yt):tt instanceof Set?tt.add(yt):isObject$1(tt)&&(yt!==void 0||mt in tt)&&(tt[mt]=yt))}if(pt!=="not_valid")for(const mt of et.refiner(tt,dt))mt.explanation=rt.message,pt="not_refined",yield[mt,void 0];pt==="valid"&&(yield[void 0,tt])}let Struct$2=class{constructor(et){const{type:rt,schema:nt,validator:at,refiner:it,coercer:st=pt=>pt,entries:dt=function*(){}}=et;this.type=rt,this.schema=nt,this.entries=dt,this.coercer=st,at?this.validator=(pt,mt)=>{const yt=at(pt,mt);return toFailures$1(yt,mt,this,pt)}:this.validator=()=>[],it?this.refiner=(pt,mt)=>{const yt=it(pt,mt);return toFailures$1(yt,mt,this,pt)}:this.refiner=()=>[]}assert(et,rt){return assert$2(et,this,rt)}create(et,rt){return create$2(et,this,rt)}is(et){return is$6(et,this)}mask(et,rt){return mask$1(et,this,rt)}validate(et,rt={}){return validate$2(et,this,rt)}};function assert$2(tt,et,rt){const nt=validate$2(tt,et,{message:rt});if(nt[0])throw nt[0]}function create$2(tt,et,rt){const nt=validate$2(tt,et,{coerce:!0,message:rt});if(nt[0])throw nt[0];return nt[1]}function mask$1(tt,et,rt){const nt=validate$2(tt,et,{coerce:!0,mask:!0,message:rt});if(nt[0])throw nt[0];return nt[1]}function is$6(tt,et){return!validate$2(tt,et)[0]}function validate$2(tt,et,rt={}){const nt=run$1(tt,et,rt),at=shiftIterator$1(nt);return at[0]?[new StructError$1(at[0],function*(){for(const st of nt)st[0]&&(yield st[0])}),void 0]:[void 0,at[1]]}function define$1(tt,et){return new Struct$2({type:tt,schema:null,validator:et})}function any$2(){return define$1("any",()=>!0)}function array$1(tt){return new Struct$2({type:"array",schema:tt,*entries(et){if(tt&&Array.isArray(et))for(const[rt,nt]of et.entries())yield[rt,nt,tt]},coercer(et){return Array.isArray(et)?et.slice():et},validator(et){return Array.isArray(et)||`Expected an array value, but received: ${print$1(et)}`}})}function boolean$1(){return define$1("boolean",tt=>typeof tt=="boolean")}function instance(tt){return define$1("instance",et=>et instanceof tt||`Expected a \`${tt.name}\` instance, but received: ${print$1(et)}`)}function literal$1(tt){const et=print$1(tt),rt=typeof tt;return new Struct$2({type:"literal",schema:rt==="string"||rt==="number"||rt==="boolean"?tt:null,validator(nt){return nt===tt||`Expected the literal \`${et}\`, but received: ${print$1(nt)}`}})}function never(){return define$1("never",()=>!1)}function nullable$1(tt){return new Struct$2({...tt,validator:(et,rt)=>et===null||tt.validator(et,rt),refiner:(et,rt)=>et===null||tt.refiner(et,rt)})}function number$1(){return define$1("number",tt=>typeof tt=="number"&&!isNaN(tt)||`Expected a number, but received: ${print$1(tt)}`)}function optional$1(tt){return new Struct$2({...tt,validator:(et,rt)=>et===void 0||tt.validator(et,rt),refiner:(et,rt)=>et===void 0||tt.refiner(et,rt)})}function record(tt,et){return new Struct$2({type:"record",schema:null,*entries(rt){if(isObject$1(rt))for(const nt in rt){const at=rt[nt];yield[nt,nt,tt],yield[nt,at,et]}},validator(rt){return isObject$1(rt)||`Expected an object, but received: ${print$1(rt)}`}})}function string$1(){return define$1("string",tt=>typeof tt=="string"||`Expected a string, but received: ${print$1(tt)}`)}function tuple(tt){const et=never();return new Struct$2({type:"tuple",schema:null,*entries(rt){if(Array.isArray(rt)){const nt=Math.max(tt.length,rt.length);for(let at=0;at<nt;at++)yield[at,rt[at],tt[at]||et]}},validator(rt){return Array.isArray(rt)||`Expected an array, but received: ${print$1(rt)}`}})}function type$8(tt){const et=Object.keys(tt);return new Struct$2({type:"type",schema:tt,*entries(rt){if(isObject$1(rt))for(const nt of et)yield[nt,rt[nt],tt[nt]]},validator(rt){return isObject$1(rt)||`Expected an object, but received: ${print$1(rt)}`},coercer(rt){return isObject$1(rt)?{...rt}:rt}})}function union$3(tt){const et=tt.map(rt=>rt.type).join(" | ");return new Struct$2({type:"union",schema:null,coercer(rt){for(const nt of tt){const[at,it]=nt.validate(rt,{coerce:!0});if(!at)return it}return rt},validator(rt,nt){const at=[];for(const it of tt){const[...st]=run$1(rt,it,nt),[dt]=st;if(dt[0])for(const[pt]of st)pt&&at.push(pt);else return[]}return[`Expected the value to satisfy a union of \`${et}\`, but received: ${print$1(rt)}`,...at]}})}function unknown$1(){return define$1("unknown",()=>!0)}function coerce$1(tt,et,rt){return new Struct$2({...tt,coercer:(nt,at)=>is$6(nt,et)?tt.coercer(rt(nt,at),at):tt.coercer(nt,at)})}var getRandomValues$2,rnds8$2=new Uint8Array(16);function rng$2(){if(!getRandomValues$2&&(getRandomValues$2=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues$2))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues$2(rnds8$2)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate$1(tt){return typeof tt=="string"&&REGEX.test(tt)}var byteToHex$3=[];for(var i$1=0;i$1<256;++i$1)byteToHex$3.push((i$1+256).toString(16).substr(1));function stringify$1(tt){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,rt=(byteToHex$3[tt[et+0]]+byteToHex$3[tt[et+1]]+byteToHex$3[tt[et+2]]+byteToHex$3[tt[et+3]]+"-"+byteToHex$3[tt[et+4]]+byteToHex$3[tt[et+5]]+"-"+byteToHex$3[tt[et+6]]+byteToHex$3[tt[et+7]]+"-"+byteToHex$3[tt[et+8]]+byteToHex$3[tt[et+9]]+"-"+byteToHex$3[tt[et+10]]+byteToHex$3[tt[et+11]]+byteToHex$3[tt[et+12]]+byteToHex$3[tt[et+13]]+byteToHex$3[tt[et+14]]+byteToHex$3[tt[et+15]]).toLowerCase();if(!validate$1(rt))throw TypeError("Stringified UUID is invalid");return rt}var _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(tt,et,rt){var nt=et&&rt||0,at=et||new Array(16);tt=tt||{};var it=tt.node||_nodeId,st=tt.clockseq!==void 0?tt.clockseq:_clockseq;if(it==null||st==null){var dt=tt.random||(tt.rng||rng$2)();it==null&&(it=_nodeId=[dt[0]|1,dt[1],dt[2],dt[3],dt[4],dt[5]]),st==null&&(st=_clockseq=(dt[6]<<8|dt[7])&16383)}var pt=tt.msecs!==void 0?tt.msecs:Date.now(),mt=tt.nsecs!==void 0?tt.nsecs:_lastNSecs+1,yt=pt-_lastMSecs+(mt-_lastNSecs)/1e4;if(yt<0&&tt.clockseq===void 0&&(st=st+1&16383),(yt<0||pt>_lastMSecs)&&tt.nsecs===void 0&&(mt=0),mt>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=pt,_lastNSecs=mt,_clockseq=st,pt+=122192928e5;var Rt=((pt&268435455)*1e4+mt)%4294967296;at[nt++]=Rt>>>24&255,at[nt++]=Rt>>>16&255,at[nt++]=Rt>>>8&255,at[nt++]=Rt&255;var Tt=pt/4294967296*1e4&268435455;at[nt++]=Tt>>>8&255,at[nt++]=Tt&255,at[nt++]=Tt>>>24&15|16,at[nt++]=Tt>>>16&255,at[nt++]=st>>>8|128,at[nt++]=st&255;for(var At=0;At<6;++At)at[nt+At]=it[At];return et||stringify$1(at)}function parse(tt){if(!validate$1(tt))throw TypeError("Invalid UUID");var et,rt=new Uint8Array(16);return rt[0]=(et=parseInt(tt.slice(0,8),16))>>>24,rt[1]=et>>>16&255,rt[2]=et>>>8&255,rt[3]=et&255,rt[4]=(et=parseInt(tt.slice(9,13),16))>>>8,rt[5]=et&255,rt[6]=(et=parseInt(tt.slice(14,18),16))>>>8,rt[7]=et&255,rt[8]=(et=parseInt(tt.slice(19,23),16))>>>8,rt[9]=et&255,rt[10]=(et=parseInt(tt.slice(24,36),16))/1099511627776&255,rt[11]=et/4294967296&255,rt[12]=et>>>24&255,rt[13]=et>>>16&255,rt[14]=et>>>8&255,rt[15]=et&255,rt}function stringToBytes(tt){tt=unescape(encodeURIComponent(tt));for(var et=[],rt=0;rt<tt.length;++rt)et.push(tt.charCodeAt(rt));return et}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(tt,et,rt){function nt(at,it,st,dt){if(typeof at=="string"&&(at=stringToBytes(at)),typeof it=="string"&&(it=parse(it)),it.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var pt=new Uint8Array(16+at.length);if(pt.set(it),pt.set(at,it.length),pt=rt(pt),pt[6]=pt[6]&15|et,pt[8]=pt[8]&63|128,st){dt=dt||0;for(var mt=0;mt<16;++mt)st[dt+mt]=pt[mt];return st}return stringify$1(pt)}try{nt.name=tt}catch{}return nt.DNS=DNS,nt.URL=URL$1,nt}function md5$1(tt){if(typeof tt=="string"){var et=unescape(encodeURIComponent(tt));tt=new Uint8Array(et.length);for(var rt=0;rt<et.length;++rt)tt[rt]=et.charCodeAt(rt)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(tt),tt.length*8))}function md5ToHexEncodedArray(tt){for(var et=[],rt=tt.length*32,nt="0123456789abcdef",at=0;at<rt;at+=8){var it=tt[at>>5]>>>at%32&255,st=parseInt(nt.charAt(it>>>4&15)+nt.charAt(it&15),16);et.push(st)}return et}function getOutputLength(tt){return(tt+64>>>9<<4)+14+1}function wordsToMd5(tt,et){tt[et>>5]|=128<<et%32,tt[getOutputLength(et)-1]=et;for(var rt=1732584193,nt=-271733879,at=-1732584194,it=271733878,st=0;st<tt.length;st+=16){var dt=rt,pt=nt,mt=at,yt=it;rt=md5ff(rt,nt,at,it,tt[st],7,-680876936),it=md5ff(it,rt,nt,at,tt[st+1],12,-389564586),at=md5ff(at,it,rt,nt,tt[st+2],17,606105819),nt=md5ff(nt,at,it,rt,tt[st+3],22,-1044525330),rt=md5ff(rt,nt,at,it,tt[st+4],7,-176418897),it=md5ff(it,rt,nt,at,tt[st+5],12,1200080426),at=md5ff(at,it,rt,nt,tt[st+6],17,-1473231341),nt=md5ff(nt,at,it,rt,tt[st+7],22,-45705983),rt=md5ff(rt,nt,at,it,tt[st+8],7,1770035416),it=md5ff(it,rt,nt,at,tt[st+9],12,-1958414417),at=md5ff(at,it,rt,nt,tt[st+10],17,-42063),nt=md5ff(nt,at,it,rt,tt[st+11],22,-1990404162),rt=md5ff(rt,nt,at,it,tt[st+12],7,1804603682),it=md5ff(it,rt,nt,at,tt[st+13],12,-40341101),at=md5ff(at,it,rt,nt,tt[st+14],17,-1502002290),nt=md5ff(nt,at,it,rt,tt[st+15],22,1236535329),rt=md5gg(rt,nt,at,it,tt[st+1],5,-165796510),it=md5gg(it,rt,nt,at,tt[st+6],9,-1069501632),at=md5gg(at,it,rt,nt,tt[st+11],14,643717713),nt=md5gg(nt,at,it,rt,tt[st],20,-373897302),rt=md5gg(rt,nt,at,it,tt[st+5],5,-701558691),it=md5gg(it,rt,nt,at,tt[st+10],9,38016083),at=md5gg(at,it,rt,nt,tt[st+15],14,-660478335),nt=md5gg(nt,at,it,rt,tt[st+4],20,-405537848),rt=md5gg(rt,nt,at,it,tt[st+9],5,568446438),it=md5gg(it,rt,nt,at,tt[st+14],9,-1019803690),at=md5gg(at,it,rt,nt,tt[st+3],14,-187363961),nt=md5gg(nt,at,it,rt,tt[st+8],20,1163531501),rt=md5gg(rt,nt,at,it,tt[st+13],5,-1444681467),it=md5gg(it,rt,nt,at,tt[st+2],9,-51403784),at=md5gg(at,it,rt,nt,tt[st+7],14,1735328473),nt=md5gg(nt,at,it,rt,tt[st+12],20,-1926607734),rt=md5hh(rt,nt,at,it,tt[st+5],4,-378558),it=md5hh(it,rt,nt,at,tt[st+8],11,-2022574463),at=md5hh(at,it,rt,nt,tt[st+11],16,1839030562),nt=md5hh(nt,at,it,rt,tt[st+14],23,-35309556),rt=md5hh(rt,nt,at,it,tt[st+1],4,-1530992060),it=md5hh(it,rt,nt,at,tt[st+4],11,1272893353),at=md5hh(at,it,rt,nt,tt[st+7],16,-155497632),nt=md5hh(nt,at,it,rt,tt[st+10],23,-1094730640),rt=md5hh(rt,nt,at,it,tt[st+13],4,681279174),it=md5hh(it,rt,nt,at,tt[st],11,-358537222),at=md5hh(at,it,rt,nt,tt[st+3],16,-722521979),nt=md5hh(nt,at,it,rt,tt[st+6],23,76029189),rt=md5hh(rt,nt,at,it,tt[st+9],4,-640364487),it=md5hh(it,rt,nt,at,tt[st+12],11,-421815835),at=md5hh(at,it,rt,nt,tt[st+15],16,530742520),nt=md5hh(nt,at,it,rt,tt[st+2],23,-995338651),rt=md5ii(rt,nt,at,it,tt[st],6,-198630844),it=md5ii(it,rt,nt,at,tt[st+7],10,1126891415),at=md5ii(at,it,rt,nt,tt[st+14],15,-1416354905),nt=md5ii(nt,at,it,rt,tt[st+5],21,-57434055),rt=md5ii(rt,nt,at,it,tt[st+12],6,1700485571),it=md5ii(it,rt,nt,at,tt[st+3],10,-1894986606),at=md5ii(at,it,rt,nt,tt[st+10],15,-1051523),nt=md5ii(nt,at,it,rt,tt[st+1],21,-2054922799),rt=md5ii(rt,nt,at,it,tt[st+8],6,1873313359),it=md5ii(it,rt,nt,at,tt[st+15],10,-30611744),at=md5ii(at,it,rt,nt,tt[st+6],15,-1560198380),nt=md5ii(nt,at,it,rt,tt[st+13],21,1309151649),rt=md5ii(rt,nt,at,it,tt[st+4],6,-145523070),it=md5ii(it,rt,nt,at,tt[st+11],10,-1120210379),at=md5ii(at,it,rt,nt,tt[st+2],15,718787259),nt=md5ii(nt,at,it,rt,tt[st+9],21,-343485551),rt=safeAdd(rt,dt),nt=safeAdd(nt,pt),at=safeAdd(at,mt),it=safeAdd(it,yt)}return[rt,nt,at,it]}function bytesToWords(tt){if(tt.length===0)return[];for(var et=tt.length*8,rt=new Uint32Array(getOutputLength(et)),nt=0;nt<et;nt+=8)rt[nt>>5]|=(tt[nt/8]&255)<<nt%32;return rt}function safeAdd(tt,et){var rt=(tt&65535)+(et&65535),nt=(tt>>16)+(et>>16)+(rt>>16);return nt<<16|rt&65535}function bitRotateLeft(tt,et){return tt<<et|tt>>>32-et}function md5cmn(tt,et,rt,nt,at,it){return safeAdd(bitRotateLeft(safeAdd(safeAdd(et,tt),safeAdd(nt,it)),at),rt)}function md5ff(tt,et,rt,nt,at,it,st){return md5cmn(et&rt|~et&nt,tt,et,at,it,st)}function md5gg(tt,et,rt,nt,at,it,st){return md5cmn(et&nt|rt&~nt,tt,et,at,it,st)}function md5hh(tt,et,rt,nt,at,it,st){return md5cmn(et^rt^nt,tt,et,at,it,st)}function md5ii(tt,et,rt,nt,at,it,st){return md5cmn(rt^(et|~nt),tt,et,at,it,st)}var v3=v35("v3",48,md5$1);const v3$1=v3;function v4$2(tt,et,rt){tt=tt||{};var nt=tt.random||(tt.rng||rng$2)();if(nt[6]=nt[6]&15|64,nt[8]=nt[8]&63|128,et){rt=rt||0;for(var at=0;at<16;++at)et[rt+at]=nt[at];return et}return stringify$1(nt)}function f$2(tt,et,rt,nt){switch(tt){case 0:return et&rt^~et&nt;case 1:return et^rt^nt;case 2:return et&rt^et&nt^rt&nt;case 3:return et^rt^nt}}function ROTL(tt,et){return tt<<et|tt>>>32-et}function sha1$1(tt){var et=[1518500249,1859775393,2400959708,3395469782],rt=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof tt=="string"){var nt=unescape(encodeURIComponent(tt));tt=[];for(var at=0;at<nt.length;++at)tt.push(nt.charCodeAt(at))}else Array.isArray(tt)||(tt=Array.prototype.slice.call(tt));tt.push(128);for(var it=tt.length/4+2,st=Math.ceil(it/16),dt=new Array(st),pt=0;pt<st;++pt){for(var mt=new Uint32Array(16),yt=0;yt<16;++yt)mt[yt]=tt[pt*64+yt*4]<<24|tt[pt*64+yt*4+1]<<16|tt[pt*64+yt*4+2]<<8|tt[pt*64+yt*4+3];dt[pt]=mt}dt[st-1][14]=(tt.length-1)*8/Math.pow(2,32),dt[st-1][14]=Math.floor(dt[st-1][14]),dt[st-1][15]=(tt.length-1)*8&4294967295;for(var Rt=0;Rt<st;++Rt){for(var Tt=new Uint32Array(80),At=0;At<16;++At)Tt[At]=dt[Rt][At];for(var xt=16;xt<80;++xt)Tt[xt]=ROTL(Tt[xt-3]^Tt[xt-8]^Tt[xt-14]^Tt[xt-16],1);for(var Nt=rt[0],Ct=rt[1],Ot=rt[2],kt=rt[3],Pt=rt[4],Dt=0;Dt<80;++Dt){var Gt=Math.floor(Dt/20),jt=ROTL(Nt,5)+f$2(Gt,Ct,Ot,kt)+Pt+et[Gt]+Tt[Dt]>>>0;Pt=kt,kt=Ot,Ot=ROTL(Ct,30)>>>0,Ct=Nt,Nt=jt}rt[0]=rt[0]+Nt>>>0,rt[1]=rt[1]+Ct>>>0,rt[2]=rt[2]+Ot>>>0,rt[3]=rt[3]+kt>>>0,rt[4]=rt[4]+Pt>>>0}return[rt[0]>>24&255,rt[0]>>16&255,rt[0]>>8&255,rt[0]&255,rt[1]>>24&255,rt[1]>>16&255,rt[1]>>8&255,rt[1]&255,rt[2]>>24&255,rt[2]>>16&255,rt[2]>>8&255,rt[2]&255,rt[3]>>24&255,rt[3]>>16&255,rt[3]>>8&255,rt[3]&255,rt[4]>>24&255,rt[4]>>16&255,rt[4]>>8&255,rt[4]&255]}var v5=v35("v5",80,sha1$1);const v5$1=v5,nil="00000000-0000-0000-0000-000000000000";function version$1(tt){if(!validate$1(tt))throw TypeError("Invalid UUID");return parseInt(tt.substr(14,1),16)}const esmBrowser=Object.freeze(Object.defineProperty({__proto__:null,NIL:nil,parse,stringify:stringify$1,v1,v3:v3$1,v4:v4$2,v5:v5$1,validate:validate$1,version:version$1},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(esmBrowser),uuid$1=require$$0$1.v4,generateRequest$1=function(tt,et,rt,nt){if(typeof tt!="string")throw new TypeError(tt+" must be a string");nt=nt||{};const at=typeof nt.version=="number"?nt.version:2;if(at!==1&&at!==2)throw new TypeError(at+" must be 1 or 2");const it={method:tt};if(at===2&&(it.jsonrpc="2.0"),et){if(typeof et!="object"&&!Array.isArray(et))throw new TypeError(et+" must be an object, array or omitted");it.params=et}if(typeof rt>"u"){const st=typeof nt.generator=="function"?nt.generator:function(){return uuid$1()};it.id=st(it,nt)}else at===2&&rt===null?nt.notificationIdNull&&(it.id=null):it.id=rt;return it};var generateRequest_1=generateRequest$1;const uuid=require$$0$1.v4,generateRequest=generateRequest_1,ClientBrowser=function(tt,et){if(!(this instanceof ClientBrowser))return new ClientBrowser(tt,et);et||(et={}),this.options={reviver:typeof et.reviver<"u"?et.reviver:null,replacer:typeof et.replacer<"u"?et.replacer:null,generator:typeof et.generator<"u"?et.generator:function(){return uuid()},version:typeof et.version<"u"?et.version:2,notificationIdNull:typeof et.notificationIdNull=="boolean"?et.notificationIdNull:!1},this.callServer=tt};var browser$d=ClientBrowser;ClientBrowser.prototype.request=function(tt,et,rt,nt){const at=this;let it=null;const st=Array.isArray(tt)&&typeof et=="function";if(this.options.version===1&&st)throw new TypeError("JSON-RPC 1.0 does not support batching");if(st||!st&&tt&&typeof tt=="object"&&typeof et=="function")nt=et,it=tt;else{typeof rt=="function"&&(nt=rt,rt=void 0);const mt=typeof nt=="function";try{it=generateRequest(tt,et,rt,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(yt){if(mt)return nt(yt);throw yt}if(!mt)return it}let pt;try{pt=JSON.stringify(it,this.options.replacer)}catch(mt){return nt(mt)}return this.callServer(pt,function(mt,yt){at._parseResponse(mt,yt,nt)}),it};ClientBrowser.prototype._parseResponse=function(tt,et,rt){if(tt){rt(tt);return}if(!et)return rt();let nt;try{nt=JSON.parse(et,this.options.reviver)}catch(at){return rt(at)}if(rt.length===3)if(Array.isArray(nt)){const at=function(st){return typeof st.error<"u"},it=function(st){return!at(st)};return rt(null,nt.filter(at),nt.filter(it))}else return rt(null,nt.error,nt.result);rt(null,nt)};const RpcClient=getDefaultExportFromCjs$5(browser$d);var eventemitter3$1={exports:{}};(function(tt){var et=Object.prototype.hasOwnProperty,rt="~";function nt(){}Object.create&&(nt.prototype=Object.create(null),new nt().__proto__||(rt=!1));function at(pt,mt,yt){this.fn=pt,this.context=mt,this.once=yt||!1}function it(pt,mt,yt,Rt,Tt){if(typeof yt!="function")throw new TypeError("The listener must be a function");var At=new at(yt,Rt||pt,Tt),xt=rt?rt+mt:mt;return pt._events[xt]?pt._events[xt].fn?pt._events[xt]=[pt._events[xt],At]:pt._events[xt].push(At):(pt._events[xt]=At,pt._eventsCount++),pt}function st(pt,mt){--pt._eventsCount===0?pt._events=new nt:delete pt._events[mt]}function dt(){this._events=new nt,this._eventsCount=0}dt.prototype.eventNames=function(){var mt=[],yt,Rt;if(this._eventsCount===0)return mt;for(Rt in yt=this._events)et.call(yt,Rt)&&mt.push(rt?Rt.slice(1):Rt);return Object.getOwnPropertySymbols?mt.concat(Object.getOwnPropertySymbols(yt)):mt},dt.prototype.listeners=function(mt){var yt=rt?rt+mt:mt,Rt=this._events[yt];if(!Rt)return[];if(Rt.fn)return[Rt.fn];for(var Tt=0,At=Rt.length,xt=new Array(At);Tt<At;Tt++)xt[Tt]=Rt[Tt].fn;return xt},dt.prototype.listenerCount=function(mt){var yt=rt?rt+mt:mt,Rt=this._events[yt];return Rt?Rt.fn?1:Rt.length:0},dt.prototype.emit=function(mt,yt,Rt,Tt,At,xt){var Nt=rt?rt+mt:mt;if(!this._events[Nt])return!1;var Ct=this._events[Nt],Ot=arguments.length,kt,Pt;if(Ct.fn){switch(Ct.once&&this.removeListener(mt,Ct.fn,void 0,!0),Ot){case 1:return Ct.fn.call(Ct.context),!0;case 2:return Ct.fn.call(Ct.context,yt),!0;case 3:return Ct.fn.call(Ct.context,yt,Rt),!0;case 4:return Ct.fn.call(Ct.context,yt,Rt,Tt),!0;case 5:return Ct.fn.call(Ct.context,yt,Rt,Tt,At),!0;case 6:return Ct.fn.call(Ct.context,yt,Rt,Tt,At,xt),!0}for(Pt=1,kt=new Array(Ot-1);Pt<Ot;Pt++)kt[Pt-1]=arguments[Pt];Ct.fn.apply(Ct.context,kt)}else{var Dt=Ct.length,Gt;for(Pt=0;Pt<Dt;Pt++)switch(Ct[Pt].once&&this.removeListener(mt,Ct[Pt].fn,void 0,!0),Ot){case 1:Ct[Pt].fn.call(Ct[Pt].context);break;case 2:Ct[Pt].fn.call(Ct[Pt].context,yt);break;case 3:Ct[Pt].fn.call(Ct[Pt].context,yt,Rt);break;case 4:Ct[Pt].fn.call(Ct[Pt].context,yt,Rt,Tt);break;default:if(!kt)for(Gt=1,kt=new Array(Ot-1);Gt<Ot;Gt++)kt[Gt-1]=arguments[Gt];Ct[Pt].fn.apply(Ct[Pt].context,kt)}}return!0},dt.prototype.on=function(mt,yt,Rt){return it(this,mt,yt,Rt,!1)},dt.prototype.once=function(mt,yt,Rt){return it(this,mt,yt,Rt,!0)},dt.prototype.removeListener=function(mt,yt,Rt,Tt){var At=rt?rt+mt:mt;if(!this._events[At])return this;if(!yt)return st(this,At),this;var xt=this._events[At];if(xt.fn)xt.fn===yt&&(!Tt||xt.once)&&(!Rt||xt.context===Rt)&&st(this,At);else{for(var Nt=0,Ct=[],Ot=xt.length;Nt<Ot;Nt++)(xt[Nt].fn!==yt||Tt&&!xt[Nt].once||Rt&&xt[Nt].context!==Rt)&&Ct.push(xt[Nt]);Ct.length?this._events[At]=Ct.length===1?Ct[0]:Ct:st(this,At)}return this},dt.prototype.removeAllListeners=function(mt){var yt;return mt?(yt=rt?rt+mt:mt,this._events[yt]&&st(this,yt)):(this._events=new nt,this._eventsCount=0),this},dt.prototype.off=dt.prototype.removeListener,dt.prototype.addListener=dt.prototype.on,dt.prefixed=rt,dt.EventEmitter=dt,tt.exports=dt})(eventemitter3$1);var eventemitter3Exports$1=eventemitter3$1.exports;const EventEmitter$1=getDefaultExportFromCjs$5(eventemitter3Exports$1);var WebSocketBrowserImpl=class extends EventEmitter$1{constructor(et,rt,nt){super();Un(this,"socket");this.socket=new window.WebSocket(et,nt),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=at=>this.emit("message",at.data),this.socket.onerror=at=>this.emit("error",at),this.socket.onclose=at=>{this.emit("close",at.code,at.reason)}}send(et,rt,nt){const at=nt||rt;try{this.socket.send(et),at()}catch(it){at(it)}}close(et,rt){this.socket.close(et,rt)}addEventListener(et,rt,nt){this.socket.addEventListener(et,rt,nt)}};function WebSocket$1(tt,et){return new WebSocketBrowserImpl(tt,et)}var DefaultDataPack=class{encode(tt){return JSON.stringify(tt)}decode(tt){return JSON.parse(tt)}},CommonClient=class extends EventEmitter$1{constructor(et,rt="ws://localhost:8080",{autoconnect:nt=!0,reconnect:at=!0,reconnect_interval:it=1e3,max_reconnects:st=5,...dt}={},pt,mt){super();Un(this,"address");Un(this,"rpc_id");Un(this,"queue");Un(this,"options");Un(this,"autoconnect");Un(this,"ready");Un(this,"reconnect");Un(this,"reconnect_timer_id");Un(this,"reconnect_interval");Un(this,"max_reconnects");Un(this,"rest_options");Un(this,"current_reconnects");Un(this,"generate_request_id");Un(this,"socket");Un(this,"webSocketFactory");Un(this,"dataPack");this.webSocketFactory=et,this.queue={},this.rpc_id=0,this.address=rt,this.autoconnect=nt,this.ready=!1,this.reconnect=at,this.reconnect_timer_id=void 0,this.reconnect_interval=it,this.max_reconnects=st,this.rest_options=dt,this.current_reconnects=0,this.generate_request_id=pt||(()=>++this.rpc_id),mt?this.dataPack=mt:this.dataPack=new DefaultDataPack,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(et,rt,nt,at){return!at&&typeof nt=="object"&&(at=nt,nt=null),new Promise((it,st)=>{if(!this.ready)return st(new Error("socket not ready"));const dt=this.generate_request_id(et,rt),pt={jsonrpc:"2.0",method:et,params:rt||void 0,id:dt};this.socket.send(this.dataPack.encode(pt),at,mt=>{if(mt)return st(mt);this.queue[dt]={promise:[it,st]},nt&&(this.queue[dt].timeout=setTimeout(()=>{delete this.queue[dt],st(new Error("reply timeout"))},nt))})})}async login(et){const rt=await this.call("rpc.login",et);if(!rt)throw new Error("authentication failed");return rt}async listMethods(){return await this.call("__listMethods")}notify(et,rt){return new Promise((nt,at)=>{if(!this.ready)return at(new Error("socket not ready"));const it={jsonrpc:"2.0",method:et,params:rt};this.socket.send(this.dataPack.encode(it),st=>{if(st)return at(st);nt()})})}async subscribe(et){typeof et=="string"&&(et=[et]);const rt=await this.call("rpc.on",et);if(typeof et=="string"&&rt[et]!=="ok")throw new Error("Failed subscribing to an event '"+et+"' with: "+rt[et]);return rt}async unsubscribe(et){typeof et=="string"&&(et=[et]);const rt=await this.call("rpc.off",et);if(typeof et=="string"&&rt[et]!=="ok")throw new Error("Failed unsubscribing from an event with: "+rt);return rt}close(et,rt){this.socket.close(et||1e3,rt)}setAutoReconnect(et){this.reconnect=et}setReconnectInterval(et){this.reconnect_interval=et}setMaxReconnects(et){this.max_reconnects=et}_connect(et,rt){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(et,rt),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:nt})=>{nt instanceof ArrayBuffer&&(nt=Buffer$1.from(nt).toString());try{nt=this.dataPack.decode(nt)}catch{return}if(nt.notification&&this.listeners(nt.notification).length){if(!Object.keys(nt.params).length)return this.emit(nt.notification);const at=[nt.notification];if(nt.params.constructor===Object)at.push(nt.params);else for(let it=0;it<nt.params.length;it++)at.push(nt.params[it]);return Promise.resolve().then(()=>{this.emit.apply(this,at)})}if(!this.queue[nt.id])return nt.method?Promise.resolve().then(()=>{this.emit(nt.method,nt==null?void 0:nt.params)}):void 0;"error"in nt=="result"in nt&&this.queue[nt.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[nt.id].timeout&&clearTimeout(this.queue[nt.id].timeout),nt.error?this.queue[nt.id].promise[1](nt.error):this.queue[nt.id].promise[0](nt.result),delete this.queue[nt.id]}),this.socket.addEventListener("error",nt=>this.emit("error",nt)),this.socket.addEventListener("close",({code:nt,reason:at})=>{this.ready&&setTimeout(()=>this.emit("close",nt,at),0),this.ready=!1,this.socket=void 0,nt!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(et,rt),this.reconnect_interval)))})}};const SHA3_PI=[],SHA3_ROTL=[],_SHA3_IOTA=[],_0n$1=BigInt(0),_1n$2=BigInt(1),_2n$1=BigInt(2),_7n=BigInt(7),_256n=BigInt(256),_0x71n=BigInt(113);for(let tt=0,et=_1n$2,rt=1,nt=0;tt<24;tt++){[rt,nt]=[nt,(2*rt+3*nt)%5],SHA3_PI.push(2*(5*nt+rt)),SHA3_ROTL.push((tt+1)*(tt+2)/2%64);let at=_0n$1;for(let it=0;it<7;it++)et=(et<<_1n$2^(et>>_7n)*_0x71n)%_256n,et&_2n$1&&(at^=_1n$2<<(_1n$2<<BigInt(it))-_1n$2);_SHA3_IOTA.push(at)}const[SHA3_IOTA_H,SHA3_IOTA_L]=split$1(_SHA3_IOTA,!0),rotlH=(tt,et,rt)=>rt>32?rotlBH(tt,et,rt):rotlSH(tt,et,rt),rotlL=(tt,et,rt)=>rt>32?rotlBL(tt,et,rt):rotlSL(tt,et,rt);function keccakP(tt,et=24){const rt=new Uint32Array(10);for(let nt=24-et;nt<24;nt++){for(let st=0;st<10;st++)rt[st]=tt[st]^tt[st+10]^tt[st+20]^tt[st+30]^tt[st+40];for(let st=0;st<10;st+=2){const dt=(st+8)%10,pt=(st+2)%10,mt=rt[pt],yt=rt[pt+1],Rt=rotlH(mt,yt,1)^rt[dt],Tt=rotlL(mt,yt,1)^rt[dt+1];for(let At=0;At<50;At+=10)tt[st+At]^=Rt,tt[st+At+1]^=Tt}let at=tt[2],it=tt[3];for(let st=0;st<24;st++){const dt=SHA3_ROTL[st],pt=rotlH(at,it,dt),mt=rotlL(at,it,dt),yt=SHA3_PI[st];at=tt[yt],it=tt[yt+1],tt[yt]=pt,tt[yt+1]=mt}for(let st=0;st<50;st+=10){for(let dt=0;dt<10;dt++)rt[dt]=tt[st+dt];for(let dt=0;dt<10;dt++)tt[st+dt]^=~rt[(dt+2)%10]&rt[(dt+4)%10]}tt[0]^=SHA3_IOTA_H[nt],tt[1]^=SHA3_IOTA_L[nt]}rt.fill(0)}class Keccak extends Hash{constructor(et,rt,nt,at=!1,it=24){if(super(),this.blockLen=et,this.suffix=rt,this.outputLen=nt,this.enableXOF=at,this.rounds=it,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,number$2(nt),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=u32$2(this.state)}keccak(){isLE||byteSwap32(this.state32),keccakP(this.state32,this.rounds),isLE||byteSwap32(this.state32),this.posOut=0,this.pos=0}update(et){exists(this);const{blockLen:rt,state:nt}=this;et=toBytes(et);const at=et.length;for(let it=0;it<at;){const st=Math.min(rt-this.pos,at-it);for(let dt=0;dt<st;dt++)nt[this.pos++]^=et[it++];this.pos===rt&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:et,suffix:rt,pos:nt,blockLen:at}=this;et[nt]^=rt,rt&128&&nt===at-1&&this.keccak(),et[at-1]^=128,this.keccak()}writeInto(et){exists(this,!1),bytes(et),this.finish();const rt=this.state,{blockLen:nt}=this;for(let at=0,it=et.length;at<it;){this.posOut>=nt&&this.keccak();const st=Math.min(nt-this.posOut,it-at);et.set(rt.subarray(this.posOut,this.posOut+st),at),this.posOut+=st,at+=st}return et}xofInto(et){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(et)}xof(et){return number$2(et),this.xofInto(new Uint8Array(et))}digestInto(et){if(output(et,this),this.finished)throw new Error("digest() was already called");return this.writeInto(et),this.destroy(),et}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(et){const{blockLen:rt,suffix:nt,outputLen:at,rounds:it,enableXOF:st}=this;return et||(et=new Keccak(rt,nt,at,st,it)),et.state32.set(this.state32),et.pos=this.pos,et.posOut=this.posOut,et.finished=this.finished,et.rounds=it,et.suffix=nt,et.outputLen=at,et.enableXOF=st,et.destroyed=this.destroyed,et}}const gen=(tt,et,rt)=>wrapConstructor(()=>new Keccak(et,tt,rt)),keccak_256=gen(1,136,256/8);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts(tt){const et=validateBasic(tt);validateObject(et,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:rt,Fp:nt,a:at}=et;if(rt){if(!nt.eql(at,nt.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof rt!="object"||typeof rt.beta!="bigint"||typeof rt.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...et})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER={Err:class extends Error{constructor(et=""){super(et)}},_parseInt(tt){const{Err:et}=DER;if(tt.length<2||tt[0]!==2)throw new et("Invalid signature integer tag");const rt=tt[1],nt=tt.subarray(2,rt+2);if(!rt||nt.length!==rt)throw new et("Invalid signature integer: wrong length");if(nt[0]&128)throw new et("Invalid signature integer: negative");if(nt[0]===0&&!(nt[1]&128))throw new et("Invalid signature integer: unnecessary leading zero");return{d:b2n(nt),l:tt.subarray(rt+2)}},toSig(tt){const{Err:et}=DER,rt=typeof tt=="string"?h2b(tt):tt;abytes(rt);let nt=rt.length;if(nt<2||rt[0]!=48)throw new et("Invalid signature tag");if(rt[1]!==nt-2)throw new et("Invalid signature: incorrect length");const{d:at,l:it}=DER._parseInt(rt.subarray(2)),{d:st,l:dt}=DER._parseInt(it);if(dt.length)throw new et("Invalid signature: left bytes after parsing");return{r:at,s:st}},hexFromSig(tt){const et=mt=>Number.parseInt(mt[0],16)&8?"00"+mt:mt,rt=mt=>{const yt=mt.toString(16);return yt.length&1?`0${yt}`:yt},nt=et(rt(tt.s)),at=et(rt(tt.r)),it=nt.length/2,st=at.length/2,dt=rt(it),pt=rt(st);return`30${rt(st+it+4)}02${pt}${at}02${dt}${nt}`}},_0n=BigInt(0),_1n$1=BigInt(1);BigInt(2);const _3n=BigInt(3);BigInt(4);function weierstrassPoints(tt){const et=validatePointOpts(tt),{Fp:rt}=et,nt=et.toBytes||((xt,Nt,Ct)=>{const Ot=Nt.toAffine();return concatBytes(Uint8Array.from([4]),rt.toBytes(Ot.x),rt.toBytes(Ot.y))}),at=et.fromBytes||(xt=>{const Nt=xt.subarray(1),Ct=rt.fromBytes(Nt.subarray(0,rt.BYTES)),Ot=rt.fromBytes(Nt.subarray(rt.BYTES,2*rt.BYTES));return{x:Ct,y:Ot}});function it(xt){const{a:Nt,b:Ct}=et,Ot=rt.sqr(xt),kt=rt.mul(Ot,xt);return rt.add(rt.add(kt,rt.mul(xt,Nt)),Ct)}if(!rt.eql(rt.sqr(et.Gy),it(et.Gx)))throw new Error("bad generator point: equation left != right");function st(xt){return typeof xt=="bigint"&&_0n<xt&&xt<et.n}function dt(xt){if(!st(xt))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function pt(xt){const{allowedPrivateKeyLengths:Nt,nByteLength:Ct,wrapPrivateKey:Ot,n:kt}=et;if(Nt&&typeof xt!="bigint"){if(isBytes(xt)&&(xt=bytesToHex(xt)),typeof xt!="string"||!Nt.includes(xt.length))throw new Error("Invalid key");xt=xt.padStart(Ct*2,"0")}let Pt;try{Pt=typeof xt=="bigint"?xt:bytesToNumberBE(ensureBytes("private key",xt,Ct))}catch{throw new Error(`private key must be ${Ct} bytes, hex or bigint, not ${typeof xt}`)}return Ot&&(Pt=mod(Pt,kt)),dt(Pt),Pt}const mt=new Map;function yt(xt){if(!(xt instanceof Rt))throw new Error("ProjectivePoint expected")}class Rt{constructor(Nt,Ct,Ot){if(this.px=Nt,this.py=Ct,this.pz=Ot,Nt==null||!rt.isValid(Nt))throw new Error("x required");if(Ct==null||!rt.isValid(Ct))throw new Error("y required");if(Ot==null||!rt.isValid(Ot))throw new Error("z required")}static fromAffine(Nt){const{x:Ct,y:Ot}=Nt||{};if(!Nt||!rt.isValid(Ct)||!rt.isValid(Ot))throw new Error("invalid affine point");if(Nt instanceof Rt)throw new Error("projective point not allowed");const kt=Pt=>rt.eql(Pt,rt.ZERO);return kt(Ct)&&kt(Ot)?Rt.ZERO:new Rt(Ct,Ot,rt.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(Nt){const Ct=rt.invertBatch(Nt.map(Ot=>Ot.pz));return Nt.map((Ot,kt)=>Ot.toAffine(Ct[kt])).map(Rt.fromAffine)}static fromHex(Nt){const Ct=Rt.fromAffine(at(ensureBytes("pointHex",Nt)));return Ct.assertValidity(),Ct}static fromPrivateKey(Nt){return Rt.BASE.multiply(pt(Nt))}_setWindowSize(Nt){this._WINDOW_SIZE=Nt,mt.delete(this)}assertValidity(){if(this.is0()){if(et.allowInfinityPoint&&!rt.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:Nt,y:Ct}=this.toAffine();if(!rt.isValid(Nt)||!rt.isValid(Ct))throw new Error("bad point: x or y not FE");const Ot=rt.sqr(Ct),kt=it(Nt);if(!rt.eql(Ot,kt))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:Nt}=this.toAffine();if(rt.isOdd)return!rt.isOdd(Nt);throw new Error("Field doesn't support isOdd")}equals(Nt){yt(Nt);const{px:Ct,py:Ot,pz:kt}=this,{px:Pt,py:Dt,pz:Gt}=Nt,jt=rt.eql(rt.mul(Ct,Gt),rt.mul(Pt,kt)),Yt=rt.eql(rt.mul(Ot,Gt),rt.mul(Dt,kt));return jt&&Yt}negate(){return new Rt(this.px,rt.neg(this.py),this.pz)}double(){const{a:Nt,b:Ct}=et,Ot=rt.mul(Ct,_3n),{px:kt,py:Pt,pz:Dt}=this;let Gt=rt.ZERO,jt=rt.ZERO,Yt=rt.ZERO,tr=rt.mul(kt,kt),er=rt.mul(Pt,Pt),lr=rt.mul(Dt,Dt),It=rt.mul(kt,Pt);return It=rt.add(It,It),Yt=rt.mul(kt,Dt),Yt=rt.add(Yt,Yt),Gt=rt.mul(Nt,Yt),jt=rt.mul(Ot,lr),jt=rt.add(Gt,jt),Gt=rt.sub(er,jt),jt=rt.add(er,jt),jt=rt.mul(Gt,jt),Gt=rt.mul(It,Gt),Yt=rt.mul(Ot,Yt),lr=rt.mul(Nt,lr),It=rt.sub(tr,lr),It=rt.mul(Nt,It),It=rt.add(It,Yt),Yt=rt.add(tr,tr),tr=rt.add(Yt,tr),tr=rt.add(tr,lr),tr=rt.mul(tr,It),jt=rt.add(jt,tr),lr=rt.mul(Pt,Dt),lr=rt.add(lr,lr),tr=rt.mul(lr,It),Gt=rt.sub(Gt,tr),Yt=rt.mul(lr,er),Yt=rt.add(Yt,Yt),Yt=rt.add(Yt,Yt),new Rt(Gt,jt,Yt)}add(Nt){yt(Nt);const{px:Ct,py:Ot,pz:kt}=this,{px:Pt,py:Dt,pz:Gt}=Nt;let jt=rt.ZERO,Yt=rt.ZERO,tr=rt.ZERO;const er=et.a,lr=rt.mul(et.b,_3n);let It=rt.mul(Ct,Pt),ot=rt.mul(Ot,Dt),ft=rt.mul(kt,Gt),ht=rt.add(Ct,Ot),vt=rt.add(Pt,Dt);ht=rt.mul(ht,vt),vt=rt.add(It,ot),ht=rt.sub(ht,vt),vt=rt.add(Ct,kt);let wt=rt.add(Pt,Gt);return vt=rt.mul(vt,wt),wt=rt.add(It,ft),vt=rt.sub(vt,wt),wt=rt.add(Ot,kt),jt=rt.add(Dt,Gt),wt=rt.mul(wt,jt),jt=rt.add(ot,ft),wt=rt.sub(wt,jt),tr=rt.mul(er,vt),jt=rt.mul(lr,ft),tr=rt.add(jt,tr),jt=rt.sub(ot,tr),tr=rt.add(ot,tr),Yt=rt.mul(jt,tr),ot=rt.add(It,It),ot=rt.add(ot,It),ft=rt.mul(er,ft),vt=rt.mul(lr,vt),ot=rt.add(ot,ft),ft=rt.sub(It,ft),ft=rt.mul(er,ft),vt=rt.add(vt,ft),It=rt.mul(ot,vt),Yt=rt.add(Yt,It),It=rt.mul(wt,vt),jt=rt.mul(ht,jt),jt=rt.sub(jt,It),It=rt.mul(ht,ot),tr=rt.mul(wt,tr),tr=rt.add(tr,It),new Rt(jt,Yt,tr)}subtract(Nt){return this.add(Nt.negate())}is0(){return this.equals(Rt.ZERO)}wNAF(Nt){return At.wNAFCached(this,mt,Nt,Ct=>{const Ot=rt.invertBatch(Ct.map(kt=>kt.pz));return Ct.map((kt,Pt)=>kt.toAffine(Ot[Pt])).map(Rt.fromAffine)})}multiplyUnsafe(Nt){const Ct=Rt.ZERO;if(Nt===_0n)return Ct;if(dt(Nt),Nt===_1n$1)return this;const{endo:Ot}=et;if(!Ot)return At.unsafeLadder(this,Nt);let{k1neg:kt,k1:Pt,k2neg:Dt,k2:Gt}=Ot.splitScalar(Nt),jt=Ct,Yt=Ct,tr=this;for(;Pt>_0n||Gt>_0n;)Pt&_1n$1&&(jt=jt.add(tr)),Gt&_1n$1&&(Yt=Yt.add(tr)),tr=tr.double(),Pt>>=_1n$1,Gt>>=_1n$1;return kt&&(jt=jt.negate()),Dt&&(Yt=Yt.negate()),Yt=new Rt(rt.mul(Yt.px,Ot.beta),Yt.py,Yt.pz),jt.add(Yt)}multiply(Nt){dt(Nt);let Ct=Nt,Ot,kt;const{endo:Pt}=et;if(Pt){const{k1neg:Dt,k1:Gt,k2neg:jt,k2:Yt}=Pt.splitScalar(Ct);let{p:tr,f:er}=this.wNAF(Gt),{p:lr,f:It}=this.wNAF(Yt);tr=At.constTimeNegate(Dt,tr),lr=At.constTimeNegate(jt,lr),lr=new Rt(rt.mul(lr.px,Pt.beta),lr.py,lr.pz),Ot=tr.add(lr),kt=er.add(It)}else{const{p:Dt,f:Gt}=this.wNAF(Ct);Ot=Dt,kt=Gt}return Rt.normalizeZ([Ot,kt])[0]}multiplyAndAddUnsafe(Nt,Ct,Ot){const kt=Rt.BASE,Pt=(Gt,jt)=>jt===_0n||jt===_1n$1||!Gt.equals(kt)?Gt.multiplyUnsafe(jt):Gt.multiply(jt),Dt=Pt(this,Ct).add(Pt(Nt,Ot));return Dt.is0()?void 0:Dt}toAffine(Nt){const{px:Ct,py:Ot,pz:kt}=this,Pt=this.is0();Nt==null&&(Nt=Pt?rt.ONE:rt.inv(kt));const Dt=rt.mul(Ct,Nt),Gt=rt.mul(Ot,Nt),jt=rt.mul(kt,Nt);if(Pt)return{x:rt.ZERO,y:rt.ZERO};if(!rt.eql(jt,rt.ONE))throw new Error("invZ was invalid");return{x:Dt,y:Gt}}isTorsionFree(){const{h:Nt,isTorsionFree:Ct}=et;if(Nt===_1n$1)return!0;if(Ct)return Ct(Rt,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:Nt,clearCofactor:Ct}=et;return Nt===_1n$1?this:Ct?Ct(Rt,this):this.multiplyUnsafe(et.h)}toRawBytes(Nt=!0){return this.assertValidity(),nt(Rt,this,Nt)}toHex(Nt=!0){return bytesToHex(this.toRawBytes(Nt))}}Rt.BASE=new Rt(et.Gx,et.Gy,rt.ONE),Rt.ZERO=new Rt(rt.ZERO,rt.ONE,rt.ZERO);const Tt=et.nBitLength,At=wNAF(Rt,et.endo?Math.ceil(Tt/2):Tt);return{CURVE:et,ProjectivePoint:Rt,normPrivateKeyToScalar:pt,weierstrassEquation:it,isWithinCurveOrder:st}}function validateOpts(tt){const et=validateBasic(tt);return validateObject(et,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...et})}function weierstrass(tt){const et=validateOpts(tt),{Fp:rt,n:nt}=et,at=rt.BYTES+1,it=2*rt.BYTES+1;function st(vt){return _0n<vt&&vt<rt.ORDER}function dt(vt){return mod(vt,nt)}function pt(vt){return invert$1(vt,nt)}const{ProjectivePoint:mt,normPrivateKeyToScalar:yt,weierstrassEquation:Rt,isWithinCurveOrder:Tt}=weierstrassPoints({...et,toBytes(vt,wt,bt){const $t=wt.toAffine(),Et=rt.toBytes($t.x),ct=concatBytes;return bt?ct(Uint8Array.from([wt.hasEvenY()?2:3]),Et):ct(Uint8Array.from([4]),Et,rt.toBytes($t.y))},fromBytes(vt){const wt=vt.length,bt=vt[0],$t=vt.subarray(1);if(wt===at&&(bt===2||bt===3)){const Et=bytesToNumberBE($t);if(!st(Et))throw new Error("Point is not on curve");const ct=Rt(Et);let St;try{St=rt.sqrt(ct)}catch(Ut){const Kt=Ut instanceof Error?": "+Ut.message:"";throw new Error("Point is not on curve"+Kt)}const Mt=(St&_1n$1)===_1n$1;return(bt&1)===1!==Mt&&(St=rt.neg(St)),{x:Et,y:St}}else if(wt===it&&bt===4){const Et=rt.fromBytes($t.subarray(0,rt.BYTES)),ct=rt.fromBytes($t.subarray(rt.BYTES,2*rt.BYTES));return{x:Et,y:ct}}else throw new Error(`Point of length ${wt} was invalid. Expected ${at} compressed bytes or ${it} uncompressed bytes`)}}),At=vt=>bytesToHex(numberToBytesBE(vt,et.nByteLength));function xt(vt){const wt=nt>>_1n$1;return vt>wt}function Nt(vt){return xt(vt)?dt(-vt):vt}const Ct=(vt,wt,bt)=>bytesToNumberBE(vt.slice(wt,bt));class Ot{constructor(wt,bt,$t){this.r=wt,this.s=bt,this.recovery=$t,this.assertValidity()}static fromCompact(wt){const bt=et.nByteLength;return wt=ensureBytes("compactSignature",wt,bt*2),new Ot(Ct(wt,0,bt),Ct(wt,bt,2*bt))}static fromDER(wt){const{r:bt,s:$t}=DER.toSig(ensureBytes("DER",wt));return new Ot(bt,$t)}assertValidity(){if(!Tt(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!Tt(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(wt){return new Ot(this.r,this.s,wt)}recoverPublicKey(wt){const{r:bt,s:$t,recovery:Et}=this,ct=Yt(ensureBytes("msgHash",wt));if(Et==null||![0,1,2,3].includes(Et))throw new Error("recovery id invalid");const St=Et===2||Et===3?bt+et.n:bt;if(St>=rt.ORDER)throw new Error("recovery id 2 or 3 invalid");const Mt=Et&1?"03":"02",Lt=mt.fromHex(Mt+At(St)),Ut=pt(St),Kt=dt(-ct*Ut),Ht=dt($t*Ut),Ft=mt.BASE.multiplyAndAddUnsafe(Lt,Kt,Ht);if(!Ft)throw new Error("point at infinify");return Ft.assertValidity(),Ft}hasHighS(){return xt(this.s)}normalizeS(){return this.hasHighS()?new Ot(this.r,dt(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return At(this.r)+At(this.s)}}const kt={isValidPrivateKey(vt){try{return yt(vt),!0}catch{return!1}},normPrivateKeyToScalar:yt,randomPrivateKey:()=>{const vt=getMinHashLength(et.n);return mapHashToField(et.randomBytes(vt),et.n)},precompute(vt=8,wt=mt.BASE){return wt._setWindowSize(vt),wt.multiply(BigInt(3)),wt}};function Pt(vt,wt=!0){return mt.fromPrivateKey(vt).toRawBytes(wt)}function Dt(vt){const wt=isBytes(vt),bt=typeof vt=="string",$t=(wt||bt)&&vt.length;return wt?$t===at||$t===it:bt?$t===2*at||$t===2*it:vt instanceof mt}function Gt(vt,wt,bt=!0){if(Dt(vt))throw new Error("first arg must be private key");if(!Dt(wt))throw new Error("second arg must be public key");return mt.fromHex(wt).multiply(yt(vt)).toRawBytes(bt)}const jt=et.bits2int||function(vt){const wt=bytesToNumberBE(vt),bt=vt.length*8-et.nBitLength;return bt>0?wt>>BigInt(bt):wt},Yt=et.bits2int_modN||function(vt){return dt(jt(vt))},tr=bitMask(et.nBitLength);function er(vt){if(typeof vt!="bigint")throw new Error("bigint expected");if(!(_0n<=vt&&vt<tr))throw new Error(`bigint expected < 2^${et.nBitLength}`);return numberToBytesBE(vt,et.nByteLength)}function lr(vt,wt,bt=It){if(["recovered","canonical"].some(ir=>ir in bt))throw new Error("sign() legacy options not supported");const{hash:$t,randomBytes:Et}=et;let{lowS:ct,prehash:St,extraEntropy:Mt}=bt;ct==null&&(ct=!0),vt=ensureBytes("msgHash",vt),St&&(vt=ensureBytes("prehashed msgHash",$t(vt)));const Lt=Yt(vt),Ut=yt(wt),Kt=[er(Ut),er(Lt)];if(Mt!=null&&Mt!==!1){const ir=Mt===!0?Et(rt.BYTES):Mt;Kt.push(ensureBytes("extraEntropy",ir))}const Ht=concatBytes(...Kt),Ft=Lt;function zt(ir){const sr=jt(ir);if(!Tt(sr))return;const ar=pt(sr),Vt=mt.BASE.multiply(sr).toAffine(),fr=dt(Vt.x);if(fr===_0n)return;const Gr=dt(ar*dt(Ft+fr*Ut));if(Gr===_0n)return;let ur=(Vt.x===fr?0:2)|Number(Vt.y&_1n$1),pr=Gr;return ct&&xt(Gr)&&(pr=Nt(Gr),ur^=1),new Ot(fr,pr,ur)}return{seed:Ht,k2sig:zt}}const It={lowS:et.lowS,prehash:!1},ot={lowS:et.lowS,prehash:!1};function ft(vt,wt,bt=It){const{seed:$t,k2sig:Et}=lr(vt,wt,bt),ct=et;return createHmacDrbg(ct.hash.outputLen,ct.nByteLength,ct.hmac)($t,Et)}mt.BASE._setWindowSize(8);function ht(vt,wt,bt,$t=ot){var Vt;const Et=vt;if(wt=ensureBytes("msgHash",wt),bt=ensureBytes("publicKey",bt),"strict"in $t)throw new Error("options.strict was renamed to lowS");const{lowS:ct,prehash:St}=$t;let Mt,Lt;try{if(typeof Et=="string"||isBytes(Et))try{Mt=Ot.fromDER(Et)}catch(fr){if(!(fr instanceof DER.Err))throw fr;Mt=Ot.fromCompact(Et)}else if(typeof Et=="object"&&typeof Et.r=="bigint"&&typeof Et.s=="bigint"){const{r:fr,s:Gr}=Et;Mt=new Ot(fr,Gr)}else throw new Error("PARSE");Lt=mt.fromHex(bt)}catch(fr){if(fr.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ct&&Mt.hasHighS())return!1;St&&(wt=et.hash(wt));const{r:Ut,s:Kt}=Mt,Ht=Yt(wt),Ft=pt(Kt),zt=dt(Ht*Ft),ir=dt(Ut*Ft),sr=(Vt=mt.BASE.multiplyAndAddUnsafe(Lt,zt,ir))==null?void 0:Vt.toAffine();return sr?dt(sr.x)===Ut:!1}return{CURVE:et,getPublicKey:Pt,getSharedSecret:Gt,sign:ft,verify:ht,ProjectivePoint:mt,Signature:Ot,utils:kt}}class HMAC extends Hash{constructor(et,rt){super(),this.finished=!1,this.destroyed=!1,hash$2(et);const nt=toBytes(rt);if(this.iHash=et.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const at=this.blockLen,it=new Uint8Array(at);it.set(nt.length>at?et.create().update(nt).digest():nt);for(let st=0;st<it.length;st++)it[st]^=54;this.iHash.update(it),this.oHash=et.create();for(let st=0;st<it.length;st++)it[st]^=106;this.oHash.update(it),it.fill(0)}update(et){return exists(this),this.iHash.update(et),this}digestInto(et){exists(this),bytes(et,this.outputLen),this.finished=!0,this.iHash.digestInto(et),this.oHash.update(et),this.oHash.digestInto(et),this.destroy()}digest(){const et=new Uint8Array(this.oHash.outputLen);return this.digestInto(et),et}_cloneInto(et){et||(et=Object.create(Object.getPrototypeOf(this),{}));const{oHash:rt,iHash:nt,finished:at,destroyed:it,blockLen:st,outputLen:dt}=this;return et=et,et.finished=at,et.destroyed=it,et.blockLen=st,et.outputLen=dt,et.oHash=rt._cloneInto(et.oHash),et.iHash=nt._cloneInto(et.iHash),et}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac$1=(tt,et,rt)=>new HMAC(tt,et).update(rt).digest();hmac$1.create=(tt,et)=>new HMAC(tt,et);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(tt){return{hash:tt,hmac:(et,...rt)=>hmac$1(tt,et,concatBytes$1(...rt)),randomBytes}}function createCurve(tt,et){const rt=nt=>weierstrass({...tt,...getHash(nt)});return Object.freeze({...rt(et),create:rt})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n=BigInt(1),_2n=BigInt(2),divNearest=(tt,et)=>(tt+et/_2n)/et;function sqrtMod(tt){const et=secp256k1P,rt=BigInt(3),nt=BigInt(6),at=BigInt(11),it=BigInt(22),st=BigInt(23),dt=BigInt(44),pt=BigInt(88),mt=tt*tt*tt%et,yt=mt*mt*tt%et,Rt=pow2(yt,rt,et)*yt%et,Tt=pow2(Rt,rt,et)*yt%et,At=pow2(Tt,_2n,et)*mt%et,xt=pow2(At,at,et)*At%et,Nt=pow2(xt,it,et)*xt%et,Ct=pow2(Nt,dt,et)*Nt%et,Ot=pow2(Ct,pt,et)*Ct%et,kt=pow2(Ot,dt,et)*Nt%et,Pt=pow2(kt,rt,et)*yt%et,Dt=pow2(Pt,st,et)*xt%et,Gt=pow2(Dt,nt,et)*mt%et,jt=pow2(Gt,_2n,et);if(!Fp.eql(Fp.sqr(jt),tt))throw new Error("Cannot find square root");return jt}const Fp=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod}),secp256k1$1=createCurve({a:BigInt(0),b:BigInt(7),Fp,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:tt=>{const et=secp256k1N,rt=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),nt=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),at=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),it=rt,st=BigInt("0x100000000000000000000000000000000"),dt=divNearest(it*tt,et),pt=divNearest(-nt*tt,et);let mt=mod(tt-dt*rt-pt*at,et),yt=mod(-dt*nt-pt*it,et);const Rt=mt>st,Tt=yt>st;if(Rt&&(mt=et-mt),Tt&&(yt=et-yt),mt>st||yt>st)throw new Error("splitScalar: Endomorphism failed, k="+tt);return{k1neg:Rt,k1:mt,k2neg:Tt,k2:yt}}}},sha256$2);BigInt(0);secp256k1$1.ProjectivePoint;const generatePrivateKey=ed25519.utils.randomPrivateKey,generateKeypair=()=>{const tt=ed25519.utils.randomPrivateKey(),et=getPublicKey(tt),rt=new Uint8Array(64);return rt.set(tt),rt.set(et,32),{publicKey:et,secretKey:rt}},getPublicKey=ed25519.getPublicKey;function isOnCurve(tt){try{return ed25519.ExtendedPoint.fromHex(tt),!0}catch{return!1}}const sign$1=(tt,et)=>ed25519.sign(tt,et.slice(0,32)),verify=ed25519.verify,toBuffer$1=tt=>Buffer$1.isBuffer(tt)?tt:tt instanceof Uint8Array?Buffer$1.from(tt.buffer,tt.byteOffset,tt.byteLength):Buffer$1.from(tt);let Struct$1=class{constructor(et){Object.assign(this,et)}encode(){return Buffer$1.from(serialize_1(SOLANA_SCHEMA,this))}static decode(et){return deserialize_1(SOLANA_SCHEMA,this,et)}static decodeUnchecked(et){return deserializeUnchecked_1(SOLANA_SCHEMA,this,et)}};class Enum extends Struct$1{constructor(et){if(super(et),this.enum="",Object.keys(et).length!==1)throw new Error("Enum can only take single value");Object.keys(et).map(rt=>{this.enum=rt})}}const SOLANA_SCHEMA=new Map;var _PublicKey;const MAX_SEED_LENGTH=32,PUBLIC_KEY_LENGTH=32;function isPublicKeyData(tt){return tt._bn!==void 0}let uniquePublicKeyCounter=1;class PublicKey extends Struct$1{constructor(et){if(super({}),this._bn=void 0,isPublicKeyData(et))this._bn=et._bn;else{if(typeof et=="string"){const rt=bs58$5.decode(et);if(rt.length!=PUBLIC_KEY_LENGTH)throw new Error("Invalid public key input");this._bn=new BN(rt)}else this._bn=new BN(et);if(this._bn.byteLength()>PUBLIC_KEY_LENGTH)throw new Error("Invalid public key input")}}static unique(){const et=new PublicKey(uniquePublicKeyCounter);return uniquePublicKeyCounter+=1,new PublicKey(et.toBuffer())}equals(et){return this._bn.eq(et._bn)}toBase58(){return bs58$5.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const et=this.toBuffer();return new Uint8Array(et.buffer,et.byteOffset,et.byteLength)}toBuffer(){const et=this._bn.toArrayLike(Buffer$1);if(et.length===PUBLIC_KEY_LENGTH)return et;const rt=Buffer$1.alloc(32);return et.copy(rt,32-et.length),rt}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(et,rt,nt){const at=Buffer$1.concat([et.toBuffer(),Buffer$1.from(rt),nt.toBuffer()]),it=sha256$2(at);return new PublicKey(it)}static createProgramAddressSync(et,rt){let nt=Buffer$1.alloc(0);et.forEach(function(it){if(it.length>MAX_SEED_LENGTH)throw new TypeError("Max seed length exceeded");nt=Buffer$1.concat([nt,toBuffer$1(it)])}),nt=Buffer$1.concat([nt,rt.toBuffer(),Buffer$1.from("ProgramDerivedAddress")]);const at=sha256$2(nt);if(isOnCurve(at))throw new Error("Invalid seeds, address must fall off the curve");return new PublicKey(at)}static async createProgramAddress(et,rt){return this.createProgramAddressSync(et,rt)}static findProgramAddressSync(et,rt){let nt=255,at;for(;nt!=0;){try{const it=et.concat(Buffer$1.from([nt]));at=this.createProgramAddressSync(it,rt)}catch(it){if(it instanceof TypeError)throw it;nt--;continue}return[at,nt]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(et,rt){return this.findProgramAddressSync(et,rt)}static isOnCurve(et){const rt=new PublicKey(et);return isOnCurve(rt.toBytes())}}_PublicKey=PublicKey;PublicKey.default=new _PublicKey("11111111111111111111111111111111");SOLANA_SCHEMA.set(PublicKey,{kind:"struct",fields:[["_bn","u256"]]});class Account{constructor(et){if(this._publicKey=void 0,this._secretKey=void 0,et){const rt=toBuffer$1(et);if(et.length!==64)throw new Error("bad secret key size");this._publicKey=rt.slice(32,64),this._secretKey=rt.slice(0,32)}else this._secretKey=toBuffer$1(generatePrivateKey()),this._publicKey=toBuffer$1(getPublicKey(this._secretKey))}get publicKey(){return new PublicKey(this._publicKey)}get secretKey(){return Buffer$1.concat([this._secretKey,this._publicKey],64)}}const BPF_LOADER_DEPRECATED_PROGRAM_ID=new PublicKey("BPFLoader1111111111111111111111111111111111"),PACKET_DATA_SIZE=1232,VERSION_PREFIX_MASK=127,SIGNATURE_LENGTH_IN_BYTES$1=64;class TransactionExpiredBlockheightExceededError extends Error{constructor(et){super(`Signature ${et} has expired: block height exceeded.`),this.signature=void 0,this.signature=et}}Object.defineProperty(TransactionExpiredBlockheightExceededError.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class TransactionExpiredTimeoutError extends Error{constructor(et,rt){super(`Transaction was not confirmed in ${rt.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${et} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=et}}Object.defineProperty(TransactionExpiredTimeoutError.prototype,"name",{value:"TransactionExpiredTimeoutError"});class TransactionExpiredNonceInvalidError extends Error{constructor(et){super(`Signature ${et} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=et}}Object.defineProperty(TransactionExpiredNonceInvalidError.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class MessageAccountKeys{constructor(et,rt){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=et,this.accountKeysFromLookups=rt}keySegments(){const et=[this.staticAccountKeys];return this.accountKeysFromLookups&&(et.push(this.accountKeysFromLookups.writable),et.push(this.accountKeysFromLookups.readonly)),et}get(et){for(const rt of this.keySegments()){if(et<rt.length)return rt[et];et-=rt.length}}get length(){return this.keySegments().flat().length}compileInstructions(et){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const nt=new Map;this.keySegments().flat().forEach((it,st)=>{nt.set(it.toBase58(),st)});const at=it=>{const st=nt.get(it.toBase58());if(st===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return st};return et.map(it=>({programIdIndex:at(it.programId),accountKeyIndexes:it.keys.map(st=>at(st.pubkey)),data:it.data}))}}const publicKey$4=(tt="publicKey")=>blob$1(32,tt),signature$2=(tt="signature")=>blob$1(64,tt),rustString=(tt="string")=>{const et=struct$1([u32$1("length"),u32$1("lengthPadding"),blob$1(offset$1(u32$1(),-8),"chars")],tt),rt=et.decode.bind(et),nt=et.encode.bind(et),at=et;return at.decode=(it,st)=>rt(it,st).chars.toString(),at.encode=(it,st,dt)=>{const pt={chars:Buffer$1.from(it,"utf8")};return nt(pt,st,dt)},at.alloc=it=>u32$1().span+u32$1().span+Buffer$1.from(it,"utf8").length,at},authorized=(tt="authorized")=>struct$1([publicKey$4("staker"),publicKey$4("withdrawer")],tt),lockup=(tt="lockup")=>struct$1([ns64$1("unixTimestamp"),ns64$1("epoch"),publicKey$4("custodian")],tt),voteInit=(tt="voteInit")=>struct$1([publicKey$4("nodePubkey"),publicKey$4("authorizedVoter"),publicKey$4("authorizedWithdrawer"),u8$1("commission")],tt),voteAuthorizeWithSeedArgs=(tt="voteAuthorizeWithSeedArgs")=>struct$1([u32$1("voteAuthorizationType"),publicKey$4("currentAuthorityDerivedKeyOwnerPubkey"),rustString("currentAuthorityDerivedKeySeed"),publicKey$4("newAuthorized")],tt);function getAlloc(tt,et){const rt=at=>{if(at.span>=0)return at.span;if(typeof at.alloc=="function")return at.alloc(et[at.property]);if("count"in at&&"elementLayout"in at){const it=et[at.property];if(Array.isArray(it))return it.length*rt(at.elementLayout)}else if("fields"in at)return getAlloc({layout:at},et[at.property]);return 0};let nt=0;return tt.layout.fields.forEach(at=>{nt+=rt(at)}),nt}function decodeLength(tt){let et=0,rt=0;for(;;){let nt=tt.shift();if(et|=(nt&127)<<rt*7,rt+=1,!(nt&128))break}return et}function encodeLength(tt,et){let rt=et;for(;;){let nt=rt&127;if(rt>>=7,rt==0){tt.push(nt);break}else nt|=128,tt.push(nt)}}function assert$1(tt,et){if(!tt)throw new Error(et||"Assertion failed")}class CompiledKeys{constructor(et,rt){this.payer=void 0,this.keyMetaMap=void 0,this.payer=et,this.keyMetaMap=rt}static compile(et,rt){const nt=new Map,at=st=>{const dt=st.toBase58();let pt=nt.get(dt);return pt===void 0&&(pt={isSigner:!1,isWritable:!1,isInvoked:!1},nt.set(dt,pt)),pt},it=at(rt);it.isSigner=!0,it.isWritable=!0;for(const st of et){at(st.programId).isInvoked=!0;for(const dt of st.keys){const pt=at(dt.pubkey);pt.isSigner||(pt.isSigner=dt.isSigner),pt.isWritable||(pt.isWritable=dt.isWritable)}}return new CompiledKeys(rt,nt)}getMessageComponents(){const et=[...this.keyMetaMap.entries()];assert$1(et.length<=256,"Max static account keys length exceeded");const rt=et.filter(([,pt])=>pt.isSigner&&pt.isWritable),nt=et.filter(([,pt])=>pt.isSigner&&!pt.isWritable),at=et.filter(([,pt])=>!pt.isSigner&&pt.isWritable),it=et.filter(([,pt])=>!pt.isSigner&&!pt.isWritable),st={numRequiredSignatures:rt.length+nt.length,numReadonlySignedAccounts:nt.length,numReadonlyUnsignedAccounts:it.length};{assert$1(rt.length>0,"Expected at least one writable signer key");const[pt]=rt[0];assert$1(pt===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const dt=[...rt.map(([pt])=>new PublicKey(pt)),...nt.map(([pt])=>new PublicKey(pt)),...at.map(([pt])=>new PublicKey(pt)),...it.map(([pt])=>new PublicKey(pt))];return[st,dt]}extractTableLookup(et){const[rt,nt]=this.drainKeysFoundInLookupTable(et.state.addresses,st=>!st.isSigner&&!st.isInvoked&&st.isWritable),[at,it]=this.drainKeysFoundInLookupTable(et.state.addresses,st=>!st.isSigner&&!st.isInvoked&&!st.isWritable);if(!(rt.length===0&&at.length===0))return[{accountKey:et.key,writableIndexes:rt,readonlyIndexes:at},{writable:nt,readonly:it}]}drainKeysFoundInLookupTable(et,rt){const nt=new Array,at=new Array;for(const[it,st]of this.keyMetaMap.entries())if(rt(st)){const dt=new PublicKey(it),pt=et.findIndex(mt=>mt.equals(dt));pt>=0&&(assert$1(pt<256,"Max lookup table index exceeded"),nt.push(pt),at.push(dt),this.keyMetaMap.delete(it))}return[nt,at]}}const END_OF_BUFFER_ERROR_MESSAGE="Reached end of buffer unexpectedly";function guardedShift(tt){if(tt.length===0)throw new Error(END_OF_BUFFER_ERROR_MESSAGE);return tt.shift()}function guardedSplice(tt,...et){const[rt]=et;if(et.length===2?rt+(et[1]??0)>tt.length:rt>=tt.length)throw new Error(END_OF_BUFFER_ERROR_MESSAGE);return tt.splice(...et)}class Message{constructor(et){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=et.header,this.accountKeys=et.accountKeys.map(rt=>new PublicKey(rt)),this.recentBlockhash=et.recentBlockhash,this.instructions=et.instructions,this.instructions.forEach(rt=>this.indexToProgramIds.set(rt.programIdIndex,this.accountKeys[rt.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(et=>({programIdIndex:et.programIdIndex,accountKeyIndexes:et.accounts,data:bs58$5.decode(et.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new MessageAccountKeys(this.staticAccountKeys)}static compile(et){const rt=CompiledKeys.compile(et.instructions,et.payerKey),[nt,at]=rt.getMessageComponents(),st=new MessageAccountKeys(at).compileInstructions(et.instructions).map(dt=>({programIdIndex:dt.programIdIndex,accounts:dt.accountKeyIndexes,data:bs58$5.encode(dt.data)}));return new Message({header:nt,accountKeys:at,recentBlockhash:et.recentBlockhash,instructions:st})}isAccountSigner(et){return et<this.header.numRequiredSignatures}isAccountWritable(et){const rt=this.header.numRequiredSignatures;if(et>=this.header.numRequiredSignatures){const nt=et-rt,it=this.accountKeys.length-rt-this.header.numReadonlyUnsignedAccounts;return nt<it}else{const nt=rt-this.header.numReadonlySignedAccounts;return et<nt}}isProgramId(et){return this.indexToProgramIds.has(et)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((et,rt)=>!this.isProgramId(rt))}serialize(){const et=this.accountKeys.length;let rt=[];encodeLength(rt,et);const nt=this.instructions.map(Rt=>{const{accounts:Tt,programIdIndex:At}=Rt,xt=Array.from(bs58$5.decode(Rt.data));let Nt=[];encodeLength(Nt,Tt.length);let Ct=[];return encodeLength(Ct,xt.length),{programIdIndex:At,keyIndicesCount:Buffer$1.from(Nt),keyIndices:Tt,dataLength:Buffer$1.from(Ct),data:xt}});let at=[];encodeLength(at,nt.length);let it=Buffer$1.alloc(PACKET_DATA_SIZE);Buffer$1.from(at).copy(it);let st=at.length;nt.forEach(Rt=>{const At=struct$1([u8$1("programIdIndex"),blob$1(Rt.keyIndicesCount.length,"keyIndicesCount"),seq(u8$1("keyIndex"),Rt.keyIndices.length,"keyIndices"),blob$1(Rt.dataLength.length,"dataLength"),seq(u8$1("userdatum"),Rt.data.length,"data")]).encode(Rt,it,st);st+=At}),it=it.slice(0,st);const dt=struct$1([blob$1(1,"numRequiredSignatures"),blob$1(1,"numReadonlySignedAccounts"),blob$1(1,"numReadonlyUnsignedAccounts"),blob$1(rt.length,"keyCount"),seq(publicKey$4("key"),et,"keys"),publicKey$4("recentBlockhash")]),pt={numRequiredSignatures:Buffer$1.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Buffer$1.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Buffer$1.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Buffer$1.from(rt),keys:this.accountKeys.map(Rt=>toBuffer$1(Rt.toBytes())),recentBlockhash:bs58$5.decode(this.recentBlockhash)};let mt=Buffer$1.alloc(2048);const yt=dt.encode(pt,mt);return it.copy(mt,yt),mt.slice(0,yt+it.length)}static from(et){let rt=[...et];const nt=guardedShift(rt);if(nt!==(nt&VERSION_PREFIX_MASK))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const at=guardedShift(rt),it=guardedShift(rt),st=decodeLength(rt);let dt=[];for(let Tt=0;Tt<st;Tt++){const At=guardedSplice(rt,0,PUBLIC_KEY_LENGTH);dt.push(new PublicKey(Buffer$1.from(At)))}const pt=guardedSplice(rt,0,PUBLIC_KEY_LENGTH),mt=decodeLength(rt);let yt=[];for(let Tt=0;Tt<mt;Tt++){const At=guardedShift(rt),xt=decodeLength(rt),Nt=guardedSplice(rt,0,xt),Ct=decodeLength(rt),Ot=guardedSplice(rt,0,Ct),kt=bs58$5.encode(Buffer$1.from(Ot));yt.push({programIdIndex:At,accounts:Nt,data:kt})}const Rt={header:{numRequiredSignatures:nt,numReadonlySignedAccounts:at,numReadonlyUnsignedAccounts:it},recentBlockhash:bs58$5.encode(Buffer$1.from(pt)),accountKeys:dt,instructions:yt};return new Message(Rt)}}class MessageV0{constructor(et){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=et.header,this.staticAccountKeys=et.staticAccountKeys,this.recentBlockhash=et.recentBlockhash,this.compiledInstructions=et.compiledInstructions,this.addressTableLookups=et.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let et=0;for(const rt of this.addressTableLookups)et+=rt.readonlyIndexes.length+rt.writableIndexes.length;return et}getAccountKeys(et){let rt;if(et&&"accountKeysFromLookups"in et&&et.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=et.accountKeysFromLookups.writable.length+et.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");rt=et.accountKeysFromLookups}else if(et&&"addressLookupTableAccounts"in et&&et.addressLookupTableAccounts)rt=this.resolveAddressTableLookups(et.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new MessageAccountKeys(this.staticAccountKeys,rt)}isAccountSigner(et){return et<this.header.numRequiredSignatures}isAccountWritable(et){const rt=this.header.numRequiredSignatures,nt=this.staticAccountKeys.length;if(et>=nt){const at=et-nt,it=this.addressTableLookups.reduce((st,dt)=>st+dt.writableIndexes.length,0);return at<it}else if(et>=this.header.numRequiredSignatures){const at=et-rt,st=nt-rt-this.header.numReadonlyUnsignedAccounts;return at<st}else{const at=rt-this.header.numReadonlySignedAccounts;return et<at}}resolveAddressTableLookups(et){const rt={writable:[],readonly:[]};for(const nt of this.addressTableLookups){const at=et.find(it=>it.key.equals(nt.accountKey));if(!at)throw new Error(`Failed to find address lookup table account for table key ${nt.accountKey.toBase58()}`);for(const it of nt.writableIndexes)if(it<at.state.addresses.length)rt.writable.push(at.state.addresses[it]);else throw new Error(`Failed to find address for index ${it} in address lookup table ${nt.accountKey.toBase58()}`);for(const it of nt.readonlyIndexes)if(it<at.state.addresses.length)rt.readonly.push(at.state.addresses[it]);else throw new Error(`Failed to find address for index ${it} in address lookup table ${nt.accountKey.toBase58()}`)}return rt}static compile(et){const rt=CompiledKeys.compile(et.instructions,et.payerKey),nt=new Array,at={writable:new Array,readonly:new Array},it=et.addressLookupTableAccounts||[];for(const yt of it){const Rt=rt.extractTableLookup(yt);if(Rt!==void 0){const[Tt,{writable:At,readonly:xt}]=Rt;nt.push(Tt),at.writable.push(...At),at.readonly.push(...xt)}}const[st,dt]=rt.getMessageComponents(),mt=new MessageAccountKeys(dt,at).compileInstructions(et.instructions);return new MessageV0({header:st,staticAccountKeys:dt,recentBlockhash:et.recentBlockhash,compiledInstructions:mt,addressTableLookups:nt})}serialize(){const et=Array();encodeLength(et,this.staticAccountKeys.length);const rt=this.serializeInstructions(),nt=Array();encodeLength(nt,this.compiledInstructions.length);const at=this.serializeAddressTableLookups(),it=Array();encodeLength(it,this.addressTableLookups.length);const st=struct$1([u8$1("prefix"),struct$1([u8$1("numRequiredSignatures"),u8$1("numReadonlySignedAccounts"),u8$1("numReadonlyUnsignedAccounts")],"header"),blob$1(et.length,"staticAccountKeysLength"),seq(publicKey$4(),this.staticAccountKeys.length,"staticAccountKeys"),publicKey$4("recentBlockhash"),blob$1(nt.length,"instructionsLength"),blob$1(rt.length,"serializedInstructions"),blob$1(it.length,"addressTableLookupsLength"),blob$1(at.length,"serializedAddressTableLookups")]),dt=new Uint8Array(PACKET_DATA_SIZE),mt=st.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(et),staticAccountKeys:this.staticAccountKeys.map(yt=>yt.toBytes()),recentBlockhash:bs58$5.decode(this.recentBlockhash),instructionsLength:new Uint8Array(nt),serializedInstructions:rt,addressTableLookupsLength:new Uint8Array(it),serializedAddressTableLookups:at},dt);return dt.slice(0,mt)}serializeInstructions(){let et=0;const rt=new Uint8Array(PACKET_DATA_SIZE);for(const nt of this.compiledInstructions){const at=Array();encodeLength(at,nt.accountKeyIndexes.length);const it=Array();encodeLength(it,nt.data.length);const st=struct$1([u8$1("programIdIndex"),blob$1(at.length,"encodedAccountKeyIndexesLength"),seq(u8$1(),nt.accountKeyIndexes.length,"accountKeyIndexes"),blob$1(it.length,"encodedDataLength"),blob$1(nt.data.length,"data")]);et+=st.encode({programIdIndex:nt.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(at),accountKeyIndexes:nt.accountKeyIndexes,encodedDataLength:new Uint8Array(it),data:nt.data},rt,et)}return rt.slice(0,et)}serializeAddressTableLookups(){let et=0;const rt=new Uint8Array(PACKET_DATA_SIZE);for(const nt of this.addressTableLookups){const at=Array();encodeLength(at,nt.writableIndexes.length);const it=Array();encodeLength(it,nt.readonlyIndexes.length);const st=struct$1([publicKey$4("accountKey"),blob$1(at.length,"encodedWritableIndexesLength"),seq(u8$1(),nt.writableIndexes.length,"writableIndexes"),blob$1(it.length,"encodedReadonlyIndexesLength"),seq(u8$1(),nt.readonlyIndexes.length,"readonlyIndexes")]);et+=st.encode({accountKey:nt.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(at),writableIndexes:nt.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(it),readonlyIndexes:nt.readonlyIndexes},rt,et)}return rt.slice(0,et)}static deserialize(et){let rt=[...et];const nt=guardedShift(rt),at=nt&VERSION_PREFIX_MASK;assert$1(nt!==at,"Expected versioned message but received legacy message");const it=at;assert$1(it===0,`Expected versioned message with version 0 but found version ${it}`);const st={numRequiredSignatures:guardedShift(rt),numReadonlySignedAccounts:guardedShift(rt),numReadonlyUnsignedAccounts:guardedShift(rt)},dt=[],pt=decodeLength(rt);for(let xt=0;xt<pt;xt++)dt.push(new PublicKey(guardedSplice(rt,0,PUBLIC_KEY_LENGTH)));const mt=bs58$5.encode(guardedSplice(rt,0,PUBLIC_KEY_LENGTH)),yt=decodeLength(rt),Rt=[];for(let xt=0;xt<yt;xt++){const Nt=guardedShift(rt),Ct=decodeLength(rt),Ot=guardedSplice(rt,0,Ct),kt=decodeLength(rt),Pt=new Uint8Array(guardedSplice(rt,0,kt));Rt.push({programIdIndex:Nt,accountKeyIndexes:Ot,data:Pt})}const Tt=decodeLength(rt),At=[];for(let xt=0;xt<Tt;xt++){const Nt=new PublicKey(guardedSplice(rt,0,PUBLIC_KEY_LENGTH)),Ct=decodeLength(rt),Ot=guardedSplice(rt,0,Ct),kt=decodeLength(rt),Pt=guardedSplice(rt,0,kt);At.push({accountKey:Nt,writableIndexes:Ot,readonlyIndexes:Pt})}return new MessageV0({header:st,staticAccountKeys:dt,recentBlockhash:mt,compiledInstructions:Rt,addressTableLookups:At})}}const VersionedMessage={deserializeMessageVersion(tt){const et=tt[0],rt=et&VERSION_PREFIX_MASK;return rt===et?"legacy":rt},deserialize:tt=>{const et=VersionedMessage.deserializeMessageVersion(tt);if(et==="legacy")return Message.from(tt);if(et===0)return MessageV0.deserialize(tt);throw new Error(`Transaction message version ${et} deserialization is not supported`)}};let TransactionStatus=function(tt){return tt[tt.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",tt[tt.PROCESSED=1]="PROCESSED",tt[tt.TIMED_OUT=2]="TIMED_OUT",tt[tt.NONCE_INVALID=3]="NONCE_INVALID",tt}({});const DEFAULT_SIGNATURE=Buffer$1.alloc(SIGNATURE_LENGTH_IN_BYTES$1).fill(0);class TransactionInstruction{constructor(et){this.keys=void 0,this.programId=void 0,this.data=Buffer$1.alloc(0),this.programId=et.programId,this.keys=et.keys,et.data&&(this.data=et.data)}toJSON(){return{keys:this.keys.map(({pubkey:et,isSigner:rt,isWritable:nt})=>({pubkey:et.toJSON(),isSigner:rt,isWritable:nt})),programId:this.programId.toJSON(),data:[...this.data]}}}class Transaction{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(et){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!et)if(et.feePayer&&(this.feePayer=et.feePayer),et.signatures&&(this.signatures=et.signatures),Object.prototype.hasOwnProperty.call(et,"nonceInfo")){const{minContextSlot:rt,nonceInfo:nt}=et;this.minNonceContextSlot=rt,this.nonceInfo=nt}else if(Object.prototype.hasOwnProperty.call(et,"lastValidBlockHeight")){const{blockhash:rt,lastValidBlockHeight:nt}=et;this.recentBlockhash=rt,this.lastValidBlockHeight=nt}else{const{recentBlockhash:rt,nonceInfo:nt}=et;nt&&(this.nonceInfo=nt),this.recentBlockhash=rt}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(et=>et.toJSON()),signers:this.signatures.map(({publicKey:et})=>et.toJSON())}}add(...et){if(et.length===0)throw new Error("No instructions");return et.forEach(rt=>{"instructions"in rt?this.instructions=this.instructions.concat(rt.instructions):"data"in rt&&"programId"in rt&&"keys"in rt?this.instructions.push(rt):this.instructions.push(new TransactionInstruction(rt))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let et,rt;if(this.nonceInfo?(et=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?rt=[this.nonceInfo.nonceInstruction,...this.instructions]:rt=this.instructions):(et=this.recentBlockhash,rt=this.instructions),!et)throw new Error("Transaction recentBlockhash required");rt.length<1&&console.warn("No instructions provided");let nt;if(this.feePayer)nt=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)nt=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let Nt=0;Nt<rt.length;Nt++)if(rt[Nt].programId===void 0)throw new Error(`Transaction instruction index ${Nt} has undefined program id`);const at=[],it=[];rt.forEach(Nt=>{Nt.keys.forEach(Ot=>{it.push({...Ot})});const Ct=Nt.programId.toString();at.includes(Ct)||at.push(Ct)}),at.forEach(Nt=>{it.push({pubkey:new PublicKey(Nt),isSigner:!1,isWritable:!1})});const st=[];it.forEach(Nt=>{const Ct=Nt.pubkey.toString(),Ot=st.findIndex(kt=>kt.pubkey.toString()===Ct);Ot>-1?(st[Ot].isWritable=st[Ot].isWritable||Nt.isWritable,st[Ot].isSigner=st[Ot].isSigner||Nt.isSigner):st.push(Nt)}),st.sort(function(Nt,Ct){if(Nt.isSigner!==Ct.isSigner)return Nt.isSigner?-1:1;if(Nt.isWritable!==Ct.isWritable)return Nt.isWritable?-1:1;const Ot={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return Nt.pubkey.toBase58().localeCompare(Ct.pubkey.toBase58(),"en",Ot)});const dt=st.findIndex(Nt=>Nt.pubkey.equals(nt));if(dt>-1){const[Nt]=st.splice(dt,1);Nt.isSigner=!0,Nt.isWritable=!0,st.unshift(Nt)}else st.unshift({pubkey:nt,isSigner:!0,isWritable:!0});for(const Nt of this.signatures){const Ct=st.findIndex(Ot=>Ot.pubkey.equals(Nt.publicKey));if(Ct>-1)st[Ct].isSigner||(st[Ct].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${Nt.publicKey.toString()}`)}let pt=0,mt=0,yt=0;const Rt=[],Tt=[];st.forEach(({pubkey:Nt,isSigner:Ct,isWritable:Ot})=>{Ct?(Rt.push(Nt.toString()),pt+=1,Ot||(mt+=1)):(Tt.push(Nt.toString()),Ot||(yt+=1))});const At=Rt.concat(Tt),xt=rt.map(Nt=>{const{data:Ct,programId:Ot}=Nt;return{programIdIndex:At.indexOf(Ot.toString()),accounts:Nt.keys.map(kt=>At.indexOf(kt.pubkey.toString())),data:bs58$5.encode(Ct)}});return xt.forEach(Nt=>{assert$1(Nt.programIdIndex>=0),Nt.accounts.forEach(Ct=>assert$1(Ct>=0))}),new Message({header:{numRequiredSignatures:pt,numReadonlySignedAccounts:mt,numReadonlyUnsignedAccounts:yt},accountKeys:At,recentBlockhash:et,instructions:xt})}_compile(){const et=this.compileMessage(),rt=et.accountKeys.slice(0,et.header.numRequiredSignatures);return this.signatures.length===rt.length&&this.signatures.every((at,it)=>rt[it].equals(at.publicKey))||(this.signatures=rt.map(nt=>({signature:null,publicKey:nt}))),et}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(et){return(await et.getFeeForMessage(this.compileMessage())).value}setSigners(...et){if(et.length===0)throw new Error("No signers");const rt=new Set;this.signatures=et.filter(nt=>{const at=nt.toString();return rt.has(at)?!1:(rt.add(at),!0)}).map(nt=>({signature:null,publicKey:nt}))}sign(...et){if(et.length===0)throw new Error("No signers");const rt=new Set,nt=[];for(const it of et){const st=it.publicKey.toString();rt.has(st)||(rt.add(st),nt.push(it))}this.signatures=nt.map(it=>({signature:null,publicKey:it.publicKey}));const at=this._compile();this._partialSign(at,...nt)}partialSign(...et){if(et.length===0)throw new Error("No signers");const rt=new Set,nt=[];for(const it of et){const st=it.publicKey.toString();rt.has(st)||(rt.add(st),nt.push(it))}const at=this._compile();this._partialSign(at,...nt)}_partialSign(et,...rt){const nt=et.serialize();rt.forEach(at=>{const it=sign$1(nt,at.secretKey);this._addSignature(at.publicKey,toBuffer$1(it))})}addSignature(et,rt){this._compile(),this._addSignature(et,rt)}_addSignature(et,rt){assert$1(rt.length===64);const nt=this.signatures.findIndex(at=>et.equals(at.publicKey));if(nt<0)throw new Error(`unknown signer: ${et.toString()}`);this.signatures[nt].signature=Buffer$1.from(rt)}verifySignatures(et=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),et)}_getMessageSignednessErrors(et,rt){const nt={};for(const{signature:at,publicKey:it}of this.signatures)at===null?rt&&(nt.missing||(nt.missing=[])).push(it):verify(at,et,it.toBytes())||(nt.invalid||(nt.invalid=[])).push(it);return nt.invalid||nt.missing?nt:void 0}serialize(et){const{requireAllSignatures:rt,verifySignatures:nt}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},et),at=this.serializeMessage();if(nt){const it=this._getMessageSignednessErrors(at,rt);if(it){let st="Signature verification failed.";throw it.invalid&&(st+=`
Invalid signature for public key${it.invalid.length===1?"":"(s)"} [\`${it.invalid.map(dt=>dt.toBase58()).join("`, `")}\`].`),it.missing&&(st+=`
Missing signature for public key${it.missing.length===1?"":"(s)"} [\`${it.missing.map(dt=>dt.toBase58()).join("`, `")}\`].`),new Error(st)}}return this._serialize(at)}_serialize(et){const{signatures:rt}=this,nt=[];encodeLength(nt,rt.length);const at=nt.length+rt.length*64+et.length,it=Buffer$1.alloc(at);return assert$1(rt.length<256),Buffer$1.from(nt).copy(it,0),rt.forEach(({signature:st},dt)=>{st!==null&&(assert$1(st.length===64,"signature has invalid length"),Buffer$1.from(st).copy(it,nt.length+dt*64))}),et.copy(it,nt.length+rt.length*64),assert$1(it.length<=PACKET_DATA_SIZE,`Transaction too large: ${it.length} > ${PACKET_DATA_SIZE}`),it}get keys(){return assert$1(this.instructions.length===1),this.instructions[0].keys.map(et=>et.pubkey)}get programId(){return assert$1(this.instructions.length===1),this.instructions[0].programId}get data(){return assert$1(this.instructions.length===1),this.instructions[0].data}static from(et){let rt=[...et];const nt=decodeLength(rt);let at=[];for(let it=0;it<nt;it++){const st=guardedSplice(rt,0,SIGNATURE_LENGTH_IN_BYTES$1);at.push(bs58$5.encode(Buffer$1.from(st)))}return Transaction.populate(Message.from(rt),at)}static populate(et,rt=[]){const nt=new Transaction;return nt.recentBlockhash=et.recentBlockhash,et.header.numRequiredSignatures>0&&(nt.feePayer=et.accountKeys[0]),rt.forEach((at,it)=>{const st={signature:at==bs58$5.encode(DEFAULT_SIGNATURE)?null:bs58$5.decode(at),publicKey:et.accountKeys[it]};nt.signatures.push(st)}),et.instructions.forEach(at=>{const it=at.accounts.map(st=>{const dt=et.accountKeys[st];return{pubkey:dt,isSigner:nt.signatures.some(pt=>pt.publicKey.toString()===dt.toString())||et.isAccountSigner(st),isWritable:et.isAccountWritable(st)}});nt.instructions.push(new TransactionInstruction({keys:it,programId:et.accountKeys[at.programIdIndex],data:bs58$5.decode(at.data)}))}),nt._message=et,nt._json=nt.toJSON(),nt}}class TransactionMessage{constructor(et){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=et.payerKey,this.instructions=et.instructions,this.recentBlockhash=et.recentBlockhash}static decompile(et,rt){const{header:nt,compiledInstructions:at,recentBlockhash:it}=et,{numRequiredSignatures:st,numReadonlySignedAccounts:dt,numReadonlyUnsignedAccounts:pt}=nt,mt=st-dt;assert$1(mt>0,"Message header is invalid");const yt=et.staticAccountKeys.length-st-pt;assert$1(yt>=0,"Message header is invalid");const Rt=et.getAccountKeys(rt),Tt=Rt.get(0);if(Tt===void 0)throw new Error("Failed to decompile message because no account keys were found");const At=[];for(const xt of at){const Nt=[];for(const Ot of xt.accountKeyIndexes){const kt=Rt.get(Ot);if(kt===void 0)throw new Error(`Failed to find key for account key index ${Ot}`);const Pt=Ot<st;let Dt;Pt?Dt=Ot<mt:Ot<Rt.staticAccountKeys.length?Dt=Ot-st<yt:Dt=Ot-Rt.staticAccountKeys.length<Rt.accountKeysFromLookups.writable.length,Nt.push({pubkey:kt,isSigner:Ot<nt.numRequiredSignatures,isWritable:Dt})}const Ct=Rt.get(xt.programIdIndex);if(Ct===void 0)throw new Error(`Failed to find program id for program id index ${xt.programIdIndex}`);At.push(new TransactionInstruction({programId:Ct,data:toBuffer$1(xt.data),keys:Nt}))}return new TransactionMessage({payerKey:Tt,instructions:At,recentBlockhash:it})}compileToLegacyMessage(){return Message.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(et){return MessageV0.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:et})}}class VersionedTransaction{get version(){return this.message.version}constructor(et,rt){if(this.signatures=void 0,this.message=void 0,rt!==void 0)assert$1(rt.length===et.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=rt;else{const nt=[];for(let at=0;at<et.header.numRequiredSignatures;at++)nt.push(new Uint8Array(SIGNATURE_LENGTH_IN_BYTES$1));this.signatures=nt}this.message=et}serialize(){const et=this.message.serialize(),rt=Array();encodeLength(rt,this.signatures.length);const nt=struct$1([blob$1(rt.length,"encodedSignaturesLength"),seq(signature$2(),this.signatures.length,"signatures"),blob$1(et.length,"serializedMessage")]),at=new Uint8Array(2048),it=nt.encode({encodedSignaturesLength:new Uint8Array(rt),signatures:this.signatures,serializedMessage:et},at);return at.slice(0,it)}static deserialize(et){let rt=[...et];const nt=[],at=decodeLength(rt);for(let st=0;st<at;st++)nt.push(new Uint8Array(guardedSplice(rt,0,SIGNATURE_LENGTH_IN_BYTES$1)));const it=VersionedMessage.deserialize(new Uint8Array(rt));return new VersionedTransaction(it,nt)}sign(et){const rt=this.message.serialize(),nt=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const at of et){const it=nt.findIndex(st=>st.equals(at.publicKey));assert$1(it>=0,`Cannot sign with non signer key ${at.publicKey.toBase58()}`),this.signatures[it]=sign$1(rt,at.secretKey)}}addSignature(et,rt){assert$1(rt.byteLength===64,"Signature must be 64 bytes long");const at=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(it=>it.equals(et));assert$1(at>=0,`Can not add signature; \`${et.toBase58()}\` is not required to sign this transaction`),this.signatures[at]=rt}}const NUM_TICKS_PER_SECOND=160,DEFAULT_TICKS_PER_SLOT=64,NUM_SLOTS_PER_SECOND=NUM_TICKS_PER_SECOND/DEFAULT_TICKS_PER_SLOT,MS_PER_SLOT=1e3/NUM_SLOTS_PER_SECOND,SYSVAR_CLOCK_PUBKEY=new PublicKey("SysvarC1ock11111111111111111111111111111111"),SYSVAR_EPOCH_SCHEDULE_PUBKEY=new PublicKey("SysvarEpochSchedu1e111111111111111111111111"),SYSVAR_INSTRUCTIONS_PUBKEY=new PublicKey("Sysvar1nstructions1111111111111111111111111"),SYSVAR_RECENT_BLOCKHASHES_PUBKEY=new PublicKey("SysvarRecentB1ockHashes11111111111111111111"),SYSVAR_RENT_PUBKEY=new PublicKey("SysvarRent111111111111111111111111111111111"),SYSVAR_REWARDS_PUBKEY=new PublicKey("SysvarRewards111111111111111111111111111111"),SYSVAR_SLOT_HASHES_PUBKEY=new PublicKey("SysvarS1otHashes111111111111111111111111111"),SYSVAR_SLOT_HISTORY_PUBKEY=new PublicKey("SysvarS1otHistory11111111111111111111111111"),SYSVAR_STAKE_HISTORY_PUBKEY=new PublicKey("SysvarStakeHistory1111111111111111111111111");class SendTransactionError extends Error{constructor({action:et,signature:rt,transactionMessage:nt,logs:at}){const it=at?`Logs: 
${JSON.stringify(at.slice(-10),null,2)}. `:"",st="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let dt;switch(et){case"send":dt=`Transaction ${rt} resulted in an error. 
${nt}. `+it+st;break;case"simulate":dt=`Simulation failed. 
Message: ${nt}. 
`+it+st;break;default:dt=`Unknown action '${(pt=>pt)(et)}'`}super(dt),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=rt,this.transactionMessage=nt,this.transactionLogs=at||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const et=this.transactionLogs;if(!(et!=null&&typeof et=="object"&&"then"in et))return et}async getLogs(et){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((rt,nt)=>{et.getTransaction(this.signature).then(at=>{if(at&&at.meta&&at.meta.logMessages){const it=at.meta.logMessages;this.transactionLogs=it,rt(it)}else nt(new Error("Log messages not found"))}).catch(nt)})),await this.transactionLogs}}const SolanaJSONRPCErrorCode={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class SolanaJSONRPCError extends Error{constructor({code:et,message:rt,data:nt},at){super(at!=null?`${at}: ${rt}`:rt),this.code=void 0,this.data=void 0,this.code=et,this.data=nt,this.name="SolanaJSONRPCError"}}async function sendAndConfirmTransaction(tt,et,rt,nt){const at=nt&&{skipPreflight:nt.skipPreflight,preflightCommitment:nt.preflightCommitment||nt.commitment,maxRetries:nt.maxRetries,minContextSlot:nt.minContextSlot},it=await tt.sendTransaction(et,rt,at);let st;if(et.recentBlockhash!=null&&et.lastValidBlockHeight!=null)st=(await tt.confirmTransaction({abortSignal:nt==null?void 0:nt.abortSignal,signature:it,blockhash:et.recentBlockhash,lastValidBlockHeight:et.lastValidBlockHeight},nt&&nt.commitment)).value;else if(et.minNonceContextSlot!=null&&et.nonceInfo!=null){const{nonceInstruction:dt}=et.nonceInfo,pt=dt.keys[0].pubkey;st=(await tt.confirmTransaction({abortSignal:nt==null?void 0:nt.abortSignal,minContextSlot:et.minNonceContextSlot,nonceAccountPubkey:pt,nonceValue:et.nonceInfo.nonce,signature:it},nt&&nt.commitment)).value}else(nt==null?void 0:nt.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),st=(await tt.confirmTransaction(it,nt&&nt.commitment)).value;if(st.err)throw it!=null?new SendTransactionError({action:"send",signature:it,transactionMessage:`Status: (${JSON.stringify(st)})`}):new Error(`Transaction ${it} failed (${JSON.stringify(st)})`);return it}function sleep(tt){return new Promise(et=>setTimeout(et,tt))}function encodeData(tt,et){const rt=tt.layout.span>=0?tt.layout.span:getAlloc(tt,et),nt=Buffer$1.alloc(rt),at=Object.assign({instruction:tt.index},et);return tt.layout.encode(at,nt),nt}function decodeData$1(tt,et){let rt;try{rt=tt.layout.decode(et)}catch(nt){throw new Error("invalid instruction; "+nt)}if(rt.instruction!==tt.index)throw new Error(`invalid instruction; instruction index mismatch ${rt.instruction} != ${tt.index}`);return rt}const FeeCalculatorLayout=nu64$1("lamportsPerSignature"),NonceAccountLayout=struct$1([u32$1("version"),u32$1("state"),publicKey$4("authorizedPubkey"),publicKey$4("nonce"),struct$1([FeeCalculatorLayout],"feeCalculator")]),NONCE_ACCOUNT_LENGTH=NonceAccountLayout.span;class NonceAccount{constructor(et){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=et.authorizedPubkey,this.nonce=et.nonce,this.feeCalculator=et.feeCalculator}static fromAccountData(et){const rt=NonceAccountLayout.decode(toBuffer$1(et),0);return new NonceAccount({authorizedPubkey:new PublicKey(rt.authorizedPubkey),nonce:new PublicKey(rt.nonce).toString(),feeCalculator:rt.feeCalculator})}}const encodeDecode$1=tt=>{const et=tt.decode.bind(tt),rt=tt.encode.bind(tt);return{decode:et,encode:rt}},bigInt$1=tt=>et=>{const rt=blob$1(tt,et),{encode:nt,decode:at}=encodeDecode$1(rt),it=rt;return it.decode=(st,dt)=>{const pt=at(st,dt);return toBigIntLE_1(Buffer$1.from(pt))},it.encode=(st,dt,pt)=>{const mt=toBufferLE_1(st,tt);return nt(mt,dt,pt)},it},u64$2=bigInt$1(8);class SystemInstruction{constructor(){}static decodeInstructionType(et){this.checkProgramId(et.programId);const nt=u32$1("instruction").decode(et.data);let at;for(const[it,st]of Object.entries(SYSTEM_INSTRUCTION_LAYOUTS))if(st.index==nt){at=it;break}if(!at)throw new Error("Instruction type incorrect; not a SystemInstruction");return at}static decodeCreateAccount(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,2);const{lamports:rt,space:nt,programId:at}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Create,et.data);return{fromPubkey:et.keys[0].pubkey,newAccountPubkey:et.keys[1].pubkey,lamports:rt,space:nt,programId:new PublicKey(at)}}static decodeTransfer(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,2);const{lamports:rt}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Transfer,et.data);return{fromPubkey:et.keys[0].pubkey,toPubkey:et.keys[1].pubkey,lamports:rt}}static decodeTransferWithSeed(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,3);const{lamports:rt,seed:nt,programId:at}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed,et.data);return{fromPubkey:et.keys[0].pubkey,basePubkey:et.keys[1].pubkey,toPubkey:et.keys[2].pubkey,lamports:rt,seed:nt,programId:new PublicKey(at)}}static decodeAllocate(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,1);const{space:rt}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Allocate,et.data);return{accountPubkey:et.keys[0].pubkey,space:rt}}static decodeAllocateWithSeed(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,1);const{base:rt,seed:nt,space:at,programId:it}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed,et.data);return{accountPubkey:et.keys[0].pubkey,basePubkey:new PublicKey(rt),seed:nt,space:at,programId:new PublicKey(it)}}static decodeAssign(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,1);const{programId:rt}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Assign,et.data);return{accountPubkey:et.keys[0].pubkey,programId:new PublicKey(rt)}}static decodeAssignWithSeed(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,1);const{base:rt,seed:nt,programId:at}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed,et.data);return{accountPubkey:et.keys[0].pubkey,basePubkey:new PublicKey(rt),seed:nt,programId:new PublicKey(at)}}static decodeCreateWithSeed(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,2);const{base:rt,seed:nt,lamports:at,space:it,programId:st}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed,et.data);return{fromPubkey:et.keys[0].pubkey,newAccountPubkey:et.keys[1].pubkey,basePubkey:new PublicKey(rt),seed:nt,lamports:at,space:it,programId:new PublicKey(st)}}static decodeNonceInitialize(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,3);const{authorized:rt}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount,et.data);return{noncePubkey:et.keys[0].pubkey,authorizedPubkey:new PublicKey(rt)}}static decodeNonceAdvance(et){return this.checkProgramId(et.programId),this.checkKeyLength(et.keys,3),decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount,et.data),{noncePubkey:et.keys[0].pubkey,authorizedPubkey:et.keys[2].pubkey}}static decodeNonceWithdraw(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,5);const{lamports:rt}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount,et.data);return{noncePubkey:et.keys[0].pubkey,toPubkey:et.keys[1].pubkey,authorizedPubkey:et.keys[4].pubkey,lamports:rt}}static decodeNonceAuthorize(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,2);const{authorized:rt}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount,et.data);return{noncePubkey:et.keys[0].pubkey,authorizedPubkey:et.keys[1].pubkey,newAuthorizedPubkey:new PublicKey(rt)}}static checkProgramId(et){if(!et.equals(SystemProgram.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(et,rt){if(et.length<rt)throw new Error(`invalid instruction; found ${et.length} keys, expected at least ${rt}`)}}const SYSTEM_INSTRUCTION_LAYOUTS=Object.freeze({Create:{index:0,layout:struct$1([u32$1("instruction"),ns64$1("lamports"),ns64$1("space"),publicKey$4("programId")])},Assign:{index:1,layout:struct$1([u32$1("instruction"),publicKey$4("programId")])},Transfer:{index:2,layout:struct$1([u32$1("instruction"),u64$2("lamports")])},CreateWithSeed:{index:3,layout:struct$1([u32$1("instruction"),publicKey$4("base"),rustString("seed"),ns64$1("lamports"),ns64$1("space"),publicKey$4("programId")])},AdvanceNonceAccount:{index:4,layout:struct$1([u32$1("instruction")])},WithdrawNonceAccount:{index:5,layout:struct$1([u32$1("instruction"),ns64$1("lamports")])},InitializeNonceAccount:{index:6,layout:struct$1([u32$1("instruction"),publicKey$4("authorized")])},AuthorizeNonceAccount:{index:7,layout:struct$1([u32$1("instruction"),publicKey$4("authorized")])},Allocate:{index:8,layout:struct$1([u32$1("instruction"),ns64$1("space")])},AllocateWithSeed:{index:9,layout:struct$1([u32$1("instruction"),publicKey$4("base"),rustString("seed"),ns64$1("space"),publicKey$4("programId")])},AssignWithSeed:{index:10,layout:struct$1([u32$1("instruction"),publicKey$4("base"),rustString("seed"),publicKey$4("programId")])},TransferWithSeed:{index:11,layout:struct$1([u32$1("instruction"),u64$2("lamports"),rustString("seed"),publicKey$4("programId")])},UpgradeNonceAccount:{index:12,layout:struct$1([u32$1("instruction")])}});class SystemProgram{constructor(){}static createAccount(et){const rt=SYSTEM_INSTRUCTION_LAYOUTS.Create,nt=encodeData(rt,{lamports:et.lamports,space:et.space,programId:toBuffer$1(et.programId.toBuffer())});return new TransactionInstruction({keys:[{pubkey:et.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:et.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:nt})}static transfer(et){let rt,nt;if("basePubkey"in et){const at=SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed;rt=encodeData(at,{lamports:BigInt(et.lamports),seed:et.seed,programId:toBuffer$1(et.programId.toBuffer())}),nt=[{pubkey:et.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:et.basePubkey,isSigner:!0,isWritable:!1},{pubkey:et.toPubkey,isSigner:!1,isWritable:!0}]}else{const at=SYSTEM_INSTRUCTION_LAYOUTS.Transfer;rt=encodeData(at,{lamports:BigInt(et.lamports)}),nt=[{pubkey:et.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:et.toPubkey,isSigner:!1,isWritable:!0}]}return new TransactionInstruction({keys:nt,programId:this.programId,data:rt})}static assign(et){let rt,nt;if("basePubkey"in et){const at=SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed;rt=encodeData(at,{base:toBuffer$1(et.basePubkey.toBuffer()),seed:et.seed,programId:toBuffer$1(et.programId.toBuffer())}),nt=[{pubkey:et.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:et.basePubkey,isSigner:!0,isWritable:!1}]}else{const at=SYSTEM_INSTRUCTION_LAYOUTS.Assign;rt=encodeData(at,{programId:toBuffer$1(et.programId.toBuffer())}),nt=[{pubkey:et.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:nt,programId:this.programId,data:rt})}static createAccountWithSeed(et){const rt=SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed,nt=encodeData(rt,{base:toBuffer$1(et.basePubkey.toBuffer()),seed:et.seed,lamports:et.lamports,space:et.space,programId:toBuffer$1(et.programId.toBuffer())});let at=[{pubkey:et.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:et.newAccountPubkey,isSigner:!1,isWritable:!0}];return et.basePubkey!=et.fromPubkey&&at.push({pubkey:et.basePubkey,isSigner:!0,isWritable:!1}),new TransactionInstruction({keys:at,programId:this.programId,data:nt})}static createNonceAccount(et){const rt=new Transaction;"basePubkey"in et&&"seed"in et?rt.add(SystemProgram.createAccountWithSeed({fromPubkey:et.fromPubkey,newAccountPubkey:et.noncePubkey,basePubkey:et.basePubkey,seed:et.seed,lamports:et.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId})):rt.add(SystemProgram.createAccount({fromPubkey:et.fromPubkey,newAccountPubkey:et.noncePubkey,lamports:et.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId}));const nt={noncePubkey:et.noncePubkey,authorizedPubkey:et.authorizedPubkey};return rt.add(this.nonceInitialize(nt)),rt}static nonceInitialize(et){const rt=SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount,nt=encodeData(rt,{authorized:toBuffer$1(et.authorizedPubkey.toBuffer())}),at={keys:[{pubkey:et.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:this.programId,data:nt};return new TransactionInstruction(at)}static nonceAdvance(et){const rt=SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount,nt=encodeData(rt),at={keys:[{pubkey:et.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:et.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:nt};return new TransactionInstruction(at)}static nonceWithdraw(et){const rt=SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount,nt=encodeData(rt,{lamports:et.lamports});return new TransactionInstruction({keys:[{pubkey:et.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:et.toPubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:et.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:nt})}static nonceAuthorize(et){const rt=SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount,nt=encodeData(rt,{authorized:toBuffer$1(et.newAuthorizedPubkey.toBuffer())});return new TransactionInstruction({keys:[{pubkey:et.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:et.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:nt})}static allocate(et){let rt,nt;if("basePubkey"in et){const at=SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed;rt=encodeData(at,{base:toBuffer$1(et.basePubkey.toBuffer()),seed:et.seed,space:et.space,programId:toBuffer$1(et.programId.toBuffer())}),nt=[{pubkey:et.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:et.basePubkey,isSigner:!0,isWritable:!1}]}else{const at=SYSTEM_INSTRUCTION_LAYOUTS.Allocate;rt=encodeData(at,{space:et.space}),nt=[{pubkey:et.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:nt,programId:this.programId,data:rt})}}SystemProgram.programId=new PublicKey("11111111111111111111111111111111");const CHUNK_SIZE=PACKET_DATA_SIZE-300;class Loader{constructor(){}static getMinNumSignatures(et){return 2*(Math.ceil(et/Loader.chunkSize)+1+1)}static async load(et,rt,nt,at,it){{const Rt=await et.getMinimumBalanceForRentExemption(it.length),Tt=await et.getAccountInfo(nt.publicKey,"confirmed");let At=null;if(Tt!==null){if(Tt.executable)return console.error("Program load failed, account is already executable"),!1;Tt.data.length!==it.length&&(At=At||new Transaction,At.add(SystemProgram.allocate({accountPubkey:nt.publicKey,space:it.length}))),Tt.owner.equals(at)||(At=At||new Transaction,At.add(SystemProgram.assign({accountPubkey:nt.publicKey,programId:at}))),Tt.lamports<Rt&&(At=At||new Transaction,At.add(SystemProgram.transfer({fromPubkey:rt.publicKey,toPubkey:nt.publicKey,lamports:Rt-Tt.lamports})))}else At=new Transaction().add(SystemProgram.createAccount({fromPubkey:rt.publicKey,newAccountPubkey:nt.publicKey,lamports:Rt>0?Rt:1,space:it.length,programId:at}));At!==null&&await sendAndConfirmTransaction(et,At,[rt,nt],{commitment:"confirmed"})}const st=struct$1([u32$1("instruction"),u32$1("offset"),u32$1("bytesLength"),u32$1("bytesLengthPadding"),seq(u8$1("byte"),offset$1(u32$1(),-8),"bytes")]),dt=Loader.chunkSize;let pt=0,mt=it,yt=[];for(;mt.length>0;){const Rt=mt.slice(0,dt),Tt=Buffer$1.alloc(dt+16);st.encode({instruction:0,offset:pt,bytes:Rt,bytesLength:0,bytesLengthPadding:0},Tt);const At=new Transaction().add({keys:[{pubkey:nt.publicKey,isSigner:!0,isWritable:!0}],programId:at,data:Tt});yt.push(sendAndConfirmTransaction(et,At,[rt,nt],{commitment:"confirmed"})),et._rpcEndpoint.includes("solana.com")&&await sleep(1e3/4),pt+=dt,mt=mt.slice(dt)}await Promise.all(yt);{const Rt=struct$1([u32$1("instruction")]),Tt=Buffer$1.alloc(Rt.span);Rt.encode({instruction:1},Tt);const At=new Transaction().add({keys:[{pubkey:nt.publicKey,isSigner:!0,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:at,data:Tt}),xt="processed",Nt=await et.sendTransaction(At,[rt,nt],{preflightCommitment:xt}),{context:Ct,value:Ot}=await et.confirmTransaction({signature:Nt,lastValidBlockHeight:At.lastValidBlockHeight,blockhash:At.recentBlockhash},xt);if(Ot.err)throw new Error(`Transaction ${Nt} failed (${JSON.stringify(Ot)})`);for(;;){try{if(await et.getSlot({commitment:xt})>Ct.slot)break}catch{}await new Promise(kt=>setTimeout(kt,Math.round(MS_PER_SLOT/2)))}}return!0}}Loader.chunkSize=CHUNK_SIZE;const BPF_LOADER_PROGRAM_ID=new PublicKey("BPFLoader2111111111111111111111111111111111");class BpfLoader{static getMinNumSignatures(et){return Loader.getMinNumSignatures(et)}static load(et,rt,nt,at,it){return Loader.load(et,rt,nt,it,at)}}function getDefaultExportFromCjs$4(tt){return tt&&tt.__esModule&&Object.prototype.hasOwnProperty.call(tt,"default")?tt.default:tt}var objToString=Object.prototype.toString,objKeys=Object.keys||function(tt){var et=[];for(var rt in tt)et.push(rt);return et};function stringify(tt,et){var rt,nt,at,it,st,dt,pt;if(tt===!0)return"true";if(tt===!1)return"false";switch(typeof tt){case"object":if(tt===null)return null;if(tt.toJSON&&typeof tt.toJSON=="function")return stringify(tt.toJSON(),et);if(pt=objToString.call(tt),pt==="[object Array]"){for(at="[",nt=tt.length-1,rt=0;rt<nt;rt++)at+=stringify(tt[rt],!0)+",";return nt>-1&&(at+=stringify(tt[rt],!0)),at+"]"}else if(pt==="[object Object]"){for(it=objKeys(tt).sort(),nt=it.length,at="",rt=0;rt<nt;)st=it[rt],dt=stringify(tt[st],!1),dt!==void 0&&(at&&(at+=","),at+=JSON.stringify(st)+":"+dt),rt++;return"{"+at+"}"}else return JSON.stringify(tt);case"function":case"undefined":return et?null:void 0;case"string":return JSON.stringify(tt);default:return isFinite(tt)?tt:null}}var fastStableStringify=function(tt){var et=stringify(tt,!1);if(et!==void 0)return""+et},fastStableStringify$1=getDefaultExportFromCjs$4(fastStableStringify);const MINIMUM_SLOT_PER_EPOCH=32;function trailingZeros(tt){let et=0;for(;tt>1;)tt/=2,et++;return et}function nextPowerOfTwo(tt){return tt===0?1:(tt--,tt|=tt>>1,tt|=tt>>2,tt|=tt>>4,tt|=tt>>8,tt|=tt>>16,tt|=tt>>32,tt+1)}class EpochSchedule{constructor(et,rt,nt,at,it){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=et,this.leaderScheduleSlotOffset=rt,this.warmup=nt,this.firstNormalEpoch=at,this.firstNormalSlot=it}getEpoch(et){return this.getEpochAndSlotIndex(et)[0]}getEpochAndSlotIndex(et){if(et<this.firstNormalSlot){const rt=trailingZeros(nextPowerOfTwo(et+MINIMUM_SLOT_PER_EPOCH+1))-trailingZeros(MINIMUM_SLOT_PER_EPOCH)-1,nt=this.getSlotsInEpoch(rt),at=et-(nt-MINIMUM_SLOT_PER_EPOCH);return[rt,at]}else{const rt=et-this.firstNormalSlot,nt=Math.floor(rt/this.slotsPerEpoch),at=this.firstNormalEpoch+nt,it=rt%this.slotsPerEpoch;return[at,it]}}getFirstSlotInEpoch(et){return et<=this.firstNormalEpoch?(Math.pow(2,et)-1)*MINIMUM_SLOT_PER_EPOCH:(et-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(et){return this.getFirstSlotInEpoch(et)+this.getSlotsInEpoch(et)-1}getSlotsInEpoch(et){return et<this.firstNormalEpoch?Math.pow(2,et+trailingZeros(MINIMUM_SLOT_PER_EPOCH)):this.slotsPerEpoch}}var fetchImpl=globalThis.fetch;class RpcWebSocketClient extends CommonClient{constructor(et,rt,nt){const at=it=>{const st=WebSocket$1(it,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...rt});return"socket"in st?this.underlyingSocket=st.socket:this.underlyingSocket=st,st};super(at,et,rt,nt),this.underlyingSocket=void 0}call(...et){var nt;const rt=(nt=this.underlyingSocket)==null?void 0:nt.readyState;return rt===1?super.call(...et):Promise.reject(new Error("Tried to call a JSON-RPC method `"+et[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+rt+")"))}notify(...et){var nt;const rt=(nt=this.underlyingSocket)==null?void 0:nt.readyState;return rt===1?super.notify(...et):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+et[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+rt+")"))}}function decodeData(tt,et){let rt;try{rt=tt.layout.decode(et)}catch(nt){throw new Error("invalid instruction; "+nt)}if(rt.typeIndex!==tt.index)throw new Error(`invalid account data; account type mismatch ${rt.typeIndex} != ${tt.index}`);return rt}const LOOKUP_TABLE_META_SIZE=56;class AddressLookupTableAccount{constructor(et){this.key=void 0,this.state=void 0,this.key=et.key,this.state=et.state}isActive(){const et=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===et}static deserialize(et){const rt=decodeData(LookupTableMetaLayout,et),nt=et.length-LOOKUP_TABLE_META_SIZE;assert$1(nt>=0,"lookup table is invalid"),assert$1(nt%32===0,"lookup table is invalid");const at=nt/32,{addresses:it}=struct$1([seq(publicKey$4(),at,"addresses")]).decode(et.slice(LOOKUP_TABLE_META_SIZE));return{deactivationSlot:rt.deactivationSlot,lastExtendedSlot:rt.lastExtendedSlot,lastExtendedSlotStartIndex:rt.lastExtendedStartIndex,authority:rt.authority.length!==0?new PublicKey(rt.authority[0]):void 0,addresses:it.map(st=>new PublicKey(st))}}}const LookupTableMetaLayout={index:1,layout:struct$1([u32$1("typeIndex"),u64$2("deactivationSlot"),nu64$1("lastExtendedSlot"),u8$1("lastExtendedStartIndex"),u8$1(),seq(publicKey$4(),offset$1(u8$1(),-1),"authority")])},URL_RE=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function makeWebsocketUrl(tt){const et=tt.match(URL_RE);if(et==null)throw TypeError(`Failed to validate endpoint URL \`${tt}\``);const[rt,nt,at,it]=et,st=tt.startsWith("https:")?"wss:":"ws:",dt=at==null?null:parseInt(at.slice(1),10),pt=dt==null?"":`:${dt+1}`;return`${st}//${nt}${pt}${it}`}const PublicKeyFromString=coerce$1(instance(PublicKey),string$1(),tt=>new PublicKey(tt)),RawAccountDataResult=tuple([string$1(),literal$1("base64")]),BufferFromRawAccountData=coerce$1(instance(Buffer$1),RawAccountDataResult,tt=>Buffer$1.from(tt[0],"base64")),BLOCKHASH_CACHE_TIMEOUT_MS=30*1e3;function assertEndpointUrl(tt){if(/^https?:/.test(tt)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return tt}function extractCommitmentFromConfig(tt){let et,rt;if(typeof tt=="string")et=tt;else if(tt){const{commitment:nt,...at}=tt;et=nt,rt=at}return{commitment:et,config:rt}}function createRpcResult$1(tt){return union$3([type$8({jsonrpc:literal$1("2.0"),id:string$1(),result:tt}),type$8({jsonrpc:literal$1("2.0"),id:string$1(),error:type$8({code:unknown$1(),message:string$1(),data:optional$1(any$2())})})])}const UnknownRpcResult$1=createRpcResult$1(unknown$1());function jsonRpcResult$1(tt){return coerce$1(createRpcResult$1(tt),UnknownRpcResult$1,et=>"error"in et?et:{...et,result:create$2(et.result,tt)})}function jsonRpcResultAndContext$1(tt){return jsonRpcResult$1(type$8({context:type$8({slot:number$1()}),value:tt}))}function notificationResultAndContext(tt){return type$8({context:type$8({slot:number$1()}),value:tt})}function versionedMessageFromResponse(tt,et){return tt===0?new MessageV0({header:et.header,staticAccountKeys:et.accountKeys.map(rt=>new PublicKey(rt)),recentBlockhash:et.recentBlockhash,compiledInstructions:et.instructions.map(rt=>({programIdIndex:rt.programIdIndex,accountKeyIndexes:rt.accounts,data:bs58$5.decode(rt.data)})),addressTableLookups:et.addressTableLookups}):new Message(et)}const GetInflationGovernorResult=type$8({foundation:number$1(),foundationTerm:number$1(),initial:number$1(),taper:number$1(),terminal:number$1()}),GetInflationRewardResult=jsonRpcResult$1(array$1(nullable$1(type$8({epoch:number$1(),effectiveSlot:number$1(),amount:number$1(),postBalance:number$1(),commission:optional$1(nullable$1(number$1()))})))),GetRecentPrioritizationFeesResult=array$1(type$8({slot:number$1(),prioritizationFee:number$1()})),GetInflationRateResult=type$8({total:number$1(),validator:number$1(),foundation:number$1(),epoch:number$1()}),GetEpochInfoResult=type$8({epoch:number$1(),slotIndex:number$1(),slotsInEpoch:number$1(),absoluteSlot:number$1(),blockHeight:optional$1(number$1()),transactionCount:optional$1(number$1())}),GetEpochScheduleResult=type$8({slotsPerEpoch:number$1(),leaderScheduleSlotOffset:number$1(),warmup:boolean$1(),firstNormalEpoch:number$1(),firstNormalSlot:number$1()}),GetLeaderScheduleResult=record(string$1(),array$1(number$1())),TransactionErrorResult=nullable$1(union$3([type$8({}),string$1()])),SignatureStatusResult=type$8({err:TransactionErrorResult}),SignatureReceivedResult=literal$1("receivedSignature"),VersionResult=type$8({"solana-core":string$1(),"feature-set":optional$1(number$1())}),SimulatedTransactionResponseStruct$1=jsonRpcResultAndContext$1(type$8({err:nullable$1(union$3([type$8({}),string$1()])),logs:nullable$1(array$1(string$1())),accounts:optional$1(nullable$1(array$1(nullable$1(type$8({executable:boolean$1(),owner:string$1(),lamports:number$1(),data:array$1(string$1()),rentEpoch:optional$1(number$1())}))))),unitsConsumed:optional$1(number$1()),returnData:optional$1(nullable$1(type$8({programId:string$1(),data:tuple([string$1(),literal$1("base64")])})))})),BlockProductionResponseStruct=jsonRpcResultAndContext$1(type$8({byIdentity:record(string$1(),array$1(number$1())),range:type$8({firstSlot:number$1(),lastSlot:number$1()})}));function createRpcClient(tt,et,rt,nt,at,it){const st=rt||fetchImpl;let dt;it!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let pt;return nt&&(pt=async(yt,Rt)=>{const Tt=await new Promise((At,xt)=>{try{nt(yt,Rt,(Nt,Ct)=>At([Nt,Ct]))}catch(Nt){xt(Nt)}});return await st(...Tt)}),new RpcClient(async(yt,Rt)=>{const Tt={method:"POST",body:yt,agent:dt,headers:Object.assign({"Content-Type":"application/json"},et||{},COMMON_HTTP_HEADERS)};try{let At=5,xt,Nt=500;for(;pt?xt=await pt(tt,Tt):xt=await st(tt,Tt),!(xt.status!==429||at===!0||(At-=1,At===0));)console.error(`Server responded with ${xt.status} ${xt.statusText}.  Retrying after ${Nt}ms delay...`),await sleep(Nt),Nt*=2;const Ct=await xt.text();xt.ok?Rt(null,Ct):Rt(new Error(`${xt.status} ${xt.statusText}: ${Ct}`))}catch(At){At instanceof Error&&Rt(At)}},{})}function createRpcRequest(tt){return(et,rt)=>new Promise((nt,at)=>{tt.request(et,rt,(it,st)=>{if(it){at(it);return}nt(st)})})}function createRpcBatchRequest(tt){return et=>new Promise((rt,nt)=>{et.length===0&&rt([]);const at=et.map(it=>tt.request(it.methodName,it.args));tt.request(at,(it,st)=>{if(it){nt(it);return}rt(st)})})}const GetInflationGovernorRpcResult=jsonRpcResult$1(GetInflationGovernorResult),GetInflationRateRpcResult=jsonRpcResult$1(GetInflationRateResult),GetRecentPrioritizationFeesRpcResult=jsonRpcResult$1(GetRecentPrioritizationFeesResult),GetEpochInfoRpcResult=jsonRpcResult$1(GetEpochInfoResult),GetEpochScheduleRpcResult=jsonRpcResult$1(GetEpochScheduleResult),GetLeaderScheduleRpcResult=jsonRpcResult$1(GetLeaderScheduleResult),SlotRpcResult=jsonRpcResult$1(number$1()),GetSupplyRpcResult=jsonRpcResultAndContext$1(type$8({total:number$1(),circulating:number$1(),nonCirculating:number$1(),nonCirculatingAccounts:array$1(PublicKeyFromString)})),TokenAmountResult=type$8({amount:string$1(),uiAmount:nullable$1(number$1()),decimals:number$1(),uiAmountString:optional$1(string$1())}),GetTokenLargestAccountsResult=jsonRpcResultAndContext$1(array$1(type$8({address:PublicKeyFromString,amount:string$1(),uiAmount:nullable$1(number$1()),decimals:number$1(),uiAmountString:optional$1(string$1())}))),GetTokenAccountsByOwner=jsonRpcResultAndContext$1(array$1(type$8({pubkey:PublicKeyFromString,account:type$8({executable:boolean$1(),owner:PublicKeyFromString,lamports:number$1(),data:BufferFromRawAccountData,rentEpoch:number$1()})}))),ParsedAccountDataResult=type$8({program:string$1(),parsed:unknown$1(),space:number$1()}),GetParsedTokenAccountsByOwner=jsonRpcResultAndContext$1(array$1(type$8({pubkey:PublicKeyFromString,account:type$8({executable:boolean$1(),owner:PublicKeyFromString,lamports:number$1(),data:ParsedAccountDataResult,rentEpoch:number$1()})}))),GetLargestAccountsRpcResult=jsonRpcResultAndContext$1(array$1(type$8({lamports:number$1(),address:PublicKeyFromString}))),AccountInfoResult=type$8({executable:boolean$1(),owner:PublicKeyFromString,lamports:number$1(),data:BufferFromRawAccountData,rentEpoch:number$1()}),KeyedAccountInfoResult=type$8({pubkey:PublicKeyFromString,account:AccountInfoResult}),ParsedOrRawAccountData=coerce$1(union$3([instance(Buffer$1),ParsedAccountDataResult]),union$3([RawAccountDataResult,ParsedAccountDataResult]),tt=>Array.isArray(tt)?create$2(tt,BufferFromRawAccountData):tt),ParsedAccountInfoResult=type$8({executable:boolean$1(),owner:PublicKeyFromString,lamports:number$1(),data:ParsedOrRawAccountData,rentEpoch:number$1()}),KeyedParsedAccountInfoResult=type$8({pubkey:PublicKeyFromString,account:ParsedAccountInfoResult}),StakeActivationResult=type$8({state:union$3([literal$1("active"),literal$1("inactive"),literal$1("activating"),literal$1("deactivating")]),active:number$1(),inactive:number$1()}),GetConfirmedSignaturesForAddress2RpcResult=jsonRpcResult$1(array$1(type$8({signature:string$1(),slot:number$1(),err:TransactionErrorResult,memo:nullable$1(string$1()),blockTime:optional$1(nullable$1(number$1()))}))),GetSignaturesForAddressRpcResult=jsonRpcResult$1(array$1(type$8({signature:string$1(),slot:number$1(),err:TransactionErrorResult,memo:nullable$1(string$1()),blockTime:optional$1(nullable$1(number$1()))}))),AccountNotificationResult=type$8({subscription:number$1(),result:notificationResultAndContext(AccountInfoResult)}),ProgramAccountInfoResult=type$8({pubkey:PublicKeyFromString,account:AccountInfoResult}),ProgramAccountNotificationResult=type$8({subscription:number$1(),result:notificationResultAndContext(ProgramAccountInfoResult)}),SlotInfoResult=type$8({parent:number$1(),slot:number$1(),root:number$1()}),SlotNotificationResult=type$8({subscription:number$1(),result:SlotInfoResult}),SlotUpdateResult=union$3([type$8({type:union$3([literal$1("firstShredReceived"),literal$1("completed"),literal$1("optimisticConfirmation"),literal$1("root")]),slot:number$1(),timestamp:number$1()}),type$8({type:literal$1("createdBank"),parent:number$1(),slot:number$1(),timestamp:number$1()}),type$8({type:literal$1("frozen"),slot:number$1(),timestamp:number$1(),stats:type$8({numTransactionEntries:number$1(),numSuccessfulTransactions:number$1(),numFailedTransactions:number$1(),maxTransactionsPerEntry:number$1()})}),type$8({type:literal$1("dead"),slot:number$1(),timestamp:number$1(),err:string$1()})]),SlotUpdateNotificationResult=type$8({subscription:number$1(),result:SlotUpdateResult}),SignatureNotificationResult=type$8({subscription:number$1(),result:notificationResultAndContext(union$3([SignatureStatusResult,SignatureReceivedResult]))}),RootNotificationResult=type$8({subscription:number$1(),result:number$1()}),ContactInfoResult=type$8({pubkey:string$1(),gossip:nullable$1(string$1()),tpu:nullable$1(string$1()),rpc:nullable$1(string$1()),version:nullable$1(string$1())}),VoteAccountInfoResult=type$8({votePubkey:string$1(),nodePubkey:string$1(),activatedStake:number$1(),epochVoteAccount:boolean$1(),epochCredits:array$1(tuple([number$1(),number$1(),number$1()])),commission:number$1(),lastVote:number$1(),rootSlot:nullable$1(number$1())}),GetVoteAccounts=jsonRpcResult$1(type$8({current:array$1(VoteAccountInfoResult),delinquent:array$1(VoteAccountInfoResult)})),ConfirmationStatus=union$3([literal$1("processed"),literal$1("confirmed"),literal$1("finalized")]),SignatureStatusResponse=type$8({slot:number$1(),confirmations:nullable$1(number$1()),err:TransactionErrorResult,confirmationStatus:optional$1(ConfirmationStatus)}),GetSignatureStatusesRpcResult=jsonRpcResultAndContext$1(array$1(nullable$1(SignatureStatusResponse))),GetMinimumBalanceForRentExemptionRpcResult=jsonRpcResult$1(number$1()),AddressTableLookupStruct=type$8({accountKey:PublicKeyFromString,writableIndexes:array$1(number$1()),readonlyIndexes:array$1(number$1())}),ConfirmedTransactionResult=type$8({signatures:array$1(string$1()),message:type$8({accountKeys:array$1(string$1()),header:type$8({numRequiredSignatures:number$1(),numReadonlySignedAccounts:number$1(),numReadonlyUnsignedAccounts:number$1()}),instructions:array$1(type$8({accounts:array$1(number$1()),data:string$1(),programIdIndex:number$1()})),recentBlockhash:string$1(),addressTableLookups:optional$1(array$1(AddressTableLookupStruct))})}),AnnotatedAccountKey=type$8({pubkey:PublicKeyFromString,signer:boolean$1(),writable:boolean$1(),source:optional$1(union$3([literal$1("transaction"),literal$1("lookupTable")]))}),ConfirmedTransactionAccountsModeResult=type$8({accountKeys:array$1(AnnotatedAccountKey),signatures:array$1(string$1())}),ParsedInstructionResult=type$8({parsed:unknown$1(),program:string$1(),programId:PublicKeyFromString}),RawInstructionResult=type$8({accounts:array$1(PublicKeyFromString),data:string$1(),programId:PublicKeyFromString}),InstructionResult=union$3([RawInstructionResult,ParsedInstructionResult]),UnknownInstructionResult=union$3([type$8({parsed:unknown$1(),program:string$1(),programId:string$1()}),type$8({accounts:array$1(string$1()),data:string$1(),programId:string$1()})]),ParsedOrRawInstruction=coerce$1(InstructionResult,UnknownInstructionResult,tt=>"accounts"in tt?create$2(tt,RawInstructionResult):create$2(tt,ParsedInstructionResult)),ParsedConfirmedTransactionResult=type$8({signatures:array$1(string$1()),message:type$8({accountKeys:array$1(AnnotatedAccountKey),instructions:array$1(ParsedOrRawInstruction),recentBlockhash:string$1(),addressTableLookups:optional$1(nullable$1(array$1(AddressTableLookupStruct)))})}),TokenBalanceResult=type$8({accountIndex:number$1(),mint:string$1(),owner:optional$1(string$1()),uiTokenAmount:TokenAmountResult}),LoadedAddressesResult=type$8({writable:array$1(PublicKeyFromString),readonly:array$1(PublicKeyFromString)}),ConfirmedTransactionMetaResult=type$8({err:TransactionErrorResult,fee:number$1(),innerInstructions:optional$1(nullable$1(array$1(type$8({index:number$1(),instructions:array$1(type$8({accounts:array$1(number$1()),data:string$1(),programIdIndex:number$1()}))})))),preBalances:array$1(number$1()),postBalances:array$1(number$1()),logMessages:optional$1(nullable$1(array$1(string$1()))),preTokenBalances:optional$1(nullable$1(array$1(TokenBalanceResult))),postTokenBalances:optional$1(nullable$1(array$1(TokenBalanceResult))),loadedAddresses:optional$1(LoadedAddressesResult),computeUnitsConsumed:optional$1(number$1())}),ParsedConfirmedTransactionMetaResult=type$8({err:TransactionErrorResult,fee:number$1(),innerInstructions:optional$1(nullable$1(array$1(type$8({index:number$1(),instructions:array$1(ParsedOrRawInstruction)})))),preBalances:array$1(number$1()),postBalances:array$1(number$1()),logMessages:optional$1(nullable$1(array$1(string$1()))),preTokenBalances:optional$1(nullable$1(array$1(TokenBalanceResult))),postTokenBalances:optional$1(nullable$1(array$1(TokenBalanceResult))),loadedAddresses:optional$1(LoadedAddressesResult),computeUnitsConsumed:optional$1(number$1())}),TransactionVersionStruct=union$3([literal$1(0),literal$1("legacy")]),RewardsResult=type$8({pubkey:string$1(),lamports:number$1(),postBalance:nullable$1(number$1()),rewardType:nullable$1(string$1()),commission:optional$1(nullable$1(number$1()))}),GetBlockRpcResult=jsonRpcResult$1(nullable$1(type$8({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$1(),transactions:array$1(type$8({transaction:ConfirmedTransactionResult,meta:nullable$1(ConfirmedTransactionMetaResult),version:optional$1(TransactionVersionStruct)})),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$1()),blockHeight:nullable$1(number$1())}))),GetNoneModeBlockRpcResult=jsonRpcResult$1(nullable$1(type$8({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$1(),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$1()),blockHeight:nullable$1(number$1())}))),GetAccountsModeBlockRpcResult=jsonRpcResult$1(nullable$1(type$8({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$1(),transactions:array$1(type$8({transaction:ConfirmedTransactionAccountsModeResult,meta:nullable$1(ConfirmedTransactionMetaResult),version:optional$1(TransactionVersionStruct)})),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$1()),blockHeight:nullable$1(number$1())}))),GetParsedBlockRpcResult=jsonRpcResult$1(nullable$1(type$8({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$1(),transactions:array$1(type$8({transaction:ParsedConfirmedTransactionResult,meta:nullable$1(ParsedConfirmedTransactionMetaResult),version:optional$1(TransactionVersionStruct)})),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$1()),blockHeight:nullable$1(number$1())}))),GetParsedAccountsModeBlockRpcResult=jsonRpcResult$1(nullable$1(type$8({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$1(),transactions:array$1(type$8({transaction:ConfirmedTransactionAccountsModeResult,meta:nullable$1(ParsedConfirmedTransactionMetaResult),version:optional$1(TransactionVersionStruct)})),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$1()),blockHeight:nullable$1(number$1())}))),GetParsedNoneModeBlockRpcResult=jsonRpcResult$1(nullable$1(type$8({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$1(),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$1()),blockHeight:nullable$1(number$1())}))),GetConfirmedBlockRpcResult=jsonRpcResult$1(nullable$1(type$8({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$1(),transactions:array$1(type$8({transaction:ConfirmedTransactionResult,meta:nullable$1(ConfirmedTransactionMetaResult)})),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$1())}))),GetBlockSignaturesRpcResult=jsonRpcResult$1(nullable$1(type$8({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$1(),signatures:array$1(string$1()),blockTime:nullable$1(number$1())}))),GetTransactionRpcResult=jsonRpcResult$1(nullable$1(type$8({slot:number$1(),meta:nullable$1(ConfirmedTransactionMetaResult),blockTime:optional$1(nullable$1(number$1())),transaction:ConfirmedTransactionResult,version:optional$1(TransactionVersionStruct)}))),GetParsedTransactionRpcResult=jsonRpcResult$1(nullable$1(type$8({slot:number$1(),transaction:ParsedConfirmedTransactionResult,meta:nullable$1(ParsedConfirmedTransactionMetaResult),blockTime:optional$1(nullable$1(number$1())),version:optional$1(TransactionVersionStruct)}))),GetRecentBlockhashAndContextRpcResult=jsonRpcResultAndContext$1(type$8({blockhash:string$1(),feeCalculator:type$8({lamportsPerSignature:number$1()})})),GetLatestBlockhashRpcResult=jsonRpcResultAndContext$1(type$8({blockhash:string$1(),lastValidBlockHeight:number$1()})),IsBlockhashValidRpcResult=jsonRpcResultAndContext$1(boolean$1()),PerfSampleResult=type$8({slot:number$1(),numTransactions:number$1(),numSlots:number$1(),samplePeriodSecs:number$1()}),GetRecentPerformanceSamplesRpcResult=jsonRpcResult$1(array$1(PerfSampleResult)),GetFeeCalculatorRpcResult=jsonRpcResultAndContext$1(nullable$1(type$8({feeCalculator:type$8({lamportsPerSignature:number$1()})}))),RequestAirdropRpcResult=jsonRpcResult$1(string$1()),SendTransactionRpcResult=jsonRpcResult$1(string$1()),LogsResult=type$8({err:TransactionErrorResult,logs:array$1(string$1()),signature:string$1()}),LogsNotificationResult=type$8({result:notificationResultAndContext(LogsResult),subscription:number$1()}),COMMON_HTTP_HEADERS={"solana-client":"js/0.0.0-development"};class Connection{constructor(et,rt){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const mt={};return async yt=>{const{commitment:Rt,config:Tt}=extractCommitmentFromConfig(yt),At=this._buildArgs([],Rt,void 0,Tt),xt=fastStableStringify$1(At);return mt[xt]=mt[xt]??(async()=>{try{const Nt=await this._rpcRequest("getBlockHeight",At),Ct=create$2(Nt,jsonRpcResult$1(number$1()));if("error"in Ct)throw new SolanaJSONRPCError(Ct.error,"failed to get block height information");return Ct.result}finally{delete mt[xt]}})(),await mt[xt]}})();let nt,at,it,st,dt,pt;rt&&typeof rt=="string"?this._commitment=rt:rt&&(this._commitment=rt.commitment,this._confirmTransactionInitialTimeout=rt.confirmTransactionInitialTimeout,nt=rt.wsEndpoint,at=rt.httpHeaders,it=rt.fetch,st=rt.fetchMiddleware,dt=rt.disableRetryOnRateLimit,pt=rt.httpAgent),this._rpcEndpoint=assertEndpointUrl(et),this._rpcWsEndpoint=nt||makeWebsocketUrl(et),this._rpcClient=createRpcClient(et,at,it,st,dt,pt),this._rpcRequest=createRpcRequest(this._rpcClient),this._rpcBatchRequest=createRpcBatchRequest(this._rpcClient),this._rpcWebSocket=new RpcWebSocketClient(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),it=this._buildArgs([et.toBase58()],nt,void 0,at),st=await this._rpcRequest("getBalance",it),dt=create$2(st,jsonRpcResultAndContext$1(number$1()));if("error"in dt)throw new SolanaJSONRPCError(dt.error,`failed to get balance for ${et.toBase58()}`);return dt.result}async getBalance(et,rt){return await this.getBalanceAndContext(et,rt).then(nt=>nt.value).catch(nt=>{throw new Error("failed to get balance of account "+et.toBase58()+": "+nt)})}async getBlockTime(et){const rt=await this._rpcRequest("getBlockTime",[et]),nt=create$2(rt,jsonRpcResult$1(nullable$1(number$1())));if("error"in nt)throw new SolanaJSONRPCError(nt.error,`failed to get block time for slot ${et}`);return nt.result}async getMinimumLedgerSlot(){const et=await this._rpcRequest("minimumLedgerSlot",[]),rt=create$2(et,jsonRpcResult$1(number$1()));if("error"in rt)throw new SolanaJSONRPCError(rt.error,"failed to get minimum ledger slot");return rt.result}async getFirstAvailableBlock(){const et=await this._rpcRequest("getFirstAvailableBlock",[]),rt=create$2(et,SlotRpcResult);if("error"in rt)throw new SolanaJSONRPCError(rt.error,"failed to get first available block");return rt.result}async getSupply(et){let rt={};typeof et=="string"?rt={commitment:et}:et?rt={...et,commitment:et&&et.commitment||this.commitment}:rt={commitment:this.commitment};const nt=await this._rpcRequest("getSupply",[rt]),at=create$2(nt,GetSupplyRpcResult);if("error"in at)throw new SolanaJSONRPCError(at.error,"failed to get supply");return at.result}async getTokenSupply(et,rt){const nt=this._buildArgs([et.toBase58()],rt),at=await this._rpcRequest("getTokenSupply",nt),it=create$2(at,jsonRpcResultAndContext$1(TokenAmountResult));if("error"in it)throw new SolanaJSONRPCError(it.error,"failed to get token supply");return it.result}async getTokenAccountBalance(et,rt){const nt=this._buildArgs([et.toBase58()],rt),at=await this._rpcRequest("getTokenAccountBalance",nt),it=create$2(at,jsonRpcResultAndContext$1(TokenAmountResult));if("error"in it)throw new SolanaJSONRPCError(it.error,"failed to get token account balance");return it.result}async getTokenAccountsByOwner(et,rt,nt){const{commitment:at,config:it}=extractCommitmentFromConfig(nt);let st=[et.toBase58()];"mint"in rt?st.push({mint:rt.mint.toBase58()}):st.push({programId:rt.programId.toBase58()});const dt=this._buildArgs(st,at,"base64",it),pt=await this._rpcRequest("getTokenAccountsByOwner",dt),mt=create$2(pt,GetTokenAccountsByOwner);if("error"in mt)throw new SolanaJSONRPCError(mt.error,`failed to get token accounts owned by account ${et.toBase58()}`);return mt.result}async getParsedTokenAccountsByOwner(et,rt,nt){let at=[et.toBase58()];"mint"in rt?at.push({mint:rt.mint.toBase58()}):at.push({programId:rt.programId.toBase58()});const it=this._buildArgs(at,nt,"jsonParsed"),st=await this._rpcRequest("getTokenAccountsByOwner",it),dt=create$2(st,GetParsedTokenAccountsByOwner);if("error"in dt)throw new SolanaJSONRPCError(dt.error,`failed to get token accounts owned by account ${et.toBase58()}`);return dt.result}async getLargestAccounts(et){const rt={...et,commitment:et&&et.commitment||this.commitment},nt=rt.filter||rt.commitment?[rt]:[],at=await this._rpcRequest("getLargestAccounts",nt),it=create$2(at,GetLargestAccountsRpcResult);if("error"in it)throw new SolanaJSONRPCError(it.error,"failed to get largest accounts");return it.result}async getTokenLargestAccounts(et,rt){const nt=this._buildArgs([et.toBase58()],rt),at=await this._rpcRequest("getTokenLargestAccounts",nt),it=create$2(at,GetTokenLargestAccountsResult);if("error"in it)throw new SolanaJSONRPCError(it.error,"failed to get token largest accounts");return it.result}async getAccountInfoAndContext(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),it=this._buildArgs([et.toBase58()],nt,"base64",at),st=await this._rpcRequest("getAccountInfo",it),dt=create$2(st,jsonRpcResultAndContext$1(nullable$1(AccountInfoResult)));if("error"in dt)throw new SolanaJSONRPCError(dt.error,`failed to get info about account ${et.toBase58()}`);return dt.result}async getParsedAccountInfo(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),it=this._buildArgs([et.toBase58()],nt,"jsonParsed",at),st=await this._rpcRequest("getAccountInfo",it),dt=create$2(st,jsonRpcResultAndContext$1(nullable$1(ParsedAccountInfoResult)));if("error"in dt)throw new SolanaJSONRPCError(dt.error,`failed to get info about account ${et.toBase58()}`);return dt.result}async getAccountInfo(et,rt){try{return(await this.getAccountInfoAndContext(et,rt)).value}catch(nt){throw new Error("failed to get info about account "+et.toBase58()+": "+nt)}}async getMultipleParsedAccounts(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),it=et.map(mt=>mt.toBase58()),st=this._buildArgs([it],nt,"jsonParsed",at),dt=await this._rpcRequest("getMultipleAccounts",st),pt=create$2(dt,jsonRpcResultAndContext$1(array$1(nullable$1(ParsedAccountInfoResult))));if("error"in pt)throw new SolanaJSONRPCError(pt.error,`failed to get info for accounts ${it}`);return pt.result}async getMultipleAccountsInfoAndContext(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),it=et.map(mt=>mt.toBase58()),st=this._buildArgs([it],nt,"base64",at),dt=await this._rpcRequest("getMultipleAccounts",st),pt=create$2(dt,jsonRpcResultAndContext$1(array$1(nullable$1(AccountInfoResult))));if("error"in pt)throw new SolanaJSONRPCError(pt.error,`failed to get info for accounts ${it}`);return pt.result}async getMultipleAccountsInfo(et,rt){return(await this.getMultipleAccountsInfoAndContext(et,rt)).value}async getStakeActivation(et,rt,nt){const{commitment:at,config:it}=extractCommitmentFromConfig(rt),st=this._buildArgs([et.toBase58()],at,void 0,{...it,epoch:nt??(it==null?void 0:it.epoch)}),dt=await this._rpcRequest("getStakeActivation",st),pt=create$2(dt,jsonRpcResult$1(StakeActivationResult));if("error"in pt)throw new SolanaJSONRPCError(pt.error,`failed to get Stake Activation ${et.toBase58()}`);return pt.result}async getProgramAccounts(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),{encoding:it,...st}=at||{},dt=this._buildArgs([et.toBase58()],nt,it||"base64",st),pt=await this._rpcRequest("getProgramAccounts",dt),mt=array$1(KeyedAccountInfoResult),yt=st.withContext===!0?create$2(pt,jsonRpcResultAndContext$1(mt)):create$2(pt,jsonRpcResult$1(mt));if("error"in yt)throw new SolanaJSONRPCError(yt.error,`failed to get accounts owned by program ${et.toBase58()}`);return yt.result}async getParsedProgramAccounts(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),it=this._buildArgs([et.toBase58()],nt,"jsonParsed",at),st=await this._rpcRequest("getProgramAccounts",it),dt=create$2(st,jsonRpcResult$1(array$1(KeyedParsedAccountInfoResult)));if("error"in dt)throw new SolanaJSONRPCError(dt.error,`failed to get accounts owned by program ${et.toBase58()}`);return dt.result}async confirmTransaction(et,rt){var it;let nt;if(typeof et=="string")nt=et;else{const st=et;if((it=st.abortSignal)!=null&&it.aborted)return Promise.reject(st.abortSignal.reason);nt=st.signature}let at;try{at=bs58$5.decode(nt)}catch{throw new Error("signature must be base58 encoded: "+nt)}return assert$1(at.length===64,"signature has invalid length"),typeof et=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:rt||this.commitment,signature:nt}):"lastValidBlockHeight"in et?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:rt||this.commitment,strategy:et}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:rt||this.commitment,strategy:et})}getCancellationPromise(et){return new Promise((rt,nt)=>{et!=null&&(et.aborted?nt(et.reason):et.addEventListener("abort",()=>{nt(et.reason)}))})}getTransactionConfirmationPromise({commitment:et,signature:rt}){let nt,at,it=!1;const st=new Promise((pt,mt)=>{try{nt=this.onSignature(rt,(Rt,Tt)=>{nt=void 0;const At={context:Tt,value:Rt};pt({__type:TransactionStatus.PROCESSED,response:At})},et);const yt=new Promise(Rt=>{nt==null?Rt():at=this._onSubscriptionStateChange(nt,Tt=>{Tt==="subscribed"&&Rt()})});(async()=>{if(await yt,it)return;const Rt=await this.getSignatureStatus(rt);if(it||Rt==null)return;const{context:Tt,value:At}=Rt;if(At!=null)if(At!=null&&At.err)mt(At.err);else{switch(et){case"confirmed":case"single":case"singleGossip":{if(At.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(At.confirmationStatus==="processed"||At.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}it=!0,pt({__type:TransactionStatus.PROCESSED,response:{context:Tt,value:At}})}})()}catch(yt){mt(yt)}});return{abortConfirmation:()=>{at&&(at(),at=void 0),nt!=null&&(this.removeSignatureListener(nt),nt=void 0)},confirmationPromise:st}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:et,strategy:{abortSignal:rt,lastValidBlockHeight:nt,signature:at}}){let it=!1;const st=new Promise(Rt=>{const Tt=async()=>{try{return await this.getBlockHeight(et)}catch{return-1}};(async()=>{let At=await Tt();if(!it){for(;At<=nt;)if(await sleep(1e3),it||(At=await Tt(),it))return;Rt({__type:TransactionStatus.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:dt,confirmationPromise:pt}=this.getTransactionConfirmationPromise({commitment:et,signature:at}),mt=this.getCancellationPromise(rt);let yt;try{const Rt=await Promise.race([mt,pt,st]);if(Rt.__type===TransactionStatus.PROCESSED)yt=Rt.response;else throw new TransactionExpiredBlockheightExceededError(at)}finally{it=!0,dt()}return yt}async confirmTransactionUsingDurableNonceStrategy({commitment:et,strategy:{abortSignal:rt,minContextSlot:nt,nonceAccountPubkey:at,nonceValue:it,signature:st}}){let dt=!1;const pt=new Promise(At=>{let xt=it,Nt=null;const Ct=async()=>{try{const{context:Ot,value:kt}=await this.getNonceAndContext(at,{commitment:et,minContextSlot:nt});return Nt=Ot.slot,kt==null?void 0:kt.nonce}catch{return xt}};(async()=>{if(xt=await Ct(),!dt)for(;;){if(it!==xt){At({__type:TransactionStatus.NONCE_INVALID,slotInWhichNonceDidAdvance:Nt});return}if(await sleep(2e3),dt||(xt=await Ct(),dt))return}})()}),{abortConfirmation:mt,confirmationPromise:yt}=this.getTransactionConfirmationPromise({commitment:et,signature:st}),Rt=this.getCancellationPromise(rt);let Tt;try{const At=await Promise.race([Rt,yt,pt]);if(At.__type===TransactionStatus.PROCESSED)Tt=At.response;else{let xt;for(;;){const Nt=await this.getSignatureStatus(st);if(Nt==null)break;if(Nt.context.slot<(At.slotInWhichNonceDidAdvance??nt)){await sleep(400);continue}xt=Nt;break}if(xt!=null&&xt.value){const Nt=et||"finalized",{confirmationStatus:Ct}=xt.value;switch(Nt){case"processed":case"recent":if(Ct!=="processed"&&Ct!=="confirmed"&&Ct!=="finalized")throw new TransactionExpiredNonceInvalidError(st);break;case"confirmed":case"single":case"singleGossip":if(Ct!=="confirmed"&&Ct!=="finalized")throw new TransactionExpiredNonceInvalidError(st);break;case"finalized":case"max":case"root":if(Ct!=="finalized")throw new TransactionExpiredNonceInvalidError(st);break;default:}Tt={context:xt.context,value:{err:xt.value.err}}}else throw new TransactionExpiredNonceInvalidError(st)}}finally{dt=!0,mt()}return Tt}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:et,signature:rt}){let nt;const at=new Promise(pt=>{let mt=this._confirmTransactionInitialTimeout||6e4;switch(et){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{mt=this._confirmTransactionInitialTimeout||3e4;break}}nt=setTimeout(()=>pt({__type:TransactionStatus.TIMED_OUT,timeoutMs:mt}),mt)}),{abortConfirmation:it,confirmationPromise:st}=this.getTransactionConfirmationPromise({commitment:et,signature:rt});let dt;try{const pt=await Promise.race([st,at]);if(pt.__type===TransactionStatus.PROCESSED)dt=pt.response;else throw new TransactionExpiredTimeoutError(rt,pt.timeoutMs/1e3)}finally{clearTimeout(nt),it()}return dt}async getClusterNodes(){const et=await this._rpcRequest("getClusterNodes",[]),rt=create$2(et,jsonRpcResult$1(array$1(ContactInfoResult)));if("error"in rt)throw new SolanaJSONRPCError(rt.error,"failed to get cluster nodes");return rt.result}async getVoteAccounts(et){const rt=this._buildArgs([],et),nt=await this._rpcRequest("getVoteAccounts",rt),at=create$2(nt,GetVoteAccounts);if("error"in at)throw new SolanaJSONRPCError(at.error,"failed to get vote accounts");return at.result}async getSlot(et){const{commitment:rt,config:nt}=extractCommitmentFromConfig(et),at=this._buildArgs([],rt,void 0,nt),it=await this._rpcRequest("getSlot",at),st=create$2(it,jsonRpcResult$1(number$1()));if("error"in st)throw new SolanaJSONRPCError(st.error,"failed to get slot");return st.result}async getSlotLeader(et){const{commitment:rt,config:nt}=extractCommitmentFromConfig(et),at=this._buildArgs([],rt,void 0,nt),it=await this._rpcRequest("getSlotLeader",at),st=create$2(it,jsonRpcResult$1(string$1()));if("error"in st)throw new SolanaJSONRPCError(st.error,"failed to get slot leader");return st.result}async getSlotLeaders(et,rt){const nt=[et,rt],at=await this._rpcRequest("getSlotLeaders",nt),it=create$2(at,jsonRpcResult$1(array$1(PublicKeyFromString)));if("error"in it)throw new SolanaJSONRPCError(it.error,"failed to get slot leaders");return it.result}async getSignatureStatus(et,rt){const{context:nt,value:at}=await this.getSignatureStatuses([et],rt);assert$1(at.length===1);const it=at[0];return{context:nt,value:it}}async getSignatureStatuses(et,rt){const nt=[et];rt&&nt.push(rt);const at=await this._rpcRequest("getSignatureStatuses",nt),it=create$2(at,GetSignatureStatusesRpcResult);if("error"in it)throw new SolanaJSONRPCError(it.error,"failed to get signature status");return it.result}async getTransactionCount(et){const{commitment:rt,config:nt}=extractCommitmentFromConfig(et),at=this._buildArgs([],rt,void 0,nt),it=await this._rpcRequest("getTransactionCount",at),st=create$2(it,jsonRpcResult$1(number$1()));if("error"in st)throw new SolanaJSONRPCError(st.error,"failed to get transaction count");return st.result}async getTotalSupply(et){return(await this.getSupply({commitment:et,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(et){const rt=this._buildArgs([],et),nt=await this._rpcRequest("getInflationGovernor",rt),at=create$2(nt,GetInflationGovernorRpcResult);if("error"in at)throw new SolanaJSONRPCError(at.error,"failed to get inflation");return at.result}async getInflationReward(et,rt,nt){const{commitment:at,config:it}=extractCommitmentFromConfig(nt),st=this._buildArgs([et.map(mt=>mt.toBase58())],at,void 0,{...it,epoch:rt??(it==null?void 0:it.epoch)}),dt=await this._rpcRequest("getInflationReward",st),pt=create$2(dt,GetInflationRewardResult);if("error"in pt)throw new SolanaJSONRPCError(pt.error,"failed to get inflation reward");return pt.result}async getInflationRate(){const et=await this._rpcRequest("getInflationRate",[]),rt=create$2(et,GetInflationRateRpcResult);if("error"in rt)throw new SolanaJSONRPCError(rt.error,"failed to get inflation rate");return rt.result}async getEpochInfo(et){const{commitment:rt,config:nt}=extractCommitmentFromConfig(et),at=this._buildArgs([],rt,void 0,nt),it=await this._rpcRequest("getEpochInfo",at),st=create$2(it,GetEpochInfoRpcResult);if("error"in st)throw new SolanaJSONRPCError(st.error,"failed to get epoch info");return st.result}async getEpochSchedule(){const et=await this._rpcRequest("getEpochSchedule",[]),rt=create$2(et,GetEpochScheduleRpcResult);if("error"in rt)throw new SolanaJSONRPCError(rt.error,"failed to get epoch schedule");const nt=rt.result;return new EpochSchedule(nt.slotsPerEpoch,nt.leaderScheduleSlotOffset,nt.warmup,nt.firstNormalEpoch,nt.firstNormalSlot)}async getLeaderSchedule(){const et=await this._rpcRequest("getLeaderSchedule",[]),rt=create$2(et,GetLeaderScheduleRpcResult);if("error"in rt)throw new SolanaJSONRPCError(rt.error,"failed to get leader schedule");return rt.result}async getMinimumBalanceForRentExemption(et,rt){const nt=this._buildArgs([et],rt),at=await this._rpcRequest("getMinimumBalanceForRentExemption",nt),it=create$2(at,GetMinimumBalanceForRentExemptionRpcResult);return"error"in it?(console.warn("Unable to fetch minimum balance for rent exemption"),0):it.result}async getRecentBlockhashAndContext(et){const rt=this._buildArgs([],et),nt=await this._rpcRequest("getRecentBlockhash",rt),at=create$2(nt,GetRecentBlockhashAndContextRpcResult);if("error"in at)throw new SolanaJSONRPCError(at.error,"failed to get recent blockhash");return at.result}async getRecentPerformanceSamples(et){const rt=await this._rpcRequest("getRecentPerformanceSamples",et?[et]:[]),nt=create$2(rt,GetRecentPerformanceSamplesRpcResult);if("error"in nt)throw new SolanaJSONRPCError(nt.error,"failed to get recent performance samples");return nt.result}async getFeeCalculatorForBlockhash(et,rt){const nt=this._buildArgs([et],rt),at=await this._rpcRequest("getFeeCalculatorForBlockhash",nt),it=create$2(at,GetFeeCalculatorRpcResult);if("error"in it)throw new SolanaJSONRPCError(it.error,"failed to get fee calculator");const{context:st,value:dt}=it.result;return{context:st,value:dt!==null?dt.feeCalculator:null}}async getFeeForMessage(et,rt){const nt=toBuffer$1(et.serialize()).toString("base64"),at=this._buildArgs([nt],rt),it=await this._rpcRequest("getFeeForMessage",at),st=create$2(it,jsonRpcResultAndContext$1(nullable$1(number$1())));if("error"in st)throw new SolanaJSONRPCError(st.error,"failed to get fee for message");if(st.result===null)throw new Error("invalid blockhash");return st.result}async getRecentPrioritizationFees(et){var st;const rt=(st=et==null?void 0:et.lockedWritableAccounts)==null?void 0:st.map(dt=>dt.toBase58()),nt=rt!=null&&rt.length?[rt]:[],at=await this._rpcRequest("getRecentPrioritizationFees",nt),it=create$2(at,GetRecentPrioritizationFeesRpcResult);if("error"in it)throw new SolanaJSONRPCError(it.error,"failed to get recent prioritization fees");return it.result}async getRecentBlockhash(et){try{return(await this.getRecentBlockhashAndContext(et)).value}catch(rt){throw new Error("failed to get recent blockhash: "+rt)}}async getLatestBlockhash(et){try{return(await this.getLatestBlockhashAndContext(et)).value}catch(rt){throw new Error("failed to get recent blockhash: "+rt)}}async getLatestBlockhashAndContext(et){const{commitment:rt,config:nt}=extractCommitmentFromConfig(et),at=this._buildArgs([],rt,void 0,nt),it=await this._rpcRequest("getLatestBlockhash",at),st=create$2(it,GetLatestBlockhashRpcResult);if("error"in st)throw new SolanaJSONRPCError(st.error,"failed to get latest blockhash");return st.result}async isBlockhashValid(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),it=this._buildArgs([et],nt,void 0,at),st=await this._rpcRequest("isBlockhashValid",it),dt=create$2(st,IsBlockhashValidRpcResult);if("error"in dt)throw new SolanaJSONRPCError(dt.error,"failed to determine if the blockhash `"+et+"`is valid");return dt.result}async getVersion(){const et=await this._rpcRequest("getVersion",[]),rt=create$2(et,jsonRpcResult$1(VersionResult));if("error"in rt)throw new SolanaJSONRPCError(rt.error,"failed to get version");return rt.result}async getGenesisHash(){const et=await this._rpcRequest("getGenesisHash",[]),rt=create$2(et,jsonRpcResult$1(string$1()));if("error"in rt)throw new SolanaJSONRPCError(rt.error,"failed to get genesis hash");return rt.result}async getBlock(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),it=this._buildArgsAtLeastConfirmed([et],nt,void 0,at),st=await this._rpcRequest("getBlock",it);try{switch(at==null?void 0:at.transactionDetails){case"accounts":{const dt=create$2(st,GetAccountsModeBlockRpcResult);if("error"in dt)throw dt.error;return dt.result}case"none":{const dt=create$2(st,GetNoneModeBlockRpcResult);if("error"in dt)throw dt.error;return dt.result}default:{const dt=create$2(st,GetBlockRpcResult);if("error"in dt)throw dt.error;const{result:pt}=dt;return pt?{...pt,transactions:pt.transactions.map(({transaction:mt,meta:yt,version:Rt})=>({meta:yt,transaction:{...mt,message:versionedMessageFromResponse(Rt,mt.message)},version:Rt}))}:null}}}catch(dt){throw new SolanaJSONRPCError(dt,"failed to get confirmed block")}}async getParsedBlock(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),it=this._buildArgsAtLeastConfirmed([et],nt,"jsonParsed",at),st=await this._rpcRequest("getBlock",it);try{switch(at==null?void 0:at.transactionDetails){case"accounts":{const dt=create$2(st,GetParsedAccountsModeBlockRpcResult);if("error"in dt)throw dt.error;return dt.result}case"none":{const dt=create$2(st,GetParsedNoneModeBlockRpcResult);if("error"in dt)throw dt.error;return dt.result}default:{const dt=create$2(st,GetParsedBlockRpcResult);if("error"in dt)throw dt.error;return dt.result}}}catch(dt){throw new SolanaJSONRPCError(dt,"failed to get block")}}async getBlockProduction(et){let rt,nt;if(typeof et=="string")nt=et;else if(et){const{commitment:dt,...pt}=et;nt=dt,rt=pt}const at=this._buildArgs([],nt,"base64",rt),it=await this._rpcRequest("getBlockProduction",at),st=create$2(it,BlockProductionResponseStruct);if("error"in st)throw new SolanaJSONRPCError(st.error,"failed to get block production information");return st.result}async getTransaction(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),it=this._buildArgsAtLeastConfirmed([et],nt,void 0,at),st=await this._rpcRequest("getTransaction",it),dt=create$2(st,GetTransactionRpcResult);if("error"in dt)throw new SolanaJSONRPCError(dt.error,"failed to get transaction");const pt=dt.result;return pt&&{...pt,transaction:{...pt.transaction,message:versionedMessageFromResponse(pt.version,pt.transaction.message)}}}async getParsedTransaction(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),it=this._buildArgsAtLeastConfirmed([et],nt,"jsonParsed",at),st=await this._rpcRequest("getTransaction",it),dt=create$2(st,GetParsedTransactionRpcResult);if("error"in dt)throw new SolanaJSONRPCError(dt.error,"failed to get transaction");return dt.result}async getParsedTransactions(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),it=et.map(pt=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([pt],nt,"jsonParsed",at)}));return(await this._rpcBatchRequest(it)).map(pt=>{const mt=create$2(pt,GetParsedTransactionRpcResult);if("error"in mt)throw new SolanaJSONRPCError(mt.error,"failed to get transactions");return mt.result})}async getTransactions(et,rt){const{commitment:nt,config:at}=extractCommitmentFromConfig(rt),it=et.map(pt=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([pt],nt,void 0,at)}));return(await this._rpcBatchRequest(it)).map(pt=>{const mt=create$2(pt,GetTransactionRpcResult);if("error"in mt)throw new SolanaJSONRPCError(mt.error,"failed to get transactions");const yt=mt.result;return yt&&{...yt,transaction:{...yt.transaction,message:versionedMessageFromResponse(yt.version,yt.transaction.message)}}})}async getConfirmedBlock(et,rt){const nt=this._buildArgsAtLeastConfirmed([et],rt),at=await this._rpcRequest("getConfirmedBlock",nt),it=create$2(at,GetConfirmedBlockRpcResult);if("error"in it)throw new SolanaJSONRPCError(it.error,"failed to get confirmed block");const st=it.result;if(!st)throw new Error("Confirmed block "+et+" not found");const dt={...st,transactions:st.transactions.map(({transaction:pt,meta:mt})=>{const yt=new Message(pt.message);return{meta:mt,transaction:{...pt,message:yt}}})};return{...dt,transactions:dt.transactions.map(({transaction:pt,meta:mt})=>({meta:mt,transaction:Transaction.populate(pt.message,pt.signatures)}))}}async getBlocks(et,rt,nt){const at=this._buildArgsAtLeastConfirmed(rt!==void 0?[et,rt]:[et],nt),it=await this._rpcRequest("getBlocks",at),st=create$2(it,jsonRpcResult$1(array$1(number$1())));if("error"in st)throw new SolanaJSONRPCError(st.error,"failed to get blocks");return st.result}async getBlockSignatures(et,rt){const nt=this._buildArgsAtLeastConfirmed([et],rt,void 0,{transactionDetails:"signatures",rewards:!1}),at=await this._rpcRequest("getBlock",nt),it=create$2(at,GetBlockSignaturesRpcResult);if("error"in it)throw new SolanaJSONRPCError(it.error,"failed to get block");const st=it.result;if(!st)throw new Error("Block "+et+" not found");return st}async getConfirmedBlockSignatures(et,rt){const nt=this._buildArgsAtLeastConfirmed([et],rt,void 0,{transactionDetails:"signatures",rewards:!1}),at=await this._rpcRequest("getConfirmedBlock",nt),it=create$2(at,GetBlockSignaturesRpcResult);if("error"in it)throw new SolanaJSONRPCError(it.error,"failed to get confirmed block");const st=it.result;if(!st)throw new Error("Confirmed block "+et+" not found");return st}async getConfirmedTransaction(et,rt){const nt=this._buildArgsAtLeastConfirmed([et],rt),at=await this._rpcRequest("getConfirmedTransaction",nt),it=create$2(at,GetTransactionRpcResult);if("error"in it)throw new SolanaJSONRPCError(it.error,"failed to get transaction");const st=it.result;if(!st)return st;const dt=new Message(st.transaction.message),pt=st.transaction.signatures;return{...st,transaction:Transaction.populate(dt,pt)}}async getParsedConfirmedTransaction(et,rt){const nt=this._buildArgsAtLeastConfirmed([et],rt,"jsonParsed"),at=await this._rpcRequest("getConfirmedTransaction",nt),it=create$2(at,GetParsedTransactionRpcResult);if("error"in it)throw new SolanaJSONRPCError(it.error,"failed to get confirmed transaction");return it.result}async getParsedConfirmedTransactions(et,rt){const nt=et.map(st=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([st],rt,"jsonParsed")}));return(await this._rpcBatchRequest(nt)).map(st=>{const dt=create$2(st,GetParsedTransactionRpcResult);if("error"in dt)throw new SolanaJSONRPCError(dt.error,"failed to get confirmed transactions");return dt.result})}async getConfirmedSignaturesForAddress(et,rt,nt){let at={},it=await this.getFirstAvailableBlock();for(;!("until"in at)&&(rt--,!(rt<=0||rt<it));)try{const pt=await this.getConfirmedBlockSignatures(rt,"finalized");pt.signatures.length>0&&(at.until=pt.signatures[pt.signatures.length-1].toString())}catch(pt){if(pt instanceof Error&&pt.message.includes("skipped"))continue;throw pt}let st=await this.getSlot("finalized");for(;!("before"in at)&&(nt++,!(nt>st));)try{const pt=await this.getConfirmedBlockSignatures(nt);pt.signatures.length>0&&(at.before=pt.signatures[pt.signatures.length-1].toString())}catch(pt){if(pt instanceof Error&&pt.message.includes("skipped"))continue;throw pt}return(await this.getConfirmedSignaturesForAddress2(et,at)).map(pt=>pt.signature)}async getConfirmedSignaturesForAddress2(et,rt,nt){const at=this._buildArgsAtLeastConfirmed([et.toBase58()],nt,void 0,rt),it=await this._rpcRequest("getConfirmedSignaturesForAddress2",at),st=create$2(it,GetConfirmedSignaturesForAddress2RpcResult);if("error"in st)throw new SolanaJSONRPCError(st.error,"failed to get confirmed signatures for address");return st.result}async getSignaturesForAddress(et,rt,nt){const at=this._buildArgsAtLeastConfirmed([et.toBase58()],nt,void 0,rt),it=await this._rpcRequest("getSignaturesForAddress",at),st=create$2(it,GetSignaturesForAddressRpcResult);if("error"in st)throw new SolanaJSONRPCError(st.error,"failed to get signatures for address");return st.result}async getAddressLookupTable(et,rt){const{context:nt,value:at}=await this.getAccountInfoAndContext(et,rt);let it=null;return at!==null&&(it=new AddressLookupTableAccount({key:et,state:AddressLookupTableAccount.deserialize(at.data)})),{context:nt,value:it}}async getNonceAndContext(et,rt){const{context:nt,value:at}=await this.getAccountInfoAndContext(et,rt);let it=null;return at!==null&&(it=NonceAccount.fromAccountData(at.data)),{context:nt,value:it}}async getNonce(et,rt){return await this.getNonceAndContext(et,rt).then(nt=>nt.value).catch(nt=>{throw new Error("failed to get nonce for account "+et.toBase58()+": "+nt)})}async requestAirdrop(et,rt){const nt=await this._rpcRequest("requestAirdrop",[et.toBase58(),rt]),at=create$2(nt,RequestAirdropRpcResult);if("error"in at)throw new SolanaJSONRPCError(at.error,`airdrop to ${et.toBase58()} failed`);return at.result}async _blockhashWithExpiryBlockHeight(et){if(!et){for(;this._pollingBlockhash;)await sleep(100);const nt=Date.now()-this._blockhashInfo.lastFetch>=BLOCKHASH_CACHE_TIMEOUT_MS;if(this._blockhashInfo.latestBlockhash!==null&&!nt)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const et=Date.now(),rt=this._blockhashInfo.latestBlockhash,nt=rt?rt.blockhash:null;for(let at=0;at<50;at++){const it=await this.getLatestBlockhash("finalized");if(nt!==it.blockhash)return this._blockhashInfo={latestBlockhash:it,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},it;await sleep(MS_PER_SLOT/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-et}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(et){const{commitment:rt,config:nt}=extractCommitmentFromConfig(et),at=this._buildArgs([],rt,"base64",nt),it=await this._rpcRequest("getStakeMinimumDelegation",at),st=create$2(it,jsonRpcResultAndContext$1(number$1()));if("error"in st)throw new SolanaJSONRPCError(st.error,"failed to get stake minimum delegation");return st.result}async simulateTransaction(et,rt,nt){if("message"in et){const Nt=et.serialize(),Ct=Buffer$1.from(Nt).toString("base64");if(Array.isArray(rt)||nt!==void 0)throw new Error("Invalid arguments");const Ot=rt||{};Ot.encoding="base64","commitment"in Ot||(Ot.commitment=this.commitment);const kt=[Ct,Ot],Pt=await this._rpcRequest("simulateTransaction",kt),Dt=create$2(Pt,SimulatedTransactionResponseStruct$1);if("error"in Dt)throw new Error("failed to simulate transaction: "+Dt.error.message);return Dt.result}let at;if(et instanceof Transaction){let xt=et;at=new Transaction,at.feePayer=xt.feePayer,at.instructions=et.instructions,at.nonceInfo=xt.nonceInfo,at.signatures=xt.signatures}else at=Transaction.populate(et),at._message=at._json=void 0;if(rt!==void 0&&!Array.isArray(rt))throw new Error("Invalid arguments");const it=rt;if(at.nonceInfo&&it)at.sign(...it);else{let xt=this._disableBlockhashCaching;for(;;){const Nt=await this._blockhashWithExpiryBlockHeight(xt);if(at.lastValidBlockHeight=Nt.lastValidBlockHeight,at.recentBlockhash=Nt.blockhash,!it)break;if(at.sign(...it),!at.signature)throw new Error("!signature");const Ct=at.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(Ct)&&!this._blockhashInfo.transactionSignatures.includes(Ct)){this._blockhashInfo.simulatedSignatures.push(Ct);break}else xt=!0}}const st=at._compile(),dt=st.serialize(),mt=at._serialize(dt).toString("base64"),yt={encoding:"base64",commitment:this.commitment};if(nt){const xt=(Array.isArray(nt)?nt:st.nonProgramIds()).map(Nt=>Nt.toBase58());yt.accounts={encoding:"base64",addresses:xt}}it&&(yt.sigVerify=!0);const Rt=[mt,yt],Tt=await this._rpcRequest("simulateTransaction",Rt),At=create$2(Tt,SimulatedTransactionResponseStruct$1);if("error"in At){let xt;if("data"in At.error&&(xt=At.error.data.logs,xt&&Array.isArray(xt))){const Nt=`
    `,Ct=Nt+xt.join(Nt);console.error(At.error.message,Ct)}throw new SendTransactionError({action:"simulate",signature:"",transactionMessage:At.error.message,logs:xt})}return At.result}async sendTransaction(et,rt,nt){if("version"in et){if(rt&&Array.isArray(rt))throw new Error("Invalid arguments");const st=et.serialize();return await this.sendRawTransaction(st,rt)}if(rt===void 0||!Array.isArray(rt))throw new Error("Invalid arguments");const at=rt;if(et.nonceInfo)et.sign(...at);else{let st=this._disableBlockhashCaching;for(;;){const dt=await this._blockhashWithExpiryBlockHeight(st);if(et.lastValidBlockHeight=dt.lastValidBlockHeight,et.recentBlockhash=dt.blockhash,et.sign(...at),!et.signature)throw new Error("!signature");const pt=et.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(pt))st=!0;else{this._blockhashInfo.transactionSignatures.push(pt);break}}}const it=et.serialize();return await this.sendRawTransaction(it,nt)}async sendRawTransaction(et,rt){const nt=toBuffer$1(et).toString("base64");return await this.sendEncodedTransaction(nt,rt)}async sendEncodedTransaction(et,rt){const nt={encoding:"base64"},at=rt&&rt.skipPreflight,it=at===!0?"processed":rt&&rt.preflightCommitment||this.commitment;rt&&rt.maxRetries!=null&&(nt.maxRetries=rt.maxRetries),rt&&rt.minContextSlot!=null&&(nt.minContextSlot=rt.minContextSlot),at&&(nt.skipPreflight=at),it&&(nt.preflightCommitment=it);const st=[et,nt],dt=await this._rpcRequest("sendTransaction",st),pt=create$2(dt,SendTransactionRpcResult);if("error"in pt){let mt;throw"data"in pt.error&&(mt=pt.error.data.logs),new SendTransactionError({action:at?"send":"simulate",signature:"",transactionMessage:pt.error.message,logs:mt})}return pt.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(et){this._rpcWebSocketConnected=!1,console.error("ws error:",et.message)}_wsOnClose(et){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),et===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([rt,nt])=>{this._setSubscription(rt,{...nt,state:"pending"})})}_setSubscription(et,rt){var at;const nt=(at=this._subscriptionsByHash[et])==null?void 0:at.state;if(this._subscriptionsByHash[et]=rt,nt!==rt.state){const it=this._subscriptionStateChangeCallbacksByHash[et];it&&it.forEach(st=>{try{st(rt.state)}catch{}})}}_onSubscriptionStateChange(et,rt){var it;const nt=this._subscriptionHashByClientSubscriptionId[et];if(nt==null)return()=>{};const at=(it=this._subscriptionStateChangeCallbacksByHash)[nt]||(it[nt]=new Set);return at.add(rt),()=>{at.delete(rt),at.size===0&&delete this._subscriptionStateChangeCallbacksByHash[nt]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(nt){nt instanceof Error&&console.log(`Error when closing socket connection: ${nt.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const et=this._rpcWebSocketGeneration,rt=()=>et===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async nt=>{const at=this._subscriptionsByHash[nt];if(at!==void 0)switch(at.state){case"pending":case"unsubscribed":if(at.callbacks.size===0){delete this._subscriptionsByHash[nt],at.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[at.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:it,method:st}=at;try{this._setSubscription(nt,{...at,state:"subscribing"});const dt=await this._rpcWebSocket.call(st,it);this._setSubscription(nt,{...at,serverSubscriptionId:dt,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[dt]=at.callbacks,await this._updateSubscriptions()}catch(dt){if(dt instanceof Error&&console.error(`${st} error for argument`,it,dt.message),!rt())return;this._setSubscription(nt,{...at,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":at.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:it,unsubscribeMethod:st}=at;if(this._subscriptionsAutoDisposedByRpc.has(it))this._subscriptionsAutoDisposedByRpc.delete(it);else{this._setSubscription(nt,{...at,state:"unsubscribing"}),this._setSubscription(nt,{...at,state:"unsubscribing"});try{await this._rpcWebSocket.call(st,[it])}catch(dt){if(dt instanceof Error&&console.error(`${st} error:`,dt.message),!rt())return;this._setSubscription(nt,{...at,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(nt,{...at,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(et,rt){const nt=this._subscriptionCallbacksByServerSubscriptionId[et];nt!==void 0&&nt.forEach(at=>{try{at(...rt)}catch(it){console.error(it)}})}_wsOnAccountNotification(et){const{result:rt,subscription:nt}=create$2(et,AccountNotificationResult);this._handleServerNotification(nt,[rt.value,rt.context])}_makeSubscription(et,rt){const nt=this._nextClientSubscriptionId++,at=fastStableStringify$1([et.method,rt]),it=this._subscriptionsByHash[at];return it===void 0?this._subscriptionsByHash[at]={...et,args:rt,callbacks:new Set([et.callback]),state:"pending"}:it.callbacks.add(et.callback),this._subscriptionHashByClientSubscriptionId[nt]=at,this._subscriptionDisposeFunctionsByClientSubscriptionId[nt]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[nt],delete this._subscriptionHashByClientSubscriptionId[nt];const st=this._subscriptionsByHash[at];assert$1(st!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${nt}`),st.callbacks.delete(et.callback),await this._updateSubscriptions()},this._updateSubscriptions(),nt}onAccountChange(et,rt,nt){const{commitment:at,config:it}=extractCommitmentFromConfig(nt),st=this._buildArgs([et.toBase58()],at||this._commitment||"finalized","base64",it);return this._makeSubscription({callback:rt,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},st)}async removeAccountChangeListener(et){await this._unsubscribeClientSubscription(et,"account change")}_wsOnProgramAccountNotification(et){const{result:rt,subscription:nt}=create$2(et,ProgramAccountNotificationResult);this._handleServerNotification(nt,[{accountId:rt.value.pubkey,accountInfo:rt.value.account},rt.context])}onProgramAccountChange(et,rt,nt,at){const{commitment:it,config:st}=extractCommitmentFromConfig(nt),dt=this._buildArgs([et.toBase58()],it||this._commitment||"finalized","base64",st||(at?{filters:at}:void 0));return this._makeSubscription({callback:rt,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},dt)}async removeProgramAccountChangeListener(et){await this._unsubscribeClientSubscription(et,"program account change")}onLogs(et,rt,nt){const at=this._buildArgs([typeof et=="object"?{mentions:[et.toString()]}:et],nt||this._commitment||"finalized");return this._makeSubscription({callback:rt,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},at)}async removeOnLogsListener(et){await this._unsubscribeClientSubscription(et,"logs")}_wsOnLogsNotification(et){const{result:rt,subscription:nt}=create$2(et,LogsNotificationResult);this._handleServerNotification(nt,[rt.value,rt.context])}_wsOnSlotNotification(et){const{result:rt,subscription:nt}=create$2(et,SlotNotificationResult);this._handleServerNotification(nt,[rt])}onSlotChange(et){return this._makeSubscription({callback:et,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(et){await this._unsubscribeClientSubscription(et,"slot change")}_wsOnSlotUpdatesNotification(et){const{result:rt,subscription:nt}=create$2(et,SlotUpdateNotificationResult);this._handleServerNotification(nt,[rt])}onSlotUpdate(et){return this._makeSubscription({callback:et,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(et){await this._unsubscribeClientSubscription(et,"slot update")}async _unsubscribeClientSubscription(et,rt){const nt=this._subscriptionDisposeFunctionsByClientSubscriptionId[et];nt?await nt():console.warn(`Ignored unsubscribe request because an active subscription with id \`${et}\` for '${rt}' events could not be found.`)}_buildArgs(et,rt,nt,at){const it=rt||this._commitment;if(it||nt||at){let st={};nt&&(st.encoding=nt),it&&(st.commitment=it),at&&(st=Object.assign(st,at)),et.push(st)}return et}_buildArgsAtLeastConfirmed(et,rt,nt,at){const it=rt||this._commitment;if(it&&!["confirmed","finalized"].includes(it))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(et,rt,nt,at)}_wsOnSignatureNotification(et){const{result:rt,subscription:nt}=create$2(et,SignatureNotificationResult);rt.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(nt),this._handleServerNotification(nt,rt.value==="receivedSignature"?[{type:"received"},rt.context]:[{type:"status",result:rt.value},rt.context])}onSignature(et,rt,nt){const at=this._buildArgs([et],nt||this._commitment||"finalized"),it=this._makeSubscription({callback:(st,dt)=>{if(st.type==="status"){rt(st.result,dt);try{this.removeSignatureListener(it)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},at);return it}onSignatureWithOptions(et,rt,nt){const{commitment:at,...it}={...nt,commitment:nt&&nt.commitment||this._commitment||"finalized"},st=this._buildArgs([et],at,void 0,it),dt=this._makeSubscription({callback:(pt,mt)=>{rt(pt,mt);try{this.removeSignatureListener(dt)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},st);return dt}async removeSignatureListener(et){await this._unsubscribeClientSubscription(et,"signature result")}_wsOnRootNotification(et){const{result:rt,subscription:nt}=create$2(et,RootNotificationResult);this._handleServerNotification(nt,[rt])}onRootChange(et){return this._makeSubscription({callback:et,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(et){await this._unsubscribeClientSubscription(et,"root change")}}class Keypair{constructor(et){this._keypair=void 0,this._keypair=et??generateKeypair()}static generate(){return new Keypair(generateKeypair())}static fromSecretKey(et,rt){if(et.byteLength!==64)throw new Error("bad secret key size");const nt=et.slice(32,64);if(!rt||!rt.skipValidation){const at=et.slice(0,32),it=getPublicKey(at);for(let st=0;st<32;st++)if(nt[st]!==it[st])throw new Error("provided secretKey is invalid")}return new Keypair({publicKey:nt,secretKey:et})}static fromSeed(et){const rt=getPublicKey(et),nt=new Uint8Array(64);return nt.set(et),nt.set(rt,32),new Keypair({publicKey:rt,secretKey:nt})}get publicKey(){return new PublicKey(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const LOOKUP_TABLE_INSTRUCTION_LAYOUTS=Object.freeze({CreateLookupTable:{index:0,layout:struct$1([u32$1("instruction"),u64$2("recentSlot"),u8$1("bumpSeed")])},FreezeLookupTable:{index:1,layout:struct$1([u32$1("instruction")])},ExtendLookupTable:{index:2,layout:struct$1([u32$1("instruction"),u64$2(),seq(publicKey$4(),offset$1(u32$1(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:struct$1([u32$1("instruction")])},CloseLookupTable:{index:4,layout:struct$1([u32$1("instruction")])}});class AddressLookupTableInstruction{constructor(){}static decodeInstructionType(et){this.checkProgramId(et.programId);const nt=u32$1("instruction").decode(et.data);let at;for(const[it,st]of Object.entries(LOOKUP_TABLE_INSTRUCTION_LAYOUTS))if(st.index==nt){at=it;break}if(!at)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return at}static decodeCreateLookupTable(et){this.checkProgramId(et.programId),this.checkKeysLength(et.keys,4);const{recentSlot:rt}=decodeData$1(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CreateLookupTable,et.data);return{authority:et.keys[1].pubkey,payer:et.keys[2].pubkey,recentSlot:Number(rt)}}static decodeExtendLookupTable(et){if(this.checkProgramId(et.programId),et.keys.length<2)throw new Error(`invalid instruction; found ${et.keys.length} keys, expected at least 2`);const{addresses:rt}=decodeData$1(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.ExtendLookupTable,et.data);return{lookupTable:et.keys[0].pubkey,authority:et.keys[1].pubkey,payer:et.keys.length>2?et.keys[2].pubkey:void 0,addresses:rt.map(nt=>new PublicKey(nt))}}static decodeCloseLookupTable(et){return this.checkProgramId(et.programId),this.checkKeysLength(et.keys,3),{lookupTable:et.keys[0].pubkey,authority:et.keys[1].pubkey,recipient:et.keys[2].pubkey}}static decodeFreezeLookupTable(et){return this.checkProgramId(et.programId),this.checkKeysLength(et.keys,2),{lookupTable:et.keys[0].pubkey,authority:et.keys[1].pubkey}}static decodeDeactivateLookupTable(et){return this.checkProgramId(et.programId),this.checkKeysLength(et.keys,2),{lookupTable:et.keys[0].pubkey,authority:et.keys[1].pubkey}}static checkProgramId(et){if(!et.equals(AddressLookupTableProgram.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(et,rt){if(et.length<rt)throw new Error(`invalid instruction; found ${et.length} keys, expected at least ${rt}`)}}class AddressLookupTableProgram{constructor(){}static createLookupTable(et){const[rt,nt]=PublicKey.findProgramAddressSync([et.authority.toBuffer(),toBufferLE_1(BigInt(et.recentSlot),8)],this.programId),at=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CreateLookupTable,it=encodeData(at,{recentSlot:BigInt(et.recentSlot),bumpSeed:nt}),st=[{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:et.authority,isSigner:!0,isWritable:!1},{pubkey:et.payer,isSigner:!0,isWritable:!0},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1}];return[new TransactionInstruction({programId:this.programId,keys:st,data:it}),rt]}static freezeLookupTable(et){const rt=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.FreezeLookupTable,nt=encodeData(rt),at=[{pubkey:et.lookupTable,isSigner:!1,isWritable:!0},{pubkey:et.authority,isSigner:!0,isWritable:!1}];return new TransactionInstruction({programId:this.programId,keys:at,data:nt})}static extendLookupTable(et){const rt=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.ExtendLookupTable,nt=encodeData(rt,{addresses:et.addresses.map(it=>it.toBytes())}),at=[{pubkey:et.lookupTable,isSigner:!1,isWritable:!0},{pubkey:et.authority,isSigner:!0,isWritable:!1}];return et.payer&&at.push({pubkey:et.payer,isSigner:!0,isWritable:!0},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1}),new TransactionInstruction({programId:this.programId,keys:at,data:nt})}static deactivateLookupTable(et){const rt=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.DeactivateLookupTable,nt=encodeData(rt),at=[{pubkey:et.lookupTable,isSigner:!1,isWritable:!0},{pubkey:et.authority,isSigner:!0,isWritable:!1}];return new TransactionInstruction({programId:this.programId,keys:at,data:nt})}static closeLookupTable(et){const rt=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CloseLookupTable,nt=encodeData(rt),at=[{pubkey:et.lookupTable,isSigner:!1,isWritable:!0},{pubkey:et.authority,isSigner:!0,isWritable:!1},{pubkey:et.recipient,isSigner:!1,isWritable:!0}];return new TransactionInstruction({programId:this.programId,keys:at,data:nt})}}AddressLookupTableProgram.programId=new PublicKey("AddressLookupTab1e1111111111111111111111111");class ComputeBudgetInstruction{constructor(){}static decodeInstructionType(et){this.checkProgramId(et.programId);const nt=u8$1("instruction").decode(et.data);let at;for(const[it,st]of Object.entries(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS))if(st.index==nt){at=it;break}if(!at)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return at}static decodeRequestUnits(et){this.checkProgramId(et.programId);const{units:rt,additionalFee:nt}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestUnits,et.data);return{units:rt,additionalFee:nt}}static decodeRequestHeapFrame(et){this.checkProgramId(et.programId);const{bytes:rt}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestHeapFrame,et.data);return{bytes:rt}}static decodeSetComputeUnitLimit(et){this.checkProgramId(et.programId);const{units:rt}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit,et.data);return{units:rt}}static decodeSetComputeUnitPrice(et){this.checkProgramId(et.programId);const{microLamports:rt}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice,et.data);return{microLamports:rt}}static checkProgramId(et){if(!et.equals(ComputeBudgetProgram.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=Object.freeze({RequestUnits:{index:0,layout:struct$1([u8$1("instruction"),u32$1("units"),u32$1("additionalFee")])},RequestHeapFrame:{index:1,layout:struct$1([u8$1("instruction"),u32$1("bytes")])},SetComputeUnitLimit:{index:2,layout:struct$1([u8$1("instruction"),u32$1("units")])},SetComputeUnitPrice:{index:3,layout:struct$1([u8$1("instruction"),u64$2("microLamports")])}});class ComputeBudgetProgram{constructor(){}static requestUnits(et){const rt=COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestUnits,nt=encodeData(rt,et);return new TransactionInstruction({keys:[],programId:this.programId,data:nt})}static requestHeapFrame(et){const rt=COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestHeapFrame,nt=encodeData(rt,et);return new TransactionInstruction({keys:[],programId:this.programId,data:nt})}static setComputeUnitLimit(et){const rt=COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit,nt=encodeData(rt,et);return new TransactionInstruction({keys:[],programId:this.programId,data:nt})}static setComputeUnitPrice(et){const rt=COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice,nt=encodeData(rt,{microLamports:BigInt(et.microLamports)});return new TransactionInstruction({keys:[],programId:this.programId,data:nt})}}ComputeBudgetProgram.programId=new PublicKey("ComputeBudget111111111111111111111111111111");const PRIVATE_KEY_BYTES$1=64,PUBLIC_KEY_BYTES$1=32,SIGNATURE_BYTES=64,ED25519_INSTRUCTION_LAYOUT=struct$1([u8$1("numSignatures"),u8$1("padding"),u16("signatureOffset"),u16("signatureInstructionIndex"),u16("publicKeyOffset"),u16("publicKeyInstructionIndex"),u16("messageDataOffset"),u16("messageDataSize"),u16("messageInstructionIndex")]);class Ed25519Program{constructor(){}static createInstructionWithPublicKey(et){const{publicKey:rt,message:nt,signature:at,instructionIndex:it}=et;assert$1(rt.length===PUBLIC_KEY_BYTES$1,`Public Key must be ${PUBLIC_KEY_BYTES$1} bytes but received ${rt.length} bytes`),assert$1(at.length===SIGNATURE_BYTES,`Signature must be ${SIGNATURE_BYTES} bytes but received ${at.length} bytes`);const st=ED25519_INSTRUCTION_LAYOUT.span,dt=st+rt.length,pt=dt+at.length,mt=1,yt=Buffer$1.alloc(pt+nt.length),Rt=it??65535;return ED25519_INSTRUCTION_LAYOUT.encode({numSignatures:mt,padding:0,signatureOffset:dt,signatureInstructionIndex:Rt,publicKeyOffset:st,publicKeyInstructionIndex:Rt,messageDataOffset:pt,messageDataSize:nt.length,messageInstructionIndex:Rt},yt),yt.fill(rt,st),yt.fill(at,dt),yt.fill(nt,pt),new TransactionInstruction({keys:[],programId:Ed25519Program.programId,data:yt})}static createInstructionWithPrivateKey(et){const{privateKey:rt,message:nt,instructionIndex:at}=et;assert$1(rt.length===PRIVATE_KEY_BYTES$1,`Private key must be ${PRIVATE_KEY_BYTES$1} bytes but received ${rt.length} bytes`);try{const it=Keypair.fromSecretKey(rt),st=it.publicKey.toBytes(),dt=sign$1(nt,it.secretKey);return this.createInstructionWithPublicKey({publicKey:st,message:nt,signature:dt,instructionIndex:at})}catch(it){throw new Error(`Error creating instruction; ${it}`)}}}Ed25519Program.programId=new PublicKey("Ed25519SigVerify111111111111111111111111111");const ecdsaSign=(tt,et)=>{const rt=secp256k1$1.sign(tt,et);return[rt.toCompactRawBytes(),rt.recovery]};secp256k1$1.utils.isValidPrivateKey;const publicKeyCreate=secp256k1$1.getPublicKey,PRIVATE_KEY_BYTES=32,ETHEREUM_ADDRESS_BYTES=20,PUBLIC_KEY_BYTES=64,SIGNATURE_OFFSETS_SERIALIZED_SIZE=11,SECP256K1_INSTRUCTION_LAYOUT=struct$1([u8$1("numSignatures"),u16("signatureOffset"),u8$1("signatureInstructionIndex"),u16("ethAddressOffset"),u8$1("ethAddressInstructionIndex"),u16("messageDataOffset"),u16("messageDataSize"),u8$1("messageInstructionIndex"),blob$1(20,"ethAddress"),blob$1(64,"signature"),u8$1("recoveryId")]);class Secp256k1Program{constructor(){}static publicKeyToEthAddress(et){assert$1(et.length===PUBLIC_KEY_BYTES,`Public key must be ${PUBLIC_KEY_BYTES} bytes but received ${et.length} bytes`);try{return Buffer$1.from(keccak_256(toBuffer$1(et))).slice(-ETHEREUM_ADDRESS_BYTES)}catch(rt){throw new Error(`Error constructing Ethereum address: ${rt}`)}}static createInstructionWithPublicKey(et){const{publicKey:rt,message:nt,signature:at,recoveryId:it,instructionIndex:st}=et;return Secp256k1Program.createInstructionWithEthAddress({ethAddress:Secp256k1Program.publicKeyToEthAddress(rt),message:nt,signature:at,recoveryId:it,instructionIndex:st})}static createInstructionWithEthAddress(et){const{ethAddress:rt,message:nt,signature:at,recoveryId:it,instructionIndex:st=0}=et;let dt;typeof rt=="string"?rt.startsWith("0x")?dt=Buffer$1.from(rt.substr(2),"hex"):dt=Buffer$1.from(rt,"hex"):dt=rt,assert$1(dt.length===ETHEREUM_ADDRESS_BYTES,`Address must be ${ETHEREUM_ADDRESS_BYTES} bytes but received ${dt.length} bytes`);const pt=1+SIGNATURE_OFFSETS_SERIALIZED_SIZE,mt=pt,yt=pt+dt.length,Rt=yt+at.length+1,Tt=1,At=Buffer$1.alloc(SECP256K1_INSTRUCTION_LAYOUT.span+nt.length);return SECP256K1_INSTRUCTION_LAYOUT.encode({numSignatures:Tt,signatureOffset:yt,signatureInstructionIndex:st,ethAddressOffset:mt,ethAddressInstructionIndex:st,messageDataOffset:Rt,messageDataSize:nt.length,messageInstructionIndex:st,signature:toBuffer$1(at),ethAddress:toBuffer$1(dt),recoveryId:it},At),At.fill(toBuffer$1(nt),SECP256K1_INSTRUCTION_LAYOUT.span),new TransactionInstruction({keys:[],programId:Secp256k1Program.programId,data:At})}static createInstructionWithPrivateKey(et){const{privateKey:rt,message:nt,instructionIndex:at}=et;assert$1(rt.length===PRIVATE_KEY_BYTES,`Private key must be ${PRIVATE_KEY_BYTES} bytes but received ${rt.length} bytes`);try{const it=toBuffer$1(rt),st=publicKeyCreate(it,!1).slice(1),dt=Buffer$1.from(keccak_256(toBuffer$1(nt))),[pt,mt]=ecdsaSign(dt,it);return this.createInstructionWithPublicKey({publicKey:st,message:nt,signature:pt,recoveryId:mt,instructionIndex:at})}catch(it){throw new Error(`Error creating instruction; ${it}`)}}}Secp256k1Program.programId=new PublicKey("KeccakSecp256k11111111111111111111111111111");var _Lockup;const STAKE_CONFIG_ID=new PublicKey("StakeConfig11111111111111111111111111111111");class Authorized{constructor(et,rt){this.staker=void 0,this.withdrawer=void 0,this.staker=et,this.withdrawer=rt}}class Lockup{constructor(et,rt,nt){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=et,this.epoch=rt,this.custodian=nt}}_Lockup=Lockup;Lockup.default=new _Lockup(0,0,PublicKey.default);class StakeInstruction{constructor(){}static decodeInstructionType(et){this.checkProgramId(et.programId);const nt=u32$1("instruction").decode(et.data);let at;for(const[it,st]of Object.entries(STAKE_INSTRUCTION_LAYOUTS))if(st.index==nt){at=it;break}if(!at)throw new Error("Instruction type incorrect; not a StakeInstruction");return at}static decodeInitialize(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,2);const{authorized:rt,lockup:nt}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Initialize,et.data);return{stakePubkey:et.keys[0].pubkey,authorized:new Authorized(new PublicKey(rt.staker),new PublicKey(rt.withdrawer)),lockup:new Lockup(nt.unixTimestamp,nt.epoch,new PublicKey(nt.custodian))}}static decodeDelegate(et){return this.checkProgramId(et.programId),this.checkKeyLength(et.keys,6),decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Delegate,et.data),{stakePubkey:et.keys[0].pubkey,votePubkey:et.keys[1].pubkey,authorizedPubkey:et.keys[5].pubkey}}static decodeAuthorize(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,3);const{newAuthorized:rt,stakeAuthorizationType:nt}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Authorize,et.data),at={stakePubkey:et.keys[0].pubkey,authorizedPubkey:et.keys[2].pubkey,newAuthorizedPubkey:new PublicKey(rt),stakeAuthorizationType:{index:nt}};return et.keys.length>3&&(at.custodianPubkey=et.keys[3].pubkey),at}static decodeAuthorizeWithSeed(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,2);const{newAuthorized:rt,stakeAuthorizationType:nt,authoritySeed:at,authorityOwner:it}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,et.data),st={stakePubkey:et.keys[0].pubkey,authorityBase:et.keys[1].pubkey,authoritySeed:at,authorityOwner:new PublicKey(it),newAuthorizedPubkey:new PublicKey(rt),stakeAuthorizationType:{index:nt}};return et.keys.length>3&&(st.custodianPubkey=et.keys[3].pubkey),st}static decodeSplit(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,3);const{lamports:rt}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Split,et.data);return{stakePubkey:et.keys[0].pubkey,splitStakePubkey:et.keys[1].pubkey,authorizedPubkey:et.keys[2].pubkey,lamports:rt}}static decodeMerge(et){return this.checkProgramId(et.programId),this.checkKeyLength(et.keys,3),decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Merge,et.data),{stakePubkey:et.keys[0].pubkey,sourceStakePubKey:et.keys[1].pubkey,authorizedPubkey:et.keys[4].pubkey}}static decodeWithdraw(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,5);const{lamports:rt}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Withdraw,et.data),nt={stakePubkey:et.keys[0].pubkey,toPubkey:et.keys[1].pubkey,authorizedPubkey:et.keys[4].pubkey,lamports:rt};return et.keys.length>5&&(nt.custodianPubkey=et.keys[5].pubkey),nt}static decodeDeactivate(et){return this.checkProgramId(et.programId),this.checkKeyLength(et.keys,3),decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Deactivate,et.data),{stakePubkey:et.keys[0].pubkey,authorizedPubkey:et.keys[2].pubkey}}static checkProgramId(et){if(!et.equals(StakeProgram.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(et,rt){if(et.length<rt)throw new Error(`invalid instruction; found ${et.length} keys, expected at least ${rt}`)}}const STAKE_INSTRUCTION_LAYOUTS=Object.freeze({Initialize:{index:0,layout:struct$1([u32$1("instruction"),authorized(),lockup()])},Authorize:{index:1,layout:struct$1([u32$1("instruction"),publicKey$4("newAuthorized"),u32$1("stakeAuthorizationType")])},Delegate:{index:2,layout:struct$1([u32$1("instruction")])},Split:{index:3,layout:struct$1([u32$1("instruction"),ns64$1("lamports")])},Withdraw:{index:4,layout:struct$1([u32$1("instruction"),ns64$1("lamports")])},Deactivate:{index:5,layout:struct$1([u32$1("instruction")])},Merge:{index:7,layout:struct$1([u32$1("instruction")])},AuthorizeWithSeed:{index:8,layout:struct$1([u32$1("instruction"),publicKey$4("newAuthorized"),u32$1("stakeAuthorizationType"),rustString("authoritySeed"),publicKey$4("authorityOwner")])}}),StakeAuthorizationLayout=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class StakeProgram{constructor(){}static initialize(et){const{stakePubkey:rt,authorized:nt,lockup:at}=et,it=at||Lockup.default,st=STAKE_INSTRUCTION_LAYOUTS.Initialize,dt=encodeData(st,{authorized:{staker:toBuffer$1(nt.staker.toBuffer()),withdrawer:toBuffer$1(nt.withdrawer.toBuffer())},lockup:{unixTimestamp:it.unixTimestamp,epoch:it.epoch,custodian:toBuffer$1(it.custodian.toBuffer())}}),pt={keys:[{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:this.programId,data:dt};return new TransactionInstruction(pt)}static createAccountWithSeed(et){const rt=new Transaction;rt.add(SystemProgram.createAccountWithSeed({fromPubkey:et.fromPubkey,newAccountPubkey:et.stakePubkey,basePubkey:et.basePubkey,seed:et.seed,lamports:et.lamports,space:this.space,programId:this.programId}));const{stakePubkey:nt,authorized:at,lockup:it}=et;return rt.add(this.initialize({stakePubkey:nt,authorized:at,lockup:it}))}static createAccount(et){const rt=new Transaction;rt.add(SystemProgram.createAccount({fromPubkey:et.fromPubkey,newAccountPubkey:et.stakePubkey,lamports:et.lamports,space:this.space,programId:this.programId}));const{stakePubkey:nt,authorized:at,lockup:it}=et;return rt.add(this.initialize({stakePubkey:nt,authorized:at,lockup:it}))}static delegate(et){const{stakePubkey:rt,authorizedPubkey:nt,votePubkey:at}=et,it=STAKE_INSTRUCTION_LAYOUTS.Delegate,st=encodeData(it);return new Transaction().add({keys:[{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:at,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:STAKE_CONFIG_ID,isSigner:!1,isWritable:!1},{pubkey:nt,isSigner:!0,isWritable:!1}],programId:this.programId,data:st})}static authorize(et){const{stakePubkey:rt,authorizedPubkey:nt,newAuthorizedPubkey:at,stakeAuthorizationType:it,custodianPubkey:st}=et,dt=STAKE_INSTRUCTION_LAYOUTS.Authorize,pt=encodeData(dt,{newAuthorized:toBuffer$1(at.toBuffer()),stakeAuthorizationType:it.index}),mt=[{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!0},{pubkey:nt,isSigner:!0,isWritable:!1}];return st&&mt.push({pubkey:st,isSigner:!0,isWritable:!1}),new Transaction().add({keys:mt,programId:this.programId,data:pt})}static authorizeWithSeed(et){const{stakePubkey:rt,authorityBase:nt,authoritySeed:at,authorityOwner:it,newAuthorizedPubkey:st,stakeAuthorizationType:dt,custodianPubkey:pt}=et,mt=STAKE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,yt=encodeData(mt,{newAuthorized:toBuffer$1(st.toBuffer()),stakeAuthorizationType:dt.index,authoritySeed:at,authorityOwner:toBuffer$1(it.toBuffer())}),Rt=[{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:nt,isSigner:!0,isWritable:!1},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1}];return pt&&Rt.push({pubkey:pt,isSigner:!0,isWritable:!1}),new Transaction().add({keys:Rt,programId:this.programId,data:yt})}static splitInstruction(et){const{stakePubkey:rt,authorizedPubkey:nt,splitStakePubkey:at,lamports:it}=et,st=STAKE_INSTRUCTION_LAYOUTS.Split,dt=encodeData(st,{lamports:it});return new TransactionInstruction({keys:[{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:at,isSigner:!1,isWritable:!0},{pubkey:nt,isSigner:!0,isWritable:!1}],programId:this.programId,data:dt})}static split(et,rt){const nt=new Transaction;return nt.add(SystemProgram.createAccount({fromPubkey:et.authorizedPubkey,newAccountPubkey:et.splitStakePubkey,lamports:rt,space:this.space,programId:this.programId})),nt.add(this.splitInstruction(et))}static splitWithSeed(et,rt){const{stakePubkey:nt,authorizedPubkey:at,splitStakePubkey:it,basePubkey:st,seed:dt,lamports:pt}=et,mt=new Transaction;return mt.add(SystemProgram.allocate({accountPubkey:it,basePubkey:st,seed:dt,space:this.space,programId:this.programId})),rt&&rt>0&&mt.add(SystemProgram.transfer({fromPubkey:et.authorizedPubkey,toPubkey:it,lamports:rt})),mt.add(this.splitInstruction({stakePubkey:nt,authorizedPubkey:at,splitStakePubkey:it,lamports:pt}))}static merge(et){const{stakePubkey:rt,sourceStakePubKey:nt,authorizedPubkey:at}=et,it=STAKE_INSTRUCTION_LAYOUTS.Merge,st=encodeData(it);return new Transaction().add({keys:[{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:nt,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:at,isSigner:!0,isWritable:!1}],programId:this.programId,data:st})}static withdraw(et){const{stakePubkey:rt,authorizedPubkey:nt,toPubkey:at,lamports:it,custodianPubkey:st}=et,dt=STAKE_INSTRUCTION_LAYOUTS.Withdraw,pt=encodeData(dt,{lamports:it}),mt=[{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:at,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:nt,isSigner:!0,isWritable:!1}];return st&&mt.push({pubkey:st,isSigner:!0,isWritable:!1}),new Transaction().add({keys:mt,programId:this.programId,data:pt})}static deactivate(et){const{stakePubkey:rt,authorizedPubkey:nt}=et,at=STAKE_INSTRUCTION_LAYOUTS.Deactivate,it=encodeData(at);return new Transaction().add({keys:[{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:nt,isSigner:!0,isWritable:!1}],programId:this.programId,data:it})}}StakeProgram.programId=new PublicKey("Stake11111111111111111111111111111111111111");StakeProgram.space=200;class VoteInit{constructor(et,rt,nt,at){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=et,this.authorizedVoter=rt,this.authorizedWithdrawer=nt,this.commission=at}}class VoteInstruction{constructor(){}static decodeInstructionType(et){this.checkProgramId(et.programId);const nt=u32$1("instruction").decode(et.data);let at;for(const[it,st]of Object.entries(VOTE_INSTRUCTION_LAYOUTS))if(st.index==nt){at=it;break}if(!at)throw new Error("Instruction type incorrect; not a VoteInstruction");return at}static decodeInitializeAccount(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,4);const{voteInit:rt}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.InitializeAccount,et.data);return{votePubkey:et.keys[0].pubkey,nodePubkey:et.keys[3].pubkey,voteInit:new VoteInit(new PublicKey(rt.nodePubkey),new PublicKey(rt.authorizedVoter),new PublicKey(rt.authorizedWithdrawer),rt.commission)}}static decodeAuthorize(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,3);const{newAuthorized:rt,voteAuthorizationType:nt}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.Authorize,et.data);return{votePubkey:et.keys[0].pubkey,authorizedPubkey:et.keys[2].pubkey,newAuthorizedPubkey:new PublicKey(rt),voteAuthorizationType:{index:nt}}}static decodeAuthorizeWithSeed(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:rt,currentAuthorityDerivedKeySeed:nt,newAuthorized:at,voteAuthorizationType:it}}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,et.data);return{currentAuthorityDerivedKeyBasePubkey:et.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new PublicKey(rt),currentAuthorityDerivedKeySeed:nt,newAuthorizedPubkey:new PublicKey(at),voteAuthorizationType:{index:it},votePubkey:et.keys[0].pubkey}}static decodeWithdraw(et){this.checkProgramId(et.programId),this.checkKeyLength(et.keys,3);const{lamports:rt}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.Withdraw,et.data);return{votePubkey:et.keys[0].pubkey,authorizedWithdrawerPubkey:et.keys[2].pubkey,lamports:rt,toPubkey:et.keys[1].pubkey}}static checkProgramId(et){if(!et.equals(VoteProgram.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(et,rt){if(et.length<rt)throw new Error(`invalid instruction; found ${et.length} keys, expected at least ${rt}`)}}const VOTE_INSTRUCTION_LAYOUTS=Object.freeze({InitializeAccount:{index:0,layout:struct$1([u32$1("instruction"),voteInit()])},Authorize:{index:1,layout:struct$1([u32$1("instruction"),publicKey$4("newAuthorized"),u32$1("voteAuthorizationType")])},Withdraw:{index:3,layout:struct$1([u32$1("instruction"),ns64$1("lamports")])},UpdateValidatorIdentity:{index:4,layout:struct$1([u32$1("instruction")])},AuthorizeWithSeed:{index:10,layout:struct$1([u32$1("instruction"),voteAuthorizeWithSeedArgs()])}}),VoteAuthorizationLayout=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class VoteProgram{constructor(){}static initializeAccount(et){const{votePubkey:rt,nodePubkey:nt,voteInit:at}=et,it=VOTE_INSTRUCTION_LAYOUTS.InitializeAccount,st=encodeData(it,{voteInit:{nodePubkey:toBuffer$1(at.nodePubkey.toBuffer()),authorizedVoter:toBuffer$1(at.authorizedVoter.toBuffer()),authorizedWithdrawer:toBuffer$1(at.authorizedWithdrawer.toBuffer()),commission:at.commission}}),dt={keys:[{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:nt,isSigner:!0,isWritable:!1}],programId:this.programId,data:st};return new TransactionInstruction(dt)}static createAccount(et){const rt=new Transaction;return rt.add(SystemProgram.createAccount({fromPubkey:et.fromPubkey,newAccountPubkey:et.votePubkey,lamports:et.lamports,space:this.space,programId:this.programId})),rt.add(this.initializeAccount({votePubkey:et.votePubkey,nodePubkey:et.voteInit.nodePubkey,voteInit:et.voteInit}))}static authorize(et){const{votePubkey:rt,authorizedPubkey:nt,newAuthorizedPubkey:at,voteAuthorizationType:it}=et,st=VOTE_INSTRUCTION_LAYOUTS.Authorize,dt=encodeData(st,{newAuthorized:toBuffer$1(at.toBuffer()),voteAuthorizationType:it.index}),pt=[{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:nt,isSigner:!0,isWritable:!1}];return new Transaction().add({keys:pt,programId:this.programId,data:dt})}static authorizeWithSeed(et){const{currentAuthorityDerivedKeyBasePubkey:rt,currentAuthorityDerivedKeyOwnerPubkey:nt,currentAuthorityDerivedKeySeed:at,newAuthorizedPubkey:it,voteAuthorizationType:st,votePubkey:dt}=et,pt=VOTE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,mt=encodeData(pt,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:toBuffer$1(nt.toBuffer()),currentAuthorityDerivedKeySeed:at,newAuthorized:toBuffer$1(it.toBuffer()),voteAuthorizationType:st.index}}),yt=[{pubkey:dt,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:rt,isSigner:!0,isWritable:!1}];return new Transaction().add({keys:yt,programId:this.programId,data:mt})}static withdraw(et){const{votePubkey:rt,authorizedWithdrawerPubkey:nt,lamports:at,toPubkey:it}=et,st=VOTE_INSTRUCTION_LAYOUTS.Withdraw,dt=encodeData(st,{lamports:at}),pt=[{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:it,isSigner:!1,isWritable:!0},{pubkey:nt,isSigner:!0,isWritable:!1}];return new Transaction().add({keys:pt,programId:this.programId,data:dt})}static safeWithdraw(et,rt,nt){if(et.lamports>rt-nt)throw new Error("Withdraw will leave vote account with insufficient funds.");return VoteProgram.withdraw(et)}static updateValidatorIdentity(et){const{votePubkey:rt,authorizedWithdrawerPubkey:nt,nodePubkey:at}=et,it=VOTE_INSTRUCTION_LAYOUTS.UpdateValidatorIdentity,st=encodeData(it),dt=[{pubkey:rt,isSigner:!1,isWritable:!0},{pubkey:at,isSigner:!0,isWritable:!1},{pubkey:nt,isSigner:!0,isWritable:!1}];return new Transaction().add({keys:dt,programId:this.programId,data:st})}}VoteProgram.programId=new PublicKey("Vote111111111111111111111111111111111111111");VoteProgram.space=3762;const VALIDATOR_INFO_KEY=new PublicKey("Va1idator1nfo111111111111111111111111111111"),InfoString=type$8({name:string$1(),website:optional$1(string$1()),details:optional$1(string$1()),keybaseUsername:optional$1(string$1())});class ValidatorInfo{constructor(et,rt){this.key=void 0,this.info=void 0,this.key=et,this.info=rt}static fromConfigData(et){let rt=[...et];if(decodeLength(rt)!==2)return null;const at=[];for(let it=0;it<2;it++){const st=new PublicKey(guardedSplice(rt,0,PUBLIC_KEY_LENGTH)),dt=guardedShift(rt)===1;at.push({publicKey:st,isSigner:dt})}if(at[0].publicKey.equals(VALIDATOR_INFO_KEY)&&at[1].isSigner){const it=rustString().decode(Buffer$1.from(rt)),st=JSON.parse(it);return assert$2(st,InfoString),new ValidatorInfo(at[1].publicKey,st)}return null}}const VOTE_PROGRAM_ID=new PublicKey("Vote111111111111111111111111111111111111111"),VoteAccountLayout=struct$1([publicKey$4("nodePubkey"),publicKey$4("authorizedWithdrawer"),u8$1("commission"),nu64$1(),seq(struct$1([nu64$1("slot"),u32$1("confirmationCount")]),offset$1(u32$1(),-8),"votes"),u8$1("rootSlotValid"),nu64$1("rootSlot"),nu64$1(),seq(struct$1([nu64$1("epoch"),publicKey$4("authorizedVoter")]),offset$1(u32$1(),-8),"authorizedVoters"),struct$1([seq(struct$1([publicKey$4("authorizedPubkey"),nu64$1("epochOfLastAuthorizedSwitch"),nu64$1("targetEpoch")]),32,"buf"),nu64$1("idx"),u8$1("isEmpty")],"priorVoters"),nu64$1(),seq(struct$1([nu64$1("epoch"),nu64$1("credits"),nu64$1("prevCredits")]),offset$1(u32$1(),-8),"epochCredits"),struct$1([nu64$1("slot"),nu64$1("timestamp")],"lastTimestamp")]);class VoteAccount{constructor(et){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=et.nodePubkey,this.authorizedWithdrawer=et.authorizedWithdrawer,this.commission=et.commission,this.rootSlot=et.rootSlot,this.votes=et.votes,this.authorizedVoters=et.authorizedVoters,this.priorVoters=et.priorVoters,this.epochCredits=et.epochCredits,this.lastTimestamp=et.lastTimestamp}static fromAccountData(et){const nt=VoteAccountLayout.decode(toBuffer$1(et),4);let at=nt.rootSlot;return nt.rootSlotValid||(at=null),new VoteAccount({nodePubkey:new PublicKey(nt.nodePubkey),authorizedWithdrawer:new PublicKey(nt.authorizedWithdrawer),commission:nt.commission,votes:nt.votes,rootSlot:at,authorizedVoters:nt.authorizedVoters.map(parseAuthorizedVoter),priorVoters:getPriorVoters(nt.priorVoters),epochCredits:nt.epochCredits,lastTimestamp:nt.lastTimestamp})}}function parseAuthorizedVoter({authorizedVoter:tt,epoch:et}){return{epoch:et,authorizedVoter:new PublicKey(tt)}}function parsePriorVoters({authorizedPubkey:tt,epochOfLastAuthorizedSwitch:et,targetEpoch:rt}){return{authorizedPubkey:new PublicKey(tt),epochOfLastAuthorizedSwitch:et,targetEpoch:rt}}function getPriorVoters({buf:tt,idx:et,isEmpty:rt}){return rt?[]:[...tt.slice(et+1).map(parsePriorVoters),...tt.slice(0,et).map(parsePriorVoters)]}const endpoint$1={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function clusterApiUrl(tt,et){const rt=et===!1?"http":"https";if(!tt)return endpoint$1[rt].devnet;const nt=endpoint$1[rt][tt];if(!nt)throw new Error(`Unknown ${rt} cluster: ${tt}`);return nt}async function sendAndConfirmRawTransaction$1(tt,et,rt,nt){let at,it;rt&&Object.prototype.hasOwnProperty.call(rt,"lastValidBlockHeight")||rt&&Object.prototype.hasOwnProperty.call(rt,"nonceValue")?(at=rt,it=nt):it=rt;const st=it&&{skipPreflight:it.skipPreflight,preflightCommitment:it.preflightCommitment||it.commitment,minContextSlot:it.minContextSlot},dt=await tt.sendRawTransaction(et,st),pt=it&&it.commitment,yt=(await(at?tt.confirmTransaction(at,pt):tt.confirmTransaction(dt,pt))).value;if(yt.err)throw dt!=null?new SendTransactionError({action:st!=null&&st.skipPreflight?"send":"simulate",signature:dt,transactionMessage:`Status: (${JSON.stringify(yt)})`}):new Error(`Raw transaction ${dt} failed (${JSON.stringify(yt)})`);return dt}const LAMPORTS_PER_SOL=1e9,index_browser_esm=Object.freeze(Object.defineProperty({__proto__:null,Account,AddressLookupTableAccount,AddressLookupTableInstruction,AddressLookupTableProgram,Authorized,BLOCKHASH_CACHE_TIMEOUT_MS,BPF_LOADER_DEPRECATED_PROGRAM_ID,BPF_LOADER_PROGRAM_ID,BpfLoader,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS,ComputeBudgetInstruction,ComputeBudgetProgram,Connection,Ed25519Program,Enum,EpochSchedule,FeeCalculatorLayout,Keypair,LAMPORTS_PER_SOL,LOOKUP_TABLE_INSTRUCTION_LAYOUTS,Loader,Lockup,MAX_SEED_LENGTH,Message,MessageAccountKeys,MessageV0,NONCE_ACCOUNT_LENGTH,NonceAccount,PACKET_DATA_SIZE,PUBLIC_KEY_LENGTH,PublicKey,SIGNATURE_LENGTH_IN_BYTES:SIGNATURE_LENGTH_IN_BYTES$1,SOLANA_SCHEMA,STAKE_CONFIG_ID,STAKE_INSTRUCTION_LAYOUTS,SYSTEM_INSTRUCTION_LAYOUTS,SYSVAR_CLOCK_PUBKEY,SYSVAR_EPOCH_SCHEDULE_PUBKEY,SYSVAR_INSTRUCTIONS_PUBKEY,SYSVAR_RECENT_BLOCKHASHES_PUBKEY,SYSVAR_RENT_PUBKEY,SYSVAR_REWARDS_PUBKEY,SYSVAR_SLOT_HASHES_PUBKEY,SYSVAR_SLOT_HISTORY_PUBKEY,SYSVAR_STAKE_HISTORY_PUBKEY,Secp256k1Program,SendTransactionError,SolanaJSONRPCError,SolanaJSONRPCErrorCode,StakeAuthorizationLayout,StakeInstruction,StakeProgram,Struct:Struct$1,SystemInstruction,SystemProgram,Transaction,TransactionExpiredBlockheightExceededError,TransactionExpiredNonceInvalidError,TransactionExpiredTimeoutError,TransactionInstruction,TransactionMessage,TransactionStatus,VALIDATOR_INFO_KEY,VERSION_PREFIX_MASK,VOTE_PROGRAM_ID,ValidatorInfo,VersionedMessage,VersionedTransaction,VoteAccount,VoteAuthorizationLayout,VoteInit,VoteInstruction,VoteProgram,clusterApiUrl,sendAndConfirmRawTransaction:sendAndConfirmRawTransaction$1,sendAndConfirmTransaction},Symbol.toStringTag,{value:"Module"})),global$1=globalThis||void 0||self;var camelcase={exports:{}};const UPPERCASE=/[\p{Lu}]/u,LOWERCASE=/[\p{Ll}]/u,LEADING_CAPITAL=/^[\p{Lu}](?![\p{Lu}])/gu,IDENTIFIER=/([\p{Alpha}\p{N}_]|$)/u,SEPARATORS=/[_.\- ]+/,LEADING_SEPARATORS=new RegExp("^"+SEPARATORS.source),SEPARATORS_AND_IDENTIFIER=new RegExp(SEPARATORS.source+IDENTIFIER.source,"gu"),NUMBERS_AND_IDENTIFIER=new RegExp("\\d+"+IDENTIFIER.source,"gu"),preserveCamelCase=(tt,et,rt)=>{let nt=!1,at=!1,it=!1;for(let st=0;st<tt.length;st++){const dt=tt[st];nt&&UPPERCASE.test(dt)?(tt=tt.slice(0,st)+"-"+tt.slice(st),nt=!1,it=at,at=!0,st++):at&&it&&LOWERCASE.test(dt)?(tt=tt.slice(0,st-1)+"-"+tt.slice(st-1),it=at,at=!1,nt=!0):(nt=et(dt)===dt&&rt(dt)!==dt,it=at,at=rt(dt)===dt&&et(dt)!==dt)}return tt},preserveConsecutiveUppercase=(tt,et)=>(LEADING_CAPITAL.lastIndex=0,tt.replace(LEADING_CAPITAL,rt=>et(rt))),postProcess=(tt,et)=>(SEPARATORS_AND_IDENTIFIER.lastIndex=0,NUMBERS_AND_IDENTIFIER.lastIndex=0,tt.replace(SEPARATORS_AND_IDENTIFIER,(rt,nt)=>et(nt)).replace(NUMBERS_AND_IDENTIFIER,rt=>et(rt))),camelCase=(tt,et)=>{if(!(typeof tt=="string"||Array.isArray(tt)))throw new TypeError("Expected the input to be `string | string[]`");if(et={pascalCase:!1,preserveConsecutiveUppercase:!1,...et},Array.isArray(tt)?tt=tt.map(it=>it.trim()).filter(it=>it.length).join("-"):tt=tt.trim(),tt.length===0)return"";const rt=et.locale===!1?it=>it.toLowerCase():it=>it.toLocaleLowerCase(et.locale),nt=et.locale===!1?it=>it.toUpperCase():it=>it.toLocaleUpperCase(et.locale);return tt.length===1?et.pascalCase?nt(tt):rt(tt):(tt!==rt(tt)&&(tt=preserveCamelCase(tt,rt,nt)),tt=tt.replace(LEADING_SEPARATORS,""),et.preserveConsecutiveUppercase?tt=preserveConsecutiveUppercase(tt,rt):tt=rt(tt),et.pascalCase&&(tt=nt(tt.charAt(0))+tt.slice(1)),postProcess(tt,nt))};camelcase.exports=camelCase;camelcase.exports.default=camelCase;var camelcaseExports=camelcase.exports;const camelCase$1=getDefaultExportFromCjs$5(camelcaseExports);var dist$2={},Layout$2={};let Layout$1=class{constructor(et,rt){if(!Number.isInteger(et))throw new TypeError("span must be an integer");this.span=et,this.property=rt}makeDestinationObject(){return{}}decode(et,rt){throw new Error("Layout is abstract")}encode(et,rt,nt){throw new Error("Layout is abstract")}getSpan(et,rt){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(et){const rt=Object.create(this.constructor.prototype);return Object.assign(rt,this),rt.property=et,rt}fromArray(et){}};Layout$2.Layout=Layout$1;function nameWithProperty$1(tt,et){return et.property?tt+"["+et.property+"]":tt}Layout$2.nameWithProperty=nameWithProperty$1;function bindConstructorLayout(tt,et){if(typeof tt!="function")throw new TypeError("Class must be constructor");if(tt.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(et&&et instanceof Layout$1))throw new TypeError("layout must be a Layout");if(et.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");tt.layout_=et,et.boundConstructor_=tt,et.makeDestinationObject=()=>new tt,Object.defineProperty(tt.prototype,"encode",{value:function(rt,nt){return et.encode(this,rt,nt)},writable:!0}),Object.defineProperty(tt,"decode",{value:function(rt,nt){return et.decode(rt,nt)},writable:!0})}Layout$2.bindConstructorLayout=bindConstructorLayout;let ExternalLayout$1=class extends Layout$1{isCount(){throw new Error("ExternalLayout is abstract")}};class GreedyCount extends ExternalLayout$1{constructor(et,rt){if(et===void 0&&(et=1),!Number.isInteger(et)||0>=et)throw new TypeError("elementSpan must be a (positive) integer");super(-1,rt),this.elementSpan=et}isCount(){return!0}decode(et,rt){rt===void 0&&(rt=0);const nt=et.length-rt;return Math.floor(nt/this.elementSpan)}encode(et,rt,nt){return 0}}let OffsetLayout$1=class extends ExternalLayout$1{constructor(et,rt,nt){if(!(et instanceof Layout$1))throw new TypeError("layout must be a Layout");if(rt===void 0)rt=0;else if(!Number.isInteger(rt))throw new TypeError("offset must be integer or undefined");super(et.span,nt||et.property),this.layout=et,this.offset=rt}isCount(){return this.layout instanceof UInt$1||this.layout instanceof UIntBE$1}decode(et,rt){return rt===void 0&&(rt=0),this.layout.decode(et,rt+this.offset)}encode(et,rt,nt){return nt===void 0&&(nt=0),this.layout.encode(et,rt,nt+this.offset)}},UInt$1=class extends Layout$1{constructor(et,rt){if(super(et,rt),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(et,rt){return rt===void 0&&(rt=0),et.readUIntLE(rt,this.span)}encode(et,rt,nt){return nt===void 0&&(nt=0),rt.writeUIntLE(et,nt,this.span),this.span}},UIntBE$1=class extends Layout$1{constructor(et,rt){if(super(et,rt),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(et,rt){return rt===void 0&&(rt=0),et.readUIntBE(rt,this.span)}encode(et,rt,nt){return nt===void 0&&(nt=0),rt.writeUIntBE(et,nt,this.span),this.span}};class Int extends Layout$1{constructor(et,rt){if(super(et,rt),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(et,rt){return rt===void 0&&(rt=0),et.readIntLE(rt,this.span)}encode(et,rt,nt){return nt===void 0&&(nt=0),rt.writeIntLE(et,nt,this.span),this.span}}class IntBE extends Layout$1{constructor(et,rt){if(super(et,rt),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(et,rt){return rt===void 0&&(rt=0),et.readIntBE(rt,this.span)}encode(et,rt,nt){return nt===void 0&&(nt=0),rt.writeIntBE(et,nt,this.span),this.span}}const V2E32$1=Math.pow(2,32);function divmodInt64$1(tt){const et=Math.floor(tt/V2E32$1),rt=tt-et*V2E32$1;return{hi32:et,lo32:rt}}function roundedInt64$1(tt,et){return tt*V2E32$1+et}let NearUInt64$1=class extends Layout$1{constructor(et){super(8,et)}decode(et,rt){rt===void 0&&(rt=0);const nt=et.readUInt32LE(rt),at=et.readUInt32LE(rt+4);return roundedInt64$1(at,nt)}encode(et,rt,nt){nt===void 0&&(nt=0);const at=divmodInt64$1(et);return rt.writeUInt32LE(at.lo32,nt),rt.writeUInt32LE(at.hi32,nt+4),8}};class NearUInt64BE extends Layout$1{constructor(et){super(8,et)}decode(et,rt){rt===void 0&&(rt=0);const nt=et.readUInt32BE(rt),at=et.readUInt32BE(rt+4);return roundedInt64$1(nt,at)}encode(et,rt,nt){nt===void 0&&(nt=0);const at=divmodInt64$1(et);return rt.writeUInt32BE(at.hi32,nt),rt.writeUInt32BE(at.lo32,nt+4),8}}let NearInt64$1=class extends Layout$1{constructor(et){super(8,et)}decode(et,rt){rt===void 0&&(rt=0);const nt=et.readUInt32LE(rt),at=et.readInt32LE(rt+4);return roundedInt64$1(at,nt)}encode(et,rt,nt){nt===void 0&&(nt=0);const at=divmodInt64$1(et);return rt.writeUInt32LE(at.lo32,nt),rt.writeInt32LE(at.hi32,nt+4),8}};class NearInt64BE extends Layout$1{constructor(et){super(8,et)}decode(et,rt){rt===void 0&&(rt=0);const nt=et.readInt32BE(rt),at=et.readUInt32BE(rt+4);return roundedInt64$1(nt,at)}encode(et,rt,nt){nt===void 0&&(nt=0);const at=divmodInt64$1(et);return rt.writeInt32BE(at.hi32,nt),rt.writeUInt32BE(at.lo32,nt+4),8}}class Float extends Layout$1{constructor(et){super(4,et)}decode(et,rt){return rt===void 0&&(rt=0),et.readFloatLE(rt)}encode(et,rt,nt){return nt===void 0&&(nt=0),rt.writeFloatLE(et,nt),4}}class FloatBE extends Layout$1{constructor(et){super(4,et)}decode(et,rt){return rt===void 0&&(rt=0),et.readFloatBE(rt)}encode(et,rt,nt){return nt===void 0&&(nt=0),rt.writeFloatBE(et,nt),4}}class Double extends Layout$1{constructor(et){super(8,et)}decode(et,rt){return rt===void 0&&(rt=0),et.readDoubleLE(rt)}encode(et,rt,nt){return nt===void 0&&(nt=0),rt.writeDoubleLE(et,nt),8}}class DoubleBE extends Layout$1{constructor(et){super(8,et)}decode(et,rt){return rt===void 0&&(rt=0),et.readDoubleBE(rt)}encode(et,rt,nt){return nt===void 0&&(nt=0),rt.writeDoubleBE(et,nt),8}}class Sequence extends Layout$1{constructor(et,rt,nt){if(!(et instanceof Layout$1))throw new TypeError("elementLayout must be a Layout");if(!(rt instanceof ExternalLayout$1&&rt.isCount()||Number.isInteger(rt)&&0<=rt))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let at=-1;!(rt instanceof ExternalLayout$1)&&0<et.span&&(at=rt*et.span),super(at,nt),this.elementLayout=et,this.count=rt}getSpan(et,rt){if(0<=this.span)return this.span;rt===void 0&&(rt=0);let nt=0,at=this.count;if(at instanceof ExternalLayout$1&&(at=at.decode(et,rt)),0<this.elementLayout.span)nt=at*this.elementLayout.span;else{let it=0;for(;it<at;)nt+=this.elementLayout.getSpan(et,rt+nt),++it}return nt}decode(et,rt){rt===void 0&&(rt=0);const nt=[];let at=0,it=this.count;for(it instanceof ExternalLayout$1&&(it=it.decode(et,rt));at<it;)nt.push(this.elementLayout.decode(et,rt)),rt+=this.elementLayout.getSpan(et,rt),at+=1;return nt}encode(et,rt,nt){nt===void 0&&(nt=0);const at=this.elementLayout,it=et.reduce((st,dt)=>st+at.encode(dt,rt,nt+st),0);return this.count instanceof ExternalLayout$1&&this.count.encode(et.length,rt,nt),it}}let Structure$1=class extends Layout$1{constructor(et,rt,nt){if(!(Array.isArray(et)&&et.reduce((it,st)=>it&&st instanceof Layout$1,!0)))throw new TypeError("fields must be array of Layout instances");typeof rt=="boolean"&&nt===void 0&&(nt=rt,rt=void 0);for(const it of et)if(0>it.span&&it.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let at=-1;try{at=et.reduce((it,st)=>it+st.getSpan(),0)}catch{}super(at,rt),this.fields=et,this.decodePrefixes=!!nt}getSpan(et,rt){if(0<=this.span)return this.span;rt===void 0&&(rt=0);let nt=0;try{nt=this.fields.reduce((at,it)=>{const st=it.getSpan(et,rt);return rt+=st,at+st},0)}catch{throw new RangeError("indeterminate span")}return nt}decode(et,rt){rt===void 0&&(rt=0);const nt=this.makeDestinationObject();for(const at of this.fields)if(at.property!==void 0&&(nt[at.property]=at.decode(et,rt)),rt+=at.getSpan(et,rt),this.decodePrefixes&&et.length===rt)break;return nt}encode(et,rt,nt){nt===void 0&&(nt=0);const at=nt;let it=0,st=0;for(const dt of this.fields){let pt=dt.span;if(st=0<pt?pt:0,dt.property!==void 0){const mt=et[dt.property];mt!==void 0&&(st=dt.encode(mt,rt,nt),0>pt&&(pt=dt.getSpan(rt,nt)))}it=nt,nt+=pt}return it+st-at}fromArray(et){const rt=this.makeDestinationObject();for(const nt of this.fields)nt.property!==void 0&&0<et.length&&(rt[nt.property]=et.shift());return rt}layoutFor(et){if(typeof et!="string")throw new TypeError("property must be string");for(const rt of this.fields)if(rt.property===et)return rt}offsetOf(et){if(typeof et!="string")throw new TypeError("property must be string");let rt=0;for(const nt of this.fields){if(nt.property===et)return rt;0>nt.span?rt=-1:0<=rt&&(rt+=nt.span)}}},UnionDiscriminator$1=class{constructor(et){this.property=et}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}},UnionLayoutDiscriminator$1=class extends UnionDiscriminator$1{constructor(et,rt){if(!(et instanceof ExternalLayout$1&&et.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(rt||et.property||"variant"),this.layout=et}decode(et,rt){return this.layout.decode(et,rt)}encode(et,rt,nt){return this.layout.encode(et,rt,nt)}},Union$1=class extends Layout$1{constructor(et,rt,nt){const at=et instanceof UInt$1||et instanceof UIntBE$1;if(at)et=new UnionLayoutDiscriminator$1(new OffsetLayout$1(et));else if(et instanceof ExternalLayout$1&&et.isCount())et=new UnionLayoutDiscriminator$1(et);else if(!(et instanceof UnionDiscriminator$1))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(rt===void 0&&(rt=null),!(rt===null||rt instanceof Layout$1))throw new TypeError("defaultLayout must be null or a Layout");if(rt!==null){if(0>rt.span)throw new Error("defaultLayout must have constant span");rt.property===void 0&&(rt=rt.replicate("content"))}let it=-1;rt&&(it=rt.span,0<=it&&at&&(it+=et.layout.span)),super(it,nt),this.discriminator=et,this.usesPrefixDiscriminator=at,this.defaultLayout=rt,this.registry={};let st=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(dt){return st(dt)},this.configGetSourceVariant=function(dt){st=dt.bind(this)}}getSpan(et,rt){if(0<=this.span)return this.span;rt===void 0&&(rt=0);const nt=this.getVariant(et,rt);if(!nt)throw new Error("unable to determine span for unrecognized variant");return nt.getSpan(et,rt)}defaultGetSourceVariant(et){if(et.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&et.hasOwnProperty(this.defaultLayout.property))return;const rt=this.registry[et[this.discriminator.property]];if(rt&&(!rt.layout||et.hasOwnProperty(rt.property)))return rt}else for(const rt in this.registry){const nt=this.registry[rt];if(et.hasOwnProperty(nt.property))return nt}throw new Error("unable to infer src variant")}decode(et,rt){rt===void 0&&(rt=0);let nt;const at=this.discriminator,it=at.decode(et,rt);let st=this.registry[it];if(st===void 0){let dt=0;st=this.defaultLayout,this.usesPrefixDiscriminator&&(dt=at.layout.span),nt=this.makeDestinationObject(),nt[at.property]=it,nt[st.property]=this.defaultLayout.decode(et,rt+dt)}else nt=st.decode(et,rt);return nt}encode(et,rt,nt){nt===void 0&&(nt=0);const at=this.getSourceVariant(et);if(at===void 0){const it=this.discriminator,st=this.defaultLayout;let dt=0;return this.usesPrefixDiscriminator&&(dt=it.layout.span),it.encode(et[it.property],rt,nt),dt+st.encode(et[st.property],rt,nt+dt)}return at.encode(et,rt,nt)}addVariant(et,rt,nt){const at=new VariantLayout$1(this,et,rt,nt);return this.registry[et]=at,at}getVariant(et,rt){let nt=et;return Buffer.isBuffer(et)&&(rt===void 0&&(rt=0),nt=this.discriminator.decode(et,rt)),this.registry[nt]}},VariantLayout$1=class extends Layout$1{constructor(et,rt,nt,at){if(!(et instanceof Union$1))throw new TypeError("union must be a Union");if(!Number.isInteger(rt)||0>rt)throw new TypeError("variant must be a (non-negative) integer");if(typeof nt=="string"&&at===void 0&&(at=nt,nt=null),nt){if(!(nt instanceof Layout$1))throw new TypeError("layout must be a Layout");if(et.defaultLayout!==null&&0<=nt.span&&nt.span>et.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof at!="string")throw new TypeError("variant must have a String property")}let it=et.span;0>et.span&&(it=nt?nt.span:0,0<=it&&et.usesPrefixDiscriminator&&(it+=et.discriminator.layout.span)),super(it,at),this.union=et,this.variant=rt,this.layout=nt||null}getSpan(et,rt){if(0<=this.span)return this.span;rt===void 0&&(rt=0);let nt=0;return this.union.usesPrefixDiscriminator&&(nt=this.union.discriminator.layout.span),nt+this.layout.getSpan(et,rt+nt)}decode(et,rt){const nt=this.makeDestinationObject();if(rt===void 0&&(rt=0),this!==this.union.getVariant(et,rt))throw new Error("variant mismatch");let at=0;return this.union.usesPrefixDiscriminator&&(at=this.union.discriminator.layout.span),this.layout?nt[this.property]=this.layout.decode(et,rt+at):this.property?nt[this.property]=!0:this.union.usesPrefixDiscriminator&&(nt[this.union.discriminator.property]=this.variant),nt}encode(et,rt,nt){nt===void 0&&(nt=0);let at=0;if(this.union.usesPrefixDiscriminator&&(at=this.union.discriminator.layout.span),this.layout&&!et.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,rt,nt);let it=at;if(this.layout&&(this.layout.encode(et[this.property],rt,nt+at),it+=this.layout.getSpan(rt,nt+at),0<=this.union.span&&it>this.union.span))throw new Error("encoded variant overruns containing union");return it}fromArray(et){if(this.layout)return this.layout.fromArray(et)}};function fixBitwiseResult(tt){return 0>tt&&(tt+=4294967296),tt}class BitStructure extends Layout$1{constructor(et,rt,nt){if(!(et instanceof UInt$1||et instanceof UIntBE$1))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof rt=="string"&&nt===void 0&&(nt=rt,rt=void 0),4<et.span)throw new RangeError("word cannot exceed 32 bits");super(et.span,nt),this.word=et,this.msb=!!rt,this.fields=[];let at=0;this._packedSetValue=function(it){return at=fixBitwiseResult(it),this},this._packedGetValue=function(){return at}}decode(et,rt){const nt=this.makeDestinationObject();rt===void 0&&(rt=0);const at=this.word.decode(et,rt);this._packedSetValue(at);for(const it of this.fields)it.property!==void 0&&(nt[it.property]=it.decode(at));return nt}encode(et,rt,nt){nt===void 0&&(nt=0);const at=this.word.decode(rt,nt);this._packedSetValue(at);for(const it of this.fields)if(it.property!==void 0){const st=et[it.property];st!==void 0&&it.encode(st)}return this.word.encode(this._packedGetValue(),rt,nt)}addField(et,rt){const nt=new BitField(this,et,rt);return this.fields.push(nt),nt}addBoolean(et){const rt=new Boolean$1(this,et);return this.fields.push(rt),rt}fieldFor(et){if(typeof et!="string")throw new TypeError("property must be string");for(const rt of this.fields)if(rt.property===et)return rt}}class BitField{constructor(et,rt,nt){if(!(et instanceof BitStructure))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(rt)||0>=rt)throw new TypeError("bits must be positive integer");const at=8*et.span,it=et.fields.reduce((st,dt)=>st+dt.bits,0);if(rt+it>at)throw new Error("bits too long for span remainder ("+(at-it)+" of "+at+" remain)");this.container=et,this.bits=rt,this.valueMask=(1<<rt)-1,rt===32&&(this.valueMask=4294967295),this.start=it,this.container.msb&&(this.start=at-it-rt),this.wordMask=fixBitwiseResult(this.valueMask<<this.start),this.property=nt}decode(){const et=this.container._packedGetValue();return fixBitwiseResult(et&this.wordMask)>>>this.start}encode(et){if(!Number.isInteger(et)||et!==fixBitwiseResult(et&this.valueMask))throw new TypeError(nameWithProperty$1("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const rt=this.container._packedGetValue(),nt=fixBitwiseResult(et<<this.start);this.container._packedSetValue(fixBitwiseResult(rt&~this.wordMask)|nt)}}let Boolean$1=class extends BitField{constructor(et,rt){super(et,1,rt)}decode(et,rt){return!!BitField.prototype.decode.call(this,et,rt)}encode(et){return typeof et=="boolean"&&(et=+et),BitField.prototype.encode.call(this,et)}},Blob$2=class extends Layout$1{constructor(et,rt){if(!(et instanceof ExternalLayout$1&&et.isCount()||Number.isInteger(et)&&0<=et))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let nt=-1;et instanceof ExternalLayout$1||(nt=et),super(nt,rt),this.length=et}getSpan(et,rt){let nt=this.span;return 0>nt&&(nt=this.length.decode(et,rt)),nt}decode(et,rt){rt===void 0&&(rt=0);let nt=this.span;return 0>nt&&(nt=this.length.decode(et,rt)),et.slice(rt,rt+nt)}encode(et,rt,nt){let at=this.length;if(this.length instanceof ExternalLayout$1&&(at=et.length),!(Buffer.isBuffer(et)&&at===et.length))throw new TypeError(nameWithProperty$1("Blob.encode",this)+" requires (length "+at+") Buffer as src");if(nt+at>rt.length)throw new RangeError("encoding overruns Buffer");return rt.write(et.toString("hex"),nt,at,"hex"),this.length instanceof ExternalLayout$1&&this.length.encode(at,rt,nt),at}};class CString extends Layout$1{constructor(et){super(-1,et)}getSpan(et,rt){if(!Buffer.isBuffer(et))throw new TypeError("b must be a Buffer");rt===void 0&&(rt=0);let nt=rt;for(;nt<et.length&&et[nt]!==0;)nt+=1;return 1+nt-rt}decode(et,rt,nt){rt===void 0&&(rt=0);let at=this.getSpan(et,rt);return et.slice(rt,rt+at-1).toString("utf-8")}encode(et,rt,nt){nt===void 0&&(nt=0),typeof et!="string"&&(et=et.toString());const at=new Buffer(et,"utf8"),it=at.length;if(nt+it>rt.length)throw new RangeError("encoding overruns Buffer");return at.copy(rt,nt),rt[nt+it]=0,it+1}}class UTF8 extends Layout$1{constructor(et,rt){if(typeof et=="string"&&rt===void 0&&(rt=et,et=void 0),et===void 0)et=-1;else if(!Number.isInteger(et))throw new TypeError("maxSpan must be an integer");super(-1,rt),this.maxSpan=et}getSpan(et,rt){if(!Buffer.isBuffer(et))throw new TypeError("b must be a Buffer");return rt===void 0&&(rt=0),et.length-rt}decode(et,rt,nt){rt===void 0&&(rt=0);let at=this.getSpan(et,rt);if(0<=this.maxSpan&&this.maxSpan<at)throw new RangeError("text length exceeds maxSpan");return et.slice(rt,rt+at).toString("utf-8")}encode(et,rt,nt){nt===void 0&&(nt=0),typeof et!="string"&&(et=et.toString());const at=new Buffer(et,"utf8"),it=at.length;if(0<=this.maxSpan&&this.maxSpan<it)throw new RangeError("text length exceeds maxSpan");if(nt+it>rt.length)throw new RangeError("encoding overruns Buffer");return at.copy(rt,nt),it}}class Constant extends Layout$1{constructor(et,rt){super(0,rt),this.value=et}decode(et,rt,nt){return this.value}encode(et,rt,nt){return 0}}Layout$2.ExternalLayout=ExternalLayout$1;Layout$2.GreedyCount=GreedyCount;Layout$2.OffsetLayout=OffsetLayout$1;Layout$2.UInt=UInt$1;Layout$2.UIntBE=UIntBE$1;Layout$2.Int=Int;Layout$2.IntBE=IntBE;Layout$2.Float=Float;Layout$2.FloatBE=FloatBE;Layout$2.Double=Double;Layout$2.DoubleBE=DoubleBE;Layout$2.Sequence=Sequence;Layout$2.Structure=Structure$1;Layout$2.UnionDiscriminator=UnionDiscriminator$1;Layout$2.UnionLayoutDiscriminator=UnionLayoutDiscriminator$1;Layout$2.Union=Union$1;Layout$2.VariantLayout=VariantLayout$1;Layout$2.BitStructure=BitStructure;Layout$2.BitField=BitField;Layout$2.Boolean=Boolean$1;Layout$2.Blob=Blob$2;Layout$2.CString=CString;Layout$2.UTF8=UTF8;Layout$2.Constant=Constant;Layout$2.greedy=(tt,et)=>new GreedyCount(tt,et);Layout$2.offset=(tt,et,rt)=>new OffsetLayout$1(tt,et,rt);Layout$2.u8=tt=>new UInt$1(1,tt);Layout$2.u16=tt=>new UInt$1(2,tt);Layout$2.u24=tt=>new UInt$1(3,tt);Layout$2.u32=tt=>new UInt$1(4,tt);Layout$2.u40=tt=>new UInt$1(5,tt);Layout$2.u48=tt=>new UInt$1(6,tt);Layout$2.nu64=tt=>new NearUInt64$1(tt);Layout$2.u16be=tt=>new UIntBE$1(2,tt);Layout$2.u24be=tt=>new UIntBE$1(3,tt);Layout$2.u32be=tt=>new UIntBE$1(4,tt);Layout$2.u40be=tt=>new UIntBE$1(5,tt);Layout$2.u48be=tt=>new UIntBE$1(6,tt);Layout$2.nu64be=tt=>new NearUInt64BE(tt);Layout$2.s8=tt=>new Int(1,tt);Layout$2.s16=tt=>new Int(2,tt);Layout$2.s24=tt=>new Int(3,tt);Layout$2.s32=tt=>new Int(4,tt);Layout$2.s40=tt=>new Int(5,tt);Layout$2.s48=tt=>new Int(6,tt);Layout$2.ns64=tt=>new NearInt64$1(tt);Layout$2.s16be=tt=>new IntBE(2,tt);Layout$2.s24be=tt=>new IntBE(3,tt);Layout$2.s32be=tt=>new IntBE(4,tt);Layout$2.s40be=tt=>new IntBE(5,tt);Layout$2.s48be=tt=>new IntBE(6,tt);Layout$2.ns64be=tt=>new NearInt64BE(tt);Layout$2.f32=tt=>new Float(tt);Layout$2.f32be=tt=>new FloatBE(tt);Layout$2.f64=tt=>new Double(tt);Layout$2.f64be=tt=>new DoubleBE(tt);Layout$2.struct=(tt,et,rt)=>new Structure$1(tt,et,rt);Layout$2.bits=(tt,et,rt)=>new BitStructure(tt,et,rt);Layout$2.seq=(tt,et,rt)=>new Sequence(tt,et,rt);Layout$2.union=(tt,et,rt)=>new Union$1(tt,et,rt);Layout$2.unionLayoutDiscriminator=(tt,et)=>new UnionLayoutDiscriminator$1(tt,et);Layout$2.blob=(tt,et)=>new Blob$2(tt,et);Layout$2.cstr=tt=>new CString(tt);Layout$2.utf8=(tt,et)=>new UTF8(tt,et);Layout$2.const=(tt,et)=>new Constant(tt,et);const require$$2$1=getAugmentedNamespace(index_browser_esm);(function(tt){var et=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(ot){return ot&&ot.__esModule?ot:{default:ot}};Object.defineProperty(tt,"__esModule",{value:!0}),tt.map=tt.array=tt.rustEnum=tt.str=tt.vecU8=tt.tagged=tt.vec=tt.bool=tt.option=tt.publicKey=tt.i256=tt.u256=tt.i128=tt.u128=tt.i64=tt.u64=tt.struct=tt.f64=tt.f32=tt.i32=tt.u32=tt.i16=tt.u16=tt.i8=tt.u8=void 0;const rt=Layout$2,nt=require$$2$1,at=et(bnExports);var it=Layout$2;Object.defineProperty(tt,"u8",{enumerable:!0,get:function(){return it.u8}}),Object.defineProperty(tt,"i8",{enumerable:!0,get:function(){return it.s8}}),Object.defineProperty(tt,"u16",{enumerable:!0,get:function(){return it.u16}}),Object.defineProperty(tt,"i16",{enumerable:!0,get:function(){return it.s16}}),Object.defineProperty(tt,"u32",{enumerable:!0,get:function(){return it.u32}}),Object.defineProperty(tt,"i32",{enumerable:!0,get:function(){return it.s32}}),Object.defineProperty(tt,"f32",{enumerable:!0,get:function(){return it.f32}}),Object.defineProperty(tt,"f64",{enumerable:!0,get:function(){return it.f64}}),Object.defineProperty(tt,"struct",{enumerable:!0,get:function(){return it.struct}});class st extends rt.Layout{constructor(ft,ht,vt){super(ft,vt),this.blob=(0,rt.blob)(ft),this.signed=ht}decode(ft,ht=0){const vt=new at.default(this.blob.decode(ft,ht),10,"le");return this.signed?vt.fromTwos(this.span*8).clone():vt}encode(ft,ht,vt=0){return this.signed&&(ft=ft.toTwos(this.span*8)),this.blob.encode(ft.toArrayLike(Buffer,"le",this.span),ht,vt)}}function dt(ot){return new st(8,!1,ot)}tt.u64=dt;function pt(ot){return new st(8,!0,ot)}tt.i64=pt;function mt(ot){return new st(16,!1,ot)}tt.u128=mt;function yt(ot){return new st(16,!0,ot)}tt.i128=yt;function Rt(ot){return new st(32,!1,ot)}tt.u256=Rt;function Tt(ot){return new st(32,!0,ot)}tt.i256=Tt;class At extends rt.Layout{constructor(ft,ht,vt,wt){super(ft.span,wt),this.layout=ft,this.decoder=ht,this.encoder=vt}decode(ft,ht){return this.decoder(this.layout.decode(ft,ht))}encode(ft,ht,vt){return this.layout.encode(this.encoder(ft),ht,vt)}getSpan(ft,ht){return this.layout.getSpan(ft,ht)}}function xt(ot){return new At((0,rt.blob)(32),ft=>new nt.PublicKey(ft),ft=>ft.toBuffer(),ot)}tt.publicKey=xt;class Nt extends rt.Layout{constructor(ft,ht){super(-1,ht),this.layout=ft,this.discriminator=(0,rt.u8)()}encode(ft,ht,vt=0){return ft==null?this.discriminator.encode(0,ht,vt):(this.discriminator.encode(1,ht,vt),this.layout.encode(ft,ht,vt+1)+1)}decode(ft,ht=0){const vt=this.discriminator.decode(ft,ht);if(vt===0)return null;if(vt===1)return this.layout.decode(ft,ht+1);throw new Error("Invalid option "+this.property)}getSpan(ft,ht=0){const vt=this.discriminator.decode(ft,ht);if(vt===0)return 1;if(vt===1)return this.layout.getSpan(ft,ht+1)+1;throw new Error("Invalid option "+this.property)}}function Ct(ot,ft){return new Nt(ot,ft)}tt.option=Ct;function Ot(ot){return new At((0,rt.u8)(),kt,Pt,ot)}tt.bool=Ot;function kt(ot){if(ot===0)return!1;if(ot===1)return!0;throw new Error("Invalid bool: "+ot)}function Pt(ot){return ot?1:0}function Dt(ot,ft){const ht=(0,rt.u32)("length"),vt=(0,rt.struct)([ht,(0,rt.seq)(ot,(0,rt.offset)(ht,-ht.span),"values")]);return new At(vt,({values:wt})=>wt,wt=>({values:wt}),ft)}tt.vec=Dt;function Gt(ot,ft,ht){const vt=(0,rt.struct)([dt("tag"),ft.replicate("data")]);function wt({tag:bt,data:$t}){if(!bt.eq(ot))throw new Error("Invalid tag, expected: "+ot.toString("hex")+", got: "+bt.toString("hex"));return $t}return new At(vt,wt,bt=>({tag:ot,data:bt}),ht)}tt.tagged=Gt;function jt(ot){const ft=(0,rt.u32)("length"),ht=(0,rt.struct)([ft,(0,rt.blob)((0,rt.offset)(ft,-ft.span),"data")]);return new At(ht,({data:vt})=>vt,vt=>({data:vt}),ot)}tt.vecU8=jt;function Yt(ot){return new At(jt(),ft=>ft.toString("utf-8"),ft=>Buffer.from(ft,"utf-8"),ot)}tt.str=Yt;function tr(ot,ft,ht){const vt=(0,rt.union)(ht??(0,rt.u8)(),ft);return ot.forEach((wt,bt)=>vt.addVariant(bt,wt,wt.property)),vt}tt.rustEnum=tr;function er(ot,ft,ht){const vt=(0,rt.struct)([(0,rt.seq)(ot,ft,"values")]);return new At(vt,({values:wt})=>wt,wt=>({values:wt}),ht)}tt.array=er;class lr extends rt.Layout{constructor(ft,ht,vt){super(ft.span+ht.span,vt),this.keyLayout=ft,this.valueLayout=ht}decode(ft,ht){ht=ht||0;const vt=this.keyLayout.decode(ft,ht),wt=this.valueLayout.decode(ft,ht+this.keyLayout.getSpan(ft,ht));return[vt,wt]}encode(ft,ht,vt){vt=vt||0;const wt=this.keyLayout.encode(ft[0],ht,vt),bt=this.valueLayout.encode(ft[1],ht,vt+wt);return wt+bt}getSpan(ft,ht){return this.keyLayout.getSpan(ft,ht)+this.valueLayout.getSpan(ft,ht)}}function It(ot,ft,ht){const vt=(0,rt.u32)("length"),wt=(0,rt.struct)([vt,(0,rt.seq)(new lr(ot,ft),(0,rt.offset)(vt,-vt.span),"values")]);return new At(wt,({values:bt})=>new Map(bt),bt=>({values:Array.from(bt.entries())}),ht)}tt.map=It})(dist$2);/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(tt){let et=tt.length;for(;--et>=0;)tt[et]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(tt,et,rt,nt,at){this.static_tree=tt,this.extra_bits=et,this.extra_base=rt,this.elems=nt,this.max_length=at,this.has_stree=tt&&tt.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(tt,et){this.dyn_tree=tt,this.max_code=0,this.stat_desc=et}const d_code=tt=>tt<256?_dist_code[tt]:_dist_code[256+(tt>>>7)],put_short=(tt,et)=>{tt.pending_buf[tt.pending++]=et&255,tt.pending_buf[tt.pending++]=et>>>8&255},send_bits=(tt,et,rt)=>{tt.bi_valid>Buf_size-rt?(tt.bi_buf|=et<<tt.bi_valid&65535,put_short(tt,tt.bi_buf),tt.bi_buf=et>>Buf_size-tt.bi_valid,tt.bi_valid+=rt-Buf_size):(tt.bi_buf|=et<<tt.bi_valid&65535,tt.bi_valid+=rt)},send_code=(tt,et,rt)=>{send_bits(tt,rt[et*2],rt[et*2+1])},bi_reverse=(tt,et)=>{let rt=0;do rt|=tt&1,tt>>>=1,rt<<=1;while(--et>0);return rt>>>1},bi_flush=tt=>{tt.bi_valid===16?(put_short(tt,tt.bi_buf),tt.bi_buf=0,tt.bi_valid=0):tt.bi_valid>=8&&(tt.pending_buf[tt.pending++]=tt.bi_buf&255,tt.bi_buf>>=8,tt.bi_valid-=8)},gen_bitlen=(tt,et)=>{const rt=et.dyn_tree,nt=et.max_code,at=et.stat_desc.static_tree,it=et.stat_desc.has_stree,st=et.stat_desc.extra_bits,dt=et.stat_desc.extra_base,pt=et.stat_desc.max_length;let mt,yt,Rt,Tt,At,xt,Nt=0;for(Tt=0;Tt<=MAX_BITS$1;Tt++)tt.bl_count[Tt]=0;for(rt[tt.heap[tt.heap_max]*2+1]=0,mt=tt.heap_max+1;mt<HEAP_SIZE$1;mt++)yt=tt.heap[mt],Tt=rt[rt[yt*2+1]*2+1]+1,Tt>pt&&(Tt=pt,Nt++),rt[yt*2+1]=Tt,!(yt>nt)&&(tt.bl_count[Tt]++,At=0,yt>=dt&&(At=st[yt-dt]),xt=rt[yt*2],tt.opt_len+=xt*(Tt+At),it&&(tt.static_len+=xt*(at[yt*2+1]+At)));if(Nt!==0){do{for(Tt=pt-1;tt.bl_count[Tt]===0;)Tt--;tt.bl_count[Tt]--,tt.bl_count[Tt+1]+=2,tt.bl_count[pt]--,Nt-=2}while(Nt>0);for(Tt=pt;Tt!==0;Tt--)for(yt=tt.bl_count[Tt];yt!==0;)Rt=tt.heap[--mt],!(Rt>nt)&&(rt[Rt*2+1]!==Tt&&(tt.opt_len+=(Tt-rt[Rt*2+1])*rt[Rt*2],rt[Rt*2+1]=Tt),yt--)}},gen_codes=(tt,et,rt)=>{const nt=new Array(MAX_BITS$1+1);let at=0,it,st;for(it=1;it<=MAX_BITS$1;it++)at=at+rt[it-1]<<1,nt[it]=at;for(st=0;st<=et;st++){let dt=tt[st*2+1];dt!==0&&(tt[st*2]=bi_reverse(nt[dt]++,dt))}},tr_static_init=()=>{let tt,et,rt,nt,at;const it=new Array(MAX_BITS$1+1);for(rt=0,nt=0;nt<LENGTH_CODES$1-1;nt++)for(base_length[nt]=rt,tt=0;tt<1<<extra_lbits[nt];tt++)_length_code[rt++]=nt;for(_length_code[rt-1]=nt,at=0,nt=0;nt<16;nt++)for(base_dist[nt]=at,tt=0;tt<1<<extra_dbits[nt];tt++)_dist_code[at++]=nt;for(at>>=7;nt<D_CODES$1;nt++)for(base_dist[nt]=at<<7,tt=0;tt<1<<extra_dbits[nt]-7;tt++)_dist_code[256+at++]=nt;for(et=0;et<=MAX_BITS$1;et++)it[et]=0;for(tt=0;tt<=143;)static_ltree[tt*2+1]=8,tt++,it[8]++;for(;tt<=255;)static_ltree[tt*2+1]=9,tt++,it[9]++;for(;tt<=279;)static_ltree[tt*2+1]=7,tt++,it[7]++;for(;tt<=287;)static_ltree[tt*2+1]=8,tt++,it[8]++;for(gen_codes(static_ltree,L_CODES$1+1,it),tt=0;tt<D_CODES$1;tt++)static_dtree[tt*2+1]=5,static_dtree[tt*2]=bi_reverse(tt,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=tt=>{let et;for(et=0;et<L_CODES$1;et++)tt.dyn_ltree[et*2]=0;for(et=0;et<D_CODES$1;et++)tt.dyn_dtree[et*2]=0;for(et=0;et<BL_CODES$1;et++)tt.bl_tree[et*2]=0;tt.dyn_ltree[END_BLOCK*2]=1,tt.opt_len=tt.static_len=0,tt.sym_next=tt.matches=0},bi_windup=tt=>{tt.bi_valid>8?put_short(tt,tt.bi_buf):tt.bi_valid>0&&(tt.pending_buf[tt.pending++]=tt.bi_buf),tt.bi_buf=0,tt.bi_valid=0},smaller=(tt,et,rt,nt)=>{const at=et*2,it=rt*2;return tt[at]<tt[it]||tt[at]===tt[it]&&nt[et]<=nt[rt]},pqdownheap=(tt,et,rt)=>{const nt=tt.heap[rt];let at=rt<<1;for(;at<=tt.heap_len&&(at<tt.heap_len&&smaller(et,tt.heap[at+1],tt.heap[at],tt.depth)&&at++,!smaller(et,nt,tt.heap[at],tt.depth));)tt.heap[rt]=tt.heap[at],rt=at,at<<=1;tt.heap[rt]=nt},compress_block=(tt,et,rt)=>{let nt,at,it=0,st,dt;if(tt.sym_next!==0)do nt=tt.pending_buf[tt.sym_buf+it++]&255,nt+=(tt.pending_buf[tt.sym_buf+it++]&255)<<8,at=tt.pending_buf[tt.sym_buf+it++],nt===0?send_code(tt,at,et):(st=_length_code[at],send_code(tt,st+LITERALS$1+1,et),dt=extra_lbits[st],dt!==0&&(at-=base_length[st],send_bits(tt,at,dt)),nt--,st=d_code(nt),send_code(tt,st,rt),dt=extra_dbits[st],dt!==0&&(nt-=base_dist[st],send_bits(tt,nt,dt)));while(it<tt.sym_next);send_code(tt,END_BLOCK,et)},build_tree=(tt,et)=>{const rt=et.dyn_tree,nt=et.stat_desc.static_tree,at=et.stat_desc.has_stree,it=et.stat_desc.elems;let st,dt,pt=-1,mt;for(tt.heap_len=0,tt.heap_max=HEAP_SIZE$1,st=0;st<it;st++)rt[st*2]!==0?(tt.heap[++tt.heap_len]=pt=st,tt.depth[st]=0):rt[st*2+1]=0;for(;tt.heap_len<2;)mt=tt.heap[++tt.heap_len]=pt<2?++pt:0,rt[mt*2]=1,tt.depth[mt]=0,tt.opt_len--,at&&(tt.static_len-=nt[mt*2+1]);for(et.max_code=pt,st=tt.heap_len>>1;st>=1;st--)pqdownheap(tt,rt,st);mt=it;do st=tt.heap[1],tt.heap[1]=tt.heap[tt.heap_len--],pqdownheap(tt,rt,1),dt=tt.heap[1],tt.heap[--tt.heap_max]=st,tt.heap[--tt.heap_max]=dt,rt[mt*2]=rt[st*2]+rt[dt*2],tt.depth[mt]=(tt.depth[st]>=tt.depth[dt]?tt.depth[st]:tt.depth[dt])+1,rt[st*2+1]=rt[dt*2+1]=mt,tt.heap[1]=mt++,pqdownheap(tt,rt,1);while(tt.heap_len>=2);tt.heap[--tt.heap_max]=tt.heap[1],gen_bitlen(tt,et),gen_codes(rt,pt,tt.bl_count)},scan_tree=(tt,et,rt)=>{let nt,at=-1,it,st=et[0*2+1],dt=0,pt=7,mt=4;for(st===0&&(pt=138,mt=3),et[(rt+1)*2+1]=65535,nt=0;nt<=rt;nt++)it=st,st=et[(nt+1)*2+1],!(++dt<pt&&it===st)&&(dt<mt?tt.bl_tree[it*2]+=dt:it!==0?(it!==at&&tt.bl_tree[it*2]++,tt.bl_tree[REP_3_6*2]++):dt<=10?tt.bl_tree[REPZ_3_10*2]++:tt.bl_tree[REPZ_11_138*2]++,dt=0,at=it,st===0?(pt=138,mt=3):it===st?(pt=6,mt=3):(pt=7,mt=4))},send_tree=(tt,et,rt)=>{let nt,at=-1,it,st=et[0*2+1],dt=0,pt=7,mt=4;for(st===0&&(pt=138,mt=3),nt=0;nt<=rt;nt++)if(it=st,st=et[(nt+1)*2+1],!(++dt<pt&&it===st)){if(dt<mt)do send_code(tt,it,tt.bl_tree);while(--dt!==0);else it!==0?(it!==at&&(send_code(tt,it,tt.bl_tree),dt--),send_code(tt,REP_3_6,tt.bl_tree),send_bits(tt,dt-3,2)):dt<=10?(send_code(tt,REPZ_3_10,tt.bl_tree),send_bits(tt,dt-3,3)):(send_code(tt,REPZ_11_138,tt.bl_tree),send_bits(tt,dt-11,7));dt=0,at=it,st===0?(pt=138,mt=3):it===st?(pt=6,mt=3):(pt=7,mt=4)}},build_bl_tree=tt=>{let et;for(scan_tree(tt,tt.dyn_ltree,tt.l_desc.max_code),scan_tree(tt,tt.dyn_dtree,tt.d_desc.max_code),build_tree(tt,tt.bl_desc),et=BL_CODES$1-1;et>=3&&tt.bl_tree[bl_order[et]*2+1]===0;et--);return tt.opt_len+=3*(et+1)+5+5+4,et},send_all_trees=(tt,et,rt,nt)=>{let at;for(send_bits(tt,et-257,5),send_bits(tt,rt-1,5),send_bits(tt,nt-4,4),at=0;at<nt;at++)send_bits(tt,tt.bl_tree[bl_order[at]*2+1],3);send_tree(tt,tt.dyn_ltree,et-1),send_tree(tt,tt.dyn_dtree,rt-1)},detect_data_type=tt=>{let et=4093624447,rt;for(rt=0;rt<=31;rt++,et>>>=1)if(et&1&&tt.dyn_ltree[rt*2]!==0)return Z_BINARY;if(tt.dyn_ltree[9*2]!==0||tt.dyn_ltree[10*2]!==0||tt.dyn_ltree[13*2]!==0)return Z_TEXT;for(rt=32;rt<LITERALS$1;rt++)if(tt.dyn_ltree[rt*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=tt=>{static_init_done||(tr_static_init(),static_init_done=!0),tt.l_desc=new TreeDesc(tt.dyn_ltree,static_l_desc),tt.d_desc=new TreeDesc(tt.dyn_dtree,static_d_desc),tt.bl_desc=new TreeDesc(tt.bl_tree,static_bl_desc),tt.bi_buf=0,tt.bi_valid=0,init_block(tt)},_tr_stored_block$1=(tt,et,rt,nt)=>{send_bits(tt,(STORED_BLOCK<<1)+(nt?1:0),3),bi_windup(tt),put_short(tt,rt),put_short(tt,~rt),rt&&tt.pending_buf.set(tt.window.subarray(et,et+rt),tt.pending),tt.pending+=rt},_tr_align$1=tt=>{send_bits(tt,STATIC_TREES<<1,3),send_code(tt,END_BLOCK,static_ltree),bi_flush(tt)},_tr_flush_block$1=(tt,et,rt,nt)=>{let at,it,st=0;tt.level>0?(tt.strm.data_type===Z_UNKNOWN$1&&(tt.strm.data_type=detect_data_type(tt)),build_tree(tt,tt.l_desc),build_tree(tt,tt.d_desc),st=build_bl_tree(tt),at=tt.opt_len+3+7>>>3,it=tt.static_len+3+7>>>3,it<=at&&(at=it)):at=it=rt+5,rt+4<=at&&et!==-1?_tr_stored_block$1(tt,et,rt,nt):tt.strategy===Z_FIXED$1||it===at?(send_bits(tt,(STATIC_TREES<<1)+(nt?1:0),3),compress_block(tt,static_ltree,static_dtree)):(send_bits(tt,(DYN_TREES<<1)+(nt?1:0),3),send_all_trees(tt,tt.l_desc.max_code+1,tt.d_desc.max_code+1,st+1),compress_block(tt,tt.dyn_ltree,tt.dyn_dtree)),init_block(tt),nt&&bi_windup(tt)},_tr_tally$1=(tt,et,rt)=>(tt.pending_buf[tt.sym_buf+tt.sym_next++]=et,tt.pending_buf[tt.sym_buf+tt.sym_next++]=et>>8,tt.pending_buf[tt.sym_buf+tt.sym_next++]=rt,et===0?tt.dyn_ltree[rt*2]++:(tt.matches++,et--,tt.dyn_ltree[(_length_code[rt]+LITERALS$1+1)*2]++,tt.dyn_dtree[d_code(et)*2]++),tt.sym_next===tt.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(tt,et,rt,nt)=>{let at=tt&65535|0,it=tt>>>16&65535|0,st=0;for(;rt!==0;){st=rt>2e3?2e3:rt,rt-=st;do at=at+et[nt++]|0,it=it+at|0;while(--st);at%=65521,it%=65521}return at|it<<16|0};var adler32_1=adler32;const makeTable=()=>{let tt,et=[];for(var rt=0;rt<256;rt++){tt=rt;for(var nt=0;nt<8;nt++)tt=tt&1?3988292384^tt>>>1:tt>>>1;et[rt]=tt}return et},crcTable=new Uint32Array(makeTable()),crc32=(tt,et,rt,nt)=>{const at=crcTable,it=nt+rt;tt^=-1;for(let st=nt;st<it;st++)tt=tt>>>8^at[(tt^et[st])&255];return tt^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(tt,et)=>(tt.msg=messages[et],et),rank=tt=>tt*2-(tt>4?9:0),zero=tt=>{let et=tt.length;for(;--et>=0;)tt[et]=0},slide_hash=tt=>{let et,rt,nt,at=tt.w_size;et=tt.hash_size,nt=et;do rt=tt.head[--nt],tt.head[nt]=rt>=at?rt-at:0;while(--et);et=at,nt=et;do rt=tt.prev[--nt],tt.prev[nt]=rt>=at?rt-at:0;while(--et)};let HASH_ZLIB=(tt,et,rt)=>(et<<tt.hash_shift^rt)&tt.hash_mask,HASH=HASH_ZLIB;const flush_pending=tt=>{const et=tt.state;let rt=et.pending;rt>tt.avail_out&&(rt=tt.avail_out),rt!==0&&(tt.output.set(et.pending_buf.subarray(et.pending_out,et.pending_out+rt),tt.next_out),tt.next_out+=rt,et.pending_out+=rt,tt.total_out+=rt,tt.avail_out-=rt,et.pending-=rt,et.pending===0&&(et.pending_out=0))},flush_block_only=(tt,et)=>{_tr_flush_block(tt,tt.block_start>=0?tt.block_start:-1,tt.strstart-tt.block_start,et),tt.block_start=tt.strstart,flush_pending(tt.strm)},put_byte=(tt,et)=>{tt.pending_buf[tt.pending++]=et},putShortMSB=(tt,et)=>{tt.pending_buf[tt.pending++]=et>>>8&255,tt.pending_buf[tt.pending++]=et&255},read_buf=(tt,et,rt,nt)=>{let at=tt.avail_in;return at>nt&&(at=nt),at===0?0:(tt.avail_in-=at,et.set(tt.input.subarray(tt.next_in,tt.next_in+at),rt),tt.state.wrap===1?tt.adler=adler32_1(tt.adler,et,at,rt):tt.state.wrap===2&&(tt.adler=crc32_1(tt.adler,et,at,rt)),tt.next_in+=at,tt.total_in+=at,at)},longest_match=(tt,et)=>{let rt=tt.max_chain_length,nt=tt.strstart,at,it,st=tt.prev_length,dt=tt.nice_match;const pt=tt.strstart>tt.w_size-MIN_LOOKAHEAD?tt.strstart-(tt.w_size-MIN_LOOKAHEAD):0,mt=tt.window,yt=tt.w_mask,Rt=tt.prev,Tt=tt.strstart+MAX_MATCH;let At=mt[nt+st-1],xt=mt[nt+st];tt.prev_length>=tt.good_match&&(rt>>=2),dt>tt.lookahead&&(dt=tt.lookahead);do if(at=et,!(mt[at+st]!==xt||mt[at+st-1]!==At||mt[at]!==mt[nt]||mt[++at]!==mt[nt+1])){nt+=2,at++;do;while(mt[++nt]===mt[++at]&&mt[++nt]===mt[++at]&&mt[++nt]===mt[++at]&&mt[++nt]===mt[++at]&&mt[++nt]===mt[++at]&&mt[++nt]===mt[++at]&&mt[++nt]===mt[++at]&&mt[++nt]===mt[++at]&&nt<Tt);if(it=MAX_MATCH-(Tt-nt),nt=Tt-MAX_MATCH,it>st){if(tt.match_start=et,st=it,it>=dt)break;At=mt[nt+st-1],xt=mt[nt+st]}}while((et=Rt[et&yt])>pt&&--rt!==0);return st<=tt.lookahead?st:tt.lookahead},fill_window=tt=>{const et=tt.w_size;let rt,nt,at;do{if(nt=tt.window_size-tt.lookahead-tt.strstart,tt.strstart>=et+(et-MIN_LOOKAHEAD)&&(tt.window.set(tt.window.subarray(et,et+et-nt),0),tt.match_start-=et,tt.strstart-=et,tt.block_start-=et,tt.insert>tt.strstart&&(tt.insert=tt.strstart),slide_hash(tt),nt+=et),tt.strm.avail_in===0)break;if(rt=read_buf(tt.strm,tt.window,tt.strstart+tt.lookahead,nt),tt.lookahead+=rt,tt.lookahead+tt.insert>=MIN_MATCH)for(at=tt.strstart-tt.insert,tt.ins_h=tt.window[at],tt.ins_h=HASH(tt,tt.ins_h,tt.window[at+1]);tt.insert&&(tt.ins_h=HASH(tt,tt.ins_h,tt.window[at+MIN_MATCH-1]),tt.prev[at&tt.w_mask]=tt.head[tt.ins_h],tt.head[tt.ins_h]=at,at++,tt.insert--,!(tt.lookahead+tt.insert<MIN_MATCH)););}while(tt.lookahead<MIN_LOOKAHEAD&&tt.strm.avail_in!==0)},deflate_stored=(tt,et)=>{let rt=tt.pending_buf_size-5>tt.w_size?tt.w_size:tt.pending_buf_size-5,nt,at,it,st=0,dt=tt.strm.avail_in;do{if(nt=65535,it=tt.bi_valid+42>>3,tt.strm.avail_out<it||(it=tt.strm.avail_out-it,at=tt.strstart-tt.block_start,nt>at+tt.strm.avail_in&&(nt=at+tt.strm.avail_in),nt>it&&(nt=it),nt<rt&&(nt===0&&et!==Z_FINISH$3||et===Z_NO_FLUSH$2||nt!==at+tt.strm.avail_in)))break;st=et===Z_FINISH$3&&nt===at+tt.strm.avail_in?1:0,_tr_stored_block(tt,0,0,st),tt.pending_buf[tt.pending-4]=nt,tt.pending_buf[tt.pending-3]=nt>>8,tt.pending_buf[tt.pending-2]=~nt,tt.pending_buf[tt.pending-1]=~nt>>8,flush_pending(tt.strm),at&&(at>nt&&(at=nt),tt.strm.output.set(tt.window.subarray(tt.block_start,tt.block_start+at),tt.strm.next_out),tt.strm.next_out+=at,tt.strm.avail_out-=at,tt.strm.total_out+=at,tt.block_start+=at,nt-=at),nt&&(read_buf(tt.strm,tt.strm.output,tt.strm.next_out,nt),tt.strm.next_out+=nt,tt.strm.avail_out-=nt,tt.strm.total_out+=nt)}while(st===0);return dt-=tt.strm.avail_in,dt&&(dt>=tt.w_size?(tt.matches=2,tt.window.set(tt.strm.input.subarray(tt.strm.next_in-tt.w_size,tt.strm.next_in),0),tt.strstart=tt.w_size,tt.insert=tt.strstart):(tt.window_size-tt.strstart<=dt&&(tt.strstart-=tt.w_size,tt.window.set(tt.window.subarray(tt.w_size,tt.w_size+tt.strstart),0),tt.matches<2&&tt.matches++,tt.insert>tt.strstart&&(tt.insert=tt.strstart)),tt.window.set(tt.strm.input.subarray(tt.strm.next_in-dt,tt.strm.next_in),tt.strstart),tt.strstart+=dt,tt.insert+=dt>tt.w_size-tt.insert?tt.w_size-tt.insert:dt),tt.block_start=tt.strstart),tt.high_water<tt.strstart&&(tt.high_water=tt.strstart),st?BS_FINISH_DONE:et!==Z_NO_FLUSH$2&&et!==Z_FINISH$3&&tt.strm.avail_in===0&&tt.strstart===tt.block_start?BS_BLOCK_DONE:(it=tt.window_size-tt.strstart,tt.strm.avail_in>it&&tt.block_start>=tt.w_size&&(tt.block_start-=tt.w_size,tt.strstart-=tt.w_size,tt.window.set(tt.window.subarray(tt.w_size,tt.w_size+tt.strstart),0),tt.matches<2&&tt.matches++,it+=tt.w_size,tt.insert>tt.strstart&&(tt.insert=tt.strstart)),it>tt.strm.avail_in&&(it=tt.strm.avail_in),it&&(read_buf(tt.strm,tt.window,tt.strstart,it),tt.strstart+=it,tt.insert+=it>tt.w_size-tt.insert?tt.w_size-tt.insert:it),tt.high_water<tt.strstart&&(tt.high_water=tt.strstart),it=tt.bi_valid+42>>3,it=tt.pending_buf_size-it>65535?65535:tt.pending_buf_size-it,rt=it>tt.w_size?tt.w_size:it,at=tt.strstart-tt.block_start,(at>=rt||(at||et===Z_FINISH$3)&&et!==Z_NO_FLUSH$2&&tt.strm.avail_in===0&&at<=it)&&(nt=at>it?it:at,st=et===Z_FINISH$3&&tt.strm.avail_in===0&&nt===at?1:0,_tr_stored_block(tt,tt.block_start,nt,st),tt.block_start+=nt,flush_pending(tt.strm)),st?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(tt,et)=>{let rt,nt;for(;;){if(tt.lookahead<MIN_LOOKAHEAD){if(fill_window(tt),tt.lookahead<MIN_LOOKAHEAD&&et===Z_NO_FLUSH$2)return BS_NEED_MORE;if(tt.lookahead===0)break}if(rt=0,tt.lookahead>=MIN_MATCH&&(tt.ins_h=HASH(tt,tt.ins_h,tt.window[tt.strstart+MIN_MATCH-1]),rt=tt.prev[tt.strstart&tt.w_mask]=tt.head[tt.ins_h],tt.head[tt.ins_h]=tt.strstart),rt!==0&&tt.strstart-rt<=tt.w_size-MIN_LOOKAHEAD&&(tt.match_length=longest_match(tt,rt)),tt.match_length>=MIN_MATCH)if(nt=_tr_tally(tt,tt.strstart-tt.match_start,tt.match_length-MIN_MATCH),tt.lookahead-=tt.match_length,tt.match_length<=tt.max_lazy_match&&tt.lookahead>=MIN_MATCH){tt.match_length--;do tt.strstart++,tt.ins_h=HASH(tt,tt.ins_h,tt.window[tt.strstart+MIN_MATCH-1]),rt=tt.prev[tt.strstart&tt.w_mask]=tt.head[tt.ins_h],tt.head[tt.ins_h]=tt.strstart;while(--tt.match_length!==0);tt.strstart++}else tt.strstart+=tt.match_length,tt.match_length=0,tt.ins_h=tt.window[tt.strstart],tt.ins_h=HASH(tt,tt.ins_h,tt.window[tt.strstart+1]);else nt=_tr_tally(tt,0,tt.window[tt.strstart]),tt.lookahead--,tt.strstart++;if(nt&&(flush_block_only(tt,!1),tt.strm.avail_out===0))return BS_NEED_MORE}return tt.insert=tt.strstart<MIN_MATCH-1?tt.strstart:MIN_MATCH-1,et===Z_FINISH$3?(flush_block_only(tt,!0),tt.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):tt.sym_next&&(flush_block_only(tt,!1),tt.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(tt,et)=>{let rt,nt,at;for(;;){if(tt.lookahead<MIN_LOOKAHEAD){if(fill_window(tt),tt.lookahead<MIN_LOOKAHEAD&&et===Z_NO_FLUSH$2)return BS_NEED_MORE;if(tt.lookahead===0)break}if(rt=0,tt.lookahead>=MIN_MATCH&&(tt.ins_h=HASH(tt,tt.ins_h,tt.window[tt.strstart+MIN_MATCH-1]),rt=tt.prev[tt.strstart&tt.w_mask]=tt.head[tt.ins_h],tt.head[tt.ins_h]=tt.strstart),tt.prev_length=tt.match_length,tt.prev_match=tt.match_start,tt.match_length=MIN_MATCH-1,rt!==0&&tt.prev_length<tt.max_lazy_match&&tt.strstart-rt<=tt.w_size-MIN_LOOKAHEAD&&(tt.match_length=longest_match(tt,rt),tt.match_length<=5&&(tt.strategy===Z_FILTERED||tt.match_length===MIN_MATCH&&tt.strstart-tt.match_start>4096)&&(tt.match_length=MIN_MATCH-1)),tt.prev_length>=MIN_MATCH&&tt.match_length<=tt.prev_length){at=tt.strstart+tt.lookahead-MIN_MATCH,nt=_tr_tally(tt,tt.strstart-1-tt.prev_match,tt.prev_length-MIN_MATCH),tt.lookahead-=tt.prev_length-1,tt.prev_length-=2;do++tt.strstart<=at&&(tt.ins_h=HASH(tt,tt.ins_h,tt.window[tt.strstart+MIN_MATCH-1]),rt=tt.prev[tt.strstart&tt.w_mask]=tt.head[tt.ins_h],tt.head[tt.ins_h]=tt.strstart);while(--tt.prev_length!==0);if(tt.match_available=0,tt.match_length=MIN_MATCH-1,tt.strstart++,nt&&(flush_block_only(tt,!1),tt.strm.avail_out===0))return BS_NEED_MORE}else if(tt.match_available){if(nt=_tr_tally(tt,0,tt.window[tt.strstart-1]),nt&&flush_block_only(tt,!1),tt.strstart++,tt.lookahead--,tt.strm.avail_out===0)return BS_NEED_MORE}else tt.match_available=1,tt.strstart++,tt.lookahead--}return tt.match_available&&(nt=_tr_tally(tt,0,tt.window[tt.strstart-1]),tt.match_available=0),tt.insert=tt.strstart<MIN_MATCH-1?tt.strstart:MIN_MATCH-1,et===Z_FINISH$3?(flush_block_only(tt,!0),tt.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):tt.sym_next&&(flush_block_only(tt,!1),tt.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(tt,et)=>{let rt,nt,at,it;const st=tt.window;for(;;){if(tt.lookahead<=MAX_MATCH){if(fill_window(tt),tt.lookahead<=MAX_MATCH&&et===Z_NO_FLUSH$2)return BS_NEED_MORE;if(tt.lookahead===0)break}if(tt.match_length=0,tt.lookahead>=MIN_MATCH&&tt.strstart>0&&(at=tt.strstart-1,nt=st[at],nt===st[++at]&&nt===st[++at]&&nt===st[++at])){it=tt.strstart+MAX_MATCH;do;while(nt===st[++at]&&nt===st[++at]&&nt===st[++at]&&nt===st[++at]&&nt===st[++at]&&nt===st[++at]&&nt===st[++at]&&nt===st[++at]&&at<it);tt.match_length=MAX_MATCH-(it-at),tt.match_length>tt.lookahead&&(tt.match_length=tt.lookahead)}if(tt.match_length>=MIN_MATCH?(rt=_tr_tally(tt,1,tt.match_length-MIN_MATCH),tt.lookahead-=tt.match_length,tt.strstart+=tt.match_length,tt.match_length=0):(rt=_tr_tally(tt,0,tt.window[tt.strstart]),tt.lookahead--,tt.strstart++),rt&&(flush_block_only(tt,!1),tt.strm.avail_out===0))return BS_NEED_MORE}return tt.insert=0,et===Z_FINISH$3?(flush_block_only(tt,!0),tt.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):tt.sym_next&&(flush_block_only(tt,!1),tt.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(tt,et)=>{let rt;for(;;){if(tt.lookahead===0&&(fill_window(tt),tt.lookahead===0)){if(et===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(tt.match_length=0,rt=_tr_tally(tt,0,tt.window[tt.strstart]),tt.lookahead--,tt.strstart++,rt&&(flush_block_only(tt,!1),tt.strm.avail_out===0))return BS_NEED_MORE}return tt.insert=0,et===Z_FINISH$3?(flush_block_only(tt,!0),tt.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):tt.sym_next&&(flush_block_only(tt,!1),tt.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(tt,et,rt,nt,at){this.good_length=tt,this.max_lazy=et,this.nice_length=rt,this.max_chain=nt,this.func=at}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=tt=>{tt.window_size=2*tt.w_size,zero(tt.head),tt.max_lazy_match=configuration_table[tt.level].max_lazy,tt.good_match=configuration_table[tt.level].good_length,tt.nice_match=configuration_table[tt.level].nice_length,tt.max_chain_length=configuration_table[tt.level].max_chain,tt.strstart=0,tt.block_start=0,tt.lookahead=0,tt.insert=0,tt.match_length=tt.prev_length=MIN_MATCH-1,tt.match_available=0,tt.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=tt=>{if(!tt)return 1;const et=tt.state;return!et||et.strm!==tt||et.status!==INIT_STATE&&et.status!==GZIP_STATE&&et.status!==EXTRA_STATE&&et.status!==NAME_STATE&&et.status!==COMMENT_STATE&&et.status!==HCRC_STATE&&et.status!==BUSY_STATE&&et.status!==FINISH_STATE?1:0},deflateResetKeep=tt=>{if(deflateStateCheck(tt))return err(tt,Z_STREAM_ERROR$2);tt.total_in=tt.total_out=0,tt.data_type=Z_UNKNOWN;const et=tt.state;return et.pending=0,et.pending_out=0,et.wrap<0&&(et.wrap=-et.wrap),et.status=et.wrap===2?GZIP_STATE:et.wrap?INIT_STATE:BUSY_STATE,tt.adler=et.wrap===2?0:1,et.last_flush=-2,_tr_init(et),Z_OK$3},deflateReset=tt=>{const et=deflateResetKeep(tt);return et===Z_OK$3&&lm_init(tt.state),et},deflateSetHeader=(tt,et)=>deflateStateCheck(tt)||tt.state.wrap!==2?Z_STREAM_ERROR$2:(tt.state.gzhead=et,Z_OK$3),deflateInit2=(tt,et,rt,nt,at,it)=>{if(!tt)return Z_STREAM_ERROR$2;let st=1;if(et===Z_DEFAULT_COMPRESSION$1&&(et=6),nt<0?(st=0,nt=-nt):nt>15&&(st=2,nt-=16),at<1||at>MAX_MEM_LEVEL||rt!==Z_DEFLATED$2||nt<8||nt>15||et<0||et>9||it<0||it>Z_FIXED||nt===8&&st!==1)return err(tt,Z_STREAM_ERROR$2);nt===8&&(nt=9);const dt=new DeflateState;return tt.state=dt,dt.strm=tt,dt.status=INIT_STATE,dt.wrap=st,dt.gzhead=null,dt.w_bits=nt,dt.w_size=1<<dt.w_bits,dt.w_mask=dt.w_size-1,dt.hash_bits=at+7,dt.hash_size=1<<dt.hash_bits,dt.hash_mask=dt.hash_size-1,dt.hash_shift=~~((dt.hash_bits+MIN_MATCH-1)/MIN_MATCH),dt.window=new Uint8Array(dt.w_size*2),dt.head=new Uint16Array(dt.hash_size),dt.prev=new Uint16Array(dt.w_size),dt.lit_bufsize=1<<at+6,dt.pending_buf_size=dt.lit_bufsize*4,dt.pending_buf=new Uint8Array(dt.pending_buf_size),dt.sym_buf=dt.lit_bufsize,dt.sym_end=(dt.lit_bufsize-1)*3,dt.level=et,dt.strategy=it,dt.method=rt,deflateReset(tt)},deflateInit=(tt,et)=>deflateInit2(tt,et,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(tt,et)=>{if(deflateStateCheck(tt)||et>Z_BLOCK$1||et<0)return tt?err(tt,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const rt=tt.state;if(!tt.output||tt.avail_in!==0&&!tt.input||rt.status===FINISH_STATE&&et!==Z_FINISH$3)return err(tt,tt.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const nt=rt.last_flush;if(rt.last_flush=et,rt.pending!==0){if(flush_pending(tt),tt.avail_out===0)return rt.last_flush=-1,Z_OK$3}else if(tt.avail_in===0&&rank(et)<=rank(nt)&&et!==Z_FINISH$3)return err(tt,Z_BUF_ERROR$1);if(rt.status===FINISH_STATE&&tt.avail_in!==0)return err(tt,Z_BUF_ERROR$1);if(rt.status===INIT_STATE&&rt.wrap===0&&(rt.status=BUSY_STATE),rt.status===INIT_STATE){let at=Z_DEFLATED$2+(rt.w_bits-8<<4)<<8,it=-1;if(rt.strategy>=Z_HUFFMAN_ONLY||rt.level<2?it=0:rt.level<6?it=1:rt.level===6?it=2:it=3,at|=it<<6,rt.strstart!==0&&(at|=PRESET_DICT),at+=31-at%31,putShortMSB(rt,at),rt.strstart!==0&&(putShortMSB(rt,tt.adler>>>16),putShortMSB(rt,tt.adler&65535)),tt.adler=1,rt.status=BUSY_STATE,flush_pending(tt),rt.pending!==0)return rt.last_flush=-1,Z_OK$3}if(rt.status===GZIP_STATE){if(tt.adler=0,put_byte(rt,31),put_byte(rt,139),put_byte(rt,8),rt.gzhead)put_byte(rt,(rt.gzhead.text?1:0)+(rt.gzhead.hcrc?2:0)+(rt.gzhead.extra?4:0)+(rt.gzhead.name?8:0)+(rt.gzhead.comment?16:0)),put_byte(rt,rt.gzhead.time&255),put_byte(rt,rt.gzhead.time>>8&255),put_byte(rt,rt.gzhead.time>>16&255),put_byte(rt,rt.gzhead.time>>24&255),put_byte(rt,rt.level===9?2:rt.strategy>=Z_HUFFMAN_ONLY||rt.level<2?4:0),put_byte(rt,rt.gzhead.os&255),rt.gzhead.extra&&rt.gzhead.extra.length&&(put_byte(rt,rt.gzhead.extra.length&255),put_byte(rt,rt.gzhead.extra.length>>8&255)),rt.gzhead.hcrc&&(tt.adler=crc32_1(tt.adler,rt.pending_buf,rt.pending,0)),rt.gzindex=0,rt.status=EXTRA_STATE;else if(put_byte(rt,0),put_byte(rt,0),put_byte(rt,0),put_byte(rt,0),put_byte(rt,0),put_byte(rt,rt.level===9?2:rt.strategy>=Z_HUFFMAN_ONLY||rt.level<2?4:0),put_byte(rt,OS_CODE),rt.status=BUSY_STATE,flush_pending(tt),rt.pending!==0)return rt.last_flush=-1,Z_OK$3}if(rt.status===EXTRA_STATE){if(rt.gzhead.extra){let at=rt.pending,it=(rt.gzhead.extra.length&65535)-rt.gzindex;for(;rt.pending+it>rt.pending_buf_size;){let dt=rt.pending_buf_size-rt.pending;if(rt.pending_buf.set(rt.gzhead.extra.subarray(rt.gzindex,rt.gzindex+dt),rt.pending),rt.pending=rt.pending_buf_size,rt.gzhead.hcrc&&rt.pending>at&&(tt.adler=crc32_1(tt.adler,rt.pending_buf,rt.pending-at,at)),rt.gzindex+=dt,flush_pending(tt),rt.pending!==0)return rt.last_flush=-1,Z_OK$3;at=0,it-=dt}let st=new Uint8Array(rt.gzhead.extra);rt.pending_buf.set(st.subarray(rt.gzindex,rt.gzindex+it),rt.pending),rt.pending+=it,rt.gzhead.hcrc&&rt.pending>at&&(tt.adler=crc32_1(tt.adler,rt.pending_buf,rt.pending-at,at)),rt.gzindex=0}rt.status=NAME_STATE}if(rt.status===NAME_STATE){if(rt.gzhead.name){let at=rt.pending,it;do{if(rt.pending===rt.pending_buf_size){if(rt.gzhead.hcrc&&rt.pending>at&&(tt.adler=crc32_1(tt.adler,rt.pending_buf,rt.pending-at,at)),flush_pending(tt),rt.pending!==0)return rt.last_flush=-1,Z_OK$3;at=0}rt.gzindex<rt.gzhead.name.length?it=rt.gzhead.name.charCodeAt(rt.gzindex++)&255:it=0,put_byte(rt,it)}while(it!==0);rt.gzhead.hcrc&&rt.pending>at&&(tt.adler=crc32_1(tt.adler,rt.pending_buf,rt.pending-at,at)),rt.gzindex=0}rt.status=COMMENT_STATE}if(rt.status===COMMENT_STATE){if(rt.gzhead.comment){let at=rt.pending,it;do{if(rt.pending===rt.pending_buf_size){if(rt.gzhead.hcrc&&rt.pending>at&&(tt.adler=crc32_1(tt.adler,rt.pending_buf,rt.pending-at,at)),flush_pending(tt),rt.pending!==0)return rt.last_flush=-1,Z_OK$3;at=0}rt.gzindex<rt.gzhead.comment.length?it=rt.gzhead.comment.charCodeAt(rt.gzindex++)&255:it=0,put_byte(rt,it)}while(it!==0);rt.gzhead.hcrc&&rt.pending>at&&(tt.adler=crc32_1(tt.adler,rt.pending_buf,rt.pending-at,at))}rt.status=HCRC_STATE}if(rt.status===HCRC_STATE){if(rt.gzhead.hcrc){if(rt.pending+2>rt.pending_buf_size&&(flush_pending(tt),rt.pending!==0))return rt.last_flush=-1,Z_OK$3;put_byte(rt,tt.adler&255),put_byte(rt,tt.adler>>8&255),tt.adler=0}if(rt.status=BUSY_STATE,flush_pending(tt),rt.pending!==0)return rt.last_flush=-1,Z_OK$3}if(tt.avail_in!==0||rt.lookahead!==0||et!==Z_NO_FLUSH$2&&rt.status!==FINISH_STATE){let at=rt.level===0?deflate_stored(rt,et):rt.strategy===Z_HUFFMAN_ONLY?deflate_huff(rt,et):rt.strategy===Z_RLE?deflate_rle(rt,et):configuration_table[rt.level].func(rt,et);if((at===BS_FINISH_STARTED||at===BS_FINISH_DONE)&&(rt.status=FINISH_STATE),at===BS_NEED_MORE||at===BS_FINISH_STARTED)return tt.avail_out===0&&(rt.last_flush=-1),Z_OK$3;if(at===BS_BLOCK_DONE&&(et===Z_PARTIAL_FLUSH?_tr_align(rt):et!==Z_BLOCK$1&&(_tr_stored_block(rt,0,0,!1),et===Z_FULL_FLUSH$1&&(zero(rt.head),rt.lookahead===0&&(rt.strstart=0,rt.block_start=0,rt.insert=0))),flush_pending(tt),tt.avail_out===0))return rt.last_flush=-1,Z_OK$3}return et!==Z_FINISH$3?Z_OK$3:rt.wrap<=0?Z_STREAM_END$3:(rt.wrap===2?(put_byte(rt,tt.adler&255),put_byte(rt,tt.adler>>8&255),put_byte(rt,tt.adler>>16&255),put_byte(rt,tt.adler>>24&255),put_byte(rt,tt.total_in&255),put_byte(rt,tt.total_in>>8&255),put_byte(rt,tt.total_in>>16&255),put_byte(rt,tt.total_in>>24&255)):(putShortMSB(rt,tt.adler>>>16),putShortMSB(rt,tt.adler&65535)),flush_pending(tt),rt.wrap>0&&(rt.wrap=-rt.wrap),rt.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=tt=>{if(deflateStateCheck(tt))return Z_STREAM_ERROR$2;const et=tt.state.status;return tt.state=null,et===BUSY_STATE?err(tt,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(tt,et)=>{let rt=et.length;if(deflateStateCheck(tt))return Z_STREAM_ERROR$2;const nt=tt.state,at=nt.wrap;if(at===2||at===1&&nt.status!==INIT_STATE||nt.lookahead)return Z_STREAM_ERROR$2;if(at===1&&(tt.adler=adler32_1(tt.adler,et,rt,0)),nt.wrap=0,rt>=nt.w_size){at===0&&(zero(nt.head),nt.strstart=0,nt.block_start=0,nt.insert=0);let pt=new Uint8Array(nt.w_size);pt.set(et.subarray(rt-nt.w_size,rt),0),et=pt,rt=nt.w_size}const it=tt.avail_in,st=tt.next_in,dt=tt.input;for(tt.avail_in=rt,tt.next_in=0,tt.input=et,fill_window(nt);nt.lookahead>=MIN_MATCH;){let pt=nt.strstart,mt=nt.lookahead-(MIN_MATCH-1);do nt.ins_h=HASH(nt,nt.ins_h,nt.window[pt+MIN_MATCH-1]),nt.prev[pt&nt.w_mask]=nt.head[nt.ins_h],nt.head[nt.ins_h]=pt,pt++;while(--mt);nt.strstart=pt,nt.lookahead=MIN_MATCH-1,fill_window(nt)}return nt.strstart+=nt.lookahead,nt.block_start=nt.strstart,nt.insert=nt.lookahead,nt.lookahead=0,nt.match_length=nt.prev_length=MIN_MATCH-1,nt.match_available=0,tt.next_in=st,tt.input=dt,tt.avail_in=it,nt.wrap=at,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has$j=(tt,et)=>Object.prototype.hasOwnProperty.call(tt,et);var assign=function(tt){const et=Array.prototype.slice.call(arguments,1);for(;et.length;){const rt=et.shift();if(rt){if(typeof rt!="object")throw new TypeError(rt+"must be non-object");for(const nt in rt)_has$j(rt,nt)&&(tt[nt]=rt[nt])}}return tt},flattenChunks=tt=>{let et=0;for(let nt=0,at=tt.length;nt<at;nt++)et+=tt[nt].length;const rt=new Uint8Array(et);for(let nt=0,at=0,it=tt.length;nt<it;nt++){let st=tt[nt];rt.set(st,at),at+=st.length}return rt},common$2={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let tt=0;tt<256;tt++)_utf8len[tt]=tt>=252?6:tt>=248?5:tt>=240?4:tt>=224?3:tt>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=tt=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(tt);let et,rt,nt,at,it,st=tt.length,dt=0;for(at=0;at<st;at++)rt=tt.charCodeAt(at),(rt&64512)===55296&&at+1<st&&(nt=tt.charCodeAt(at+1),(nt&64512)===56320&&(rt=65536+(rt-55296<<10)+(nt-56320),at++)),dt+=rt<128?1:rt<2048?2:rt<65536?3:4;for(et=new Uint8Array(dt),it=0,at=0;it<dt;at++)rt=tt.charCodeAt(at),(rt&64512)===55296&&at+1<st&&(nt=tt.charCodeAt(at+1),(nt&64512)===56320&&(rt=65536+(rt-55296<<10)+(nt-56320),at++)),rt<128?et[it++]=rt:rt<2048?(et[it++]=192|rt>>>6,et[it++]=128|rt&63):rt<65536?(et[it++]=224|rt>>>12,et[it++]=128|rt>>>6&63,et[it++]=128|rt&63):(et[it++]=240|rt>>>18,et[it++]=128|rt>>>12&63,et[it++]=128|rt>>>6&63,et[it++]=128|rt&63);return et};const buf2binstring=(tt,et)=>{if(et<65534&&tt.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,tt.length===et?tt:tt.subarray(0,et));let rt="";for(let nt=0;nt<et;nt++)rt+=String.fromCharCode(tt[nt]);return rt};var buf2string=(tt,et)=>{const rt=et||tt.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(tt.subarray(0,et));let nt,at;const it=new Array(rt*2);for(at=0,nt=0;nt<rt;){let st=tt[nt++];if(st<128){it[at++]=st;continue}let dt=_utf8len[st];if(dt>4){it[at++]=65533,nt+=dt-1;continue}for(st&=dt===2?31:dt===3?15:7;dt>1&&nt<rt;)st=st<<6|tt[nt++]&63,dt--;if(dt>1){it[at++]=65533;continue}st<65536?it[at++]=st:(st-=65536,it[at++]=55296|st>>10&1023,it[at++]=56320|st&1023)}return buf2binstring(it,at)},utf8border=(tt,et)=>{et=et||tt.length,et>tt.length&&(et=tt.length);let rt=et-1;for(;rt>=0&&(tt[rt]&192)===128;)rt--;return rt<0||rt===0?et:rt+_utf8len[tt[rt]]>et?rt:et},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(tt){this.options=common$2.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},tt||{});let et=this.options;et.raw&&et.windowBits>0?et.windowBits=-et.windowBits:et.gzip&&et.windowBits>0&&et.windowBits<16&&(et.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let rt=deflate_1$2.deflateInit2(this.strm,et.level,et.method,et.windowBits,et.memLevel,et.strategy);if(rt!==Z_OK$2)throw new Error(messages[rt]);if(et.header&&deflate_1$2.deflateSetHeader(this.strm,et.header),et.dictionary){let nt;if(typeof et.dictionary=="string"?nt=strings.string2buf(et.dictionary):toString$1$1.call(et.dictionary)==="[object ArrayBuffer]"?nt=new Uint8Array(et.dictionary):nt=et.dictionary,rt=deflate_1$2.deflateSetDictionary(this.strm,nt),rt!==Z_OK$2)throw new Error(messages[rt]);this._dict_set=!0}}Deflate$1.prototype.push=function(tt,et){const rt=this.strm,nt=this.options.chunkSize;let at,it;if(this.ended)return!1;for(et===~~et?it=et:it=et===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof tt=="string"?rt.input=strings.string2buf(tt):toString$1$1.call(tt)==="[object ArrayBuffer]"?rt.input=new Uint8Array(tt):rt.input=tt,rt.next_in=0,rt.avail_in=rt.input.length;;){if(rt.avail_out===0&&(rt.output=new Uint8Array(nt),rt.next_out=0,rt.avail_out=nt),(it===Z_SYNC_FLUSH||it===Z_FULL_FLUSH)&&rt.avail_out<=6){this.onData(rt.output.subarray(0,rt.next_out)),rt.avail_out=0;continue}if(at=deflate_1$2.deflate(rt,it),at===Z_STREAM_END$2)return rt.next_out>0&&this.onData(rt.output.subarray(0,rt.next_out)),at=deflate_1$2.deflateEnd(this.strm),this.onEnd(at),this.ended=!0,at===Z_OK$2;if(rt.avail_out===0){this.onData(rt.output);continue}if(it>0&&rt.next_out>0){this.onData(rt.output.subarray(0,rt.next_out)),rt.avail_out=0;continue}if(rt.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(tt){this.chunks.push(tt)};Deflate$1.prototype.onEnd=function(tt){tt===Z_OK$2&&(this.result=common$2.flattenChunks(this.chunks)),this.chunks=[],this.err=tt,this.msg=this.strm.msg};const BAD$1=16209,TYPE$1=16191;var inffast=function(et,rt){let nt,at,it,st,dt,pt,mt,yt,Rt,Tt,At,xt,Nt,Ct,Ot,kt,Pt,Dt,Gt,jt,Yt,tr,er,lr;const It=et.state;nt=et.next_in,er=et.input,at=nt+(et.avail_in-5),it=et.next_out,lr=et.output,st=it-(rt-et.avail_out),dt=it+(et.avail_out-257),pt=It.dmax,mt=It.wsize,yt=It.whave,Rt=It.wnext,Tt=It.window,At=It.hold,xt=It.bits,Nt=It.lencode,Ct=It.distcode,Ot=(1<<It.lenbits)-1,kt=(1<<It.distbits)-1;e:do{xt<15&&(At+=er[nt++]<<xt,xt+=8,At+=er[nt++]<<xt,xt+=8),Pt=Nt[At&Ot];t:for(;;){if(Dt=Pt>>>24,At>>>=Dt,xt-=Dt,Dt=Pt>>>16&255,Dt===0)lr[it++]=Pt&65535;else if(Dt&16){Gt=Pt&65535,Dt&=15,Dt&&(xt<Dt&&(At+=er[nt++]<<xt,xt+=8),Gt+=At&(1<<Dt)-1,At>>>=Dt,xt-=Dt),xt<15&&(At+=er[nt++]<<xt,xt+=8,At+=er[nt++]<<xt,xt+=8),Pt=Ct[At&kt];r:for(;;){if(Dt=Pt>>>24,At>>>=Dt,xt-=Dt,Dt=Pt>>>16&255,Dt&16){if(jt=Pt&65535,Dt&=15,xt<Dt&&(At+=er[nt++]<<xt,xt+=8,xt<Dt&&(At+=er[nt++]<<xt,xt+=8)),jt+=At&(1<<Dt)-1,jt>pt){et.msg="invalid distance too far back",It.mode=BAD$1;break e}if(At>>>=Dt,xt-=Dt,Dt=it-st,jt>Dt){if(Dt=jt-Dt,Dt>yt&&It.sane){et.msg="invalid distance too far back",It.mode=BAD$1;break e}if(Yt=0,tr=Tt,Rt===0){if(Yt+=mt-Dt,Dt<Gt){Gt-=Dt;do lr[it++]=Tt[Yt++];while(--Dt);Yt=it-jt,tr=lr}}else if(Rt<Dt){if(Yt+=mt+Rt-Dt,Dt-=Rt,Dt<Gt){Gt-=Dt;do lr[it++]=Tt[Yt++];while(--Dt);if(Yt=0,Rt<Gt){Dt=Rt,Gt-=Dt;do lr[it++]=Tt[Yt++];while(--Dt);Yt=it-jt,tr=lr}}}else if(Yt+=Rt-Dt,Dt<Gt){Gt-=Dt;do lr[it++]=Tt[Yt++];while(--Dt);Yt=it-jt,tr=lr}for(;Gt>2;)lr[it++]=tr[Yt++],lr[it++]=tr[Yt++],lr[it++]=tr[Yt++],Gt-=3;Gt&&(lr[it++]=tr[Yt++],Gt>1&&(lr[it++]=tr[Yt++]))}else{Yt=it-jt;do lr[it++]=lr[Yt++],lr[it++]=lr[Yt++],lr[it++]=lr[Yt++],Gt-=3;while(Gt>2);Gt&&(lr[it++]=lr[Yt++],Gt>1&&(lr[it++]=lr[Yt++]))}}else if(Dt&64){et.msg="invalid distance code",It.mode=BAD$1;break e}else{Pt=Ct[(Pt&65535)+(At&(1<<Dt)-1)];continue r}break}}else if(Dt&64)if(Dt&32){It.mode=TYPE$1;break e}else{et.msg="invalid literal/length code",It.mode=BAD$1;break e}else{Pt=Nt[(Pt&65535)+(At&(1<<Dt)-1)];continue t}break}}while(nt<at&&it<dt);Gt=xt>>3,nt-=Gt,xt-=Gt<<3,At&=(1<<xt)-1,et.next_in=nt,et.next_out=it,et.avail_in=nt<at?5+(at-nt):5-(nt-at),et.avail_out=it<dt?257+(dt-it):257-(it-dt),It.hold=At,It.bits=xt};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(tt,et,rt,nt,at,it,st,dt)=>{const pt=dt.bits;let mt=0,yt=0,Rt=0,Tt=0,At=0,xt=0,Nt=0,Ct=0,Ot=0,kt=0,Pt,Dt,Gt,jt,Yt,tr=null,er;const lr=new Uint16Array(MAXBITS+1),It=new Uint16Array(MAXBITS+1);let ot=null,ft,ht,vt;for(mt=0;mt<=MAXBITS;mt++)lr[mt]=0;for(yt=0;yt<nt;yt++)lr[et[rt+yt]]++;for(At=pt,Tt=MAXBITS;Tt>=1&&lr[Tt]===0;Tt--);if(At>Tt&&(At=Tt),Tt===0)return at[it++]=1<<24|64<<16|0,at[it++]=1<<24|64<<16|0,dt.bits=1,0;for(Rt=1;Rt<Tt&&lr[Rt]===0;Rt++);for(At<Rt&&(At=Rt),Ct=1,mt=1;mt<=MAXBITS;mt++)if(Ct<<=1,Ct-=lr[mt],Ct<0)return-1;if(Ct>0&&(tt===CODES$1||Tt!==1))return-1;for(It[1]=0,mt=1;mt<MAXBITS;mt++)It[mt+1]=It[mt]+lr[mt];for(yt=0;yt<nt;yt++)et[rt+yt]!==0&&(st[It[et[rt+yt]]++]=yt);if(tt===CODES$1?(tr=ot=st,er=20):tt===LENS$1?(tr=lbase,ot=lext,er=257):(tr=dbase,ot=dext,er=0),kt=0,yt=0,mt=Rt,Yt=it,xt=At,Nt=0,Gt=-1,Ot=1<<At,jt=Ot-1,tt===LENS$1&&Ot>ENOUGH_LENS$1||tt===DISTS$1&&Ot>ENOUGH_DISTS$1)return 1;for(;;){ft=mt-Nt,st[yt]+1<er?(ht=0,vt=st[yt]):st[yt]>=er?(ht=ot[st[yt]-er],vt=tr[st[yt]-er]):(ht=96,vt=0),Pt=1<<mt-Nt,Dt=1<<xt,Rt=Dt;do Dt-=Pt,at[Yt+(kt>>Nt)+Dt]=ft<<24|ht<<16|vt|0;while(Dt!==0);for(Pt=1<<mt-1;kt&Pt;)Pt>>=1;if(Pt!==0?(kt&=Pt-1,kt+=Pt):kt=0,yt++,--lr[mt]===0){if(mt===Tt)break;mt=et[rt+st[yt]]}if(mt>At&&(kt&jt)!==Gt){for(Nt===0&&(Nt=At),Yt+=Rt,xt=mt-Nt,Ct=1<<xt;xt+Nt<Tt&&(Ct-=lr[xt+Nt],!(Ct<=0));)xt++,Ct<<=1;if(Ot+=1<<xt,tt===LENS$1&&Ot>ENOUGH_LENS$1||tt===DISTS$1&&Ot>ENOUGH_DISTS$1)return 1;Gt=kt&jt,at[Gt]=At<<24|xt<<16|Yt-it|0}}return kt!==0&&(at[Yt+kt]=mt-Nt<<24|64<<16|0),dt.bits=At,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=tt=>(tt>>>24&255)+(tt>>>8&65280)+((tt&65280)<<8)+((tt&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=tt=>{if(!tt)return 1;const et=tt.state;return!et||et.strm!==tt||et.mode<HEAD||et.mode>SYNC?1:0},inflateResetKeep=tt=>{if(inflateStateCheck(tt))return Z_STREAM_ERROR$1;const et=tt.state;return tt.total_in=tt.total_out=et.total=0,tt.msg="",et.wrap&&(tt.adler=et.wrap&1),et.mode=HEAD,et.last=0,et.havedict=0,et.flags=-1,et.dmax=32768,et.head=null,et.hold=0,et.bits=0,et.lencode=et.lendyn=new Int32Array(ENOUGH_LENS),et.distcode=et.distdyn=new Int32Array(ENOUGH_DISTS),et.sane=1,et.back=-1,Z_OK$1},inflateReset=tt=>{if(inflateStateCheck(tt))return Z_STREAM_ERROR$1;const et=tt.state;return et.wsize=0,et.whave=0,et.wnext=0,inflateResetKeep(tt)},inflateReset2=(tt,et)=>{let rt;if(inflateStateCheck(tt))return Z_STREAM_ERROR$1;const nt=tt.state;return et<0?(rt=0,et=-et):(rt=(et>>4)+5,et<48&&(et&=15)),et&&(et<8||et>15)?Z_STREAM_ERROR$1:(nt.window!==null&&nt.wbits!==et&&(nt.window=null),nt.wrap=rt,nt.wbits=et,inflateReset(tt))},inflateInit2=(tt,et)=>{if(!tt)return Z_STREAM_ERROR$1;const rt=new InflateState;tt.state=rt,rt.strm=tt,rt.window=null,rt.mode=HEAD;const nt=inflateReset2(tt,et);return nt!==Z_OK$1&&(tt.state=null),nt},inflateInit=tt=>inflateInit2(tt,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=tt=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let et=0;for(;et<144;)tt.lens[et++]=8;for(;et<256;)tt.lens[et++]=9;for(;et<280;)tt.lens[et++]=7;for(;et<288;)tt.lens[et++]=8;for(inftrees(LENS,tt.lens,0,288,lenfix,0,tt.work,{bits:9}),et=0;et<32;)tt.lens[et++]=5;inftrees(DISTS,tt.lens,0,32,distfix,0,tt.work,{bits:5}),virgin=!1}tt.lencode=lenfix,tt.lenbits=9,tt.distcode=distfix,tt.distbits=5},updatewindow=(tt,et,rt,nt)=>{let at;const it=tt.state;return it.window===null&&(it.wsize=1<<it.wbits,it.wnext=0,it.whave=0,it.window=new Uint8Array(it.wsize)),nt>=it.wsize?(it.window.set(et.subarray(rt-it.wsize,rt),0),it.wnext=0,it.whave=it.wsize):(at=it.wsize-it.wnext,at>nt&&(at=nt),it.window.set(et.subarray(rt-nt,rt-nt+at),it.wnext),nt-=at,nt?(it.window.set(et.subarray(rt-nt,rt),0),it.wnext=nt,it.whave=it.wsize):(it.wnext+=at,it.wnext===it.wsize&&(it.wnext=0),it.whave<it.wsize&&(it.whave+=at))),0},inflate$2=(tt,et)=>{let rt,nt,at,it,st,dt,pt,mt,yt,Rt,Tt,At,xt,Nt,Ct=0,Ot,kt,Pt,Dt,Gt,jt,Yt,tr;const er=new Uint8Array(4);let lr,It;const ot=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(tt)||!tt.output||!tt.input&&tt.avail_in!==0)return Z_STREAM_ERROR$1;rt=tt.state,rt.mode===TYPE&&(rt.mode=TYPEDO),st=tt.next_out,at=tt.output,pt=tt.avail_out,it=tt.next_in,nt=tt.input,dt=tt.avail_in,mt=rt.hold,yt=rt.bits,Rt=dt,Tt=pt,tr=Z_OK$1;e:for(;;)switch(rt.mode){case HEAD:if(rt.wrap===0){rt.mode=TYPEDO;break}for(;yt<16;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}if(rt.wrap&2&&mt===35615){rt.wbits===0&&(rt.wbits=15),rt.check=0,er[0]=mt&255,er[1]=mt>>>8&255,rt.check=crc32_1(rt.check,er,2,0),mt=0,yt=0,rt.mode=FLAGS;break}if(rt.head&&(rt.head.done=!1),!(rt.wrap&1)||(((mt&255)<<8)+(mt>>8))%31){tt.msg="incorrect header check",rt.mode=BAD;break}if((mt&15)!==Z_DEFLATED){tt.msg="unknown compression method",rt.mode=BAD;break}if(mt>>>=4,yt-=4,Yt=(mt&15)+8,rt.wbits===0&&(rt.wbits=Yt),Yt>15||Yt>rt.wbits){tt.msg="invalid window size",rt.mode=BAD;break}rt.dmax=1<<rt.wbits,rt.flags=0,tt.adler=rt.check=1,rt.mode=mt&512?DICTID:TYPE,mt=0,yt=0;break;case FLAGS:for(;yt<16;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}if(rt.flags=mt,(rt.flags&255)!==Z_DEFLATED){tt.msg="unknown compression method",rt.mode=BAD;break}if(rt.flags&57344){tt.msg="unknown header flags set",rt.mode=BAD;break}rt.head&&(rt.head.text=mt>>8&1),rt.flags&512&&rt.wrap&4&&(er[0]=mt&255,er[1]=mt>>>8&255,rt.check=crc32_1(rt.check,er,2,0)),mt=0,yt=0,rt.mode=TIME;case TIME:for(;yt<32;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}rt.head&&(rt.head.time=mt),rt.flags&512&&rt.wrap&4&&(er[0]=mt&255,er[1]=mt>>>8&255,er[2]=mt>>>16&255,er[3]=mt>>>24&255,rt.check=crc32_1(rt.check,er,4,0)),mt=0,yt=0,rt.mode=OS;case OS:for(;yt<16;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}rt.head&&(rt.head.xflags=mt&255,rt.head.os=mt>>8),rt.flags&512&&rt.wrap&4&&(er[0]=mt&255,er[1]=mt>>>8&255,rt.check=crc32_1(rt.check,er,2,0)),mt=0,yt=0,rt.mode=EXLEN;case EXLEN:if(rt.flags&1024){for(;yt<16;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}rt.length=mt,rt.head&&(rt.head.extra_len=mt),rt.flags&512&&rt.wrap&4&&(er[0]=mt&255,er[1]=mt>>>8&255,rt.check=crc32_1(rt.check,er,2,0)),mt=0,yt=0}else rt.head&&(rt.head.extra=null);rt.mode=EXTRA;case EXTRA:if(rt.flags&1024&&(At=rt.length,At>dt&&(At=dt),At&&(rt.head&&(Yt=rt.head.extra_len-rt.length,rt.head.extra||(rt.head.extra=new Uint8Array(rt.head.extra_len)),rt.head.extra.set(nt.subarray(it,it+At),Yt)),rt.flags&512&&rt.wrap&4&&(rt.check=crc32_1(rt.check,nt,At,it)),dt-=At,it+=At,rt.length-=At),rt.length))break e;rt.length=0,rt.mode=NAME;case NAME:if(rt.flags&2048){if(dt===0)break e;At=0;do Yt=nt[it+At++],rt.head&&Yt&&rt.length<65536&&(rt.head.name+=String.fromCharCode(Yt));while(Yt&&At<dt);if(rt.flags&512&&rt.wrap&4&&(rt.check=crc32_1(rt.check,nt,At,it)),dt-=At,it+=At,Yt)break e}else rt.head&&(rt.head.name=null);rt.length=0,rt.mode=COMMENT;case COMMENT:if(rt.flags&4096){if(dt===0)break e;At=0;do Yt=nt[it+At++],rt.head&&Yt&&rt.length<65536&&(rt.head.comment+=String.fromCharCode(Yt));while(Yt&&At<dt);if(rt.flags&512&&rt.wrap&4&&(rt.check=crc32_1(rt.check,nt,At,it)),dt-=At,it+=At,Yt)break e}else rt.head&&(rt.head.comment=null);rt.mode=HCRC;case HCRC:if(rt.flags&512){for(;yt<16;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}if(rt.wrap&4&&mt!==(rt.check&65535)){tt.msg="header crc mismatch",rt.mode=BAD;break}mt=0,yt=0}rt.head&&(rt.head.hcrc=rt.flags>>9&1,rt.head.done=!0),tt.adler=rt.check=0,rt.mode=TYPE;break;case DICTID:for(;yt<32;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}tt.adler=rt.check=zswap32(mt),mt=0,yt=0,rt.mode=DICT;case DICT:if(rt.havedict===0)return tt.next_out=st,tt.avail_out=pt,tt.next_in=it,tt.avail_in=dt,rt.hold=mt,rt.bits=yt,Z_NEED_DICT$1;tt.adler=rt.check=1,rt.mode=TYPE;case TYPE:if(et===Z_BLOCK||et===Z_TREES)break e;case TYPEDO:if(rt.last){mt>>>=yt&7,yt-=yt&7,rt.mode=CHECK;break}for(;yt<3;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}switch(rt.last=mt&1,mt>>>=1,yt-=1,mt&3){case 0:rt.mode=STORED;break;case 1:if(fixedtables(rt),rt.mode=LEN_,et===Z_TREES){mt>>>=2,yt-=2;break e}break;case 2:rt.mode=TABLE;break;case 3:tt.msg="invalid block type",rt.mode=BAD}mt>>>=2,yt-=2;break;case STORED:for(mt>>>=yt&7,yt-=yt&7;yt<32;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}if((mt&65535)!==(mt>>>16^65535)){tt.msg="invalid stored block lengths",rt.mode=BAD;break}if(rt.length=mt&65535,mt=0,yt=0,rt.mode=COPY_,et===Z_TREES)break e;case COPY_:rt.mode=COPY;case COPY:if(At=rt.length,At){if(At>dt&&(At=dt),At>pt&&(At=pt),At===0)break e;at.set(nt.subarray(it,it+At),st),dt-=At,it+=At,pt-=At,st+=At,rt.length-=At;break}rt.mode=TYPE;break;case TABLE:for(;yt<14;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}if(rt.nlen=(mt&31)+257,mt>>>=5,yt-=5,rt.ndist=(mt&31)+1,mt>>>=5,yt-=5,rt.ncode=(mt&15)+4,mt>>>=4,yt-=4,rt.nlen>286||rt.ndist>30){tt.msg="too many length or distance symbols",rt.mode=BAD;break}rt.have=0,rt.mode=LENLENS;case LENLENS:for(;rt.have<rt.ncode;){for(;yt<3;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}rt.lens[ot[rt.have++]]=mt&7,mt>>>=3,yt-=3}for(;rt.have<19;)rt.lens[ot[rt.have++]]=0;if(rt.lencode=rt.lendyn,rt.lenbits=7,lr={bits:rt.lenbits},tr=inftrees(CODES,rt.lens,0,19,rt.lencode,0,rt.work,lr),rt.lenbits=lr.bits,tr){tt.msg="invalid code lengths set",rt.mode=BAD;break}rt.have=0,rt.mode=CODELENS;case CODELENS:for(;rt.have<rt.nlen+rt.ndist;){for(;Ct=rt.lencode[mt&(1<<rt.lenbits)-1],Ot=Ct>>>24,kt=Ct>>>16&255,Pt=Ct&65535,!(Ot<=yt);){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}if(Pt<16)mt>>>=Ot,yt-=Ot,rt.lens[rt.have++]=Pt;else{if(Pt===16){for(It=Ot+2;yt<It;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}if(mt>>>=Ot,yt-=Ot,rt.have===0){tt.msg="invalid bit length repeat",rt.mode=BAD;break}Yt=rt.lens[rt.have-1],At=3+(mt&3),mt>>>=2,yt-=2}else if(Pt===17){for(It=Ot+3;yt<It;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}mt>>>=Ot,yt-=Ot,Yt=0,At=3+(mt&7),mt>>>=3,yt-=3}else{for(It=Ot+7;yt<It;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}mt>>>=Ot,yt-=Ot,Yt=0,At=11+(mt&127),mt>>>=7,yt-=7}if(rt.have+At>rt.nlen+rt.ndist){tt.msg="invalid bit length repeat",rt.mode=BAD;break}for(;At--;)rt.lens[rt.have++]=Yt}}if(rt.mode===BAD)break;if(rt.lens[256]===0){tt.msg="invalid code -- missing end-of-block",rt.mode=BAD;break}if(rt.lenbits=9,lr={bits:rt.lenbits},tr=inftrees(LENS,rt.lens,0,rt.nlen,rt.lencode,0,rt.work,lr),rt.lenbits=lr.bits,tr){tt.msg="invalid literal/lengths set",rt.mode=BAD;break}if(rt.distbits=6,rt.distcode=rt.distdyn,lr={bits:rt.distbits},tr=inftrees(DISTS,rt.lens,rt.nlen,rt.ndist,rt.distcode,0,rt.work,lr),rt.distbits=lr.bits,tr){tt.msg="invalid distances set",rt.mode=BAD;break}if(rt.mode=LEN_,et===Z_TREES)break e;case LEN_:rt.mode=LEN;case LEN:if(dt>=6&&pt>=258){tt.next_out=st,tt.avail_out=pt,tt.next_in=it,tt.avail_in=dt,rt.hold=mt,rt.bits=yt,inffast(tt,Tt),st=tt.next_out,at=tt.output,pt=tt.avail_out,it=tt.next_in,nt=tt.input,dt=tt.avail_in,mt=rt.hold,yt=rt.bits,rt.mode===TYPE&&(rt.back=-1);break}for(rt.back=0;Ct=rt.lencode[mt&(1<<rt.lenbits)-1],Ot=Ct>>>24,kt=Ct>>>16&255,Pt=Ct&65535,!(Ot<=yt);){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}if(kt&&!(kt&240)){for(Dt=Ot,Gt=kt,jt=Pt;Ct=rt.lencode[jt+((mt&(1<<Dt+Gt)-1)>>Dt)],Ot=Ct>>>24,kt=Ct>>>16&255,Pt=Ct&65535,!(Dt+Ot<=yt);){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}mt>>>=Dt,yt-=Dt,rt.back+=Dt}if(mt>>>=Ot,yt-=Ot,rt.back+=Ot,rt.length=Pt,kt===0){rt.mode=LIT;break}if(kt&32){rt.back=-1,rt.mode=TYPE;break}if(kt&64){tt.msg="invalid literal/length code",rt.mode=BAD;break}rt.extra=kt&15,rt.mode=LENEXT;case LENEXT:if(rt.extra){for(It=rt.extra;yt<It;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}rt.length+=mt&(1<<rt.extra)-1,mt>>>=rt.extra,yt-=rt.extra,rt.back+=rt.extra}rt.was=rt.length,rt.mode=DIST;case DIST:for(;Ct=rt.distcode[mt&(1<<rt.distbits)-1],Ot=Ct>>>24,kt=Ct>>>16&255,Pt=Ct&65535,!(Ot<=yt);){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}if(!(kt&240)){for(Dt=Ot,Gt=kt,jt=Pt;Ct=rt.distcode[jt+((mt&(1<<Dt+Gt)-1)>>Dt)],Ot=Ct>>>24,kt=Ct>>>16&255,Pt=Ct&65535,!(Dt+Ot<=yt);){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}mt>>>=Dt,yt-=Dt,rt.back+=Dt}if(mt>>>=Ot,yt-=Ot,rt.back+=Ot,kt&64){tt.msg="invalid distance code",rt.mode=BAD;break}rt.offset=Pt,rt.extra=kt&15,rt.mode=DISTEXT;case DISTEXT:if(rt.extra){for(It=rt.extra;yt<It;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}rt.offset+=mt&(1<<rt.extra)-1,mt>>>=rt.extra,yt-=rt.extra,rt.back+=rt.extra}if(rt.offset>rt.dmax){tt.msg="invalid distance too far back",rt.mode=BAD;break}rt.mode=MATCH;case MATCH:if(pt===0)break e;if(At=Tt-pt,rt.offset>At){if(At=rt.offset-At,At>rt.whave&&rt.sane){tt.msg="invalid distance too far back",rt.mode=BAD;break}At>rt.wnext?(At-=rt.wnext,xt=rt.wsize-At):xt=rt.wnext-At,At>rt.length&&(At=rt.length),Nt=rt.window}else Nt=at,xt=st-rt.offset,At=rt.length;At>pt&&(At=pt),pt-=At,rt.length-=At;do at[st++]=Nt[xt++];while(--At);rt.length===0&&(rt.mode=LEN);break;case LIT:if(pt===0)break e;at[st++]=rt.length,pt--,rt.mode=LEN;break;case CHECK:if(rt.wrap){for(;yt<32;){if(dt===0)break e;dt--,mt|=nt[it++]<<yt,yt+=8}if(Tt-=pt,tt.total_out+=Tt,rt.total+=Tt,rt.wrap&4&&Tt&&(tt.adler=rt.check=rt.flags?crc32_1(rt.check,at,Tt,st-Tt):adler32_1(rt.check,at,Tt,st-Tt)),Tt=pt,rt.wrap&4&&(rt.flags?mt:zswap32(mt))!==rt.check){tt.msg="incorrect data check",rt.mode=BAD;break}mt=0,yt=0}rt.mode=LENGTH;case LENGTH:if(rt.wrap&&rt.flags){for(;yt<32;){if(dt===0)break e;dt--,mt+=nt[it++]<<yt,yt+=8}if(rt.wrap&4&&mt!==(rt.total&4294967295)){tt.msg="incorrect length check",rt.mode=BAD;break}mt=0,yt=0}rt.mode=DONE;case DONE:tr=Z_STREAM_END$1;break e;case BAD:tr=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return tt.next_out=st,tt.avail_out=pt,tt.next_in=it,tt.avail_in=dt,rt.hold=mt,rt.bits=yt,(rt.wsize||Tt!==tt.avail_out&&rt.mode<BAD&&(rt.mode<CHECK||et!==Z_FINISH$1))&&updatewindow(tt,tt.output,tt.next_out,Tt-tt.avail_out),Rt-=tt.avail_in,Tt-=tt.avail_out,tt.total_in+=Rt,tt.total_out+=Tt,rt.total+=Tt,rt.wrap&4&&Tt&&(tt.adler=rt.check=rt.flags?crc32_1(rt.check,at,Tt,tt.next_out-Tt):adler32_1(rt.check,at,Tt,tt.next_out-Tt)),tt.data_type=rt.bits+(rt.last?64:0)+(rt.mode===TYPE?128:0)+(rt.mode===LEN_||rt.mode===COPY_?256:0),(Rt===0&&Tt===0||et===Z_FINISH$1)&&tr===Z_OK$1&&(tr=Z_BUF_ERROR),tr},inflateEnd=tt=>{if(inflateStateCheck(tt))return Z_STREAM_ERROR$1;let et=tt.state;return et.window&&(et.window=null),tt.state=null,Z_OK$1},inflateGetHeader=(tt,et)=>{if(inflateStateCheck(tt))return Z_STREAM_ERROR$1;const rt=tt.state;return rt.wrap&2?(rt.head=et,et.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(tt,et)=>{const rt=et.length;let nt,at,it;return inflateStateCheck(tt)||(nt=tt.state,nt.wrap!==0&&nt.mode!==DICT)?Z_STREAM_ERROR$1:nt.mode===DICT&&(at=1,at=adler32_1(at,et,rt,0),at!==nt.check)?Z_DATA_ERROR$1:(it=updatewindow(tt,et,rt,rt),it?(nt.mode=MEM,Z_MEM_ERROR$1):(nt.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$a=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(tt){this.options=common$2.assign({chunkSize:1024*64,windowBits:15,to:""},tt||{});const et=this.options;et.raw&&et.windowBits>=0&&et.windowBits<16&&(et.windowBits=-et.windowBits,et.windowBits===0&&(et.windowBits=-15)),et.windowBits>=0&&et.windowBits<16&&!(tt&&tt.windowBits)&&(et.windowBits+=32),et.windowBits>15&&et.windowBits<48&&(et.windowBits&15||(et.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let rt=inflate_1$2.inflateInit2(this.strm,et.windowBits);if(rt!==Z_OK)throw new Error(messages[rt]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),et.dictionary&&(typeof et.dictionary=="string"?et.dictionary=strings.string2buf(et.dictionary):toString$a.call(et.dictionary)==="[object ArrayBuffer]"&&(et.dictionary=new Uint8Array(et.dictionary)),et.raw&&(rt=inflate_1$2.inflateSetDictionary(this.strm,et.dictionary),rt!==Z_OK)))throw new Error(messages[rt])}Inflate$1.prototype.push=function(tt,et){const rt=this.strm,nt=this.options.chunkSize,at=this.options.dictionary;let it,st,dt;if(this.ended)return!1;for(et===~~et?st=et:st=et===!0?Z_FINISH:Z_NO_FLUSH,toString$a.call(tt)==="[object ArrayBuffer]"?rt.input=new Uint8Array(tt):rt.input=tt,rt.next_in=0,rt.avail_in=rt.input.length;;){for(rt.avail_out===0&&(rt.output=new Uint8Array(nt),rt.next_out=0,rt.avail_out=nt),it=inflate_1$2.inflate(rt,st),it===Z_NEED_DICT&&at&&(it=inflate_1$2.inflateSetDictionary(rt,at),it===Z_OK?it=inflate_1$2.inflate(rt,st):it===Z_DATA_ERROR&&(it=Z_NEED_DICT));rt.avail_in>0&&it===Z_STREAM_END&&rt.state.wrap>0&&tt[rt.next_in]!==0;)inflate_1$2.inflateReset(rt),it=inflate_1$2.inflate(rt,st);switch(it){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(it),this.ended=!0,!1}if(dt=rt.avail_out,rt.next_out&&(rt.avail_out===0||it===Z_STREAM_END))if(this.options.to==="string"){let pt=strings.utf8border(rt.output,rt.next_out),mt=rt.next_out-pt,yt=strings.buf2string(rt.output,pt);rt.next_out=mt,rt.avail_out=nt-mt,mt&&rt.output.set(rt.output.subarray(pt,pt+mt),0),this.onData(yt)}else this.onData(rt.output.length===rt.next_out?rt.output:rt.output.subarray(0,rt.next_out));if(!(it===Z_OK&&dt===0)){if(it===Z_STREAM_END)return it=inflate_1$2.inflateEnd(this.strm),this.onEnd(it),this.ended=!0,!0;if(rt.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(tt){this.chunks.push(tt)};Inflate$1.prototype.onEnd=function(tt){tt===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common$2.flattenChunks(this.chunks)),this.chunks=[],this.err=tt,this.msg=this.strm.msg};function inflate$1(tt,et){const rt=new Inflate$1(et);if(rt.push(tt),rt.err)throw rt.msg||messages[rt.err];return rt.result}function inflateRaw$1(tt,et){return et=et||{},et.raw=!0,inflate$1(tt,et)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants$3=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants:constants$3};const{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var inflate_1=inflate,eventemitter3={exports:{}};(function(tt){var et=Object.prototype.hasOwnProperty,rt="~";function nt(){}Object.create&&(nt.prototype=Object.create(null),new nt().__proto__||(rt=!1));function at(pt,mt,yt){this.fn=pt,this.context=mt,this.once=yt||!1}function it(pt,mt,yt,Rt,Tt){if(typeof yt!="function")throw new TypeError("The listener must be a function");var At=new at(yt,Rt||pt,Tt),xt=rt?rt+mt:mt;return pt._events[xt]?pt._events[xt].fn?pt._events[xt]=[pt._events[xt],At]:pt._events[xt].push(At):(pt._events[xt]=At,pt._eventsCount++),pt}function st(pt,mt){--pt._eventsCount===0?pt._events=new nt:delete pt._events[mt]}function dt(){this._events=new nt,this._eventsCount=0}dt.prototype.eventNames=function(){var mt=[],yt,Rt;if(this._eventsCount===0)return mt;for(Rt in yt=this._events)et.call(yt,Rt)&&mt.push(rt?Rt.slice(1):Rt);return Object.getOwnPropertySymbols?mt.concat(Object.getOwnPropertySymbols(yt)):mt},dt.prototype.listeners=function(mt){var yt=rt?rt+mt:mt,Rt=this._events[yt];if(!Rt)return[];if(Rt.fn)return[Rt.fn];for(var Tt=0,At=Rt.length,xt=new Array(At);Tt<At;Tt++)xt[Tt]=Rt[Tt].fn;return xt},dt.prototype.listenerCount=function(mt){var yt=rt?rt+mt:mt,Rt=this._events[yt];return Rt?Rt.fn?1:Rt.length:0},dt.prototype.emit=function(mt,yt,Rt,Tt,At,xt){var Nt=rt?rt+mt:mt;if(!this._events[Nt])return!1;var Ct=this._events[Nt],Ot=arguments.length,kt,Pt;if(Ct.fn){switch(Ct.once&&this.removeListener(mt,Ct.fn,void 0,!0),Ot){case 1:return Ct.fn.call(Ct.context),!0;case 2:return Ct.fn.call(Ct.context,yt),!0;case 3:return Ct.fn.call(Ct.context,yt,Rt),!0;case 4:return Ct.fn.call(Ct.context,yt,Rt,Tt),!0;case 5:return Ct.fn.call(Ct.context,yt,Rt,Tt,At),!0;case 6:return Ct.fn.call(Ct.context,yt,Rt,Tt,At,xt),!0}for(Pt=1,kt=new Array(Ot-1);Pt<Ot;Pt++)kt[Pt-1]=arguments[Pt];Ct.fn.apply(Ct.context,kt)}else{var Dt=Ct.length,Gt;for(Pt=0;Pt<Dt;Pt++)switch(Ct[Pt].once&&this.removeListener(mt,Ct[Pt].fn,void 0,!0),Ot){case 1:Ct[Pt].fn.call(Ct[Pt].context);break;case 2:Ct[Pt].fn.call(Ct[Pt].context,yt);break;case 3:Ct[Pt].fn.call(Ct[Pt].context,yt,Rt);break;case 4:Ct[Pt].fn.call(Ct[Pt].context,yt,Rt,Tt);break;default:if(!kt)for(Gt=1,kt=new Array(Ot-1);Gt<Ot;Gt++)kt[Gt-1]=arguments[Gt];Ct[Pt].fn.apply(Ct[Pt].context,kt)}}return!0},dt.prototype.on=function(mt,yt,Rt){return it(this,mt,yt,Rt,!1)},dt.prototype.once=function(mt,yt,Rt){return it(this,mt,yt,Rt,!0)},dt.prototype.removeListener=function(mt,yt,Rt,Tt){var At=rt?rt+mt:mt;if(!this._events[At])return this;if(!yt)return st(this,At),this;var xt=this._events[At];if(xt.fn)xt.fn===yt&&(!Tt||xt.once)&&(!Rt||xt.context===Rt)&&st(this,At);else{for(var Nt=0,Ct=[],Ot=xt.length;Nt<Ot;Nt++)(xt[Nt].fn!==yt||Tt&&!xt[Nt].once||Rt&&xt[Nt].context!==Rt)&&Ct.push(xt[Nt]);Ct.length?this._events[At]=Ct.length===1?Ct[0]:Ct:st(this,At)}return this},dt.prototype.removeAllListeners=function(mt){var yt;return mt?(yt=rt?rt+mt:mt,this._events[yt]&&st(this,yt)):(this._events=new nt,this._eventsCount=0),this},dt.prototype.off=dt.prototype.removeListener,dt.prototype.addListener=dt.prototype.on,dt.prefixed=rt,dt.EventEmitter=dt,tt.exports=dt})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs$5(eventemitter3Exports);function chunks(tt,et){return Array.apply(0,new Array(Math.ceil(tt.length/et))).map((rt,nt)=>tt.slice(nt*et,(nt+1)*et))}const isVersionedTransaction$2=tt=>"version"in tt;function decode$2(tt){return new TextDecoder("utf-8").decode(tt)}function encode$1(tt){return bs58$5.encode(tt)}function encode$2(tt){return tt.toString("base64")}function decode(tt){return Buffer$1.from(tt,"base64")}function isCompositeAccounts(tt){return"accounts"in tt}async function idlAddress(tt){const et=(await PublicKey.findProgramAddress([],tt))[0];return await PublicKey.createWithSeed(et,seed(),tt)}function seed(){return"anchor:idl"}const IDL_ACCOUNT_LAYOUT=dist$2.struct([dist$2.publicKey("authority"),dist$2.vecU8("data")]);function decodeIdlAccount(tt){return IDL_ACCOUNT_LAYOUT.decode(tt)}function convertIdlToCamelCase(tt){const et=["name","path","account","relations","generic"],rt=it=>it.split(".").map(camelCase$1).join("."),nt=it=>{for(const st in it){const dt=it[st];et.includes(st)?it[st]=Array.isArray(dt)?dt.map(rt):rt(dt):typeof dt=="object"&&nt(dt)}},at=structuredClone(tt);return nt(at),at}function handleDefinedFields(tt,et,rt,nt){return tt!=null&&tt.length?tt[0].name?rt(tt):nt(tt):et()}function parseIdlErrors(tt){const et=new Map;return tt.errors&&tt.errors.forEach(rt=>{var nt;let at=(nt=rt.msg)!==null&&nt!==void 0?nt:rt.name;et.set(rt.code,at)}),et}function toInstruction(tt,...et){if(tt.args.length!=et.length)throw new Error("Invalid argument length");const rt={};let nt=0;return tt.args.forEach(at=>{rt[at.name]=et[nt],nt+=1}),rt}function validateAccounts(tt,et={}){tt.forEach(rt=>{if(isCompositeAccounts(rt))validateAccounts(rt.accounts,et[rt.name]);else if(!et[rt.name])throw new Error(`Account \`${rt.name}\` not provided.`)})}function translateAddress(tt){return tt instanceof PublicKey?tt:new PublicKey(tt)}class StructError extends TypeError{constructor(et,rt){let nt;const{message:at,...it}=et,{path:st}=et,dt=st.length===0?at:"At path: "+st.join(".")+" -- "+at;super(dt),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,it),this.name=this.constructor.name,this.failures=()=>{var pt;return(pt=nt)!=null?pt:nt=[et,...rt()]}}}function isIterable(tt){return isObject(tt)&&typeof tt[Symbol.iterator]=="function"}function isObject(tt){return typeof tt=="object"&&tt!=null}function print(tt){return typeof tt=="string"?JSON.stringify(tt):""+tt}function shiftIterator(tt){const{done:et,value:rt}=tt.next();return et?void 0:rt}function toFailure(tt,et,rt,nt){if(tt===!0)return;tt===!1?tt={}:typeof tt=="string"&&(tt={message:tt});const{path:at,branch:it}=et,{type:st}=rt,{refinement:dt,message:pt="Expected a value of type `"+st+"`"+(dt?" with refinement `"+dt+"`":"")+", but received: `"+print(nt)+"`"}=tt;return{value:nt,type:st,refinement:dt,key:at[at.length-1],path:at,branch:it,...tt,message:pt}}function*toFailures(tt,et,rt,nt){isIterable(tt)||(tt=[tt]);for(const at of tt){const it=toFailure(at,et,rt,nt);it&&(yield it)}}function*run(tt,et,rt){rt===void 0&&(rt={});const{path:nt=[],branch:at=[tt],coerce:it=!1,mask:st=!1}=rt,dt={path:nt,branch:at};if(it&&(tt=et.coercer(tt,dt),st&&et.type!=="type"&&isObject(et.schema)&&isObject(tt)&&!Array.isArray(tt)))for(const mt in tt)et.schema[mt]===void 0&&delete tt[mt];let pt=!0;for(const mt of et.validator(tt,dt))pt=!1,yield[mt,void 0];for(let[mt,yt,Rt]of et.entries(tt,dt)){const Tt=run(yt,Rt,{path:mt===void 0?nt:[...nt,mt],branch:mt===void 0?at:[...at,yt],coerce:it,mask:st});for(const At of Tt)At[0]?(pt=!1,yield[At[0],void 0]):it&&(yt=At[1],mt===void 0?tt=yt:tt instanceof Map?tt.set(mt,yt):tt instanceof Set?tt.add(yt):isObject(tt)&&(tt[mt]=yt))}if(pt)for(const mt of et.refiner(tt,dt))pt=!1,yield[mt,void 0];pt&&(yield[void 0,tt])}class Struct{constructor(et){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:rt,schema:nt,validator:at,refiner:it,coercer:st=pt=>pt,entries:dt=function*(){}}=et;this.type=rt,this.schema=nt,this.entries=dt,this.coercer=st,at?this.validator=(pt,mt)=>{const yt=at(pt,mt);return toFailures(yt,mt,this,pt)}:this.validator=()=>[],it?this.refiner=(pt,mt)=>{const yt=it(pt,mt);return toFailures(yt,mt,this,pt)}:this.refiner=()=>[]}assert(et){return assert(et,this)}create(et){return create$1(et,this)}is(et){return is$5(et,this)}mask(et){return mask(et,this)}validate(et,rt){return rt===void 0&&(rt={}),validate(et,this,rt)}}function assert(tt,et){const rt=validate(tt,et);if(rt[0])throw rt[0]}function create$1(tt,et){const rt=validate(tt,et,{coerce:!0});if(rt[0])throw rt[0];return rt[1]}function mask(tt,et){const rt=validate(tt,et,{coerce:!0,mask:!0});if(rt[0])throw rt[0];return rt[1]}function is$5(tt,et){return!validate(tt,et)[0]}function validate(tt,et,rt){rt===void 0&&(rt={});const nt=run(tt,et,rt),at=shiftIterator(nt);return at[0]?[new StructError(at[0],function*(){for(const st of nt)st[0]&&(yield st[0])}),void 0]:[void 0,at[1]]}function define(tt,et){return new Struct({type:tt,schema:null,validator:et})}function any$1(){return define("any",()=>!0)}function array(tt){return new Struct({type:"array",schema:tt,*entries(et){if(tt&&Array.isArray(et))for(const[rt,nt]of et.entries())yield[rt,nt,tt]},coercer(et){return Array.isArray(et)?et.slice():et},validator(et){return Array.isArray(et)||"Expected an array value, but received: "+print(et)}})}function boolean(){return define("boolean",tt=>typeof tt=="boolean")}function literal(tt){const et=print(tt);return new Struct({type:"literal",schema:tt,validator(rt){return rt===tt||"Expected the literal `"+et+"`, but received: "+print(rt)}})}function nullable(tt){return new Struct({...tt,validator:(et,rt)=>et===null||tt.validator(et,rt),refiner:(et,rt)=>et===null||tt.refiner(et,rt)})}function number(){return define("number",tt=>typeof tt=="number"&&!isNaN(tt)||"Expected a number, but received: "+print(tt))}function optional(tt){return new Struct({...tt,validator:(et,rt)=>et===void 0||tt.validator(et,rt),refiner:(et,rt)=>et===void 0||tt.refiner(et,rt)})}function string(){return define("string",tt=>typeof tt=="string"||"Expected a string, but received: "+print(tt))}function type$7(tt){const et=Object.keys(tt);return new Struct({type:"type",schema:tt,*entries(rt){if(isObject(rt))for(const nt of et)yield[nt,rt[nt],tt[nt]]},validator(rt){return isObject(rt)||"Expected an object, but received: "+print(rt)}})}function union$1(tt){const et=tt.map(rt=>rt.type).join(" | ");return new Struct({type:"union",schema:null,coercer(rt,nt){return(tt.find(it=>{const[st]=it.validate(rt,{coerce:!0});return!st})||unknown()).coercer(rt,nt)},validator(rt,nt){const at=[];for(const it of tt){const[...st]=run(rt,it,nt),[dt]=st;if(dt[0])for(const[pt]of st)pt&&at.push(pt);else return[]}return["Expected the value to satisfy a union of `"+et+"`, but received: "+print(rt),...at]}})}function unknown(){return define("unknown",()=>!0)}function coerce(tt,et,rt){return new Struct({...tt,coercer:(nt,at)=>is$5(nt,et)?tt.coercer(rt(nt,at),at):tt.coercer(nt,at)})}const GET_MULTIPLE_ACCOUNTS_LIMIT=99;async function getMultipleAccountsAndContext(tt,et,rt){if(et.length<=GET_MULTIPLE_ACCOUNTS_LIMIT)return await getMultipleAccountsAndContextCore(tt,et,rt);{const nt=chunks(et,GET_MULTIPLE_ACCOUNTS_LIMIT);return(await Promise.all(nt.map(it=>getMultipleAccountsAndContextCore(tt,it,rt)))).flat()}}async function getMultipleAccountsAndContextCore(tt,et,rt){const nt=rt??tt.commitment,{value:at,context:it}=await tt.getMultipleAccountsInfoAndContext(et,nt);return at.map((dt,pt)=>dt===null?null:{publicKey:et[pt],account:dt,context:it})}async function simulateTransaction(tt,et,rt,nt,at){var it;rt&&rt.length>0&&et.sign(...rt);const st=et._compile(),dt=st.serialize(),mt=et._serialize(dt).toString("base64"),yt={encoding:"base64",commitment:nt??tt.commitment};if(at){const xt=(Array.isArray(at)?at:st.nonProgramIds()).map(Nt=>Nt.toBase58());yt.accounts={encoding:"base64",addresses:xt}}rt&&rt.length>0&&(yt.sigVerify=!0);const Rt=[mt,yt],Tt=await tt._rpcRequest("simulateTransaction",Rt),At=create$1(Tt,SimulatedTransactionResponseStruct);if("error"in At){let xt;if("data"in At.error&&(xt=(it=At.error.data)===null||it===void 0?void 0:it.logs,xt&&Array.isArray(xt))){const Nt=`
    `,Ct=Nt+xt.join(Nt);console.error(At.error.message,Ct)}throw new SendTransactionError("failed to simulate transaction: "+At.error.message,xt)}return At.result}function jsonRpcResult(tt){return coerce(createRpcResult(tt),UnknownRpcResult,et=>"error"in et?et:{...et,result:create$1(et.result,tt)})}const UnknownRpcResult=createRpcResult(unknown());function createRpcResult(tt){return union$1([type$7({jsonrpc:literal("2.0"),id:string(),result:tt}),type$7({jsonrpc:literal("2.0"),id:string(),error:type$7({code:unknown(),message:string(),data:optional(any$1())})})])}function jsonRpcResultAndContext(tt){return jsonRpcResult(type$7({context:type$7({slot:number()}),value:tt}))}const SimulatedTransactionResponseStruct=jsonRpcResultAndContext(type$7({err:nullable(union$1([type$7({}),string()])),logs:nullable(array(string())),accounts:optional(nullable(array(nullable(type$7({executable:boolean(),owner:string(),lamports:number(),data:array(string()),rentEpoch:optional(number())}))))),unitsConsumed:optional(number())}));class AnchorProvider{constructor(et,rt,nt=AnchorProvider.defaultOptions()){this.connection=et,this.wallet=rt,this.opts=nt,this.publicKey=rt==null?void 0:rt.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(et,rt=AnchorProvider.defaultOptions()){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(et,rt,nt){var at,it,st,dt;if(nt===void 0&&(nt=this.opts),isVersionedTransaction$2(et))rt&&et.sign(rt);else if(et.feePayer=(at=et.feePayer)!==null&&at!==void 0?at:this.wallet.publicKey,et.recentBlockhash=(await this.connection.getLatestBlockhash(nt.preflightCommitment)).blockhash,rt)for(const mt of rt)et.partialSign(mt);et=await this.wallet.signTransaction(et);const pt=et.serialize();try{return await sendAndConfirmRawTransaction(this.connection,pt,nt)}catch(mt){if(mt instanceof ConfirmError){const yt=encode$1(isVersionedTransaction$2(et)?((it=et.signatures)===null||it===void 0?void 0:it[0])||new Uint8Array:(st=et.signature)!==null&&st!==void 0?st:new Uint8Array),Rt=isVersionedTransaction$2(et)?0:void 0,Tt=await this.connection.getTransaction(yt,{commitment:"confirmed",maxSupportedTransactionVersion:Rt});if(Tt){const At=(dt=Tt.meta)===null||dt===void 0?void 0:dt.logMessages;throw At?new SendTransactionError(mt.message,At):mt}else throw mt}else throw mt}}async sendAll(et,rt){var nt,at,it;rt===void 0&&(rt=this.opts);const st=(await this.connection.getLatestBlockhash(rt.preflightCommitment)).blockhash;let dt=et.map(yt=>{var Rt,Tt;if(isVersionedTransaction$2(yt.tx)){let At=yt.tx;return yt.signers&&At.sign(yt.signers),At}else{let At=yt.tx,xt=(Rt=yt.signers)!==null&&Rt!==void 0?Rt:[];return At.feePayer=(Tt=At.feePayer)!==null&&Tt!==void 0?Tt:this.wallet.publicKey,At.recentBlockhash=st,xt.forEach(Nt=>{At.partialSign(Nt)}),At}});const pt=await this.wallet.signAllTransactions(dt),mt=[];for(let yt=0;yt<dt.length;yt+=1){const Rt=pt[yt],Tt=Rt.serialize();try{mt.push(await sendAndConfirmRawTransaction(this.connection,Tt,rt))}catch(At){if(At instanceof ConfirmError){const xt=encode$1(isVersionedTransaction$2(Rt)?((nt=Rt.signatures)===null||nt===void 0?void 0:nt[0])||new Uint8Array:(at=Rt.signature)!==null&&at!==void 0?at:new Uint8Array),Nt=isVersionedTransaction$2(Rt)?0:void 0,Ct=await this.connection.getTransaction(xt,{commitment:"confirmed",maxSupportedTransactionVersion:Nt});if(Ct){const Ot=(it=Ct.meta)===null||it===void 0?void 0:it.logMessages;throw Ot?new SendTransactionError(At.message,Ot):At}else throw At}else throw At}}return mt}async simulate(et,rt,nt,at){let it=(await this.connection.getLatestBlockhash(nt??this.connection.commitment)).blockhash,st;if(isVersionedTransaction$2(et)?(rt&&rt.length>0&&(et.sign(rt),et=await this.wallet.signTransaction(et)),st=await this.connection.simulateTransaction(et,{commitment:nt})):(et.feePayer=et.feePayer||this.wallet.publicKey,et.recentBlockhash=it,rt&&rt.length>0&&(et=await this.wallet.signTransaction(et)),st=await simulateTransaction(this.connection,et,rt,nt,at)),st.value.err)throw new SimulateError(st.value);return st.value}}class SimulateError extends Error{constructor(et,rt){super(rt),this.simulationResponse=et}}async function sendAndConfirmRawTransaction(tt,et,rt){const nt=rt&&{skipPreflight:rt.skipPreflight,preflightCommitment:rt.preflightCommitment||rt.commitment},at=await tt.sendRawTransaction(et,nt),it=(await tt.confirmTransaction(at,rt&&rt.commitment)).value;if(it.err)throw new ConfirmError(`Raw transaction ${at} failed (${JSON.stringify(it)})`);return at}class ConfirmError extends Error{constructor(et){super(et)}}function getProvider(){return AnchorProvider.local()}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global$1<"u"?global$1:typeof self<"u"?self:{},dist$1={};Object.defineProperty(dist$1,"__esModule",{value:!0});var ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=ANCHOR_ERROR__REQUIRE_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_VIOLATED=ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=dist$1.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=dist$1.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=dist$1.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=ANCHOR_ERROR__CONSTRAINT_SPACE=dist$1.ANCHOR_ERROR__CONSTRAINT_SPACE=ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=dist$1.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=dist$1.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=ANCHOR_ERROR__CONSTRAINT_ZERO=dist$1.ANCHOR_ERROR__CONSTRAINT_ZERO=ANCHOR_ERROR__CONSTRAINT_ADDRESS=dist$1.ANCHOR_ERROR__CONSTRAINT_ADDRESS=ANCHOR_ERROR__CONSTRAINT_CLOSE=dist$1.ANCHOR_ERROR__CONSTRAINT_CLOSE=ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=dist$1.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=dist$1.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=ANCHOR_ERROR__CONSTRAINT_STATE=dist$1.ANCHOR_ERROR__CONSTRAINT_STATE=ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=dist$1.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=ANCHOR_ERROR__CONSTRAINT_SEEDS=dist$1.ANCHOR_ERROR__CONSTRAINT_SEEDS=ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=dist$1.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=ANCHOR_ERROR__CONSTRAINT_OWNER=dist$1.ANCHOR_ERROR__CONSTRAINT_OWNER=ANCHOR_ERROR__CONSTRAINT_RAW=dist$1.ANCHOR_ERROR__CONSTRAINT_RAW=ANCHOR_ERROR__CONSTRAINT_SIGNER=dist$1.ANCHOR_ERROR__CONSTRAINT_SIGNER=ANCHOR_ERROR__CONSTRAINT_HAS_ONE=dist$1.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=ANCHOR_ERROR__CONSTRAINT_MUT=dist$1.ANCHOR_ERROR__CONSTRAINT_MUT=ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=dist$1.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=dist$1.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=dist$1.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=ANCHOR_ERROR__IDL_INSTRUCTION_STUB=dist$1.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=dist$1.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=dist$1.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=dist$1.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=ANCHOR_ERROR__INSTRUCTION_MISSING=dist$1.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0,ANCHOR_ERROR__DEPRECATED=dist$1.ANCHOR_ERROR__DEPRECATED=ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=dist$1.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=dist$1.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=dist$1.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=dist$1.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=dist$1.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=dist$1.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=dist$1.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=ANCHOR_ERROR__INVALID_PROGRAM_ID=dist$1.ANCHOR_ERROR__INVALID_PROGRAM_ID=ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=dist$1.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=dist$1.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=dist$1.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=dist$1.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=dist$1.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=dist$1.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=ANCHOR_ERROR__REQUIRE_GT_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0,ANCHOR_ERROR__INSTRUCTION_MISSING=dist$1.ANCHOR_ERROR__INSTRUCTION_MISSING=100,ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=dist$1.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101,ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=dist$1.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102,ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=dist$1.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103,ANCHOR_ERROR__IDL_INSTRUCTION_STUB=dist$1.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3,ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=dist$1.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001,ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=dist$1.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002,ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=dist$1.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500,ANCHOR_ERROR__CONSTRAINT_MUT=dist$1.ANCHOR_ERROR__CONSTRAINT_MUT=2e3,ANCHOR_ERROR__CONSTRAINT_HAS_ONE=dist$1.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001,ANCHOR_ERROR__CONSTRAINT_SIGNER=dist$1.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002,ANCHOR_ERROR__CONSTRAINT_RAW=dist$1.ANCHOR_ERROR__CONSTRAINT_RAW=2003,ANCHOR_ERROR__CONSTRAINT_OWNER=dist$1.ANCHOR_ERROR__CONSTRAINT_OWNER=2004,ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=dist$1.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005,ANCHOR_ERROR__CONSTRAINT_SEEDS=dist$1.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006,ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=dist$1.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007,ANCHOR_ERROR__CONSTRAINT_STATE=dist$1.ANCHOR_ERROR__CONSTRAINT_STATE=2008,ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=dist$1.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009,ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=dist$1.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010,ANCHOR_ERROR__CONSTRAINT_CLOSE=dist$1.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011,ANCHOR_ERROR__CONSTRAINT_ADDRESS=dist$1.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012,ANCHOR_ERROR__CONSTRAINT_ZERO=dist$1.ANCHOR_ERROR__CONSTRAINT_ZERO=2013,ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=dist$1.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014,ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=dist$1.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015,ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016,ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017,ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018,ANCHOR_ERROR__CONSTRAINT_SPACE=dist$1.ANCHOR_ERROR__CONSTRAINT_SPACE=2019,ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=dist$1.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020,ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=dist$1.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021,ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022,ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=dist$1.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023,ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024,ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025,ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026,ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027,ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028,ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029,ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030,ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031,ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032,ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033,ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034,ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035,ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036,ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037,ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038,ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=dist$1.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039,ANCHOR_ERROR__REQUIRE_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;var ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502,ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503,ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504,ANCHOR_ERROR__REQUIRE_GT_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505,ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=dist$1.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506,ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=dist$1.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3,ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=dist$1.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001,ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=dist$1.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002,ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=dist$1.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003,ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=dist$1.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004,ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005,ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006,ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=dist$1.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007,ANCHOR_ERROR__INVALID_PROGRAM_ID=dist$1.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008,ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=dist$1.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009,ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010,ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011,ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012,ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013,ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=dist$1.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014,ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=dist$1.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015,ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=dist$1.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016,ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=dist$1.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017,ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=dist$1.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100,ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=dist$1.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101,ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=dist$1.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;ANCHOR_ERROR__DEPRECATED=dist$1.ANCHOR_ERROR__DEPRECATED=5e3;const _FEATURES=new Map;function isSet$3(tt){return _FEATURES.get(tt)!==void 0}class IdlError extends Error{constructor(et){super(et),this.name="IdlError"}}class ProgramErrorStack{constructor(et){this.stack=et}static parse(et){var rt;const nt=/^Program (\w*) invoke/,at=/^Program \w* success/,it=[];for(let st=0;st<et.length;st++){if(at.exec(et[st])){it.pop();continue}const dt=(rt=nt.exec(et[st]))===null||rt===void 0?void 0:rt[1];dt&&it.push(new PublicKey(dt))}return new ProgramErrorStack(it)}}class AnchorError extends Error{constructor(et,rt,nt,at,it,st){super(nt.join(`
`).replace("Program log: ","")),this.errorLogs=nt,this.logs=at,this.error={errorCode:et,errorMessage:rt,comparedValues:st,origin:it},this._programErrorStack=ProgramErrorStack.parse(at)}static parse(et){if(!et)return null;const rt=et.findIndex(Tt=>Tt.startsWith("Program log: AnchorError"));if(rt===-1)return null;const nt=et[rt],at=[nt];let it;if(rt+1<et.length){if(et[rt+1]==="Program log: Left:"){const Tt=/^Program log: (.*)$/,At=Tt.exec(et[rt+2])[1],xt=Tt.exec(et[rt+4])[1];it=[new PublicKey(At),new PublicKey(xt)],at.push(...et.slice(rt+1,rt+5))}else if(et[rt+1].startsWith("Program log: Left:")){const Tt=/^Program log: (Left|Right): (.*)$/,At=Tt.exec(et[rt+1])[2],xt=Tt.exec(et[rt+2])[2];at.push(...et.slice(rt+1,rt+3)),it=[At,xt]}}const dt=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(nt),mt=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(nt),Rt=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(nt);if(dt){const[Tt,At,xt]=dt.slice(1,4),Nt={code:Tt,number:parseInt(At)};return new AnchorError(Nt,xt,at,et,void 0,it)}else if(mt){const[Tt,At,xt,Nt,Ct]=mt.slice(1,6),Ot={code:xt,number:parseInt(Nt)},kt={file:Tt,line:parseInt(At)};return new AnchorError(Ot,Ct,at,et,kt,it)}else if(Rt){const[Tt,At,xt,Nt]=Rt.slice(1,5),Ct=Tt,Ot={code:At,number:parseInt(xt)};return new AnchorError(Ot,Nt,at,et,Ct,it)}else return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class ProgramError extends Error{constructor(et,rt,nt){super(),this.code=et,this.msg=rt,this.logs=nt,nt&&(this._programErrorStack=ProgramErrorStack.parse(nt))}static parse(et,rt){const nt=et.toString();let at;if(nt.includes("custom program error:")){let dt=nt.split("custom program error: ");if(dt.length!==2)return null;at=dt[1]}else{const dt=nt.match(/"Custom":([0-9]+)}/g);if(!dt||dt.length>1)return null;at=dt[0].match(/([0-9]+)/g)[0]}let it;try{it=parseInt(at)}catch{return null}let st=rt.get(it);return st!==void 0?new ProgramError(it,st,et.logs):(st=LangErrorMessage.get(it),st!==void 0?new ProgramError(it,st,et.logs):null)}get program(){var et;return(et=this._programErrorStack)===null||et===void 0?void 0:et.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var et;return(et=this._programErrorStack)===null||et===void 0?void 0:et.stack}toString(){return this.msg}}function translateError(tt,et){isSet$3("debug-logs")&&console.log("Translating error:",tt);const rt=AnchorError.parse(tt.logs);if(rt)return rt;const nt=ProgramError.parse(tt,et);if(nt)return nt;if(tt.logs){const at={get:function(it,st){return st==="programErrorStack"?it.programErrorStack.stack:st==="program"?it.programErrorStack.stack[tt.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return tt.programErrorStack=ProgramErrorStack.parse(tt.logs),new Proxy(tt,at)}return tt}const LangErrorCode={InstructionMissing:ANCHOR_ERROR__INSTRUCTION_MISSING,InstructionFallbackNotFound:ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND,InstructionDidNotDeserialize:ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE,InstructionDidNotSerialize:ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE,IdlInstructionStub:ANCHOR_ERROR__IDL_INSTRUCTION_STUB,IdlInstructionInvalidProgram:ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM,IdlAccountNotEmpty:ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY,EventInstructionStub:ANCHOR_ERROR__EVENT_INSTRUCTION_STUB,ConstraintMut:ANCHOR_ERROR__CONSTRAINT_MUT,ConstraintHasOne:ANCHOR_ERROR__CONSTRAINT_HAS_ONE,ConstraintSigner:ANCHOR_ERROR__CONSTRAINT_SIGNER,ConstraintRaw:ANCHOR_ERROR__CONSTRAINT_RAW,ConstraintOwner:ANCHOR_ERROR__CONSTRAINT_OWNER,ConstraintRentExempt:ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT,ConstraintSeeds:ANCHOR_ERROR__CONSTRAINT_SEEDS,ConstraintExecutable:ANCHOR_ERROR__CONSTRAINT_EXECUTABLE,ConstraintState:ANCHOR_ERROR__CONSTRAINT_STATE,ConstraintAssociated:ANCHOR_ERROR__CONSTRAINT_ASSOCIATED,ConstraintAssociatedInit:ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT,ConstraintClose:ANCHOR_ERROR__CONSTRAINT_CLOSE,ConstraintAddress:ANCHOR_ERROR__CONSTRAINT_ADDRESS,ConstraintZero:ANCHOR_ERROR__CONSTRAINT_ZERO,ConstraintTokenMint:ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT,ConstraintTokenOwner:ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER,ConstraintMintMintAuthority:ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY,ConstraintMintFreezeAuthority:ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY,ConstraintMintDecimals:ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS,ConstraintSpace:ANCHOR_ERROR__CONSTRAINT_SPACE,ConstraintAccountIsNone:ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE,ConstraintTokenTokenProgram:ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM,ConstraintMintTokenProgram:ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM,ConstraintAssociatedTokenTokenProgram:ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM,ConstraintMintGroupPointerExtension:ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION,ConstraintMintGroupPointerExtensionAuthority:ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY,ConstraintMintGroupPointerExtensionGroupAddress:ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS,ConstraintMintGroupMemberPointerExtension:ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION,ConstraintMintGroupMemberPointerExtensionAuthority:ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY,ConstraintMintGroupMemberPointerExtensionMemberAddress:ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS,ConstraintMintMetadataPointerExtension:ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION,ConstraintMintMetadataPointerExtensionAuthority:ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY,ConstraintMintMetadataPointerExtensionMetadataAddress:ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS,ConstraintMintCloseAuthorityExtension:ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION,ConstraintMintCloseAuthorityExtensionAuthority:ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY,ConstraintMintPermanentDelegateExtension:ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION,ConstraintMintPermanentDelegateExtensionDelegate:ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE,ConstraintMintTransferHookExtension:ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION,ConstraintMintTransferHookExtensionAuthority:ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY,ConstraintMintTransferHookExtensionProgramId:ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID,RequireViolated:ANCHOR_ERROR__REQUIRE_VIOLATED,RequireEqViolated:ANCHOR_ERROR__REQUIRE_EQ_VIOLATED,RequireKeysEqViolated:ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED,RequireNeqViolated:ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED,RequireKeysNeqViolated:ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED,RequireGtViolated:ANCHOR_ERROR__REQUIRE_GT_VIOLATED,RequireGteViolated:ANCHOR_ERROR__REQUIRE_GTE_VIOLATED,AccountDiscriminatorAlreadySet:ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET,AccountDiscriminatorNotFound:ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND,AccountDiscriminatorMismatch:ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH,AccountDidNotDeserialize:ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE,AccountDidNotSerialize:ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE,AccountNotEnoughKeys:ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS,AccountNotMutable:ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE,AccountOwnedByWrongProgram:ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM,InvalidProgramId:ANCHOR_ERROR__INVALID_PROGRAM_ID,InvalidProgramExecutable:ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE,AccountNotSigner:ANCHOR_ERROR__ACCOUNT_NOT_SIGNER,AccountNotSystemOwned:ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED,AccountNotInitialized:ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED,AccountNotProgramData:ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA,AccountNotAssociatedTokenAccount:ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT,AccountSysvarMismatch:ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH,AccountReallocExceedsLimit:ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT,AccountDuplicateReallocs:ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS,DeclaredProgramIdMismatch:ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH,TryingToInitPayerAsProgramAccount:ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT,InvalidNumericConversion:ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION,Deprecated:ANCHOR_ERROR__DEPRECATED},LangErrorMessage=new Map([[LangErrorCode.InstructionMissing,"8 byte instruction identifier not provided"],[LangErrorCode.InstructionFallbackNotFound,"Fallback functions are not supported"],[LangErrorCode.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[LangErrorCode.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[LangErrorCode.IdlInstructionStub,"The program was compiled without idl instructions"],[LangErrorCode.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[LangErrorCode.IdlAccountNotEmpty,"IDL account must be empty in order to resize, try closing first"],[LangErrorCode.EventInstructionStub,"The program was compiled without `event-cpi` feature"],[LangErrorCode.ConstraintMut,"A mut constraint was violated"],[LangErrorCode.ConstraintHasOne,"A has one constraint was violated"],[LangErrorCode.ConstraintSigner,"A signer constraint was violated"],[LangErrorCode.ConstraintRaw,"A raw constraint was violated"],[LangErrorCode.ConstraintOwner,"An owner constraint was violated"],[LangErrorCode.ConstraintRentExempt,"A rent exemption constraint was violated"],[LangErrorCode.ConstraintSeeds,"A seeds constraint was violated"],[LangErrorCode.ConstraintExecutable,"An executable constraint was violated"],[LangErrorCode.ConstraintState,"Deprecated Error, feel free to replace with something else"],[LangErrorCode.ConstraintAssociated,"An associated constraint was violated"],[LangErrorCode.ConstraintAssociatedInit,"An associated init constraint was violated"],[LangErrorCode.ConstraintClose,"A close constraint was violated"],[LangErrorCode.ConstraintAddress,"An address constraint was violated"],[LangErrorCode.ConstraintZero,"Expected zero account discriminant"],[LangErrorCode.ConstraintTokenMint,"A token mint constraint was violated"],[LangErrorCode.ConstraintTokenOwner,"A token owner constraint was violated"],[LangErrorCode.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[LangErrorCode.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[LangErrorCode.ConstraintMintDecimals,"A mint decimals constraint was violated"],[LangErrorCode.ConstraintSpace,"A space constraint was violated"],[LangErrorCode.ConstraintAccountIsNone,"A required account for the constraint is None"],[LangErrorCode.ConstraintTokenTokenProgram,"A token account token program constraint was violated"],[LangErrorCode.ConstraintMintTokenProgram,"A mint token program constraint was violated"],[LangErrorCode.ConstraintAssociatedTokenTokenProgram,"An associated token account token program constraint was violated"],[LangErrorCode.ConstraintMintGroupPointerExtension,"A group pointer extension constraint was violated"],[LangErrorCode.ConstraintMintGroupPointerExtensionAuthority,"A group pointer extension authority constraint was violated"],[LangErrorCode.ConstraintMintGroupPointerExtensionGroupAddress,"A group pointer extension group address constraint was violated"],[LangErrorCode.ConstraintMintGroupMemberPointerExtension,"A group member pointer extension constraint was violated"],[LangErrorCode.ConstraintMintGroupMemberPointerExtensionAuthority,"A group member pointer extension authority constraint was violated"],[LangErrorCode.ConstraintMintGroupMemberPointerExtensionMemberAddress,"A group member pointer extension group address constraint was violated"],[LangErrorCode.ConstraintMintMetadataPointerExtension,"A metadata pointer extension constraint was violated"],[LangErrorCode.ConstraintMintMetadataPointerExtensionAuthority,"A metadata pointer extension authority constraint was violated"],[LangErrorCode.ConstraintMintMetadataPointerExtensionMetadataAddress,"A metadata pointer extension metadata address constraint was violated"],[LangErrorCode.ConstraintMintCloseAuthorityExtension,"A close authority constraint was violated"],[LangErrorCode.ConstraintMintCloseAuthorityExtensionAuthority,"A close authority extension authority constraint was violated"],[LangErrorCode.ConstraintMintPermanentDelegateExtension,"A permanent delegate extension constraint was violated"],[LangErrorCode.ConstraintMintPermanentDelegateExtensionDelegate,"A permanent delegate extension delegate constraint was violated"],[LangErrorCode.ConstraintMintTransferHookExtension,"A transfer hook extension constraint was violated"],[LangErrorCode.ConstraintMintTransferHookExtensionAuthority,"A transfer hook extension authority constraint was violated"],[LangErrorCode.ConstraintMintTransferHookExtensionProgramId,"A transfer hook extension transfer hook program id constraint was violated"],[LangErrorCode.RequireViolated,"A require expression was violated"],[LangErrorCode.RequireEqViolated,"A require_eq expression was violated"],[LangErrorCode.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[LangErrorCode.RequireNeqViolated,"A require_neq expression was violated"],[LangErrorCode.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[LangErrorCode.RequireGtViolated,"A require_gt expression was violated"],[LangErrorCode.RequireGteViolated,"A require_gte expression was violated"],[LangErrorCode.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[LangErrorCode.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[LangErrorCode.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[LangErrorCode.AccountDidNotDeserialize,"Failed to deserialize the account"],[LangErrorCode.AccountDidNotSerialize,"Failed to serialize the account"],[LangErrorCode.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[LangErrorCode.AccountNotMutable,"The given account is not mutable"],[LangErrorCode.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[LangErrorCode.InvalidProgramId,"Program ID was not as expected"],[LangErrorCode.InvalidProgramExecutable,"Program account is not executable"],[LangErrorCode.AccountNotSigner,"The given account did not sign"],[LangErrorCode.AccountNotSystemOwned,"The given account is not owned by the system program"],[LangErrorCode.AccountNotInitialized,"The program expected this account to be already initialized"],[LangErrorCode.AccountNotProgramData,"The given account is not a program data account"],[LangErrorCode.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[LangErrorCode.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[LangErrorCode.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[LangErrorCode.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[LangErrorCode.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[LangErrorCode.TryingToInitPayerAsProgramAccount,"You cannot/should not initialize the payer account as a program account"],[LangErrorCode.InvalidNumericConversion,"The program could not perform the numeric conversion, out of range integral type conversion attempted"],[LangErrorCode.Deprecated,"The API being used is deprecated and should no longer be used"]]);class IdlCoder{static fieldLayout(et,rt=[],nt){const at=et.name;switch(et.type){case"bool":return dist$2.bool(at);case"u8":return dist$2.u8(at);case"i8":return dist$2.i8(at);case"u16":return dist$2.u16(at);case"i16":return dist$2.i16(at);case"u32":return dist$2.u32(at);case"i32":return dist$2.i32(at);case"f32":return dist$2.f32(at);case"u64":return dist$2.u64(at);case"i64":return dist$2.i64(at);case"f64":return dist$2.f64(at);case"u128":return dist$2.u128(at);case"i128":return dist$2.i128(at);case"u256":return dist$2.u256(at);case"i256":return dist$2.i256(at);case"bytes":return dist$2.vecU8(at);case"string":return dist$2.str(at);case"pubkey":return dist$2.publicKey(at);default:{if("option"in et.type)return dist$2.option(IdlCoder.fieldLayout({type:et.type.option},rt,nt),at);if("vec"in et.type)return dist$2.vec(IdlCoder.fieldLayout({type:et.type.vec},rt,nt),at);if("array"in et.type){let[it,st]=et.type.array;return st=IdlCoder.resolveArrayLen(st,nt),dist$2.array(IdlCoder.fieldLayout({type:it},rt,nt),st,at)}if("defined"in et.type){if(!rt)throw new IdlError("User defined types not provided");const it=et.type.defined.name,st=rt.find(dt=>dt.name===it);if(!st)throw new IdlError(`Type not found: ${et.name}`);return IdlCoder.typeDefLayout({typeDef:st,types:rt,genericArgs:nt??et.type.defined.generics,name:at})}if("generic"in et.type){const it=nt==null?void 0:nt.at(0);if((it==null?void 0:it.kind)!=="type")throw new IdlError(`Invalid generic field: ${et.name}`);return IdlCoder.fieldLayout({...et,type:it.type},rt)}throw new IdlError(`Not yet implemented: ${JSON.stringify(et.type)}`)}}}static typeDefLayout({typeDef:et,types:rt,name:nt,genericArgs:at}){switch(et.type.kind){case"struct":{const it=handleDefinedFields(et.type.fields,()=>[],st=>st.map(dt=>{const pt=at&&IdlCoder.resolveGenericArgs({type:dt.type,typeDef:et,genericArgs:at});return IdlCoder.fieldLayout(dt,rt,pt)}),st=>st.map((dt,pt)=>{const mt=at&&IdlCoder.resolveGenericArgs({type:dt,typeDef:et,genericArgs:at});return IdlCoder.fieldLayout({name:pt.toString(),type:dt},rt,mt)}));return dist$2.struct(it,nt)}case"enum":{const it=et.type.variants.map(st=>{const dt=handleDefinedFields(st.fields,()=>[],pt=>pt.map(mt=>{const yt=at&&IdlCoder.resolveGenericArgs({type:mt.type,typeDef:et,genericArgs:at});return IdlCoder.fieldLayout(mt,rt,yt)}),pt=>pt.map((mt,yt)=>{const Rt=at&&IdlCoder.resolveGenericArgs({type:mt,typeDef:et,genericArgs:at});return IdlCoder.fieldLayout({name:yt.toString(),type:mt},rt,Rt)}));return dist$2.struct(dt,st.name)});return nt!==void 0?dist$2.rustEnum(it).replicate(nt):dist$2.rustEnum(it,nt)}case"type":return IdlCoder.fieldLayout({type:et.type.alias,name:nt},rt)}}static typeSize(et,rt,nt){var at;switch(et){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"f32":return 4;case"u64":return 8;case"i64":return 8;case"f64":return 8;case"u128":return 16;case"i128":return 16;case"u256":return 32;case"i256":return 32;case"bytes":return 1;case"string":return 1;case"pubkey":return 32;default:if("option"in et)return 1+IdlCoder.typeSize(et.option,rt,nt);if("coption"in et)return 4+IdlCoder.typeSize(et.coption,rt,nt);if("vec"in et)return 1;if("array"in et){let[it,st]=et.array;return st=IdlCoder.resolveArrayLen(st,nt),IdlCoder.typeSize(it,rt,nt)*st}if("defined"in et){const it=(at=rt.types)===null||at===void 0?void 0:at.find(dt=>dt.name===et.defined.name);if(!it)throw new IdlError(`Type not found: ${JSON.stringify(et)}`);const st=dt=>{const pt=nt??et.defined.generics,mt=pt&&IdlCoder.resolveGenericArgs({type:dt,typeDef:it,genericArgs:pt});return IdlCoder.typeSize(dt,rt,mt)};switch(it.type.kind){case"struct":return handleDefinedFields(it.type.fields,()=>[0],dt=>dt.map(pt=>st(pt.type)),dt=>dt.map(pt=>st(pt))).reduce((dt,pt)=>dt+pt,0);case"enum":{const dt=it.type.variants.map(pt=>handleDefinedFields(pt.fields,()=>[0],mt=>mt.map(yt=>st(yt.type)),mt=>mt.map(yt=>st(yt))).reduce((mt,yt)=>mt+yt,0));return Math.max(...dt)+1}case"type":return IdlCoder.typeSize(it.type.alias,rt,nt)}}if("generic"in et){const it=nt==null?void 0:nt.at(0);if((it==null?void 0:it.kind)!=="type")throw new IdlError(`Invalid generic: ${et.generic}`);return IdlCoder.typeSize(it.type,rt,nt)}throw new Error(`Invalid type ${JSON.stringify(et)}`)}}static resolveArrayLen(et,rt){if(typeof et=="number")return et;if(rt){const nt=rt.find(at=>at.kind==="const");(nt==null?void 0:nt.kind)==="const"&&(et=+nt.value)}if(typeof et!="number")throw new IdlError("Generic array length did not resolve");return et}static resolveGenericArgs({type:et,typeDef:rt,genericArgs:nt,isDefined:at}){if(typeof et!="object")return null;for(const it in rt.generics){const st=rt.generics[it];if("generic"in et&&st.name===et.generic)return[nt[it]];if("option"in et){const dt=IdlCoder.resolveGenericArgs({type:et.option,typeDef:rt,genericArgs:nt,isDefined:at});if(!dt||!at)return dt;if(dt[0].kind==="type")return[{kind:"type",type:{option:dt[0].type}}]}if("vec"in et){const dt=IdlCoder.resolveGenericArgs({type:et.vec,typeDef:rt,genericArgs:nt,isDefined:at});if(!dt||!at)return dt;if(dt[0].kind==="type")return[{kind:"type",type:{vec:dt[0].type}}]}if("array"in et){const[dt,pt]=et.array,mt=typeof pt=="object",yt=IdlCoder.resolveGenericArgs({type:dt,typeDef:rt,genericArgs:nt,isDefined:at});if(yt){for(const Rt in rt.generics.slice(+it)){const Tt=+it+ +Rt;mt&&rt.generics[Tt].name===pt.generic&&yt.push(nt[Tt])}if(!at)return yt;if(yt[0].kind==="type"&&yt[1].kind==="const")return[{kind:"type",type:{array:[yt[0].type,+yt[1].value]}}]}if(mt&&st.name===pt.generic){const Rt=nt[it];return at?[{kind:"type",type:{array:[dt,+Rt.value]}}]:[Rt]}return null}if("defined"in et)return et.defined.generics?et.defined.generics.flatMap(dt=>{switch(dt.kind){case"type":return IdlCoder.resolveGenericArgs({type:dt.type,typeDef:rt,genericArgs:nt,isDefined:!0});case"const":return[dt]}}).filter(dt=>dt!==null):null}return null}}class BorshInstructionCoder{constructor(et){this.idl=et;const rt=et.instructions.map(at=>{const it=at.name,st=at.args.map(pt=>IdlCoder.fieldLayout(pt,et.types)),dt=dist$2.struct(st,it);return[it,{discriminator:at.discriminator,layout:dt}]});this.ixLayouts=new Map(rt);const nt=rt.map(([at,{discriminator:it,layout:st}])=>[bs58$5.encode(it),{name:at,layout:st}]);this.sighashLayouts=new Map(nt)}encode(et,rt){const nt=Buffer$1.alloc(1e3),at=this.ixLayouts.get(et);if(!at)throw new Error(`Unknown method: ${et}`);const it=at.layout.encode(rt,nt),st=nt.slice(0,it);return Buffer$1.concat([Buffer$1.from(at.discriminator),st])}decode(et,rt="hex"){typeof et=="string"&&(et=rt==="hex"?Buffer$1.from(et,"hex"):bs58$5.decode(et));const nt=et.slice(0,DISCRIMINATOR_SIZE),at=et.slice(DISCRIMINATOR_SIZE),it=this.sighashLayouts.get(bs58$5.encode(nt));return it?{name:it.name,data:it.layout.decode(at)}:null}format(et,rt){return InstructionFormatter.format(et,rt,this.idl)}}class InstructionFormatter{static format(et,rt,nt){const at=nt.instructions.find(pt=>et.name===pt.name);if(!at)return console.error("Invalid instruction given"),null;const it=at.args.map(pt=>({name:pt.name,type:InstructionFormatter.formatIdlType(pt.type),data:InstructionFormatter.formatIdlData(pt,et.data[pt.name],nt.types)})),st=InstructionFormatter.flattenIdlAccounts(at.accounts),dt=rt.map((pt,mt)=>mt<st.length?{name:st[mt].name,...pt}:{name:void 0,...pt});return{args:it,accounts:dt}}static formatIdlType(et){if(typeof et=="string")return et;if("option"in et)return`Option<${this.formatIdlType(et.option)}>`;if("coption"in et)return`COption<${this.formatIdlType(et.coption)}>`;if("vec"in et)return`Vec<${this.formatIdlType(et.vec)}>`;if("array"in et)return`Array<${et.array[0]}; ${et.array[1]}>`;if("defined"in et){const rt=et.defined.name;if(et.defined.generics){const nt=et.defined.generics.map(at=>{switch(at.kind){case"type":return InstructionFormatter.formatIdlType(at.type);case"const":return at.value}}).join(", ");return`${rt}<${nt}>`}return rt}throw new Error(`Unknown IDL type: ${et}`)}static formatIdlData(et,rt,nt){if(typeof et.type=="string")return rt.toString();if("vec"in et.type)return"["+rt.map(at=>this.formatIdlData({name:"",type:et.type.vec},at,nt)).join(", ")+"]";if("option"in et.type)return rt===null?"null":this.formatIdlData({name:"",type:et.type.option},rt,nt);if("defined"in et.type){if(!nt)throw new Error("User defined types not provided");const at=et.type.defined.name,it=nt.find(st=>st.name===at);if(!it)throw new Error(`Type not found: ${at}`);return InstructionFormatter.formatIdlDataDefined(it,rt,nt)}return"unknown"}static formatIdlDataDefined(et,rt,nt){switch(et.type.kind){case"struct":return"{ "+handleDefinedFields(et.type.fields,()=>"",at=>Object.entries(rt).map(([it,st])=>{const dt=at.find(pt=>pt.name===it);if(!dt)throw new Error(`Field not found: ${it}`);return it+": "+InstructionFormatter.formatIdlData(dt,st,nt)}).join(", "),at=>Object.entries(rt).map(([it,st])=>it+": "+InstructionFormatter.formatIdlData({name:"",type:at[it]},st,nt)).join(", "))+" }";case"enum":{const at=Object.keys(rt)[0],it=et.type.variants.find(dt=>dt.name===at);if(!it)throw new Error(`Unable to find variant: ${at}`);const st=rt[at];return handleDefinedFields(it.fields,()=>at,dt=>{const pt=Object.keys(st).map(mt=>{const yt=st[mt],Rt=dt.find(Tt=>Tt.name===mt);if(!Rt)throw new Error(`Field not found: ${mt}`);return mt+": "+InstructionFormatter.formatIdlData(Rt,yt,nt)}).join(", ");return`${at} { ${pt} }`},dt=>{const pt=Object.entries(st).map(([mt,yt])=>mt+": "+InstructionFormatter.formatIdlData({name:"",type:dt[mt]},yt,nt)).join(", ");return`${at} { ${pt} }`})}case"type":return InstructionFormatter.formatIdlType(et.type.alias)}}static flattenIdlAccounts(et,rt){return et.map(nt=>{const at=sentenceCase(nt.name);if(nt.hasOwnProperty("accounts")){const it=rt?`${rt} > ${at}`:at;return InstructionFormatter.flattenIdlAccounts(nt.accounts,it)}else return{...nt,name:rt?`${rt} > ${at}`:at}}).flat()}}function sentenceCase(tt){const et=tt.replace(/([A-Z])/g," $1");return et.charAt(0).toUpperCase()+et.slice(1)}const DISCRIMINATOR_SIZE=8;class BorshAccountsCoder{constructor(et){if(this.idl=et,!et.accounts){this.accountLayouts=new Map;return}const rt=et.types;if(!rt)throw new Error("Accounts require `idl.types`");const nt=et.accounts.map(at=>{const it=rt.find(st=>st.name===at.name);if(!it)throw new Error(`Account not found: ${at.name}`);return[at.name,IdlCoder.typeDefLayout({typeDef:it,types:rt})]});this.accountLayouts=new Map(nt)}async encode(et,rt){const nt=Buffer$1.alloc(1e3),at=this.accountLayouts.get(et);if(!at)throw new Error(`Unknown account: ${et}`);const it=at.encode(rt,nt),st=nt.slice(0,it),dt=this.accountDiscriminator(et);return Buffer$1.concat([dt,st])}decode(et,rt){if(this.accountDiscriminator(et).compare(rt.slice(0,DISCRIMINATOR_SIZE)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(et,rt)}decodeAny(et){const rt=et.slice(0,DISCRIMINATOR_SIZE),nt=Array.from(this.accountLayouts.keys()).find(at=>this.accountDiscriminator(at).equals(rt));if(!nt)throw new Error("Account not found");return this.decodeUnchecked(nt,et)}decodeUnchecked(et,rt){const nt=rt.subarray(DISCRIMINATOR_SIZE),at=this.accountLayouts.get(et);if(!at)throw new Error(`Unknown account: ${et}`);return at.decode(nt)}memcmp(et,rt){const nt=this.accountDiscriminator(et);return{offset:0,bytes:bs58$5.encode(rt?Buffer$1.concat([nt,rt]):nt)}}size(et){return DISCRIMINATOR_SIZE+IdlCoder.typeSize({defined:{name:et}},this.idl)}accountDiscriminator(et){var rt;const nt=(rt=this.idl.accounts)===null||rt===void 0?void 0:rt.find(at=>at.name===et);if(!nt)throw new Error(`Account not found: ${et}`);return Buffer$1.from(nt.discriminator)}}class BorshEventCoder{constructor(et){var rt;if(!et.events){this.layouts=new Map;return}const nt=et.types;if(!nt)throw new Error("Events require `idl.types`");const at=et.events.map(it=>{const st=nt.find(dt=>dt.name===it.name);if(!st)throw new Error(`Event not found: ${it.name}`);return[it.name,IdlCoder.typeDefLayout({typeDef:st,types:nt})]});this.layouts=new Map(at),this.discriminators=new Map(((rt=et.events)!==null&&rt!==void 0?rt:[]).map(it=>[encode$2(Buffer$1.from(it.discriminator)),it.name]))}decode(et){let rt;try{rt=decode(et)}catch{return null}const nt=encode$2(rt.slice(0,8)),at=this.discriminators.get(nt);if(!at)return null;const it=this.layouts.get(at);if(!it)throw new Error(`Unknown event: ${at}`);return{data:it.decode(rt.slice(8)),name:at}}}class BorshTypesCoder{constructor(et){const rt=et.types;if(!rt){this.typeLayouts=new Map;return}const nt=rt.filter(at=>!at.generics).map(at=>[at.name,IdlCoder.typeDefLayout({typeDef:at,types:rt})]);this.typeLayouts=new Map(nt)}encode(et,rt){const nt=Buffer$1.alloc(1e3),at=this.typeLayouts.get(et);if(!at)throw new Error(`Unknown type: ${et}`);const it=at.encode(rt,nt);return nt.slice(0,it)}decode(et,rt){const nt=this.typeLayouts.get(et);if(!nt)throw new Error(`Unknown type: ${et}`);return nt.decode(rt)}}class BorshCoder{constructor(et){this.instruction=new BorshInstructionCoder(et),this.accounts=new BorshAccountsCoder(et),this.events=new BorshEventCoder(et),this.types=new BorshTypesCoder(et)}}class Layout{constructor(et,rt){if(!Number.isInteger(et))throw new TypeError("span must be an integer");this.span=et,this.property=rt}makeDestinationObject(){return{}}decode(et,rt){throw new Error("Layout is abstract")}encode(et,rt,nt){throw new Error("Layout is abstract")}getSpan(et,rt){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(et){const rt=Object.create(this.constructor.prototype);return Object.assign(rt,this),rt.property=et,rt}fromArray(et){}}var Layout_2=Layout;function nameWithProperty(tt,et){return et.property?tt+"["+et.property+"]":tt}class ExternalLayout extends Layout{isCount(){throw new Error("ExternalLayout is abstract")}}class OffsetLayout extends ExternalLayout{constructor(et,rt,nt){if(!(et instanceof Layout))throw new TypeError("layout must be a Layout");if(rt===void 0)rt=0;else if(!Number.isInteger(rt))throw new TypeError("offset must be integer or undefined");super(et.span,nt||et.property),this.layout=et,this.offset=rt}isCount(){return this.layout instanceof UInt||this.layout instanceof UIntBE}decode(et,rt){return rt===void 0&&(rt=0),this.layout.decode(et,rt+this.offset)}encode(et,rt,nt){return nt===void 0&&(nt=0),this.layout.encode(et,rt,nt+this.offset)}}class UInt extends Layout{constructor(et,rt){if(super(et,rt),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(et,rt){return rt===void 0&&(rt=0),et.readUIntLE(rt,this.span)}encode(et,rt,nt){return nt===void 0&&(nt=0),rt.writeUIntLE(et,nt,this.span),this.span}}class UIntBE extends Layout{constructor(et,rt){if(super(et,rt),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(et,rt){return rt===void 0&&(rt=0),et.readUIntBE(rt,this.span)}encode(et,rt,nt){return nt===void 0&&(nt=0),rt.writeUIntBE(et,nt,this.span),this.span}}const V2E32=Math.pow(2,32);function divmodInt64(tt){const et=Math.floor(tt/V2E32),rt=tt-et*V2E32;return{hi32:et,lo32:rt}}function roundedInt64(tt,et){return tt*V2E32+et}class NearUInt64 extends Layout{constructor(et){super(8,et)}decode(et,rt){rt===void 0&&(rt=0);const nt=et.readUInt32LE(rt),at=et.readUInt32LE(rt+4);return roundedInt64(at,nt)}encode(et,rt,nt){nt===void 0&&(nt=0);const at=divmodInt64(et);return rt.writeUInt32LE(at.lo32,nt),rt.writeUInt32LE(at.hi32,nt+4),8}}class NearInt64 extends Layout{constructor(et){super(8,et)}decode(et,rt){rt===void 0&&(rt=0);const nt=et.readUInt32LE(rt),at=et.readInt32LE(rt+4);return roundedInt64(at,nt)}encode(et,rt,nt){nt===void 0&&(nt=0);const at=divmodInt64(et);return rt.writeUInt32LE(at.lo32,nt),rt.writeInt32LE(at.hi32,nt+4),8}}class Structure extends Layout{constructor(et,rt,nt){if(!(Array.isArray(et)&&et.reduce((it,st)=>it&&st instanceof Layout,!0)))throw new TypeError("fields must be array of Layout instances");typeof rt=="boolean"&&nt===void 0&&(nt=rt,rt=void 0);for(const it of et)if(0>it.span&&it.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let at=-1;try{at=et.reduce((it,st)=>it+st.getSpan(),0)}catch{}super(at,rt),this.fields=et,this.decodePrefixes=!!nt}getSpan(et,rt){if(0<=this.span)return this.span;rt===void 0&&(rt=0);let nt=0;try{nt=this.fields.reduce((at,it)=>{const st=it.getSpan(et,rt);return rt+=st,at+st},0)}catch{throw new RangeError("indeterminate span")}return nt}decode(et,rt){rt===void 0&&(rt=0);const nt=this.makeDestinationObject();for(const at of this.fields)if(at.property!==void 0&&(nt[at.property]=at.decode(et,rt)),rt+=at.getSpan(et,rt),this.decodePrefixes&&et.length===rt)break;return nt}encode(et,rt,nt){nt===void 0&&(nt=0);const at=nt;let it=0,st=0;for(const dt of this.fields){let pt=dt.span;if(st=0<pt?pt:0,dt.property!==void 0){const mt=et[dt.property];mt!==void 0&&(st=dt.encode(mt,rt,nt),0>pt&&(pt=dt.getSpan(rt,nt)))}it=nt,nt+=pt}return it+st-at}fromArray(et){const rt=this.makeDestinationObject();for(const nt of this.fields)nt.property!==void 0&&0<et.length&&(rt[nt.property]=et.shift());return rt}layoutFor(et){if(typeof et!="string")throw new TypeError("property must be string");for(const rt of this.fields)if(rt.property===et)return rt}offsetOf(et){if(typeof et!="string")throw new TypeError("property must be string");let rt=0;for(const nt of this.fields){if(nt.property===et)return rt;0>nt.span?rt=-1:0<=rt&&(rt+=nt.span)}}}class UnionDiscriminator{constructor(et){this.property=et}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class UnionLayoutDiscriminator extends UnionDiscriminator{constructor(et,rt){if(!(et instanceof ExternalLayout&&et.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(rt||et.property||"variant"),this.layout=et}decode(et,rt){return this.layout.decode(et,rt)}encode(et,rt,nt){return this.layout.encode(et,rt,nt)}}class Union extends Layout{constructor(et,rt,nt){const at=et instanceof UInt||et instanceof UIntBE;if(at)et=new UnionLayoutDiscriminator(new OffsetLayout(et));else if(et instanceof ExternalLayout&&et.isCount())et=new UnionLayoutDiscriminator(et);else if(!(et instanceof UnionDiscriminator))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(rt===void 0&&(rt=null),!(rt===null||rt instanceof Layout))throw new TypeError("defaultLayout must be null or a Layout");if(rt!==null){if(0>rt.span)throw new Error("defaultLayout must have constant span");rt.property===void 0&&(rt=rt.replicate("content"))}let it=-1;rt&&(it=rt.span,0<=it&&at&&(it+=et.layout.span)),super(it,nt),this.discriminator=et,this.usesPrefixDiscriminator=at,this.defaultLayout=rt,this.registry={};let st=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(dt){return st(dt)},this.configGetSourceVariant=function(dt){st=dt.bind(this)}}getSpan(et,rt){if(0<=this.span)return this.span;rt===void 0&&(rt=0);const nt=this.getVariant(et,rt);if(!nt)throw new Error("unable to determine span for unrecognized variant");return nt.getSpan(et,rt)}defaultGetSourceVariant(et){if(et.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&et.hasOwnProperty(this.defaultLayout.property))return;const rt=this.registry[et[this.discriminator.property]];if(rt&&(!rt.layout||et.hasOwnProperty(rt.property)))return rt}else for(const rt in this.registry){const nt=this.registry[rt];if(et.hasOwnProperty(nt.property))return nt}throw new Error("unable to infer src variant")}decode(et,rt){rt===void 0&&(rt=0);let nt;const at=this.discriminator,it=at.decode(et,rt);let st=this.registry[it];if(st===void 0){let dt=0;st=this.defaultLayout,this.usesPrefixDiscriminator&&(dt=at.layout.span),nt=this.makeDestinationObject(),nt[at.property]=it,nt[st.property]=this.defaultLayout.decode(et,rt+dt)}else nt=st.decode(et,rt);return nt}encode(et,rt,nt){nt===void 0&&(nt=0);const at=this.getSourceVariant(et);if(at===void 0){const it=this.discriminator,st=this.defaultLayout;let dt=0;return this.usesPrefixDiscriminator&&(dt=it.layout.span),it.encode(et[it.property],rt,nt),dt+st.encode(et[st.property],rt,nt+dt)}return at.encode(et,rt,nt)}addVariant(et,rt,nt){const at=new VariantLayout(this,et,rt,nt);return this.registry[et]=at,at}getVariant(et,rt){let nt=et;return Buffer.isBuffer(et)&&(rt===void 0&&(rt=0),nt=this.discriminator.decode(et,rt)),this.registry[nt]}}class VariantLayout extends Layout{constructor(et,rt,nt,at){if(!(et instanceof Union))throw new TypeError("union must be a Union");if(!Number.isInteger(rt)||0>rt)throw new TypeError("variant must be a (non-negative) integer");if(typeof nt=="string"&&at===void 0&&(at=nt,nt=null),nt){if(!(nt instanceof Layout))throw new TypeError("layout must be a Layout");if(et.defaultLayout!==null&&0<=nt.span&&nt.span>et.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof at!="string")throw new TypeError("variant must have a String property")}let it=et.span;0>et.span&&(it=nt?nt.span:0,0<=it&&et.usesPrefixDiscriminator&&(it+=et.discriminator.layout.span)),super(it,at),this.union=et,this.variant=rt,this.layout=nt||null}getSpan(et,rt){if(0<=this.span)return this.span;rt===void 0&&(rt=0);let nt=0;return this.union.usesPrefixDiscriminator&&(nt=this.union.discriminator.layout.span),nt+this.layout.getSpan(et,rt+nt)}decode(et,rt){const nt=this.makeDestinationObject();if(rt===void 0&&(rt=0),this!==this.union.getVariant(et,rt))throw new Error("variant mismatch");let at=0;return this.union.usesPrefixDiscriminator&&(at=this.union.discriminator.layout.span),this.layout?nt[this.property]=this.layout.decode(et,rt+at):this.property?nt[this.property]=!0:this.union.usesPrefixDiscriminator&&(nt[this.union.discriminator.property]=this.variant),nt}encode(et,rt,nt){nt===void 0&&(nt=0);let at=0;if(this.union.usesPrefixDiscriminator&&(at=this.union.discriminator.layout.span),this.layout&&!et.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,rt,nt);let it=at;if(this.layout&&(this.layout.encode(et[this.property],rt,nt+at),it+=this.layout.getSpan(rt,nt+at),0<=this.union.span&&it>this.union.span))throw new Error("encoded variant overruns containing union");return it}fromArray(et){if(this.layout)return this.layout.fromArray(et)}}class Blob$1 extends Layout{constructor(et,rt){if(!(et instanceof ExternalLayout&&et.isCount()||Number.isInteger(et)&&0<=et))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let nt=-1;et instanceof ExternalLayout||(nt=et),super(nt,rt),this.length=et}getSpan(et,rt){let nt=this.span;return 0>nt&&(nt=this.length.decode(et,rt)),nt}decode(et,rt){rt===void 0&&(rt=0);let nt=this.span;return 0>nt&&(nt=this.length.decode(et,rt)),et.slice(rt,rt+nt)}encode(et,rt,nt){let at=this.length;if(this.length instanceof ExternalLayout&&(at=et.length),!(Buffer.isBuffer(et)&&at===et.length))throw new TypeError(nameWithProperty("Blob.encode",this)+" requires (length "+at+") Buffer as src");if(nt+at>rt.length)throw new RangeError("encoding overruns Buffer");return rt.write(et.toString("hex"),nt,at,"hex"),this.length instanceof ExternalLayout&&this.length.encode(at,rt,nt),at}}var offset=(tt,et,rt)=>new OffsetLayout(tt,et,rt),u8=tt=>new UInt(1,tt),u32=tt=>new UInt(4,tt),nu64=tt=>new NearUInt64(tt),ns64=tt=>new NearInt64(tt),struct=(tt,et,rt)=>new Structure(tt,et,rt),union$2=(tt,et,rt)=>new Union(tt,et,rt),blob=(tt,et)=>new Blob$1(tt,et);class RustStringLayout extends Layout_2{constructor(et){super(-1,et),this.property=et,this.layout=struct([u32("length"),u32("lengthPadding"),blob(offset(u32(),-8),"chars")],this.property)}encode(et,rt,nt=0){if(et==null)return this.layout.span;const at={chars:Buffer.from(et,"utf8")};return this.layout.encode(at,rt,nt)}decode(et,rt=0){return this.layout.decode(et,rt).chars.toString()}getSpan(et,rt=0){return u32().span+u32().span+new BN(new Uint8Array(et).slice(rt,rt+4),10,"le").toNumber()}}function rustStringLayout(tt){return new RustStringLayout(tt)}function publicKey$2(tt){return blob(32,tt)}const LAYOUT=union$2(u32("instruction"));LAYOUT.addVariant(0,struct([ns64("lamports"),ns64("space"),publicKey$2("owner")]),"createAccount");LAYOUT.addVariant(1,struct([publicKey$2("owner")]),"assign");LAYOUT.addVariant(2,struct([ns64("lamports")]),"transfer");LAYOUT.addVariant(3,struct([publicKey$2("base"),rustStringLayout("seed"),ns64("lamports"),ns64("space"),publicKey$2("owner")]),"createAccountWithSeed");LAYOUT.addVariant(4,struct([publicKey$2("authorized")]),"advanceNonceAccount");LAYOUT.addVariant(5,struct([ns64("lamports")]),"withdrawNonceAccount");LAYOUT.addVariant(6,struct([publicKey$2("authorized")]),"initializeNonceAccount");LAYOUT.addVariant(7,struct([publicKey$2("authorized")]),"authorizeNonceAccount");LAYOUT.addVariant(8,struct([ns64("space")]),"allocate");LAYOUT.addVariant(9,struct([publicKey$2("base"),rustStringLayout("seed"),ns64("space"),publicKey$2("owner")]),"allocateWithSeed");LAYOUT.addVariant(10,struct([publicKey$2("base"),rustStringLayout("seed"),publicKey$2("owner")]),"assignWithSeed");LAYOUT.addVariant(11,struct([ns64("lamports"),rustStringLayout("seed"),publicKey$2("owner")]),"transferWithSeed");Math.max(...Object.values(LAYOUT.registry).map(tt=>tt.span));class WrappedLayout$1 extends Layout_2{constructor(et,rt,nt,at){super(et.span,at),this.layout=et,this.decoder=rt,this.encoder=nt}decode(et,rt){return this.decoder(this.layout.decode(et,rt))}encode(et,rt,nt){return this.layout.encode(this.encoder(et),rt,nt)}getSpan(et,rt){return this.layout.getSpan(et,rt)}}function publicKey$1(tt){return new WrappedLayout$1(blob(32),et=>new PublicKey(et),et=>et.toBuffer(),tt)}struct([u32("version"),u32("state"),publicKey$1("authorizedPubkey"),publicKey$1("nonce"),struct([nu64("lamportsPerSignature")],"feeCalculator")]);new PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var browserPonyfill={exports:{}};(function(tt,et){var rt=typeof self<"u"?self:commonjsGlobal,nt=function(){function it(){this.fetch=!1,this.DOMException=rt.DOMException}return it.prototype=rt,new it}();(function(it){(function(st){var dt={searchParams:"URLSearchParams"in it,iterable:"Symbol"in it&&"iterator"in Symbol,blob:"FileReader"in it&&"Blob"in it&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in it,arrayBuffer:"ArrayBuffer"in it};function pt(ht){return ht&&DataView.prototype.isPrototypeOf(ht)}if(dt.arrayBuffer)var mt=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],yt=ArrayBuffer.isView||function(ht){return ht&&mt.indexOf(Object.prototype.toString.call(ht))>-1};function Rt(ht){if(typeof ht!="string"&&(ht=String(ht)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(ht))throw new TypeError("Invalid character in header field name");return ht.toLowerCase()}function Tt(ht){return typeof ht!="string"&&(ht=String(ht)),ht}function At(ht){var vt={next:function(){var wt=ht.shift();return{done:wt===void 0,value:wt}}};return dt.iterable&&(vt[Symbol.iterator]=function(){return vt}),vt}function xt(ht){this.map={},ht instanceof xt?ht.forEach(function(vt,wt){this.append(wt,vt)},this):Array.isArray(ht)?ht.forEach(function(vt){this.append(vt[0],vt[1])},this):ht&&Object.getOwnPropertyNames(ht).forEach(function(vt){this.append(vt,ht[vt])},this)}xt.prototype.append=function(ht,vt){ht=Rt(ht),vt=Tt(vt);var wt=this.map[ht];this.map[ht]=wt?wt+", "+vt:vt},xt.prototype.delete=function(ht){delete this.map[Rt(ht)]},xt.prototype.get=function(ht){return ht=Rt(ht),this.has(ht)?this.map[ht]:null},xt.prototype.has=function(ht){return this.map.hasOwnProperty(Rt(ht))},xt.prototype.set=function(ht,vt){this.map[Rt(ht)]=Tt(vt)},xt.prototype.forEach=function(ht,vt){for(var wt in this.map)this.map.hasOwnProperty(wt)&&ht.call(vt,this.map[wt],wt,this)},xt.prototype.keys=function(){var ht=[];return this.forEach(function(vt,wt){ht.push(wt)}),At(ht)},xt.prototype.values=function(){var ht=[];return this.forEach(function(vt){ht.push(vt)}),At(ht)},xt.prototype.entries=function(){var ht=[];return this.forEach(function(vt,wt){ht.push([wt,vt])}),At(ht)},dt.iterable&&(xt.prototype[Symbol.iterator]=xt.prototype.entries);function Nt(ht){if(ht.bodyUsed)return Promise.reject(new TypeError("Already read"));ht.bodyUsed=!0}function Ct(ht){return new Promise(function(vt,wt){ht.onload=function(){vt(ht.result)},ht.onerror=function(){wt(ht.error)}})}function Ot(ht){var vt=new FileReader,wt=Ct(vt);return vt.readAsArrayBuffer(ht),wt}function kt(ht){var vt=new FileReader,wt=Ct(vt);return vt.readAsText(ht),wt}function Pt(ht){for(var vt=new Uint8Array(ht),wt=new Array(vt.length),bt=0;bt<vt.length;bt++)wt[bt]=String.fromCharCode(vt[bt]);return wt.join("")}function Dt(ht){if(ht.slice)return ht.slice(0);var vt=new Uint8Array(ht.byteLength);return vt.set(new Uint8Array(ht)),vt.buffer}function Gt(){return this.bodyUsed=!1,this._initBody=function(ht){this._bodyInit=ht,ht?typeof ht=="string"?this._bodyText=ht:dt.blob&&Blob.prototype.isPrototypeOf(ht)?this._bodyBlob=ht:dt.formData&&FormData.prototype.isPrototypeOf(ht)?this._bodyFormData=ht:dt.searchParams&&URLSearchParams.prototype.isPrototypeOf(ht)?this._bodyText=ht.toString():dt.arrayBuffer&&dt.blob&&pt(ht)?(this._bodyArrayBuffer=Dt(ht.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):dt.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(ht)||yt(ht))?this._bodyArrayBuffer=Dt(ht):this._bodyText=ht=Object.prototype.toString.call(ht):this._bodyText="",this.headers.get("content-type")||(typeof ht=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):dt.searchParams&&URLSearchParams.prototype.isPrototypeOf(ht)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},dt.blob&&(this.blob=function(){var ht=Nt(this);if(ht)return ht;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Nt(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Ot)}),this.text=function(){var ht=Nt(this);if(ht)return ht;if(this._bodyBlob)return kt(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Pt(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},dt.formData&&(this.formData=function(){return this.text().then(er)}),this.json=function(){return this.text().then(JSON.parse)},this}var jt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Yt(ht){var vt=ht.toUpperCase();return jt.indexOf(vt)>-1?vt:ht}function tr(ht,vt){vt=vt||{};var wt=vt.body;if(ht instanceof tr){if(ht.bodyUsed)throw new TypeError("Already read");this.url=ht.url,this.credentials=ht.credentials,vt.headers||(this.headers=new xt(ht.headers)),this.method=ht.method,this.mode=ht.mode,this.signal=ht.signal,!wt&&ht._bodyInit!=null&&(wt=ht._bodyInit,ht.bodyUsed=!0)}else this.url=String(ht);if(this.credentials=vt.credentials||this.credentials||"same-origin",(vt.headers||!this.headers)&&(this.headers=new xt(vt.headers)),this.method=Yt(vt.method||this.method||"GET"),this.mode=vt.mode||this.mode||null,this.signal=vt.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&wt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(wt)}tr.prototype.clone=function(){return new tr(this,{body:this._bodyInit})};function er(ht){var vt=new FormData;return ht.trim().split("&").forEach(function(wt){if(wt){var bt=wt.split("="),$t=bt.shift().replace(/\+/g," "),Et=bt.join("=").replace(/\+/g," ");vt.append(decodeURIComponent($t),decodeURIComponent(Et))}}),vt}function lr(ht){var vt=new xt,wt=ht.replace(/\r?\n[\t ]+/g," ");return wt.split(/\r?\n/).forEach(function(bt){var $t=bt.split(":"),Et=$t.shift().trim();if(Et){var ct=$t.join(":").trim();vt.append(Et,ct)}}),vt}Gt.call(tr.prototype);function It(ht,vt){vt||(vt={}),this.type="default",this.status=vt.status===void 0?200:vt.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in vt?vt.statusText:"OK",this.headers=new xt(vt.headers),this.url=vt.url||"",this._initBody(ht)}Gt.call(It.prototype),It.prototype.clone=function(){return new It(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new xt(this.headers),url:this.url})},It.error=function(){var ht=new It(null,{status:0,statusText:""});return ht.type="error",ht};var ot=[301,302,303,307,308];It.redirect=function(ht,vt){if(ot.indexOf(vt)===-1)throw new RangeError("Invalid status code");return new It(null,{status:vt,headers:{location:ht}})},st.DOMException=it.DOMException;try{new st.DOMException}catch{st.DOMException=function(vt,wt){this.message=vt,this.name=wt;var bt=Error(vt);this.stack=bt.stack},st.DOMException.prototype=Object.create(Error.prototype),st.DOMException.prototype.constructor=st.DOMException}function ft(ht,vt){return new Promise(function(wt,bt){var $t=new tr(ht,vt);if($t.signal&&$t.signal.aborted)return bt(new st.DOMException("Aborted","AbortError"));var Et=new XMLHttpRequest;function ct(){Et.abort()}Et.onload=function(){var St={status:Et.status,statusText:Et.statusText,headers:lr(Et.getAllResponseHeaders()||"")};St.url="responseURL"in Et?Et.responseURL:St.headers.get("X-Request-URL");var Mt="response"in Et?Et.response:Et.responseText;wt(new It(Mt,St))},Et.onerror=function(){bt(new TypeError("Network request failed"))},Et.ontimeout=function(){bt(new TypeError("Network request failed"))},Et.onabort=function(){bt(new st.DOMException("Aborted","AbortError"))},Et.open($t.method,$t.url,!0),$t.credentials==="include"?Et.withCredentials=!0:$t.credentials==="omit"&&(Et.withCredentials=!1),"responseType"in Et&&dt.blob&&(Et.responseType="blob"),$t.headers.forEach(function(St,Mt){Et.setRequestHeader(Mt,St)}),$t.signal&&($t.signal.addEventListener("abort",ct),Et.onreadystatechange=function(){Et.readyState===4&&$t.signal.removeEventListener("abort",ct)}),Et.send(typeof $t._bodyInit>"u"?null:$t._bodyInit)})}return ft.polyfill=!0,it.fetch||(it.fetch=ft,it.Headers=xt,it.Request=tr,it.Response=It),st.Headers=xt,st.Request=tr,st.Response=It,st.fetch=ft,Object.defineProperty(st,"__esModule",{value:!0}),st})({})})(nt),nt.fetch.ponyfill=!0,delete nt.fetch.polyfill;var at=nt;et=at.fetch,et.default=at.fetch,et.fetch=at.fetch,et.Headers=at.Headers,et.Request=at.Request,et.Response=at.Response,tt.exports=et})(browserPonyfill,browserPonyfill.exports);dist$2.rustEnum([dist$2.struct([],"uninitialized"),dist$2.struct([dist$2.option(dist$2.publicKey(),"authorityAddress")],"buffer"),dist$2.struct([dist$2.publicKey("programdataAddress")],"program"),dist$2.struct([dist$2.u64("slot"),dist$2.option(dist$2.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,dist$2.u32());function splitArgsAndCtx(tt,et){var rt,nt;let at={};const it=tt.args?tt.args.length:0;if(et.length>it){if(et.length!==it+1)throw new Error(`provided too many arguments ${et} to instruction ${tt==null?void 0:tt.name} expecting: ${(nt=(rt=tt.args)===null||rt===void 0?void 0:rt.map(st=>st.name))!==null&&nt!==void 0?nt:[]}`);at=et.pop()}return[et,at]}class InstructionNamespaceFactory{static build(et,rt,nt){if(et.name==="_inner")throw new IdlError("the _inner name is reserved");const at=(...it)=>{const[st,dt]=splitArgsAndCtx(et,[...it]);validateAccounts(et.accounts,dt.accounts),validateInstruction(et,...it);const pt=at.accounts(dt.accounts);return dt.remainingAccounts!==void 0&&pt.push(...dt.remainingAccounts),isSet$3("debug-logs")&&console.log("Outgoing account metas:",pt),new TransactionInstruction({keys:pt,programId:nt,data:rt(et.name,toInstruction(et,...st))})};return at.accounts=it=>InstructionNamespaceFactory.accountsArray(it,et.accounts,nt,et.name),at}static accountsArray(et,rt,nt,at){return et?rt.map(it=>{if(isCompositeAccounts(it)){const yt=et[it.name];return InstructionNamespaceFactory.accountsArray(yt,it.accounts,nt,at).flat()}let st;try{st=translateAddress(et[it.name])}catch{throw new Error(`Wrong input type for account "${it.name}" in the instruction accounts object${at!==void 0?' for instruction "'+at+'"':""}. Expected PublicKey or string.`)}const dt=it.optional&&st.equals(nt),pt=!!(it.writable&&!dt),mt=!!(it.signer&&!dt);return{pubkey:st,isWritable:pt,isSigner:mt}}).flat():[]}}function validateInstruction(tt,...et){}class TransactionFactory{static build(et,rt){return(...at)=>{var it,st,dt;const[,pt]=splitArgsAndCtx(et,[...at]),mt=new Transaction;if(pt.preInstructions&&pt.instructions)throw new Error("instructions is deprecated, use preInstructions");return(it=pt.preInstructions)===null||it===void 0||it.forEach(yt=>mt.add(yt)),(st=pt.instructions)===null||st===void 0||st.forEach(yt=>mt.add(yt)),mt.add(rt(...at)),(dt=pt.postInstructions)===null||dt===void 0||dt.forEach(yt=>mt.add(yt)),mt}}}class RpcFactory{static build(et,rt,nt,at){return async(...st)=>{var dt;const pt=rt(...st),[,mt]=splitArgsAndCtx(et,[...st]);if(at.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await at.sendAndConfirm(pt,(dt=mt.signers)!==null&&dt!==void 0?dt:[],mt.options)}catch(yt){throw translateError(yt,nt)}}}}class AccountFactory{static build(et,rt,nt,at){var it;return((it=et.accounts)!==null&&it!==void 0?it:[]).reduce((st,dt)=>(st[dt.name]=new AccountClient(et,dt,nt,at,rt),st),{})}}class AccountClient{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}constructor(et,rt,nt,at,it){this._idlAccount=rt,this._programId=nt,this._provider=at??getProvider(),this._coder=it??new BorshCoder(et),this._size=this._coder.accounts.size(rt.name)}async fetchNullable(et,rt){const{data:nt}=await this.fetchNullableAndContext(et,rt);return nt}async fetchNullableAndContext(et,rt){const nt=await this.getAccountInfoAndContext(et,rt),{value:at,context:it}=nt;return{data:at&&at.data.length!==0?this._coder.accounts.decode(this._idlAccount.name,at.data):null,context:it}}async fetch(et,rt){const{data:nt}=await this.fetchNullableAndContext(et,rt);if(nt===null)throw new Error(`Account does not exist or has no data ${et.toString()}`);return nt}async fetchAndContext(et,rt){const{data:nt,context:at}=await this.fetchNullableAndContext(et,rt);if(nt===null)throw new Error(`Account does not exist ${et.toString()}`);return{data:nt,context:at}}async fetchMultiple(et,rt){return(await this.fetchMultipleAndContext(et,rt)).map(at=>at?at.data:null)}async fetchMultipleAndContext(et,rt){return(await getMultipleAccountsAndContext(this._provider.connection,et.map(at=>translateAddress(at)),rt)).map(at=>{if(at==null)return null;const{account:it,context:st}=at;return{data:this._coder.accounts.decode(this._idlAccount.name,it.data),context:st}})}async all(et){const rt=this.coder.accounts.memcmp(this._idlAccount.name,et instanceof Buffer?et:void 0),nt=[];return(rt==null?void 0:rt.offset)!=null&&(rt==null?void 0:rt.bytes)!=null&&nt.push({memcmp:{offset:rt.offset,bytes:rt.bytes}}),(rt==null?void 0:rt.dataSize)!=null&&nt.push({dataSize:rt.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...nt,...Array.isArray(et)?et:[]]})).map(({pubkey:it,account:st})=>({publicKey:it,account:this._coder.accounts.decode(this._idlAccount.name,st.data)}))}subscribe(et,rt){const nt=subscriptions.get(et.toString());if(nt)return nt.ee;const at=new EventEmitter;et=translateAddress(et);const it=this._provider.connection.onAccountChange(et,st=>{const dt=this._coder.accounts.decode(this._idlAccount.name,st.data);at.emit("change",dt)},rt);return subscriptions.set(et.toString(),{ee:at,listener:it}),at}async unsubscribe(et){let rt=subscriptions.get(et.toString());if(!rt){console.warn("Address is not subscribed");return}subscriptions&&await this._provider.connection.removeAccountChangeListener(rt.listener).then(()=>{subscriptions.delete(et.toString())}).catch(console.error)}async createInstruction(et,rt){const nt=this.size;if(this._provider.publicKey===void 0)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return SystemProgram.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:et.publicKey,space:rt??nt,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(rt??nt),programId:this._programId})}async getAccountInfo(et,rt){return await this._provider.connection.getAccountInfo(translateAddress(et),rt)}async getAccountInfoAndContext(et,rt){return await this._provider.connection.getAccountInfoAndContext(translateAddress(et),rt)}}const subscriptions=new Map,PROGRAM_LOG="Program log: ",PROGRAM_DATA="Program data: ",PROGRAM_LOG_START_INDEX=PROGRAM_LOG.length,PROGRAM_DATA_START_INDEX=PROGRAM_DATA.length;class EventManager{constructor(et,rt,nt){this._programId=et,this._provider=rt,this._eventParser=new EventParser(et,nt),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(et,rt){var nt;let at=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(et)||this._eventListeners.set(et,[]),this._eventListeners.set(et,((nt=this._eventListeners.get(et))!==null&&nt!==void 0?nt:[]).concat(at)),this._eventCallbacks.set(at,[et,rt]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(it,st)=>{if(!it.err)for(const dt of this._eventParser.parseLogs(it.logs)){const pt=this._eventListeners.get(dt.name);pt&&pt.forEach(mt=>{const yt=this._eventCallbacks.get(mt);if(yt){const[,Rt]=yt;Rt(dt.data,st.slot,it.signature)}})}})),at}async removeEventListener(et){const rt=this._eventCallbacks.get(et);if(!rt)throw new Error(`Event listener ${et} doesn't exist!`);const[nt]=rt;let at=this._eventListeners.get(nt);if(!at)throw new Error(`Event listeners don't exist for ${nt}!`);if(this._eventCallbacks.delete(et),at=at.filter(it=>it!==et),this._eventListeners.set(nt,at),at.length===0&&this._eventListeners.delete(nt),this._eventCallbacks.size===0){if(this._eventListeners.size!==0)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class EventParser{constructor(et,rt){this.coder=rt,this.programId=et}*parseLogs(et,rt=!1){const nt=new LogScanner(et),at=new ExecutionContext;let it=nt.next();for(;it!==null;){let[st,dt,pt]=this.handleLog(at,it,rt);st&&(yield st),dt&&at.push(dt),pt&&at.pop(),it=nt.next()}}handleLog(et,rt,nt){return et.stack.length>0&&et.program()===this.programId.toString()?this.handleProgramLog(rt,nt):[null,...this.handleSystemLog(rt)]}handleProgramLog(et,rt){if(et.startsWith(PROGRAM_LOG)||et.startsWith(PROGRAM_DATA)){const nt=et.startsWith(PROGRAM_LOG)?et.slice(PROGRAM_LOG_START_INDEX):et.slice(PROGRAM_DATA_START_INDEX),at=this.coder.events.decode(nt);if(rt&&at===null)throw new Error(`Unable to decode event ${nt}`);return[at,null,!1]}else return[null,...this.handleSystemLog(et)]}handleSystemLog(et){const rt=et.split(":")[0];return rt.match(/^Program (.*) success/g)!==null?[null,!0]:rt.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:rt.includes("invoke")?["cpi",!1]:[null,!1]}}class ExecutionContext{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(et){this.stack.push(et)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class LogScanner{constructor(et){this.logs=et}next(){if(this.logs.length===0)return null;let et=this.logs[0];return this.logs=this.logs.slice(1),et}}class SimulateFactory{static build(et,rt,nt,at,it,st,dt){return async(...mt)=>{var yt;const Rt=rt(...mt),[,Tt]=splitArgsAndCtx(et,[...mt]);let At;if(at.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{At=await at.simulate(Rt,Tt.signers,(yt=Tt.options)===null||yt===void 0?void 0:yt.commitment)}catch(Ct){throw translateError(Ct,nt)}if(At===void 0)throw new Error("Unable to simulate transaction");const xt=At.logs;if(!xt)throw new Error("Simulated logs not found");const Nt=[];if(dt.events){let Ct=new EventParser(st,it);for(const Ot of Ct.parseLogs(xt))Nt.push(Ot)}return{events:Nt,raw:xt}}}}function uint64(tt){return new WrappedLayout(blob(8),et=>u64$1.fromBuffer(et),et=>et.toBuffer(),tt)}function publicKey$3(tt){return new WrappedLayout(blob(32),et=>new PublicKey(et),et=>et.toBuffer(),tt)}function coption(tt,et){return new COptionLayout(tt,et)}class WrappedLayout extends Layout_2{constructor(et,rt,nt,at){super(et.span,at),this.layout=et,this.decoder=rt,this.encoder=nt}decode(et,rt){return this.decoder(this.layout.decode(et,rt))}encode(et,rt,nt){return this.layout.encode(this.encoder(et),rt,nt)}getSpan(et,rt){return this.layout.getSpan(et,rt)}}class COptionLayout extends Layout_2{constructor(et,rt){super(-1,rt),this.layout=et,this.discriminator=u32()}encode(et,rt,nt=0){return et==null?this.layout.span+this.discriminator.encode(0,rt,nt):(this.discriminator.encode(1,rt,nt),this.layout.encode(et,rt,nt+4)+4)}decode(et,rt=0){const nt=this.discriminator.decode(et,rt);if(nt===0)return null;if(nt===1)return this.layout.decode(et,rt+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(et,rt=0){return this.layout.getSpan(et,rt+4)+4}}let u64$1=class Hn extends BN{toBuffer(){const et=super.toArray().reverse(),rt=Buffer.from(et);if(rt.length===8)return rt;if(rt.length>=8)throw new Error("u64 too large");const nt=Buffer.alloc(8);return rt.copy(nt),nt}static fromBuffer(et){if(et.length!==8)throw new Error(`Invalid buffer length: ${et.length}`);return new Hn([...et].reverse().map(rt=>`00${rt.toString(16)}`.slice(-2)).join(""),16)}};const TOKEN_ACCOUNT_LAYOUT=struct([publicKey$3("mint"),publicKey$3("owner"),uint64("amount"),coption(publicKey$3(),"delegate"),(tt=>{const et=union$2(u8("discriminator"),null,tt);return et.addVariant(0,struct([]),"uninitialized"),et.addVariant(1,struct([]),"initialized"),et.addVariant(2,struct([]),"frozen"),et})("state"),coption(uint64(),"isNative"),uint64("delegatedAmount"),coption(publicKey$3(),"closeAuthority")]);function decodeTokenAccount(tt){return TOKEN_ACCOUNT_LAYOUT.decode(tt)}class AccountsResolver{constructor(et,rt,nt,at,it,st,dt,pt){this._args=et,this._accounts=rt,this._provider=nt,this._programId=at,this._idlIx=it,this._idlTypes=dt,this._customResolver=pt,this._accountStore=new AccountStore(nt,st,at)}args(et){this._args=et}async resolve(){this.resolveEventCpi(this._idlIx.accounts),this.resolveConst(this._idlIx.accounts);let et=0;for(;await this.resolvePdasAndRelations(this._idlIx.accounts)+await this.resolveCustom()>0;)if(et++,et===16)throw new Error("Reached maximum depth for account resolution")}resolveOptionals(et){Object.assign(this._accounts,this.resolveOptionalsHelper(et,this._idlIx.accounts))}get(et){const rt=et.reduce((nt,at)=>nt&&nt[at],this._accounts);if(rt&&rt.toBase58)return rt}set(et,rt){let nt=this._accounts;et.forEach((at,it)=>{var st;it===et.length-1&&(nt[at]=rt),nt[at]=(st=nt[at])!==null&&st!==void 0?st:{},nt=nt[at]})}resolveOptionalsHelper(et,rt){const nt={};for(const at of rt){const it=at.name,st=et[it];st!==void 0&&(isPartialAccounts(st)?isCompositeAccounts(at)?nt[it]=this.resolveOptionalsHelper(st,at.accounts):nt[it]=flattenPartialAccounts(st):st!==null?nt[it]=translateAddress(st):at.optional&&(nt[it]=this._programId))}return nt}async resolveCustom(){if(this._customResolver){const{accounts:et,resolved:rt}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=et,rt}return 0}resolveEventCpi(et,rt=[]){for(const nt in et){const at=et[nt];isCompositeAccounts(at)&&this.resolveEventCpi(at.accounts,[...rt,at.name]);const it=+nt+1;if(it===et.length)return;const st=et[nt].name,dt=et[it].name;if(st==="eventAuthority"&&dt==="program"){const pt=[...rt,st],mt=[...rt,dt];this.get(pt)||this.set(pt,PublicKey.findProgramAddressSync([Buffer.from("__event_authority")],this._programId)[0]),this.get(mt)||this.set(mt,this._programId);return}}}resolveConst(et,rt=[]){for(const nt of et){const at=nt.name;if(isCompositeAccounts(nt))this.resolveConst(nt.accounts,[...rt,at]);else{const it=nt;if((it.signer||it.address)&&!this.get([...rt,at])){if(it.signer){if(!this._provider.wallet)throw new Error("This function requires the `Provider` interface implementor to have a `wallet` field.");this.set([...rt,at],this._provider.wallet.publicKey)}it.address&&this.set([...rt,at],translateAddress(it.address))}}}}async resolvePdasAndRelations(et,rt=[]){let nt=0;for(const at of et){const it=at.name;if(isCompositeAccounts(at))nt+=await this.resolvePdasAndRelations(at.accounts,[...rt,it]);else{const st=at;if((st.pda||st.relations)&&!this.get([...rt,it])){nt++;try{if(st.pda){const dt=await Promise.all(st.pda.seeds.map(yt=>this.toBuffer(yt,rt)));if(dt.some(yt=>!yt))continue;const pt=await this.parseProgramId(st,rt),[mt]=PublicKey.findProgramAddressSync(dt,pt);this.set([...rt,it],mt)}}catch{}try{if(st.relations){const dt=this.get([...rt,st.relations[0]]);if(dt){const pt=await this._accountStore.fetchAccount({publicKey:dt});this.set([...rt,it],pt[it])}}}catch{}}}}return nt}async parseProgramId(et,rt=[]){var nt;if(!(!((nt=et.pda)===null||nt===void 0)&&nt.program))return this._programId;const at=await this.toBuffer(et.pda.program,rt);if(!at)throw new Error(`Program seed not resolved: ${et.name}`);return new PublicKey(at)}async toBuffer(et,rt=[]){switch(et.kind){case"const":return this.toBufferConst(et);case"arg":return await this.toBufferArg(et);case"account":return await this.toBufferAccount(et,rt);default:throw new Error(`Unexpected seed: ${et}`)}}toBufferConst(et){return this.toBufferValue("bytes",et.value)}async toBufferArg(et){const[rt,...nt]=et.path.split("."),at=this._idlIx.args.findIndex(dt=>dt.name===rt);if(at===-1)throw new Error(`Unable to find argument for seed: ${rt}`);const it=nt.reduce((dt,pt)=>(dt??{})[pt],this._args[at]);if(it===void 0)return;const st=this.getType(this._idlIx.args[at].type,nt);return this.toBufferValue(st,it)}async toBufferAccount(et,rt=[]){const[nt,...at]=et.path.split("."),it=this.get([...rt,nt]);if(!it)return;if(!at.length)return this.toBufferValue("pubkey",it);if(!et.account)throw new Error(`Seed account is required in order to resolve type: ${et.path}`);let dt=await this._accountStore.fetchAccount({publicKey:it,name:et.account}),pt=at;for(;pt.length>0;)dt=dt[pt[0]],pt=pt.slice(1);if(dt===void 0)return;const mt=this.getType({defined:{name:et.account}},at);return this.toBufferValue(mt,dt)}toBufferValue(et,rt){switch(et){case"u8":case"i8":return Buffer.from([rt]);case"u16":case"i16":return new BN(rt).toArrayLike(Buffer,"le",2);case"u32":case"i32":return new BN(rt).toArrayLike(Buffer,"le",4);case"u64":case"i64":return new BN(rt).toArrayLike(Buffer,"le",8);case"u128":case"i128":return new BN(rt).toArrayLike(Buffer,"le",16);case"u256":case"i256":return new BN(rt).toArrayLike(Buffer,"le",32);case"string":return Buffer.from(rt);case"pubkey":return rt.toBuffer();case"bytes":return Buffer.from(rt);default:if(et!=null&&et.array)return Buffer.from(rt);throw new Error(`Unexpected seed type: ${et}`)}}getType(et,rt=[]){var nt;const at=(nt=et==null?void 0:et.defined)===null||nt===void 0?void 0:nt.name;if(at){if(at==="tokenAccount")switch(rt.at(0)){case"mint":case"owner":return"pubkey";case"amount":case"delagatedAmount":return"u64";default:throw new Error(`Unknown token account path: ${rt}`)}const it=this._idlTypes.find(yt=>yt.name===at);if(!it)throw new Error(`Type not found: ${at}`);const[st,...dt]=rt,mt=it.type.fields.find(yt=>yt.name===st);if(!mt)throw new Error(`Field not found: ${st}`);return this.getType(mt.type,dt)}return et}}class AccountStore{constructor(et,rt,nt){this._provider=et,this._cache=new Map,this._idls={},this._idls[nt.toBase58()]=rt}async fetchAccount({publicKey:et,name:rt}){const nt=et.toBase58();if(!this._cache.has(nt)){const at=await this._provider.connection.getAccountInfo(et);if(at===null)throw new Error(`Account not found: ${nt}`);if(rt==="tokenAccount"){const it=decodeTokenAccount(at.data);this._cache.set(nt,it)}else{const it=await this.getAccountsNs(at.owner);if(it){const st=Object.values(it)[0];if(st){const dt=st.coder.accounts.decodeAny(at.data);this._cache.set(nt,dt)}}}}return this._cache.get(nt)}async getAccountsNs(et){const rt=et.toBase58();if(!this._idls[rt]){const nt=await Program.fetchIdl(et,this._provider);if(nt){const at=new Program(nt,this._provider);this._idls[rt]=at.account}}return this._idls[rt]}}class MethodsBuilderFactory{static build(et,rt,nt,at,it,st,dt,pt,mt,yt,Rt){return(...Tt)=>new MethodsBuilder(Tt,at,it,st,dt,pt,et,rt,nt,mt,yt,Rt)}}function isPartialAccounts(tt){return typeof tt=="object"&&tt!==null&&!("_bn"in tt)}function flattenPartialAccounts(tt,et){const rt={};for(const nt in tt){const at=tt[nt];if(at===null)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!");rt[nt]=isPartialAccounts(at)?flattenPartialAccounts(at):translateAddress(at)}return rt}class MethodsBuilder{constructor(et,rt,nt,at,it,st,dt,pt,mt,yt,Rt,Tt){this._args=et,this._ixFn=rt,this._txFn=nt,this._rpcFn=at,this._simulateFn=it,this._viewFn=st,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._resolveAccounts=!0,this._accountsResolver=new AccountsResolver(et,this._accounts,dt,pt,mt,yt,Rt,Tt)}args(et){this._args=et,this._accountsResolver.args(et)}accounts(et){return this.accountsPartial(et)}accountsPartial(et){return this._resolveAccounts=!0,this._accountsResolver.resolveOptionals(et),this}accountsStrict(et){return this._resolveAccounts=!1,this._accountsResolver.resolveOptionals(et),this}signers(et){return this._signers=this._signers.concat(et),this}remainingAccounts(et){return this._remainingAccounts=this._remainingAccounts.concat(et),this}preInstructions(et,rt=!1){return rt?this._preInstructions=et.concat(this._preInstructions):this._preInstructions=this._preInstructions.concat(et),this}postInstructions(et){return this._postInstructions=this._postInstructions.concat(et),this}async pubkeys(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._accounts}async rpc(et){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:et})}async rpcAndKeys(et){return{pubkeys:await this.pubkeys(),signature:await this.rpc(et)}}async view(et){if(this._resolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:et})}async simulate(et){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:et})}async instruction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:this._signers}}async transaction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class ViewFactory{static build(et,rt,nt,at){const it=rt.accounts.find(pt=>pt.writable),st=!!rt.returns;return it||!st?void 0:async(...pt)=>{let mt=await nt(...pt);const yt=`Program return: ${et} `;let Rt=mt.raw.find(Nt=>Nt.startsWith(yt));if(!Rt)throw new Error("View expected return log");let Tt=decode(Rt.slice(yt.length)),At=rt.returns;if(!At)throw new Error("View expected return type");return IdlCoder.fieldLayout({type:At},at.types).decode(Tt)}}}class NamespaceFactory{static build(et,rt,nt,at,it){const st={},dt={},pt={},mt={},yt={},Rt={},Tt=parseIdlErrors(et),At=et.accounts?AccountFactory.build(et,rt,nt,at):{};return et.instructions.forEach(xt=>{const Nt=InstructionNamespaceFactory.build(xt,(jt,Yt)=>rt.instruction.encode(jt,Yt),nt),Ct=TransactionFactory.build(xt,Nt),Ot=RpcFactory.build(xt,Ct,Tt,at),kt=SimulateFactory.build(xt,Ct,Tt,at,rt,nt,et),Pt=ViewFactory.build(nt,xt,kt,et),Dt=MethodsBuilderFactory.build(at,nt,xt,Nt,Ct,Ot,kt,Pt,At,et.types||[],it==null?void 0:it(xt)),Gt=xt.name;dt[Gt]=Nt,pt[Gt]=Ct,st[Gt]=Ot,mt[Gt]=kt,yt[Gt]=Dt,Pt&&(Rt[Gt]=Pt)}),[st,dt,pt,At,mt,yt,Rt]}}class Program{get programId(){return this._programId}get idl(){return this._idl}get rawIdl(){return this._rawIdl}get coder(){return this._coder}get provider(){return this._provider}constructor(et,rt=getProvider(),nt,at){const it=convertIdlToCamelCase(et);this._idl=it,this._rawIdl=et,this._provider=rt,this._programId=translateAddress(et.address),this._coder=nt??new BorshCoder(it),this._events=new EventManager(this._programId,rt,this._coder);const[st,dt,pt,mt,yt,Rt,Tt]=NamespaceFactory.build(it,this._coder,this._programId,rt,at);this.rpc=st,this.instruction=dt,this.transaction=pt,this.account=mt,this.simulate=yt,this.methods=Rt,this.views=Tt}static async at(et,rt){const nt=translateAddress(et),at=await Program.fetchIdl(nt,rt);if(!at)throw new Error(`IDL not found for program: ${et.toString()}`);return new Program(at,rt)}static async fetchIdl(et,rt){rt=rt??getProvider();const nt=translateAddress(et),at=await idlAddress(nt),it=await rt.connection.getAccountInfo(at);if(!it)return null;let st=decodeIdlAccount(it.data.slice(8));const dt=inflate_1(st.data);return JSON.parse(decode$2(dt))}addEventListener(et,rt){return this._events.addEventListener(et,rt)}async removeEventListener(et){return await this._events.removeEventListener(et)}}new PublicKey("11111111111111111111111111111111");const address="air4tyw7S12bvdRtgoLgyQXuBfoLrjBS7Fg4r91zLb1",metadata={name:"gated_airdrop",version:"0.1.0",spec:"0.1.0",description:"Created with Anchor"},instructions=[{name:"claim",discriminator:[62,198,214,193,213,159,108,210],accounts:[{name:"airdrop"},{name:"payer",writable:!0,signer:!0},{name:"mint_authority",pda:{seeds:[{kind:"account",path:"airdrop"},{kind:"const",value:[109,105,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"ticket",writable:!0,pda:{seeds:[{kind:"account",path:"airdrop"},{kind:"account",path:"recipient"},{kind:"const",value:[116,105,99,107,101,116]}]}},{name:"mint",writable:!0,relations:["airdrop"]},{name:"recipient_token_account",writable:!0,pda:{seeds:[{kind:"account",path:"recipient"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"gateway_token"},{name:"recipient",signer:!0},{name:"rent",address:"SysvarRent111111111111111111111111111111111"},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"system_program",address:"11111111111111111111111111111111"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}],args:[]},{name:"initialize",discriminator:[175,175,109,31,13,152,155,237],accounts:[{name:"airdrop",writable:!0,signer:!0},{name:"authority",writable:!0,signer:!0},{name:"rent",address:"SysvarRent111111111111111111111111111111111"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"mint",type:"pubkey"},{name:"gatekeeper_network",type:"pubkey"},{name:"amount",type:"u64"}]}],accounts=[{name:"Airdrop",discriminator:[31,112,159,158,124,237,9,241]},{name:"Ticket",discriminator:[41,228,24,165,78,90,235,200]}],types$2=[{name:"Airdrop",type:{kind:"struct",fields:[{name:"authority",type:"pubkey"},{name:"gatekeeper_network",type:"pubkey"},{name:"mint",type:"pubkey"},{name:"amount",type:"u64"}]}},{name:"Ticket",type:{kind:"struct",fields:[]}}],GatedAirdropIDL={address,metadata,instructions,accounts,types:types$2},TOKEN_PROGRAM_ID=new PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new PublicKey("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const ASSOCIATED_TOKEN_PROGRAM_ID=new PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new PublicKey("So11111111111111111111111111111111111111112");new PublicKey("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const encodeDecode=tt=>{const et=tt.decode.bind(tt),rt=tt.encode.bind(tt);return{decode:et,encode:rt}},bigInt=tt=>et=>{const rt=blob$1(tt,et),{encode:nt,decode:at}=encodeDecode(rt),it=rt;return it.decode=(st,dt)=>{const pt=at(st,dt);return toBigIntLE_1(Buffer.from(pt))},it.encode=(st,dt,pt)=>{const mt=toBufferLE_1(st,tt);return nt(mt,dt,pt)},it},u64=bigInt(8),bool=tt=>{const et=u8$1(tt),{encode:rt,decode:nt}=encodeDecode(et),at=et;return at.decode=(it,st)=>!!nt(it,st),at.encode=(it,st,dt)=>{const pt=Number(it);return rt(pt,st,dt)},at},publicKey=tt=>{const et=blob$1(32,tt),{encode:rt,decode:nt}=encodeDecode(et),at=et;return at.decode=(it,st)=>{const dt=nt(it,st);return new PublicKey(dt)},at.encode=(it,st,dt)=>{const pt=it.toBuffer();return rt(pt,st,dt)},at};class TokenError extends Error{constructor(et){super(et)}}class TokenOwnerOffCurveError extends TokenError{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}const MintLayout=struct$1([u32$1("mintAuthorityOption"),publicKey("mintAuthority"),u64("supply"),u8$1("decimals"),bool("isInitialized"),u32$1("freezeAuthorityOption"),publicKey("freezeAuthority")]);MintLayout.span;function getAssociatedTokenAddressSync(tt,et,rt=!1,nt=TOKEN_PROGRAM_ID,at=ASSOCIATED_TOKEN_PROGRAM_ID){if(!rt&&!PublicKey.isOnCurve(et.toBuffer()))throw new TokenOwnerOffCurveError;const[it]=PublicKey.findProgramAddressSync([et.toBuffer(),nt.toBuffer(),tt.toBuffer()],at);return it}function getDefaultExportFromCjs$3(tt){return tt&&tt.__esModule&&Object.prototype.hasOwnProperty.call(tt,"default")?tt.default:tt}var browser$c={exports:{}},process=browser$c.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(tt){if(cachedSetTimeout===setTimeout)return setTimeout(tt,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(tt,0);try{return cachedSetTimeout(tt,0)}catch{try{return cachedSetTimeout.call(null,tt,0)}catch{return cachedSetTimeout.call(this,tt,0)}}}function runClearTimeout(tt){if(cachedClearTimeout===clearTimeout)return clearTimeout(tt);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(tt);try{return cachedClearTimeout(tt)}catch{try{return cachedClearTimeout.call(null,tt)}catch{return cachedClearTimeout.call(this,tt)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var tt=runTimeout(cleanUpNextTick);draining=!0;for(var et=queue.length;et;){for(currentQueue=queue,queue=[];++queueIndex<et;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,et=queue.length}currentQueue=null,draining=!1,runClearTimeout(tt)}}process.nextTick=function(tt){var et=new Array(arguments.length-1);if(arguments.length>1)for(var rt=1;rt<arguments.length;rt++)et[rt-1]=arguments[rt];queue.push(new Item(tt,et)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(tt,et){this.fun=tt,this.array=et}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(tt){return[]};process.binding=function(tt){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(tt){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports=browser$c.exports;const process$1=getDefaultExportFromCjs$3(browserExports);var cryptoBrowserify={},browser$b={exports:{}},hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$b.exports;hasRequiredBrowser$b=1;var tt=65536,et=4294967295;function rt(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var nt=safeBufferExports.Buffer,at=commonjsGlobal$1.crypto||commonjsGlobal$1.msCrypto;at&&at.getRandomValues?browser$b.exports=it:browser$b.exports=rt;function it(st,dt){if(st>et)throw new RangeError("requested too many random bytes");var pt=nt.allocUnsafe(st);if(st>0)if(st>tt)for(var mt=0;mt<st;mt+=tt)at.getRandomValues(pt.slice(mt,mt+tt));else at.getRandomValues(pt);return typeof dt=="function"?process$1.nextTick(function(){dt(null,pt)}):pt}return browser$b.exports}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(et,rt){rt&&(et.super_=rt,et.prototype=Object.create(rt.prototype,{constructor:{value:et,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(et,rt){if(rt){et.super_=rt;var nt=function(){};nt.prototype=rt.prototype,et.prototype=new nt,et.prototype.constructor=et}}),inherits_browser.exports}var readableBrowser$1={exports:{}},events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var tt=typeof Reflect=="object"?Reflect:null,et=tt&&typeof tt.apply=="function"?tt.apply:function(Gt,jt,Yt){return Function.prototype.apply.call(Gt,jt,Yt)},rt;tt&&typeof tt.ownKeys=="function"?rt=tt.ownKeys:Object.getOwnPropertySymbols?rt=function(Gt){return Object.getOwnPropertyNames(Gt).concat(Object.getOwnPropertySymbols(Gt))}:rt=function(Gt){return Object.getOwnPropertyNames(Gt)};function nt(Dt){console&&console.warn&&console.warn(Dt)}var at=Number.isNaN||function(Gt){return Gt!==Gt};function it(){it.init.call(this)}events.exports=it,events.exports.once=Ot,it.EventEmitter=it,it.prototype._events=void 0,it.prototype._eventsCount=0,it.prototype._maxListeners=void 0;var st=10;function dt(Dt){if(typeof Dt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Dt)}Object.defineProperty(it,"defaultMaxListeners",{enumerable:!0,get:function(){return st},set:function(Dt){if(typeof Dt!="number"||Dt<0||at(Dt))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Dt+".");st=Dt}}),it.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},it.prototype.setMaxListeners=function(Gt){if(typeof Gt!="number"||Gt<0||at(Gt))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Gt+".");return this._maxListeners=Gt,this};function pt(Dt){return Dt._maxListeners===void 0?it.defaultMaxListeners:Dt._maxListeners}it.prototype.getMaxListeners=function(){return pt(this)},it.prototype.emit=function(Gt){for(var jt=[],Yt=1;Yt<arguments.length;Yt++)jt.push(arguments[Yt]);var tr=Gt==="error",er=this._events;if(er!==void 0)tr=tr&&er.error===void 0;else if(!tr)return!1;if(tr){var lr;if(jt.length>0&&(lr=jt[0]),lr instanceof Error)throw lr;var It=new Error("Unhandled error."+(lr?" ("+lr.message+")":""));throw It.context=lr,It}var ot=er[Gt];if(ot===void 0)return!1;if(typeof ot=="function")et(ot,this,jt);else for(var ft=ot.length,ht=xt(ot,ft),Yt=0;Yt<ft;++Yt)et(ht[Yt],this,jt);return!0};function mt(Dt,Gt,jt,Yt){var tr,er,lr;if(dt(jt),er=Dt._events,er===void 0?(er=Dt._events=Object.create(null),Dt._eventsCount=0):(er.newListener!==void 0&&(Dt.emit("newListener",Gt,jt.listener?jt.listener:jt),er=Dt._events),lr=er[Gt]),lr===void 0)lr=er[Gt]=jt,++Dt._eventsCount;else if(typeof lr=="function"?lr=er[Gt]=Yt?[jt,lr]:[lr,jt]:Yt?lr.unshift(jt):lr.push(jt),tr=pt(Dt),tr>0&&lr.length>tr&&!lr.warned){lr.warned=!0;var It=new Error("Possible EventEmitter memory leak detected. "+lr.length+" "+String(Gt)+" listeners added. Use emitter.setMaxListeners() to increase limit");It.name="MaxListenersExceededWarning",It.emitter=Dt,It.type=Gt,It.count=lr.length,nt(It)}return Dt}it.prototype.addListener=function(Gt,jt){return mt(this,Gt,jt,!1)},it.prototype.on=it.prototype.addListener,it.prototype.prependListener=function(Gt,jt){return mt(this,Gt,jt,!0)};function yt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Rt(Dt,Gt,jt){var Yt={fired:!1,wrapFn:void 0,target:Dt,type:Gt,listener:jt},tr=yt.bind(Yt);return tr.listener=jt,Yt.wrapFn=tr,tr}it.prototype.once=function(Gt,jt){return dt(jt),this.on(Gt,Rt(this,Gt,jt)),this},it.prototype.prependOnceListener=function(Gt,jt){return dt(jt),this.prependListener(Gt,Rt(this,Gt,jt)),this},it.prototype.removeListener=function(Gt,jt){var Yt,tr,er,lr,It;if(dt(jt),tr=this._events,tr===void 0)return this;if(Yt=tr[Gt],Yt===void 0)return this;if(Yt===jt||Yt.listener===jt)--this._eventsCount===0?this._events=Object.create(null):(delete tr[Gt],tr.removeListener&&this.emit("removeListener",Gt,Yt.listener||jt));else if(typeof Yt!="function"){for(er=-1,lr=Yt.length-1;lr>=0;lr--)if(Yt[lr]===jt||Yt[lr].listener===jt){It=Yt[lr].listener,er=lr;break}if(er<0)return this;er===0?Yt.shift():Nt(Yt,er),Yt.length===1&&(tr[Gt]=Yt[0]),tr.removeListener!==void 0&&this.emit("removeListener",Gt,It||jt)}return this},it.prototype.off=it.prototype.removeListener,it.prototype.removeAllListeners=function(Gt){var jt,Yt,tr;if(Yt=this._events,Yt===void 0)return this;if(Yt.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Yt[Gt]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Yt[Gt]),this;if(arguments.length===0){var er=Object.keys(Yt),lr;for(tr=0;tr<er.length;++tr)lr=er[tr],lr!=="removeListener"&&this.removeAllListeners(lr);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(jt=Yt[Gt],typeof jt=="function")this.removeListener(Gt,jt);else if(jt!==void 0)for(tr=jt.length-1;tr>=0;tr--)this.removeListener(Gt,jt[tr]);return this};function Tt(Dt,Gt,jt){var Yt=Dt._events;if(Yt===void 0)return[];var tr=Yt[Gt];return tr===void 0?[]:typeof tr=="function"?jt?[tr.listener||tr]:[tr]:jt?Ct(tr):xt(tr,tr.length)}it.prototype.listeners=function(Gt){return Tt(this,Gt,!0)},it.prototype.rawListeners=function(Gt){return Tt(this,Gt,!1)},it.listenerCount=function(Dt,Gt){return typeof Dt.listenerCount=="function"?Dt.listenerCount(Gt):At.call(Dt,Gt)},it.prototype.listenerCount=At;function At(Dt){var Gt=this._events;if(Gt!==void 0){var jt=Gt[Dt];if(typeof jt=="function")return 1;if(jt!==void 0)return jt.length}return 0}it.prototype.eventNames=function(){return this._eventsCount>0?rt(this._events):[]};function xt(Dt,Gt){for(var jt=new Array(Gt),Yt=0;Yt<Gt;++Yt)jt[Yt]=Dt[Yt];return jt}function Nt(Dt,Gt){for(;Gt+1<Dt.length;Gt++)Dt[Gt]=Dt[Gt+1];Dt.pop()}function Ct(Dt){for(var Gt=new Array(Dt.length),jt=0;jt<Gt.length;++jt)Gt[jt]=Dt[jt].listener||Dt[jt];return Gt}function Ot(Dt,Gt){return new Promise(function(jt,Yt){function tr(lr){Dt.removeListener(Gt,er),Yt(lr)}function er(){typeof Dt.removeListener=="function"&&Dt.removeListener("error",tr),jt([].slice.call(arguments))}Pt(Dt,Gt,er,{once:!0}),Gt!=="error"&&kt(Dt,tr,{once:!0})})}function kt(Dt,Gt,jt){typeof Dt.on=="function"&&Pt(Dt,"error",Gt,jt)}function Pt(Dt,Gt,jt,Yt){if(typeof Dt.on=="function")Yt.once?Dt.once(Gt,jt):Dt.on(Gt,jt);else if(typeof Dt.addEventListener=="function")Dt.addEventListener(Gt,function tr(er){Yt.once&&Dt.removeEventListener(Gt,tr),jt(er)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Dt)}return events.exports}var streamBrowser$1,hasRequiredStreamBrowser$1;function requireStreamBrowser$1(){return hasRequiredStreamBrowser$1||(hasRequiredStreamBrowser$1=1,streamBrowser$1=requireEvents().EventEmitter),streamBrowser$1}var util$2={},types$1={},shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var et={},rt=Symbol("test"),nt=Object(rt);if(typeof rt=="string"||Object.prototype.toString.call(rt)!=="[object Symbol]"||Object.prototype.toString.call(nt)!=="[object Symbol]")return!1;var at=42;et[rt]=at;for(rt in et)return!1;if(typeof Object.keys=="function"&&Object.keys(et).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(et).length!==0)return!1;var it=Object.getOwnPropertySymbols(et);if(it.length!==1||it[0]!==rt||!Object.prototype.propertyIsEnumerable.call(et,rt))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var st=Object.getOwnPropertyDescriptor(et,rt);if(st.value!==at||st.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var tt=requireShams$1();return shams=function(){return tt()&&!!Symbol.toStringTag},shams}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range$1,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range$1=RangeError),range$1}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var type$6,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type$6=TypeError),type$6}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var tt=typeof Symbol<"u"&&Symbol,et=requireShams$1();return hasSymbols=function(){return typeof tt!="function"||typeof Symbol!="function"||typeof tt("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:et()},hasSymbols}var hasProto,hasRequiredHasProto;function requireHasProto(){if(hasRequiredHasProto)return hasProto;hasRequiredHasProto=1;var tt={__proto__:null,foo:{}},et=Object;return hasProto=function(){return{__proto__:tt}.foo===tt.foo&&!(tt instanceof et)},hasProto}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var tt="Function.prototype.bind called on incompatible ",et=Object.prototype.toString,rt=Math.max,nt="[object Function]",at=function(pt,mt){for(var yt=[],Rt=0;Rt<pt.length;Rt+=1)yt[Rt]=pt[Rt];for(var Tt=0;Tt<mt.length;Tt+=1)yt[Tt+pt.length]=mt[Tt];return yt},it=function(pt,mt){for(var yt=[],Rt=mt,Tt=0;Rt<pt.length;Rt+=1,Tt+=1)yt[Tt]=pt[Rt];return yt},st=function(dt,pt){for(var mt="",yt=0;yt<dt.length;yt+=1)mt+=dt[yt],yt+1<dt.length&&(mt+=pt);return mt};return implementation=function(pt){var mt=this;if(typeof mt!="function"||et.apply(mt)!==nt)throw new TypeError(tt+mt);for(var yt=it(arguments,1),Rt,Tt=function(){if(this instanceof Rt){var Ot=mt.apply(this,at(yt,arguments));return Object(Ot)===Ot?Ot:this}return mt.apply(pt,at(yt,arguments))},At=rt(0,mt.length-yt.length),xt=[],Nt=0;Nt<At;Nt++)xt[Nt]="$"+Nt;if(Rt=Function("binder","return function ("+st(xt,",")+"){ return binder.apply(this,arguments); }")(Tt),mt.prototype){var Ct=function(){};Ct.prototype=mt.prototype,Rt.prototype=new Ct,Ct.prototype=null}return Rt},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var tt=requireImplementation();return functionBind=Function.prototype.bind||tt,functionBind}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var tt=Function.prototype.call,et=Object.prototype.hasOwnProperty,rt=requireFunctionBind();return hasown=rt.call(tt,et),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var tt,et=requireEsErrors(),rt=require_eval(),nt=requireRange(),at=requireRef(),it=requireSyntax(),st=requireType(),dt=requireUri(),pt=Function,mt=function(bt){try{return pt('"use strict"; return ('+bt+").constructor;")()}catch{}},yt=Object.getOwnPropertyDescriptor;if(yt)try{yt({},"")}catch{yt=null}var Rt=function(){throw new st},Tt=yt?function(){try{return arguments.callee,Rt}catch{try{return yt(arguments,"callee").get}catch{return Rt}}}():Rt,At=requireHasSymbols()(),xt=requireHasProto()(),Nt=Object.getPrototypeOf||(xt?function(bt){return bt.__proto__}:null),Ct={},Ot=typeof Uint8Array>"u"||!Nt?tt:Nt(Uint8Array),kt={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?tt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?tt:ArrayBuffer,"%ArrayIteratorPrototype%":At&&Nt?Nt([][Symbol.iterator]()):tt,"%AsyncFromSyncIteratorPrototype%":tt,"%AsyncFunction%":Ct,"%AsyncGenerator%":Ct,"%AsyncGeneratorFunction%":Ct,"%AsyncIteratorPrototype%":Ct,"%Atomics%":typeof Atomics>"u"?tt:Atomics,"%BigInt%":typeof BigInt>"u"?tt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?tt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?tt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?tt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":et,"%eval%":eval,"%EvalError%":rt,"%Float32Array%":typeof Float32Array>"u"?tt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?tt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?tt:FinalizationRegistry,"%Function%":pt,"%GeneratorFunction%":Ct,"%Int8Array%":typeof Int8Array>"u"?tt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?tt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?tt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":At&&Nt?Nt(Nt([][Symbol.iterator]())):tt,"%JSON%":typeof JSON=="object"?JSON:tt,"%Map%":typeof Map>"u"?tt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!At||!Nt?tt:Nt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?tt:Promise,"%Proxy%":typeof Proxy>"u"?tt:Proxy,"%RangeError%":nt,"%ReferenceError%":at,"%Reflect%":typeof Reflect>"u"?tt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?tt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!At||!Nt?tt:Nt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?tt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":At&&Nt?Nt(""[Symbol.iterator]()):tt,"%Symbol%":At?Symbol:tt,"%SyntaxError%":it,"%ThrowTypeError%":Tt,"%TypedArray%":Ot,"%TypeError%":st,"%Uint8Array%":typeof Uint8Array>"u"?tt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?tt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?tt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?tt:Uint32Array,"%URIError%":dt,"%WeakMap%":typeof WeakMap>"u"?tt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?tt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?tt:WeakSet};if(Nt)try{null.error}catch(bt){var Pt=Nt(Nt(bt));kt["%Error.prototype%"]=Pt}var Dt=function bt($t){var Et;if($t==="%AsyncFunction%")Et=mt("async function () {}");else if($t==="%GeneratorFunction%")Et=mt("function* () {}");else if($t==="%AsyncGeneratorFunction%")Et=mt("async function* () {}");else if($t==="%AsyncGenerator%"){var ct=bt("%AsyncGeneratorFunction%");ct&&(Et=ct.prototype)}else if($t==="%AsyncIteratorPrototype%"){var St=bt("%AsyncGenerator%");St&&Nt&&(Et=Nt(St.prototype))}return kt[$t]=Et,Et},Gt={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},jt=requireFunctionBind(),Yt=requireHasown(),tr=jt.call(Function.call,Array.prototype.concat),er=jt.call(Function.apply,Array.prototype.splice),lr=jt.call(Function.call,String.prototype.replace),It=jt.call(Function.call,String.prototype.slice),ot=jt.call(Function.call,RegExp.prototype.exec),ft=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ht=/\\(\\)?/g,vt=function($t){var Et=It($t,0,1),ct=It($t,-1);if(Et==="%"&&ct!=="%")throw new it("invalid intrinsic syntax, expected closing `%`");if(ct==="%"&&Et!=="%")throw new it("invalid intrinsic syntax, expected opening `%`");var St=[];return lr($t,ft,function(Mt,Lt,Ut,Kt){St[St.length]=Ut?lr(Kt,ht,"$1"):Lt||Mt}),St},wt=function($t,Et){var ct=$t,St;if(Yt(Gt,ct)&&(St=Gt[ct],ct="%"+St[0]+"%"),Yt(kt,ct)){var Mt=kt[ct];if(Mt===Ct&&(Mt=Dt(ct)),typeof Mt>"u"&&!Et)throw new st("intrinsic "+$t+" exists, but is not available. Please file an issue!");return{alias:St,name:ct,value:Mt}}throw new it("intrinsic "+$t+" does not exist!")};return getIntrinsic=function($t,Et){if(typeof $t!="string"||$t.length===0)throw new st("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Et!="boolean")throw new st('"allowMissing" argument must be a boolean');if(ot(/^%?[^%]*%?$/,$t)===null)throw new it("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ct=vt($t),St=ct.length>0?ct[0]:"",Mt=wt("%"+St+"%",Et),Lt=Mt.name,Ut=Mt.value,Kt=!1,Ht=Mt.alias;Ht&&(St=Ht[0],er(ct,tr([0,1],Ht)));for(var Ft=1,zt=!0;Ft<ct.length;Ft+=1){var ir=ct[Ft],sr=It(ir,0,1),ar=It(ir,-1);if((sr==='"'||sr==="'"||sr==="`"||ar==='"'||ar==="'"||ar==="`")&&sr!==ar)throw new it("property names with quotes must have matching quotes");if((ir==="constructor"||!zt)&&(Kt=!0),St+="."+ir,Lt="%"+St+"%",Yt(kt,Lt))Ut=kt[Lt];else if(Ut!=null){if(!(ir in Ut)){if(!Et)throw new st("base intrinsic for "+$t+" exists, but the property is not available.");return}if(yt&&Ft+1>=ct.length){var Vt=yt(Ut,ir);zt=!!Vt,zt&&"get"in Vt&&!("originalValue"in Vt.get)?Ut=Vt.get:Ut=Ut[ir]}else zt=Yt(Ut,ir),Ut=Ut[ir];zt&&!Kt&&(kt[Lt]=Ut)}}return Ut},getIntrinsic}var callBind={exports:{}},esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var tt=requireGetIntrinsic(),et=tt("%Object.defineProperty%",!0)||!1;if(et)try{et({},"a",{value:1})}catch{et=!1}return esDefineProperty=et,esDefineProperty}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var tt=requireGetIntrinsic(),et=tt("%Object.getOwnPropertyDescriptor%",!0);if(et)try{et([],"length")}catch{et=null}return gopd=et,gopd}var defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var tt=requireEsDefineProperty(),et=requireSyntax(),rt=requireType(),nt=requireGopd();return defineDataProperty=function(it,st,dt){if(!it||typeof it!="object"&&typeof it!="function")throw new rt("`obj` must be an object or a function`");if(typeof st!="string"&&typeof st!="symbol")throw new rt("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new rt("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new rt("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new rt("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new rt("`loose`, if provided, must be a boolean");var pt=arguments.length>3?arguments[3]:null,mt=arguments.length>4?arguments[4]:null,yt=arguments.length>5?arguments[5]:null,Rt=arguments.length>6?arguments[6]:!1,Tt=!!nt&&nt(it,st);if(tt)tt(it,st,{configurable:yt===null&&Tt?Tt.configurable:!yt,enumerable:pt===null&&Tt?Tt.enumerable:!pt,value:dt,writable:mt===null&&Tt?Tt.writable:!mt});else if(Rt||!pt&&!mt&&!yt)it[st]=dt;else throw new et("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var tt=requireEsDefineProperty(),et=function(){return!!tt};return et.hasArrayLengthDefineBug=function(){if(!tt)return null;try{return tt([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=et,hasPropertyDescriptors_1}var setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var tt=requireGetIntrinsic(),et=requireDefineDataProperty(),rt=requireHasPropertyDescriptors()(),nt=requireGopd(),at=requireType(),it=tt("%Math.floor%");return setFunctionLength=function(dt,pt){if(typeof dt!="function")throw new at("`fn` is not a function");if(typeof pt!="number"||pt<0||pt>4294967295||it(pt)!==pt)throw new at("`length` must be a positive 32-bit integer");var mt=arguments.length>2&&!!arguments[2],yt=!0,Rt=!0;if("length"in dt&&nt){var Tt=nt(dt,"length");Tt&&!Tt.configurable&&(yt=!1),Tt&&!Tt.writable&&(Rt=!1)}return(yt||Rt||!mt)&&(rt?et(dt,"length",pt,!0,!0):et(dt,"length",pt)),dt},setFunctionLength}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(tt){var et=requireFunctionBind(),rt=requireGetIntrinsic(),nt=requireSetFunctionLength(),at=requireType(),it=rt("%Function.prototype.apply%"),st=rt("%Function.prototype.call%"),dt=rt("%Reflect.apply%",!0)||et.call(st,it),pt=requireEsDefineProperty(),mt=rt("%Math.max%");tt.exports=function(Tt){if(typeof Tt!="function")throw new at("a function is required");var At=dt(et,st,arguments);return nt(At,1+mt(0,Tt.length-(arguments.length-1)),!0)};var yt=function(){return dt(et,it,arguments)};pt?pt(tt.exports,"apply",{value:yt}):tt.exports.apply=yt}(callBind)),callBind.exports}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var tt=requireGetIntrinsic(),et=requireCallBind(),rt=et(tt("String.prototype.indexOf"));return callBound=function(at,it){var st=tt(at,!!it);return typeof st=="function"&&rt(at,".prototype.")>-1?et(st):st},callBound}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var tt=requireShams()(),et=requireCallBound(),rt=et("Object.prototype.toString"),nt=function(dt){return tt&&dt&&typeof dt=="object"&&Symbol.toStringTag in dt?!1:rt(dt)==="[object Arguments]"},at=function(dt){return nt(dt)?!0:dt!==null&&typeof dt=="object"&&typeof dt.length=="number"&&dt.length>=0&&rt(dt)!=="[object Array]"&&rt(dt.callee)==="[object Function]"},it=function(){return nt(arguments)}();return nt.isLegacyArguments=at,isArguments=it?nt:at,isArguments}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var tt=Object.prototype.toString,et=Function.prototype.toString,rt=/^\s*(?:function)?\*/,nt=requireShams()(),at=Object.getPrototypeOf,it=function(){if(!nt)return!1;try{return Function("return function*() {}")()}catch{}},st;return isGeneratorFunction=function(pt){if(typeof pt!="function")return!1;if(rt.test(et.call(pt)))return!0;if(!nt){var mt=tt.call(pt);return mt==="[object GeneratorFunction]"}if(!at)return!1;if(typeof st>"u"){var yt=it();st=yt?at(yt):!1}return at(pt)===st},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var tt=Function.prototype.toString,et=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,rt,nt;if(typeof et=="function"&&typeof Object.defineProperty=="function")try{rt=Object.defineProperty({},"length",{get:function(){throw nt}}),nt={},et(function(){throw 42},null,rt)}catch(kt){kt!==nt&&(et=null)}else et=null;var at=/^\s*class\b/,it=function(Pt){try{var Dt=tt.call(Pt);return at.test(Dt)}catch{return!1}},st=function(Pt){try{return it(Pt)?!1:(tt.call(Pt),!0)}catch{return!1}},dt=Object.prototype.toString,pt="[object Object]",mt="[object Function]",yt="[object GeneratorFunction]",Rt="[object HTMLAllCollection]",Tt="[object HTML document.all class]",At="[object HTMLCollection]",xt=typeof Symbol=="function"&&!!Symbol.toStringTag,Nt=!(0 in[,]),Ct=function(){return!1};if(typeof document=="object"){var Ot=document.all;dt.call(Ot)===dt.call(document.all)&&(Ct=function(Pt){if((Nt||!Pt)&&(typeof Pt>"u"||typeof Pt=="object"))try{var Dt=dt.call(Pt);return(Dt===Rt||Dt===Tt||Dt===At||Dt===pt)&&Pt("")==null}catch{}return!1})}return isCallable=et?function(Pt){if(Ct(Pt))return!0;if(!Pt||typeof Pt!="function"&&typeof Pt!="object")return!1;try{et(Pt,null,rt)}catch(Dt){if(Dt!==nt)return!1}return!it(Pt)&&st(Pt)}:function(Pt){if(Ct(Pt))return!0;if(!Pt||typeof Pt!="function"&&typeof Pt!="object")return!1;if(xt)return st(Pt);if(it(Pt))return!1;var Dt=dt.call(Pt);return Dt!==mt&&Dt!==yt&&!/^\[object HTML/.test(Dt)?!1:st(Pt)},isCallable}var forEach_1$1,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach_1$1;hasRequiredForEach=1;var tt=requireIsCallable(),et=Object.prototype.toString,rt=Object.prototype.hasOwnProperty,nt=function(pt,mt,yt){for(var Rt=0,Tt=pt.length;Rt<Tt;Rt++)rt.call(pt,Rt)&&(yt==null?mt(pt[Rt],Rt,pt):mt.call(yt,pt[Rt],Rt,pt))},at=function(pt,mt,yt){for(var Rt=0,Tt=pt.length;Rt<Tt;Rt++)yt==null?mt(pt.charAt(Rt),Rt,pt):mt.call(yt,pt.charAt(Rt),Rt,pt)},it=function(pt,mt,yt){for(var Rt in pt)rt.call(pt,Rt)&&(yt==null?mt(pt[Rt],Rt,pt):mt.call(yt,pt[Rt],Rt,pt))},st=function(pt,mt,yt){if(!tt(mt))throw new TypeError("iterator must be a function");var Rt;arguments.length>=3&&(Rt=yt),et.call(pt)==="[object Array]"?nt(pt,mt,Rt):typeof pt=="string"?at(pt,mt,Rt):it(pt,mt,Rt)};return forEach_1$1=st,forEach_1$1}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var tt=requirePossibleTypedArrayNames(),et=typeof globalThis>"u"?commonjsGlobal$1:globalThis;return availableTypedArrays=function(){for(var nt=[],at=0;at<tt.length;at++)typeof et[tt[at]]=="function"&&(nt[nt.length]=tt[at]);return nt},availableTypedArrays}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var tt=requireForEach(),et=requireAvailableTypedArrays(),rt=requireCallBind(),nt=requireCallBound(),at=requireGopd(),it=nt("Object.prototype.toString"),st=requireShams()(),dt=typeof globalThis>"u"?commonjsGlobal$1:globalThis,pt=et(),mt=nt("String.prototype.slice"),yt=Object.getPrototypeOf,Rt=nt("Array.prototype.indexOf",!0)||function(Ct,Ot){for(var kt=0;kt<Ct.length;kt+=1)if(Ct[kt]===Ot)return kt;return-1},Tt={__proto__:null};st&&at&&yt?tt(pt,function(Nt){var Ct=new dt[Nt];if(Symbol.toStringTag in Ct){var Ot=yt(Ct),kt=at(Ot,Symbol.toStringTag);if(!kt){var Pt=yt(Ot);kt=at(Pt,Symbol.toStringTag)}Tt["$"+Nt]=rt(kt.get)}}):tt(pt,function(Nt){var Ct=new dt[Nt],Ot=Ct.slice||Ct.set;Ot&&(Tt["$"+Nt]=rt(Ot))});var At=function(Ct){var Ot=!1;return tt(Tt,function(kt,Pt){if(!Ot)try{"$"+kt(Ct)===Pt&&(Ot=mt(Pt,1))}catch{}}),Ot},xt=function(Ct){var Ot=!1;return tt(Tt,function(kt,Pt){if(!Ot)try{kt(Ct),Ot=mt(Pt,1)}catch{}}),Ot};return whichTypedArray=function(Ct){if(!Ct||typeof Ct!="object")return!1;if(!st){var Ot=mt(it(Ct),8,-1);return Rt(pt,Ot)>-1?Ot:Ot!=="Object"?!1:xt(Ct)}return at?At(Ct):null},whichTypedArray}var isTypedArray,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var tt=requireWhichTypedArray();return isTypedArray=function(rt){return!!tt(rt)},isTypedArray}var hasRequiredTypes$1;function requireTypes$1(){return hasRequiredTypes$1||(hasRequiredTypes$1=1,function(tt){var et=requireIsArguments(),rt=requireIsGeneratorFunction(),nt=requireWhichTypedArray(),at=requireIsTypedArray();function it(hr){return hr.call.bind(hr)}var st=typeof BigInt<"u",dt=typeof Symbol<"u",pt=it(Object.prototype.toString),mt=it(Number.prototype.valueOf),yt=it(String.prototype.valueOf),Rt=it(Boolean.prototype.valueOf);if(st)var Tt=it(BigInt.prototype.valueOf);if(dt)var At=it(Symbol.prototype.valueOf);function xt(hr,Wr){if(typeof hr!="object")return!1;try{return Wr(hr),!0}catch{return!1}}tt.isArgumentsObject=et,tt.isGeneratorFunction=rt,tt.isTypedArray=at;function Nt(hr){return typeof Promise<"u"&&hr instanceof Promise||hr!==null&&typeof hr=="object"&&typeof hr.then=="function"&&typeof hr.catch=="function"}tt.isPromise=Nt;function Ct(hr){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(hr):at(hr)||Lt(hr)}tt.isArrayBufferView=Ct;function Ot(hr){return nt(hr)==="Uint8Array"}tt.isUint8Array=Ot;function kt(hr){return nt(hr)==="Uint8ClampedArray"}tt.isUint8ClampedArray=kt;function Pt(hr){return nt(hr)==="Uint16Array"}tt.isUint16Array=Pt;function Dt(hr){return nt(hr)==="Uint32Array"}tt.isUint32Array=Dt;function Gt(hr){return nt(hr)==="Int8Array"}tt.isInt8Array=Gt;function jt(hr){return nt(hr)==="Int16Array"}tt.isInt16Array=jt;function Yt(hr){return nt(hr)==="Int32Array"}tt.isInt32Array=Yt;function tr(hr){return nt(hr)==="Float32Array"}tt.isFloat32Array=tr;function er(hr){return nt(hr)==="Float64Array"}tt.isFloat64Array=er;function lr(hr){return nt(hr)==="BigInt64Array"}tt.isBigInt64Array=lr;function It(hr){return nt(hr)==="BigUint64Array"}tt.isBigUint64Array=It;function ot(hr){return pt(hr)==="[object Map]"}ot.working=typeof Map<"u"&&ot(new Map);function ft(hr){return typeof Map>"u"?!1:ot.working?ot(hr):hr instanceof Map}tt.isMap=ft;function ht(hr){return pt(hr)==="[object Set]"}ht.working=typeof Set<"u"&&ht(new Set);function vt(hr){return typeof Set>"u"?!1:ht.working?ht(hr):hr instanceof Set}tt.isSet=vt;function wt(hr){return pt(hr)==="[object WeakMap]"}wt.working=typeof WeakMap<"u"&&wt(new WeakMap);function bt(hr){return typeof WeakMap>"u"?!1:wt.working?wt(hr):hr instanceof WeakMap}tt.isWeakMap=bt;function $t(hr){return pt(hr)==="[object WeakSet]"}$t.working=typeof WeakSet<"u"&&$t(new WeakSet);function Et(hr){return $t(hr)}tt.isWeakSet=Et;function ct(hr){return pt(hr)==="[object ArrayBuffer]"}ct.working=typeof ArrayBuffer<"u"&&ct(new ArrayBuffer);function St(hr){return typeof ArrayBuffer>"u"?!1:ct.working?ct(hr):hr instanceof ArrayBuffer}tt.isArrayBuffer=St;function Mt(hr){return pt(hr)==="[object DataView]"}Mt.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Mt(new DataView(new ArrayBuffer(1),0,1));function Lt(hr){return typeof DataView>"u"?!1:Mt.working?Mt(hr):hr instanceof DataView}tt.isDataView=Lt;var Ut=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Kt(hr){return pt(hr)==="[object SharedArrayBuffer]"}function Ht(hr){return typeof Ut>"u"?!1:(typeof Kt.working>"u"&&(Kt.working=Kt(new Ut)),Kt.working?Kt(hr):hr instanceof Ut)}tt.isSharedArrayBuffer=Ht;function Ft(hr){return pt(hr)==="[object AsyncFunction]"}tt.isAsyncFunction=Ft;function zt(hr){return pt(hr)==="[object Map Iterator]"}tt.isMapIterator=zt;function ir(hr){return pt(hr)==="[object Set Iterator]"}tt.isSetIterator=ir;function sr(hr){return pt(hr)==="[object Generator]"}tt.isGeneratorObject=sr;function ar(hr){return pt(hr)==="[object WebAssembly.Module]"}tt.isWebAssemblyCompiledModule=ar;function Vt(hr){return xt(hr,mt)}tt.isNumberObject=Vt;function fr(hr){return xt(hr,yt)}tt.isStringObject=fr;function Gr(hr){return xt(hr,Rt)}tt.isBooleanObject=Gr;function ur(hr){return st&&xt(hr,Tt)}tt.isBigIntObject=ur;function pr(hr){return dt&&xt(hr,At)}tt.isSymbolObject=pr;function Fr(hr){return Vt(hr)||fr(hr)||Gr(hr)||ur(hr)||pr(hr)}tt.isBoxedPrimitive=Fr;function yr(hr){return typeof Uint8Array<"u"&&(St(hr)||Ht(hr))}tt.isAnyArrayBuffer=yr,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(hr){Object.defineProperty(tt,hr,{enumerable:!1,value:function(){throw new Error(hr+" is not supported in userland")}})})}(types$1)),types$1}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(et){return et&&typeof et=="object"&&typeof et.copy=="function"&&typeof et.fill=="function"&&typeof et.readUInt8=="function"}),isBufferBrowser}var hasRequiredUtil$2;function requireUtil$2(){return hasRequiredUtil$2||(hasRequiredUtil$2=1,function(tt){var et={},rt=Object.getOwnPropertyDescriptors||function(Ut){for(var Kt=Object.keys(Ut),Ht={},Ft=0;Ft<Kt.length;Ft++)Ht[Kt[Ft]]=Object.getOwnPropertyDescriptor(Ut,Kt[Ft]);return Ht},nt=/%[sdj%]/g;tt.format=function(Lt){if(!jt(Lt)){for(var Ut=[],Kt=0;Kt<arguments.length;Kt++)Ut.push(dt(arguments[Kt]));return Ut.join(" ")}for(var Kt=1,Ht=arguments,Ft=Ht.length,zt=String(Lt).replace(nt,function(sr){if(sr==="%%")return"%";if(Kt>=Ft)return sr;switch(sr){case"%s":return String(Ht[Kt++]);case"%d":return Number(Ht[Kt++]);case"%j":try{return JSON.stringify(Ht[Kt++])}catch{return"[Circular]"}default:return sr}}),ir=Ht[Kt];Kt<Ft;ir=Ht[++Kt])Pt(ir)||!lr(ir)?zt+=" "+ir:zt+=" "+dt(ir);return zt},tt.deprecate=function(Lt,Ut){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return Lt;if(typeof process$1>"u")return function(){return tt.deprecate(Lt,Ut).apply(this,arguments)};var Kt=!1;function Ht(){if(!Kt){if(process$1.throwDeprecation)throw new Error(Ut);process$1.traceDeprecation?console.trace(Ut):console.error(Ut),Kt=!0}return Lt.apply(this,arguments)}return Ht};var at={},it=/^$/;if(et.NODE_DEBUG){var st=et.NODE_DEBUG;st=st.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),it=new RegExp("^"+st+"$","i")}tt.debuglog=function(Lt){if(Lt=Lt.toUpperCase(),!at[Lt])if(it.test(Lt)){var Ut=process$1.pid;at[Lt]=function(){var Kt=tt.format.apply(tt,arguments);console.error("%s %d: %s",Lt,Ut,Kt)}}else at[Lt]=function(){};return at[Lt]};function dt(Lt,Ut){var Kt={seen:[],stylize:mt};return arguments.length>=3&&(Kt.depth=arguments[2]),arguments.length>=4&&(Kt.colors=arguments[3]),kt(Ut)?Kt.showHidden=Ut:Ut&&tt._extend(Kt,Ut),tr(Kt.showHidden)&&(Kt.showHidden=!1),tr(Kt.depth)&&(Kt.depth=2),tr(Kt.colors)&&(Kt.colors=!1),tr(Kt.customInspect)&&(Kt.customInspect=!0),Kt.colors&&(Kt.stylize=pt),Rt(Kt,Lt,Kt.depth)}tt.inspect=dt,dt.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},dt.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function pt(Lt,Ut){var Kt=dt.styles[Ut];return Kt?"\x1B["+dt.colors[Kt][0]+"m"+Lt+"\x1B["+dt.colors[Kt][1]+"m":Lt}function mt(Lt,Ut){return Lt}function yt(Lt){var Ut={};return Lt.forEach(function(Kt,Ht){Ut[Kt]=!0}),Ut}function Rt(Lt,Ut,Kt){if(Lt.customInspect&&Ut&&ft(Ut.inspect)&&Ut.inspect!==tt.inspect&&!(Ut.constructor&&Ut.constructor.prototype===Ut)){var Ht=Ut.inspect(Kt,Lt);return jt(Ht)||(Ht=Rt(Lt,Ht,Kt)),Ht}var Ft=Tt(Lt,Ut);if(Ft)return Ft;var zt=Object.keys(Ut),ir=yt(zt);if(Lt.showHidden&&(zt=Object.getOwnPropertyNames(Ut)),ot(Ut)&&(zt.indexOf("message")>=0||zt.indexOf("description")>=0))return At(Ut);if(zt.length===0){if(ft(Ut)){var sr=Ut.name?": "+Ut.name:"";return Lt.stylize("[Function"+sr+"]","special")}if(er(Ut))return Lt.stylize(RegExp.prototype.toString.call(Ut),"regexp");if(It(Ut))return Lt.stylize(Date.prototype.toString.call(Ut),"date");if(ot(Ut))return At(Ut)}var ar="",Vt=!1,fr=["{","}"];if(Ot(Ut)&&(Vt=!0,fr=["[","]"]),ft(Ut)){var Gr=Ut.name?": "+Ut.name:"";ar=" [Function"+Gr+"]"}if(er(Ut)&&(ar=" "+RegExp.prototype.toString.call(Ut)),It(Ut)&&(ar=" "+Date.prototype.toUTCString.call(Ut)),ot(Ut)&&(ar=" "+At(Ut)),zt.length===0&&(!Vt||Ut.length==0))return fr[0]+ar+fr[1];if(Kt<0)return er(Ut)?Lt.stylize(RegExp.prototype.toString.call(Ut),"regexp"):Lt.stylize("[Object]","special");Lt.seen.push(Ut);var ur;return Vt?ur=xt(Lt,Ut,Kt,ir,zt):ur=zt.map(function(pr){return Nt(Lt,Ut,Kt,ir,pr,Vt)}),Lt.seen.pop(),Ct(ur,ar,fr)}function Tt(Lt,Ut){if(tr(Ut))return Lt.stylize("undefined","undefined");if(jt(Ut)){var Kt="'"+JSON.stringify(Ut).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Lt.stylize(Kt,"string")}if(Gt(Ut))return Lt.stylize(""+Ut,"number");if(kt(Ut))return Lt.stylize(""+Ut,"boolean");if(Pt(Ut))return Lt.stylize("null","null")}function At(Lt){return"["+Error.prototype.toString.call(Lt)+"]"}function xt(Lt,Ut,Kt,Ht,Ft){for(var zt=[],ir=0,sr=Ut.length;ir<sr;++ir)Et(Ut,String(ir))?zt.push(Nt(Lt,Ut,Kt,Ht,String(ir),!0)):zt.push("");return Ft.forEach(function(ar){ar.match(/^\d+$/)||zt.push(Nt(Lt,Ut,Kt,Ht,ar,!0))}),zt}function Nt(Lt,Ut,Kt,Ht,Ft,zt){var ir,sr,ar;if(ar=Object.getOwnPropertyDescriptor(Ut,Ft)||{value:Ut[Ft]},ar.get?ar.set?sr=Lt.stylize("[Getter/Setter]","special"):sr=Lt.stylize("[Getter]","special"):ar.set&&(sr=Lt.stylize("[Setter]","special")),Et(Ht,Ft)||(ir="["+Ft+"]"),sr||(Lt.seen.indexOf(ar.value)<0?(Pt(Kt)?sr=Rt(Lt,ar.value,null):sr=Rt(Lt,ar.value,Kt-1),sr.indexOf(`
`)>-1&&(zt?sr=sr.split(`
`).map(function(Vt){return"  "+Vt}).join(`
`).slice(2):sr=`
`+sr.split(`
`).map(function(Vt){return"   "+Vt}).join(`
`))):sr=Lt.stylize("[Circular]","special")),tr(ir)){if(zt&&Ft.match(/^\d+$/))return sr;ir=JSON.stringify(""+Ft),ir.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ir=ir.slice(1,-1),ir=Lt.stylize(ir,"name")):(ir=ir.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ir=Lt.stylize(ir,"string"))}return ir+": "+sr}function Ct(Lt,Ut,Kt){var Ht=Lt.reduce(function(Ft,zt){return zt.indexOf(`
`)>=0,Ft+zt.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Ht>60?Kt[0]+(Ut===""?"":Ut+`
 `)+" "+Lt.join(`,
  `)+" "+Kt[1]:Kt[0]+Ut+" "+Lt.join(", ")+" "+Kt[1]}tt.types=requireTypes$1();function Ot(Lt){return Array.isArray(Lt)}tt.isArray=Ot;function kt(Lt){return typeof Lt=="boolean"}tt.isBoolean=kt;function Pt(Lt){return Lt===null}tt.isNull=Pt;function Dt(Lt){return Lt==null}tt.isNullOrUndefined=Dt;function Gt(Lt){return typeof Lt=="number"}tt.isNumber=Gt;function jt(Lt){return typeof Lt=="string"}tt.isString=jt;function Yt(Lt){return typeof Lt=="symbol"}tt.isSymbol=Yt;function tr(Lt){return Lt===void 0}tt.isUndefined=tr;function er(Lt){return lr(Lt)&&vt(Lt)==="[object RegExp]"}tt.isRegExp=er,tt.types.isRegExp=er;function lr(Lt){return typeof Lt=="object"&&Lt!==null}tt.isObject=lr;function It(Lt){return lr(Lt)&&vt(Lt)==="[object Date]"}tt.isDate=It,tt.types.isDate=It;function ot(Lt){return lr(Lt)&&(vt(Lt)==="[object Error]"||Lt instanceof Error)}tt.isError=ot,tt.types.isNativeError=ot;function ft(Lt){return typeof Lt=="function"}tt.isFunction=ft;function ht(Lt){return Lt===null||typeof Lt=="boolean"||typeof Lt=="number"||typeof Lt=="string"||typeof Lt=="symbol"||typeof Lt>"u"}tt.isPrimitive=ht,tt.isBuffer=requireIsBufferBrowser();function vt(Lt){return Object.prototype.toString.call(Lt)}function wt(Lt){return Lt<10?"0"+Lt.toString(10):Lt.toString(10)}var bt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function $t(){var Lt=new Date,Ut=[wt(Lt.getHours()),wt(Lt.getMinutes()),wt(Lt.getSeconds())].join(":");return[Lt.getDate(),bt[Lt.getMonth()],Ut].join(" ")}tt.log=function(){console.log("%s - %s",$t(),tt.format.apply(tt,arguments))},tt.inherits=requireInherits_browser(),tt._extend=function(Lt,Ut){if(!Ut||!lr(Ut))return Lt;for(var Kt=Object.keys(Ut),Ht=Kt.length;Ht--;)Lt[Kt[Ht]]=Ut[Kt[Ht]];return Lt};function Et(Lt,Ut){return Object.prototype.hasOwnProperty.call(Lt,Ut)}var ct=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;tt.promisify=function(Ut){if(typeof Ut!="function")throw new TypeError('The "original" argument must be of type Function');if(ct&&Ut[ct]){var Kt=Ut[ct];if(typeof Kt!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Kt,ct,{value:Kt,enumerable:!1,writable:!1,configurable:!0}),Kt}function Kt(){for(var Ht,Ft,zt=new Promise(function(ar,Vt){Ht=ar,Ft=Vt}),ir=[],sr=0;sr<arguments.length;sr++)ir.push(arguments[sr]);ir.push(function(ar,Vt){ar?Ft(ar):Ht(Vt)});try{Ut.apply(this,ir)}catch(ar){Ft(ar)}return zt}return Object.setPrototypeOf(Kt,Object.getPrototypeOf(Ut)),ct&&Object.defineProperty(Kt,ct,{value:Kt,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Kt,rt(Ut))},tt.promisify.custom=ct;function St(Lt,Ut){if(!Lt){var Kt=new Error("Promise was rejected with a falsy value");Kt.reason=Lt,Lt=Kt}return Ut(Lt)}function Mt(Lt){if(typeof Lt!="function")throw new TypeError('The "original" argument must be of type Function');function Ut(){for(var Kt=[],Ht=0;Ht<arguments.length;Ht++)Kt.push(arguments[Ht]);var Ft=Kt.pop();if(typeof Ft!="function")throw new TypeError("The last argument must be of type Function");var zt=this,ir=function(){return Ft.apply(zt,arguments)};Lt.apply(this,Kt).then(function(sr){process$1.nextTick(ir.bind(null,null,sr))},function(sr){process$1.nextTick(St.bind(null,sr,ir))})}return Object.setPrototypeOf(Ut,Object.getPrototypeOf(Lt)),Object.defineProperties(Ut,rt(Lt)),Ut}tt.callbackify=Mt}(util$2)),util$2}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function tt(xt,Nt){var Ct=Object.keys(xt);if(Object.getOwnPropertySymbols){var Ot=Object.getOwnPropertySymbols(xt);Nt&&(Ot=Ot.filter(function(kt){return Object.getOwnPropertyDescriptor(xt,kt).enumerable})),Ct.push.apply(Ct,Ot)}return Ct}function et(xt){for(var Nt=1;Nt<arguments.length;Nt++){var Ct=arguments[Nt]!=null?arguments[Nt]:{};Nt%2?tt(Object(Ct),!0).forEach(function(Ot){rt(xt,Ot,Ct[Ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(xt,Object.getOwnPropertyDescriptors(Ct)):tt(Object(Ct)).forEach(function(Ot){Object.defineProperty(xt,Ot,Object.getOwnPropertyDescriptor(Ct,Ot))})}return xt}function rt(xt,Nt,Ct){return Nt=st(Nt),Nt in xt?Object.defineProperty(xt,Nt,{value:Ct,enumerable:!0,configurable:!0,writable:!0}):xt[Nt]=Ct,xt}function nt(xt,Nt){if(!(xt instanceof Nt))throw new TypeError("Cannot call a class as a function")}function at(xt,Nt){for(var Ct=0;Ct<Nt.length;Ct++){var Ot=Nt[Ct];Ot.enumerable=Ot.enumerable||!1,Ot.configurable=!0,"value"in Ot&&(Ot.writable=!0),Object.defineProperty(xt,st(Ot.key),Ot)}}function it(xt,Nt,Ct){return Nt&&at(xt.prototype,Nt),Object.defineProperty(xt,"prototype",{writable:!1}),xt}function st(xt){var Nt=dt(xt,"string");return typeof Nt=="symbol"?Nt:String(Nt)}function dt(xt,Nt){if(typeof xt!="object"||xt===null)return xt;var Ct=xt[Symbol.toPrimitive];if(Ct!==void 0){var Ot=Ct.call(xt,Nt||"default");if(typeof Ot!="object")return Ot;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Nt==="string"?String:Number)(xt)}var pt=require$$0$2,mt=pt.Buffer,yt=requireUtil$2(),Rt=yt.inspect,Tt=Rt&&Rt.custom||"inspect";function At(xt,Nt,Ct){mt.prototype.copy.call(xt,Nt,Ct)}return buffer_list=function(){function xt(){nt(this,xt),this.head=null,this.tail=null,this.length=0}return it(xt,[{key:"push",value:function(Ct){var Ot={data:Ct,next:null};this.length>0?this.tail.next=Ot:this.head=Ot,this.tail=Ot,++this.length}},{key:"unshift",value:function(Ct){var Ot={data:Ct,next:this.head};this.length===0&&(this.tail=Ot),this.head=Ot,++this.length}},{key:"shift",value:function(){if(this.length!==0){var Ct=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,Ct}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(Ct){if(this.length===0)return"";for(var Ot=this.head,kt=""+Ot.data;Ot=Ot.next;)kt+=Ct+Ot.data;return kt}},{key:"concat",value:function(Ct){if(this.length===0)return mt.alloc(0);for(var Ot=mt.allocUnsafe(Ct>>>0),kt=this.head,Pt=0;kt;)At(kt.data,Ot,Pt),Pt+=kt.data.length,kt=kt.next;return Ot}},{key:"consume",value:function(Ct,Ot){var kt;return Ct<this.head.data.length?(kt=this.head.data.slice(0,Ct),this.head.data=this.head.data.slice(Ct)):Ct===this.head.data.length?kt=this.shift():kt=Ot?this._getString(Ct):this._getBuffer(Ct),kt}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(Ct){var Ot=this.head,kt=1,Pt=Ot.data;for(Ct-=Pt.length;Ot=Ot.next;){var Dt=Ot.data,Gt=Ct>Dt.length?Dt.length:Ct;if(Gt===Dt.length?Pt+=Dt:Pt+=Dt.slice(0,Ct),Ct-=Gt,Ct===0){Gt===Dt.length?(++kt,Ot.next?this.head=Ot.next:this.head=this.tail=null):(this.head=Ot,Ot.data=Dt.slice(Gt));break}++kt}return this.length-=kt,Pt}},{key:"_getBuffer",value:function(Ct){var Ot=mt.allocUnsafe(Ct),kt=this.head,Pt=1;for(kt.data.copy(Ot),Ct-=kt.data.length;kt=kt.next;){var Dt=kt.data,Gt=Ct>Dt.length?Dt.length:Ct;if(Dt.copy(Ot,Ot.length-Ct,0,Gt),Ct-=Gt,Ct===0){Gt===Dt.length?(++Pt,kt.next?this.head=kt.next:this.head=this.tail=null):(this.head=kt,kt.data=Dt.slice(Gt));break}++Pt}return this.length-=Pt,Ot}},{key:Tt,value:function(Ct,Ot){return Rt(this,et(et({},Ot),{},{depth:0,customInspect:!1}))}}]),xt}(),buffer_list}var destroy_1$1,hasRequiredDestroy$1;function requireDestroy$1(){if(hasRequiredDestroy$1)return destroy_1$1;hasRequiredDestroy$1=1;function tt(st,dt){var pt=this,mt=this._readableState&&this._readableState.destroyed,yt=this._writableState&&this._writableState.destroyed;return mt||yt?(dt?dt(st):st&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(at,this,st)):process$1.nextTick(at,this,st)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(st||null,function(Rt){!dt&&Rt?pt._writableState?pt._writableState.errorEmitted?process$1.nextTick(rt,pt):(pt._writableState.errorEmitted=!0,process$1.nextTick(et,pt,Rt)):process$1.nextTick(et,pt,Rt):dt?(process$1.nextTick(rt,pt),dt(Rt)):process$1.nextTick(rt,pt)}),this)}function et(st,dt){at(st,dt),rt(st)}function rt(st){st._writableState&&!st._writableState.emitClose||st._readableState&&!st._readableState.emitClose||st.emit("close")}function nt(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function at(st,dt){st.emit("error",dt)}function it(st,dt){var pt=st._readableState,mt=st._writableState;pt&&pt.autoDestroy||mt&&mt.autoDestroy?st.destroy(dt):st.emit("error",dt)}return destroy_1$1={destroy:tt,undestroy:nt,errorOrDestroy:it},destroy_1$1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function tt(dt,pt){dt.prototype=Object.create(pt.prototype),dt.prototype.constructor=dt,dt.__proto__=pt}var et={};function rt(dt,pt,mt){mt||(mt=Error);function yt(Tt,At,xt){return typeof pt=="string"?pt:pt(Tt,At,xt)}var Rt=function(Tt){tt(At,Tt);function At(xt,Nt,Ct){return Tt.call(this,yt(xt,Nt,Ct))||this}return At}(mt);Rt.prototype.name=mt.name,Rt.prototype.code=dt,et[dt]=Rt}function nt(dt,pt){if(Array.isArray(dt)){var mt=dt.length;return dt=dt.map(function(yt){return String(yt)}),mt>2?"one of ".concat(pt," ").concat(dt.slice(0,mt-1).join(", "),", or ")+dt[mt-1]:mt===2?"one of ".concat(pt," ").concat(dt[0]," or ").concat(dt[1]):"of ".concat(pt," ").concat(dt[0])}else return"of ".concat(pt," ").concat(String(dt))}function at(dt,pt,mt){return dt.substr(0,pt.length)===pt}function it(dt,pt,mt){return(mt===void 0||mt>dt.length)&&(mt=dt.length),dt.substring(mt-pt.length,mt)===pt}function st(dt,pt,mt){return typeof mt!="number"&&(mt=0),mt+pt.length>dt.length?!1:dt.indexOf(pt,mt)!==-1}return rt("ERR_INVALID_OPT_VALUE",function(dt,pt){return'The value "'+pt+'" is invalid for option "'+dt+'"'},TypeError),rt("ERR_INVALID_ARG_TYPE",function(dt,pt,mt){var yt;typeof pt=="string"&&at(pt,"not ")?(yt="must not be",pt=pt.replace(/^not /,"")):yt="must be";var Rt;if(it(dt," argument"))Rt="The ".concat(dt," ").concat(yt," ").concat(nt(pt,"type"));else{var Tt=st(dt,".")?"property":"argument";Rt='The "'.concat(dt,'" ').concat(Tt," ").concat(yt," ").concat(nt(pt,"type"))}return Rt+=". Received type ".concat(typeof mt),Rt},TypeError),rt("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),rt("ERR_METHOD_NOT_IMPLEMENTED",function(dt){return"The "+dt+" method is not implemented"}),rt("ERR_STREAM_PREMATURE_CLOSE","Premature close"),rt("ERR_STREAM_DESTROYED",function(dt){return"Cannot call "+dt+" after a stream was destroyed"}),rt("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),rt("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),rt("ERR_STREAM_WRITE_AFTER_END","write after end"),rt("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),rt("ERR_UNKNOWN_ENCODING",function(dt){return"Unknown encoding: "+dt},TypeError),rt("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=et,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var tt=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function et(nt,at,it){return nt.highWaterMark!=null?nt.highWaterMark:at?nt[it]:null}function rt(nt,at,it,st){var dt=et(at,st,it);if(dt!=null){if(!(isFinite(dt)&&Math.floor(dt)===dt)||dt<0){var pt=st?it:"highWaterMark";throw new tt(pt,dt)}return Math.floor(dt)}return nt.objectMode?16:16*1024}return state={getHighWaterMark:rt},state}var browser$a,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$a;hasRequiredBrowser$a=1,browser$a=tt;function tt(rt,nt){if(et("noDeprecation"))return rt;var at=!1;function it(){if(!at){if(et("throwDeprecation"))throw new Error(nt);et("traceDeprecation")?console.trace(nt):console.warn(nt),at=!0}return rt.apply(this,arguments)}return it}function et(rt){try{if(!commonjsGlobal$1.localStorage)return!1}catch{return!1}var nt=commonjsGlobal$1.localStorage[rt];return nt==null?!1:String(nt).toLowerCase()==="true"}return browser$a}var _stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1,_stream_writable$1=tr;function tt(Ht){var Ft=this;this.next=null,this.entry=null,this.finish=function(){Kt(Ft,Ht)}}var et;tr.WritableState=jt;var rt={deprecate:requireBrowser$a()},nt=requireStreamBrowser$1(),at=require$$0$2.Buffer,it=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function st(Ht){return at.from(Ht)}function dt(Ht){return at.isBuffer(Ht)||Ht instanceof it}var pt=requireDestroy$1(),mt=requireState(),yt=mt.getHighWaterMark,Rt=requireErrorsBrowser().codes,Tt=Rt.ERR_INVALID_ARG_TYPE,At=Rt.ERR_METHOD_NOT_IMPLEMENTED,xt=Rt.ERR_MULTIPLE_CALLBACK,Nt=Rt.ERR_STREAM_CANNOT_PIPE,Ct=Rt.ERR_STREAM_DESTROYED,Ot=Rt.ERR_STREAM_NULL_VALUES,kt=Rt.ERR_STREAM_WRITE_AFTER_END,Pt=Rt.ERR_UNKNOWN_ENCODING,Dt=pt.errorOrDestroy;requireInherits_browser()(tr,nt);function Gt(){}function jt(Ht,Ft,zt){et=et||require_stream_duplex$1(),Ht=Ht||{},typeof zt!="boolean"&&(zt=Ft instanceof et),this.objectMode=!!Ht.objectMode,zt&&(this.objectMode=this.objectMode||!!Ht.writableObjectMode),this.highWaterMark=yt(this,Ht,"writableHighWaterMark",zt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ir=Ht.decodeStrings===!1;this.decodeStrings=!ir,this.defaultEncoding=Ht.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(sr){wt(Ft,sr)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ht.emitClose!==!1,this.autoDestroy=!!Ht.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new tt(this)}jt.prototype.getBuffer=function(){for(var Ft=this.bufferedRequest,zt=[];Ft;)zt.push(Ft),Ft=Ft.next;return zt},function(){try{Object.defineProperty(jt.prototype,"buffer",{get:rt.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Yt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Yt=Function.prototype[Symbol.hasInstance],Object.defineProperty(tr,Symbol.hasInstance,{value:function(Ft){return Yt.call(this,Ft)?!0:this!==tr?!1:Ft&&Ft._writableState instanceof jt}})):Yt=function(Ft){return Ft instanceof this};function tr(Ht){et=et||require_stream_duplex$1();var Ft=this instanceof et;if(!Ft&&!Yt.call(tr,this))return new tr(Ht);this._writableState=new jt(Ht,this,Ft),this.writable=!0,Ht&&(typeof Ht.write=="function"&&(this._write=Ht.write),typeof Ht.writev=="function"&&(this._writev=Ht.writev),typeof Ht.destroy=="function"&&(this._destroy=Ht.destroy),typeof Ht.final=="function"&&(this._final=Ht.final)),nt.call(this)}tr.prototype.pipe=function(){Dt(this,new Nt)};function er(Ht,Ft){var zt=new kt;Dt(Ht,zt),process$1.nextTick(Ft,zt)}function lr(Ht,Ft,zt,ir){var sr;return zt===null?sr=new Ot:typeof zt!="string"&&!Ft.objectMode&&(sr=new Tt("chunk",["string","Buffer"],zt)),sr?(Dt(Ht,sr),process$1.nextTick(ir,sr),!1):!0}tr.prototype.write=function(Ht,Ft,zt){var ir=this._writableState,sr=!1,ar=!ir.objectMode&&dt(Ht);return ar&&!at.isBuffer(Ht)&&(Ht=st(Ht)),typeof Ft=="function"&&(zt=Ft,Ft=null),ar?Ft="buffer":Ft||(Ft=ir.defaultEncoding),typeof zt!="function"&&(zt=Gt),ir.ending?er(this,zt):(ar||lr(this,ir,Ht,zt))&&(ir.pendingcb++,sr=ot(this,ir,ar,Ht,Ft,zt)),sr},tr.prototype.cork=function(){this._writableState.corked++},tr.prototype.uncork=function(){var Ht=this._writableState;Ht.corked&&(Ht.corked--,!Ht.writing&&!Ht.corked&&!Ht.bufferProcessing&&Ht.bufferedRequest&&Et(this,Ht))},tr.prototype.setDefaultEncoding=function(Ft){if(typeof Ft=="string"&&(Ft=Ft.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ft+"").toLowerCase())>-1))throw new Pt(Ft);return this._writableState.defaultEncoding=Ft,this},Object.defineProperty(tr.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function It(Ht,Ft,zt){return!Ht.objectMode&&Ht.decodeStrings!==!1&&typeof Ft=="string"&&(Ft=at.from(Ft,zt)),Ft}Object.defineProperty(tr.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ot(Ht,Ft,zt,ir,sr,ar){if(!zt){var Vt=It(Ft,ir,sr);ir!==Vt&&(zt=!0,sr="buffer",ir=Vt)}var fr=Ft.objectMode?1:ir.length;Ft.length+=fr;var Gr=Ft.length<Ft.highWaterMark;if(Gr||(Ft.needDrain=!0),Ft.writing||Ft.corked){var ur=Ft.lastBufferedRequest;Ft.lastBufferedRequest={chunk:ir,encoding:sr,isBuf:zt,callback:ar,next:null},ur?ur.next=Ft.lastBufferedRequest:Ft.bufferedRequest=Ft.lastBufferedRequest,Ft.bufferedRequestCount+=1}else ft(Ht,Ft,!1,fr,ir,sr,ar);return Gr}function ft(Ht,Ft,zt,ir,sr,ar,Vt){Ft.writelen=ir,Ft.writecb=Vt,Ft.writing=!0,Ft.sync=!0,Ft.destroyed?Ft.onwrite(new Ct("write")):zt?Ht._writev(sr,Ft.onwrite):Ht._write(sr,ar,Ft.onwrite),Ft.sync=!1}function ht(Ht,Ft,zt,ir,sr){--Ft.pendingcb,zt?(process$1.nextTick(sr,ir),process$1.nextTick(Lt,Ht,Ft),Ht._writableState.errorEmitted=!0,Dt(Ht,ir)):(sr(ir),Ht._writableState.errorEmitted=!0,Dt(Ht,ir),Lt(Ht,Ft))}function vt(Ht){Ht.writing=!1,Ht.writecb=null,Ht.length-=Ht.writelen,Ht.writelen=0}function wt(Ht,Ft){var zt=Ht._writableState,ir=zt.sync,sr=zt.writecb;if(typeof sr!="function")throw new xt;if(vt(zt),Ft)ht(Ht,zt,ir,Ft,sr);else{var ar=ct(zt)||Ht.destroyed;!ar&&!zt.corked&&!zt.bufferProcessing&&zt.bufferedRequest&&Et(Ht,zt),ir?process$1.nextTick(bt,Ht,zt,ar,sr):bt(Ht,zt,ar,sr)}}function bt(Ht,Ft,zt,ir){zt||$t(Ht,Ft),Ft.pendingcb--,ir(),Lt(Ht,Ft)}function $t(Ht,Ft){Ft.length===0&&Ft.needDrain&&(Ft.needDrain=!1,Ht.emit("drain"))}function Et(Ht,Ft){Ft.bufferProcessing=!0;var zt=Ft.bufferedRequest;if(Ht._writev&&zt&&zt.next){var ir=Ft.bufferedRequestCount,sr=new Array(ir),ar=Ft.corkedRequestsFree;ar.entry=zt;for(var Vt=0,fr=!0;zt;)sr[Vt]=zt,zt.isBuf||(fr=!1),zt=zt.next,Vt+=1;sr.allBuffers=fr,ft(Ht,Ft,!0,Ft.length,sr,"",ar.finish),Ft.pendingcb++,Ft.lastBufferedRequest=null,ar.next?(Ft.corkedRequestsFree=ar.next,ar.next=null):Ft.corkedRequestsFree=new tt(Ft),Ft.bufferedRequestCount=0}else{for(;zt;){var Gr=zt.chunk,ur=zt.encoding,pr=zt.callback,Fr=Ft.objectMode?1:Gr.length;if(ft(Ht,Ft,!1,Fr,Gr,ur,pr),zt=zt.next,Ft.bufferedRequestCount--,Ft.writing)break}zt===null&&(Ft.lastBufferedRequest=null)}Ft.bufferedRequest=zt,Ft.bufferProcessing=!1}tr.prototype._write=function(Ht,Ft,zt){zt(new At("_write()"))},tr.prototype._writev=null,tr.prototype.end=function(Ht,Ft,zt){var ir=this._writableState;return typeof Ht=="function"?(zt=Ht,Ht=null,Ft=null):typeof Ft=="function"&&(zt=Ft,Ft=null),Ht!=null&&this.write(Ht,Ft),ir.corked&&(ir.corked=1,this.uncork()),ir.ending||Ut(this,ir,zt),this},Object.defineProperty(tr.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ct(Ht){return Ht.ending&&Ht.length===0&&Ht.bufferedRequest===null&&!Ht.finished&&!Ht.writing}function St(Ht,Ft){Ht._final(function(zt){Ft.pendingcb--,zt&&Dt(Ht,zt),Ft.prefinished=!0,Ht.emit("prefinish"),Lt(Ht,Ft)})}function Mt(Ht,Ft){!Ft.prefinished&&!Ft.finalCalled&&(typeof Ht._final=="function"&&!Ft.destroyed?(Ft.pendingcb++,Ft.finalCalled=!0,process$1.nextTick(St,Ht,Ft)):(Ft.prefinished=!0,Ht.emit("prefinish")))}function Lt(Ht,Ft){var zt=ct(Ft);if(zt&&(Mt(Ht,Ft),Ft.pendingcb===0&&(Ft.finished=!0,Ht.emit("finish"),Ft.autoDestroy))){var ir=Ht._readableState;(!ir||ir.autoDestroy&&ir.endEmitted)&&Ht.destroy()}return zt}function Ut(Ht,Ft,zt){Ft.ending=!0,Lt(Ht,Ft),zt&&(Ft.finished?process$1.nextTick(zt):Ht.once("finish",zt)),Ft.ended=!0,Ht.writable=!1}function Kt(Ht,Ft,zt){var ir=Ht.entry;for(Ht.entry=null;ir;){var sr=ir.callback;Ft.pendingcb--,sr(zt),ir=ir.next}Ft.corkedRequestsFree.next=Ht}return Object.defineProperty(tr.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Ft){this._writableState&&(this._writableState.destroyed=Ft)}}),tr.prototype.destroy=pt.destroy,tr.prototype._undestroy=pt.undestroy,tr.prototype._destroy=function(Ht,Ft){Ft(Ht)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var tt=Object.keys||function(mt){var yt=[];for(var Rt in mt)yt.push(Rt);return yt};_stream_duplex$1=st;var et=require_stream_readable$1(),rt=require_stream_writable$1();requireInherits_browser()(st,et);for(var nt=tt(rt.prototype),at=0;at<nt.length;at++){var it=nt[at];st.prototype[it]||(st.prototype[it]=rt.prototype[it])}function st(mt){if(!(this instanceof st))return new st(mt);et.call(this,mt),rt.call(this,mt),this.allowHalfOpen=!0,mt&&(mt.readable===!1&&(this.readable=!1),mt.writable===!1&&(this.writable=!1),mt.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",dt)))}Object.defineProperty(st.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(st.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(st.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function dt(){this._writableState.ended||process$1.nextTick(pt,this)}function pt(mt){mt.end()}return Object.defineProperty(st.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(yt){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=yt,this._writableState.destroyed=yt)}}),_stream_duplex$1}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var tt=safeBufferExports.Buffer,et=tt.isEncoding||function(Ot){switch(Ot=""+Ot,Ot&&Ot.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function rt(Ot){if(!Ot)return"utf8";for(var kt;;)switch(Ot){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Ot;default:if(kt)return;Ot=(""+Ot).toLowerCase(),kt=!0}}function nt(Ot){var kt=rt(Ot);if(typeof kt!="string"&&(tt.isEncoding===et||!et(Ot)))throw new Error("Unknown encoding: "+Ot);return kt||Ot}string_decoder.StringDecoder=at;function at(Ot){this.encoding=nt(Ot);var kt;switch(this.encoding){case"utf16le":this.text=Rt,this.end=Tt,kt=4;break;case"utf8":this.fillLast=pt,kt=4;break;case"base64":this.text=At,this.end=xt,kt=3;break;default:this.write=Nt,this.end=Ct;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=tt.allocUnsafe(kt)}at.prototype.write=function(Ot){if(Ot.length===0)return"";var kt,Pt;if(this.lastNeed){if(kt=this.fillLast(Ot),kt===void 0)return"";Pt=this.lastNeed,this.lastNeed=0}else Pt=0;return Pt<Ot.length?kt?kt+this.text(Ot,Pt):this.text(Ot,Pt):kt||""},at.prototype.end=yt,at.prototype.text=mt,at.prototype.fillLast=function(Ot){if(this.lastNeed<=Ot.length)return Ot.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);Ot.copy(this.lastChar,this.lastTotal-this.lastNeed,0,Ot.length),this.lastNeed-=Ot.length};function it(Ot){return Ot<=127?0:Ot>>5===6?2:Ot>>4===14?3:Ot>>3===30?4:Ot>>6===2?-1:-2}function st(Ot,kt,Pt){var Dt=kt.length-1;if(Dt<Pt)return 0;var Gt=it(kt[Dt]);return Gt>=0?(Gt>0&&(Ot.lastNeed=Gt-1),Gt):--Dt<Pt||Gt===-2?0:(Gt=it(kt[Dt]),Gt>=0?(Gt>0&&(Ot.lastNeed=Gt-2),Gt):--Dt<Pt||Gt===-2?0:(Gt=it(kt[Dt]),Gt>=0?(Gt>0&&(Gt===2?Gt=0:Ot.lastNeed=Gt-3),Gt):0))}function dt(Ot,kt,Pt){if((kt[0]&192)!==128)return Ot.lastNeed=0,"�";if(Ot.lastNeed>1&&kt.length>1){if((kt[1]&192)!==128)return Ot.lastNeed=1,"�";if(Ot.lastNeed>2&&kt.length>2&&(kt[2]&192)!==128)return Ot.lastNeed=2,"�"}}function pt(Ot){var kt=this.lastTotal-this.lastNeed,Pt=dt(this,Ot);if(Pt!==void 0)return Pt;if(this.lastNeed<=Ot.length)return Ot.copy(this.lastChar,kt,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);Ot.copy(this.lastChar,kt,0,Ot.length),this.lastNeed-=Ot.length}function mt(Ot,kt){var Pt=st(this,Ot,kt);if(!this.lastNeed)return Ot.toString("utf8",kt);this.lastTotal=Pt;var Dt=Ot.length-(Pt-this.lastNeed);return Ot.copy(this.lastChar,0,Dt),Ot.toString("utf8",kt,Dt)}function yt(Ot){var kt=Ot&&Ot.length?this.write(Ot):"";return this.lastNeed?kt+"�":kt}function Rt(Ot,kt){if((Ot.length-kt)%2===0){var Pt=Ot.toString("utf16le",kt);if(Pt){var Dt=Pt.charCodeAt(Pt.length-1);if(Dt>=55296&&Dt<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=Ot[Ot.length-2],this.lastChar[1]=Ot[Ot.length-1],Pt.slice(0,-1)}return Pt}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=Ot[Ot.length-1],Ot.toString("utf16le",kt,Ot.length-1)}function Tt(Ot){var kt=Ot&&Ot.length?this.write(Ot):"";if(this.lastNeed){var Pt=this.lastTotal-this.lastNeed;return kt+this.lastChar.toString("utf16le",0,Pt)}return kt}function At(Ot,kt){var Pt=(Ot.length-kt)%3;return Pt===0?Ot.toString("base64",kt):(this.lastNeed=3-Pt,this.lastTotal=3,Pt===1?this.lastChar[0]=Ot[Ot.length-1]:(this.lastChar[0]=Ot[Ot.length-2],this.lastChar[1]=Ot[Ot.length-1]),Ot.toString("base64",kt,Ot.length-Pt))}function xt(Ot){var kt=Ot&&Ot.length?this.write(Ot):"";return this.lastNeed?kt+this.lastChar.toString("base64",0,3-this.lastNeed):kt}function Nt(Ot){return Ot.toString(this.encoding)}function Ct(Ot){return Ot&&Ot.length?this.write(Ot):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var tt=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function et(it){var st=!1;return function(){if(!st){st=!0;for(var dt=arguments.length,pt=new Array(dt),mt=0;mt<dt;mt++)pt[mt]=arguments[mt];it.apply(this,pt)}}}function rt(){}function nt(it){return it.setHeader&&typeof it.abort=="function"}function at(it,st,dt){if(typeof st=="function")return at(it,null,st);st||(st={}),dt=et(dt||rt);var pt=st.readable||st.readable!==!1&&it.readable,mt=st.writable||st.writable!==!1&&it.writable,yt=function(){it.writable||Tt()},Rt=it._writableState&&it._writableState.finished,Tt=function(){mt=!1,Rt=!0,pt||dt.call(it)},At=it._readableState&&it._readableState.endEmitted,xt=function(){pt=!1,At=!0,mt||dt.call(it)},Nt=function(Pt){dt.call(it,Pt)},Ct=function(){var Pt;if(pt&&!At)return(!it._readableState||!it._readableState.ended)&&(Pt=new tt),dt.call(it,Pt);if(mt&&!Rt)return(!it._writableState||!it._writableState.ended)&&(Pt=new tt),dt.call(it,Pt)},Ot=function(){it.req.on("finish",Tt)};return nt(it)?(it.on("complete",Tt),it.on("abort",Ct),it.req?Ot():it.on("request",Ot)):mt&&!it._writableState&&(it.on("end",yt),it.on("close",yt)),it.on("end",xt),it.on("finish",Tt),st.error!==!1&&it.on("error",Nt),it.on("close",Ct),function(){it.removeListener("complete",Tt),it.removeListener("abort",Ct),it.removeListener("request",Ot),it.req&&it.req.removeListener("finish",Tt),it.removeListener("end",yt),it.removeListener("close",yt),it.removeListener("finish",Tt),it.removeListener("end",xt),it.removeListener("error",Nt),it.removeListener("close",Ct)}}return endOfStream=at,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var tt;function et(Pt,Dt,Gt){return Dt=rt(Dt),Dt in Pt?Object.defineProperty(Pt,Dt,{value:Gt,enumerable:!0,configurable:!0,writable:!0}):Pt[Dt]=Gt,Pt}function rt(Pt){var Dt=nt(Pt,"string");return typeof Dt=="symbol"?Dt:String(Dt)}function nt(Pt,Dt){if(typeof Pt!="object"||Pt===null)return Pt;var Gt=Pt[Symbol.toPrimitive];if(Gt!==void 0){var jt=Gt.call(Pt,Dt||"default");if(typeof jt!="object")return jt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Dt==="string"?String:Number)(Pt)}var at=requireEndOfStream(),it=Symbol("lastResolve"),st=Symbol("lastReject"),dt=Symbol("error"),pt=Symbol("ended"),mt=Symbol("lastPromise"),yt=Symbol("handlePromise"),Rt=Symbol("stream");function Tt(Pt,Dt){return{value:Pt,done:Dt}}function At(Pt){var Dt=Pt[it];if(Dt!==null){var Gt=Pt[Rt].read();Gt!==null&&(Pt[mt]=null,Pt[it]=null,Pt[st]=null,Dt(Tt(Gt,!1)))}}function xt(Pt){process$1.nextTick(At,Pt)}function Nt(Pt,Dt){return function(Gt,jt){Pt.then(function(){if(Dt[pt]){Gt(Tt(void 0,!0));return}Dt[yt](Gt,jt)},jt)}}var Ct=Object.getPrototypeOf(function(){}),Ot=Object.setPrototypeOf((tt={get stream(){return this[Rt]},next:function(){var Dt=this,Gt=this[dt];if(Gt!==null)return Promise.reject(Gt);if(this[pt])return Promise.resolve(Tt(void 0,!0));if(this[Rt].destroyed)return new Promise(function(er,lr){process$1.nextTick(function(){Dt[dt]?lr(Dt[dt]):er(Tt(void 0,!0))})});var jt=this[mt],Yt;if(jt)Yt=new Promise(Nt(jt,this));else{var tr=this[Rt].read();if(tr!==null)return Promise.resolve(Tt(tr,!1));Yt=new Promise(this[yt])}return this[mt]=Yt,Yt}},et(tt,Symbol.asyncIterator,function(){return this}),et(tt,"return",function(){var Dt=this;return new Promise(function(Gt,jt){Dt[Rt].destroy(null,function(Yt){if(Yt){jt(Yt);return}Gt(Tt(void 0,!0))})})}),tt),Ct),kt=function(Dt){var Gt,jt=Object.create(Ot,(Gt={},et(Gt,Rt,{value:Dt,writable:!0}),et(Gt,it,{value:null,writable:!0}),et(Gt,st,{value:null,writable:!0}),et(Gt,dt,{value:null,writable:!0}),et(Gt,pt,{value:Dt._readableState.endEmitted,writable:!0}),et(Gt,yt,{value:function(tr,er){var lr=jt[Rt].read();lr?(jt[mt]=null,jt[it]=null,jt[st]=null,tr(Tt(lr,!1))):(jt[it]=tr,jt[st]=er)},writable:!0}),Gt));return jt[mt]=null,at(Dt,function(Yt){if(Yt&&Yt.code!=="ERR_STREAM_PREMATURE_CLOSE"){var tr=jt[st];tr!==null&&(jt[mt]=null,jt[it]=null,jt[st]=null,tr(Yt)),jt[dt]=Yt;return}var er=jt[it];er!==null&&(jt[mt]=null,jt[it]=null,jt[st]=null,er(Tt(void 0,!0))),jt[pt]=!0}),Dt.on("readable",xt.bind(null,jt)),jt};return async_iterator=kt,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1,_stream_readable$1=er;var tt;er.ReadableState=tr,requireEvents().EventEmitter;var et=function(Vt,fr){return Vt.listeners(fr).length},rt=requireStreamBrowser$1(),nt=require$$0$2.Buffer,at=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function it(ar){return nt.from(ar)}function st(ar){return nt.isBuffer(ar)||ar instanceof at}var dt=requireUtil$2(),pt;dt&&dt.debuglog?pt=dt.debuglog("stream"):pt=function(){};var mt=requireBuffer_list(),yt=requireDestroy$1(),Rt=requireState(),Tt=Rt.getHighWaterMark,At=requireErrorsBrowser().codes,xt=At.ERR_INVALID_ARG_TYPE,Nt=At.ERR_STREAM_PUSH_AFTER_EOF,Ct=At.ERR_METHOD_NOT_IMPLEMENTED,Ot=At.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,kt,Pt,Dt;requireInherits_browser()(er,rt);var Gt=yt.errorOrDestroy,jt=["error","close","destroy","pause","resume"];function Yt(ar,Vt,fr){if(typeof ar.prependListener=="function")return ar.prependListener(Vt,fr);!ar._events||!ar._events[Vt]?ar.on(Vt,fr):Array.isArray(ar._events[Vt])?ar._events[Vt].unshift(fr):ar._events[Vt]=[fr,ar._events[Vt]]}function tr(ar,Vt,fr){tt=tt||require_stream_duplex$1(),ar=ar||{},typeof fr!="boolean"&&(fr=Vt instanceof tt),this.objectMode=!!ar.objectMode,fr&&(this.objectMode=this.objectMode||!!ar.readableObjectMode),this.highWaterMark=Tt(this,ar,"readableHighWaterMark",fr),this.buffer=new mt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ar.emitClose!==!1,this.autoDestroy=!!ar.autoDestroy,this.destroyed=!1,this.defaultEncoding=ar.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ar.encoding&&(kt||(kt=requireString_decoder().StringDecoder),this.decoder=new kt(ar.encoding),this.encoding=ar.encoding)}function er(ar){if(tt=tt||require_stream_duplex$1(),!(this instanceof er))return new er(ar);var Vt=this instanceof tt;this._readableState=new tr(ar,this,Vt),this.readable=!0,ar&&(typeof ar.read=="function"&&(this._read=ar.read),typeof ar.destroy=="function"&&(this._destroy=ar.destroy)),rt.call(this)}Object.defineProperty(er.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Vt){this._readableState&&(this._readableState.destroyed=Vt)}}),er.prototype.destroy=yt.destroy,er.prototype._undestroy=yt.undestroy,er.prototype._destroy=function(ar,Vt){Vt(ar)},er.prototype.push=function(ar,Vt){var fr=this._readableState,Gr;return fr.objectMode?Gr=!0:typeof ar=="string"&&(Vt=Vt||fr.defaultEncoding,Vt!==fr.encoding&&(ar=nt.from(ar,Vt),Vt=""),Gr=!0),lr(this,ar,Vt,!1,Gr)},er.prototype.unshift=function(ar){return lr(this,ar,null,!0,!1)};function lr(ar,Vt,fr,Gr,ur){pt("readableAddChunk",Vt);var pr=ar._readableState;if(Vt===null)pr.reading=!1,wt(ar,pr);else{var Fr;if(ur||(Fr=ot(pr,Vt)),Fr)Gt(ar,Fr);else if(pr.objectMode||Vt&&Vt.length>0)if(typeof Vt!="string"&&!pr.objectMode&&Object.getPrototypeOf(Vt)!==nt.prototype&&(Vt=it(Vt)),Gr)pr.endEmitted?Gt(ar,new Ot):It(ar,pr,Vt,!0);else if(pr.ended)Gt(ar,new Nt);else{if(pr.destroyed)return!1;pr.reading=!1,pr.decoder&&!fr?(Vt=pr.decoder.write(Vt),pr.objectMode||Vt.length!==0?It(ar,pr,Vt,!1):Et(ar,pr)):It(ar,pr,Vt,!1)}else Gr||(pr.reading=!1,Et(ar,pr))}return!pr.ended&&(pr.length<pr.highWaterMark||pr.length===0)}function It(ar,Vt,fr,Gr){Vt.flowing&&Vt.length===0&&!Vt.sync?(Vt.awaitDrain=0,ar.emit("data",fr)):(Vt.length+=Vt.objectMode?1:fr.length,Gr?Vt.buffer.unshift(fr):Vt.buffer.push(fr),Vt.needReadable&&bt(ar)),Et(ar,Vt)}function ot(ar,Vt){var fr;return!st(Vt)&&typeof Vt!="string"&&Vt!==void 0&&!ar.objectMode&&(fr=new xt("chunk",["string","Buffer","Uint8Array"],Vt)),fr}er.prototype.isPaused=function(){return this._readableState.flowing===!1},er.prototype.setEncoding=function(ar){kt||(kt=requireString_decoder().StringDecoder);var Vt=new kt(ar);this._readableState.decoder=Vt,this._readableState.encoding=this._readableState.decoder.encoding;for(var fr=this._readableState.buffer.head,Gr="";fr!==null;)Gr+=Vt.write(fr.data),fr=fr.next;return this._readableState.buffer.clear(),Gr!==""&&this._readableState.buffer.push(Gr),this._readableState.length=Gr.length,this};var ft=1073741824;function ht(ar){return ar>=ft?ar=ft:(ar--,ar|=ar>>>1,ar|=ar>>>2,ar|=ar>>>4,ar|=ar>>>8,ar|=ar>>>16,ar++),ar}function vt(ar,Vt){return ar<=0||Vt.length===0&&Vt.ended?0:Vt.objectMode?1:ar!==ar?Vt.flowing&&Vt.length?Vt.buffer.head.data.length:Vt.length:(ar>Vt.highWaterMark&&(Vt.highWaterMark=ht(ar)),ar<=Vt.length?ar:Vt.ended?Vt.length:(Vt.needReadable=!0,0))}er.prototype.read=function(ar){pt("read",ar),ar=parseInt(ar,10);var Vt=this._readableState,fr=ar;if(ar!==0&&(Vt.emittedReadable=!1),ar===0&&Vt.needReadable&&((Vt.highWaterMark!==0?Vt.length>=Vt.highWaterMark:Vt.length>0)||Vt.ended))return pt("read: emitReadable",Vt.length,Vt.ended),Vt.length===0&&Vt.ended?zt(this):bt(this),null;if(ar=vt(ar,Vt),ar===0&&Vt.ended)return Vt.length===0&&zt(this),null;var Gr=Vt.needReadable;pt("need readable",Gr),(Vt.length===0||Vt.length-ar<Vt.highWaterMark)&&(Gr=!0,pt("length less than watermark",Gr)),Vt.ended||Vt.reading?(Gr=!1,pt("reading or ended",Gr)):Gr&&(pt("do read"),Vt.reading=!0,Vt.sync=!0,Vt.length===0&&(Vt.needReadable=!0),this._read(Vt.highWaterMark),Vt.sync=!1,Vt.reading||(ar=vt(fr,Vt)));var ur;return ar>0?ur=Ft(ar,Vt):ur=null,ur===null?(Vt.needReadable=Vt.length<=Vt.highWaterMark,ar=0):(Vt.length-=ar,Vt.awaitDrain=0),Vt.length===0&&(Vt.ended||(Vt.needReadable=!0),fr!==ar&&Vt.ended&&zt(this)),ur!==null&&this.emit("data",ur),ur};function wt(ar,Vt){if(pt("onEofChunk"),!Vt.ended){if(Vt.decoder){var fr=Vt.decoder.end();fr&&fr.length&&(Vt.buffer.push(fr),Vt.length+=Vt.objectMode?1:fr.length)}Vt.ended=!0,Vt.sync?bt(ar):(Vt.needReadable=!1,Vt.emittedReadable||(Vt.emittedReadable=!0,$t(ar)))}}function bt(ar){var Vt=ar._readableState;pt("emitReadable",Vt.needReadable,Vt.emittedReadable),Vt.needReadable=!1,Vt.emittedReadable||(pt("emitReadable",Vt.flowing),Vt.emittedReadable=!0,process$1.nextTick($t,ar))}function $t(ar){var Vt=ar._readableState;pt("emitReadable_",Vt.destroyed,Vt.length,Vt.ended),!Vt.destroyed&&(Vt.length||Vt.ended)&&(ar.emit("readable"),Vt.emittedReadable=!1),Vt.needReadable=!Vt.flowing&&!Vt.ended&&Vt.length<=Vt.highWaterMark,Ht(ar)}function Et(ar,Vt){Vt.readingMore||(Vt.readingMore=!0,process$1.nextTick(ct,ar,Vt))}function ct(ar,Vt){for(;!Vt.reading&&!Vt.ended&&(Vt.length<Vt.highWaterMark||Vt.flowing&&Vt.length===0);){var fr=Vt.length;if(pt("maybeReadMore read 0"),ar.read(0),fr===Vt.length)break}Vt.readingMore=!1}er.prototype._read=function(ar){Gt(this,new Ct("_read()"))},er.prototype.pipe=function(ar,Vt){var fr=this,Gr=this._readableState;switch(Gr.pipesCount){case 0:Gr.pipes=ar;break;case 1:Gr.pipes=[Gr.pipes,ar];break;default:Gr.pipes.push(ar);break}Gr.pipesCount+=1,pt("pipe count=%d opts=%j",Gr.pipesCount,Vt);var ur=(!Vt||Vt.end!==!1)&&ar!==process$1.stdout&&ar!==process$1.stderr,pr=ur?yr:gn;Gr.endEmitted?process$1.nextTick(pr):fr.once("end",pr),ar.on("unpipe",Fr);function Fr(Or,Lr){pt("onunpipe"),Or===fr&&Lr&&Lr.hasUnpiped===!1&&(Lr.hasUnpiped=!0,$r())}function yr(){pt("onend"),ar.end()}var hr=St(fr);ar.on("drain",hr);var Wr=!1;function $r(){pt("cleanup"),ar.removeListener("close",Er),ar.removeListener("finish",Ar),ar.removeListener("drain",hr),ar.removeListener("error",an),ar.removeListener("unpipe",Fr),fr.removeListener("end",yr),fr.removeListener("end",gn),fr.removeListener("data",Cr),Wr=!0,Gr.awaitDrain&&(!ar._writableState||ar._writableState.needDrain)&&hr()}fr.on("data",Cr);function Cr(Or){pt("ondata");var Lr=ar.write(Or);pt("dest.write",Lr),Lr===!1&&((Gr.pipesCount===1&&Gr.pipes===ar||Gr.pipesCount>1&&sr(Gr.pipes,ar)!==-1)&&!Wr&&(pt("false write response, pause",Gr.awaitDrain),Gr.awaitDrain++),fr.pause())}function an(Or){pt("onerror",Or),gn(),ar.removeListener("error",an),et(ar,"error")===0&&Gt(ar,Or)}Yt(ar,"error",an);function Er(){ar.removeListener("finish",Ar),gn()}ar.once("close",Er);function Ar(){pt("onfinish"),ar.removeListener("close",Er),gn()}ar.once("finish",Ar);function gn(){pt("unpipe"),fr.unpipe(ar)}return ar.emit("pipe",fr),Gr.flowing||(pt("pipe resume"),fr.resume()),ar};function St(ar){return function(){var fr=ar._readableState;pt("pipeOnDrain",fr.awaitDrain),fr.awaitDrain&&fr.awaitDrain--,fr.awaitDrain===0&&et(ar,"data")&&(fr.flowing=!0,Ht(ar))}}er.prototype.unpipe=function(ar){var Vt=this._readableState,fr={hasUnpiped:!1};if(Vt.pipesCount===0)return this;if(Vt.pipesCount===1)return ar&&ar!==Vt.pipes?this:(ar||(ar=Vt.pipes),Vt.pipes=null,Vt.pipesCount=0,Vt.flowing=!1,ar&&ar.emit("unpipe",this,fr),this);if(!ar){var Gr=Vt.pipes,ur=Vt.pipesCount;Vt.pipes=null,Vt.pipesCount=0,Vt.flowing=!1;for(var pr=0;pr<ur;pr++)Gr[pr].emit("unpipe",this,{hasUnpiped:!1});return this}var Fr=sr(Vt.pipes,ar);return Fr===-1?this:(Vt.pipes.splice(Fr,1),Vt.pipesCount-=1,Vt.pipesCount===1&&(Vt.pipes=Vt.pipes[0]),ar.emit("unpipe",this,fr),this)},er.prototype.on=function(ar,Vt){var fr=rt.prototype.on.call(this,ar,Vt),Gr=this._readableState;return ar==="data"?(Gr.readableListening=this.listenerCount("readable")>0,Gr.flowing!==!1&&this.resume()):ar==="readable"&&!Gr.endEmitted&&!Gr.readableListening&&(Gr.readableListening=Gr.needReadable=!0,Gr.flowing=!1,Gr.emittedReadable=!1,pt("on readable",Gr.length,Gr.reading),Gr.length?bt(this):Gr.reading||process$1.nextTick(Lt,this)),fr},er.prototype.addListener=er.prototype.on,er.prototype.removeListener=function(ar,Vt){var fr=rt.prototype.removeListener.call(this,ar,Vt);return ar==="readable"&&process$1.nextTick(Mt,this),fr},er.prototype.removeAllListeners=function(ar){var Vt=rt.prototype.removeAllListeners.apply(this,arguments);return(ar==="readable"||ar===void 0)&&process$1.nextTick(Mt,this),Vt};function Mt(ar){var Vt=ar._readableState;Vt.readableListening=ar.listenerCount("readable")>0,Vt.resumeScheduled&&!Vt.paused?Vt.flowing=!0:ar.listenerCount("data")>0&&ar.resume()}function Lt(ar){pt("readable nexttick read 0"),ar.read(0)}er.prototype.resume=function(){var ar=this._readableState;return ar.flowing||(pt("resume"),ar.flowing=!ar.readableListening,Ut(this,ar)),ar.paused=!1,this};function Ut(ar,Vt){Vt.resumeScheduled||(Vt.resumeScheduled=!0,process$1.nextTick(Kt,ar,Vt))}function Kt(ar,Vt){pt("resume",Vt.reading),Vt.reading||ar.read(0),Vt.resumeScheduled=!1,ar.emit("resume"),Ht(ar),Vt.flowing&&!Vt.reading&&ar.read(0)}er.prototype.pause=function(){return pt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(pt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Ht(ar){var Vt=ar._readableState;for(pt("flow",Vt.flowing);Vt.flowing&&ar.read()!==null;);}er.prototype.wrap=function(ar){var Vt=this,fr=this._readableState,Gr=!1;ar.on("end",function(){if(pt("wrapped end"),fr.decoder&&!fr.ended){var Fr=fr.decoder.end();Fr&&Fr.length&&Vt.push(Fr)}Vt.push(null)}),ar.on("data",function(Fr){if(pt("wrapped data"),fr.decoder&&(Fr=fr.decoder.write(Fr)),!(fr.objectMode&&Fr==null)&&!(!fr.objectMode&&(!Fr||!Fr.length))){var yr=Vt.push(Fr);yr||(Gr=!0,ar.pause())}});for(var ur in ar)this[ur]===void 0&&typeof ar[ur]=="function"&&(this[ur]=function(yr){return function(){return ar[yr].apply(ar,arguments)}}(ur));for(var pr=0;pr<jt.length;pr++)ar.on(jt[pr],this.emit.bind(this,jt[pr]));return this._read=function(Fr){pt("wrapped _read",Fr),Gr&&(Gr=!1,ar.resume())},this},typeof Symbol=="function"&&(er.prototype[Symbol.asyncIterator]=function(){return Pt===void 0&&(Pt=requireAsync_iterator()),Pt(this)}),Object.defineProperty(er.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(er.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(er.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Vt){this._readableState&&(this._readableState.flowing=Vt)}}),er._fromList=Ft,Object.defineProperty(er.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Ft(ar,Vt){if(Vt.length===0)return null;var fr;return Vt.objectMode?fr=Vt.buffer.shift():!ar||ar>=Vt.length?(Vt.decoder?fr=Vt.buffer.join(""):Vt.buffer.length===1?fr=Vt.buffer.first():fr=Vt.buffer.concat(Vt.length),Vt.buffer.clear()):fr=Vt.buffer.consume(ar,Vt.decoder),fr}function zt(ar){var Vt=ar._readableState;pt("endReadable",Vt.endEmitted),Vt.endEmitted||(Vt.ended=!0,process$1.nextTick(ir,Vt,ar))}function ir(ar,Vt){if(pt("endReadableNT",ar.endEmitted,ar.length),!ar.endEmitted&&ar.length===0&&(ar.endEmitted=!0,Vt.readable=!1,Vt.emit("end"),ar.autoDestroy)){var fr=Vt._writableState;(!fr||fr.autoDestroy&&fr.finished)&&Vt.destroy()}}typeof Symbol=="function"&&(er.from=function(ar,Vt){return Dt===void 0&&(Dt=requireFromBrowser()),Dt(er,ar,Vt)});function sr(ar,Vt){for(var fr=0,Gr=ar.length;fr<Gr;fr++)if(ar[fr]===Vt)return fr;return-1}return _stream_readable$1}var _stream_transform$1,hasRequired_stream_transform$1;function require_stream_transform$1(){if(hasRequired_stream_transform$1)return _stream_transform$1;hasRequired_stream_transform$1=1,_stream_transform$1=dt;var tt=requireErrorsBrowser().codes,et=tt.ERR_METHOD_NOT_IMPLEMENTED,rt=tt.ERR_MULTIPLE_CALLBACK,nt=tt.ERR_TRANSFORM_ALREADY_TRANSFORMING,at=tt.ERR_TRANSFORM_WITH_LENGTH_0,it=require_stream_duplex$1();requireInherits_browser()(dt,it);function st(yt,Rt){var Tt=this._transformState;Tt.transforming=!1;var At=Tt.writecb;if(At===null)return this.emit("error",new rt);Tt.writechunk=null,Tt.writecb=null,Rt!=null&&this.push(Rt),At(yt);var xt=this._readableState;xt.reading=!1,(xt.needReadable||xt.length<xt.highWaterMark)&&this._read(xt.highWaterMark)}function dt(yt){if(!(this instanceof dt))return new dt(yt);it.call(this,yt),this._transformState={afterTransform:st.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,yt&&(typeof yt.transform=="function"&&(this._transform=yt.transform),typeof yt.flush=="function"&&(this._flush=yt.flush)),this.on("prefinish",pt)}function pt(){var yt=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(Rt,Tt){mt(yt,Rt,Tt)}):mt(this,null,null)}dt.prototype.push=function(yt,Rt){return this._transformState.needTransform=!1,it.prototype.push.call(this,yt,Rt)},dt.prototype._transform=function(yt,Rt,Tt){Tt(new et("_transform()"))},dt.prototype._write=function(yt,Rt,Tt){var At=this._transformState;if(At.writecb=Tt,At.writechunk=yt,At.writeencoding=Rt,!At.transforming){var xt=this._readableState;(At.needTransform||xt.needReadable||xt.length<xt.highWaterMark)&&this._read(xt.highWaterMark)}},dt.prototype._read=function(yt){var Rt=this._transformState;Rt.writechunk!==null&&!Rt.transforming?(Rt.transforming=!0,this._transform(Rt.writechunk,Rt.writeencoding,Rt.afterTransform)):Rt.needTransform=!0},dt.prototype._destroy=function(yt,Rt){it.prototype._destroy.call(this,yt,function(Tt){Rt(Tt)})};function mt(yt,Rt,Tt){if(Rt)return yt.emit("error",Rt);if(Tt!=null&&yt.push(Tt),yt._writableState.length)throw new at;if(yt._transformState.transforming)throw new nt;return yt.push(null)}return _stream_transform$1}var _stream_passthrough$1,hasRequired_stream_passthrough$1;function require_stream_passthrough$1(){if(hasRequired_stream_passthrough$1)return _stream_passthrough$1;hasRequired_stream_passthrough$1=1,_stream_passthrough$1=et;var tt=require_stream_transform$1();requireInherits_browser()(et,tt);function et(rt){if(!(this instanceof et))return new et(rt);tt.call(this,rt)}return et.prototype._transform=function(rt,nt,at){at(null,rt)},_stream_passthrough$1}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var tt;function et(Tt){var At=!1;return function(){At||(At=!0,Tt.apply(void 0,arguments))}}var rt=requireErrorsBrowser().codes,nt=rt.ERR_MISSING_ARGS,at=rt.ERR_STREAM_DESTROYED;function it(Tt){if(Tt)throw Tt}function st(Tt){return Tt.setHeader&&typeof Tt.abort=="function"}function dt(Tt,At,xt,Nt){Nt=et(Nt);var Ct=!1;Tt.on("close",function(){Ct=!0}),tt===void 0&&(tt=requireEndOfStream()),tt(Tt,{readable:At,writable:xt},function(kt){if(kt)return Nt(kt);Ct=!0,Nt()});var Ot=!1;return function(kt){if(!Ct&&!Ot){if(Ot=!0,st(Tt))return Tt.abort();if(typeof Tt.destroy=="function")return Tt.destroy();Nt(kt||new at("pipe"))}}}function pt(Tt){Tt()}function mt(Tt,At){return Tt.pipe(At)}function yt(Tt){return!Tt.length||typeof Tt[Tt.length-1]!="function"?it:Tt.pop()}function Rt(){for(var Tt=arguments.length,At=new Array(Tt),xt=0;xt<Tt;xt++)At[xt]=arguments[xt];var Nt=yt(At);if(Array.isArray(At[0])&&(At=At[0]),At.length<2)throw new nt("streams");var Ct,Ot=At.map(function(kt,Pt){var Dt=Pt<At.length-1,Gt=Pt>0;return dt(kt,Dt,Gt,function(jt){Ct||(Ct=jt),jt&&Ot.forEach(pt),!Dt&&(Ot.forEach(pt),Nt(Ct))})});return At.reduce(mt)}return pipeline_1=Rt,pipeline_1}var hasRequiredReadableBrowser$1;function requireReadableBrowser$1(){return hasRequiredReadableBrowser$1||(hasRequiredReadableBrowser$1=1,function(tt,et){et=tt.exports=require_stream_readable$1(),et.Stream=et,et.Readable=et,et.Writable=require_stream_writable$1(),et.Duplex=require_stream_duplex$1(),et.Transform=require_stream_transform$1(),et.PassThrough=require_stream_passthrough$1(),et.finished=requireEndOfStream(),et.pipeline=requirePipeline()}(readableBrowser$1,readableBrowser$1.exports)),readableBrowser$1.exports}var hashBase$1,hasRequiredHashBase$1;function requireHashBase$1(){if(hasRequiredHashBase$1)return hashBase$1;hasRequiredHashBase$1=1;var tt=safeBufferExports.Buffer,et=requireReadableBrowser$1().Transform,rt=requireInherits_browser();function nt(it,st){if(!tt.isBuffer(it)&&typeof it!="string")throw new TypeError(st+" must be a string or a buffer")}function at(it){et.call(this),this._block=tt.allocUnsafe(it),this._blockSize=it,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return rt(at,et),at.prototype._transform=function(it,st,dt){var pt=null;try{this.update(it,st)}catch(mt){pt=mt}dt(pt)},at.prototype._flush=function(it){var st=null;try{this.push(this.digest())}catch(dt){st=dt}it(st)},at.prototype.update=function(it,st){if(nt(it,"Data"),this._finalized)throw new Error("Digest already called");tt.isBuffer(it)||(it=tt.from(it,st));for(var dt=this._block,pt=0;this._blockOffset+it.length-pt>=this._blockSize;){for(var mt=this._blockOffset;mt<this._blockSize;)dt[mt++]=it[pt++];this._update(),this._blockOffset=0}for(;pt<it.length;)dt[this._blockOffset++]=it[pt++];for(var yt=0,Rt=it.length*8;Rt>0;++yt)this._length[yt]+=Rt,Rt=this._length[yt]/4294967296|0,Rt>0&&(this._length[yt]-=4294967296*Rt);return this},at.prototype._update=function(){throw new Error("_update is not implemented")},at.prototype.digest=function(it){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var st=this._digest();it!==void 0&&(st=st.toString(it)),this._block.fill(0),this._blockOffset=0;for(var dt=0;dt<4;++dt)this._length[dt]=0;return st},at.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase$1=at,hashBase$1}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var tt=requireInherits_browser(),et=requireHashBase$1(),rt=safeBufferExports.Buffer,nt=new Array(16);function at(){et.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}tt(at,et),at.prototype._update=function(){for(var yt=nt,Rt=0;Rt<16;++Rt)yt[Rt]=this._block.readInt32LE(Rt*4);var Tt=this._a,At=this._b,xt=this._c,Nt=this._d;Tt=st(Tt,At,xt,Nt,yt[0],3614090360,7),Nt=st(Nt,Tt,At,xt,yt[1],3905402710,12),xt=st(xt,Nt,Tt,At,yt[2],606105819,17),At=st(At,xt,Nt,Tt,yt[3],3250441966,22),Tt=st(Tt,At,xt,Nt,yt[4],4118548399,7),Nt=st(Nt,Tt,At,xt,yt[5],1200080426,12),xt=st(xt,Nt,Tt,At,yt[6],2821735955,17),At=st(At,xt,Nt,Tt,yt[7],4249261313,22),Tt=st(Tt,At,xt,Nt,yt[8],1770035416,7),Nt=st(Nt,Tt,At,xt,yt[9],2336552879,12),xt=st(xt,Nt,Tt,At,yt[10],4294925233,17),At=st(At,xt,Nt,Tt,yt[11],2304563134,22),Tt=st(Tt,At,xt,Nt,yt[12],1804603682,7),Nt=st(Nt,Tt,At,xt,yt[13],4254626195,12),xt=st(xt,Nt,Tt,At,yt[14],2792965006,17),At=st(At,xt,Nt,Tt,yt[15],1236535329,22),Tt=dt(Tt,At,xt,Nt,yt[1],4129170786,5),Nt=dt(Nt,Tt,At,xt,yt[6],3225465664,9),xt=dt(xt,Nt,Tt,At,yt[11],643717713,14),At=dt(At,xt,Nt,Tt,yt[0],3921069994,20),Tt=dt(Tt,At,xt,Nt,yt[5],3593408605,5),Nt=dt(Nt,Tt,At,xt,yt[10],38016083,9),xt=dt(xt,Nt,Tt,At,yt[15],3634488961,14),At=dt(At,xt,Nt,Tt,yt[4],3889429448,20),Tt=dt(Tt,At,xt,Nt,yt[9],568446438,5),Nt=dt(Nt,Tt,At,xt,yt[14],3275163606,9),xt=dt(xt,Nt,Tt,At,yt[3],4107603335,14),At=dt(At,xt,Nt,Tt,yt[8],1163531501,20),Tt=dt(Tt,At,xt,Nt,yt[13],2850285829,5),Nt=dt(Nt,Tt,At,xt,yt[2],4243563512,9),xt=dt(xt,Nt,Tt,At,yt[7],1735328473,14),At=dt(At,xt,Nt,Tt,yt[12],2368359562,20),Tt=pt(Tt,At,xt,Nt,yt[5],4294588738,4),Nt=pt(Nt,Tt,At,xt,yt[8],2272392833,11),xt=pt(xt,Nt,Tt,At,yt[11],1839030562,16),At=pt(At,xt,Nt,Tt,yt[14],4259657740,23),Tt=pt(Tt,At,xt,Nt,yt[1],2763975236,4),Nt=pt(Nt,Tt,At,xt,yt[4],1272893353,11),xt=pt(xt,Nt,Tt,At,yt[7],4139469664,16),At=pt(At,xt,Nt,Tt,yt[10],3200236656,23),Tt=pt(Tt,At,xt,Nt,yt[13],681279174,4),Nt=pt(Nt,Tt,At,xt,yt[0],3936430074,11),xt=pt(xt,Nt,Tt,At,yt[3],3572445317,16),At=pt(At,xt,Nt,Tt,yt[6],76029189,23),Tt=pt(Tt,At,xt,Nt,yt[9],3654602809,4),Nt=pt(Nt,Tt,At,xt,yt[12],3873151461,11),xt=pt(xt,Nt,Tt,At,yt[15],530742520,16),At=pt(At,xt,Nt,Tt,yt[2],3299628645,23),Tt=mt(Tt,At,xt,Nt,yt[0],4096336452,6),Nt=mt(Nt,Tt,At,xt,yt[7],1126891415,10),xt=mt(xt,Nt,Tt,At,yt[14],2878612391,15),At=mt(At,xt,Nt,Tt,yt[5],4237533241,21),Tt=mt(Tt,At,xt,Nt,yt[12],1700485571,6),Nt=mt(Nt,Tt,At,xt,yt[3],2399980690,10),xt=mt(xt,Nt,Tt,At,yt[10],4293915773,15),At=mt(At,xt,Nt,Tt,yt[1],2240044497,21),Tt=mt(Tt,At,xt,Nt,yt[8],1873313359,6),Nt=mt(Nt,Tt,At,xt,yt[15],4264355552,10),xt=mt(xt,Nt,Tt,At,yt[6],2734768916,15),At=mt(At,xt,Nt,Tt,yt[13],1309151649,21),Tt=mt(Tt,At,xt,Nt,yt[4],4149444226,6),Nt=mt(Nt,Tt,At,xt,yt[11],3174756917,10),xt=mt(xt,Nt,Tt,At,yt[2],718787259,15),At=mt(At,xt,Nt,Tt,yt[9],3951481745,21),this._a=this._a+Tt|0,this._b=this._b+At|0,this._c=this._c+xt|0,this._d=this._d+Nt|0},at.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var yt=rt.allocUnsafe(16);return yt.writeInt32LE(this._a,0),yt.writeInt32LE(this._b,4),yt.writeInt32LE(this._c,8),yt.writeInt32LE(this._d,12),yt};function it(yt,Rt){return yt<<Rt|yt>>>32-Rt}function st(yt,Rt,Tt,At,xt,Nt,Ct){return it(yt+(Rt&Tt|~Rt&At)+xt+Nt|0,Ct)+Rt|0}function dt(yt,Rt,Tt,At,xt,Nt,Ct){return it(yt+(Rt&At|Tt&~At)+xt+Nt|0,Ct)+Rt|0}function pt(yt,Rt,Tt,At,xt,Nt,Ct){return it(yt+(Rt^Tt^At)+xt+Nt|0,Ct)+Rt|0}function mt(yt,Rt,Tt,At,xt,Nt,Ct){return it(yt+(Tt^(Rt|~At))+xt+Nt|0,Ct)+Rt|0}return md5_js=at,md5_js}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var tt=safeBufferExports.Buffer,et=requireReadableBrowser$1().Transform,rt=requireInherits_browser();function nt(it,st){if(!tt.isBuffer(it)&&typeof it!="string")throw new TypeError(st+" must be a string or a buffer")}function at(it){et.call(this),this._block=tt.allocUnsafe(it),this._blockSize=it,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return rt(at,et),at.prototype._transform=function(it,st,dt){var pt=null;try{this.update(it,st)}catch(mt){pt=mt}dt(pt)},at.prototype._flush=function(it){var st=null;try{this.push(this.digest())}catch(dt){st=dt}it(st)},at.prototype.update=function(it,st){if(nt(it,"Data"),this._finalized)throw new Error("Digest already called");tt.isBuffer(it)||(it=tt.from(it,st));for(var dt=this._block,pt=0;this._blockOffset+it.length-pt>=this._blockSize;){for(var mt=this._blockOffset;mt<this._blockSize;)dt[mt++]=it[pt++];this._update(),this._blockOffset=0}for(;pt<it.length;)dt[this._blockOffset++]=it[pt++];for(var yt=0,Rt=it.length*8;Rt>0;++yt)this._length[yt]+=Rt,Rt=this._length[yt]/4294967296|0,Rt>0&&(this._length[yt]-=4294967296*Rt);return this},at.prototype._update=function(){throw new Error("_update is not implemented")},at.prototype.digest=function(it){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var st=this._digest();it!==void 0&&(st=st.toString(it)),this._block.fill(0),this._blockOffset=0;for(var dt=0;dt<4;++dt)this._length[dt]=0;return st},at.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=at,hashBase}var ripemd160,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1;var tt=require$$0$2.Buffer,et=requireInherits_browser(),rt=requireHashBase(),nt=new Array(16),at=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],it=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],st=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],dt=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],pt=[0,1518500249,1859775393,2400959708,2840853838],mt=[1352829926,1548603684,1836072691,2053994217,0];function yt(){rt.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}et(yt,rt),yt.prototype._update=function(){for(var Ot=nt,kt=0;kt<16;++kt)Ot[kt]=this._block.readInt32LE(kt*4);for(var Pt=this._a|0,Dt=this._b|0,Gt=this._c|0,jt=this._d|0,Yt=this._e|0,tr=this._a|0,er=this._b|0,lr=this._c|0,It=this._d|0,ot=this._e|0,ft=0;ft<80;ft+=1){var ht,vt;ft<16?(ht=Tt(Pt,Dt,Gt,jt,Yt,Ot[at[ft]],pt[0],st[ft]),vt=Ct(tr,er,lr,It,ot,Ot[it[ft]],mt[0],dt[ft])):ft<32?(ht=At(Pt,Dt,Gt,jt,Yt,Ot[at[ft]],pt[1],st[ft]),vt=Nt(tr,er,lr,It,ot,Ot[it[ft]],mt[1],dt[ft])):ft<48?(ht=xt(Pt,Dt,Gt,jt,Yt,Ot[at[ft]],pt[2],st[ft]),vt=xt(tr,er,lr,It,ot,Ot[it[ft]],mt[2],dt[ft])):ft<64?(ht=Nt(Pt,Dt,Gt,jt,Yt,Ot[at[ft]],pt[3],st[ft]),vt=At(tr,er,lr,It,ot,Ot[it[ft]],mt[3],dt[ft])):(ht=Ct(Pt,Dt,Gt,jt,Yt,Ot[at[ft]],pt[4],st[ft]),vt=Tt(tr,er,lr,It,ot,Ot[it[ft]],mt[4],dt[ft])),Pt=Yt,Yt=jt,jt=Rt(Gt,10),Gt=Dt,Dt=ht,tr=ot,ot=It,It=Rt(lr,10),lr=er,er=vt}var wt=this._b+Gt+It|0;this._b=this._c+jt+ot|0,this._c=this._d+Yt+tr|0,this._d=this._e+Pt+er|0,this._e=this._a+Dt+lr|0,this._a=wt},yt.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var Ot=tt.alloc?tt.alloc(20):new tt(20);return Ot.writeInt32LE(this._a,0),Ot.writeInt32LE(this._b,4),Ot.writeInt32LE(this._c,8),Ot.writeInt32LE(this._d,12),Ot.writeInt32LE(this._e,16),Ot};function Rt(Ot,kt){return Ot<<kt|Ot>>>32-kt}function Tt(Ot,kt,Pt,Dt,Gt,jt,Yt,tr){return Rt(Ot+(kt^Pt^Dt)+jt+Yt|0,tr)+Gt|0}function At(Ot,kt,Pt,Dt,Gt,jt,Yt,tr){return Rt(Ot+(kt&Pt|~kt&Dt)+jt+Yt|0,tr)+Gt|0}function xt(Ot,kt,Pt,Dt,Gt,jt,Yt,tr){return Rt(Ot+((kt|~Pt)^Dt)+jt+Yt|0,tr)+Gt|0}function Nt(Ot,kt,Pt,Dt,Gt,jt,Yt,tr){return Rt(Ot+(kt&Dt|Pt&~Dt)+jt+Yt|0,tr)+Gt|0}function Ct(Ot,kt,Pt,Dt,Gt,jt,Yt,tr){return Rt(Ot+(kt^(Pt|~Dt))+jt+Yt|0,tr)+Gt|0}return ripemd160=yt,ripemd160}var sha_js={exports:{}},hash$1,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$1;hasRequiredHash$1=1;var tt=safeBufferExports.Buffer;function et(rt,nt){this._block=tt.alloc(rt),this._finalSize=nt,this._blockSize=rt,this._len=0}return et.prototype.update=function(rt,nt){typeof rt=="string"&&(nt=nt||"utf8",rt=tt.from(rt,nt));for(var at=this._block,it=this._blockSize,st=rt.length,dt=this._len,pt=0;pt<st;){for(var mt=dt%it,yt=Math.min(st-pt,it-mt),Rt=0;Rt<yt;Rt++)at[mt+Rt]=rt[pt+Rt];dt+=yt,pt+=yt,dt%it===0&&this._update(at)}return this._len+=st,this},et.prototype.digest=function(rt){var nt=this._len%this._blockSize;this._block[nt]=128,this._block.fill(0,nt+1),nt>=this._finalSize&&(this._update(this._block),this._block.fill(0));var at=this._len*8;if(at<=4294967295)this._block.writeUInt32BE(at,this._blockSize-4);else{var it=(at&4294967295)>>>0,st=(at-it)/4294967296;this._block.writeUInt32BE(st,this._blockSize-8),this._block.writeUInt32BE(it,this._blockSize-4)}this._update(this._block);var dt=this._hash();return rt?dt.toString(rt):dt},et.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$1=et,hash$1}var sha$1,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var tt=requireInherits_browser(),et=requireHash$1(),rt=safeBufferExports.Buffer,nt=[1518500249,1859775393,-1894007588,-899497514],at=new Array(80);function it(){this.init(),this._w=at,et.call(this,64,56)}tt(it,et),it.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function st(mt){return mt<<5|mt>>>27}function dt(mt){return mt<<30|mt>>>2}function pt(mt,yt,Rt,Tt){return mt===0?yt&Rt|~yt&Tt:mt===2?yt&Rt|yt&Tt|Rt&Tt:yt^Rt^Tt}return it.prototype._update=function(mt){for(var yt=this._w,Rt=this._a|0,Tt=this._b|0,At=this._c|0,xt=this._d|0,Nt=this._e|0,Ct=0;Ct<16;++Ct)yt[Ct]=mt.readInt32BE(Ct*4);for(;Ct<80;++Ct)yt[Ct]=yt[Ct-3]^yt[Ct-8]^yt[Ct-14]^yt[Ct-16];for(var Ot=0;Ot<80;++Ot){var kt=~~(Ot/20),Pt=st(Rt)+pt(kt,Tt,At,xt)+Nt+yt[Ot]+nt[kt]|0;Nt=xt,xt=At,At=dt(Tt),Tt=Rt,Rt=Pt}this._a=Rt+this._a|0,this._b=Tt+this._b|0,this._c=At+this._c|0,this._d=xt+this._d|0,this._e=Nt+this._e|0},it.prototype._hash=function(){var mt=rt.allocUnsafe(20);return mt.writeInt32BE(this._a|0,0),mt.writeInt32BE(this._b|0,4),mt.writeInt32BE(this._c|0,8),mt.writeInt32BE(this._d|0,12),mt.writeInt32BE(this._e|0,16),mt},sha$1=it,sha$1}var sha1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1;hasRequiredSha1=1;var tt=requireInherits_browser(),et=requireHash$1(),rt=safeBufferExports.Buffer,nt=[1518500249,1859775393,-1894007588,-899497514],at=new Array(80);function it(){this.init(),this._w=at,et.call(this,64,56)}tt(it,et),it.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function st(yt){return yt<<1|yt>>>31}function dt(yt){return yt<<5|yt>>>27}function pt(yt){return yt<<30|yt>>>2}function mt(yt,Rt,Tt,At){return yt===0?Rt&Tt|~Rt&At:yt===2?Rt&Tt|Rt&At|Tt&At:Rt^Tt^At}return it.prototype._update=function(yt){for(var Rt=this._w,Tt=this._a|0,At=this._b|0,xt=this._c|0,Nt=this._d|0,Ct=this._e|0,Ot=0;Ot<16;++Ot)Rt[Ot]=yt.readInt32BE(Ot*4);for(;Ot<80;++Ot)Rt[Ot]=st(Rt[Ot-3]^Rt[Ot-8]^Rt[Ot-14]^Rt[Ot-16]);for(var kt=0;kt<80;++kt){var Pt=~~(kt/20),Dt=dt(Tt)+mt(Pt,At,xt,Nt)+Ct+Rt[kt]+nt[Pt]|0;Ct=Nt,Nt=xt,xt=pt(At),At=Tt,Tt=Dt}this._a=Tt+this._a|0,this._b=At+this._b|0,this._c=xt+this._c|0,this._d=Nt+this._d|0,this._e=Ct+this._e|0},it.prototype._hash=function(){var yt=rt.allocUnsafe(20);return yt.writeInt32BE(this._a|0,0),yt.writeInt32BE(this._b|0,4),yt.writeInt32BE(this._c|0,8),yt.writeInt32BE(this._d|0,12),yt.writeInt32BE(this._e|0,16),yt},sha1=it,sha1}var sha256$1,hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$1;hasRequiredSha256=1;var tt=requireInherits_browser(),et=requireHash$1(),rt=safeBufferExports.Buffer,nt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],at=new Array(64);function it(){this.init(),this._w=at,et.call(this,64,56)}tt(it,et),it.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function st(Tt,At,xt){return xt^Tt&(At^xt)}function dt(Tt,At,xt){return Tt&At|xt&(Tt|At)}function pt(Tt){return(Tt>>>2|Tt<<30)^(Tt>>>13|Tt<<19)^(Tt>>>22|Tt<<10)}function mt(Tt){return(Tt>>>6|Tt<<26)^(Tt>>>11|Tt<<21)^(Tt>>>25|Tt<<7)}function yt(Tt){return(Tt>>>7|Tt<<25)^(Tt>>>18|Tt<<14)^Tt>>>3}function Rt(Tt){return(Tt>>>17|Tt<<15)^(Tt>>>19|Tt<<13)^Tt>>>10}return it.prototype._update=function(Tt){for(var At=this._w,xt=this._a|0,Nt=this._b|0,Ct=this._c|0,Ot=this._d|0,kt=this._e|0,Pt=this._f|0,Dt=this._g|0,Gt=this._h|0,jt=0;jt<16;++jt)At[jt]=Tt.readInt32BE(jt*4);for(;jt<64;++jt)At[jt]=Rt(At[jt-2])+At[jt-7]+yt(At[jt-15])+At[jt-16]|0;for(var Yt=0;Yt<64;++Yt){var tr=Gt+mt(kt)+st(kt,Pt,Dt)+nt[Yt]+At[Yt]|0,er=pt(xt)+dt(xt,Nt,Ct)|0;Gt=Dt,Dt=Pt,Pt=kt,kt=Ot+tr|0,Ot=Ct,Ct=Nt,Nt=xt,xt=tr+er|0}this._a=xt+this._a|0,this._b=Nt+this._b|0,this._c=Ct+this._c|0,this._d=Ot+this._d|0,this._e=kt+this._e|0,this._f=Pt+this._f|0,this._g=Dt+this._g|0,this._h=Gt+this._h|0},it.prototype._hash=function(){var Tt=rt.allocUnsafe(32);return Tt.writeInt32BE(this._a,0),Tt.writeInt32BE(this._b,4),Tt.writeInt32BE(this._c,8),Tt.writeInt32BE(this._d,12),Tt.writeInt32BE(this._e,16),Tt.writeInt32BE(this._f,20),Tt.writeInt32BE(this._g,24),Tt.writeInt32BE(this._h,28),Tt},sha256$1=it,sha256$1}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var tt=requireInherits_browser(),et=requireSha256(),rt=requireHash$1(),nt=safeBufferExports.Buffer,at=new Array(64);function it(){this.init(),this._w=at,rt.call(this,64,56)}return tt(it,et),it.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},it.prototype._hash=function(){var st=nt.allocUnsafe(28);return st.writeInt32BE(this._a,0),st.writeInt32BE(this._b,4),st.writeInt32BE(this._c,8),st.writeInt32BE(this._d,12),st.writeInt32BE(this._e,16),st.writeInt32BE(this._f,20),st.writeInt32BE(this._g,24),st},sha224$1=it,sha224$1}var sha512$1,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$1;hasRequiredSha512=1;var tt=requireInherits_browser(),et=requireHash$1(),rt=safeBufferExports.Buffer,nt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],at=new Array(160);function it(){this.init(),this._w=at,et.call(this,128,112)}tt(it,et),it.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function st(Nt,Ct,Ot){return Ot^Nt&(Ct^Ot)}function dt(Nt,Ct,Ot){return Nt&Ct|Ot&(Nt|Ct)}function pt(Nt,Ct){return(Nt>>>28|Ct<<4)^(Ct>>>2|Nt<<30)^(Ct>>>7|Nt<<25)}function mt(Nt,Ct){return(Nt>>>14|Ct<<18)^(Nt>>>18|Ct<<14)^(Ct>>>9|Nt<<23)}function yt(Nt,Ct){return(Nt>>>1|Ct<<31)^(Nt>>>8|Ct<<24)^Nt>>>7}function Rt(Nt,Ct){return(Nt>>>1|Ct<<31)^(Nt>>>8|Ct<<24)^(Nt>>>7|Ct<<25)}function Tt(Nt,Ct){return(Nt>>>19|Ct<<13)^(Ct>>>29|Nt<<3)^Nt>>>6}function At(Nt,Ct){return(Nt>>>19|Ct<<13)^(Ct>>>29|Nt<<3)^(Nt>>>6|Ct<<26)}function xt(Nt,Ct){return Nt>>>0<Ct>>>0?1:0}return it.prototype._update=function(Nt){for(var Ct=this._w,Ot=this._ah|0,kt=this._bh|0,Pt=this._ch|0,Dt=this._dh|0,Gt=this._eh|0,jt=this._fh|0,Yt=this._gh|0,tr=this._hh|0,er=this._al|0,lr=this._bl|0,It=this._cl|0,ot=this._dl|0,ft=this._el|0,ht=this._fl|0,vt=this._gl|0,wt=this._hl|0,bt=0;bt<32;bt+=2)Ct[bt]=Nt.readInt32BE(bt*4),Ct[bt+1]=Nt.readInt32BE(bt*4+4);for(;bt<160;bt+=2){var $t=Ct[bt-30],Et=Ct[bt-15*2+1],ct=yt($t,Et),St=Rt(Et,$t);$t=Ct[bt-2*2],Et=Ct[bt-2*2+1];var Mt=Tt($t,Et),Lt=At(Et,$t),Ut=Ct[bt-7*2],Kt=Ct[bt-7*2+1],Ht=Ct[bt-16*2],Ft=Ct[bt-16*2+1],zt=St+Kt|0,ir=ct+Ut+xt(zt,St)|0;zt=zt+Lt|0,ir=ir+Mt+xt(zt,Lt)|0,zt=zt+Ft|0,ir=ir+Ht+xt(zt,Ft)|0,Ct[bt]=ir,Ct[bt+1]=zt}for(var sr=0;sr<160;sr+=2){ir=Ct[sr],zt=Ct[sr+1];var ar=dt(Ot,kt,Pt),Vt=dt(er,lr,It),fr=pt(Ot,er),Gr=pt(er,Ot),ur=mt(Gt,ft),pr=mt(ft,Gt),Fr=nt[sr],yr=nt[sr+1],hr=st(Gt,jt,Yt),Wr=st(ft,ht,vt),$r=wt+pr|0,Cr=tr+ur+xt($r,wt)|0;$r=$r+Wr|0,Cr=Cr+hr+xt($r,Wr)|0,$r=$r+yr|0,Cr=Cr+Fr+xt($r,yr)|0,$r=$r+zt|0,Cr=Cr+ir+xt($r,zt)|0;var an=Gr+Vt|0,Er=fr+ar+xt(an,Gr)|0;tr=Yt,wt=vt,Yt=jt,vt=ht,jt=Gt,ht=ft,ft=ot+$r|0,Gt=Dt+Cr+xt(ft,ot)|0,Dt=Pt,ot=It,Pt=kt,It=lr,kt=Ot,lr=er,er=$r+an|0,Ot=Cr+Er+xt(er,$r)|0}this._al=this._al+er|0,this._bl=this._bl+lr|0,this._cl=this._cl+It|0,this._dl=this._dl+ot|0,this._el=this._el+ft|0,this._fl=this._fl+ht|0,this._gl=this._gl+vt|0,this._hl=this._hl+wt|0,this._ah=this._ah+Ot+xt(this._al,er)|0,this._bh=this._bh+kt+xt(this._bl,lr)|0,this._ch=this._ch+Pt+xt(this._cl,It)|0,this._dh=this._dh+Dt+xt(this._dl,ot)|0,this._eh=this._eh+Gt+xt(this._el,ft)|0,this._fh=this._fh+jt+xt(this._fl,ht)|0,this._gh=this._gh+Yt+xt(this._gl,vt)|0,this._hh=this._hh+tr+xt(this._hl,wt)|0},it.prototype._hash=function(){var Nt=rt.allocUnsafe(64);function Ct(Ot,kt,Pt){Nt.writeInt32BE(Ot,Pt),Nt.writeInt32BE(kt,Pt+4)}return Ct(this._ah,this._al,0),Ct(this._bh,this._bl,8),Ct(this._ch,this._cl,16),Ct(this._dh,this._dl,24),Ct(this._eh,this._el,32),Ct(this._fh,this._fl,40),Ct(this._gh,this._gl,48),Ct(this._hh,this._hl,56),Nt},sha512$1=it,sha512$1}var sha384$1,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$1;hasRequiredSha384=1;var tt=requireInherits_browser(),et=requireSha512(),rt=requireHash$1(),nt=safeBufferExports.Buffer,at=new Array(160);function it(){this.init(),this._w=at,rt.call(this,128,112)}return tt(it,et),it.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},it.prototype._hash=function(){var st=nt.allocUnsafe(48);function dt(pt,mt,yt){st.writeInt32BE(pt,yt),st.writeInt32BE(mt,yt+4)}return dt(this._ah,this._al,0),dt(this._bh,this._bl,8),dt(this._ch,this._cl,16),dt(this._dh,this._dl,24),dt(this._eh,this._el,32),dt(this._fh,this._fl,40),st},sha384$1=it,sha384$1}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var tt=sha_js.exports=function(rt){rt=rt.toLowerCase();var nt=tt[rt];if(!nt)throw new Error(rt+" is not supported (we accept pull requests)");return new nt};return tt.sha=requireSha$1(),tt.sha1=requireSha1(),tt.sha224=requireSha224(),tt.sha256=requireSha256(),tt.sha384=requireSha384(),tt.sha512=requireSha512(),sha_js.exports}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=rt;var tt=requireEvents().EventEmitter,et=requireInherits_browser();et(rt,tt),rt.Readable=require_stream_readable$1(),rt.Writable=require_stream_writable$1(),rt.Duplex=require_stream_duplex$1(),rt.Transform=require_stream_transform$1(),rt.PassThrough=require_stream_passthrough$1(),rt.finished=requireEndOfStream(),rt.pipeline=requirePipeline(),rt.Stream=rt;function rt(){tt.call(this)}return rt.prototype.pipe=function(nt,at){var it=this;function st(At){nt.writable&&nt.write(At)===!1&&it.pause&&it.pause()}it.on("data",st);function dt(){it.readable&&it.resume&&it.resume()}nt.on("drain",dt),!nt._isStdio&&(!at||at.end!==!1)&&(it.on("end",mt),it.on("close",yt));var pt=!1;function mt(){pt||(pt=!0,nt.end())}function yt(){pt||(pt=!0,typeof nt.destroy=="function"&&nt.destroy())}function Rt(At){if(Tt(),tt.listenerCount(this,"error")===0)throw At}it.on("error",Rt),nt.on("error",Rt);function Tt(){it.removeListener("data",st),nt.removeListener("drain",dt),it.removeListener("end",mt),it.removeListener("close",yt),it.removeListener("error",Rt),nt.removeListener("error",Rt),it.removeListener("end",Tt),it.removeListener("close",Tt),nt.removeListener("close",Tt)}return it.on("end",Tt),it.on("close",Tt),nt.on("close",Tt),nt.emit("pipe",it),nt},streamBrowserify}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var tt=safeBufferExports.Buffer,et=requireStreamBrowserify().Transform,rt=requireString_decoder().StringDecoder,nt=requireInherits_browser();function at(it){et.call(this),this.hashMode=typeof it=="string",this.hashMode?this[it]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return nt(at,et),at.prototype.update=function(it,st,dt){typeof it=="string"&&(it=tt.from(it,st));var pt=this._update(it);return this.hashMode?this:(dt&&(pt=this._toString(pt,dt)),pt)},at.prototype.setAutoPadding=function(){},at.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},at.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},at.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},at.prototype._transform=function(it,st,dt){var pt;try{this.hashMode?this._update(it):this.push(this._update(it))}catch(mt){pt=mt}finally{dt(pt)}},at.prototype._flush=function(it){var st;try{this.push(this.__final())}catch(dt){st=dt}it(st)},at.prototype._finalOrDigest=function(it){var st=this.__final()||tt.alloc(0);return it&&(st=this._toString(st,it,!0)),st},at.prototype._toString=function(it,st,dt){if(this._decoder||(this._decoder=new rt(st),this._encoding=st),this._encoding!==st)throw new Error("can't switch encodings");var pt=this._decoder.write(it);return dt&&(pt+=this._decoder.end()),pt},cipherBase=at,cipherBase}var browser$9,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$9;hasRequiredBrowser$9=1;var tt=requireInherits_browser(),et=requireMd5_js(),rt=requireRipemd160(),nt=requireSha_js(),at=requireCipherBase();function it(st){at.call(this,"digest"),this._hash=st}return tt(it,at),it.prototype._update=function(st){this._hash.update(st)},it.prototype._final=function(){return this._hash.digest()},browser$9=function(dt){return dt=dt.toLowerCase(),dt==="md5"?new et:dt==="rmd160"||dt==="ripemd160"?new rt:new it(nt(dt))},browser$9}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var tt=requireInherits_browser(),et=safeBufferExports.Buffer,rt=requireCipherBase(),nt=et.alloc(128),at=64;function it(st,dt){rt.call(this,"digest"),typeof dt=="string"&&(dt=et.from(dt)),this._alg=st,this._key=dt,dt.length>at?dt=st(dt):dt.length<at&&(dt=et.concat([dt,nt],at));for(var pt=this._ipad=et.allocUnsafe(at),mt=this._opad=et.allocUnsafe(at),yt=0;yt<at;yt++)pt[yt]=dt[yt]^54,mt[yt]=dt[yt]^92;this._hash=[pt]}return tt(it,rt),it.prototype._update=function(st){this._hash.push(st)},it.prototype._final=function(){var st=this._alg(et.concat(this._hash));return this._alg(et.concat([this._opad,st]))},legacy=it,legacy}var md5,hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5;hasRequiredMd5=1;var tt=requireMd5_js();return md5=function(et){return new tt().update(et).digest()},md5}var browser$8,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$8;hasRequiredBrowser$8=1;var tt=requireInherits_browser(),et=requireLegacy(),rt=requireCipherBase(),nt=safeBufferExports.Buffer,at=requireMd5(),it=requireRipemd160(),st=requireSha_js(),dt=nt.alloc(128);function pt(mt,yt){rt.call(this,"digest"),typeof yt=="string"&&(yt=nt.from(yt));var Rt=mt==="sha512"||mt==="sha384"?128:64;if(this._alg=mt,this._key=yt,yt.length>Rt){var Tt=mt==="rmd160"?new it:st(mt);yt=Tt.update(yt).digest()}else yt.length<Rt&&(yt=nt.concat([yt,dt],Rt));for(var At=this._ipad=nt.allocUnsafe(Rt),xt=this._opad=nt.allocUnsafe(Rt),Nt=0;Nt<Rt;Nt++)At[Nt]=yt[Nt]^54,xt[Nt]=yt[Nt]^92;this._hash=mt==="rmd160"?new it:st(mt),this._hash.update(At)}return tt(pt,rt),pt.prototype._update=function(mt){this._hash.update(mt)},pt.prototype._final=function(){var mt=this._hash.digest(),yt=this._alg==="rmd160"?new it:st(this._alg);return yt.update(this._opad).update(mt).digest()},browser$8=function(yt,Rt){return yt=yt.toLowerCase(),yt==="rmd160"||yt==="ripemd160"?new pt("rmd160",Rt):yt==="md5"?new et(at,Rt):new pt(yt,Rt)},browser$8}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256,sha224,sha384,sha512,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6),algos}var browser$7={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var tt=Math.pow(2,30)-1;return precondition=function(et,rt){if(typeof et!="number")throw new TypeError("Iterations not a number");if(et<0)throw new TypeError("Bad iterations");if(typeof rt!="number")throw new TypeError("Key length not a number");if(rt<0||rt>tt||rt!==rt)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var tt;if(commonjsGlobal$1.process&&commonjsGlobal$1.process.browser)tt="utf-8";else if(commonjsGlobal$1.process&&commonjsGlobal$1.process.version){var et=parseInt(process$1.version.split(".")[0].slice(1),10);tt=et>=6?"utf-8":"binary"}else tt="utf-8";return defaultEncoding_1=tt,defaultEncoding_1}var toBuffer,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer;hasRequiredToBuffer=1;var tt=safeBufferExports.Buffer;return toBuffer=function(et,rt,nt){if(tt.isBuffer(et))return et;if(typeof et=="string")return tt.from(et,rt);if(ArrayBuffer.isView(et))return tt.from(et.buffer);throw new TypeError(nt+" must be a string, a Buffer, a typed array or a DataView")},toBuffer}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var tt=requireMd5(),et=requireRipemd160(),rt=requireSha_js(),nt=safeBufferExports.Buffer,at=requirePrecondition(),it=requireDefaultEncoding(),st=requireToBuffer(),dt=nt.alloc(128),pt={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function mt(Tt,At,xt){var Nt=yt(Tt),Ct=Tt==="sha512"||Tt==="sha384"?128:64;At.length>Ct?At=Nt(At):At.length<Ct&&(At=nt.concat([At,dt],Ct));for(var Ot=nt.allocUnsafe(Ct+pt[Tt]),kt=nt.allocUnsafe(Ct+pt[Tt]),Pt=0;Pt<Ct;Pt++)Ot[Pt]=At[Pt]^54,kt[Pt]=At[Pt]^92;var Dt=nt.allocUnsafe(Ct+xt+4);Ot.copy(Dt,0,0,Ct),this.ipad1=Dt,this.ipad2=Ot,this.opad=kt,this.alg=Tt,this.blocksize=Ct,this.hash=Nt,this.size=pt[Tt]}mt.prototype.run=function(Tt,At){Tt.copy(At,this.blocksize);var xt=this.hash(At);return xt.copy(this.opad,this.blocksize),this.hash(this.opad)};function yt(Tt){function At(Nt){return rt(Tt).update(Nt).digest()}function xt(Nt){return new et().update(Nt).digest()}return Tt==="rmd160"||Tt==="ripemd160"?xt:Tt==="md5"?tt:At}function Rt(Tt,At,xt,Nt,Ct){at(xt,Nt),Tt=st(Tt,it,"Password"),At=st(At,it,"Salt"),Ct=Ct||"sha1";var Ot=new mt(Ct,Tt,At.length),kt=nt.allocUnsafe(Nt),Pt=nt.allocUnsafe(At.length+4);At.copy(Pt,0,0,At.length);for(var Dt=0,Gt=pt[Ct],jt=Math.ceil(Nt/Gt),Yt=1;Yt<=jt;Yt++){Pt.writeUInt32BE(Yt,At.length);for(var tr=Ot.run(Pt,Ot.ipad1),er=tr,lr=1;lr<xt;lr++){er=Ot.run(er,Ot.ipad2);for(var It=0;It<Gt;It++)tr[It]^=er[It]}tr.copy(kt,Dt),Dt+=Gt}return kt}return syncBrowser=Rt,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var tt=safeBufferExports.Buffer,et=requirePrecondition(),rt=requireDefaultEncoding(),nt=requireSyncBrowser(),at=requireToBuffer(),it,st=commonjsGlobal$1.crypto&&commonjsGlobal$1.crypto.subtle,dt={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},pt=[];function mt(xt){if(commonjsGlobal$1.process&&!commonjsGlobal$1.process.browser||!st||!st.importKey||!st.deriveBits)return Promise.resolve(!1);if(pt[xt]!==void 0)return pt[xt];it=it||tt.alloc(8);var Nt=Tt(it,it,10,128,xt).then(function(){return!0}).catch(function(){return!1});return pt[xt]=Nt,Nt}var yt;function Rt(){return yt||(commonjsGlobal$1.process&&commonjsGlobal$1.process.nextTick?yt=commonjsGlobal$1.process.nextTick:commonjsGlobal$1.queueMicrotask?yt=commonjsGlobal$1.queueMicrotask:commonjsGlobal$1.setImmediate?yt=commonjsGlobal$1.setImmediate:yt=commonjsGlobal$1.setTimeout,yt)}function Tt(xt,Nt,Ct,Ot,kt){return st.importKey("raw",xt,{name:"PBKDF2"},!1,["deriveBits"]).then(function(Pt){return st.deriveBits({name:"PBKDF2",salt:Nt,iterations:Ct,hash:{name:kt}},Pt,Ot<<3)}).then(function(Pt){return tt.from(Pt)})}function At(xt,Nt){xt.then(function(Ct){Rt()(function(){Nt(null,Ct)})},function(Ct){Rt()(function(){Nt(Ct)})})}return async=function(xt,Nt,Ct,Ot,kt,Pt){typeof kt=="function"&&(Pt=kt,kt=void 0),kt=kt||"sha1";var Dt=dt[kt.toLowerCase()];if(!Dt||typeof commonjsGlobal$1.Promise!="function"){Rt()(function(){var Gt;try{Gt=nt(xt,Nt,Ct,Ot,kt)}catch(jt){return Pt(jt)}Pt(null,Gt)});return}if(et(Ct,Ot),xt=at(xt,rt,"Password"),Nt=at(Nt,rt,"Salt"),typeof Pt!="function")throw new Error("No callback provided to pbkdf2");At(mt(Dt).then(function(Gt){return Gt?Tt(xt,Nt,Ct,Ot,Dt):nt(xt,Nt,Ct,Ot,kt)}),Pt)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$7.pbkdf2=requireAsync(),browser$7.pbkdf2Sync=requireSyncBrowser()),browser$7}var browser$6={},des$1={},utils$3={},hasRequiredUtils$3;function requireUtils$3(){if(hasRequiredUtils$3)return utils$3;hasRequiredUtils$3=1,utils$3.readUInt32BE=function(at,it){var st=at[0+it]<<24|at[1+it]<<16|at[2+it]<<8|at[3+it];return st>>>0},utils$3.writeUInt32BE=function(at,it,st){at[0+st]=it>>>24,at[1+st]=it>>>16&255,at[2+st]=it>>>8&255,at[3+st]=it&255},utils$3.ip=function(at,it,st,dt){for(var pt=0,mt=0,yt=6;yt>=0;yt-=2){for(var Rt=0;Rt<=24;Rt+=8)pt<<=1,pt|=it>>>Rt+yt&1;for(var Rt=0;Rt<=24;Rt+=8)pt<<=1,pt|=at>>>Rt+yt&1}for(var yt=6;yt>=0;yt-=2){for(var Rt=1;Rt<=25;Rt+=8)mt<<=1,mt|=it>>>Rt+yt&1;for(var Rt=1;Rt<=25;Rt+=8)mt<<=1,mt|=at>>>Rt+yt&1}st[dt+0]=pt>>>0,st[dt+1]=mt>>>0},utils$3.rip=function(at,it,st,dt){for(var pt=0,mt=0,yt=0;yt<4;yt++)for(var Rt=24;Rt>=0;Rt-=8)pt<<=1,pt|=it>>>Rt+yt&1,pt<<=1,pt|=at>>>Rt+yt&1;for(var yt=4;yt<8;yt++)for(var Rt=24;Rt>=0;Rt-=8)mt<<=1,mt|=it>>>Rt+yt&1,mt<<=1,mt|=at>>>Rt+yt&1;st[dt+0]=pt>>>0,st[dt+1]=mt>>>0},utils$3.pc1=function(at,it,st,dt){for(var pt=0,mt=0,yt=7;yt>=5;yt--){for(var Rt=0;Rt<=24;Rt+=8)pt<<=1,pt|=it>>Rt+yt&1;for(var Rt=0;Rt<=24;Rt+=8)pt<<=1,pt|=at>>Rt+yt&1}for(var Rt=0;Rt<=24;Rt+=8)pt<<=1,pt|=it>>Rt+yt&1;for(var yt=1;yt<=3;yt++){for(var Rt=0;Rt<=24;Rt+=8)mt<<=1,mt|=it>>Rt+yt&1;for(var Rt=0;Rt<=24;Rt+=8)mt<<=1,mt|=at>>Rt+yt&1}for(var Rt=0;Rt<=24;Rt+=8)mt<<=1,mt|=at>>Rt+yt&1;st[dt+0]=pt>>>0,st[dt+1]=mt>>>0},utils$3.r28shl=function(at,it){return at<<it&268435455|at>>>28-it};var tt=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$3.pc2=function(at,it,st,dt){for(var pt=0,mt=0,yt=tt.length>>>1,Rt=0;Rt<yt;Rt++)pt<<=1,pt|=at>>>tt[Rt]&1;for(var Rt=yt;Rt<tt.length;Rt++)mt<<=1,mt|=it>>>tt[Rt]&1;st[dt+0]=pt>>>0,st[dt+1]=mt>>>0},utils$3.expand=function(at,it,st){var dt=0,pt=0;dt=(at&1)<<5|at>>>27;for(var mt=23;mt>=15;mt-=4)dt<<=6,dt|=at>>>mt&63;for(var mt=11;mt>=3;mt-=4)pt|=at>>>mt&63,pt<<=6;pt|=(at&31)<<1|at>>>31,it[st+0]=dt>>>0,it[st+1]=pt>>>0};var et=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$3.substitute=function(at,it){for(var st=0,dt=0;dt<4;dt++){var pt=at>>>18-dt*6&63,mt=et[dt*64+pt];st<<=4,st|=mt}for(var dt=0;dt<4;dt++){var pt=it>>>18-dt*6&63,mt=et[4*64+dt*64+pt];st<<=4,st|=mt}return st>>>0};var rt=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$3.permute=function(at){for(var it=0,st=0;st<rt.length;st++)it<<=1,it|=at>>>rt[st]&1;return it>>>0},utils$3.padSplit=function(at,it,st){for(var dt=at.toString(2);dt.length<it;)dt="0"+dt;for(var pt=[],mt=0;mt<it;mt+=st)pt.push(dt.slice(mt,mt+st));return pt.join(" ")},utils$3}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=tt;function tt(et,rt){if(!et)throw new Error(rt||"Assertion failed")}return tt.equal=function(rt,nt,at){if(rt!=nt)throw new Error(at||"Assertion failed: "+rt+" != "+nt)},minimalisticAssert}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var tt=requireMinimalisticAssert();function et(rt){this.options=rt,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=rt.padding!==!1}return cipher=et,et.prototype._init=function(){},et.prototype.update=function(nt){return nt.length===0?[]:this.type==="decrypt"?this._updateDecrypt(nt):this._updateEncrypt(nt)},et.prototype._buffer=function(nt,at){for(var it=Math.min(this.buffer.length-this.bufferOff,nt.length-at),st=0;st<it;st++)this.buffer[this.bufferOff+st]=nt[at+st];return this.bufferOff+=it,it},et.prototype._flushBuffer=function(nt,at){return this._update(this.buffer,0,nt,at),this.bufferOff=0,this.blockSize},et.prototype._updateEncrypt=function(nt){var at=0,it=0,st=(this.bufferOff+nt.length)/this.blockSize|0,dt=new Array(st*this.blockSize);this.bufferOff!==0&&(at+=this._buffer(nt,at),this.bufferOff===this.buffer.length&&(it+=this._flushBuffer(dt,it)));for(var pt=nt.length-(nt.length-at)%this.blockSize;at<pt;at+=this.blockSize)this._update(nt,at,dt,it),it+=this.blockSize;for(;at<nt.length;at++,this.bufferOff++)this.buffer[this.bufferOff]=nt[at];return dt},et.prototype._updateDecrypt=function(nt){for(var at=0,it=0,st=Math.ceil((this.bufferOff+nt.length)/this.blockSize)-1,dt=new Array(st*this.blockSize);st>0;st--)at+=this._buffer(nt,at),it+=this._flushBuffer(dt,it);return at+=this._buffer(nt,at),dt},et.prototype.final=function(nt){var at;nt&&(at=this.update(nt));var it;return this.type==="encrypt"?it=this._finalEncrypt():it=this._finalDecrypt(),at?at.concat(it):it},et.prototype._pad=function(nt,at){if(at===0)return!1;for(;at<nt.length;)nt[at++]=0;return!0},et.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var nt=new Array(this.blockSize);return this._update(this.buffer,0,nt,0),nt},et.prototype._unpad=function(nt){return nt},et.prototype._finalDecrypt=function(){tt.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var nt=new Array(this.blockSize);return this._flushBuffer(nt,0),this._unpad(nt)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var tt=requireMinimalisticAssert(),et=requireInherits_browser(),rt=requireUtils$3(),nt=requireCipher();function at(){this.tmp=new Array(2),this.keys=null}function it(dt){nt.call(this,dt);var pt=new at;this._desState=pt,this.deriveKeys(pt,dt.key)}et(it,nt),des=it,it.create=function(pt){return new it(pt)};var st=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return it.prototype.deriveKeys=function(pt,mt){pt.keys=new Array(16*2),tt.equal(mt.length,this.blockSize,"Invalid key length");var yt=rt.readUInt32BE(mt,0),Rt=rt.readUInt32BE(mt,4);rt.pc1(yt,Rt,pt.tmp,0),yt=pt.tmp[0],Rt=pt.tmp[1];for(var Tt=0;Tt<pt.keys.length;Tt+=2){var At=st[Tt>>>1];yt=rt.r28shl(yt,At),Rt=rt.r28shl(Rt,At),rt.pc2(yt,Rt,pt.keys,Tt)}},it.prototype._update=function(pt,mt,yt,Rt){var Tt=this._desState,At=rt.readUInt32BE(pt,mt),xt=rt.readUInt32BE(pt,mt+4);rt.ip(At,xt,Tt.tmp,0),At=Tt.tmp[0],xt=Tt.tmp[1],this.type==="encrypt"?this._encrypt(Tt,At,xt,Tt.tmp,0):this._decrypt(Tt,At,xt,Tt.tmp,0),At=Tt.tmp[0],xt=Tt.tmp[1],rt.writeUInt32BE(yt,At,Rt),rt.writeUInt32BE(yt,xt,Rt+4)},it.prototype._pad=function(pt,mt){if(this.padding===!1)return!1;for(var yt=pt.length-mt,Rt=mt;Rt<pt.length;Rt++)pt[Rt]=yt;return!0},it.prototype._unpad=function(pt){if(this.padding===!1)return pt;for(var mt=pt[pt.length-1],yt=pt.length-mt;yt<pt.length;yt++)tt.equal(pt[yt],mt);return pt.slice(0,pt.length-mt)},it.prototype._encrypt=function(pt,mt,yt,Rt,Tt){for(var At=mt,xt=yt,Nt=0;Nt<pt.keys.length;Nt+=2){var Ct=pt.keys[Nt],Ot=pt.keys[Nt+1];rt.expand(xt,pt.tmp,0),Ct^=pt.tmp[0],Ot^=pt.tmp[1];var kt=rt.substitute(Ct,Ot),Pt=rt.permute(kt),Dt=xt;xt=(At^Pt)>>>0,At=Dt}rt.rip(xt,At,Rt,Tt)},it.prototype._decrypt=function(pt,mt,yt,Rt,Tt){for(var At=yt,xt=mt,Nt=pt.keys.length-2;Nt>=0;Nt-=2){var Ct=pt.keys[Nt],Ot=pt.keys[Nt+1];rt.expand(At,pt.tmp,0),Ct^=pt.tmp[0],Ot^=pt.tmp[1];var kt=rt.substitute(Ct,Ot),Pt=rt.permute(kt),Dt=At;At=(xt^Pt)>>>0,xt=Dt}rt.rip(At,xt,Rt,Tt)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var tt=requireMinimalisticAssert(),et=requireInherits_browser(),rt={};function nt(it){tt.equal(it.length,8,"Invalid IV length"),this.iv=new Array(8);for(var st=0;st<this.iv.length;st++)this.iv[st]=it[st]}function at(it){function st(yt){it.call(this,yt),this._cbcInit()}et(st,it);for(var dt=Object.keys(rt),pt=0;pt<dt.length;pt++){var mt=dt[pt];st.prototype[mt]=rt[mt]}return st.create=function(Rt){return new st(Rt)},st}return cbc$1.instantiate=at,rt._cbcInit=function(){var st=new nt(this.options.iv);this._cbcState=st},rt._update=function(st,dt,pt,mt){var yt=this._cbcState,Rt=this.constructor.super_.prototype,Tt=yt.iv;if(this.type==="encrypt"){for(var At=0;At<this.blockSize;At++)Tt[At]^=st[dt+At];Rt._update.call(this,Tt,0,pt,mt);for(var At=0;At<this.blockSize;At++)Tt[At]=pt[mt+At]}else{Rt._update.call(this,st,dt,pt,mt);for(var At=0;At<this.blockSize;At++)pt[mt+At]^=Tt[At];for(var At=0;At<this.blockSize;At++)Tt[At]=st[dt+At]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var tt=requireMinimalisticAssert(),et=requireInherits_browser(),rt=requireCipher(),nt=requireDes$1();function at(st,dt){tt.equal(dt.length,24,"Invalid key length");var pt=dt.slice(0,8),mt=dt.slice(8,16),yt=dt.slice(16,24);st==="encrypt"?this.ciphers=[nt.create({type:"encrypt",key:pt}),nt.create({type:"decrypt",key:mt}),nt.create({type:"encrypt",key:yt})]:this.ciphers=[nt.create({type:"decrypt",key:yt}),nt.create({type:"encrypt",key:mt}),nt.create({type:"decrypt",key:pt})]}function it(st){rt.call(this,st);var dt=new at(this.type,this.options.key);this._edeState=dt}return et(it,rt),ede=it,it.create=function(dt){return new it(dt)},it.prototype._update=function(dt,pt,mt,yt){var Rt=this._edeState;Rt.ciphers[0]._update(dt,pt,mt,yt),Rt.ciphers[1]._update(mt,yt,mt,yt),Rt.ciphers[2]._update(mt,yt,mt,yt)},it.prototype._pad=nt.prototype._pad,it.prototype._unpad=nt.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$3(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var tt=requireCipherBase(),et=requireDes(),rt=requireInherits_browser(),nt=safeBufferExports.Buffer,at={"des-ede3-cbc":et.CBC.instantiate(et.EDE),"des-ede3":et.EDE,"des-ede-cbc":et.CBC.instantiate(et.EDE),"des-ede":et.EDE,"des-cbc":et.CBC.instantiate(et.DES),"des-ecb":et.DES};at.des=at["des-cbc"],at.des3=at["des-ede3-cbc"],browserifyDes=it,rt(it,tt);function it(st){tt.call(this);var dt=st.mode.toLowerCase(),pt=at[dt],mt;st.decrypt?mt="decrypt":mt="encrypt";var yt=st.key;nt.isBuffer(yt)||(yt=nt.from(yt)),(dt==="des-ede"||dt==="des-ede-cbc")&&(yt=nt.concat([yt,yt.slice(0,8)]));var Rt=st.iv;nt.isBuffer(Rt)||(Rt=nt.from(Rt)),this._des=pt.create({key:yt,iv:Rt,type:mt})}return it.prototype._update=function(st){return nt.from(this._des.update(st))},it.prototype._final=function(){return nt.from(this._des.final())},browserifyDes}var browser$5={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(tt,et){return tt._cipher.encryptBlock(et)},ecb.decrypt=function(tt,et){return tt._cipher.decryptBlock(et)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(et,rt){for(var nt=Math.min(et.length,rt.length),at=new Buffer(nt),it=0;it<nt;++it)at[it]=et[it]^rt[it];return at}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var tt=requireBufferXor();return cbc.encrypt=function(et,rt){var nt=tt(rt,et._prev);return et._prev=et._cipher.encryptBlock(nt),et._prev},cbc.decrypt=function(et,rt){var nt=et._prev;et._prev=rt;var at=et._cipher.decryptBlock(rt);return tt(at,nt)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var tt=safeBufferExports.Buffer,et=requireBufferXor();function rt(nt,at,it){var st=at.length,dt=et(at,nt._cache);return nt._cache=nt._cache.slice(st),nt._prev=tt.concat([nt._prev,it?at:dt]),dt}return cfb.encrypt=function(nt,at,it){for(var st=tt.allocUnsafe(0),dt;at.length;)if(nt._cache.length===0&&(nt._cache=nt._cipher.encryptBlock(nt._prev),nt._prev=tt.allocUnsafe(0)),nt._cache.length<=at.length)dt=nt._cache.length,st=tt.concat([st,rt(nt,at.slice(0,dt),it)]),at=at.slice(dt);else{st=tt.concat([st,rt(nt,at,it)]);break}return st},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var tt=safeBufferExports.Buffer;function et(rt,nt,at){var it=rt._cipher.encryptBlock(rt._prev),st=it[0]^nt;return rt._prev=tt.concat([rt._prev.slice(1),tt.from([at?nt:st])]),st}return cfb8.encrypt=function(rt,nt,at){for(var it=nt.length,st=tt.allocUnsafe(it),dt=-1;++dt<it;)st[dt]=et(rt,nt[dt],at);return st},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var tt=safeBufferExports.Buffer;function et(nt,at,it){for(var st,dt=-1,pt=8,mt=0,yt,Rt;++dt<pt;)st=nt._cipher.encryptBlock(nt._prev),yt=at&1<<7-dt?128:0,Rt=st[0]^yt,mt+=(Rt&128)>>dt%8,nt._prev=rt(nt._prev,it?yt:Rt);return mt}function rt(nt,at){var it=nt.length,st=-1,dt=tt.allocUnsafe(nt.length);for(nt=tt.concat([nt,tt.from([at])]);++st<it;)dt[st]=nt[st]<<1|nt[st+1]>>7;return dt}return cfb1.encrypt=function(nt,at,it){for(var st=at.length,dt=tt.allocUnsafe(st),pt=-1;++pt<st;)dt[pt]=et(nt,at[pt],it);return dt},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var tt=requireBufferXor();function et(rt){return rt._prev=rt._cipher.encryptBlock(rt._prev),rt._prev}return ofb.encrypt=function(rt,nt){for(;rt._cache.length<nt.length;)rt._cache=Buffer.concat([rt._cache,et(rt)]);var at=rt._cache.slice(0,nt.length);return rt._cache=rt._cache.slice(nt.length),tt(nt,at)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function tt(et){for(var rt=et.length,nt;rt--;)if(nt=et.readUInt8(rt),nt===255)et.writeUInt8(0,rt);else{nt++,et.writeUInt8(nt,rt);break}}return incr32_1=tt,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var tt=requireBufferXor(),et=safeBufferExports.Buffer,rt=requireIncr32();function nt(it){var st=it._cipher.encryptBlockRaw(it._prev);return rt(it._prev),st}var at=16;return ctr.encrypt=function(it,st){var dt=Math.ceil(st.length/at),pt=it._cache.length;it._cache=et.concat([it._cache,et.allocUnsafe(dt*at)]);for(var mt=0;mt<dt;mt++){var yt=nt(it),Rt=pt+mt*at;it._cache.writeUInt32BE(yt[0],Rt+0),it._cache.writeUInt32BE(yt[1],Rt+4),it._cache.writeUInt32BE(yt[2],Rt+8),it._cache.writeUInt32BE(yt[3],Rt+12)}var Tt=it._cache.slice(0,st.length);return it._cache=it._cache.slice(st.length),tt(st,Tt)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var tt={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},et=require$$2;for(var rt in et)et[rt].module=tt[et[rt].mode];return modes_1=et,modes_1}var aes={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var tt=safeBufferExports.Buffer;function et(dt){tt.isBuffer(dt)||(dt=tt.from(dt));for(var pt=dt.length/4|0,mt=new Array(pt),yt=0;yt<pt;yt++)mt[yt]=dt.readUInt32BE(yt*4);return mt}function rt(dt){for(var pt=0;pt<dt.length;dt++)dt[pt]=0}function nt(dt,pt,mt,yt,Rt){for(var Tt=mt[0],At=mt[1],xt=mt[2],Nt=mt[3],Ct=dt[0]^pt[0],Ot=dt[1]^pt[1],kt=dt[2]^pt[2],Pt=dt[3]^pt[3],Dt,Gt,jt,Yt,tr=4,er=1;er<Rt;er++)Dt=Tt[Ct>>>24]^At[Ot>>>16&255]^xt[kt>>>8&255]^Nt[Pt&255]^pt[tr++],Gt=Tt[Ot>>>24]^At[kt>>>16&255]^xt[Pt>>>8&255]^Nt[Ct&255]^pt[tr++],jt=Tt[kt>>>24]^At[Pt>>>16&255]^xt[Ct>>>8&255]^Nt[Ot&255]^pt[tr++],Yt=Tt[Pt>>>24]^At[Ct>>>16&255]^xt[Ot>>>8&255]^Nt[kt&255]^pt[tr++],Ct=Dt,Ot=Gt,kt=jt,Pt=Yt;return Dt=(yt[Ct>>>24]<<24|yt[Ot>>>16&255]<<16|yt[kt>>>8&255]<<8|yt[Pt&255])^pt[tr++],Gt=(yt[Ot>>>24]<<24|yt[kt>>>16&255]<<16|yt[Pt>>>8&255]<<8|yt[Ct&255])^pt[tr++],jt=(yt[kt>>>24]<<24|yt[Pt>>>16&255]<<16|yt[Ct>>>8&255]<<8|yt[Ot&255])^pt[tr++],Yt=(yt[Pt>>>24]<<24|yt[Ct>>>16&255]<<16|yt[Ot>>>8&255]<<8|yt[kt&255])^pt[tr++],Dt=Dt>>>0,Gt=Gt>>>0,jt=jt>>>0,Yt=Yt>>>0,[Dt,Gt,jt,Yt]}var at=[0,1,2,4,8,16,32,64,128,27,54],it=function(){for(var dt=new Array(256),pt=0;pt<256;pt++)pt<128?dt[pt]=pt<<1:dt[pt]=pt<<1^283;for(var mt=[],yt=[],Rt=[[],[],[],[]],Tt=[[],[],[],[]],At=0,xt=0,Nt=0;Nt<256;++Nt){var Ct=xt^xt<<1^xt<<2^xt<<3^xt<<4;Ct=Ct>>>8^Ct&255^99,mt[At]=Ct,yt[Ct]=At;var Ot=dt[At],kt=dt[Ot],Pt=dt[kt],Dt=dt[Ct]*257^Ct*16843008;Rt[0][At]=Dt<<24|Dt>>>8,Rt[1][At]=Dt<<16|Dt>>>16,Rt[2][At]=Dt<<8|Dt>>>24,Rt[3][At]=Dt,Dt=Pt*16843009^kt*65537^Ot*257^At*16843008,Tt[0][Ct]=Dt<<24|Dt>>>8,Tt[1][Ct]=Dt<<16|Dt>>>16,Tt[2][Ct]=Dt<<8|Dt>>>24,Tt[3][Ct]=Dt,At===0?At=xt=1:(At=Ot^dt[dt[dt[Pt^Ot]]],xt^=dt[dt[xt]])}return{SBOX:mt,INV_SBOX:yt,SUB_MIX:Rt,INV_SUB_MIX:Tt}}();function st(dt){this._key=et(dt),this._reset()}return st.blockSize=4*4,st.keySize=256/8,st.prototype.blockSize=st.blockSize,st.prototype.keySize=st.keySize,st.prototype._reset=function(){for(var dt=this._key,pt=dt.length,mt=pt+6,yt=(mt+1)*4,Rt=[],Tt=0;Tt<pt;Tt++)Rt[Tt]=dt[Tt];for(Tt=pt;Tt<yt;Tt++){var At=Rt[Tt-1];Tt%pt===0?(At=At<<8|At>>>24,At=it.SBOX[At>>>24]<<24|it.SBOX[At>>>16&255]<<16|it.SBOX[At>>>8&255]<<8|it.SBOX[At&255],At^=at[Tt/pt|0]<<24):pt>6&&Tt%pt===4&&(At=it.SBOX[At>>>24]<<24|it.SBOX[At>>>16&255]<<16|it.SBOX[At>>>8&255]<<8|it.SBOX[At&255]),Rt[Tt]=Rt[Tt-pt]^At}for(var xt=[],Nt=0;Nt<yt;Nt++){var Ct=yt-Nt,Ot=Rt[Ct-(Nt%4?0:4)];Nt<4||Ct<=4?xt[Nt]=Ot:xt[Nt]=it.INV_SUB_MIX[0][it.SBOX[Ot>>>24]]^it.INV_SUB_MIX[1][it.SBOX[Ot>>>16&255]]^it.INV_SUB_MIX[2][it.SBOX[Ot>>>8&255]]^it.INV_SUB_MIX[3][it.SBOX[Ot&255]]}this._nRounds=mt,this._keySchedule=Rt,this._invKeySchedule=xt},st.prototype.encryptBlockRaw=function(dt){return dt=et(dt),nt(dt,this._keySchedule,it.SUB_MIX,it.SBOX,this._nRounds)},st.prototype.encryptBlock=function(dt){var pt=this.encryptBlockRaw(dt),mt=tt.allocUnsafe(16);return mt.writeUInt32BE(pt[0],0),mt.writeUInt32BE(pt[1],4),mt.writeUInt32BE(pt[2],8),mt.writeUInt32BE(pt[3],12),mt},st.prototype.decryptBlock=function(dt){dt=et(dt);var pt=dt[1];dt[1]=dt[3],dt[3]=pt;var mt=nt(dt,this._invKeySchedule,it.INV_SUB_MIX,it.INV_SBOX,this._nRounds),yt=tt.allocUnsafe(16);return yt.writeUInt32BE(mt[0],0),yt.writeUInt32BE(mt[3],4),yt.writeUInt32BE(mt[2],8),yt.writeUInt32BE(mt[1],12),yt},st.prototype.scrub=function(){rt(this._keySchedule),rt(this._invKeySchedule),rt(this._key)},aes.AES=st,aes}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var tt=safeBufferExports.Buffer,et=tt.alloc(16,0);function rt(it){return[it.readUInt32BE(0),it.readUInt32BE(4),it.readUInt32BE(8),it.readUInt32BE(12)]}function nt(it){var st=tt.allocUnsafe(16);return st.writeUInt32BE(it[0]>>>0,0),st.writeUInt32BE(it[1]>>>0,4),st.writeUInt32BE(it[2]>>>0,8),st.writeUInt32BE(it[3]>>>0,12),st}function at(it){this.h=it,this.state=tt.alloc(16,0),this.cache=tt.allocUnsafe(0)}return at.prototype.ghash=function(it){for(var st=-1;++st<it.length;)this.state[st]^=it[st];this._multiply()},at.prototype._multiply=function(){for(var it=rt(this.h),st=[0,0,0,0],dt,pt,mt,yt=-1;++yt<128;){for(pt=(this.state[~~(yt/8)]&1<<7-yt%8)!==0,pt&&(st[0]^=it[0],st[1]^=it[1],st[2]^=it[2],st[3]^=it[3]),mt=(it[3]&1)!==0,dt=3;dt>0;dt--)it[dt]=it[dt]>>>1|(it[dt-1]&1)<<31;it[0]=it[0]>>>1,mt&&(it[0]=it[0]^225<<24)}this.state=nt(st)},at.prototype.update=function(it){this.cache=tt.concat([this.cache,it]);for(var st;this.cache.length>=16;)st=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(st)},at.prototype.final=function(it,st){return this.cache.length&&this.ghash(tt.concat([this.cache,et],16)),this.ghash(nt([0,it,0,st])),this.state},ghash=at,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var tt=requireAes(),et=safeBufferExports.Buffer,rt=requireCipherBase(),nt=requireInherits_browser(),at=requireGhash(),it=requireBufferXor(),st=requireIncr32();function dt(yt,Rt){var Tt=0;yt.length!==Rt.length&&Tt++;for(var At=Math.min(yt.length,Rt.length),xt=0;xt<At;++xt)Tt+=yt[xt]^Rt[xt];return Tt}function pt(yt,Rt,Tt){if(Rt.length===12)return yt._finID=et.concat([Rt,et.from([0,0,0,1])]),et.concat([Rt,et.from([0,0,0,2])]);var At=new at(Tt),xt=Rt.length,Nt=xt%16;At.update(Rt),Nt&&(Nt=16-Nt,At.update(et.alloc(Nt,0))),At.update(et.alloc(8,0));var Ct=xt*8,Ot=et.alloc(8);Ot.writeUIntBE(Ct,0,8),At.update(Ot),yt._finID=At.state;var kt=et.from(yt._finID);return st(kt),kt}function mt(yt,Rt,Tt,At){rt.call(this);var xt=et.alloc(4,0);this._cipher=new tt.AES(Rt);var Nt=this._cipher.encryptBlock(xt);this._ghash=new at(Nt),Tt=pt(this,Tt,Nt),this._prev=et.from(Tt),this._cache=et.allocUnsafe(0),this._secCache=et.allocUnsafe(0),this._decrypt=At,this._alen=0,this._len=0,this._mode=yt,this._authTag=null,this._called=!1}return nt(mt,rt),mt.prototype._update=function(yt){if(!this._called&&this._alen){var Rt=16-this._alen%16;Rt<16&&(Rt=et.alloc(Rt,0),this._ghash.update(Rt))}this._called=!0;var Tt=this._mode.encrypt(this,yt);return this._decrypt?this._ghash.update(yt):this._ghash.update(Tt),this._len+=yt.length,Tt},mt.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var yt=it(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&dt(yt,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=yt,this._cipher.scrub()},mt.prototype.getAuthTag=function(){if(this._decrypt||!et.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},mt.prototype.setAuthTag=function(Rt){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=Rt},mt.prototype.setAAD=function(Rt){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(Rt),this._alen+=Rt.length},authCipher=mt,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var tt=requireAes(),et=safeBufferExports.Buffer,rt=requireCipherBase(),nt=requireInherits_browser();function at(it,st,dt,pt){rt.call(this),this._cipher=new tt.AES(st),this._prev=et.from(dt),this._cache=et.allocUnsafe(0),this._secCache=et.allocUnsafe(0),this._decrypt=pt,this._mode=it}return nt(at,rt),at.prototype._update=function(it){return this._mode.encrypt(this,it,this._decrypt)},at.prototype._final=function(){this._cipher.scrub()},streamCipher=at,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var tt=safeBufferExports.Buffer,et=requireMd5_js();function rt(nt,at,it,st){if(tt.isBuffer(nt)||(nt=tt.from(nt,"binary")),at&&(tt.isBuffer(at)||(at=tt.from(at,"binary")),at.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var dt=it/8,pt=tt.alloc(dt),mt=tt.alloc(st||0),yt=tt.alloc(0);dt>0||st>0;){var Rt=new et;Rt.update(yt),Rt.update(nt),at&&Rt.update(at),yt=Rt.digest();var Tt=0;if(dt>0){var At=pt.length-dt;Tt=Math.min(dt,yt.length),yt.copy(pt,At,0,Tt),dt-=Tt}if(Tt<yt.length&&st>0){var xt=mt.length-st,Nt=Math.min(st,yt.length-Tt);yt.copy(mt,xt,Tt,Tt+Nt),st-=Nt}}return yt.fill(0),{key:pt,iv:mt}}return evp_bytestokey=rt,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var tt=requireModes$1(),et=requireAuthCipher(),rt=safeBufferExports.Buffer,nt=requireStreamCipher(),at=requireCipherBase(),it=requireAes(),st=requireEvp_bytestokey(),dt=requireInherits_browser();function pt(At,xt,Nt){at.call(this),this._cache=new yt,this._cipher=new it.AES(xt),this._prev=rt.from(Nt),this._mode=At,this._autopadding=!0}dt(pt,at),pt.prototype._update=function(At){this._cache.add(At);for(var xt,Nt,Ct=[];xt=this._cache.get();)Nt=this._mode.encrypt(this,xt),Ct.push(Nt);return rt.concat(Ct)};var mt=rt.alloc(16,16);pt.prototype._final=function(){var At=this._cache.flush();if(this._autopadding)return At=this._mode.encrypt(this,At),this._cipher.scrub(),At;if(!At.equals(mt))throw this._cipher.scrub(),new Error("data not multiple of block length")},pt.prototype.setAutoPadding=function(At){return this._autopadding=!!At,this};function yt(){this.cache=rt.allocUnsafe(0)}yt.prototype.add=function(At){this.cache=rt.concat([this.cache,At])},yt.prototype.get=function(){if(this.cache.length>15){var At=this.cache.slice(0,16);return this.cache=this.cache.slice(16),At}return null},yt.prototype.flush=function(){for(var At=16-this.cache.length,xt=rt.allocUnsafe(At),Nt=-1;++Nt<At;)xt.writeUInt8(At,Nt);return rt.concat([this.cache,xt])};function Rt(At,xt,Nt){var Ct=tt[At.toLowerCase()];if(!Ct)throw new TypeError("invalid suite type");if(typeof xt=="string"&&(xt=rt.from(xt)),xt.length!==Ct.key/8)throw new TypeError("invalid key length "+xt.length);if(typeof Nt=="string"&&(Nt=rt.from(Nt)),Ct.mode!=="GCM"&&Nt.length!==Ct.iv)throw new TypeError("invalid iv length "+Nt.length);return Ct.type==="stream"?new nt(Ct.module,xt,Nt):Ct.type==="auth"?new et(Ct.module,xt,Nt):new pt(Ct.module,xt,Nt)}function Tt(At,xt){var Nt=tt[At.toLowerCase()];if(!Nt)throw new TypeError("invalid suite type");var Ct=st(xt,!1,Nt.key,Nt.iv);return Rt(At,Ct.key,Ct.iv)}return encrypter.createCipheriv=Rt,encrypter.createCipher=Tt,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var tt=requireAuthCipher(),et=safeBufferExports.Buffer,rt=requireModes$1(),nt=requireStreamCipher(),at=requireCipherBase(),it=requireAes(),st=requireEvp_bytestokey(),dt=requireInherits_browser();function pt(At,xt,Nt){at.call(this),this._cache=new mt,this._last=void 0,this._cipher=new it.AES(xt),this._prev=et.from(Nt),this._mode=At,this._autopadding=!0}dt(pt,at),pt.prototype._update=function(At){this._cache.add(At);for(var xt,Nt,Ct=[];xt=this._cache.get(this._autopadding);)Nt=this._mode.decrypt(this,xt),Ct.push(Nt);return et.concat(Ct)},pt.prototype._final=function(){var At=this._cache.flush();if(this._autopadding)return yt(this._mode.decrypt(this,At));if(At)throw new Error("data not multiple of block length")},pt.prototype.setAutoPadding=function(At){return this._autopadding=!!At,this};function mt(){this.cache=et.allocUnsafe(0)}mt.prototype.add=function(At){this.cache=et.concat([this.cache,At])},mt.prototype.get=function(At){var xt;if(At){if(this.cache.length>16)return xt=this.cache.slice(0,16),this.cache=this.cache.slice(16),xt}else if(this.cache.length>=16)return xt=this.cache.slice(0,16),this.cache=this.cache.slice(16),xt;return null},mt.prototype.flush=function(){if(this.cache.length)return this.cache};function yt(At){var xt=At[15];if(xt<1||xt>16)throw new Error("unable to decrypt data");for(var Nt=-1;++Nt<xt;)if(At[Nt+(16-xt)]!==xt)throw new Error("unable to decrypt data");if(xt!==16)return At.slice(0,16-xt)}function Rt(At,xt,Nt){var Ct=rt[At.toLowerCase()];if(!Ct)throw new TypeError("invalid suite type");if(typeof Nt=="string"&&(Nt=et.from(Nt)),Ct.mode!=="GCM"&&Nt.length!==Ct.iv)throw new TypeError("invalid iv length "+Nt.length);if(typeof xt=="string"&&(xt=et.from(xt)),xt.length!==Ct.key/8)throw new TypeError("invalid key length "+xt.length);return Ct.type==="stream"?new nt(Ct.module,xt,Nt,!0):Ct.type==="auth"?new tt(Ct.module,xt,Nt,!0):new pt(Ct.module,xt,Nt)}function Tt(At,xt){var Nt=rt[At.toLowerCase()];if(!Nt)throw new TypeError("invalid suite type");var Ct=st(xt,!1,Nt.key,Nt.iv);return Rt(At,Ct.key,Ct.iv)}return decrypter.createDecipher=Tt,decrypter.createDecipheriv=Rt,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$5;hasRequiredBrowser$6=1;var tt=requireEncrypter(),et=requireDecrypter(),rt=require$$2;function nt(){return Object.keys(rt)}return browser$5.createCipher=browser$5.Cipher=tt.createCipher,browser$5.createCipheriv=browser$5.Cipheriv=tt.createCipheriv,browser$5.createDecipher=browser$5.Decipher=et.createDecipher,browser$5.createDecipheriv=browser$5.Decipheriv=et.createDecipheriv,browser$5.listCiphers=browser$5.getCiphers=nt,browser$5}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(tt){tt["des-ecb"]={key:8,iv:0},tt["des-cbc"]=tt.des={key:8,iv:8},tt["des-ede3-cbc"]=tt.des3={key:24,iv:8},tt["des-ede3"]={key:24,iv:0},tt["des-ede-cbc"]={key:16,iv:8},tt["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$6;hasRequiredBrowser$5=1;var tt=requireBrowserifyDes(),et=requireBrowser$6(),rt=requireModes$1(),nt=requireModes(),at=requireEvp_bytestokey();function it(yt,Rt){yt=yt.toLowerCase();var Tt,At;if(rt[yt])Tt=rt[yt].key,At=rt[yt].iv;else if(nt[yt])Tt=nt[yt].key*8,At=nt[yt].iv;else throw new TypeError("invalid suite type");var xt=at(Rt,!1,Tt,At);return dt(yt,xt.key,xt.iv)}function st(yt,Rt){yt=yt.toLowerCase();var Tt,At;if(rt[yt])Tt=rt[yt].key,At=rt[yt].iv;else if(nt[yt])Tt=nt[yt].key*8,At=nt[yt].iv;else throw new TypeError("invalid suite type");var xt=at(Rt,!1,Tt,At);return pt(yt,xt.key,xt.iv)}function dt(yt,Rt,Tt){if(yt=yt.toLowerCase(),rt[yt])return et.createCipheriv(yt,Rt,Tt);if(nt[yt])return new tt({key:Rt,iv:Tt,mode:yt});throw new TypeError("invalid suite type")}function pt(yt,Rt,Tt){if(yt=yt.toLowerCase(),rt[yt])return et.createDecipheriv(yt,Rt,Tt);if(nt[yt])return new tt({key:Rt,iv:Tt,mode:yt,decrypt:!0});throw new TypeError("invalid suite type")}function mt(){return Object.keys(nt).concat(et.getCiphers())}return browser$6.createCipher=browser$6.Cipher=it,browser$6.createCipheriv=browser$6.Cipheriv=dt,browser$6.createDecipher=browser$6.Decipher=st,browser$6.createDecipheriv=browser$6.Decipheriv=pt,browser$6.listCiphers=browser$6.getCiphers=mt,browser$6}var browser$4={},bn$5={exports:{}};bn$5.exports;var hasRequiredBn$5;function requireBn$5(){return hasRequiredBn$5||(hasRequiredBn$5=1,function(tt){(function(et,rt){function nt(It,ot){if(!It)throw new Error(ot||"Assertion failed")}function at(It,ot){It.super_=ot;var ft=function(){};ft.prototype=ot.prototype,It.prototype=new ft,It.prototype.constructor=It}function it(It,ot,ft){if(it.isBN(It))return It;this.negative=0,this.words=null,this.length=0,this.red=null,It!==null&&((ot==="le"||ot==="be")&&(ft=ot,ot=10),this._init(It||0,ot||10,ft||"be"))}typeof et=="object"?et.exports=it:rt.BN=it,it.BN=it,it.wordSize=26;var st;try{typeof window<"u"&&typeof window.Buffer<"u"?st=window.Buffer:st=require$$0$2.Buffer}catch{}it.isBN=function(ot){return ot instanceof it?!0:ot!==null&&typeof ot=="object"&&ot.constructor.wordSize===it.wordSize&&Array.isArray(ot.words)},it.max=function(ot,ft){return ot.cmp(ft)>0?ot:ft},it.min=function(ot,ft){return ot.cmp(ft)<0?ot:ft},it.prototype._init=function(ot,ft,ht){if(typeof ot=="number")return this._initNumber(ot,ft,ht);if(typeof ot=="object")return this._initArray(ot,ft,ht);ft==="hex"&&(ft=16),nt(ft===(ft|0)&&ft>=2&&ft<=36),ot=ot.toString().replace(/\s+/g,"");var vt=0;ot[0]==="-"&&(vt++,this.negative=1),vt<ot.length&&(ft===16?this._parseHex(ot,vt,ht):(this._parseBase(ot,ft,vt),ht==="le"&&this._initArray(this.toArray(),ft,ht)))},it.prototype._initNumber=function(ot,ft,ht){ot<0&&(this.negative=1,ot=-ot),ot<67108864?(this.words=[ot&67108863],this.length=1):ot<4503599627370496?(this.words=[ot&67108863,ot/67108864&67108863],this.length=2):(nt(ot<9007199254740992),this.words=[ot&67108863,ot/67108864&67108863,1],this.length=3),ht==="le"&&this._initArray(this.toArray(),ft,ht)},it.prototype._initArray=function(ot,ft,ht){if(nt(typeof ot.length=="number"),ot.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ot.length/3),this.words=new Array(this.length);for(var vt=0;vt<this.length;vt++)this.words[vt]=0;var wt,bt,$t=0;if(ht==="be")for(vt=ot.length-1,wt=0;vt>=0;vt-=3)bt=ot[vt]|ot[vt-1]<<8|ot[vt-2]<<16,this.words[wt]|=bt<<$t&67108863,this.words[wt+1]=bt>>>26-$t&67108863,$t+=24,$t>=26&&($t-=26,wt++);else if(ht==="le")for(vt=0,wt=0;vt<ot.length;vt+=3)bt=ot[vt]|ot[vt+1]<<8|ot[vt+2]<<16,this.words[wt]|=bt<<$t&67108863,this.words[wt+1]=bt>>>26-$t&67108863,$t+=24,$t>=26&&($t-=26,wt++);return this.strip()};function dt(It,ot){var ft=It.charCodeAt(ot);return ft>=65&&ft<=70?ft-55:ft>=97&&ft<=102?ft-87:ft-48&15}function pt(It,ot,ft){var ht=dt(It,ft);return ft-1>=ot&&(ht|=dt(It,ft-1)<<4),ht}it.prototype._parseHex=function(ot,ft,ht){this.length=Math.ceil((ot.length-ft)/6),this.words=new Array(this.length);for(var vt=0;vt<this.length;vt++)this.words[vt]=0;var wt=0,bt=0,$t;if(ht==="be")for(vt=ot.length-1;vt>=ft;vt-=2)$t=pt(ot,ft,vt)<<wt,this.words[bt]|=$t&67108863,wt>=18?(wt-=18,bt+=1,this.words[bt]|=$t>>>26):wt+=8;else{var Et=ot.length-ft;for(vt=Et%2===0?ft+1:ft;vt<ot.length;vt+=2)$t=pt(ot,ft,vt)<<wt,this.words[bt]|=$t&67108863,wt>=18?(wt-=18,bt+=1,this.words[bt]|=$t>>>26):wt+=8}this.strip()};function mt(It,ot,ft,ht){for(var vt=0,wt=Math.min(It.length,ft),bt=ot;bt<wt;bt++){var $t=It.charCodeAt(bt)-48;vt*=ht,$t>=49?vt+=$t-49+10:$t>=17?vt+=$t-17+10:vt+=$t}return vt}it.prototype._parseBase=function(ot,ft,ht){this.words=[0],this.length=1;for(var vt=0,wt=1;wt<=67108863;wt*=ft)vt++;vt--,wt=wt/ft|0;for(var bt=ot.length-ht,$t=bt%vt,Et=Math.min(bt,bt-$t)+ht,ct=0,St=ht;St<Et;St+=vt)ct=mt(ot,St,St+vt,ft),this.imuln(wt),this.words[0]+ct<67108864?this.words[0]+=ct:this._iaddn(ct);if($t!==0){var Mt=1;for(ct=mt(ot,St,ot.length,ft),St=0;St<$t;St++)Mt*=ft;this.imuln(Mt),this.words[0]+ct<67108864?this.words[0]+=ct:this._iaddn(ct)}this.strip()},it.prototype.copy=function(ot){ot.words=new Array(this.length);for(var ft=0;ft<this.length;ft++)ot.words[ft]=this.words[ft];ot.length=this.length,ot.negative=this.negative,ot.red=this.red},it.prototype.clone=function(){var ot=new it(null);return this.copy(ot),ot},it.prototype._expand=function(ot){for(;this.length<ot;)this.words[this.length++]=0;return this},it.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},it.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},it.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var yt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Rt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Tt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];it.prototype.toString=function(ot,ft){ot=ot||10,ft=ft|0||1;var ht;if(ot===16||ot==="hex"){ht="";for(var vt=0,wt=0,bt=0;bt<this.length;bt++){var $t=this.words[bt],Et=(($t<<vt|wt)&16777215).toString(16);wt=$t>>>24-vt&16777215,wt!==0||bt!==this.length-1?ht=yt[6-Et.length]+Et+ht:ht=Et+ht,vt+=2,vt>=26&&(vt-=26,bt--)}for(wt!==0&&(ht=wt.toString(16)+ht);ht.length%ft!==0;)ht="0"+ht;return this.negative!==0&&(ht="-"+ht),ht}if(ot===(ot|0)&&ot>=2&&ot<=36){var ct=Rt[ot],St=Tt[ot];ht="";var Mt=this.clone();for(Mt.negative=0;!Mt.isZero();){var Lt=Mt.modn(St).toString(ot);Mt=Mt.idivn(St),Mt.isZero()?ht=Lt+ht:ht=yt[ct-Lt.length]+Lt+ht}for(this.isZero()&&(ht="0"+ht);ht.length%ft!==0;)ht="0"+ht;return this.negative!==0&&(ht="-"+ht),ht}nt(!1,"Base should be between 2 and 36")},it.prototype.toNumber=function(){var ot=this.words[0];return this.length===2?ot+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ot+=4503599627370496+this.words[1]*67108864:this.length>2&&nt(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ot:ot},it.prototype.toJSON=function(){return this.toString(16)},it.prototype.toBuffer=function(ot,ft){return nt(typeof st<"u"),this.toArrayLike(st,ot,ft)},it.prototype.toArray=function(ot,ft){return this.toArrayLike(Array,ot,ft)},it.prototype.toArrayLike=function(ot,ft,ht){var vt=this.byteLength(),wt=ht||Math.max(1,vt);nt(vt<=wt,"byte array longer than desired length"),nt(wt>0,"Requested array length <= 0"),this.strip();var bt=ft==="le",$t=new ot(wt),Et,ct,St=this.clone();if(bt){for(ct=0;!St.isZero();ct++)Et=St.andln(255),St.iushrn(8),$t[ct]=Et;for(;ct<wt;ct++)$t[ct]=0}else{for(ct=0;ct<wt-vt;ct++)$t[ct]=0;for(ct=0;!St.isZero();ct++)Et=St.andln(255),St.iushrn(8),$t[wt-ct-1]=Et}return $t},Math.clz32?it.prototype._countBits=function(ot){return 32-Math.clz32(ot)}:it.prototype._countBits=function(ot){var ft=ot,ht=0;return ft>=4096&&(ht+=13,ft>>>=13),ft>=64&&(ht+=7,ft>>>=7),ft>=8&&(ht+=4,ft>>>=4),ft>=2&&(ht+=2,ft>>>=2),ht+ft},it.prototype._zeroBits=function(ot){if(ot===0)return 26;var ft=ot,ht=0;return ft&8191||(ht+=13,ft>>>=13),ft&127||(ht+=7,ft>>>=7),ft&15||(ht+=4,ft>>>=4),ft&3||(ht+=2,ft>>>=2),ft&1||ht++,ht},it.prototype.bitLength=function(){var ot=this.words[this.length-1],ft=this._countBits(ot);return(this.length-1)*26+ft};function At(It){for(var ot=new Array(It.bitLength()),ft=0;ft<ot.length;ft++){var ht=ft/26|0,vt=ft%26;ot[ft]=(It.words[ht]&1<<vt)>>>vt}return ot}it.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ot=0,ft=0;ft<this.length;ft++){var ht=this._zeroBits(this.words[ft]);if(ot+=ht,ht!==26)break}return ot},it.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},it.prototype.toTwos=function(ot){return this.negative!==0?this.abs().inotn(ot).iaddn(1):this.clone()},it.prototype.fromTwos=function(ot){return this.testn(ot-1)?this.notn(ot).iaddn(1).ineg():this.clone()},it.prototype.isNeg=function(){return this.negative!==0},it.prototype.neg=function(){return this.clone().ineg()},it.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},it.prototype.iuor=function(ot){for(;this.length<ot.length;)this.words[this.length++]=0;for(var ft=0;ft<ot.length;ft++)this.words[ft]=this.words[ft]|ot.words[ft];return this.strip()},it.prototype.ior=function(ot){return nt((this.negative|ot.negative)===0),this.iuor(ot)},it.prototype.or=function(ot){return this.length>ot.length?this.clone().ior(ot):ot.clone().ior(this)},it.prototype.uor=function(ot){return this.length>ot.length?this.clone().iuor(ot):ot.clone().iuor(this)},it.prototype.iuand=function(ot){var ft;this.length>ot.length?ft=ot:ft=this;for(var ht=0;ht<ft.length;ht++)this.words[ht]=this.words[ht]&ot.words[ht];return this.length=ft.length,this.strip()},it.prototype.iand=function(ot){return nt((this.negative|ot.negative)===0),this.iuand(ot)},it.prototype.and=function(ot){return this.length>ot.length?this.clone().iand(ot):ot.clone().iand(this)},it.prototype.uand=function(ot){return this.length>ot.length?this.clone().iuand(ot):ot.clone().iuand(this)},it.prototype.iuxor=function(ot){var ft,ht;this.length>ot.length?(ft=this,ht=ot):(ft=ot,ht=this);for(var vt=0;vt<ht.length;vt++)this.words[vt]=ft.words[vt]^ht.words[vt];if(this!==ft)for(;vt<ft.length;vt++)this.words[vt]=ft.words[vt];return this.length=ft.length,this.strip()},it.prototype.ixor=function(ot){return nt((this.negative|ot.negative)===0),this.iuxor(ot)},it.prototype.xor=function(ot){return this.length>ot.length?this.clone().ixor(ot):ot.clone().ixor(this)},it.prototype.uxor=function(ot){return this.length>ot.length?this.clone().iuxor(ot):ot.clone().iuxor(this)},it.prototype.inotn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=Math.ceil(ot/26)|0,ht=ot%26;this._expand(ft),ht>0&&ft--;for(var vt=0;vt<ft;vt++)this.words[vt]=~this.words[vt]&67108863;return ht>0&&(this.words[vt]=~this.words[vt]&67108863>>26-ht),this.strip()},it.prototype.notn=function(ot){return this.clone().inotn(ot)},it.prototype.setn=function(ot,ft){nt(typeof ot=="number"&&ot>=0);var ht=ot/26|0,vt=ot%26;return this._expand(ht+1),ft?this.words[ht]=this.words[ht]|1<<vt:this.words[ht]=this.words[ht]&~(1<<vt),this.strip()},it.prototype.iadd=function(ot){var ft;if(this.negative!==0&&ot.negative===0)return this.negative=0,ft=this.isub(ot),this.negative^=1,this._normSign();if(this.negative===0&&ot.negative!==0)return ot.negative=0,ft=this.isub(ot),ot.negative=1,ft._normSign();var ht,vt;this.length>ot.length?(ht=this,vt=ot):(ht=ot,vt=this);for(var wt=0,bt=0;bt<vt.length;bt++)ft=(ht.words[bt]|0)+(vt.words[bt]|0)+wt,this.words[bt]=ft&67108863,wt=ft>>>26;for(;wt!==0&&bt<ht.length;bt++)ft=(ht.words[bt]|0)+wt,this.words[bt]=ft&67108863,wt=ft>>>26;if(this.length=ht.length,wt!==0)this.words[this.length]=wt,this.length++;else if(ht!==this)for(;bt<ht.length;bt++)this.words[bt]=ht.words[bt];return this},it.prototype.add=function(ot){var ft;return ot.negative!==0&&this.negative===0?(ot.negative=0,ft=this.sub(ot),ot.negative^=1,ft):ot.negative===0&&this.negative!==0?(this.negative=0,ft=ot.sub(this),this.negative=1,ft):this.length>ot.length?this.clone().iadd(ot):ot.clone().iadd(this)},it.prototype.isub=function(ot){if(ot.negative!==0){ot.negative=0;var ft=this.iadd(ot);return ot.negative=1,ft._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ot),this.negative=1,this._normSign();var ht=this.cmp(ot);if(ht===0)return this.negative=0,this.length=1,this.words[0]=0,this;var vt,wt;ht>0?(vt=this,wt=ot):(vt=ot,wt=this);for(var bt=0,$t=0;$t<wt.length;$t++)ft=(vt.words[$t]|0)-(wt.words[$t]|0)+bt,bt=ft>>26,this.words[$t]=ft&67108863;for(;bt!==0&&$t<vt.length;$t++)ft=(vt.words[$t]|0)+bt,bt=ft>>26,this.words[$t]=ft&67108863;if(bt===0&&$t<vt.length&&vt!==this)for(;$t<vt.length;$t++)this.words[$t]=vt.words[$t];return this.length=Math.max(this.length,$t),vt!==this&&(this.negative=1),this.strip()},it.prototype.sub=function(ot){return this.clone().isub(ot)};function xt(It,ot,ft){ft.negative=ot.negative^It.negative;var ht=It.length+ot.length|0;ft.length=ht,ht=ht-1|0;var vt=It.words[0]|0,wt=ot.words[0]|0,bt=vt*wt,$t=bt&67108863,Et=bt/67108864|0;ft.words[0]=$t;for(var ct=1;ct<ht;ct++){for(var St=Et>>>26,Mt=Et&67108863,Lt=Math.min(ct,ot.length-1),Ut=Math.max(0,ct-It.length+1);Ut<=Lt;Ut++){var Kt=ct-Ut|0;vt=It.words[Kt]|0,wt=ot.words[Ut]|0,bt=vt*wt+Mt,St+=bt/67108864|0,Mt=bt&67108863}ft.words[ct]=Mt|0,Et=St|0}return Et!==0?ft.words[ct]=Et|0:ft.length--,ft.strip()}var Nt=function(ot,ft,ht){var vt=ot.words,wt=ft.words,bt=ht.words,$t=0,Et,ct,St,Mt=vt[0]|0,Lt=Mt&8191,Ut=Mt>>>13,Kt=vt[1]|0,Ht=Kt&8191,Ft=Kt>>>13,zt=vt[2]|0,ir=zt&8191,sr=zt>>>13,ar=vt[3]|0,Vt=ar&8191,fr=ar>>>13,Gr=vt[4]|0,ur=Gr&8191,pr=Gr>>>13,Fr=vt[5]|0,yr=Fr&8191,hr=Fr>>>13,Wr=vt[6]|0,$r=Wr&8191,Cr=Wr>>>13,an=vt[7]|0,Er=an&8191,Ar=an>>>13,gn=vt[8]|0,Or=gn&8191,Lr=gn>>>13,wn=vt[9]|0,Xt=wn&8191,Bt=wn>>>13,Wt=wt[0]|0,nr=Wt&8191,cr=Wt>>>13,Sr=wt[1]|0,_r=Sr&8191,xr=Sr>>>13,pn=wt[2]|0,Tr=pn&8191,Ur=pn>>>13,un=wt[3]|0,Ir=un&8191,Nr=un>>>13,zr=wt[4]|0,br=zr&8191,Dr=zr>>>13,yn=wt[5]|0,Mr=yn&8191,qr=yn>>>13,Sn=wt[6]|0,Br=Sn&8191,Hr=Sn>>>13,Zt=wt[7]|0,Qt=Zt&8191,Jt=Zt>>>13,qt=wt[8]|0,rr=qt&8191,dr=qt>>>13,Rr=wt[9]|0,vr=Rr&8191,wr=Rr>>>13;ht.negative=ot.negative^ft.negative,ht.length=19,Et=Math.imul(Lt,nr),ct=Math.imul(Lt,cr),ct=ct+Math.imul(Ut,nr)|0,St=Math.imul(Ut,cr);var Yr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,Et=Math.imul(Ht,nr),ct=Math.imul(Ht,cr),ct=ct+Math.imul(Ft,nr)|0,St=Math.imul(Ft,cr),Et=Et+Math.imul(Lt,_r)|0,ct=ct+Math.imul(Lt,xr)|0,ct=ct+Math.imul(Ut,_r)|0,St=St+Math.imul(Ut,xr)|0;var jr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(jr>>>26)|0,jr&=67108863,Et=Math.imul(ir,nr),ct=Math.imul(ir,cr),ct=ct+Math.imul(sr,nr)|0,St=Math.imul(sr,cr),Et=Et+Math.imul(Ht,_r)|0,ct=ct+Math.imul(Ht,xr)|0,ct=ct+Math.imul(Ft,_r)|0,St=St+Math.imul(Ft,xr)|0,Et=Et+Math.imul(Lt,Tr)|0,ct=ct+Math.imul(Lt,Ur)|0,ct=ct+Math.imul(Ut,Tr)|0,St=St+Math.imul(Ut,Ur)|0;var mn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(mn>>>26)|0,mn&=67108863,Et=Math.imul(Vt,nr),ct=Math.imul(Vt,cr),ct=ct+Math.imul(fr,nr)|0,St=Math.imul(fr,cr),Et=Et+Math.imul(ir,_r)|0,ct=ct+Math.imul(ir,xr)|0,ct=ct+Math.imul(sr,_r)|0,St=St+Math.imul(sr,xr)|0,Et=Et+Math.imul(Ht,Tr)|0,ct=ct+Math.imul(Ht,Ur)|0,ct=ct+Math.imul(Ft,Tr)|0,St=St+Math.imul(Ft,Ur)|0,Et=Et+Math.imul(Lt,Ir)|0,ct=ct+Math.imul(Lt,Nr)|0,ct=ct+Math.imul(Ut,Ir)|0,St=St+Math.imul(Ut,Nr)|0;var Jr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,Et=Math.imul(ur,nr),ct=Math.imul(ur,cr),ct=ct+Math.imul(pr,nr)|0,St=Math.imul(pr,cr),Et=Et+Math.imul(Vt,_r)|0,ct=ct+Math.imul(Vt,xr)|0,ct=ct+Math.imul(fr,_r)|0,St=St+Math.imul(fr,xr)|0,Et=Et+Math.imul(ir,Tr)|0,ct=ct+Math.imul(ir,Ur)|0,ct=ct+Math.imul(sr,Tr)|0,St=St+Math.imul(sr,Ur)|0,Et=Et+Math.imul(Ht,Ir)|0,ct=ct+Math.imul(Ht,Nr)|0,ct=ct+Math.imul(Ft,Ir)|0,St=St+Math.imul(Ft,Nr)|0,Et=Et+Math.imul(Lt,br)|0,ct=ct+Math.imul(Lt,Dr)|0,ct=ct+Math.imul(Ut,br)|0,St=St+Math.imul(Ut,Dr)|0;var cn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(cn>>>26)|0,cn&=67108863,Et=Math.imul(yr,nr),ct=Math.imul(yr,cr),ct=ct+Math.imul(hr,nr)|0,St=Math.imul(hr,cr),Et=Et+Math.imul(ur,_r)|0,ct=ct+Math.imul(ur,xr)|0,ct=ct+Math.imul(pr,_r)|0,St=St+Math.imul(pr,xr)|0,Et=Et+Math.imul(Vt,Tr)|0,ct=ct+Math.imul(Vt,Ur)|0,ct=ct+Math.imul(fr,Tr)|0,St=St+Math.imul(fr,Ur)|0,Et=Et+Math.imul(ir,Ir)|0,ct=ct+Math.imul(ir,Nr)|0,ct=ct+Math.imul(sr,Ir)|0,St=St+Math.imul(sr,Nr)|0,Et=Et+Math.imul(Ht,br)|0,ct=ct+Math.imul(Ht,Dr)|0,ct=ct+Math.imul(Ft,br)|0,St=St+Math.imul(Ft,Dr)|0,Et=Et+Math.imul(Lt,Mr)|0,ct=ct+Math.imul(Lt,qr)|0,ct=ct+Math.imul(Ut,Mr)|0,St=St+Math.imul(Ut,qr)|0;var ln=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(ln>>>26)|0,ln&=67108863,Et=Math.imul($r,nr),ct=Math.imul($r,cr),ct=ct+Math.imul(Cr,nr)|0,St=Math.imul(Cr,cr),Et=Et+Math.imul(yr,_r)|0,ct=ct+Math.imul(yr,xr)|0,ct=ct+Math.imul(hr,_r)|0,St=St+Math.imul(hr,xr)|0,Et=Et+Math.imul(ur,Tr)|0,ct=ct+Math.imul(ur,Ur)|0,ct=ct+Math.imul(pr,Tr)|0,St=St+Math.imul(pr,Ur)|0,Et=Et+Math.imul(Vt,Ir)|0,ct=ct+Math.imul(Vt,Nr)|0,ct=ct+Math.imul(fr,Ir)|0,St=St+Math.imul(fr,Nr)|0,Et=Et+Math.imul(ir,br)|0,ct=ct+Math.imul(ir,Dr)|0,ct=ct+Math.imul(sr,br)|0,St=St+Math.imul(sr,Dr)|0,Et=Et+Math.imul(Ht,Mr)|0,ct=ct+Math.imul(Ht,qr)|0,ct=ct+Math.imul(Ft,Mr)|0,St=St+Math.imul(Ft,qr)|0,Et=Et+Math.imul(Lt,Br)|0,ct=ct+Math.imul(Lt,Hr)|0,ct=ct+Math.imul(Ut,Br)|0,St=St+Math.imul(Ut,Hr)|0;var vn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(vn>>>26)|0,vn&=67108863,Et=Math.imul(Er,nr),ct=Math.imul(Er,cr),ct=ct+Math.imul(Ar,nr)|0,St=Math.imul(Ar,cr),Et=Et+Math.imul($r,_r)|0,ct=ct+Math.imul($r,xr)|0,ct=ct+Math.imul(Cr,_r)|0,St=St+Math.imul(Cr,xr)|0,Et=Et+Math.imul(yr,Tr)|0,ct=ct+Math.imul(yr,Ur)|0,ct=ct+Math.imul(hr,Tr)|0,St=St+Math.imul(hr,Ur)|0,Et=Et+Math.imul(ur,Ir)|0,ct=ct+Math.imul(ur,Nr)|0,ct=ct+Math.imul(pr,Ir)|0,St=St+Math.imul(pr,Nr)|0,Et=Et+Math.imul(Vt,br)|0,ct=ct+Math.imul(Vt,Dr)|0,ct=ct+Math.imul(fr,br)|0,St=St+Math.imul(fr,Dr)|0,Et=Et+Math.imul(ir,Mr)|0,ct=ct+Math.imul(ir,qr)|0,ct=ct+Math.imul(sr,Mr)|0,St=St+Math.imul(sr,qr)|0,Et=Et+Math.imul(Ht,Br)|0,ct=ct+Math.imul(Ht,Hr)|0,ct=ct+Math.imul(Ft,Br)|0,St=St+Math.imul(Ft,Hr)|0,Et=Et+Math.imul(Lt,Qt)|0,ct=ct+Math.imul(Lt,Jt)|0,ct=ct+Math.imul(Ut,Qt)|0,St=St+Math.imul(Ut,Jt)|0;var _n=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(_n>>>26)|0,_n&=67108863,Et=Math.imul(Or,nr),ct=Math.imul(Or,cr),ct=ct+Math.imul(Lr,nr)|0,St=Math.imul(Lr,cr),Et=Et+Math.imul(Er,_r)|0,ct=ct+Math.imul(Er,xr)|0,ct=ct+Math.imul(Ar,_r)|0,St=St+Math.imul(Ar,xr)|0,Et=Et+Math.imul($r,Tr)|0,ct=ct+Math.imul($r,Ur)|0,ct=ct+Math.imul(Cr,Tr)|0,St=St+Math.imul(Cr,Ur)|0,Et=Et+Math.imul(yr,Ir)|0,ct=ct+Math.imul(yr,Nr)|0,ct=ct+Math.imul(hr,Ir)|0,St=St+Math.imul(hr,Nr)|0,Et=Et+Math.imul(ur,br)|0,ct=ct+Math.imul(ur,Dr)|0,ct=ct+Math.imul(pr,br)|0,St=St+Math.imul(pr,Dr)|0,Et=Et+Math.imul(Vt,Mr)|0,ct=ct+Math.imul(Vt,qr)|0,ct=ct+Math.imul(fr,Mr)|0,St=St+Math.imul(fr,qr)|0,Et=Et+Math.imul(ir,Br)|0,ct=ct+Math.imul(ir,Hr)|0,ct=ct+Math.imul(sr,Br)|0,St=St+Math.imul(sr,Hr)|0,Et=Et+Math.imul(Ht,Qt)|0,ct=ct+Math.imul(Ht,Jt)|0,ct=ct+Math.imul(Ft,Qt)|0,St=St+Math.imul(Ft,Jt)|0,Et=Et+Math.imul(Lt,rr)|0,ct=ct+Math.imul(Lt,dr)|0,ct=ct+Math.imul(Ut,rr)|0,St=St+Math.imul(Ut,dr)|0;var fn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(fn>>>26)|0,fn&=67108863,Et=Math.imul(Xt,nr),ct=Math.imul(Xt,cr),ct=ct+Math.imul(Bt,nr)|0,St=Math.imul(Bt,cr),Et=Et+Math.imul(Or,_r)|0,ct=ct+Math.imul(Or,xr)|0,ct=ct+Math.imul(Lr,_r)|0,St=St+Math.imul(Lr,xr)|0,Et=Et+Math.imul(Er,Tr)|0,ct=ct+Math.imul(Er,Ur)|0,ct=ct+Math.imul(Ar,Tr)|0,St=St+Math.imul(Ar,Ur)|0,Et=Et+Math.imul($r,Ir)|0,ct=ct+Math.imul($r,Nr)|0,ct=ct+Math.imul(Cr,Ir)|0,St=St+Math.imul(Cr,Nr)|0,Et=Et+Math.imul(yr,br)|0,ct=ct+Math.imul(yr,Dr)|0,ct=ct+Math.imul(hr,br)|0,St=St+Math.imul(hr,Dr)|0,Et=Et+Math.imul(ur,Mr)|0,ct=ct+Math.imul(ur,qr)|0,ct=ct+Math.imul(pr,Mr)|0,St=St+Math.imul(pr,qr)|0,Et=Et+Math.imul(Vt,Br)|0,ct=ct+Math.imul(Vt,Hr)|0,ct=ct+Math.imul(fr,Br)|0,St=St+Math.imul(fr,Hr)|0,Et=Et+Math.imul(ir,Qt)|0,ct=ct+Math.imul(ir,Jt)|0,ct=ct+Math.imul(sr,Qt)|0,St=St+Math.imul(sr,Jt)|0,Et=Et+Math.imul(Ht,rr)|0,ct=ct+Math.imul(Ht,dr)|0,ct=ct+Math.imul(Ft,rr)|0,St=St+Math.imul(Ft,dr)|0,Et=Et+Math.imul(Lt,vr)|0,ct=ct+Math.imul(Lt,wr)|0,ct=ct+Math.imul(Ut,vr)|0,St=St+Math.imul(Ut,wr)|0;var hn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(hn>>>26)|0,hn&=67108863,Et=Math.imul(Xt,_r),ct=Math.imul(Xt,xr),ct=ct+Math.imul(Bt,_r)|0,St=Math.imul(Bt,xr),Et=Et+Math.imul(Or,Tr)|0,ct=ct+Math.imul(Or,Ur)|0,ct=ct+Math.imul(Lr,Tr)|0,St=St+Math.imul(Lr,Ur)|0,Et=Et+Math.imul(Er,Ir)|0,ct=ct+Math.imul(Er,Nr)|0,ct=ct+Math.imul(Ar,Ir)|0,St=St+Math.imul(Ar,Nr)|0,Et=Et+Math.imul($r,br)|0,ct=ct+Math.imul($r,Dr)|0,ct=ct+Math.imul(Cr,br)|0,St=St+Math.imul(Cr,Dr)|0,Et=Et+Math.imul(yr,Mr)|0,ct=ct+Math.imul(yr,qr)|0,ct=ct+Math.imul(hr,Mr)|0,St=St+Math.imul(hr,qr)|0,Et=Et+Math.imul(ur,Br)|0,ct=ct+Math.imul(ur,Hr)|0,ct=ct+Math.imul(pr,Br)|0,St=St+Math.imul(pr,Hr)|0,Et=Et+Math.imul(Vt,Qt)|0,ct=ct+Math.imul(Vt,Jt)|0,ct=ct+Math.imul(fr,Qt)|0,St=St+Math.imul(fr,Jt)|0,Et=Et+Math.imul(ir,rr)|0,ct=ct+Math.imul(ir,dr)|0,ct=ct+Math.imul(sr,rr)|0,St=St+Math.imul(sr,dr)|0,Et=Et+Math.imul(Ht,vr)|0,ct=ct+Math.imul(Ht,wr)|0,ct=ct+Math.imul(Ft,vr)|0,St=St+Math.imul(Ft,wr)|0;var dn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(dn>>>26)|0,dn&=67108863,Et=Math.imul(Xt,Tr),ct=Math.imul(Xt,Ur),ct=ct+Math.imul(Bt,Tr)|0,St=Math.imul(Bt,Ur),Et=Et+Math.imul(Or,Ir)|0,ct=ct+Math.imul(Or,Nr)|0,ct=ct+Math.imul(Lr,Ir)|0,St=St+Math.imul(Lr,Nr)|0,Et=Et+Math.imul(Er,br)|0,ct=ct+Math.imul(Er,Dr)|0,ct=ct+Math.imul(Ar,br)|0,St=St+Math.imul(Ar,Dr)|0,Et=Et+Math.imul($r,Mr)|0,ct=ct+Math.imul($r,qr)|0,ct=ct+Math.imul(Cr,Mr)|0,St=St+Math.imul(Cr,qr)|0,Et=Et+Math.imul(yr,Br)|0,ct=ct+Math.imul(yr,Hr)|0,ct=ct+Math.imul(hr,Br)|0,St=St+Math.imul(hr,Hr)|0,Et=Et+Math.imul(ur,Qt)|0,ct=ct+Math.imul(ur,Jt)|0,ct=ct+Math.imul(pr,Qt)|0,St=St+Math.imul(pr,Jt)|0,Et=Et+Math.imul(Vt,rr)|0,ct=ct+Math.imul(Vt,dr)|0,ct=ct+Math.imul(fr,rr)|0,St=St+Math.imul(fr,dr)|0,Et=Et+Math.imul(ir,vr)|0,ct=ct+Math.imul(ir,wr)|0,ct=ct+Math.imul(sr,vr)|0,St=St+Math.imul(sr,wr)|0;var tn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(tn>>>26)|0,tn&=67108863,Et=Math.imul(Xt,Ir),ct=Math.imul(Xt,Nr),ct=ct+Math.imul(Bt,Ir)|0,St=Math.imul(Bt,Nr),Et=Et+Math.imul(Or,br)|0,ct=ct+Math.imul(Or,Dr)|0,ct=ct+Math.imul(Lr,br)|0,St=St+Math.imul(Lr,Dr)|0,Et=Et+Math.imul(Er,Mr)|0,ct=ct+Math.imul(Er,qr)|0,ct=ct+Math.imul(Ar,Mr)|0,St=St+Math.imul(Ar,qr)|0,Et=Et+Math.imul($r,Br)|0,ct=ct+Math.imul($r,Hr)|0,ct=ct+Math.imul(Cr,Br)|0,St=St+Math.imul(Cr,Hr)|0,Et=Et+Math.imul(yr,Qt)|0,ct=ct+Math.imul(yr,Jt)|0,ct=ct+Math.imul(hr,Qt)|0,St=St+Math.imul(hr,Jt)|0,Et=Et+Math.imul(ur,rr)|0,ct=ct+Math.imul(ur,dr)|0,ct=ct+Math.imul(pr,rr)|0,St=St+Math.imul(pr,dr)|0,Et=Et+Math.imul(Vt,vr)|0,ct=ct+Math.imul(Vt,wr)|0,ct=ct+Math.imul(fr,vr)|0,St=St+Math.imul(fr,wr)|0;var sn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(sn>>>26)|0,sn&=67108863,Et=Math.imul(Xt,br),ct=Math.imul(Xt,Dr),ct=ct+Math.imul(Bt,br)|0,St=Math.imul(Bt,Dr),Et=Et+Math.imul(Or,Mr)|0,ct=ct+Math.imul(Or,qr)|0,ct=ct+Math.imul(Lr,Mr)|0,St=St+Math.imul(Lr,qr)|0,Et=Et+Math.imul(Er,Br)|0,ct=ct+Math.imul(Er,Hr)|0,ct=ct+Math.imul(Ar,Br)|0,St=St+Math.imul(Ar,Hr)|0,Et=Et+Math.imul($r,Qt)|0,ct=ct+Math.imul($r,Jt)|0,ct=ct+Math.imul(Cr,Qt)|0,St=St+Math.imul(Cr,Jt)|0,Et=Et+Math.imul(yr,rr)|0,ct=ct+Math.imul(yr,dr)|0,ct=ct+Math.imul(hr,rr)|0,St=St+Math.imul(hr,dr)|0,Et=Et+Math.imul(ur,vr)|0,ct=ct+Math.imul(ur,wr)|0,ct=ct+Math.imul(pr,vr)|0,St=St+Math.imul(pr,wr)|0;var Qr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,Et=Math.imul(Xt,Mr),ct=Math.imul(Xt,qr),ct=ct+Math.imul(Bt,Mr)|0,St=Math.imul(Bt,qr),Et=Et+Math.imul(Or,Br)|0,ct=ct+Math.imul(Or,Hr)|0,ct=ct+Math.imul(Lr,Br)|0,St=St+Math.imul(Lr,Hr)|0,Et=Et+Math.imul(Er,Qt)|0,ct=ct+Math.imul(Er,Jt)|0,ct=ct+Math.imul(Ar,Qt)|0,St=St+Math.imul(Ar,Jt)|0,Et=Et+Math.imul($r,rr)|0,ct=ct+Math.imul($r,dr)|0,ct=ct+Math.imul(Cr,rr)|0,St=St+Math.imul(Cr,dr)|0,Et=Et+Math.imul(yr,vr)|0,ct=ct+Math.imul(yr,wr)|0,ct=ct+Math.imul(hr,vr)|0,St=St+Math.imul(hr,wr)|0;var rn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(rn>>>26)|0,rn&=67108863,Et=Math.imul(Xt,Br),ct=Math.imul(Xt,Hr),ct=ct+Math.imul(Bt,Br)|0,St=Math.imul(Bt,Hr),Et=Et+Math.imul(Or,Qt)|0,ct=ct+Math.imul(Or,Jt)|0,ct=ct+Math.imul(Lr,Qt)|0,St=St+Math.imul(Lr,Jt)|0,Et=Et+Math.imul(Er,rr)|0,ct=ct+Math.imul(Er,dr)|0,ct=ct+Math.imul(Ar,rr)|0,St=St+Math.imul(Ar,dr)|0,Et=Et+Math.imul($r,vr)|0,ct=ct+Math.imul($r,wr)|0,ct=ct+Math.imul(Cr,vr)|0,St=St+Math.imul(Cr,wr)|0;var nn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(nn>>>26)|0,nn&=67108863,Et=Math.imul(Xt,Qt),ct=Math.imul(Xt,Jt),ct=ct+Math.imul(Bt,Qt)|0,St=Math.imul(Bt,Jt),Et=Et+Math.imul(Or,rr)|0,ct=ct+Math.imul(Or,dr)|0,ct=ct+Math.imul(Lr,rr)|0,St=St+Math.imul(Lr,dr)|0,Et=Et+Math.imul(Er,vr)|0,ct=ct+Math.imul(Er,wr)|0,ct=ct+Math.imul(Ar,vr)|0,St=St+Math.imul(Ar,wr)|0;var Xr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,Et=Math.imul(Xt,rr),ct=Math.imul(Xt,dr),ct=ct+Math.imul(Bt,rr)|0,St=Math.imul(Bt,dr),Et=Et+Math.imul(Or,vr)|0,ct=ct+Math.imul(Or,wr)|0,ct=ct+Math.imul(Lr,vr)|0,St=St+Math.imul(Lr,wr)|0;var kr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(kr>>>26)|0,kr&=67108863,Et=Math.imul(Xt,vr),ct=Math.imul(Xt,wr),ct=ct+Math.imul(Bt,vr)|0,St=Math.imul(Bt,wr);var Pr=($t+Et|0)+((ct&8191)<<13)|0;return $t=(St+(ct>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,bt[0]=Yr,bt[1]=jr,bt[2]=mn,bt[3]=Jr,bt[4]=cn,bt[5]=ln,bt[6]=vn,bt[7]=_n,bt[8]=fn,bt[9]=hn,bt[10]=dn,bt[11]=tn,bt[12]=sn,bt[13]=Qr,bt[14]=rn,bt[15]=nn,bt[16]=Xr,bt[17]=kr,bt[18]=Pr,$t!==0&&(bt[19]=$t,ht.length++),ht};Math.imul||(Nt=xt);function Ct(It,ot,ft){ft.negative=ot.negative^It.negative,ft.length=It.length+ot.length;for(var ht=0,vt=0,wt=0;wt<ft.length-1;wt++){var bt=vt;vt=0;for(var $t=ht&67108863,Et=Math.min(wt,ot.length-1),ct=Math.max(0,wt-It.length+1);ct<=Et;ct++){var St=wt-ct,Mt=It.words[St]|0,Lt=ot.words[ct]|0,Ut=Mt*Lt,Kt=Ut&67108863;bt=bt+(Ut/67108864|0)|0,Kt=Kt+$t|0,$t=Kt&67108863,bt=bt+(Kt>>>26)|0,vt+=bt>>>26,bt&=67108863}ft.words[wt]=$t,ht=bt,bt=vt}return ht!==0?ft.words[wt]=ht:ft.length--,ft.strip()}function Ot(It,ot,ft){var ht=new kt;return ht.mulp(It,ot,ft)}it.prototype.mulTo=function(ot,ft){var ht,vt=this.length+ot.length;return this.length===10&&ot.length===10?ht=Nt(this,ot,ft):vt<63?ht=xt(this,ot,ft):vt<1024?ht=Ct(this,ot,ft):ht=Ot(this,ot,ft),ht};function kt(It,ot){this.x=It,this.y=ot}kt.prototype.makeRBT=function(ot){for(var ft=new Array(ot),ht=it.prototype._countBits(ot)-1,vt=0;vt<ot;vt++)ft[vt]=this.revBin(vt,ht,ot);return ft},kt.prototype.revBin=function(ot,ft,ht){if(ot===0||ot===ht-1)return ot;for(var vt=0,wt=0;wt<ft;wt++)vt|=(ot&1)<<ft-wt-1,ot>>=1;return vt},kt.prototype.permute=function(ot,ft,ht,vt,wt,bt){for(var $t=0;$t<bt;$t++)vt[$t]=ft[ot[$t]],wt[$t]=ht[ot[$t]]},kt.prototype.transform=function(ot,ft,ht,vt,wt,bt){this.permute(bt,ot,ft,ht,vt,wt);for(var $t=1;$t<wt;$t<<=1)for(var Et=$t<<1,ct=Math.cos(2*Math.PI/Et),St=Math.sin(2*Math.PI/Et),Mt=0;Mt<wt;Mt+=Et)for(var Lt=ct,Ut=St,Kt=0;Kt<$t;Kt++){var Ht=ht[Mt+Kt],Ft=vt[Mt+Kt],zt=ht[Mt+Kt+$t],ir=vt[Mt+Kt+$t],sr=Lt*zt-Ut*ir;ir=Lt*ir+Ut*zt,zt=sr,ht[Mt+Kt]=Ht+zt,vt[Mt+Kt]=Ft+ir,ht[Mt+Kt+$t]=Ht-zt,vt[Mt+Kt+$t]=Ft-ir,Kt!==Et&&(sr=ct*Lt-St*Ut,Ut=ct*Ut+St*Lt,Lt=sr)}},kt.prototype.guessLen13b=function(ot,ft){var ht=Math.max(ft,ot)|1,vt=ht&1,wt=0;for(ht=ht/2|0;ht;ht=ht>>>1)wt++;return 1<<wt+1+vt},kt.prototype.conjugate=function(ot,ft,ht){if(!(ht<=1))for(var vt=0;vt<ht/2;vt++){var wt=ot[vt];ot[vt]=ot[ht-vt-1],ot[ht-vt-1]=wt,wt=ft[vt],ft[vt]=-ft[ht-vt-1],ft[ht-vt-1]=-wt}},kt.prototype.normalize13b=function(ot,ft){for(var ht=0,vt=0;vt<ft/2;vt++){var wt=Math.round(ot[2*vt+1]/ft)*8192+Math.round(ot[2*vt]/ft)+ht;ot[vt]=wt&67108863,wt<67108864?ht=0:ht=wt/67108864|0}return ot},kt.prototype.convert13b=function(ot,ft,ht,vt){for(var wt=0,bt=0;bt<ft;bt++)wt=wt+(ot[bt]|0),ht[2*bt]=wt&8191,wt=wt>>>13,ht[2*bt+1]=wt&8191,wt=wt>>>13;for(bt=2*ft;bt<vt;++bt)ht[bt]=0;nt(wt===0),nt((wt&-8192)===0)},kt.prototype.stub=function(ot){for(var ft=new Array(ot),ht=0;ht<ot;ht++)ft[ht]=0;return ft},kt.prototype.mulp=function(ot,ft,ht){var vt=2*this.guessLen13b(ot.length,ft.length),wt=this.makeRBT(vt),bt=this.stub(vt),$t=new Array(vt),Et=new Array(vt),ct=new Array(vt),St=new Array(vt),Mt=new Array(vt),Lt=new Array(vt),Ut=ht.words;Ut.length=vt,this.convert13b(ot.words,ot.length,$t,vt),this.convert13b(ft.words,ft.length,St,vt),this.transform($t,bt,Et,ct,vt,wt),this.transform(St,bt,Mt,Lt,vt,wt);for(var Kt=0;Kt<vt;Kt++){var Ht=Et[Kt]*Mt[Kt]-ct[Kt]*Lt[Kt];ct[Kt]=Et[Kt]*Lt[Kt]+ct[Kt]*Mt[Kt],Et[Kt]=Ht}return this.conjugate(Et,ct,vt),this.transform(Et,ct,Ut,bt,vt,wt),this.conjugate(Ut,bt,vt),this.normalize13b(Ut,vt),ht.negative=ot.negative^ft.negative,ht.length=ot.length+ft.length,ht.strip()},it.prototype.mul=function(ot){var ft=new it(null);return ft.words=new Array(this.length+ot.length),this.mulTo(ot,ft)},it.prototype.mulf=function(ot){var ft=new it(null);return ft.words=new Array(this.length+ot.length),Ot(this,ot,ft)},it.prototype.imul=function(ot){return this.clone().mulTo(ot,this)},it.prototype.imuln=function(ot){nt(typeof ot=="number"),nt(ot<67108864);for(var ft=0,ht=0;ht<this.length;ht++){var vt=(this.words[ht]|0)*ot,wt=(vt&67108863)+(ft&67108863);ft>>=26,ft+=vt/67108864|0,ft+=wt>>>26,this.words[ht]=wt&67108863}return ft!==0&&(this.words[ht]=ft,this.length++),this},it.prototype.muln=function(ot){return this.clone().imuln(ot)},it.prototype.sqr=function(){return this.mul(this)},it.prototype.isqr=function(){return this.imul(this.clone())},it.prototype.pow=function(ot){var ft=At(ot);if(ft.length===0)return new it(1);for(var ht=this,vt=0;vt<ft.length&&ft[vt]===0;vt++,ht=ht.sqr());if(++vt<ft.length)for(var wt=ht.sqr();vt<ft.length;vt++,wt=wt.sqr())ft[vt]!==0&&(ht=ht.mul(wt));return ht},it.prototype.iushln=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26,vt=67108863>>>26-ft<<26-ft,wt;if(ft!==0){var bt=0;for(wt=0;wt<this.length;wt++){var $t=this.words[wt]&vt,Et=(this.words[wt]|0)-$t<<ft;this.words[wt]=Et|bt,bt=$t>>>26-ft}bt&&(this.words[wt]=bt,this.length++)}if(ht!==0){for(wt=this.length-1;wt>=0;wt--)this.words[wt+ht]=this.words[wt];for(wt=0;wt<ht;wt++)this.words[wt]=0;this.length+=ht}return this.strip()},it.prototype.ishln=function(ot){return nt(this.negative===0),this.iushln(ot)},it.prototype.iushrn=function(ot,ft,ht){nt(typeof ot=="number"&&ot>=0);var vt;ft?vt=(ft-ft%26)/26:vt=0;var wt=ot%26,bt=Math.min((ot-wt)/26,this.length),$t=67108863^67108863>>>wt<<wt,Et=ht;if(vt-=bt,vt=Math.max(0,vt),Et){for(var ct=0;ct<bt;ct++)Et.words[ct]=this.words[ct];Et.length=bt}if(bt!==0)if(this.length>bt)for(this.length-=bt,ct=0;ct<this.length;ct++)this.words[ct]=this.words[ct+bt];else this.words[0]=0,this.length=1;var St=0;for(ct=this.length-1;ct>=0&&(St!==0||ct>=vt);ct--){var Mt=this.words[ct]|0;this.words[ct]=St<<26-wt|Mt>>>wt,St=Mt&$t}return Et&&St!==0&&(Et.words[Et.length++]=St),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},it.prototype.ishrn=function(ot,ft,ht){return nt(this.negative===0),this.iushrn(ot,ft,ht)},it.prototype.shln=function(ot){return this.clone().ishln(ot)},it.prototype.ushln=function(ot){return this.clone().iushln(ot)},it.prototype.shrn=function(ot){return this.clone().ishrn(ot)},it.prototype.ushrn=function(ot){return this.clone().iushrn(ot)},it.prototype.testn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26,vt=1<<ft;if(this.length<=ht)return!1;var wt=this.words[ht];return!!(wt&vt)},it.prototype.imaskn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26;if(nt(this.negative===0,"imaskn works only with positive numbers"),this.length<=ht)return this;if(ft!==0&&ht++,this.length=Math.min(ht,this.length),ft!==0){var vt=67108863^67108863>>>ft<<ft;this.words[this.length-1]&=vt}return this.strip()},it.prototype.maskn=function(ot){return this.clone().imaskn(ot)},it.prototype.iaddn=function(ot){return nt(typeof ot=="number"),nt(ot<67108864),ot<0?this.isubn(-ot):this.negative!==0?this.length===1&&(this.words[0]|0)<ot?(this.words[0]=ot-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ot),this.negative=1,this):this._iaddn(ot)},it.prototype._iaddn=function(ot){this.words[0]+=ot;for(var ft=0;ft<this.length&&this.words[ft]>=67108864;ft++)this.words[ft]-=67108864,ft===this.length-1?this.words[ft+1]=1:this.words[ft+1]++;return this.length=Math.max(this.length,ft+1),this},it.prototype.isubn=function(ot){if(nt(typeof ot=="number"),nt(ot<67108864),ot<0)return this.iaddn(-ot);if(this.negative!==0)return this.negative=0,this.iaddn(ot),this.negative=1,this;if(this.words[0]-=ot,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var ft=0;ft<this.length&&this.words[ft]<0;ft++)this.words[ft]+=67108864,this.words[ft+1]-=1;return this.strip()},it.prototype.addn=function(ot){return this.clone().iaddn(ot)},it.prototype.subn=function(ot){return this.clone().isubn(ot)},it.prototype.iabs=function(){return this.negative=0,this},it.prototype.abs=function(){return this.clone().iabs()},it.prototype._ishlnsubmul=function(ot,ft,ht){var vt=ot.length+ht,wt;this._expand(vt);var bt,$t=0;for(wt=0;wt<ot.length;wt++){bt=(this.words[wt+ht]|0)+$t;var Et=(ot.words[wt]|0)*ft;bt-=Et&67108863,$t=(bt>>26)-(Et/67108864|0),this.words[wt+ht]=bt&67108863}for(;wt<this.length-ht;wt++)bt=(this.words[wt+ht]|0)+$t,$t=bt>>26,this.words[wt+ht]=bt&67108863;if($t===0)return this.strip();for(nt($t===-1),$t=0,wt=0;wt<this.length;wt++)bt=-(this.words[wt]|0)+$t,$t=bt>>26,this.words[wt]=bt&67108863;return this.negative=1,this.strip()},it.prototype._wordDiv=function(ot,ft){var ht=this.length-ot.length,vt=this.clone(),wt=ot,bt=wt.words[wt.length-1]|0,$t=this._countBits(bt);ht=26-$t,ht!==0&&(wt=wt.ushln(ht),vt.iushln(ht),bt=wt.words[wt.length-1]|0);var Et=vt.length-wt.length,ct;if(ft!=="mod"){ct=new it(null),ct.length=Et+1,ct.words=new Array(ct.length);for(var St=0;St<ct.length;St++)ct.words[St]=0}var Mt=vt.clone()._ishlnsubmul(wt,1,Et);Mt.negative===0&&(vt=Mt,ct&&(ct.words[Et]=1));for(var Lt=Et-1;Lt>=0;Lt--){var Ut=(vt.words[wt.length+Lt]|0)*67108864+(vt.words[wt.length+Lt-1]|0);for(Ut=Math.min(Ut/bt|0,67108863),vt._ishlnsubmul(wt,Ut,Lt);vt.negative!==0;)Ut--,vt.negative=0,vt._ishlnsubmul(wt,1,Lt),vt.isZero()||(vt.negative^=1);ct&&(ct.words[Lt]=Ut)}return ct&&ct.strip(),vt.strip(),ft!=="div"&&ht!==0&&vt.iushrn(ht),{div:ct||null,mod:vt}},it.prototype.divmod=function(ot,ft,ht){if(nt(!ot.isZero()),this.isZero())return{div:new it(0),mod:new it(0)};var vt,wt,bt;return this.negative!==0&&ot.negative===0?(bt=this.neg().divmod(ot,ft),ft!=="mod"&&(vt=bt.div.neg()),ft!=="div"&&(wt=bt.mod.neg(),ht&&wt.negative!==0&&wt.iadd(ot)),{div:vt,mod:wt}):this.negative===0&&ot.negative!==0?(bt=this.divmod(ot.neg(),ft),ft!=="mod"&&(vt=bt.div.neg()),{div:vt,mod:bt.mod}):this.negative&ot.negative?(bt=this.neg().divmod(ot.neg(),ft),ft!=="div"&&(wt=bt.mod.neg(),ht&&wt.negative!==0&&wt.isub(ot)),{div:bt.div,mod:wt}):ot.length>this.length||this.cmp(ot)<0?{div:new it(0),mod:this}:ot.length===1?ft==="div"?{div:this.divn(ot.words[0]),mod:null}:ft==="mod"?{div:null,mod:new it(this.modn(ot.words[0]))}:{div:this.divn(ot.words[0]),mod:new it(this.modn(ot.words[0]))}:this._wordDiv(ot,ft)},it.prototype.div=function(ot){return this.divmod(ot,"div",!1).div},it.prototype.mod=function(ot){return this.divmod(ot,"mod",!1).mod},it.prototype.umod=function(ot){return this.divmod(ot,"mod",!0).mod},it.prototype.divRound=function(ot){var ft=this.divmod(ot);if(ft.mod.isZero())return ft.div;var ht=ft.div.negative!==0?ft.mod.isub(ot):ft.mod,vt=ot.ushrn(1),wt=ot.andln(1),bt=ht.cmp(vt);return bt<0||wt===1&&bt===0?ft.div:ft.div.negative!==0?ft.div.isubn(1):ft.div.iaddn(1)},it.prototype.modn=function(ot){nt(ot<=67108863);for(var ft=(1<<26)%ot,ht=0,vt=this.length-1;vt>=0;vt--)ht=(ft*ht+(this.words[vt]|0))%ot;return ht},it.prototype.idivn=function(ot){nt(ot<=67108863);for(var ft=0,ht=this.length-1;ht>=0;ht--){var vt=(this.words[ht]|0)+ft*67108864;this.words[ht]=vt/ot|0,ft=vt%ot}return this.strip()},it.prototype.divn=function(ot){return this.clone().idivn(ot)},it.prototype.egcd=function(ot){nt(ot.negative===0),nt(!ot.isZero());var ft=this,ht=ot.clone();ft.negative!==0?ft=ft.umod(ot):ft=ft.clone();for(var vt=new it(1),wt=new it(0),bt=new it(0),$t=new it(1),Et=0;ft.isEven()&&ht.isEven();)ft.iushrn(1),ht.iushrn(1),++Et;for(var ct=ht.clone(),St=ft.clone();!ft.isZero();){for(var Mt=0,Lt=1;!(ft.words[0]&Lt)&&Mt<26;++Mt,Lt<<=1);if(Mt>0)for(ft.iushrn(Mt);Mt-- >0;)(vt.isOdd()||wt.isOdd())&&(vt.iadd(ct),wt.isub(St)),vt.iushrn(1),wt.iushrn(1);for(var Ut=0,Kt=1;!(ht.words[0]&Kt)&&Ut<26;++Ut,Kt<<=1);if(Ut>0)for(ht.iushrn(Ut);Ut-- >0;)(bt.isOdd()||$t.isOdd())&&(bt.iadd(ct),$t.isub(St)),bt.iushrn(1),$t.iushrn(1);ft.cmp(ht)>=0?(ft.isub(ht),vt.isub(bt),wt.isub($t)):(ht.isub(ft),bt.isub(vt),$t.isub(wt))}return{a:bt,b:$t,gcd:ht.iushln(Et)}},it.prototype._invmp=function(ot){nt(ot.negative===0),nt(!ot.isZero());var ft=this,ht=ot.clone();ft.negative!==0?ft=ft.umod(ot):ft=ft.clone();for(var vt=new it(1),wt=new it(0),bt=ht.clone();ft.cmpn(1)>0&&ht.cmpn(1)>0;){for(var $t=0,Et=1;!(ft.words[0]&Et)&&$t<26;++$t,Et<<=1);if($t>0)for(ft.iushrn($t);$t-- >0;)vt.isOdd()&&vt.iadd(bt),vt.iushrn(1);for(var ct=0,St=1;!(ht.words[0]&St)&&ct<26;++ct,St<<=1);if(ct>0)for(ht.iushrn(ct);ct-- >0;)wt.isOdd()&&wt.iadd(bt),wt.iushrn(1);ft.cmp(ht)>=0?(ft.isub(ht),vt.isub(wt)):(ht.isub(ft),wt.isub(vt))}var Mt;return ft.cmpn(1)===0?Mt=vt:Mt=wt,Mt.cmpn(0)<0&&Mt.iadd(ot),Mt},it.prototype.gcd=function(ot){if(this.isZero())return ot.abs();if(ot.isZero())return this.abs();var ft=this.clone(),ht=ot.clone();ft.negative=0,ht.negative=0;for(var vt=0;ft.isEven()&&ht.isEven();vt++)ft.iushrn(1),ht.iushrn(1);do{for(;ft.isEven();)ft.iushrn(1);for(;ht.isEven();)ht.iushrn(1);var wt=ft.cmp(ht);if(wt<0){var bt=ft;ft=ht,ht=bt}else if(wt===0||ht.cmpn(1)===0)break;ft.isub(ht)}while(!0);return ht.iushln(vt)},it.prototype.invm=function(ot){return this.egcd(ot).a.umod(ot)},it.prototype.isEven=function(){return(this.words[0]&1)===0},it.prototype.isOdd=function(){return(this.words[0]&1)===1},it.prototype.andln=function(ot){return this.words[0]&ot},it.prototype.bincn=function(ot){nt(typeof ot=="number");var ft=ot%26,ht=(ot-ft)/26,vt=1<<ft;if(this.length<=ht)return this._expand(ht+1),this.words[ht]|=vt,this;for(var wt=vt,bt=ht;wt!==0&&bt<this.length;bt++){var $t=this.words[bt]|0;$t+=wt,wt=$t>>>26,$t&=67108863,this.words[bt]=$t}return wt!==0&&(this.words[bt]=wt,this.length++),this},it.prototype.isZero=function(){return this.length===1&&this.words[0]===0},it.prototype.cmpn=function(ot){var ft=ot<0;if(this.negative!==0&&!ft)return-1;if(this.negative===0&&ft)return 1;this.strip();var ht;if(this.length>1)ht=1;else{ft&&(ot=-ot),nt(ot<=67108863,"Number is too big");var vt=this.words[0]|0;ht=vt===ot?0:vt<ot?-1:1}return this.negative!==0?-ht|0:ht},it.prototype.cmp=function(ot){if(this.negative!==0&&ot.negative===0)return-1;if(this.negative===0&&ot.negative!==0)return 1;var ft=this.ucmp(ot);return this.negative!==0?-ft|0:ft},it.prototype.ucmp=function(ot){if(this.length>ot.length)return 1;if(this.length<ot.length)return-1;for(var ft=0,ht=this.length-1;ht>=0;ht--){var vt=this.words[ht]|0,wt=ot.words[ht]|0;if(vt!==wt){vt<wt?ft=-1:vt>wt&&(ft=1);break}}return ft},it.prototype.gtn=function(ot){return this.cmpn(ot)===1},it.prototype.gt=function(ot){return this.cmp(ot)===1},it.prototype.gten=function(ot){return this.cmpn(ot)>=0},it.prototype.gte=function(ot){return this.cmp(ot)>=0},it.prototype.ltn=function(ot){return this.cmpn(ot)===-1},it.prototype.lt=function(ot){return this.cmp(ot)===-1},it.prototype.lten=function(ot){return this.cmpn(ot)<=0},it.prototype.lte=function(ot){return this.cmp(ot)<=0},it.prototype.eqn=function(ot){return this.cmpn(ot)===0},it.prototype.eq=function(ot){return this.cmp(ot)===0},it.red=function(ot){return new er(ot)},it.prototype.toRed=function(ot){return nt(!this.red,"Already a number in reduction context"),nt(this.negative===0,"red works only with positives"),ot.convertTo(this)._forceRed(ot)},it.prototype.fromRed=function(){return nt(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},it.prototype._forceRed=function(ot){return this.red=ot,this},it.prototype.forceRed=function(ot){return nt(!this.red,"Already a number in reduction context"),this._forceRed(ot)},it.prototype.redAdd=function(ot){return nt(this.red,"redAdd works only with red numbers"),this.red.add(this,ot)},it.prototype.redIAdd=function(ot){return nt(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ot)},it.prototype.redSub=function(ot){return nt(this.red,"redSub works only with red numbers"),this.red.sub(this,ot)},it.prototype.redISub=function(ot){return nt(this.red,"redISub works only with red numbers"),this.red.isub(this,ot)},it.prototype.redShl=function(ot){return nt(this.red,"redShl works only with red numbers"),this.red.shl(this,ot)},it.prototype.redMul=function(ot){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ot),this.red.mul(this,ot)},it.prototype.redIMul=function(ot){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ot),this.red.imul(this,ot)},it.prototype.redSqr=function(){return nt(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},it.prototype.redISqr=function(){return nt(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},it.prototype.redSqrt=function(){return nt(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},it.prototype.redInvm=function(){return nt(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},it.prototype.redNeg=function(){return nt(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},it.prototype.redPow=function(ot){return nt(this.red&&!ot.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ot)};var Pt={k256:null,p224:null,p192:null,p25519:null};function Dt(It,ot){this.name=It,this.p=new it(ot,16),this.n=this.p.bitLength(),this.k=new it(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Dt.prototype._tmp=function(){var ot=new it(null);return ot.words=new Array(Math.ceil(this.n/13)),ot},Dt.prototype.ireduce=function(ot){var ft=ot,ht;do this.split(ft,this.tmp),ft=this.imulK(ft),ft=ft.iadd(this.tmp),ht=ft.bitLength();while(ht>this.n);var vt=ht<this.n?-1:ft.ucmp(this.p);return vt===0?(ft.words[0]=0,ft.length=1):vt>0?ft.isub(this.p):ft.strip!==void 0?ft.strip():ft._strip(),ft},Dt.prototype.split=function(ot,ft){ot.iushrn(this.n,0,ft)},Dt.prototype.imulK=function(ot){return ot.imul(this.k)};function Gt(){Dt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}at(Gt,Dt),Gt.prototype.split=function(ot,ft){for(var ht=4194303,vt=Math.min(ot.length,9),wt=0;wt<vt;wt++)ft.words[wt]=ot.words[wt];if(ft.length=vt,ot.length<=9){ot.words[0]=0,ot.length=1;return}var bt=ot.words[9];for(ft.words[ft.length++]=bt&ht,wt=10;wt<ot.length;wt++){var $t=ot.words[wt]|0;ot.words[wt-10]=($t&ht)<<4|bt>>>22,bt=$t}bt>>>=22,ot.words[wt-10]=bt,bt===0&&ot.length>10?ot.length-=10:ot.length-=9},Gt.prototype.imulK=function(ot){ot.words[ot.length]=0,ot.words[ot.length+1]=0,ot.length+=2;for(var ft=0,ht=0;ht<ot.length;ht++){var vt=ot.words[ht]|0;ft+=vt*977,ot.words[ht]=ft&67108863,ft=vt*64+(ft/67108864|0)}return ot.words[ot.length-1]===0&&(ot.length--,ot.words[ot.length-1]===0&&ot.length--),ot};function jt(){Dt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}at(jt,Dt);function Yt(){Dt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}at(Yt,Dt);function tr(){Dt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}at(tr,Dt),tr.prototype.imulK=function(ot){for(var ft=0,ht=0;ht<ot.length;ht++){var vt=(ot.words[ht]|0)*19+ft,wt=vt&67108863;vt>>>=26,ot.words[ht]=wt,ft=vt}return ft!==0&&(ot.words[ot.length++]=ft),ot},it._prime=function(ot){if(Pt[ot])return Pt[ot];var ft;if(ot==="k256")ft=new Gt;else if(ot==="p224")ft=new jt;else if(ot==="p192")ft=new Yt;else if(ot==="p25519")ft=new tr;else throw new Error("Unknown prime "+ot);return Pt[ot]=ft,ft};function er(It){if(typeof It=="string"){var ot=it._prime(It);this.m=ot.p,this.prime=ot}else nt(It.gtn(1),"modulus must be greater than 1"),this.m=It,this.prime=null}er.prototype._verify1=function(ot){nt(ot.negative===0,"red works only with positives"),nt(ot.red,"red works only with red numbers")},er.prototype._verify2=function(ot,ft){nt((ot.negative|ft.negative)===0,"red works only with positives"),nt(ot.red&&ot.red===ft.red,"red works only with red numbers")},er.prototype.imod=function(ot){return this.prime?this.prime.ireduce(ot)._forceRed(this):ot.umod(this.m)._forceRed(this)},er.prototype.neg=function(ot){return ot.isZero()?ot.clone():this.m.sub(ot)._forceRed(this)},er.prototype.add=function(ot,ft){this._verify2(ot,ft);var ht=ot.add(ft);return ht.cmp(this.m)>=0&&ht.isub(this.m),ht._forceRed(this)},er.prototype.iadd=function(ot,ft){this._verify2(ot,ft);var ht=ot.iadd(ft);return ht.cmp(this.m)>=0&&ht.isub(this.m),ht},er.prototype.sub=function(ot,ft){this._verify2(ot,ft);var ht=ot.sub(ft);return ht.cmpn(0)<0&&ht.iadd(this.m),ht._forceRed(this)},er.prototype.isub=function(ot,ft){this._verify2(ot,ft);var ht=ot.isub(ft);return ht.cmpn(0)<0&&ht.iadd(this.m),ht},er.prototype.shl=function(ot,ft){return this._verify1(ot),this.imod(ot.ushln(ft))},er.prototype.imul=function(ot,ft){return this._verify2(ot,ft),this.imod(ot.imul(ft))},er.prototype.mul=function(ot,ft){return this._verify2(ot,ft),this.imod(ot.mul(ft))},er.prototype.isqr=function(ot){return this.imul(ot,ot.clone())},er.prototype.sqr=function(ot){return this.mul(ot,ot)},er.prototype.sqrt=function(ot){if(ot.isZero())return ot.clone();var ft=this.m.andln(3);if(nt(ft%2===1),ft===3){var ht=this.m.add(new it(1)).iushrn(2);return this.pow(ot,ht)}for(var vt=this.m.subn(1),wt=0;!vt.isZero()&&vt.andln(1)===0;)wt++,vt.iushrn(1);nt(!vt.isZero());var bt=new it(1).toRed(this),$t=bt.redNeg(),Et=this.m.subn(1).iushrn(1),ct=this.m.bitLength();for(ct=new it(2*ct*ct).toRed(this);this.pow(ct,Et).cmp($t)!==0;)ct.redIAdd($t);for(var St=this.pow(ct,vt),Mt=this.pow(ot,vt.addn(1).iushrn(1)),Lt=this.pow(ot,vt),Ut=wt;Lt.cmp(bt)!==0;){for(var Kt=Lt,Ht=0;Kt.cmp(bt)!==0;Ht++)Kt=Kt.redSqr();nt(Ht<Ut);var Ft=this.pow(St,new it(1).iushln(Ut-Ht-1));Mt=Mt.redMul(Ft),St=Ft.redSqr(),Lt=Lt.redMul(St),Ut=Ht}return Mt},er.prototype.invm=function(ot){var ft=ot._invmp(this.m);return ft.negative!==0?(ft.negative=0,this.imod(ft).redNeg()):this.imod(ft)},er.prototype.pow=function(ot,ft){if(ft.isZero())return new it(1).toRed(this);if(ft.cmpn(1)===0)return ot.clone();var ht=4,vt=new Array(1<<ht);vt[0]=new it(1).toRed(this),vt[1]=ot;for(var wt=2;wt<vt.length;wt++)vt[wt]=this.mul(vt[wt-1],ot);var bt=vt[0],$t=0,Et=0,ct=ft.bitLength()%26;for(ct===0&&(ct=26),wt=ft.length-1;wt>=0;wt--){for(var St=ft.words[wt],Mt=ct-1;Mt>=0;Mt--){var Lt=St>>Mt&1;if(bt!==vt[0]&&(bt=this.sqr(bt)),Lt===0&&$t===0){Et=0;continue}$t<<=1,$t|=Lt,Et++,!(Et!==ht&&(wt!==0||Mt!==0))&&(bt=this.mul(bt,vt[$t]),Et=0,$t=0)}ct=26}return bt},er.prototype.convertTo=function(ot){var ft=ot.umod(this.m);return ft===ot?ft.clone():ft},er.prototype.convertFrom=function(ot){var ft=ot.clone();return ft.red=null,ft},it.mont=function(ot){return new lr(ot)};function lr(It){er.call(this,It),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new it(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}at(lr,er),lr.prototype.convertTo=function(ot){return this.imod(ot.ushln(this.shift))},lr.prototype.convertFrom=function(ot){var ft=this.imod(ot.mul(this.rinv));return ft.red=null,ft},lr.prototype.imul=function(ot,ft){if(ot.isZero()||ft.isZero())return ot.words[0]=0,ot.length=1,ot;var ht=ot.imul(ft),vt=ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),wt=ht.isub(vt).iushrn(this.shift),bt=wt;return wt.cmp(this.m)>=0?bt=wt.isub(this.m):wt.cmpn(0)<0&&(bt=wt.iadd(this.m)),bt._forceRed(this)},lr.prototype.mul=function(ot,ft){if(ot.isZero()||ft.isZero())return new it(0)._forceRed(this);var ht=ot.mul(ft),vt=ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),wt=ht.isub(vt).iushrn(this.shift),bt=wt;return wt.cmp(this.m)>=0?bt=wt.isub(this.m):wt.cmpn(0)<0&&(bt=wt.iadd(this.m)),bt._forceRed(this)},lr.prototype.invm=function(ot){var ft=this.imod(ot._invmp(this.m).mul(this.r2));return ft._forceRed(this)}})(tt,commonjsGlobal$1)}(bn$5)),bn$5.exports}var bn$4={exports:{}};bn$4.exports;var hasRequiredBn$4;function requireBn$4(){return hasRequiredBn$4||(hasRequiredBn$4=1,function(tt){(function(et,rt){function nt(It,ot){if(!It)throw new Error(ot||"Assertion failed")}function at(It,ot){It.super_=ot;var ft=function(){};ft.prototype=ot.prototype,It.prototype=new ft,It.prototype.constructor=It}function it(It,ot,ft){if(it.isBN(It))return It;this.negative=0,this.words=null,this.length=0,this.red=null,It!==null&&((ot==="le"||ot==="be")&&(ft=ot,ot=10),this._init(It||0,ot||10,ft||"be"))}typeof et=="object"?et.exports=it:rt.BN=it,it.BN=it,it.wordSize=26;var st;try{typeof window<"u"&&typeof window.Buffer<"u"?st=window.Buffer:st=require$$0$2.Buffer}catch{}it.isBN=function(ot){return ot instanceof it?!0:ot!==null&&typeof ot=="object"&&ot.constructor.wordSize===it.wordSize&&Array.isArray(ot.words)},it.max=function(ot,ft){return ot.cmp(ft)>0?ot:ft},it.min=function(ot,ft){return ot.cmp(ft)<0?ot:ft},it.prototype._init=function(ot,ft,ht){if(typeof ot=="number")return this._initNumber(ot,ft,ht);if(typeof ot=="object")return this._initArray(ot,ft,ht);ft==="hex"&&(ft=16),nt(ft===(ft|0)&&ft>=2&&ft<=36),ot=ot.toString().replace(/\s+/g,"");var vt=0;ot[0]==="-"&&(vt++,this.negative=1),vt<ot.length&&(ft===16?this._parseHex(ot,vt,ht):(this._parseBase(ot,ft,vt),ht==="le"&&this._initArray(this.toArray(),ft,ht)))},it.prototype._initNumber=function(ot,ft,ht){ot<0&&(this.negative=1,ot=-ot),ot<67108864?(this.words=[ot&67108863],this.length=1):ot<4503599627370496?(this.words=[ot&67108863,ot/67108864&67108863],this.length=2):(nt(ot<9007199254740992),this.words=[ot&67108863,ot/67108864&67108863,1],this.length=3),ht==="le"&&this._initArray(this.toArray(),ft,ht)},it.prototype._initArray=function(ot,ft,ht){if(nt(typeof ot.length=="number"),ot.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ot.length/3),this.words=new Array(this.length);for(var vt=0;vt<this.length;vt++)this.words[vt]=0;var wt,bt,$t=0;if(ht==="be")for(vt=ot.length-1,wt=0;vt>=0;vt-=3)bt=ot[vt]|ot[vt-1]<<8|ot[vt-2]<<16,this.words[wt]|=bt<<$t&67108863,this.words[wt+1]=bt>>>26-$t&67108863,$t+=24,$t>=26&&($t-=26,wt++);else if(ht==="le")for(vt=0,wt=0;vt<ot.length;vt+=3)bt=ot[vt]|ot[vt+1]<<8|ot[vt+2]<<16,this.words[wt]|=bt<<$t&67108863,this.words[wt+1]=bt>>>26-$t&67108863,$t+=24,$t>=26&&($t-=26,wt++);return this.strip()};function dt(It,ot){var ft=It.charCodeAt(ot);return ft>=65&&ft<=70?ft-55:ft>=97&&ft<=102?ft-87:ft-48&15}function pt(It,ot,ft){var ht=dt(It,ft);return ft-1>=ot&&(ht|=dt(It,ft-1)<<4),ht}it.prototype._parseHex=function(ot,ft,ht){this.length=Math.ceil((ot.length-ft)/6),this.words=new Array(this.length);for(var vt=0;vt<this.length;vt++)this.words[vt]=0;var wt=0,bt=0,$t;if(ht==="be")for(vt=ot.length-1;vt>=ft;vt-=2)$t=pt(ot,ft,vt)<<wt,this.words[bt]|=$t&67108863,wt>=18?(wt-=18,bt+=1,this.words[bt]|=$t>>>26):wt+=8;else{var Et=ot.length-ft;for(vt=Et%2===0?ft+1:ft;vt<ot.length;vt+=2)$t=pt(ot,ft,vt)<<wt,this.words[bt]|=$t&67108863,wt>=18?(wt-=18,bt+=1,this.words[bt]|=$t>>>26):wt+=8}this.strip()};function mt(It,ot,ft,ht){for(var vt=0,wt=Math.min(It.length,ft),bt=ot;bt<wt;bt++){var $t=It.charCodeAt(bt)-48;vt*=ht,$t>=49?vt+=$t-49+10:$t>=17?vt+=$t-17+10:vt+=$t}return vt}it.prototype._parseBase=function(ot,ft,ht){this.words=[0],this.length=1;for(var vt=0,wt=1;wt<=67108863;wt*=ft)vt++;vt--,wt=wt/ft|0;for(var bt=ot.length-ht,$t=bt%vt,Et=Math.min(bt,bt-$t)+ht,ct=0,St=ht;St<Et;St+=vt)ct=mt(ot,St,St+vt,ft),this.imuln(wt),this.words[0]+ct<67108864?this.words[0]+=ct:this._iaddn(ct);if($t!==0){var Mt=1;for(ct=mt(ot,St,ot.length,ft),St=0;St<$t;St++)Mt*=ft;this.imuln(Mt),this.words[0]+ct<67108864?this.words[0]+=ct:this._iaddn(ct)}this.strip()},it.prototype.copy=function(ot){ot.words=new Array(this.length);for(var ft=0;ft<this.length;ft++)ot.words[ft]=this.words[ft];ot.length=this.length,ot.negative=this.negative,ot.red=this.red},it.prototype.clone=function(){var ot=new it(null);return this.copy(ot),ot},it.prototype._expand=function(ot){for(;this.length<ot;)this.words[this.length++]=0;return this},it.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},it.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},it.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var yt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Rt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Tt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];it.prototype.toString=function(ot,ft){ot=ot||10,ft=ft|0||1;var ht;if(ot===16||ot==="hex"){ht="";for(var vt=0,wt=0,bt=0;bt<this.length;bt++){var $t=this.words[bt],Et=(($t<<vt|wt)&16777215).toString(16);wt=$t>>>24-vt&16777215,wt!==0||bt!==this.length-1?ht=yt[6-Et.length]+Et+ht:ht=Et+ht,vt+=2,vt>=26&&(vt-=26,bt--)}for(wt!==0&&(ht=wt.toString(16)+ht);ht.length%ft!==0;)ht="0"+ht;return this.negative!==0&&(ht="-"+ht),ht}if(ot===(ot|0)&&ot>=2&&ot<=36){var ct=Rt[ot],St=Tt[ot];ht="";var Mt=this.clone();for(Mt.negative=0;!Mt.isZero();){var Lt=Mt.modn(St).toString(ot);Mt=Mt.idivn(St),Mt.isZero()?ht=Lt+ht:ht=yt[ct-Lt.length]+Lt+ht}for(this.isZero()&&(ht="0"+ht);ht.length%ft!==0;)ht="0"+ht;return this.negative!==0&&(ht="-"+ht),ht}nt(!1,"Base should be between 2 and 36")},it.prototype.toNumber=function(){var ot=this.words[0];return this.length===2?ot+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ot+=4503599627370496+this.words[1]*67108864:this.length>2&&nt(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ot:ot},it.prototype.toJSON=function(){return this.toString(16)},it.prototype.toBuffer=function(ot,ft){return nt(typeof st<"u"),this.toArrayLike(st,ot,ft)},it.prototype.toArray=function(ot,ft){return this.toArrayLike(Array,ot,ft)},it.prototype.toArrayLike=function(ot,ft,ht){var vt=this.byteLength(),wt=ht||Math.max(1,vt);nt(vt<=wt,"byte array longer than desired length"),nt(wt>0,"Requested array length <= 0"),this.strip();var bt=ft==="le",$t=new ot(wt),Et,ct,St=this.clone();if(bt){for(ct=0;!St.isZero();ct++)Et=St.andln(255),St.iushrn(8),$t[ct]=Et;for(;ct<wt;ct++)$t[ct]=0}else{for(ct=0;ct<wt-vt;ct++)$t[ct]=0;for(ct=0;!St.isZero();ct++)Et=St.andln(255),St.iushrn(8),$t[wt-ct-1]=Et}return $t},Math.clz32?it.prototype._countBits=function(ot){return 32-Math.clz32(ot)}:it.prototype._countBits=function(ot){var ft=ot,ht=0;return ft>=4096&&(ht+=13,ft>>>=13),ft>=64&&(ht+=7,ft>>>=7),ft>=8&&(ht+=4,ft>>>=4),ft>=2&&(ht+=2,ft>>>=2),ht+ft},it.prototype._zeroBits=function(ot){if(ot===0)return 26;var ft=ot,ht=0;return ft&8191||(ht+=13,ft>>>=13),ft&127||(ht+=7,ft>>>=7),ft&15||(ht+=4,ft>>>=4),ft&3||(ht+=2,ft>>>=2),ft&1||ht++,ht},it.prototype.bitLength=function(){var ot=this.words[this.length-1],ft=this._countBits(ot);return(this.length-1)*26+ft};function At(It){for(var ot=new Array(It.bitLength()),ft=0;ft<ot.length;ft++){var ht=ft/26|0,vt=ft%26;ot[ft]=(It.words[ht]&1<<vt)>>>vt}return ot}it.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ot=0,ft=0;ft<this.length;ft++){var ht=this._zeroBits(this.words[ft]);if(ot+=ht,ht!==26)break}return ot},it.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},it.prototype.toTwos=function(ot){return this.negative!==0?this.abs().inotn(ot).iaddn(1):this.clone()},it.prototype.fromTwos=function(ot){return this.testn(ot-1)?this.notn(ot).iaddn(1).ineg():this.clone()},it.prototype.isNeg=function(){return this.negative!==0},it.prototype.neg=function(){return this.clone().ineg()},it.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},it.prototype.iuor=function(ot){for(;this.length<ot.length;)this.words[this.length++]=0;for(var ft=0;ft<ot.length;ft++)this.words[ft]=this.words[ft]|ot.words[ft];return this.strip()},it.prototype.ior=function(ot){return nt((this.negative|ot.negative)===0),this.iuor(ot)},it.prototype.or=function(ot){return this.length>ot.length?this.clone().ior(ot):ot.clone().ior(this)},it.prototype.uor=function(ot){return this.length>ot.length?this.clone().iuor(ot):ot.clone().iuor(this)},it.prototype.iuand=function(ot){var ft;this.length>ot.length?ft=ot:ft=this;for(var ht=0;ht<ft.length;ht++)this.words[ht]=this.words[ht]&ot.words[ht];return this.length=ft.length,this.strip()},it.prototype.iand=function(ot){return nt((this.negative|ot.negative)===0),this.iuand(ot)},it.prototype.and=function(ot){return this.length>ot.length?this.clone().iand(ot):ot.clone().iand(this)},it.prototype.uand=function(ot){return this.length>ot.length?this.clone().iuand(ot):ot.clone().iuand(this)},it.prototype.iuxor=function(ot){var ft,ht;this.length>ot.length?(ft=this,ht=ot):(ft=ot,ht=this);for(var vt=0;vt<ht.length;vt++)this.words[vt]=ft.words[vt]^ht.words[vt];if(this!==ft)for(;vt<ft.length;vt++)this.words[vt]=ft.words[vt];return this.length=ft.length,this.strip()},it.prototype.ixor=function(ot){return nt((this.negative|ot.negative)===0),this.iuxor(ot)},it.prototype.xor=function(ot){return this.length>ot.length?this.clone().ixor(ot):ot.clone().ixor(this)},it.prototype.uxor=function(ot){return this.length>ot.length?this.clone().iuxor(ot):ot.clone().iuxor(this)},it.prototype.inotn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=Math.ceil(ot/26)|0,ht=ot%26;this._expand(ft),ht>0&&ft--;for(var vt=0;vt<ft;vt++)this.words[vt]=~this.words[vt]&67108863;return ht>0&&(this.words[vt]=~this.words[vt]&67108863>>26-ht),this.strip()},it.prototype.notn=function(ot){return this.clone().inotn(ot)},it.prototype.setn=function(ot,ft){nt(typeof ot=="number"&&ot>=0);var ht=ot/26|0,vt=ot%26;return this._expand(ht+1),ft?this.words[ht]=this.words[ht]|1<<vt:this.words[ht]=this.words[ht]&~(1<<vt),this.strip()},it.prototype.iadd=function(ot){var ft;if(this.negative!==0&&ot.negative===0)return this.negative=0,ft=this.isub(ot),this.negative^=1,this._normSign();if(this.negative===0&&ot.negative!==0)return ot.negative=0,ft=this.isub(ot),ot.negative=1,ft._normSign();var ht,vt;this.length>ot.length?(ht=this,vt=ot):(ht=ot,vt=this);for(var wt=0,bt=0;bt<vt.length;bt++)ft=(ht.words[bt]|0)+(vt.words[bt]|0)+wt,this.words[bt]=ft&67108863,wt=ft>>>26;for(;wt!==0&&bt<ht.length;bt++)ft=(ht.words[bt]|0)+wt,this.words[bt]=ft&67108863,wt=ft>>>26;if(this.length=ht.length,wt!==0)this.words[this.length]=wt,this.length++;else if(ht!==this)for(;bt<ht.length;bt++)this.words[bt]=ht.words[bt];return this},it.prototype.add=function(ot){var ft;return ot.negative!==0&&this.negative===0?(ot.negative=0,ft=this.sub(ot),ot.negative^=1,ft):ot.negative===0&&this.negative!==0?(this.negative=0,ft=ot.sub(this),this.negative=1,ft):this.length>ot.length?this.clone().iadd(ot):ot.clone().iadd(this)},it.prototype.isub=function(ot){if(ot.negative!==0){ot.negative=0;var ft=this.iadd(ot);return ot.negative=1,ft._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ot),this.negative=1,this._normSign();var ht=this.cmp(ot);if(ht===0)return this.negative=0,this.length=1,this.words[0]=0,this;var vt,wt;ht>0?(vt=this,wt=ot):(vt=ot,wt=this);for(var bt=0,$t=0;$t<wt.length;$t++)ft=(vt.words[$t]|0)-(wt.words[$t]|0)+bt,bt=ft>>26,this.words[$t]=ft&67108863;for(;bt!==0&&$t<vt.length;$t++)ft=(vt.words[$t]|0)+bt,bt=ft>>26,this.words[$t]=ft&67108863;if(bt===0&&$t<vt.length&&vt!==this)for(;$t<vt.length;$t++)this.words[$t]=vt.words[$t];return this.length=Math.max(this.length,$t),vt!==this&&(this.negative=1),this.strip()},it.prototype.sub=function(ot){return this.clone().isub(ot)};function xt(It,ot,ft){ft.negative=ot.negative^It.negative;var ht=It.length+ot.length|0;ft.length=ht,ht=ht-1|0;var vt=It.words[0]|0,wt=ot.words[0]|0,bt=vt*wt,$t=bt&67108863,Et=bt/67108864|0;ft.words[0]=$t;for(var ct=1;ct<ht;ct++){for(var St=Et>>>26,Mt=Et&67108863,Lt=Math.min(ct,ot.length-1),Ut=Math.max(0,ct-It.length+1);Ut<=Lt;Ut++){var Kt=ct-Ut|0;vt=It.words[Kt]|0,wt=ot.words[Ut]|0,bt=vt*wt+Mt,St+=bt/67108864|0,Mt=bt&67108863}ft.words[ct]=Mt|0,Et=St|0}return Et!==0?ft.words[ct]=Et|0:ft.length--,ft.strip()}var Nt=function(ot,ft,ht){var vt=ot.words,wt=ft.words,bt=ht.words,$t=0,Et,ct,St,Mt=vt[0]|0,Lt=Mt&8191,Ut=Mt>>>13,Kt=vt[1]|0,Ht=Kt&8191,Ft=Kt>>>13,zt=vt[2]|0,ir=zt&8191,sr=zt>>>13,ar=vt[3]|0,Vt=ar&8191,fr=ar>>>13,Gr=vt[4]|0,ur=Gr&8191,pr=Gr>>>13,Fr=vt[5]|0,yr=Fr&8191,hr=Fr>>>13,Wr=vt[6]|0,$r=Wr&8191,Cr=Wr>>>13,an=vt[7]|0,Er=an&8191,Ar=an>>>13,gn=vt[8]|0,Or=gn&8191,Lr=gn>>>13,wn=vt[9]|0,Xt=wn&8191,Bt=wn>>>13,Wt=wt[0]|0,nr=Wt&8191,cr=Wt>>>13,Sr=wt[1]|0,_r=Sr&8191,xr=Sr>>>13,pn=wt[2]|0,Tr=pn&8191,Ur=pn>>>13,un=wt[3]|0,Ir=un&8191,Nr=un>>>13,zr=wt[4]|0,br=zr&8191,Dr=zr>>>13,yn=wt[5]|0,Mr=yn&8191,qr=yn>>>13,Sn=wt[6]|0,Br=Sn&8191,Hr=Sn>>>13,Zt=wt[7]|0,Qt=Zt&8191,Jt=Zt>>>13,qt=wt[8]|0,rr=qt&8191,dr=qt>>>13,Rr=wt[9]|0,vr=Rr&8191,wr=Rr>>>13;ht.negative=ot.negative^ft.negative,ht.length=19,Et=Math.imul(Lt,nr),ct=Math.imul(Lt,cr),ct=ct+Math.imul(Ut,nr)|0,St=Math.imul(Ut,cr);var Yr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,Et=Math.imul(Ht,nr),ct=Math.imul(Ht,cr),ct=ct+Math.imul(Ft,nr)|0,St=Math.imul(Ft,cr),Et=Et+Math.imul(Lt,_r)|0,ct=ct+Math.imul(Lt,xr)|0,ct=ct+Math.imul(Ut,_r)|0,St=St+Math.imul(Ut,xr)|0;var jr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(jr>>>26)|0,jr&=67108863,Et=Math.imul(ir,nr),ct=Math.imul(ir,cr),ct=ct+Math.imul(sr,nr)|0,St=Math.imul(sr,cr),Et=Et+Math.imul(Ht,_r)|0,ct=ct+Math.imul(Ht,xr)|0,ct=ct+Math.imul(Ft,_r)|0,St=St+Math.imul(Ft,xr)|0,Et=Et+Math.imul(Lt,Tr)|0,ct=ct+Math.imul(Lt,Ur)|0,ct=ct+Math.imul(Ut,Tr)|0,St=St+Math.imul(Ut,Ur)|0;var mn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(mn>>>26)|0,mn&=67108863,Et=Math.imul(Vt,nr),ct=Math.imul(Vt,cr),ct=ct+Math.imul(fr,nr)|0,St=Math.imul(fr,cr),Et=Et+Math.imul(ir,_r)|0,ct=ct+Math.imul(ir,xr)|0,ct=ct+Math.imul(sr,_r)|0,St=St+Math.imul(sr,xr)|0,Et=Et+Math.imul(Ht,Tr)|0,ct=ct+Math.imul(Ht,Ur)|0,ct=ct+Math.imul(Ft,Tr)|0,St=St+Math.imul(Ft,Ur)|0,Et=Et+Math.imul(Lt,Ir)|0,ct=ct+Math.imul(Lt,Nr)|0,ct=ct+Math.imul(Ut,Ir)|0,St=St+Math.imul(Ut,Nr)|0;var Jr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,Et=Math.imul(ur,nr),ct=Math.imul(ur,cr),ct=ct+Math.imul(pr,nr)|0,St=Math.imul(pr,cr),Et=Et+Math.imul(Vt,_r)|0,ct=ct+Math.imul(Vt,xr)|0,ct=ct+Math.imul(fr,_r)|0,St=St+Math.imul(fr,xr)|0,Et=Et+Math.imul(ir,Tr)|0,ct=ct+Math.imul(ir,Ur)|0,ct=ct+Math.imul(sr,Tr)|0,St=St+Math.imul(sr,Ur)|0,Et=Et+Math.imul(Ht,Ir)|0,ct=ct+Math.imul(Ht,Nr)|0,ct=ct+Math.imul(Ft,Ir)|0,St=St+Math.imul(Ft,Nr)|0,Et=Et+Math.imul(Lt,br)|0,ct=ct+Math.imul(Lt,Dr)|0,ct=ct+Math.imul(Ut,br)|0,St=St+Math.imul(Ut,Dr)|0;var cn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(cn>>>26)|0,cn&=67108863,Et=Math.imul(yr,nr),ct=Math.imul(yr,cr),ct=ct+Math.imul(hr,nr)|0,St=Math.imul(hr,cr),Et=Et+Math.imul(ur,_r)|0,ct=ct+Math.imul(ur,xr)|0,ct=ct+Math.imul(pr,_r)|0,St=St+Math.imul(pr,xr)|0,Et=Et+Math.imul(Vt,Tr)|0,ct=ct+Math.imul(Vt,Ur)|0,ct=ct+Math.imul(fr,Tr)|0,St=St+Math.imul(fr,Ur)|0,Et=Et+Math.imul(ir,Ir)|0,ct=ct+Math.imul(ir,Nr)|0,ct=ct+Math.imul(sr,Ir)|0,St=St+Math.imul(sr,Nr)|0,Et=Et+Math.imul(Ht,br)|0,ct=ct+Math.imul(Ht,Dr)|0,ct=ct+Math.imul(Ft,br)|0,St=St+Math.imul(Ft,Dr)|0,Et=Et+Math.imul(Lt,Mr)|0,ct=ct+Math.imul(Lt,qr)|0,ct=ct+Math.imul(Ut,Mr)|0,St=St+Math.imul(Ut,qr)|0;var ln=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(ln>>>26)|0,ln&=67108863,Et=Math.imul($r,nr),ct=Math.imul($r,cr),ct=ct+Math.imul(Cr,nr)|0,St=Math.imul(Cr,cr),Et=Et+Math.imul(yr,_r)|0,ct=ct+Math.imul(yr,xr)|0,ct=ct+Math.imul(hr,_r)|0,St=St+Math.imul(hr,xr)|0,Et=Et+Math.imul(ur,Tr)|0,ct=ct+Math.imul(ur,Ur)|0,ct=ct+Math.imul(pr,Tr)|0,St=St+Math.imul(pr,Ur)|0,Et=Et+Math.imul(Vt,Ir)|0,ct=ct+Math.imul(Vt,Nr)|0,ct=ct+Math.imul(fr,Ir)|0,St=St+Math.imul(fr,Nr)|0,Et=Et+Math.imul(ir,br)|0,ct=ct+Math.imul(ir,Dr)|0,ct=ct+Math.imul(sr,br)|0,St=St+Math.imul(sr,Dr)|0,Et=Et+Math.imul(Ht,Mr)|0,ct=ct+Math.imul(Ht,qr)|0,ct=ct+Math.imul(Ft,Mr)|0,St=St+Math.imul(Ft,qr)|0,Et=Et+Math.imul(Lt,Br)|0,ct=ct+Math.imul(Lt,Hr)|0,ct=ct+Math.imul(Ut,Br)|0,St=St+Math.imul(Ut,Hr)|0;var vn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(vn>>>26)|0,vn&=67108863,Et=Math.imul(Er,nr),ct=Math.imul(Er,cr),ct=ct+Math.imul(Ar,nr)|0,St=Math.imul(Ar,cr),Et=Et+Math.imul($r,_r)|0,ct=ct+Math.imul($r,xr)|0,ct=ct+Math.imul(Cr,_r)|0,St=St+Math.imul(Cr,xr)|0,Et=Et+Math.imul(yr,Tr)|0,ct=ct+Math.imul(yr,Ur)|0,ct=ct+Math.imul(hr,Tr)|0,St=St+Math.imul(hr,Ur)|0,Et=Et+Math.imul(ur,Ir)|0,ct=ct+Math.imul(ur,Nr)|0,ct=ct+Math.imul(pr,Ir)|0,St=St+Math.imul(pr,Nr)|0,Et=Et+Math.imul(Vt,br)|0,ct=ct+Math.imul(Vt,Dr)|0,ct=ct+Math.imul(fr,br)|0,St=St+Math.imul(fr,Dr)|0,Et=Et+Math.imul(ir,Mr)|0,ct=ct+Math.imul(ir,qr)|0,ct=ct+Math.imul(sr,Mr)|0,St=St+Math.imul(sr,qr)|0,Et=Et+Math.imul(Ht,Br)|0,ct=ct+Math.imul(Ht,Hr)|0,ct=ct+Math.imul(Ft,Br)|0,St=St+Math.imul(Ft,Hr)|0,Et=Et+Math.imul(Lt,Qt)|0,ct=ct+Math.imul(Lt,Jt)|0,ct=ct+Math.imul(Ut,Qt)|0,St=St+Math.imul(Ut,Jt)|0;var _n=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(_n>>>26)|0,_n&=67108863,Et=Math.imul(Or,nr),ct=Math.imul(Or,cr),ct=ct+Math.imul(Lr,nr)|0,St=Math.imul(Lr,cr),Et=Et+Math.imul(Er,_r)|0,ct=ct+Math.imul(Er,xr)|0,ct=ct+Math.imul(Ar,_r)|0,St=St+Math.imul(Ar,xr)|0,Et=Et+Math.imul($r,Tr)|0,ct=ct+Math.imul($r,Ur)|0,ct=ct+Math.imul(Cr,Tr)|0,St=St+Math.imul(Cr,Ur)|0,Et=Et+Math.imul(yr,Ir)|0,ct=ct+Math.imul(yr,Nr)|0,ct=ct+Math.imul(hr,Ir)|0,St=St+Math.imul(hr,Nr)|0,Et=Et+Math.imul(ur,br)|0,ct=ct+Math.imul(ur,Dr)|0,ct=ct+Math.imul(pr,br)|0,St=St+Math.imul(pr,Dr)|0,Et=Et+Math.imul(Vt,Mr)|0,ct=ct+Math.imul(Vt,qr)|0,ct=ct+Math.imul(fr,Mr)|0,St=St+Math.imul(fr,qr)|0,Et=Et+Math.imul(ir,Br)|0,ct=ct+Math.imul(ir,Hr)|0,ct=ct+Math.imul(sr,Br)|0,St=St+Math.imul(sr,Hr)|0,Et=Et+Math.imul(Ht,Qt)|0,ct=ct+Math.imul(Ht,Jt)|0,ct=ct+Math.imul(Ft,Qt)|0,St=St+Math.imul(Ft,Jt)|0,Et=Et+Math.imul(Lt,rr)|0,ct=ct+Math.imul(Lt,dr)|0,ct=ct+Math.imul(Ut,rr)|0,St=St+Math.imul(Ut,dr)|0;var fn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(fn>>>26)|0,fn&=67108863,Et=Math.imul(Xt,nr),ct=Math.imul(Xt,cr),ct=ct+Math.imul(Bt,nr)|0,St=Math.imul(Bt,cr),Et=Et+Math.imul(Or,_r)|0,ct=ct+Math.imul(Or,xr)|0,ct=ct+Math.imul(Lr,_r)|0,St=St+Math.imul(Lr,xr)|0,Et=Et+Math.imul(Er,Tr)|0,ct=ct+Math.imul(Er,Ur)|0,ct=ct+Math.imul(Ar,Tr)|0,St=St+Math.imul(Ar,Ur)|0,Et=Et+Math.imul($r,Ir)|0,ct=ct+Math.imul($r,Nr)|0,ct=ct+Math.imul(Cr,Ir)|0,St=St+Math.imul(Cr,Nr)|0,Et=Et+Math.imul(yr,br)|0,ct=ct+Math.imul(yr,Dr)|0,ct=ct+Math.imul(hr,br)|0,St=St+Math.imul(hr,Dr)|0,Et=Et+Math.imul(ur,Mr)|0,ct=ct+Math.imul(ur,qr)|0,ct=ct+Math.imul(pr,Mr)|0,St=St+Math.imul(pr,qr)|0,Et=Et+Math.imul(Vt,Br)|0,ct=ct+Math.imul(Vt,Hr)|0,ct=ct+Math.imul(fr,Br)|0,St=St+Math.imul(fr,Hr)|0,Et=Et+Math.imul(ir,Qt)|0,ct=ct+Math.imul(ir,Jt)|0,ct=ct+Math.imul(sr,Qt)|0,St=St+Math.imul(sr,Jt)|0,Et=Et+Math.imul(Ht,rr)|0,ct=ct+Math.imul(Ht,dr)|0,ct=ct+Math.imul(Ft,rr)|0,St=St+Math.imul(Ft,dr)|0,Et=Et+Math.imul(Lt,vr)|0,ct=ct+Math.imul(Lt,wr)|0,ct=ct+Math.imul(Ut,vr)|0,St=St+Math.imul(Ut,wr)|0;var hn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(hn>>>26)|0,hn&=67108863,Et=Math.imul(Xt,_r),ct=Math.imul(Xt,xr),ct=ct+Math.imul(Bt,_r)|0,St=Math.imul(Bt,xr),Et=Et+Math.imul(Or,Tr)|0,ct=ct+Math.imul(Or,Ur)|0,ct=ct+Math.imul(Lr,Tr)|0,St=St+Math.imul(Lr,Ur)|0,Et=Et+Math.imul(Er,Ir)|0,ct=ct+Math.imul(Er,Nr)|0,ct=ct+Math.imul(Ar,Ir)|0,St=St+Math.imul(Ar,Nr)|0,Et=Et+Math.imul($r,br)|0,ct=ct+Math.imul($r,Dr)|0,ct=ct+Math.imul(Cr,br)|0,St=St+Math.imul(Cr,Dr)|0,Et=Et+Math.imul(yr,Mr)|0,ct=ct+Math.imul(yr,qr)|0,ct=ct+Math.imul(hr,Mr)|0,St=St+Math.imul(hr,qr)|0,Et=Et+Math.imul(ur,Br)|0,ct=ct+Math.imul(ur,Hr)|0,ct=ct+Math.imul(pr,Br)|0,St=St+Math.imul(pr,Hr)|0,Et=Et+Math.imul(Vt,Qt)|0,ct=ct+Math.imul(Vt,Jt)|0,ct=ct+Math.imul(fr,Qt)|0,St=St+Math.imul(fr,Jt)|0,Et=Et+Math.imul(ir,rr)|0,ct=ct+Math.imul(ir,dr)|0,ct=ct+Math.imul(sr,rr)|0,St=St+Math.imul(sr,dr)|0,Et=Et+Math.imul(Ht,vr)|0,ct=ct+Math.imul(Ht,wr)|0,ct=ct+Math.imul(Ft,vr)|0,St=St+Math.imul(Ft,wr)|0;var dn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(dn>>>26)|0,dn&=67108863,Et=Math.imul(Xt,Tr),ct=Math.imul(Xt,Ur),ct=ct+Math.imul(Bt,Tr)|0,St=Math.imul(Bt,Ur),Et=Et+Math.imul(Or,Ir)|0,ct=ct+Math.imul(Or,Nr)|0,ct=ct+Math.imul(Lr,Ir)|0,St=St+Math.imul(Lr,Nr)|0,Et=Et+Math.imul(Er,br)|0,ct=ct+Math.imul(Er,Dr)|0,ct=ct+Math.imul(Ar,br)|0,St=St+Math.imul(Ar,Dr)|0,Et=Et+Math.imul($r,Mr)|0,ct=ct+Math.imul($r,qr)|0,ct=ct+Math.imul(Cr,Mr)|0,St=St+Math.imul(Cr,qr)|0,Et=Et+Math.imul(yr,Br)|0,ct=ct+Math.imul(yr,Hr)|0,ct=ct+Math.imul(hr,Br)|0,St=St+Math.imul(hr,Hr)|0,Et=Et+Math.imul(ur,Qt)|0,ct=ct+Math.imul(ur,Jt)|0,ct=ct+Math.imul(pr,Qt)|0,St=St+Math.imul(pr,Jt)|0,Et=Et+Math.imul(Vt,rr)|0,ct=ct+Math.imul(Vt,dr)|0,ct=ct+Math.imul(fr,rr)|0,St=St+Math.imul(fr,dr)|0,Et=Et+Math.imul(ir,vr)|0,ct=ct+Math.imul(ir,wr)|0,ct=ct+Math.imul(sr,vr)|0,St=St+Math.imul(sr,wr)|0;var tn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(tn>>>26)|0,tn&=67108863,Et=Math.imul(Xt,Ir),ct=Math.imul(Xt,Nr),ct=ct+Math.imul(Bt,Ir)|0,St=Math.imul(Bt,Nr),Et=Et+Math.imul(Or,br)|0,ct=ct+Math.imul(Or,Dr)|0,ct=ct+Math.imul(Lr,br)|0,St=St+Math.imul(Lr,Dr)|0,Et=Et+Math.imul(Er,Mr)|0,ct=ct+Math.imul(Er,qr)|0,ct=ct+Math.imul(Ar,Mr)|0,St=St+Math.imul(Ar,qr)|0,Et=Et+Math.imul($r,Br)|0,ct=ct+Math.imul($r,Hr)|0,ct=ct+Math.imul(Cr,Br)|0,St=St+Math.imul(Cr,Hr)|0,Et=Et+Math.imul(yr,Qt)|0,ct=ct+Math.imul(yr,Jt)|0,ct=ct+Math.imul(hr,Qt)|0,St=St+Math.imul(hr,Jt)|0,Et=Et+Math.imul(ur,rr)|0,ct=ct+Math.imul(ur,dr)|0,ct=ct+Math.imul(pr,rr)|0,St=St+Math.imul(pr,dr)|0,Et=Et+Math.imul(Vt,vr)|0,ct=ct+Math.imul(Vt,wr)|0,ct=ct+Math.imul(fr,vr)|0,St=St+Math.imul(fr,wr)|0;var sn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(sn>>>26)|0,sn&=67108863,Et=Math.imul(Xt,br),ct=Math.imul(Xt,Dr),ct=ct+Math.imul(Bt,br)|0,St=Math.imul(Bt,Dr),Et=Et+Math.imul(Or,Mr)|0,ct=ct+Math.imul(Or,qr)|0,ct=ct+Math.imul(Lr,Mr)|0,St=St+Math.imul(Lr,qr)|0,Et=Et+Math.imul(Er,Br)|0,ct=ct+Math.imul(Er,Hr)|0,ct=ct+Math.imul(Ar,Br)|0,St=St+Math.imul(Ar,Hr)|0,Et=Et+Math.imul($r,Qt)|0,ct=ct+Math.imul($r,Jt)|0,ct=ct+Math.imul(Cr,Qt)|0,St=St+Math.imul(Cr,Jt)|0,Et=Et+Math.imul(yr,rr)|0,ct=ct+Math.imul(yr,dr)|0,ct=ct+Math.imul(hr,rr)|0,St=St+Math.imul(hr,dr)|0,Et=Et+Math.imul(ur,vr)|0,ct=ct+Math.imul(ur,wr)|0,ct=ct+Math.imul(pr,vr)|0,St=St+Math.imul(pr,wr)|0;var Qr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,Et=Math.imul(Xt,Mr),ct=Math.imul(Xt,qr),ct=ct+Math.imul(Bt,Mr)|0,St=Math.imul(Bt,qr),Et=Et+Math.imul(Or,Br)|0,ct=ct+Math.imul(Or,Hr)|0,ct=ct+Math.imul(Lr,Br)|0,St=St+Math.imul(Lr,Hr)|0,Et=Et+Math.imul(Er,Qt)|0,ct=ct+Math.imul(Er,Jt)|0,ct=ct+Math.imul(Ar,Qt)|0,St=St+Math.imul(Ar,Jt)|0,Et=Et+Math.imul($r,rr)|0,ct=ct+Math.imul($r,dr)|0,ct=ct+Math.imul(Cr,rr)|0,St=St+Math.imul(Cr,dr)|0,Et=Et+Math.imul(yr,vr)|0,ct=ct+Math.imul(yr,wr)|0,ct=ct+Math.imul(hr,vr)|0,St=St+Math.imul(hr,wr)|0;var rn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(rn>>>26)|0,rn&=67108863,Et=Math.imul(Xt,Br),ct=Math.imul(Xt,Hr),ct=ct+Math.imul(Bt,Br)|0,St=Math.imul(Bt,Hr),Et=Et+Math.imul(Or,Qt)|0,ct=ct+Math.imul(Or,Jt)|0,ct=ct+Math.imul(Lr,Qt)|0,St=St+Math.imul(Lr,Jt)|0,Et=Et+Math.imul(Er,rr)|0,ct=ct+Math.imul(Er,dr)|0,ct=ct+Math.imul(Ar,rr)|0,St=St+Math.imul(Ar,dr)|0,Et=Et+Math.imul($r,vr)|0,ct=ct+Math.imul($r,wr)|0,ct=ct+Math.imul(Cr,vr)|0,St=St+Math.imul(Cr,wr)|0;var nn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(nn>>>26)|0,nn&=67108863,Et=Math.imul(Xt,Qt),ct=Math.imul(Xt,Jt),ct=ct+Math.imul(Bt,Qt)|0,St=Math.imul(Bt,Jt),Et=Et+Math.imul(Or,rr)|0,ct=ct+Math.imul(Or,dr)|0,ct=ct+Math.imul(Lr,rr)|0,St=St+Math.imul(Lr,dr)|0,Et=Et+Math.imul(Er,vr)|0,ct=ct+Math.imul(Er,wr)|0,ct=ct+Math.imul(Ar,vr)|0,St=St+Math.imul(Ar,wr)|0;var Xr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,Et=Math.imul(Xt,rr),ct=Math.imul(Xt,dr),ct=ct+Math.imul(Bt,rr)|0,St=Math.imul(Bt,dr),Et=Et+Math.imul(Or,vr)|0,ct=ct+Math.imul(Or,wr)|0,ct=ct+Math.imul(Lr,vr)|0,St=St+Math.imul(Lr,wr)|0;var kr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(kr>>>26)|0,kr&=67108863,Et=Math.imul(Xt,vr),ct=Math.imul(Xt,wr),ct=ct+Math.imul(Bt,vr)|0,St=Math.imul(Bt,wr);var Pr=($t+Et|0)+((ct&8191)<<13)|0;return $t=(St+(ct>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,bt[0]=Yr,bt[1]=jr,bt[2]=mn,bt[3]=Jr,bt[4]=cn,bt[5]=ln,bt[6]=vn,bt[7]=_n,bt[8]=fn,bt[9]=hn,bt[10]=dn,bt[11]=tn,bt[12]=sn,bt[13]=Qr,bt[14]=rn,bt[15]=nn,bt[16]=Xr,bt[17]=kr,bt[18]=Pr,$t!==0&&(bt[19]=$t,ht.length++),ht};Math.imul||(Nt=xt);function Ct(It,ot,ft){ft.negative=ot.negative^It.negative,ft.length=It.length+ot.length;for(var ht=0,vt=0,wt=0;wt<ft.length-1;wt++){var bt=vt;vt=0;for(var $t=ht&67108863,Et=Math.min(wt,ot.length-1),ct=Math.max(0,wt-It.length+1);ct<=Et;ct++){var St=wt-ct,Mt=It.words[St]|0,Lt=ot.words[ct]|0,Ut=Mt*Lt,Kt=Ut&67108863;bt=bt+(Ut/67108864|0)|0,Kt=Kt+$t|0,$t=Kt&67108863,bt=bt+(Kt>>>26)|0,vt+=bt>>>26,bt&=67108863}ft.words[wt]=$t,ht=bt,bt=vt}return ht!==0?ft.words[wt]=ht:ft.length--,ft.strip()}function Ot(It,ot,ft){var ht=new kt;return ht.mulp(It,ot,ft)}it.prototype.mulTo=function(ot,ft){var ht,vt=this.length+ot.length;return this.length===10&&ot.length===10?ht=Nt(this,ot,ft):vt<63?ht=xt(this,ot,ft):vt<1024?ht=Ct(this,ot,ft):ht=Ot(this,ot,ft),ht};function kt(It,ot){this.x=It,this.y=ot}kt.prototype.makeRBT=function(ot){for(var ft=new Array(ot),ht=it.prototype._countBits(ot)-1,vt=0;vt<ot;vt++)ft[vt]=this.revBin(vt,ht,ot);return ft},kt.prototype.revBin=function(ot,ft,ht){if(ot===0||ot===ht-1)return ot;for(var vt=0,wt=0;wt<ft;wt++)vt|=(ot&1)<<ft-wt-1,ot>>=1;return vt},kt.prototype.permute=function(ot,ft,ht,vt,wt,bt){for(var $t=0;$t<bt;$t++)vt[$t]=ft[ot[$t]],wt[$t]=ht[ot[$t]]},kt.prototype.transform=function(ot,ft,ht,vt,wt,bt){this.permute(bt,ot,ft,ht,vt,wt);for(var $t=1;$t<wt;$t<<=1)for(var Et=$t<<1,ct=Math.cos(2*Math.PI/Et),St=Math.sin(2*Math.PI/Et),Mt=0;Mt<wt;Mt+=Et)for(var Lt=ct,Ut=St,Kt=0;Kt<$t;Kt++){var Ht=ht[Mt+Kt],Ft=vt[Mt+Kt],zt=ht[Mt+Kt+$t],ir=vt[Mt+Kt+$t],sr=Lt*zt-Ut*ir;ir=Lt*ir+Ut*zt,zt=sr,ht[Mt+Kt]=Ht+zt,vt[Mt+Kt]=Ft+ir,ht[Mt+Kt+$t]=Ht-zt,vt[Mt+Kt+$t]=Ft-ir,Kt!==Et&&(sr=ct*Lt-St*Ut,Ut=ct*Ut+St*Lt,Lt=sr)}},kt.prototype.guessLen13b=function(ot,ft){var ht=Math.max(ft,ot)|1,vt=ht&1,wt=0;for(ht=ht/2|0;ht;ht=ht>>>1)wt++;return 1<<wt+1+vt},kt.prototype.conjugate=function(ot,ft,ht){if(!(ht<=1))for(var vt=0;vt<ht/2;vt++){var wt=ot[vt];ot[vt]=ot[ht-vt-1],ot[ht-vt-1]=wt,wt=ft[vt],ft[vt]=-ft[ht-vt-1],ft[ht-vt-1]=-wt}},kt.prototype.normalize13b=function(ot,ft){for(var ht=0,vt=0;vt<ft/2;vt++){var wt=Math.round(ot[2*vt+1]/ft)*8192+Math.round(ot[2*vt]/ft)+ht;ot[vt]=wt&67108863,wt<67108864?ht=0:ht=wt/67108864|0}return ot},kt.prototype.convert13b=function(ot,ft,ht,vt){for(var wt=0,bt=0;bt<ft;bt++)wt=wt+(ot[bt]|0),ht[2*bt]=wt&8191,wt=wt>>>13,ht[2*bt+1]=wt&8191,wt=wt>>>13;for(bt=2*ft;bt<vt;++bt)ht[bt]=0;nt(wt===0),nt((wt&-8192)===0)},kt.prototype.stub=function(ot){for(var ft=new Array(ot),ht=0;ht<ot;ht++)ft[ht]=0;return ft},kt.prototype.mulp=function(ot,ft,ht){var vt=2*this.guessLen13b(ot.length,ft.length),wt=this.makeRBT(vt),bt=this.stub(vt),$t=new Array(vt),Et=new Array(vt),ct=new Array(vt),St=new Array(vt),Mt=new Array(vt),Lt=new Array(vt),Ut=ht.words;Ut.length=vt,this.convert13b(ot.words,ot.length,$t,vt),this.convert13b(ft.words,ft.length,St,vt),this.transform($t,bt,Et,ct,vt,wt),this.transform(St,bt,Mt,Lt,vt,wt);for(var Kt=0;Kt<vt;Kt++){var Ht=Et[Kt]*Mt[Kt]-ct[Kt]*Lt[Kt];ct[Kt]=Et[Kt]*Lt[Kt]+ct[Kt]*Mt[Kt],Et[Kt]=Ht}return this.conjugate(Et,ct,vt),this.transform(Et,ct,Ut,bt,vt,wt),this.conjugate(Ut,bt,vt),this.normalize13b(Ut,vt),ht.negative=ot.negative^ft.negative,ht.length=ot.length+ft.length,ht.strip()},it.prototype.mul=function(ot){var ft=new it(null);return ft.words=new Array(this.length+ot.length),this.mulTo(ot,ft)},it.prototype.mulf=function(ot){var ft=new it(null);return ft.words=new Array(this.length+ot.length),Ot(this,ot,ft)},it.prototype.imul=function(ot){return this.clone().mulTo(ot,this)},it.prototype.imuln=function(ot){nt(typeof ot=="number"),nt(ot<67108864);for(var ft=0,ht=0;ht<this.length;ht++){var vt=(this.words[ht]|0)*ot,wt=(vt&67108863)+(ft&67108863);ft>>=26,ft+=vt/67108864|0,ft+=wt>>>26,this.words[ht]=wt&67108863}return ft!==0&&(this.words[ht]=ft,this.length++),this},it.prototype.muln=function(ot){return this.clone().imuln(ot)},it.prototype.sqr=function(){return this.mul(this)},it.prototype.isqr=function(){return this.imul(this.clone())},it.prototype.pow=function(ot){var ft=At(ot);if(ft.length===0)return new it(1);for(var ht=this,vt=0;vt<ft.length&&ft[vt]===0;vt++,ht=ht.sqr());if(++vt<ft.length)for(var wt=ht.sqr();vt<ft.length;vt++,wt=wt.sqr())ft[vt]!==0&&(ht=ht.mul(wt));return ht},it.prototype.iushln=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26,vt=67108863>>>26-ft<<26-ft,wt;if(ft!==0){var bt=0;for(wt=0;wt<this.length;wt++){var $t=this.words[wt]&vt,Et=(this.words[wt]|0)-$t<<ft;this.words[wt]=Et|bt,bt=$t>>>26-ft}bt&&(this.words[wt]=bt,this.length++)}if(ht!==0){for(wt=this.length-1;wt>=0;wt--)this.words[wt+ht]=this.words[wt];for(wt=0;wt<ht;wt++)this.words[wt]=0;this.length+=ht}return this.strip()},it.prototype.ishln=function(ot){return nt(this.negative===0),this.iushln(ot)},it.prototype.iushrn=function(ot,ft,ht){nt(typeof ot=="number"&&ot>=0);var vt;ft?vt=(ft-ft%26)/26:vt=0;var wt=ot%26,bt=Math.min((ot-wt)/26,this.length),$t=67108863^67108863>>>wt<<wt,Et=ht;if(vt-=bt,vt=Math.max(0,vt),Et){for(var ct=0;ct<bt;ct++)Et.words[ct]=this.words[ct];Et.length=bt}if(bt!==0)if(this.length>bt)for(this.length-=bt,ct=0;ct<this.length;ct++)this.words[ct]=this.words[ct+bt];else this.words[0]=0,this.length=1;var St=0;for(ct=this.length-1;ct>=0&&(St!==0||ct>=vt);ct--){var Mt=this.words[ct]|0;this.words[ct]=St<<26-wt|Mt>>>wt,St=Mt&$t}return Et&&St!==0&&(Et.words[Et.length++]=St),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},it.prototype.ishrn=function(ot,ft,ht){return nt(this.negative===0),this.iushrn(ot,ft,ht)},it.prototype.shln=function(ot){return this.clone().ishln(ot)},it.prototype.ushln=function(ot){return this.clone().iushln(ot)},it.prototype.shrn=function(ot){return this.clone().ishrn(ot)},it.prototype.ushrn=function(ot){return this.clone().iushrn(ot)},it.prototype.testn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26,vt=1<<ft;if(this.length<=ht)return!1;var wt=this.words[ht];return!!(wt&vt)},it.prototype.imaskn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26;if(nt(this.negative===0,"imaskn works only with positive numbers"),this.length<=ht)return this;if(ft!==0&&ht++,this.length=Math.min(ht,this.length),ft!==0){var vt=67108863^67108863>>>ft<<ft;this.words[this.length-1]&=vt}return this.strip()},it.prototype.maskn=function(ot){return this.clone().imaskn(ot)},it.prototype.iaddn=function(ot){return nt(typeof ot=="number"),nt(ot<67108864),ot<0?this.isubn(-ot):this.negative!==0?this.length===1&&(this.words[0]|0)<ot?(this.words[0]=ot-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ot),this.negative=1,this):this._iaddn(ot)},it.prototype._iaddn=function(ot){this.words[0]+=ot;for(var ft=0;ft<this.length&&this.words[ft]>=67108864;ft++)this.words[ft]-=67108864,ft===this.length-1?this.words[ft+1]=1:this.words[ft+1]++;return this.length=Math.max(this.length,ft+1),this},it.prototype.isubn=function(ot){if(nt(typeof ot=="number"),nt(ot<67108864),ot<0)return this.iaddn(-ot);if(this.negative!==0)return this.negative=0,this.iaddn(ot),this.negative=1,this;if(this.words[0]-=ot,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var ft=0;ft<this.length&&this.words[ft]<0;ft++)this.words[ft]+=67108864,this.words[ft+1]-=1;return this.strip()},it.prototype.addn=function(ot){return this.clone().iaddn(ot)},it.prototype.subn=function(ot){return this.clone().isubn(ot)},it.prototype.iabs=function(){return this.negative=0,this},it.prototype.abs=function(){return this.clone().iabs()},it.prototype._ishlnsubmul=function(ot,ft,ht){var vt=ot.length+ht,wt;this._expand(vt);var bt,$t=0;for(wt=0;wt<ot.length;wt++){bt=(this.words[wt+ht]|0)+$t;var Et=(ot.words[wt]|0)*ft;bt-=Et&67108863,$t=(bt>>26)-(Et/67108864|0),this.words[wt+ht]=bt&67108863}for(;wt<this.length-ht;wt++)bt=(this.words[wt+ht]|0)+$t,$t=bt>>26,this.words[wt+ht]=bt&67108863;if($t===0)return this.strip();for(nt($t===-1),$t=0,wt=0;wt<this.length;wt++)bt=-(this.words[wt]|0)+$t,$t=bt>>26,this.words[wt]=bt&67108863;return this.negative=1,this.strip()},it.prototype._wordDiv=function(ot,ft){var ht=this.length-ot.length,vt=this.clone(),wt=ot,bt=wt.words[wt.length-1]|0,$t=this._countBits(bt);ht=26-$t,ht!==0&&(wt=wt.ushln(ht),vt.iushln(ht),bt=wt.words[wt.length-1]|0);var Et=vt.length-wt.length,ct;if(ft!=="mod"){ct=new it(null),ct.length=Et+1,ct.words=new Array(ct.length);for(var St=0;St<ct.length;St++)ct.words[St]=0}var Mt=vt.clone()._ishlnsubmul(wt,1,Et);Mt.negative===0&&(vt=Mt,ct&&(ct.words[Et]=1));for(var Lt=Et-1;Lt>=0;Lt--){var Ut=(vt.words[wt.length+Lt]|0)*67108864+(vt.words[wt.length+Lt-1]|0);for(Ut=Math.min(Ut/bt|0,67108863),vt._ishlnsubmul(wt,Ut,Lt);vt.negative!==0;)Ut--,vt.negative=0,vt._ishlnsubmul(wt,1,Lt),vt.isZero()||(vt.negative^=1);ct&&(ct.words[Lt]=Ut)}return ct&&ct.strip(),vt.strip(),ft!=="div"&&ht!==0&&vt.iushrn(ht),{div:ct||null,mod:vt}},it.prototype.divmod=function(ot,ft,ht){if(nt(!ot.isZero()),this.isZero())return{div:new it(0),mod:new it(0)};var vt,wt,bt;return this.negative!==0&&ot.negative===0?(bt=this.neg().divmod(ot,ft),ft!=="mod"&&(vt=bt.div.neg()),ft!=="div"&&(wt=bt.mod.neg(),ht&&wt.negative!==0&&wt.iadd(ot)),{div:vt,mod:wt}):this.negative===0&&ot.negative!==0?(bt=this.divmod(ot.neg(),ft),ft!=="mod"&&(vt=bt.div.neg()),{div:vt,mod:bt.mod}):this.negative&ot.negative?(bt=this.neg().divmod(ot.neg(),ft),ft!=="div"&&(wt=bt.mod.neg(),ht&&wt.negative!==0&&wt.isub(ot)),{div:bt.div,mod:wt}):ot.length>this.length||this.cmp(ot)<0?{div:new it(0),mod:this}:ot.length===1?ft==="div"?{div:this.divn(ot.words[0]),mod:null}:ft==="mod"?{div:null,mod:new it(this.modn(ot.words[0]))}:{div:this.divn(ot.words[0]),mod:new it(this.modn(ot.words[0]))}:this._wordDiv(ot,ft)},it.prototype.div=function(ot){return this.divmod(ot,"div",!1).div},it.prototype.mod=function(ot){return this.divmod(ot,"mod",!1).mod},it.prototype.umod=function(ot){return this.divmod(ot,"mod",!0).mod},it.prototype.divRound=function(ot){var ft=this.divmod(ot);if(ft.mod.isZero())return ft.div;var ht=ft.div.negative!==0?ft.mod.isub(ot):ft.mod,vt=ot.ushrn(1),wt=ot.andln(1),bt=ht.cmp(vt);return bt<0||wt===1&&bt===0?ft.div:ft.div.negative!==0?ft.div.isubn(1):ft.div.iaddn(1)},it.prototype.modn=function(ot){nt(ot<=67108863);for(var ft=(1<<26)%ot,ht=0,vt=this.length-1;vt>=0;vt--)ht=(ft*ht+(this.words[vt]|0))%ot;return ht},it.prototype.idivn=function(ot){nt(ot<=67108863);for(var ft=0,ht=this.length-1;ht>=0;ht--){var vt=(this.words[ht]|0)+ft*67108864;this.words[ht]=vt/ot|0,ft=vt%ot}return this.strip()},it.prototype.divn=function(ot){return this.clone().idivn(ot)},it.prototype.egcd=function(ot){nt(ot.negative===0),nt(!ot.isZero());var ft=this,ht=ot.clone();ft.negative!==0?ft=ft.umod(ot):ft=ft.clone();for(var vt=new it(1),wt=new it(0),bt=new it(0),$t=new it(1),Et=0;ft.isEven()&&ht.isEven();)ft.iushrn(1),ht.iushrn(1),++Et;for(var ct=ht.clone(),St=ft.clone();!ft.isZero();){for(var Mt=0,Lt=1;!(ft.words[0]&Lt)&&Mt<26;++Mt,Lt<<=1);if(Mt>0)for(ft.iushrn(Mt);Mt-- >0;)(vt.isOdd()||wt.isOdd())&&(vt.iadd(ct),wt.isub(St)),vt.iushrn(1),wt.iushrn(1);for(var Ut=0,Kt=1;!(ht.words[0]&Kt)&&Ut<26;++Ut,Kt<<=1);if(Ut>0)for(ht.iushrn(Ut);Ut-- >0;)(bt.isOdd()||$t.isOdd())&&(bt.iadd(ct),$t.isub(St)),bt.iushrn(1),$t.iushrn(1);ft.cmp(ht)>=0?(ft.isub(ht),vt.isub(bt),wt.isub($t)):(ht.isub(ft),bt.isub(vt),$t.isub(wt))}return{a:bt,b:$t,gcd:ht.iushln(Et)}},it.prototype._invmp=function(ot){nt(ot.negative===0),nt(!ot.isZero());var ft=this,ht=ot.clone();ft.negative!==0?ft=ft.umod(ot):ft=ft.clone();for(var vt=new it(1),wt=new it(0),bt=ht.clone();ft.cmpn(1)>0&&ht.cmpn(1)>0;){for(var $t=0,Et=1;!(ft.words[0]&Et)&&$t<26;++$t,Et<<=1);if($t>0)for(ft.iushrn($t);$t-- >0;)vt.isOdd()&&vt.iadd(bt),vt.iushrn(1);for(var ct=0,St=1;!(ht.words[0]&St)&&ct<26;++ct,St<<=1);if(ct>0)for(ht.iushrn(ct);ct-- >0;)wt.isOdd()&&wt.iadd(bt),wt.iushrn(1);ft.cmp(ht)>=0?(ft.isub(ht),vt.isub(wt)):(ht.isub(ft),wt.isub(vt))}var Mt;return ft.cmpn(1)===0?Mt=vt:Mt=wt,Mt.cmpn(0)<0&&Mt.iadd(ot),Mt},it.prototype.gcd=function(ot){if(this.isZero())return ot.abs();if(ot.isZero())return this.abs();var ft=this.clone(),ht=ot.clone();ft.negative=0,ht.negative=0;for(var vt=0;ft.isEven()&&ht.isEven();vt++)ft.iushrn(1),ht.iushrn(1);do{for(;ft.isEven();)ft.iushrn(1);for(;ht.isEven();)ht.iushrn(1);var wt=ft.cmp(ht);if(wt<0){var bt=ft;ft=ht,ht=bt}else if(wt===0||ht.cmpn(1)===0)break;ft.isub(ht)}while(!0);return ht.iushln(vt)},it.prototype.invm=function(ot){return this.egcd(ot).a.umod(ot)},it.prototype.isEven=function(){return(this.words[0]&1)===0},it.prototype.isOdd=function(){return(this.words[0]&1)===1},it.prototype.andln=function(ot){return this.words[0]&ot},it.prototype.bincn=function(ot){nt(typeof ot=="number");var ft=ot%26,ht=(ot-ft)/26,vt=1<<ft;if(this.length<=ht)return this._expand(ht+1),this.words[ht]|=vt,this;for(var wt=vt,bt=ht;wt!==0&&bt<this.length;bt++){var $t=this.words[bt]|0;$t+=wt,wt=$t>>>26,$t&=67108863,this.words[bt]=$t}return wt!==0&&(this.words[bt]=wt,this.length++),this},it.prototype.isZero=function(){return this.length===1&&this.words[0]===0},it.prototype.cmpn=function(ot){var ft=ot<0;if(this.negative!==0&&!ft)return-1;if(this.negative===0&&ft)return 1;this.strip();var ht;if(this.length>1)ht=1;else{ft&&(ot=-ot),nt(ot<=67108863,"Number is too big");var vt=this.words[0]|0;ht=vt===ot?0:vt<ot?-1:1}return this.negative!==0?-ht|0:ht},it.prototype.cmp=function(ot){if(this.negative!==0&&ot.negative===0)return-1;if(this.negative===0&&ot.negative!==0)return 1;var ft=this.ucmp(ot);return this.negative!==0?-ft|0:ft},it.prototype.ucmp=function(ot){if(this.length>ot.length)return 1;if(this.length<ot.length)return-1;for(var ft=0,ht=this.length-1;ht>=0;ht--){var vt=this.words[ht]|0,wt=ot.words[ht]|0;if(vt!==wt){vt<wt?ft=-1:vt>wt&&(ft=1);break}}return ft},it.prototype.gtn=function(ot){return this.cmpn(ot)===1},it.prototype.gt=function(ot){return this.cmp(ot)===1},it.prototype.gten=function(ot){return this.cmpn(ot)>=0},it.prototype.gte=function(ot){return this.cmp(ot)>=0},it.prototype.ltn=function(ot){return this.cmpn(ot)===-1},it.prototype.lt=function(ot){return this.cmp(ot)===-1},it.prototype.lten=function(ot){return this.cmpn(ot)<=0},it.prototype.lte=function(ot){return this.cmp(ot)<=0},it.prototype.eqn=function(ot){return this.cmpn(ot)===0},it.prototype.eq=function(ot){return this.cmp(ot)===0},it.red=function(ot){return new er(ot)},it.prototype.toRed=function(ot){return nt(!this.red,"Already a number in reduction context"),nt(this.negative===0,"red works only with positives"),ot.convertTo(this)._forceRed(ot)},it.prototype.fromRed=function(){return nt(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},it.prototype._forceRed=function(ot){return this.red=ot,this},it.prototype.forceRed=function(ot){return nt(!this.red,"Already a number in reduction context"),this._forceRed(ot)},it.prototype.redAdd=function(ot){return nt(this.red,"redAdd works only with red numbers"),this.red.add(this,ot)},it.prototype.redIAdd=function(ot){return nt(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ot)},it.prototype.redSub=function(ot){return nt(this.red,"redSub works only with red numbers"),this.red.sub(this,ot)},it.prototype.redISub=function(ot){return nt(this.red,"redISub works only with red numbers"),this.red.isub(this,ot)},it.prototype.redShl=function(ot){return nt(this.red,"redShl works only with red numbers"),this.red.shl(this,ot)},it.prototype.redMul=function(ot){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ot),this.red.mul(this,ot)},it.prototype.redIMul=function(ot){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ot),this.red.imul(this,ot)},it.prototype.redSqr=function(){return nt(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},it.prototype.redISqr=function(){return nt(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},it.prototype.redSqrt=function(){return nt(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},it.prototype.redInvm=function(){return nt(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},it.prototype.redNeg=function(){return nt(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},it.prototype.redPow=function(ot){return nt(this.red&&!ot.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ot)};var Pt={k256:null,p224:null,p192:null,p25519:null};function Dt(It,ot){this.name=It,this.p=new it(ot,16),this.n=this.p.bitLength(),this.k=new it(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Dt.prototype._tmp=function(){var ot=new it(null);return ot.words=new Array(Math.ceil(this.n/13)),ot},Dt.prototype.ireduce=function(ot){var ft=ot,ht;do this.split(ft,this.tmp),ft=this.imulK(ft),ft=ft.iadd(this.tmp),ht=ft.bitLength();while(ht>this.n);var vt=ht<this.n?-1:ft.ucmp(this.p);return vt===0?(ft.words[0]=0,ft.length=1):vt>0?ft.isub(this.p):ft.strip!==void 0?ft.strip():ft._strip(),ft},Dt.prototype.split=function(ot,ft){ot.iushrn(this.n,0,ft)},Dt.prototype.imulK=function(ot){return ot.imul(this.k)};function Gt(){Dt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}at(Gt,Dt),Gt.prototype.split=function(ot,ft){for(var ht=4194303,vt=Math.min(ot.length,9),wt=0;wt<vt;wt++)ft.words[wt]=ot.words[wt];if(ft.length=vt,ot.length<=9){ot.words[0]=0,ot.length=1;return}var bt=ot.words[9];for(ft.words[ft.length++]=bt&ht,wt=10;wt<ot.length;wt++){var $t=ot.words[wt]|0;ot.words[wt-10]=($t&ht)<<4|bt>>>22,bt=$t}bt>>>=22,ot.words[wt-10]=bt,bt===0&&ot.length>10?ot.length-=10:ot.length-=9},Gt.prototype.imulK=function(ot){ot.words[ot.length]=0,ot.words[ot.length+1]=0,ot.length+=2;for(var ft=0,ht=0;ht<ot.length;ht++){var vt=ot.words[ht]|0;ft+=vt*977,ot.words[ht]=ft&67108863,ft=vt*64+(ft/67108864|0)}return ot.words[ot.length-1]===0&&(ot.length--,ot.words[ot.length-1]===0&&ot.length--),ot};function jt(){Dt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}at(jt,Dt);function Yt(){Dt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}at(Yt,Dt);function tr(){Dt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}at(tr,Dt),tr.prototype.imulK=function(ot){for(var ft=0,ht=0;ht<ot.length;ht++){var vt=(ot.words[ht]|0)*19+ft,wt=vt&67108863;vt>>>=26,ot.words[ht]=wt,ft=vt}return ft!==0&&(ot.words[ot.length++]=ft),ot},it._prime=function(ot){if(Pt[ot])return Pt[ot];var ft;if(ot==="k256")ft=new Gt;else if(ot==="p224")ft=new jt;else if(ot==="p192")ft=new Yt;else if(ot==="p25519")ft=new tr;else throw new Error("Unknown prime "+ot);return Pt[ot]=ft,ft};function er(It){if(typeof It=="string"){var ot=it._prime(It);this.m=ot.p,this.prime=ot}else nt(It.gtn(1),"modulus must be greater than 1"),this.m=It,this.prime=null}er.prototype._verify1=function(ot){nt(ot.negative===0,"red works only with positives"),nt(ot.red,"red works only with red numbers")},er.prototype._verify2=function(ot,ft){nt((ot.negative|ft.negative)===0,"red works only with positives"),nt(ot.red&&ot.red===ft.red,"red works only with red numbers")},er.prototype.imod=function(ot){return this.prime?this.prime.ireduce(ot)._forceRed(this):ot.umod(this.m)._forceRed(this)},er.prototype.neg=function(ot){return ot.isZero()?ot.clone():this.m.sub(ot)._forceRed(this)},er.prototype.add=function(ot,ft){this._verify2(ot,ft);var ht=ot.add(ft);return ht.cmp(this.m)>=0&&ht.isub(this.m),ht._forceRed(this)},er.prototype.iadd=function(ot,ft){this._verify2(ot,ft);var ht=ot.iadd(ft);return ht.cmp(this.m)>=0&&ht.isub(this.m),ht},er.prototype.sub=function(ot,ft){this._verify2(ot,ft);var ht=ot.sub(ft);return ht.cmpn(0)<0&&ht.iadd(this.m),ht._forceRed(this)},er.prototype.isub=function(ot,ft){this._verify2(ot,ft);var ht=ot.isub(ft);return ht.cmpn(0)<0&&ht.iadd(this.m),ht},er.prototype.shl=function(ot,ft){return this._verify1(ot),this.imod(ot.ushln(ft))},er.prototype.imul=function(ot,ft){return this._verify2(ot,ft),this.imod(ot.imul(ft))},er.prototype.mul=function(ot,ft){return this._verify2(ot,ft),this.imod(ot.mul(ft))},er.prototype.isqr=function(ot){return this.imul(ot,ot.clone())},er.prototype.sqr=function(ot){return this.mul(ot,ot)},er.prototype.sqrt=function(ot){if(ot.isZero())return ot.clone();var ft=this.m.andln(3);if(nt(ft%2===1),ft===3){var ht=this.m.add(new it(1)).iushrn(2);return this.pow(ot,ht)}for(var vt=this.m.subn(1),wt=0;!vt.isZero()&&vt.andln(1)===0;)wt++,vt.iushrn(1);nt(!vt.isZero());var bt=new it(1).toRed(this),$t=bt.redNeg(),Et=this.m.subn(1).iushrn(1),ct=this.m.bitLength();for(ct=new it(2*ct*ct).toRed(this);this.pow(ct,Et).cmp($t)!==0;)ct.redIAdd($t);for(var St=this.pow(ct,vt),Mt=this.pow(ot,vt.addn(1).iushrn(1)),Lt=this.pow(ot,vt),Ut=wt;Lt.cmp(bt)!==0;){for(var Kt=Lt,Ht=0;Kt.cmp(bt)!==0;Ht++)Kt=Kt.redSqr();nt(Ht<Ut);var Ft=this.pow(St,new it(1).iushln(Ut-Ht-1));Mt=Mt.redMul(Ft),St=Ft.redSqr(),Lt=Lt.redMul(St),Ut=Ht}return Mt},er.prototype.invm=function(ot){var ft=ot._invmp(this.m);return ft.negative!==0?(ft.negative=0,this.imod(ft).redNeg()):this.imod(ft)},er.prototype.pow=function(ot,ft){if(ft.isZero())return new it(1).toRed(this);if(ft.cmpn(1)===0)return ot.clone();var ht=4,vt=new Array(1<<ht);vt[0]=new it(1).toRed(this),vt[1]=ot;for(var wt=2;wt<vt.length;wt++)vt[wt]=this.mul(vt[wt-1],ot);var bt=vt[0],$t=0,Et=0,ct=ft.bitLength()%26;for(ct===0&&(ct=26),wt=ft.length-1;wt>=0;wt--){for(var St=ft.words[wt],Mt=ct-1;Mt>=0;Mt--){var Lt=St>>Mt&1;if(bt!==vt[0]&&(bt=this.sqr(bt)),Lt===0&&$t===0){Et=0;continue}$t<<=1,$t|=Lt,Et++,!(Et!==ht&&(wt!==0||Mt!==0))&&(bt=this.mul(bt,vt[$t]),Et=0,$t=0)}ct=26}return bt},er.prototype.convertTo=function(ot){var ft=ot.umod(this.m);return ft===ot?ft.clone():ft},er.prototype.convertFrom=function(ot){var ft=ot.clone();return ft.red=null,ft},it.mont=function(ot){return new lr(ot)};function lr(It){er.call(this,It),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new it(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}at(lr,er),lr.prototype.convertTo=function(ot){return this.imod(ot.ushln(this.shift))},lr.prototype.convertFrom=function(ot){var ft=this.imod(ot.mul(this.rinv));return ft.red=null,ft},lr.prototype.imul=function(ot,ft){if(ot.isZero()||ft.isZero())return ot.words[0]=0,ot.length=1,ot;var ht=ot.imul(ft),vt=ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),wt=ht.isub(vt).iushrn(this.shift),bt=wt;return wt.cmp(this.m)>=0?bt=wt.isub(this.m):wt.cmpn(0)<0&&(bt=wt.iadd(this.m)),bt._forceRed(this)},lr.prototype.mul=function(ot,ft){if(ot.isZero()||ft.isZero())return new it(0)._forceRed(this);var ht=ot.mul(ft),vt=ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),wt=ht.isub(vt).iushrn(this.shift),bt=wt;return wt.cmp(this.m)>=0?bt=wt.isub(this.m):wt.cmpn(0)<0&&(bt=wt.iadd(this.m)),bt._forceRed(this)},lr.prototype.invm=function(ot){var ft=this.imod(ot._invmp(this.m).mul(this.r2));return ft._forceRed(this)}})(tt,commonjsGlobal$1)}(bn$4)),bn$4.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var tt;brorand.exports=function(at){return tt||(tt=new et(null)),tt.generate(at)};function et(nt){this.rand=nt}if(brorand.exports.Rand=et,et.prototype.generate=function(at){return this._rand(at)},et.prototype._rand=function(at){if(this.rand.getBytes)return this.rand.getBytes(at);for(var it=new Uint8Array(at),st=0;st<it.length;st++)it[st]=this.rand.getByte();return it},typeof self=="object")self.crypto&&self.crypto.getRandomValues?et.prototype._rand=function(at){var it=new Uint8Array(at);return self.crypto.getRandomValues(it),it}:self.msCrypto&&self.msCrypto.getRandomValues?et.prototype._rand=function(at){var it=new Uint8Array(at);return self.msCrypto.getRandomValues(it),it}:typeof window=="object"&&(et.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var rt=requireCryptoBrowserify();if(typeof rt.randomBytes!="function")throw new Error("Not supported");et.prototype._rand=function(at){return rt.randomBytes(at)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var tt=requireBn$4(),et=requireBrorand();function rt(nt){this.rand=nt||new et.Rand}return mr=rt,rt.create=function(at){return new rt(at)},rt.prototype._randbelow=function(at){var it=at.bitLength(),st=Math.ceil(it/8);do var dt=new tt(this.rand.generate(st));while(dt.cmp(at)>=0);return dt},rt.prototype._randrange=function(at,it){var st=it.sub(at);return at.add(this._randbelow(st))},rt.prototype.test=function(at,it,st){var dt=at.bitLength(),pt=tt.mont(at),mt=new tt(1).toRed(pt);it||(it=Math.max(1,dt/48|0));for(var yt=at.subn(1),Rt=0;!yt.testn(Rt);Rt++);for(var Tt=at.shrn(Rt),At=yt.toRed(pt),xt=!0;it>0;it--){var Nt=this._randrange(new tt(2),yt);st&&st(Nt);var Ct=Nt.toRed(pt).redPow(Tt);if(!(Ct.cmp(mt)===0||Ct.cmp(At)===0)){for(var Ot=1;Ot<Rt;Ot++){if(Ct=Ct.redSqr(),Ct.cmp(mt)===0)return!1;if(Ct.cmp(At)===0)break}if(Ot===Rt)return!1}}return xt},rt.prototype.getDivisor=function(at,it){var st=at.bitLength(),dt=tt.mont(at),pt=new tt(1).toRed(dt);it||(it=Math.max(1,st/48|0));for(var mt=at.subn(1),yt=0;!mt.testn(yt);yt++);for(var Rt=at.shrn(yt),Tt=mt.toRed(dt);it>0;it--){var At=this._randrange(new tt(2),mt),xt=at.gcd(At);if(xt.cmpn(1)!==0)return xt;var Nt=At.toRed(dt).redPow(Rt);if(!(Nt.cmp(pt)===0||Nt.cmp(Tt)===0)){for(var Ct=1;Ct<yt;Ct++){if(Nt=Nt.redSqr(),Nt.cmp(pt)===0)return Nt.fromRed().subn(1).gcd(at);if(Nt.cmp(Tt)===0)break}if(Ct===yt)return Nt=Nt.redSqr(),Nt.fromRed().subn(1).gcd(at)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var tt=requireBrowser$b();generatePrime=Ct,Ct.simpleSieve=xt,Ct.fermatTest=Nt;var et=requireBn$5(),rt=new et(24),nt=requireMr(),at=new nt,it=new et(1),st=new et(2),dt=new et(5);new et(16),new et(8);var pt=new et(10),mt=new et(3);new et(7);var yt=new et(11),Rt=new et(4);new et(12);var Tt=null;function At(){if(Tt!==null)return Tt;var Ot=1048576,kt=[];kt[0]=2;for(var Pt=1,Dt=3;Dt<Ot;Dt+=2){for(var Gt=Math.ceil(Math.sqrt(Dt)),jt=0;jt<Pt&&kt[jt]<=Gt&&Dt%kt[jt]!==0;jt++);Pt!==jt&&kt[jt]<=Gt||(kt[Pt++]=Dt)}return Tt=kt,kt}function xt(Ot){for(var kt=At(),Pt=0;Pt<kt.length;Pt++)if(Ot.modn(kt[Pt])===0)return Ot.cmpn(kt[Pt])===0;return!0}function Nt(Ot){var kt=et.mont(Ot);return st.toRed(kt).redPow(Ot.subn(1)).fromRed().cmpn(1)===0}function Ct(Ot,kt){if(Ot<16)return kt===2||kt===5?new et([140,123]):new et([140,39]);kt=new et(kt);for(var Pt,Dt;;){for(Pt=new et(tt(Math.ceil(Ot/8)));Pt.bitLength()>Ot;)Pt.ishrn(1);if(Pt.isEven()&&Pt.iadd(it),Pt.testn(1)||Pt.iadd(st),kt.cmp(st)){if(!kt.cmp(dt))for(;Pt.mod(pt).cmp(mt);)Pt.iadd(Rt)}else for(;Pt.mod(rt).cmp(yt);)Pt.iadd(Rt);if(Dt=Pt.shrn(1),xt(Dt)&&xt(Pt)&&Nt(Dt)&&Nt(Pt)&&at.test(Dt)&&at.test(Pt))return Pt}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var tt=requireBn$5(),et=requireMr(),rt=new et,nt=new tt(24),at=new tt(11),it=new tt(10),st=new tt(3),dt=new tt(7),pt=requireGeneratePrime(),mt=requireBrowser$b();dh=xt;function yt(Ct,Ot){return Ot=Ot||"utf8",Buffer.isBuffer(Ct)||(Ct=new Buffer(Ct,Ot)),this._pub=new tt(Ct),this}function Rt(Ct,Ot){return Ot=Ot||"utf8",Buffer.isBuffer(Ct)||(Ct=new Buffer(Ct,Ot)),this._priv=new tt(Ct),this}var Tt={};function At(Ct,Ot){var kt=Ot.toString("hex"),Pt=[kt,Ct.toString(16)].join("_");if(Pt in Tt)return Tt[Pt];var Dt=0;if(Ct.isEven()||!pt.simpleSieve||!pt.fermatTest(Ct)||!rt.test(Ct))return Dt+=1,kt==="02"||kt==="05"?Dt+=8:Dt+=4,Tt[Pt]=Dt,Dt;rt.test(Ct.shrn(1))||(Dt+=2);var Gt;switch(kt){case"02":Ct.mod(nt).cmp(at)&&(Dt+=8);break;case"05":Gt=Ct.mod(it),Gt.cmp(st)&&Gt.cmp(dt)&&(Dt+=8);break;default:Dt+=4}return Tt[Pt]=Dt,Dt}function xt(Ct,Ot,kt){this.setGenerator(Ot),this.__prime=new tt(Ct),this._prime=tt.mont(this.__prime),this._primeLen=Ct.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,kt?(this.setPublicKey=yt,this.setPrivateKey=Rt):this._primeCode=8}Object.defineProperty(xt.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=At(this.__prime,this.__gen)),this._primeCode}}),xt.prototype.generateKeys=function(){return this._priv||(this._priv=new tt(mt(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},xt.prototype.computeSecret=function(Ct){Ct=new tt(Ct),Ct=Ct.toRed(this._prime);var Ot=Ct.redPow(this._priv).fromRed(),kt=new Buffer(Ot.toArray()),Pt=this.getPrime();if(kt.length<Pt.length){var Dt=new Buffer(Pt.length-kt.length);Dt.fill(0),kt=Buffer.concat([Dt,kt])}return kt},xt.prototype.getPublicKey=function(Ot){return Nt(this._pub,Ot)},xt.prototype.getPrivateKey=function(Ot){return Nt(this._priv,Ot)},xt.prototype.getPrime=function(Ct){return Nt(this.__prime,Ct)},xt.prototype.getGenerator=function(Ct){return Nt(this._gen,Ct)},xt.prototype.setGenerator=function(Ct,Ot){return Ot=Ot||"utf8",Buffer.isBuffer(Ct)||(Ct=new Buffer(Ct,Ot)),this.__gen=Ct,this._gen=new tt(Ct),this};function Nt(Ct,Ot){var kt=new Buffer(Ct.toArray());return Ot?kt.toString(Ot):kt}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$4;hasRequiredBrowser$4=1;var tt=requireGeneratePrime(),et=require$$1$1,rt=requireDh();function nt(st){var dt=new Buffer(et[st].prime,"hex"),pt=new Buffer(et[st].gen,"hex");return new rt(dt,pt)}var at={binary:!0,hex:!0,base64:!0};function it(st,dt,pt,mt){return Buffer.isBuffer(dt)||at[dt]===void 0?it(st,"binary",dt,pt):(dt=dt||"binary",mt=mt||"binary",pt=pt||new Buffer([2]),Buffer.isBuffer(pt)||(pt=new Buffer(pt,mt)),typeof st=="number"?new rt(tt(st,pt),pt,!0):(Buffer.isBuffer(st)||(st=new Buffer(st,dt)),new rt(st,pt,!0)))}return browser$4.DiffieHellmanGroup=browser$4.createDiffieHellmanGroup=browser$4.getDiffieHellman=nt,browser$4.createDiffieHellman=browser$4.DiffieHellman=it,browser$4}var readableBrowser={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;hasRequiredProcessNextickArgs=1,typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:tt}:processNextickArgs.exports=process$1;function tt(et,rt,nt,at){if(typeof et!="function")throw new TypeError('"callback" argument must be a function');var it=arguments.length,st,dt;switch(it){case 0:case 1:return process$1.nextTick(et);case 2:return process$1.nextTick(function(){et.call(null,rt)});case 3:return process$1.nextTick(function(){et.call(null,rt,nt)});case 4:return process$1.nextTick(function(){et.call(null,rt,nt,at)});default:for(st=new Array(it-1),dt=0;dt<st.length;)st[dt++]=arguments[dt];return process$1.nextTick(function(){et.apply(null,st)})}}return processNextickArgs.exports}var isarray,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var tt={}.toString;return isarray=Array.isArray||function(et){return tt.call(et)=="[object Array]"},isarray}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(tt,et){var rt=require$$0$2,nt=rt.Buffer;function at(st,dt){for(var pt in st)dt[pt]=st[pt]}nt.from&&nt.alloc&&nt.allocUnsafe&&nt.allocUnsafeSlow?tt.exports=rt:(at(rt,et),et.Buffer=it);function it(st,dt,pt){return nt(st,dt,pt)}at(nt,it),it.from=function(st,dt,pt){if(typeof st=="number")throw new TypeError("Argument must not be a number");return nt(st,dt,pt)},it.alloc=function(st,dt,pt){if(typeof st!="number")throw new TypeError("Argument must be a number");var mt=nt(st);return dt!==void 0?typeof pt=="string"?mt.fill(dt,pt):mt.fill(dt):mt.fill(0),mt},it.allocUnsafe=function(st){if(typeof st!="number")throw new TypeError("Argument must be a number");return nt(st)},it.allocUnsafeSlow=function(st){if(typeof st!="number")throw new TypeError("Argument must be a number");return rt.SlowBuffer(st)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var util$1={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util$1;hasRequiredUtil$1=1;function tt(Nt){return Array.isArray?Array.isArray(Nt):xt(Nt)==="[object Array]"}util$1.isArray=tt;function et(Nt){return typeof Nt=="boolean"}util$1.isBoolean=et;function rt(Nt){return Nt===null}util$1.isNull=rt;function nt(Nt){return Nt==null}util$1.isNullOrUndefined=nt;function at(Nt){return typeof Nt=="number"}util$1.isNumber=at;function it(Nt){return typeof Nt=="string"}util$1.isString=it;function st(Nt){return typeof Nt=="symbol"}util$1.isSymbol=st;function dt(Nt){return Nt===void 0}util$1.isUndefined=dt;function pt(Nt){return xt(Nt)==="[object RegExp]"}util$1.isRegExp=pt;function mt(Nt){return typeof Nt=="object"&&Nt!==null}util$1.isObject=mt;function yt(Nt){return xt(Nt)==="[object Date]"}util$1.isDate=yt;function Rt(Nt){return xt(Nt)==="[object Error]"||Nt instanceof Error}util$1.isError=Rt;function Tt(Nt){return typeof Nt=="function"}util$1.isFunction=Tt;function At(Nt){return Nt===null||typeof Nt=="boolean"||typeof Nt=="number"||typeof Nt=="string"||typeof Nt=="symbol"||typeof Nt>"u"}util$1.isPrimitive=At,util$1.isBuffer=require$$0$2.Buffer.isBuffer;function xt(Nt){return Object.prototype.toString.call(Nt)}return util$1}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(tt){function et(it,st){if(!(it instanceof st))throw new TypeError("Cannot call a class as a function")}var rt=requireSafeBuffer().Buffer,nt=requireUtil$2();function at(it,st,dt){it.copy(st,dt)}tt.exports=function(){function it(){et(this,it),this.head=null,this.tail=null,this.length=0}return it.prototype.push=function(dt){var pt={data:dt,next:null};this.length>0?this.tail.next=pt:this.head=pt,this.tail=pt,++this.length},it.prototype.unshift=function(dt){var pt={data:dt,next:this.head};this.length===0&&(this.tail=pt),this.head=pt,++this.length},it.prototype.shift=function(){if(this.length!==0){var dt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,dt}},it.prototype.clear=function(){this.head=this.tail=null,this.length=0},it.prototype.join=function(dt){if(this.length===0)return"";for(var pt=this.head,mt=""+pt.data;pt=pt.next;)mt+=dt+pt.data;return mt},it.prototype.concat=function(dt){if(this.length===0)return rt.alloc(0);for(var pt=rt.allocUnsafe(dt>>>0),mt=this.head,yt=0;mt;)at(mt.data,pt,yt),yt+=mt.data.length,mt=mt.next;return pt},it}(),nt&&nt.inspect&&nt.inspect.custom&&(tt.exports.prototype[nt.inspect.custom]=function(){var it=nt.inspect({length:this.length});return this.constructor.name+" "+it})}(BufferList)),BufferList.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var tt=requireProcessNextickArgs();function et(at,it){var st=this,dt=this._readableState&&this._readableState.destroyed,pt=this._writableState&&this._writableState.destroyed;return dt||pt?(it?it(at):at&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,tt.nextTick(nt,this,at)):tt.nextTick(nt,this,at)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(at||null,function(mt){!it&&mt?st._writableState?st._writableState.errorEmitted||(st._writableState.errorEmitted=!0,tt.nextTick(nt,st,mt)):tt.nextTick(nt,st,mt):it&&it(mt)}),this)}function rt(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function nt(at,it){at.emit("error",it)}return destroy_1={destroy:et,undestroy:rt},destroy_1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var tt=requireProcessNextickArgs();_stream_writable=Nt;function et(bt){var $t=this;this.next=null,this.entry=null,this.finish=function(){wt($t,bt)}}var rt=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:tt.nextTick,nt;Nt.WritableState=At;var at=Object.create(requireUtil$1());at.inherits=requireInherits_browser();var it={deprecate:requireBrowser$a()},st=requireStreamBrowser(),dt=requireSafeBuffer().Buffer,pt=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function mt(bt){return dt.from(bt)}function yt(bt){return dt.isBuffer(bt)||bt instanceof pt}var Rt=requireDestroy();at.inherits(Nt,st);function Tt(){}function At(bt,$t){nt=nt||require_stream_duplex(),bt=bt||{};var Et=$t instanceof nt;this.objectMode=!!bt.objectMode,Et&&(this.objectMode=this.objectMode||!!bt.writableObjectMode);var ct=bt.highWaterMark,St=bt.writableHighWaterMark,Mt=this.objectMode?16:16*1024;ct||ct===0?this.highWaterMark=ct:Et&&(St||St===0)?this.highWaterMark=St:this.highWaterMark=Mt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Lt=bt.decodeStrings===!1;this.decodeStrings=!Lt,this.defaultEncoding=bt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ut){Yt($t,Ut)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new et(this)}At.prototype.getBuffer=function(){for(var $t=this.bufferedRequest,Et=[];$t;)Et.push($t),$t=$t.next;return Et},function(){try{Object.defineProperty(At.prototype,"buffer",{get:it.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var xt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(xt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Nt,Symbol.hasInstance,{value:function(bt){return xt.call(this,bt)?!0:this!==Nt?!1:bt&&bt._writableState instanceof At}})):xt=function(bt){return bt instanceof this};function Nt(bt){if(nt=nt||require_stream_duplex(),!xt.call(Nt,this)&&!(this instanceof nt))return new Nt(bt);this._writableState=new At(bt,this),this.writable=!0,bt&&(typeof bt.write=="function"&&(this._write=bt.write),typeof bt.writev=="function"&&(this._writev=bt.writev),typeof bt.destroy=="function"&&(this._destroy=bt.destroy),typeof bt.final=="function"&&(this._final=bt.final)),st.call(this)}Nt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Ct(bt,$t){var Et=new Error("write after end");bt.emit("error",Et),tt.nextTick($t,Et)}function Ot(bt,$t,Et,ct){var St=!0,Mt=!1;return Et===null?Mt=new TypeError("May not write null values to stream"):typeof Et!="string"&&Et!==void 0&&!$t.objectMode&&(Mt=new TypeError("Invalid non-string/buffer chunk")),Mt&&(bt.emit("error",Mt),tt.nextTick(ct,Mt),St=!1),St}Nt.prototype.write=function(bt,$t,Et){var ct=this._writableState,St=!1,Mt=!ct.objectMode&&yt(bt);return Mt&&!dt.isBuffer(bt)&&(bt=mt(bt)),typeof $t=="function"&&(Et=$t,$t=null),Mt?$t="buffer":$t||($t=ct.defaultEncoding),typeof Et!="function"&&(Et=Tt),ct.ended?Ct(this,Et):(Mt||Ot(this,ct,bt,Et))&&(ct.pendingcb++,St=Pt(this,ct,Mt,bt,$t,Et)),St},Nt.prototype.cork=function(){var bt=this._writableState;bt.corked++},Nt.prototype.uncork=function(){var bt=this._writableState;bt.corked&&(bt.corked--,!bt.writing&&!bt.corked&&!bt.bufferProcessing&&bt.bufferedRequest&&lr(this,bt))},Nt.prototype.setDefaultEncoding=function($t){if(typeof $t=="string"&&($t=$t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf(($t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+$t);return this._writableState.defaultEncoding=$t,this};function kt(bt,$t,Et){return!bt.objectMode&&bt.decodeStrings!==!1&&typeof $t=="string"&&($t=dt.from($t,Et)),$t}Object.defineProperty(Nt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Pt(bt,$t,Et,ct,St,Mt){if(!Et){var Lt=kt($t,ct,St);ct!==Lt&&(Et=!0,St="buffer",ct=Lt)}var Ut=$t.objectMode?1:ct.length;$t.length+=Ut;var Kt=$t.length<$t.highWaterMark;if(Kt||($t.needDrain=!0),$t.writing||$t.corked){var Ht=$t.lastBufferedRequest;$t.lastBufferedRequest={chunk:ct,encoding:St,isBuf:Et,callback:Mt,next:null},Ht?Ht.next=$t.lastBufferedRequest:$t.bufferedRequest=$t.lastBufferedRequest,$t.bufferedRequestCount+=1}else Dt(bt,$t,!1,Ut,ct,St,Mt);return Kt}function Dt(bt,$t,Et,ct,St,Mt,Lt){$t.writelen=ct,$t.writecb=Lt,$t.writing=!0,$t.sync=!0,Et?bt._writev(St,$t.onwrite):bt._write(St,Mt,$t.onwrite),$t.sync=!1}function Gt(bt,$t,Et,ct,St){--$t.pendingcb,Et?(tt.nextTick(St,ct),tt.nextTick(ht,bt,$t),bt._writableState.errorEmitted=!0,bt.emit("error",ct)):(St(ct),bt._writableState.errorEmitted=!0,bt.emit("error",ct),ht(bt,$t))}function jt(bt){bt.writing=!1,bt.writecb=null,bt.length-=bt.writelen,bt.writelen=0}function Yt(bt,$t){var Et=bt._writableState,ct=Et.sync,St=Et.writecb;if(jt(Et),$t)Gt(bt,Et,ct,$t,St);else{var Mt=It(Et);!Mt&&!Et.corked&&!Et.bufferProcessing&&Et.bufferedRequest&&lr(bt,Et),ct?rt(tr,bt,Et,Mt,St):tr(bt,Et,Mt,St)}}function tr(bt,$t,Et,ct){Et||er(bt,$t),$t.pendingcb--,ct(),ht(bt,$t)}function er(bt,$t){$t.length===0&&$t.needDrain&&($t.needDrain=!1,bt.emit("drain"))}function lr(bt,$t){$t.bufferProcessing=!0;var Et=$t.bufferedRequest;if(bt._writev&&Et&&Et.next){var ct=$t.bufferedRequestCount,St=new Array(ct),Mt=$t.corkedRequestsFree;Mt.entry=Et;for(var Lt=0,Ut=!0;Et;)St[Lt]=Et,Et.isBuf||(Ut=!1),Et=Et.next,Lt+=1;St.allBuffers=Ut,Dt(bt,$t,!0,$t.length,St,"",Mt.finish),$t.pendingcb++,$t.lastBufferedRequest=null,Mt.next?($t.corkedRequestsFree=Mt.next,Mt.next=null):$t.corkedRequestsFree=new et($t),$t.bufferedRequestCount=0}else{for(;Et;){var Kt=Et.chunk,Ht=Et.encoding,Ft=Et.callback,zt=$t.objectMode?1:Kt.length;if(Dt(bt,$t,!1,zt,Kt,Ht,Ft),Et=Et.next,$t.bufferedRequestCount--,$t.writing)break}Et===null&&($t.lastBufferedRequest=null)}$t.bufferedRequest=Et,$t.bufferProcessing=!1}Nt.prototype._write=function(bt,$t,Et){Et(new Error("_write() is not implemented"))},Nt.prototype._writev=null,Nt.prototype.end=function(bt,$t,Et){var ct=this._writableState;typeof bt=="function"?(Et=bt,bt=null,$t=null):typeof $t=="function"&&(Et=$t,$t=null),bt!=null&&this.write(bt,$t),ct.corked&&(ct.corked=1,this.uncork()),ct.ending||vt(this,ct,Et)};function It(bt){return bt.ending&&bt.length===0&&bt.bufferedRequest===null&&!bt.finished&&!bt.writing}function ot(bt,$t){bt._final(function(Et){$t.pendingcb--,Et&&bt.emit("error",Et),$t.prefinished=!0,bt.emit("prefinish"),ht(bt,$t)})}function ft(bt,$t){!$t.prefinished&&!$t.finalCalled&&(typeof bt._final=="function"?($t.pendingcb++,$t.finalCalled=!0,tt.nextTick(ot,bt,$t)):($t.prefinished=!0,bt.emit("prefinish")))}function ht(bt,$t){var Et=It($t);return Et&&(ft(bt,$t),$t.pendingcb===0&&($t.finished=!0,bt.emit("finish"))),Et}function vt(bt,$t,Et){$t.ending=!0,ht(bt,$t),Et&&($t.finished?tt.nextTick(Et):bt.once("finish",Et)),$t.ended=!0,bt.writable=!1}function wt(bt,$t,Et){var ct=bt.entry;for(bt.entry=null;ct;){var St=ct.callback;$t.pendingcb--,St(Et),ct=ct.next}$t.corkedRequestsFree.next=bt}return Object.defineProperty(Nt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(bt){this._writableState&&(this._writableState.destroyed=bt)}}),Nt.prototype.destroy=Rt.destroy,Nt.prototype._undestroy=Rt.undestroy,Nt.prototype._destroy=function(bt,$t){this.end(),$t(bt)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var tt=requireProcessNextickArgs(),et=Object.keys||function(Rt){var Tt=[];for(var At in Rt)Tt.push(At);return Tt};_stream_duplex=pt;var rt=Object.create(requireUtil$1());rt.inherits=requireInherits_browser();var nt=require_stream_readable(),at=require_stream_writable();rt.inherits(pt,nt);for(var it=et(at.prototype),st=0;st<it.length;st++){var dt=it[st];pt.prototype[dt]||(pt.prototype[dt]=at.prototype[dt])}function pt(Rt){if(!(this instanceof pt))return new pt(Rt);nt.call(this,Rt),at.call(this,Rt),Rt&&Rt.readable===!1&&(this.readable=!1),Rt&&Rt.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,Rt&&Rt.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",mt)}Object.defineProperty(pt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function mt(){this.allowHalfOpen||this._writableState.ended||tt.nextTick(yt,this)}function yt(Rt){Rt.end()}return Object.defineProperty(pt.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(Rt){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=Rt,this._writableState.destroyed=Rt)}}),pt.prototype._destroy=function(Rt,Tt){this.push(null),this.end(),tt.nextTick(Tt,Rt)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var tt=requireProcessNextickArgs();_stream_readable=kt;var et=requireIsarray(),rt;kt.ReadableState=Ot,requireEvents().EventEmitter;var nt=function(Ft,zt){return Ft.listeners(zt).length},at=requireStreamBrowser(),it=requireSafeBuffer().Buffer,st=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function dt(Ft){return it.from(Ft)}function pt(Ft){return it.isBuffer(Ft)||Ft instanceof st}var mt=Object.create(requireUtil$1());mt.inherits=requireInherits_browser();var yt=requireUtil$2(),Rt=void 0;yt&&yt.debuglog?Rt=yt.debuglog("stream"):Rt=function(){};var Tt=requireBufferList(),At=requireDestroy(),xt;mt.inherits(kt,at);var Nt=["error","close","destroy","pause","resume"];function Ct(Ft,zt,ir){if(typeof Ft.prependListener=="function")return Ft.prependListener(zt,ir);!Ft._events||!Ft._events[zt]?Ft.on(zt,ir):et(Ft._events[zt])?Ft._events[zt].unshift(ir):Ft._events[zt]=[ir,Ft._events[zt]]}function Ot(Ft,zt){rt=rt||require_stream_duplex(),Ft=Ft||{};var ir=zt instanceof rt;this.objectMode=!!Ft.objectMode,ir&&(this.objectMode=this.objectMode||!!Ft.readableObjectMode);var sr=Ft.highWaterMark,ar=Ft.readableHighWaterMark,Vt=this.objectMode?16:16*1024;sr||sr===0?this.highWaterMark=sr:ir&&(ar||ar===0)?this.highWaterMark=ar:this.highWaterMark=Vt,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Tt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Ft.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ft.encoding&&(xt||(xt=requireString_decoder().StringDecoder),this.decoder=new xt(Ft.encoding),this.encoding=Ft.encoding)}function kt(Ft){if(rt=rt||require_stream_duplex(),!(this instanceof kt))return new kt(Ft);this._readableState=new Ot(Ft,this),this.readable=!0,Ft&&(typeof Ft.read=="function"&&(this._read=Ft.read),typeof Ft.destroy=="function"&&(this._destroy=Ft.destroy)),at.call(this)}Object.defineProperty(kt.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Ft){this._readableState&&(this._readableState.destroyed=Ft)}}),kt.prototype.destroy=At.destroy,kt.prototype._undestroy=At.undestroy,kt.prototype._destroy=function(Ft,zt){this.push(null),zt(Ft)},kt.prototype.push=function(Ft,zt){var ir=this._readableState,sr;return ir.objectMode?sr=!0:typeof Ft=="string"&&(zt=zt||ir.defaultEncoding,zt!==ir.encoding&&(Ft=it.from(Ft,zt),zt=""),sr=!0),Pt(this,Ft,zt,!1,sr)},kt.prototype.unshift=function(Ft){return Pt(this,Ft,null,!0,!1)};function Pt(Ft,zt,ir,sr,ar){var Vt=Ft._readableState;if(zt===null)Vt.reading=!1,lr(Ft,Vt);else{var fr;ar||(fr=Gt(Vt,zt)),fr?Ft.emit("error",fr):Vt.objectMode||zt&&zt.length>0?(typeof zt!="string"&&!Vt.objectMode&&Object.getPrototypeOf(zt)!==it.prototype&&(zt=dt(zt)),sr?Vt.endEmitted?Ft.emit("error",new Error("stream.unshift() after end event")):Dt(Ft,Vt,zt,!0):Vt.ended?Ft.emit("error",new Error("stream.push() after EOF")):(Vt.reading=!1,Vt.decoder&&!ir?(zt=Vt.decoder.write(zt),Vt.objectMode||zt.length!==0?Dt(Ft,Vt,zt,!1):ft(Ft,Vt)):Dt(Ft,Vt,zt,!1))):sr||(Vt.reading=!1)}return jt(Vt)}function Dt(Ft,zt,ir,sr){zt.flowing&&zt.length===0&&!zt.sync?(Ft.emit("data",ir),Ft.read(0)):(zt.length+=zt.objectMode?1:ir.length,sr?zt.buffer.unshift(ir):zt.buffer.push(ir),zt.needReadable&&It(Ft)),ft(Ft,zt)}function Gt(Ft,zt){var ir;return!pt(zt)&&typeof zt!="string"&&zt!==void 0&&!Ft.objectMode&&(ir=new TypeError("Invalid non-string/buffer chunk")),ir}function jt(Ft){return!Ft.ended&&(Ft.needReadable||Ft.length<Ft.highWaterMark||Ft.length===0)}kt.prototype.isPaused=function(){return this._readableState.flowing===!1},kt.prototype.setEncoding=function(Ft){return xt||(xt=requireString_decoder().StringDecoder),this._readableState.decoder=new xt(Ft),this._readableState.encoding=Ft,this};var Yt=8388608;function tr(Ft){return Ft>=Yt?Ft=Yt:(Ft--,Ft|=Ft>>>1,Ft|=Ft>>>2,Ft|=Ft>>>4,Ft|=Ft>>>8,Ft|=Ft>>>16,Ft++),Ft}function er(Ft,zt){return Ft<=0||zt.length===0&&zt.ended?0:zt.objectMode?1:Ft!==Ft?zt.flowing&&zt.length?zt.buffer.head.data.length:zt.length:(Ft>zt.highWaterMark&&(zt.highWaterMark=tr(Ft)),Ft<=zt.length?Ft:zt.ended?zt.length:(zt.needReadable=!0,0))}kt.prototype.read=function(Ft){Rt("read",Ft),Ft=parseInt(Ft,10);var zt=this._readableState,ir=Ft;if(Ft!==0&&(zt.emittedReadable=!1),Ft===0&&zt.needReadable&&(zt.length>=zt.highWaterMark||zt.ended))return Rt("read: emitReadable",zt.length,zt.ended),zt.length===0&&zt.ended?Ut(this):It(this),null;if(Ft=er(Ft,zt),Ft===0&&zt.ended)return zt.length===0&&Ut(this),null;var sr=zt.needReadable;Rt("need readable",sr),(zt.length===0||zt.length-Ft<zt.highWaterMark)&&(sr=!0,Rt("length less than watermark",sr)),zt.ended||zt.reading?(sr=!1,Rt("reading or ended",sr)):sr&&(Rt("do read"),zt.reading=!0,zt.sync=!0,zt.length===0&&(zt.needReadable=!0),this._read(zt.highWaterMark),zt.sync=!1,zt.reading||(Ft=er(ir,zt)));var ar;return Ft>0?ar=ct(Ft,zt):ar=null,ar===null?(zt.needReadable=!0,Ft=0):zt.length-=Ft,zt.length===0&&(zt.ended||(zt.needReadable=!0),ir!==Ft&&zt.ended&&Ut(this)),ar!==null&&this.emit("data",ar),ar};function lr(Ft,zt){if(!zt.ended){if(zt.decoder){var ir=zt.decoder.end();ir&&ir.length&&(zt.buffer.push(ir),zt.length+=zt.objectMode?1:ir.length)}zt.ended=!0,It(Ft)}}function It(Ft){var zt=Ft._readableState;zt.needReadable=!1,zt.emittedReadable||(Rt("emitReadable",zt.flowing),zt.emittedReadable=!0,zt.sync?tt.nextTick(ot,Ft):ot(Ft))}function ot(Ft){Rt("emit readable"),Ft.emit("readable"),Et(Ft)}function ft(Ft,zt){zt.readingMore||(zt.readingMore=!0,tt.nextTick(ht,Ft,zt))}function ht(Ft,zt){for(var ir=zt.length;!zt.reading&&!zt.flowing&&!zt.ended&&zt.length<zt.highWaterMark&&(Rt("maybeReadMore read 0"),Ft.read(0),ir!==zt.length);)ir=zt.length;zt.readingMore=!1}kt.prototype._read=function(Ft){this.emit("error",new Error("_read() is not implemented"))},kt.prototype.pipe=function(Ft,zt){var ir=this,sr=this._readableState;switch(sr.pipesCount){case 0:sr.pipes=Ft;break;case 1:sr.pipes=[sr.pipes,Ft];break;default:sr.pipes.push(Ft);break}sr.pipesCount+=1,Rt("pipe count=%d opts=%j",sr.pipesCount,zt);var ar=(!zt||zt.end!==!1)&&Ft!==process$1.stdout&&Ft!==process$1.stderr,Vt=ar?Gr:an;sr.endEmitted?tt.nextTick(Vt):ir.once("end",Vt),Ft.on("unpipe",fr);function fr(Er,Ar){Rt("onunpipe"),Er===ir&&Ar&&Ar.hasUnpiped===!1&&(Ar.hasUnpiped=!0,Fr())}function Gr(){Rt("onend"),Ft.end()}var ur=vt(ir);Ft.on("drain",ur);var pr=!1;function Fr(){Rt("cleanup"),Ft.removeListener("close",$r),Ft.removeListener("finish",Cr),Ft.removeListener("drain",ur),Ft.removeListener("error",Wr),Ft.removeListener("unpipe",fr),ir.removeListener("end",Gr),ir.removeListener("end",an),ir.removeListener("data",hr),pr=!0,sr.awaitDrain&&(!Ft._writableState||Ft._writableState.needDrain)&&ur()}var yr=!1;ir.on("data",hr);function hr(Er){Rt("ondata"),yr=!1;var Ar=Ft.write(Er);Ar===!1&&!yr&&((sr.pipesCount===1&&sr.pipes===Ft||sr.pipesCount>1&&Ht(sr.pipes,Ft)!==-1)&&!pr&&(Rt("false write response, pause",sr.awaitDrain),sr.awaitDrain++,yr=!0),ir.pause())}function Wr(Er){Rt("onerror",Er),an(),Ft.removeListener("error",Wr),nt(Ft,"error")===0&&Ft.emit("error",Er)}Ct(Ft,"error",Wr);function $r(){Ft.removeListener("finish",Cr),an()}Ft.once("close",$r);function Cr(){Rt("onfinish"),Ft.removeListener("close",$r),an()}Ft.once("finish",Cr);function an(){Rt("unpipe"),ir.unpipe(Ft)}return Ft.emit("pipe",ir),sr.flowing||(Rt("pipe resume"),ir.resume()),Ft};function vt(Ft){return function(){var zt=Ft._readableState;Rt("pipeOnDrain",zt.awaitDrain),zt.awaitDrain&&zt.awaitDrain--,zt.awaitDrain===0&&nt(Ft,"data")&&(zt.flowing=!0,Et(Ft))}}kt.prototype.unpipe=function(Ft){var zt=this._readableState,ir={hasUnpiped:!1};if(zt.pipesCount===0)return this;if(zt.pipesCount===1)return Ft&&Ft!==zt.pipes?this:(Ft||(Ft=zt.pipes),zt.pipes=null,zt.pipesCount=0,zt.flowing=!1,Ft&&Ft.emit("unpipe",this,ir),this);if(!Ft){var sr=zt.pipes,ar=zt.pipesCount;zt.pipes=null,zt.pipesCount=0,zt.flowing=!1;for(var Vt=0;Vt<ar;Vt++)sr[Vt].emit("unpipe",this,{hasUnpiped:!1});return this}var fr=Ht(zt.pipes,Ft);return fr===-1?this:(zt.pipes.splice(fr,1),zt.pipesCount-=1,zt.pipesCount===1&&(zt.pipes=zt.pipes[0]),Ft.emit("unpipe",this,ir),this)},kt.prototype.on=function(Ft,zt){var ir=at.prototype.on.call(this,Ft,zt);if(Ft==="data")this._readableState.flowing!==!1&&this.resume();else if(Ft==="readable"){var sr=this._readableState;!sr.endEmitted&&!sr.readableListening&&(sr.readableListening=sr.needReadable=!0,sr.emittedReadable=!1,sr.reading?sr.length&&It(this):tt.nextTick(wt,this))}return ir},kt.prototype.addListener=kt.prototype.on;function wt(Ft){Rt("readable nexttick read 0"),Ft.read(0)}kt.prototype.resume=function(){var Ft=this._readableState;return Ft.flowing||(Rt("resume"),Ft.flowing=!0,bt(this,Ft)),this};function bt(Ft,zt){zt.resumeScheduled||(zt.resumeScheduled=!0,tt.nextTick($t,Ft,zt))}function $t(Ft,zt){zt.reading||(Rt("resume read 0"),Ft.read(0)),zt.resumeScheduled=!1,zt.awaitDrain=0,Ft.emit("resume"),Et(Ft),zt.flowing&&!zt.reading&&Ft.read(0)}kt.prototype.pause=function(){return Rt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Rt("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Et(Ft){var zt=Ft._readableState;for(Rt("flow",zt.flowing);zt.flowing&&Ft.read()!==null;);}kt.prototype.wrap=function(Ft){var zt=this,ir=this._readableState,sr=!1;Ft.on("end",function(){if(Rt("wrapped end"),ir.decoder&&!ir.ended){var fr=ir.decoder.end();fr&&fr.length&&zt.push(fr)}zt.push(null)}),Ft.on("data",function(fr){if(Rt("wrapped data"),ir.decoder&&(fr=ir.decoder.write(fr)),!(ir.objectMode&&fr==null)&&!(!ir.objectMode&&(!fr||!fr.length))){var Gr=zt.push(fr);Gr||(sr=!0,Ft.pause())}});for(var ar in Ft)this[ar]===void 0&&typeof Ft[ar]=="function"&&(this[ar]=function(fr){return function(){return Ft[fr].apply(Ft,arguments)}}(ar));for(var Vt=0;Vt<Nt.length;Vt++)Ft.on(Nt[Vt],this.emit.bind(this,Nt[Vt]));return this._read=function(fr){Rt("wrapped _read",fr),sr&&(sr=!1,Ft.resume())},this},Object.defineProperty(kt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),kt._fromList=ct;function ct(Ft,zt){if(zt.length===0)return null;var ir;return zt.objectMode?ir=zt.buffer.shift():!Ft||Ft>=zt.length?(zt.decoder?ir=zt.buffer.join(""):zt.buffer.length===1?ir=zt.buffer.head.data:ir=zt.buffer.concat(zt.length),zt.buffer.clear()):ir=St(Ft,zt.buffer,zt.decoder),ir}function St(Ft,zt,ir){var sr;return Ft<zt.head.data.length?(sr=zt.head.data.slice(0,Ft),zt.head.data=zt.head.data.slice(Ft)):Ft===zt.head.data.length?sr=zt.shift():sr=ir?Mt(Ft,zt):Lt(Ft,zt),sr}function Mt(Ft,zt){var ir=zt.head,sr=1,ar=ir.data;for(Ft-=ar.length;ir=ir.next;){var Vt=ir.data,fr=Ft>Vt.length?Vt.length:Ft;if(fr===Vt.length?ar+=Vt:ar+=Vt.slice(0,Ft),Ft-=fr,Ft===0){fr===Vt.length?(++sr,ir.next?zt.head=ir.next:zt.head=zt.tail=null):(zt.head=ir,ir.data=Vt.slice(fr));break}++sr}return zt.length-=sr,ar}function Lt(Ft,zt){var ir=it.allocUnsafe(Ft),sr=zt.head,ar=1;for(sr.data.copy(ir),Ft-=sr.data.length;sr=sr.next;){var Vt=sr.data,fr=Ft>Vt.length?Vt.length:Ft;if(Vt.copy(ir,ir.length-Ft,0,fr),Ft-=fr,Ft===0){fr===Vt.length?(++ar,sr.next?zt.head=sr.next:zt.head=zt.tail=null):(zt.head=sr,sr.data=Vt.slice(fr));break}++ar}return zt.length-=ar,ir}function Ut(Ft){var zt=Ft._readableState;if(zt.length>0)throw new Error('"endReadable()" called on non-empty stream');zt.endEmitted||(zt.ended=!0,tt.nextTick(Kt,zt,Ft))}function Kt(Ft,zt){!Ft.endEmitted&&Ft.length===0&&(Ft.endEmitted=!0,zt.readable=!1,zt.emit("end"))}function Ht(Ft,zt){for(var ir=0,sr=Ft.length;ir<sr;ir++)if(Ft[ir]===zt)return ir;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=nt;var tt=require_stream_duplex(),et=Object.create(requireUtil$1());et.inherits=requireInherits_browser(),et.inherits(nt,tt);function rt(st,dt){var pt=this._transformState;pt.transforming=!1;var mt=pt.writecb;if(!mt)return this.emit("error",new Error("write callback called multiple times"));pt.writechunk=null,pt.writecb=null,dt!=null&&this.push(dt),mt(st);var yt=this._readableState;yt.reading=!1,(yt.needReadable||yt.length<yt.highWaterMark)&&this._read(yt.highWaterMark)}function nt(st){if(!(this instanceof nt))return new nt(st);tt.call(this,st),this._transformState={afterTransform:rt.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,st&&(typeof st.transform=="function"&&(this._transform=st.transform),typeof st.flush=="function"&&(this._flush=st.flush)),this.on("prefinish",at)}function at(){var st=this;typeof this._flush=="function"?this._flush(function(dt,pt){it(st,dt,pt)}):it(this,null,null)}nt.prototype.push=function(st,dt){return this._transformState.needTransform=!1,tt.prototype.push.call(this,st,dt)},nt.prototype._transform=function(st,dt,pt){throw new Error("_transform() is not implemented")},nt.prototype._write=function(st,dt,pt){var mt=this._transformState;if(mt.writecb=pt,mt.writechunk=st,mt.writeencoding=dt,!mt.transforming){var yt=this._readableState;(mt.needTransform||yt.needReadable||yt.length<yt.highWaterMark)&&this._read(yt.highWaterMark)}},nt.prototype._read=function(st){var dt=this._transformState;dt.writechunk!==null&&dt.writecb&&!dt.transforming?(dt.transforming=!0,this._transform(dt.writechunk,dt.writeencoding,dt.afterTransform)):dt.needTransform=!0},nt.prototype._destroy=function(st,dt){var pt=this;tt.prototype._destroy.call(this,st,function(mt){dt(mt),pt.emit("close")})};function it(st,dt,pt){if(dt)return st.emit("error",dt);if(pt!=null&&st.push(pt),st._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(st._transformState.transforming)throw new Error("Calling transform done when still transforming");return st.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=rt;var tt=require_stream_transform(),et=Object.create(requireUtil$1());et.inherits=requireInherits_browser(),et.inherits(rt,tt);function rt(nt){if(!(this instanceof rt))return new rt(nt);tt.call(this,nt)}return rt.prototype._transform=function(nt,at,it){it(null,nt)},_stream_passthrough}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(tt,et){et=tt.exports=require_stream_readable(),et.Stream=et,et.Readable=et,et.Writable=require_stream_writable(),et.Duplex=require_stream_duplex(),et.Transform=require_stream_transform(),et.PassThrough=require_stream_passthrough()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var sign={exports:{}},browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var tt=bnExports,et=requireBrowser$b();function rt(it){var st=nt(it),dt=st.toRed(tt.mont(it.modulus)).redPow(new tt(it.publicExponent)).fromRed();return{blinder:dt,unblinder:st.invm(it.modulus)}}function nt(it){var st=it.modulus.byteLength(),dt;do dt=new tt(et(st));while(dt.cmp(it.modulus)>=0||!dt.umod(it.prime1)||!dt.umod(it.prime2));return dt}function at(it,st){var dt=rt(st),pt=st.modulus.byteLength(),mt=new tt(it).mul(dt.blinder).umod(st.modulus),yt=mt.toRed(tt.mont(st.prime1)),Rt=mt.toRed(tt.mont(st.prime2)),Tt=st.coefficient,At=st.prime1,xt=st.prime2,Nt=yt.redPow(st.exponent1).fromRed(),Ct=Rt.redPow(st.exponent2).fromRed(),Ot=Nt.isub(Ct).imul(Tt).umod(At).imul(xt);return Ct.iadd(Ot).imul(dt.unblinder).umod(st.modulus).toArrayLike(Buffer,"be",pt)}return at.getr=nt,browserifyRsa=at,browserifyRsa}var elliptic={};const name="elliptic",version="6.5.5",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0={name,version,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$2={},bn$3={exports:{}};bn$3.exports;var hasRequiredBn$3;function requireBn$3(){return hasRequiredBn$3||(hasRequiredBn$3=1,function(tt){(function(et,rt){function nt(It,ot){if(!It)throw new Error(ot||"Assertion failed")}function at(It,ot){It.super_=ot;var ft=function(){};ft.prototype=ot.prototype,It.prototype=new ft,It.prototype.constructor=It}function it(It,ot,ft){if(it.isBN(It))return It;this.negative=0,this.words=null,this.length=0,this.red=null,It!==null&&((ot==="le"||ot==="be")&&(ft=ot,ot=10),this._init(It||0,ot||10,ft||"be"))}typeof et=="object"?et.exports=it:rt.BN=it,it.BN=it,it.wordSize=26;var st;try{typeof window<"u"&&typeof window.Buffer<"u"?st=window.Buffer:st=require$$0$2.Buffer}catch{}it.isBN=function(ot){return ot instanceof it?!0:ot!==null&&typeof ot=="object"&&ot.constructor.wordSize===it.wordSize&&Array.isArray(ot.words)},it.max=function(ot,ft){return ot.cmp(ft)>0?ot:ft},it.min=function(ot,ft){return ot.cmp(ft)<0?ot:ft},it.prototype._init=function(ot,ft,ht){if(typeof ot=="number")return this._initNumber(ot,ft,ht);if(typeof ot=="object")return this._initArray(ot,ft,ht);ft==="hex"&&(ft=16),nt(ft===(ft|0)&&ft>=2&&ft<=36),ot=ot.toString().replace(/\s+/g,"");var vt=0;ot[0]==="-"&&(vt++,this.negative=1),vt<ot.length&&(ft===16?this._parseHex(ot,vt,ht):(this._parseBase(ot,ft,vt),ht==="le"&&this._initArray(this.toArray(),ft,ht)))},it.prototype._initNumber=function(ot,ft,ht){ot<0&&(this.negative=1,ot=-ot),ot<67108864?(this.words=[ot&67108863],this.length=1):ot<4503599627370496?(this.words=[ot&67108863,ot/67108864&67108863],this.length=2):(nt(ot<9007199254740992),this.words=[ot&67108863,ot/67108864&67108863,1],this.length=3),ht==="le"&&this._initArray(this.toArray(),ft,ht)},it.prototype._initArray=function(ot,ft,ht){if(nt(typeof ot.length=="number"),ot.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ot.length/3),this.words=new Array(this.length);for(var vt=0;vt<this.length;vt++)this.words[vt]=0;var wt,bt,$t=0;if(ht==="be")for(vt=ot.length-1,wt=0;vt>=0;vt-=3)bt=ot[vt]|ot[vt-1]<<8|ot[vt-2]<<16,this.words[wt]|=bt<<$t&67108863,this.words[wt+1]=bt>>>26-$t&67108863,$t+=24,$t>=26&&($t-=26,wt++);else if(ht==="le")for(vt=0,wt=0;vt<ot.length;vt+=3)bt=ot[vt]|ot[vt+1]<<8|ot[vt+2]<<16,this.words[wt]|=bt<<$t&67108863,this.words[wt+1]=bt>>>26-$t&67108863,$t+=24,$t>=26&&($t-=26,wt++);return this.strip()};function dt(It,ot){var ft=It.charCodeAt(ot);return ft>=65&&ft<=70?ft-55:ft>=97&&ft<=102?ft-87:ft-48&15}function pt(It,ot,ft){var ht=dt(It,ft);return ft-1>=ot&&(ht|=dt(It,ft-1)<<4),ht}it.prototype._parseHex=function(ot,ft,ht){this.length=Math.ceil((ot.length-ft)/6),this.words=new Array(this.length);for(var vt=0;vt<this.length;vt++)this.words[vt]=0;var wt=0,bt=0,$t;if(ht==="be")for(vt=ot.length-1;vt>=ft;vt-=2)$t=pt(ot,ft,vt)<<wt,this.words[bt]|=$t&67108863,wt>=18?(wt-=18,bt+=1,this.words[bt]|=$t>>>26):wt+=8;else{var Et=ot.length-ft;for(vt=Et%2===0?ft+1:ft;vt<ot.length;vt+=2)$t=pt(ot,ft,vt)<<wt,this.words[bt]|=$t&67108863,wt>=18?(wt-=18,bt+=1,this.words[bt]|=$t>>>26):wt+=8}this.strip()};function mt(It,ot,ft,ht){for(var vt=0,wt=Math.min(It.length,ft),bt=ot;bt<wt;bt++){var $t=It.charCodeAt(bt)-48;vt*=ht,$t>=49?vt+=$t-49+10:$t>=17?vt+=$t-17+10:vt+=$t}return vt}it.prototype._parseBase=function(ot,ft,ht){this.words=[0],this.length=1;for(var vt=0,wt=1;wt<=67108863;wt*=ft)vt++;vt--,wt=wt/ft|0;for(var bt=ot.length-ht,$t=bt%vt,Et=Math.min(bt,bt-$t)+ht,ct=0,St=ht;St<Et;St+=vt)ct=mt(ot,St,St+vt,ft),this.imuln(wt),this.words[0]+ct<67108864?this.words[0]+=ct:this._iaddn(ct);if($t!==0){var Mt=1;for(ct=mt(ot,St,ot.length,ft),St=0;St<$t;St++)Mt*=ft;this.imuln(Mt),this.words[0]+ct<67108864?this.words[0]+=ct:this._iaddn(ct)}this.strip()},it.prototype.copy=function(ot){ot.words=new Array(this.length);for(var ft=0;ft<this.length;ft++)ot.words[ft]=this.words[ft];ot.length=this.length,ot.negative=this.negative,ot.red=this.red},it.prototype.clone=function(){var ot=new it(null);return this.copy(ot),ot},it.prototype._expand=function(ot){for(;this.length<ot;)this.words[this.length++]=0;return this},it.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},it.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},it.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var yt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Rt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Tt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];it.prototype.toString=function(ot,ft){ot=ot||10,ft=ft|0||1;var ht;if(ot===16||ot==="hex"){ht="";for(var vt=0,wt=0,bt=0;bt<this.length;bt++){var $t=this.words[bt],Et=(($t<<vt|wt)&16777215).toString(16);wt=$t>>>24-vt&16777215,wt!==0||bt!==this.length-1?ht=yt[6-Et.length]+Et+ht:ht=Et+ht,vt+=2,vt>=26&&(vt-=26,bt--)}for(wt!==0&&(ht=wt.toString(16)+ht);ht.length%ft!==0;)ht="0"+ht;return this.negative!==0&&(ht="-"+ht),ht}if(ot===(ot|0)&&ot>=2&&ot<=36){var ct=Rt[ot],St=Tt[ot];ht="";var Mt=this.clone();for(Mt.negative=0;!Mt.isZero();){var Lt=Mt.modn(St).toString(ot);Mt=Mt.idivn(St),Mt.isZero()?ht=Lt+ht:ht=yt[ct-Lt.length]+Lt+ht}for(this.isZero()&&(ht="0"+ht);ht.length%ft!==0;)ht="0"+ht;return this.negative!==0&&(ht="-"+ht),ht}nt(!1,"Base should be between 2 and 36")},it.prototype.toNumber=function(){var ot=this.words[0];return this.length===2?ot+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ot+=4503599627370496+this.words[1]*67108864:this.length>2&&nt(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ot:ot},it.prototype.toJSON=function(){return this.toString(16)},it.prototype.toBuffer=function(ot,ft){return nt(typeof st<"u"),this.toArrayLike(st,ot,ft)},it.prototype.toArray=function(ot,ft){return this.toArrayLike(Array,ot,ft)},it.prototype.toArrayLike=function(ot,ft,ht){var vt=this.byteLength(),wt=ht||Math.max(1,vt);nt(vt<=wt,"byte array longer than desired length"),nt(wt>0,"Requested array length <= 0"),this.strip();var bt=ft==="le",$t=new ot(wt),Et,ct,St=this.clone();if(bt){for(ct=0;!St.isZero();ct++)Et=St.andln(255),St.iushrn(8),$t[ct]=Et;for(;ct<wt;ct++)$t[ct]=0}else{for(ct=0;ct<wt-vt;ct++)$t[ct]=0;for(ct=0;!St.isZero();ct++)Et=St.andln(255),St.iushrn(8),$t[wt-ct-1]=Et}return $t},Math.clz32?it.prototype._countBits=function(ot){return 32-Math.clz32(ot)}:it.prototype._countBits=function(ot){var ft=ot,ht=0;return ft>=4096&&(ht+=13,ft>>>=13),ft>=64&&(ht+=7,ft>>>=7),ft>=8&&(ht+=4,ft>>>=4),ft>=2&&(ht+=2,ft>>>=2),ht+ft},it.prototype._zeroBits=function(ot){if(ot===0)return 26;var ft=ot,ht=0;return ft&8191||(ht+=13,ft>>>=13),ft&127||(ht+=7,ft>>>=7),ft&15||(ht+=4,ft>>>=4),ft&3||(ht+=2,ft>>>=2),ft&1||ht++,ht},it.prototype.bitLength=function(){var ot=this.words[this.length-1],ft=this._countBits(ot);return(this.length-1)*26+ft};function At(It){for(var ot=new Array(It.bitLength()),ft=0;ft<ot.length;ft++){var ht=ft/26|0,vt=ft%26;ot[ft]=(It.words[ht]&1<<vt)>>>vt}return ot}it.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ot=0,ft=0;ft<this.length;ft++){var ht=this._zeroBits(this.words[ft]);if(ot+=ht,ht!==26)break}return ot},it.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},it.prototype.toTwos=function(ot){return this.negative!==0?this.abs().inotn(ot).iaddn(1):this.clone()},it.prototype.fromTwos=function(ot){return this.testn(ot-1)?this.notn(ot).iaddn(1).ineg():this.clone()},it.prototype.isNeg=function(){return this.negative!==0},it.prototype.neg=function(){return this.clone().ineg()},it.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},it.prototype.iuor=function(ot){for(;this.length<ot.length;)this.words[this.length++]=0;for(var ft=0;ft<ot.length;ft++)this.words[ft]=this.words[ft]|ot.words[ft];return this.strip()},it.prototype.ior=function(ot){return nt((this.negative|ot.negative)===0),this.iuor(ot)},it.prototype.or=function(ot){return this.length>ot.length?this.clone().ior(ot):ot.clone().ior(this)},it.prototype.uor=function(ot){return this.length>ot.length?this.clone().iuor(ot):ot.clone().iuor(this)},it.prototype.iuand=function(ot){var ft;this.length>ot.length?ft=ot:ft=this;for(var ht=0;ht<ft.length;ht++)this.words[ht]=this.words[ht]&ot.words[ht];return this.length=ft.length,this.strip()},it.prototype.iand=function(ot){return nt((this.negative|ot.negative)===0),this.iuand(ot)},it.prototype.and=function(ot){return this.length>ot.length?this.clone().iand(ot):ot.clone().iand(this)},it.prototype.uand=function(ot){return this.length>ot.length?this.clone().iuand(ot):ot.clone().iuand(this)},it.prototype.iuxor=function(ot){var ft,ht;this.length>ot.length?(ft=this,ht=ot):(ft=ot,ht=this);for(var vt=0;vt<ht.length;vt++)this.words[vt]=ft.words[vt]^ht.words[vt];if(this!==ft)for(;vt<ft.length;vt++)this.words[vt]=ft.words[vt];return this.length=ft.length,this.strip()},it.prototype.ixor=function(ot){return nt((this.negative|ot.negative)===0),this.iuxor(ot)},it.prototype.xor=function(ot){return this.length>ot.length?this.clone().ixor(ot):ot.clone().ixor(this)},it.prototype.uxor=function(ot){return this.length>ot.length?this.clone().iuxor(ot):ot.clone().iuxor(this)},it.prototype.inotn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=Math.ceil(ot/26)|0,ht=ot%26;this._expand(ft),ht>0&&ft--;for(var vt=0;vt<ft;vt++)this.words[vt]=~this.words[vt]&67108863;return ht>0&&(this.words[vt]=~this.words[vt]&67108863>>26-ht),this.strip()},it.prototype.notn=function(ot){return this.clone().inotn(ot)},it.prototype.setn=function(ot,ft){nt(typeof ot=="number"&&ot>=0);var ht=ot/26|0,vt=ot%26;return this._expand(ht+1),ft?this.words[ht]=this.words[ht]|1<<vt:this.words[ht]=this.words[ht]&~(1<<vt),this.strip()},it.prototype.iadd=function(ot){var ft;if(this.negative!==0&&ot.negative===0)return this.negative=0,ft=this.isub(ot),this.negative^=1,this._normSign();if(this.negative===0&&ot.negative!==0)return ot.negative=0,ft=this.isub(ot),ot.negative=1,ft._normSign();var ht,vt;this.length>ot.length?(ht=this,vt=ot):(ht=ot,vt=this);for(var wt=0,bt=0;bt<vt.length;bt++)ft=(ht.words[bt]|0)+(vt.words[bt]|0)+wt,this.words[bt]=ft&67108863,wt=ft>>>26;for(;wt!==0&&bt<ht.length;bt++)ft=(ht.words[bt]|0)+wt,this.words[bt]=ft&67108863,wt=ft>>>26;if(this.length=ht.length,wt!==0)this.words[this.length]=wt,this.length++;else if(ht!==this)for(;bt<ht.length;bt++)this.words[bt]=ht.words[bt];return this},it.prototype.add=function(ot){var ft;return ot.negative!==0&&this.negative===0?(ot.negative=0,ft=this.sub(ot),ot.negative^=1,ft):ot.negative===0&&this.negative!==0?(this.negative=0,ft=ot.sub(this),this.negative=1,ft):this.length>ot.length?this.clone().iadd(ot):ot.clone().iadd(this)},it.prototype.isub=function(ot){if(ot.negative!==0){ot.negative=0;var ft=this.iadd(ot);return ot.negative=1,ft._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ot),this.negative=1,this._normSign();var ht=this.cmp(ot);if(ht===0)return this.negative=0,this.length=1,this.words[0]=0,this;var vt,wt;ht>0?(vt=this,wt=ot):(vt=ot,wt=this);for(var bt=0,$t=0;$t<wt.length;$t++)ft=(vt.words[$t]|0)-(wt.words[$t]|0)+bt,bt=ft>>26,this.words[$t]=ft&67108863;for(;bt!==0&&$t<vt.length;$t++)ft=(vt.words[$t]|0)+bt,bt=ft>>26,this.words[$t]=ft&67108863;if(bt===0&&$t<vt.length&&vt!==this)for(;$t<vt.length;$t++)this.words[$t]=vt.words[$t];return this.length=Math.max(this.length,$t),vt!==this&&(this.negative=1),this.strip()},it.prototype.sub=function(ot){return this.clone().isub(ot)};function xt(It,ot,ft){ft.negative=ot.negative^It.negative;var ht=It.length+ot.length|0;ft.length=ht,ht=ht-1|0;var vt=It.words[0]|0,wt=ot.words[0]|0,bt=vt*wt,$t=bt&67108863,Et=bt/67108864|0;ft.words[0]=$t;for(var ct=1;ct<ht;ct++){for(var St=Et>>>26,Mt=Et&67108863,Lt=Math.min(ct,ot.length-1),Ut=Math.max(0,ct-It.length+1);Ut<=Lt;Ut++){var Kt=ct-Ut|0;vt=It.words[Kt]|0,wt=ot.words[Ut]|0,bt=vt*wt+Mt,St+=bt/67108864|0,Mt=bt&67108863}ft.words[ct]=Mt|0,Et=St|0}return Et!==0?ft.words[ct]=Et|0:ft.length--,ft.strip()}var Nt=function(ot,ft,ht){var vt=ot.words,wt=ft.words,bt=ht.words,$t=0,Et,ct,St,Mt=vt[0]|0,Lt=Mt&8191,Ut=Mt>>>13,Kt=vt[1]|0,Ht=Kt&8191,Ft=Kt>>>13,zt=vt[2]|0,ir=zt&8191,sr=zt>>>13,ar=vt[3]|0,Vt=ar&8191,fr=ar>>>13,Gr=vt[4]|0,ur=Gr&8191,pr=Gr>>>13,Fr=vt[5]|0,yr=Fr&8191,hr=Fr>>>13,Wr=vt[6]|0,$r=Wr&8191,Cr=Wr>>>13,an=vt[7]|0,Er=an&8191,Ar=an>>>13,gn=vt[8]|0,Or=gn&8191,Lr=gn>>>13,wn=vt[9]|0,Xt=wn&8191,Bt=wn>>>13,Wt=wt[0]|0,nr=Wt&8191,cr=Wt>>>13,Sr=wt[1]|0,_r=Sr&8191,xr=Sr>>>13,pn=wt[2]|0,Tr=pn&8191,Ur=pn>>>13,un=wt[3]|0,Ir=un&8191,Nr=un>>>13,zr=wt[4]|0,br=zr&8191,Dr=zr>>>13,yn=wt[5]|0,Mr=yn&8191,qr=yn>>>13,Sn=wt[6]|0,Br=Sn&8191,Hr=Sn>>>13,Zt=wt[7]|0,Qt=Zt&8191,Jt=Zt>>>13,qt=wt[8]|0,rr=qt&8191,dr=qt>>>13,Rr=wt[9]|0,vr=Rr&8191,wr=Rr>>>13;ht.negative=ot.negative^ft.negative,ht.length=19,Et=Math.imul(Lt,nr),ct=Math.imul(Lt,cr),ct=ct+Math.imul(Ut,nr)|0,St=Math.imul(Ut,cr);var Yr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,Et=Math.imul(Ht,nr),ct=Math.imul(Ht,cr),ct=ct+Math.imul(Ft,nr)|0,St=Math.imul(Ft,cr),Et=Et+Math.imul(Lt,_r)|0,ct=ct+Math.imul(Lt,xr)|0,ct=ct+Math.imul(Ut,_r)|0,St=St+Math.imul(Ut,xr)|0;var jr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(jr>>>26)|0,jr&=67108863,Et=Math.imul(ir,nr),ct=Math.imul(ir,cr),ct=ct+Math.imul(sr,nr)|0,St=Math.imul(sr,cr),Et=Et+Math.imul(Ht,_r)|0,ct=ct+Math.imul(Ht,xr)|0,ct=ct+Math.imul(Ft,_r)|0,St=St+Math.imul(Ft,xr)|0,Et=Et+Math.imul(Lt,Tr)|0,ct=ct+Math.imul(Lt,Ur)|0,ct=ct+Math.imul(Ut,Tr)|0,St=St+Math.imul(Ut,Ur)|0;var mn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(mn>>>26)|0,mn&=67108863,Et=Math.imul(Vt,nr),ct=Math.imul(Vt,cr),ct=ct+Math.imul(fr,nr)|0,St=Math.imul(fr,cr),Et=Et+Math.imul(ir,_r)|0,ct=ct+Math.imul(ir,xr)|0,ct=ct+Math.imul(sr,_r)|0,St=St+Math.imul(sr,xr)|0,Et=Et+Math.imul(Ht,Tr)|0,ct=ct+Math.imul(Ht,Ur)|0,ct=ct+Math.imul(Ft,Tr)|0,St=St+Math.imul(Ft,Ur)|0,Et=Et+Math.imul(Lt,Ir)|0,ct=ct+Math.imul(Lt,Nr)|0,ct=ct+Math.imul(Ut,Ir)|0,St=St+Math.imul(Ut,Nr)|0;var Jr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,Et=Math.imul(ur,nr),ct=Math.imul(ur,cr),ct=ct+Math.imul(pr,nr)|0,St=Math.imul(pr,cr),Et=Et+Math.imul(Vt,_r)|0,ct=ct+Math.imul(Vt,xr)|0,ct=ct+Math.imul(fr,_r)|0,St=St+Math.imul(fr,xr)|0,Et=Et+Math.imul(ir,Tr)|0,ct=ct+Math.imul(ir,Ur)|0,ct=ct+Math.imul(sr,Tr)|0,St=St+Math.imul(sr,Ur)|0,Et=Et+Math.imul(Ht,Ir)|0,ct=ct+Math.imul(Ht,Nr)|0,ct=ct+Math.imul(Ft,Ir)|0,St=St+Math.imul(Ft,Nr)|0,Et=Et+Math.imul(Lt,br)|0,ct=ct+Math.imul(Lt,Dr)|0,ct=ct+Math.imul(Ut,br)|0,St=St+Math.imul(Ut,Dr)|0;var cn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(cn>>>26)|0,cn&=67108863,Et=Math.imul(yr,nr),ct=Math.imul(yr,cr),ct=ct+Math.imul(hr,nr)|0,St=Math.imul(hr,cr),Et=Et+Math.imul(ur,_r)|0,ct=ct+Math.imul(ur,xr)|0,ct=ct+Math.imul(pr,_r)|0,St=St+Math.imul(pr,xr)|0,Et=Et+Math.imul(Vt,Tr)|0,ct=ct+Math.imul(Vt,Ur)|0,ct=ct+Math.imul(fr,Tr)|0,St=St+Math.imul(fr,Ur)|0,Et=Et+Math.imul(ir,Ir)|0,ct=ct+Math.imul(ir,Nr)|0,ct=ct+Math.imul(sr,Ir)|0,St=St+Math.imul(sr,Nr)|0,Et=Et+Math.imul(Ht,br)|0,ct=ct+Math.imul(Ht,Dr)|0,ct=ct+Math.imul(Ft,br)|0,St=St+Math.imul(Ft,Dr)|0,Et=Et+Math.imul(Lt,Mr)|0,ct=ct+Math.imul(Lt,qr)|0,ct=ct+Math.imul(Ut,Mr)|0,St=St+Math.imul(Ut,qr)|0;var ln=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(ln>>>26)|0,ln&=67108863,Et=Math.imul($r,nr),ct=Math.imul($r,cr),ct=ct+Math.imul(Cr,nr)|0,St=Math.imul(Cr,cr),Et=Et+Math.imul(yr,_r)|0,ct=ct+Math.imul(yr,xr)|0,ct=ct+Math.imul(hr,_r)|0,St=St+Math.imul(hr,xr)|0,Et=Et+Math.imul(ur,Tr)|0,ct=ct+Math.imul(ur,Ur)|0,ct=ct+Math.imul(pr,Tr)|0,St=St+Math.imul(pr,Ur)|0,Et=Et+Math.imul(Vt,Ir)|0,ct=ct+Math.imul(Vt,Nr)|0,ct=ct+Math.imul(fr,Ir)|0,St=St+Math.imul(fr,Nr)|0,Et=Et+Math.imul(ir,br)|0,ct=ct+Math.imul(ir,Dr)|0,ct=ct+Math.imul(sr,br)|0,St=St+Math.imul(sr,Dr)|0,Et=Et+Math.imul(Ht,Mr)|0,ct=ct+Math.imul(Ht,qr)|0,ct=ct+Math.imul(Ft,Mr)|0,St=St+Math.imul(Ft,qr)|0,Et=Et+Math.imul(Lt,Br)|0,ct=ct+Math.imul(Lt,Hr)|0,ct=ct+Math.imul(Ut,Br)|0,St=St+Math.imul(Ut,Hr)|0;var vn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(vn>>>26)|0,vn&=67108863,Et=Math.imul(Er,nr),ct=Math.imul(Er,cr),ct=ct+Math.imul(Ar,nr)|0,St=Math.imul(Ar,cr),Et=Et+Math.imul($r,_r)|0,ct=ct+Math.imul($r,xr)|0,ct=ct+Math.imul(Cr,_r)|0,St=St+Math.imul(Cr,xr)|0,Et=Et+Math.imul(yr,Tr)|0,ct=ct+Math.imul(yr,Ur)|0,ct=ct+Math.imul(hr,Tr)|0,St=St+Math.imul(hr,Ur)|0,Et=Et+Math.imul(ur,Ir)|0,ct=ct+Math.imul(ur,Nr)|0,ct=ct+Math.imul(pr,Ir)|0,St=St+Math.imul(pr,Nr)|0,Et=Et+Math.imul(Vt,br)|0,ct=ct+Math.imul(Vt,Dr)|0,ct=ct+Math.imul(fr,br)|0,St=St+Math.imul(fr,Dr)|0,Et=Et+Math.imul(ir,Mr)|0,ct=ct+Math.imul(ir,qr)|0,ct=ct+Math.imul(sr,Mr)|0,St=St+Math.imul(sr,qr)|0,Et=Et+Math.imul(Ht,Br)|0,ct=ct+Math.imul(Ht,Hr)|0,ct=ct+Math.imul(Ft,Br)|0,St=St+Math.imul(Ft,Hr)|0,Et=Et+Math.imul(Lt,Qt)|0,ct=ct+Math.imul(Lt,Jt)|0,ct=ct+Math.imul(Ut,Qt)|0,St=St+Math.imul(Ut,Jt)|0;var _n=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(_n>>>26)|0,_n&=67108863,Et=Math.imul(Or,nr),ct=Math.imul(Or,cr),ct=ct+Math.imul(Lr,nr)|0,St=Math.imul(Lr,cr),Et=Et+Math.imul(Er,_r)|0,ct=ct+Math.imul(Er,xr)|0,ct=ct+Math.imul(Ar,_r)|0,St=St+Math.imul(Ar,xr)|0,Et=Et+Math.imul($r,Tr)|0,ct=ct+Math.imul($r,Ur)|0,ct=ct+Math.imul(Cr,Tr)|0,St=St+Math.imul(Cr,Ur)|0,Et=Et+Math.imul(yr,Ir)|0,ct=ct+Math.imul(yr,Nr)|0,ct=ct+Math.imul(hr,Ir)|0,St=St+Math.imul(hr,Nr)|0,Et=Et+Math.imul(ur,br)|0,ct=ct+Math.imul(ur,Dr)|0,ct=ct+Math.imul(pr,br)|0,St=St+Math.imul(pr,Dr)|0,Et=Et+Math.imul(Vt,Mr)|0,ct=ct+Math.imul(Vt,qr)|0,ct=ct+Math.imul(fr,Mr)|0,St=St+Math.imul(fr,qr)|0,Et=Et+Math.imul(ir,Br)|0,ct=ct+Math.imul(ir,Hr)|0,ct=ct+Math.imul(sr,Br)|0,St=St+Math.imul(sr,Hr)|0,Et=Et+Math.imul(Ht,Qt)|0,ct=ct+Math.imul(Ht,Jt)|0,ct=ct+Math.imul(Ft,Qt)|0,St=St+Math.imul(Ft,Jt)|0,Et=Et+Math.imul(Lt,rr)|0,ct=ct+Math.imul(Lt,dr)|0,ct=ct+Math.imul(Ut,rr)|0,St=St+Math.imul(Ut,dr)|0;var fn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(fn>>>26)|0,fn&=67108863,Et=Math.imul(Xt,nr),ct=Math.imul(Xt,cr),ct=ct+Math.imul(Bt,nr)|0,St=Math.imul(Bt,cr),Et=Et+Math.imul(Or,_r)|0,ct=ct+Math.imul(Or,xr)|0,ct=ct+Math.imul(Lr,_r)|0,St=St+Math.imul(Lr,xr)|0,Et=Et+Math.imul(Er,Tr)|0,ct=ct+Math.imul(Er,Ur)|0,ct=ct+Math.imul(Ar,Tr)|0,St=St+Math.imul(Ar,Ur)|0,Et=Et+Math.imul($r,Ir)|0,ct=ct+Math.imul($r,Nr)|0,ct=ct+Math.imul(Cr,Ir)|0,St=St+Math.imul(Cr,Nr)|0,Et=Et+Math.imul(yr,br)|0,ct=ct+Math.imul(yr,Dr)|0,ct=ct+Math.imul(hr,br)|0,St=St+Math.imul(hr,Dr)|0,Et=Et+Math.imul(ur,Mr)|0,ct=ct+Math.imul(ur,qr)|0,ct=ct+Math.imul(pr,Mr)|0,St=St+Math.imul(pr,qr)|0,Et=Et+Math.imul(Vt,Br)|0,ct=ct+Math.imul(Vt,Hr)|0,ct=ct+Math.imul(fr,Br)|0,St=St+Math.imul(fr,Hr)|0,Et=Et+Math.imul(ir,Qt)|0,ct=ct+Math.imul(ir,Jt)|0,ct=ct+Math.imul(sr,Qt)|0,St=St+Math.imul(sr,Jt)|0,Et=Et+Math.imul(Ht,rr)|0,ct=ct+Math.imul(Ht,dr)|0,ct=ct+Math.imul(Ft,rr)|0,St=St+Math.imul(Ft,dr)|0,Et=Et+Math.imul(Lt,vr)|0,ct=ct+Math.imul(Lt,wr)|0,ct=ct+Math.imul(Ut,vr)|0,St=St+Math.imul(Ut,wr)|0;var hn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(hn>>>26)|0,hn&=67108863,Et=Math.imul(Xt,_r),ct=Math.imul(Xt,xr),ct=ct+Math.imul(Bt,_r)|0,St=Math.imul(Bt,xr),Et=Et+Math.imul(Or,Tr)|0,ct=ct+Math.imul(Or,Ur)|0,ct=ct+Math.imul(Lr,Tr)|0,St=St+Math.imul(Lr,Ur)|0,Et=Et+Math.imul(Er,Ir)|0,ct=ct+Math.imul(Er,Nr)|0,ct=ct+Math.imul(Ar,Ir)|0,St=St+Math.imul(Ar,Nr)|0,Et=Et+Math.imul($r,br)|0,ct=ct+Math.imul($r,Dr)|0,ct=ct+Math.imul(Cr,br)|0,St=St+Math.imul(Cr,Dr)|0,Et=Et+Math.imul(yr,Mr)|0,ct=ct+Math.imul(yr,qr)|0,ct=ct+Math.imul(hr,Mr)|0,St=St+Math.imul(hr,qr)|0,Et=Et+Math.imul(ur,Br)|0,ct=ct+Math.imul(ur,Hr)|0,ct=ct+Math.imul(pr,Br)|0,St=St+Math.imul(pr,Hr)|0,Et=Et+Math.imul(Vt,Qt)|0,ct=ct+Math.imul(Vt,Jt)|0,ct=ct+Math.imul(fr,Qt)|0,St=St+Math.imul(fr,Jt)|0,Et=Et+Math.imul(ir,rr)|0,ct=ct+Math.imul(ir,dr)|0,ct=ct+Math.imul(sr,rr)|0,St=St+Math.imul(sr,dr)|0,Et=Et+Math.imul(Ht,vr)|0,ct=ct+Math.imul(Ht,wr)|0,ct=ct+Math.imul(Ft,vr)|0,St=St+Math.imul(Ft,wr)|0;var dn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(dn>>>26)|0,dn&=67108863,Et=Math.imul(Xt,Tr),ct=Math.imul(Xt,Ur),ct=ct+Math.imul(Bt,Tr)|0,St=Math.imul(Bt,Ur),Et=Et+Math.imul(Or,Ir)|0,ct=ct+Math.imul(Or,Nr)|0,ct=ct+Math.imul(Lr,Ir)|0,St=St+Math.imul(Lr,Nr)|0,Et=Et+Math.imul(Er,br)|0,ct=ct+Math.imul(Er,Dr)|0,ct=ct+Math.imul(Ar,br)|0,St=St+Math.imul(Ar,Dr)|0,Et=Et+Math.imul($r,Mr)|0,ct=ct+Math.imul($r,qr)|0,ct=ct+Math.imul(Cr,Mr)|0,St=St+Math.imul(Cr,qr)|0,Et=Et+Math.imul(yr,Br)|0,ct=ct+Math.imul(yr,Hr)|0,ct=ct+Math.imul(hr,Br)|0,St=St+Math.imul(hr,Hr)|0,Et=Et+Math.imul(ur,Qt)|0,ct=ct+Math.imul(ur,Jt)|0,ct=ct+Math.imul(pr,Qt)|0,St=St+Math.imul(pr,Jt)|0,Et=Et+Math.imul(Vt,rr)|0,ct=ct+Math.imul(Vt,dr)|0,ct=ct+Math.imul(fr,rr)|0,St=St+Math.imul(fr,dr)|0,Et=Et+Math.imul(ir,vr)|0,ct=ct+Math.imul(ir,wr)|0,ct=ct+Math.imul(sr,vr)|0,St=St+Math.imul(sr,wr)|0;var tn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(tn>>>26)|0,tn&=67108863,Et=Math.imul(Xt,Ir),ct=Math.imul(Xt,Nr),ct=ct+Math.imul(Bt,Ir)|0,St=Math.imul(Bt,Nr),Et=Et+Math.imul(Or,br)|0,ct=ct+Math.imul(Or,Dr)|0,ct=ct+Math.imul(Lr,br)|0,St=St+Math.imul(Lr,Dr)|0,Et=Et+Math.imul(Er,Mr)|0,ct=ct+Math.imul(Er,qr)|0,ct=ct+Math.imul(Ar,Mr)|0,St=St+Math.imul(Ar,qr)|0,Et=Et+Math.imul($r,Br)|0,ct=ct+Math.imul($r,Hr)|0,ct=ct+Math.imul(Cr,Br)|0,St=St+Math.imul(Cr,Hr)|0,Et=Et+Math.imul(yr,Qt)|0,ct=ct+Math.imul(yr,Jt)|0,ct=ct+Math.imul(hr,Qt)|0,St=St+Math.imul(hr,Jt)|0,Et=Et+Math.imul(ur,rr)|0,ct=ct+Math.imul(ur,dr)|0,ct=ct+Math.imul(pr,rr)|0,St=St+Math.imul(pr,dr)|0,Et=Et+Math.imul(Vt,vr)|0,ct=ct+Math.imul(Vt,wr)|0,ct=ct+Math.imul(fr,vr)|0,St=St+Math.imul(fr,wr)|0;var sn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(sn>>>26)|0,sn&=67108863,Et=Math.imul(Xt,br),ct=Math.imul(Xt,Dr),ct=ct+Math.imul(Bt,br)|0,St=Math.imul(Bt,Dr),Et=Et+Math.imul(Or,Mr)|0,ct=ct+Math.imul(Or,qr)|0,ct=ct+Math.imul(Lr,Mr)|0,St=St+Math.imul(Lr,qr)|0,Et=Et+Math.imul(Er,Br)|0,ct=ct+Math.imul(Er,Hr)|0,ct=ct+Math.imul(Ar,Br)|0,St=St+Math.imul(Ar,Hr)|0,Et=Et+Math.imul($r,Qt)|0,ct=ct+Math.imul($r,Jt)|0,ct=ct+Math.imul(Cr,Qt)|0,St=St+Math.imul(Cr,Jt)|0,Et=Et+Math.imul(yr,rr)|0,ct=ct+Math.imul(yr,dr)|0,ct=ct+Math.imul(hr,rr)|0,St=St+Math.imul(hr,dr)|0,Et=Et+Math.imul(ur,vr)|0,ct=ct+Math.imul(ur,wr)|0,ct=ct+Math.imul(pr,vr)|0,St=St+Math.imul(pr,wr)|0;var Qr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,Et=Math.imul(Xt,Mr),ct=Math.imul(Xt,qr),ct=ct+Math.imul(Bt,Mr)|0,St=Math.imul(Bt,qr),Et=Et+Math.imul(Or,Br)|0,ct=ct+Math.imul(Or,Hr)|0,ct=ct+Math.imul(Lr,Br)|0,St=St+Math.imul(Lr,Hr)|0,Et=Et+Math.imul(Er,Qt)|0,ct=ct+Math.imul(Er,Jt)|0,ct=ct+Math.imul(Ar,Qt)|0,St=St+Math.imul(Ar,Jt)|0,Et=Et+Math.imul($r,rr)|0,ct=ct+Math.imul($r,dr)|0,ct=ct+Math.imul(Cr,rr)|0,St=St+Math.imul(Cr,dr)|0,Et=Et+Math.imul(yr,vr)|0,ct=ct+Math.imul(yr,wr)|0,ct=ct+Math.imul(hr,vr)|0,St=St+Math.imul(hr,wr)|0;var rn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(rn>>>26)|0,rn&=67108863,Et=Math.imul(Xt,Br),ct=Math.imul(Xt,Hr),ct=ct+Math.imul(Bt,Br)|0,St=Math.imul(Bt,Hr),Et=Et+Math.imul(Or,Qt)|0,ct=ct+Math.imul(Or,Jt)|0,ct=ct+Math.imul(Lr,Qt)|0,St=St+Math.imul(Lr,Jt)|0,Et=Et+Math.imul(Er,rr)|0,ct=ct+Math.imul(Er,dr)|0,ct=ct+Math.imul(Ar,rr)|0,St=St+Math.imul(Ar,dr)|0,Et=Et+Math.imul($r,vr)|0,ct=ct+Math.imul($r,wr)|0,ct=ct+Math.imul(Cr,vr)|0,St=St+Math.imul(Cr,wr)|0;var nn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(nn>>>26)|0,nn&=67108863,Et=Math.imul(Xt,Qt),ct=Math.imul(Xt,Jt),ct=ct+Math.imul(Bt,Qt)|0,St=Math.imul(Bt,Jt),Et=Et+Math.imul(Or,rr)|0,ct=ct+Math.imul(Or,dr)|0,ct=ct+Math.imul(Lr,rr)|0,St=St+Math.imul(Lr,dr)|0,Et=Et+Math.imul(Er,vr)|0,ct=ct+Math.imul(Er,wr)|0,ct=ct+Math.imul(Ar,vr)|0,St=St+Math.imul(Ar,wr)|0;var Xr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,Et=Math.imul(Xt,rr),ct=Math.imul(Xt,dr),ct=ct+Math.imul(Bt,rr)|0,St=Math.imul(Bt,dr),Et=Et+Math.imul(Or,vr)|0,ct=ct+Math.imul(Or,wr)|0,ct=ct+Math.imul(Lr,vr)|0,St=St+Math.imul(Lr,wr)|0;var kr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(kr>>>26)|0,kr&=67108863,Et=Math.imul(Xt,vr),ct=Math.imul(Xt,wr),ct=ct+Math.imul(Bt,vr)|0,St=Math.imul(Bt,wr);var Pr=($t+Et|0)+((ct&8191)<<13)|0;return $t=(St+(ct>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,bt[0]=Yr,bt[1]=jr,bt[2]=mn,bt[3]=Jr,bt[4]=cn,bt[5]=ln,bt[6]=vn,bt[7]=_n,bt[8]=fn,bt[9]=hn,bt[10]=dn,bt[11]=tn,bt[12]=sn,bt[13]=Qr,bt[14]=rn,bt[15]=nn,bt[16]=Xr,bt[17]=kr,bt[18]=Pr,$t!==0&&(bt[19]=$t,ht.length++),ht};Math.imul||(Nt=xt);function Ct(It,ot,ft){ft.negative=ot.negative^It.negative,ft.length=It.length+ot.length;for(var ht=0,vt=0,wt=0;wt<ft.length-1;wt++){var bt=vt;vt=0;for(var $t=ht&67108863,Et=Math.min(wt,ot.length-1),ct=Math.max(0,wt-It.length+1);ct<=Et;ct++){var St=wt-ct,Mt=It.words[St]|0,Lt=ot.words[ct]|0,Ut=Mt*Lt,Kt=Ut&67108863;bt=bt+(Ut/67108864|0)|0,Kt=Kt+$t|0,$t=Kt&67108863,bt=bt+(Kt>>>26)|0,vt+=bt>>>26,bt&=67108863}ft.words[wt]=$t,ht=bt,bt=vt}return ht!==0?ft.words[wt]=ht:ft.length--,ft.strip()}function Ot(It,ot,ft){var ht=new kt;return ht.mulp(It,ot,ft)}it.prototype.mulTo=function(ot,ft){var ht,vt=this.length+ot.length;return this.length===10&&ot.length===10?ht=Nt(this,ot,ft):vt<63?ht=xt(this,ot,ft):vt<1024?ht=Ct(this,ot,ft):ht=Ot(this,ot,ft),ht};function kt(It,ot){this.x=It,this.y=ot}kt.prototype.makeRBT=function(ot){for(var ft=new Array(ot),ht=it.prototype._countBits(ot)-1,vt=0;vt<ot;vt++)ft[vt]=this.revBin(vt,ht,ot);return ft},kt.prototype.revBin=function(ot,ft,ht){if(ot===0||ot===ht-1)return ot;for(var vt=0,wt=0;wt<ft;wt++)vt|=(ot&1)<<ft-wt-1,ot>>=1;return vt},kt.prototype.permute=function(ot,ft,ht,vt,wt,bt){for(var $t=0;$t<bt;$t++)vt[$t]=ft[ot[$t]],wt[$t]=ht[ot[$t]]},kt.prototype.transform=function(ot,ft,ht,vt,wt,bt){this.permute(bt,ot,ft,ht,vt,wt);for(var $t=1;$t<wt;$t<<=1)for(var Et=$t<<1,ct=Math.cos(2*Math.PI/Et),St=Math.sin(2*Math.PI/Et),Mt=0;Mt<wt;Mt+=Et)for(var Lt=ct,Ut=St,Kt=0;Kt<$t;Kt++){var Ht=ht[Mt+Kt],Ft=vt[Mt+Kt],zt=ht[Mt+Kt+$t],ir=vt[Mt+Kt+$t],sr=Lt*zt-Ut*ir;ir=Lt*ir+Ut*zt,zt=sr,ht[Mt+Kt]=Ht+zt,vt[Mt+Kt]=Ft+ir,ht[Mt+Kt+$t]=Ht-zt,vt[Mt+Kt+$t]=Ft-ir,Kt!==Et&&(sr=ct*Lt-St*Ut,Ut=ct*Ut+St*Lt,Lt=sr)}},kt.prototype.guessLen13b=function(ot,ft){var ht=Math.max(ft,ot)|1,vt=ht&1,wt=0;for(ht=ht/2|0;ht;ht=ht>>>1)wt++;return 1<<wt+1+vt},kt.prototype.conjugate=function(ot,ft,ht){if(!(ht<=1))for(var vt=0;vt<ht/2;vt++){var wt=ot[vt];ot[vt]=ot[ht-vt-1],ot[ht-vt-1]=wt,wt=ft[vt],ft[vt]=-ft[ht-vt-1],ft[ht-vt-1]=-wt}},kt.prototype.normalize13b=function(ot,ft){for(var ht=0,vt=0;vt<ft/2;vt++){var wt=Math.round(ot[2*vt+1]/ft)*8192+Math.round(ot[2*vt]/ft)+ht;ot[vt]=wt&67108863,wt<67108864?ht=0:ht=wt/67108864|0}return ot},kt.prototype.convert13b=function(ot,ft,ht,vt){for(var wt=0,bt=0;bt<ft;bt++)wt=wt+(ot[bt]|0),ht[2*bt]=wt&8191,wt=wt>>>13,ht[2*bt+1]=wt&8191,wt=wt>>>13;for(bt=2*ft;bt<vt;++bt)ht[bt]=0;nt(wt===0),nt((wt&-8192)===0)},kt.prototype.stub=function(ot){for(var ft=new Array(ot),ht=0;ht<ot;ht++)ft[ht]=0;return ft},kt.prototype.mulp=function(ot,ft,ht){var vt=2*this.guessLen13b(ot.length,ft.length),wt=this.makeRBT(vt),bt=this.stub(vt),$t=new Array(vt),Et=new Array(vt),ct=new Array(vt),St=new Array(vt),Mt=new Array(vt),Lt=new Array(vt),Ut=ht.words;Ut.length=vt,this.convert13b(ot.words,ot.length,$t,vt),this.convert13b(ft.words,ft.length,St,vt),this.transform($t,bt,Et,ct,vt,wt),this.transform(St,bt,Mt,Lt,vt,wt);for(var Kt=0;Kt<vt;Kt++){var Ht=Et[Kt]*Mt[Kt]-ct[Kt]*Lt[Kt];ct[Kt]=Et[Kt]*Lt[Kt]+ct[Kt]*Mt[Kt],Et[Kt]=Ht}return this.conjugate(Et,ct,vt),this.transform(Et,ct,Ut,bt,vt,wt),this.conjugate(Ut,bt,vt),this.normalize13b(Ut,vt),ht.negative=ot.negative^ft.negative,ht.length=ot.length+ft.length,ht.strip()},it.prototype.mul=function(ot){var ft=new it(null);return ft.words=new Array(this.length+ot.length),this.mulTo(ot,ft)},it.prototype.mulf=function(ot){var ft=new it(null);return ft.words=new Array(this.length+ot.length),Ot(this,ot,ft)},it.prototype.imul=function(ot){return this.clone().mulTo(ot,this)},it.prototype.imuln=function(ot){nt(typeof ot=="number"),nt(ot<67108864);for(var ft=0,ht=0;ht<this.length;ht++){var vt=(this.words[ht]|0)*ot,wt=(vt&67108863)+(ft&67108863);ft>>=26,ft+=vt/67108864|0,ft+=wt>>>26,this.words[ht]=wt&67108863}return ft!==0&&(this.words[ht]=ft,this.length++),this},it.prototype.muln=function(ot){return this.clone().imuln(ot)},it.prototype.sqr=function(){return this.mul(this)},it.prototype.isqr=function(){return this.imul(this.clone())},it.prototype.pow=function(ot){var ft=At(ot);if(ft.length===0)return new it(1);for(var ht=this,vt=0;vt<ft.length&&ft[vt]===0;vt++,ht=ht.sqr());if(++vt<ft.length)for(var wt=ht.sqr();vt<ft.length;vt++,wt=wt.sqr())ft[vt]!==0&&(ht=ht.mul(wt));return ht},it.prototype.iushln=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26,vt=67108863>>>26-ft<<26-ft,wt;if(ft!==0){var bt=0;for(wt=0;wt<this.length;wt++){var $t=this.words[wt]&vt,Et=(this.words[wt]|0)-$t<<ft;this.words[wt]=Et|bt,bt=$t>>>26-ft}bt&&(this.words[wt]=bt,this.length++)}if(ht!==0){for(wt=this.length-1;wt>=0;wt--)this.words[wt+ht]=this.words[wt];for(wt=0;wt<ht;wt++)this.words[wt]=0;this.length+=ht}return this.strip()},it.prototype.ishln=function(ot){return nt(this.negative===0),this.iushln(ot)},it.prototype.iushrn=function(ot,ft,ht){nt(typeof ot=="number"&&ot>=0);var vt;ft?vt=(ft-ft%26)/26:vt=0;var wt=ot%26,bt=Math.min((ot-wt)/26,this.length),$t=67108863^67108863>>>wt<<wt,Et=ht;if(vt-=bt,vt=Math.max(0,vt),Et){for(var ct=0;ct<bt;ct++)Et.words[ct]=this.words[ct];Et.length=bt}if(bt!==0)if(this.length>bt)for(this.length-=bt,ct=0;ct<this.length;ct++)this.words[ct]=this.words[ct+bt];else this.words[0]=0,this.length=1;var St=0;for(ct=this.length-1;ct>=0&&(St!==0||ct>=vt);ct--){var Mt=this.words[ct]|0;this.words[ct]=St<<26-wt|Mt>>>wt,St=Mt&$t}return Et&&St!==0&&(Et.words[Et.length++]=St),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},it.prototype.ishrn=function(ot,ft,ht){return nt(this.negative===0),this.iushrn(ot,ft,ht)},it.prototype.shln=function(ot){return this.clone().ishln(ot)},it.prototype.ushln=function(ot){return this.clone().iushln(ot)},it.prototype.shrn=function(ot){return this.clone().ishrn(ot)},it.prototype.ushrn=function(ot){return this.clone().iushrn(ot)},it.prototype.testn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26,vt=1<<ft;if(this.length<=ht)return!1;var wt=this.words[ht];return!!(wt&vt)},it.prototype.imaskn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26;if(nt(this.negative===0,"imaskn works only with positive numbers"),this.length<=ht)return this;if(ft!==0&&ht++,this.length=Math.min(ht,this.length),ft!==0){var vt=67108863^67108863>>>ft<<ft;this.words[this.length-1]&=vt}return this.strip()},it.prototype.maskn=function(ot){return this.clone().imaskn(ot)},it.prototype.iaddn=function(ot){return nt(typeof ot=="number"),nt(ot<67108864),ot<0?this.isubn(-ot):this.negative!==0?this.length===1&&(this.words[0]|0)<ot?(this.words[0]=ot-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ot),this.negative=1,this):this._iaddn(ot)},it.prototype._iaddn=function(ot){this.words[0]+=ot;for(var ft=0;ft<this.length&&this.words[ft]>=67108864;ft++)this.words[ft]-=67108864,ft===this.length-1?this.words[ft+1]=1:this.words[ft+1]++;return this.length=Math.max(this.length,ft+1),this},it.prototype.isubn=function(ot){if(nt(typeof ot=="number"),nt(ot<67108864),ot<0)return this.iaddn(-ot);if(this.negative!==0)return this.negative=0,this.iaddn(ot),this.negative=1,this;if(this.words[0]-=ot,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var ft=0;ft<this.length&&this.words[ft]<0;ft++)this.words[ft]+=67108864,this.words[ft+1]-=1;return this.strip()},it.prototype.addn=function(ot){return this.clone().iaddn(ot)},it.prototype.subn=function(ot){return this.clone().isubn(ot)},it.prototype.iabs=function(){return this.negative=0,this},it.prototype.abs=function(){return this.clone().iabs()},it.prototype._ishlnsubmul=function(ot,ft,ht){var vt=ot.length+ht,wt;this._expand(vt);var bt,$t=0;for(wt=0;wt<ot.length;wt++){bt=(this.words[wt+ht]|0)+$t;var Et=(ot.words[wt]|0)*ft;bt-=Et&67108863,$t=(bt>>26)-(Et/67108864|0),this.words[wt+ht]=bt&67108863}for(;wt<this.length-ht;wt++)bt=(this.words[wt+ht]|0)+$t,$t=bt>>26,this.words[wt+ht]=bt&67108863;if($t===0)return this.strip();for(nt($t===-1),$t=0,wt=0;wt<this.length;wt++)bt=-(this.words[wt]|0)+$t,$t=bt>>26,this.words[wt]=bt&67108863;return this.negative=1,this.strip()},it.prototype._wordDiv=function(ot,ft){var ht=this.length-ot.length,vt=this.clone(),wt=ot,bt=wt.words[wt.length-1]|0,$t=this._countBits(bt);ht=26-$t,ht!==0&&(wt=wt.ushln(ht),vt.iushln(ht),bt=wt.words[wt.length-1]|0);var Et=vt.length-wt.length,ct;if(ft!=="mod"){ct=new it(null),ct.length=Et+1,ct.words=new Array(ct.length);for(var St=0;St<ct.length;St++)ct.words[St]=0}var Mt=vt.clone()._ishlnsubmul(wt,1,Et);Mt.negative===0&&(vt=Mt,ct&&(ct.words[Et]=1));for(var Lt=Et-1;Lt>=0;Lt--){var Ut=(vt.words[wt.length+Lt]|0)*67108864+(vt.words[wt.length+Lt-1]|0);for(Ut=Math.min(Ut/bt|0,67108863),vt._ishlnsubmul(wt,Ut,Lt);vt.negative!==0;)Ut--,vt.negative=0,vt._ishlnsubmul(wt,1,Lt),vt.isZero()||(vt.negative^=1);ct&&(ct.words[Lt]=Ut)}return ct&&ct.strip(),vt.strip(),ft!=="div"&&ht!==0&&vt.iushrn(ht),{div:ct||null,mod:vt}},it.prototype.divmod=function(ot,ft,ht){if(nt(!ot.isZero()),this.isZero())return{div:new it(0),mod:new it(0)};var vt,wt,bt;return this.negative!==0&&ot.negative===0?(bt=this.neg().divmod(ot,ft),ft!=="mod"&&(vt=bt.div.neg()),ft!=="div"&&(wt=bt.mod.neg(),ht&&wt.negative!==0&&wt.iadd(ot)),{div:vt,mod:wt}):this.negative===0&&ot.negative!==0?(bt=this.divmod(ot.neg(),ft),ft!=="mod"&&(vt=bt.div.neg()),{div:vt,mod:bt.mod}):this.negative&ot.negative?(bt=this.neg().divmod(ot.neg(),ft),ft!=="div"&&(wt=bt.mod.neg(),ht&&wt.negative!==0&&wt.isub(ot)),{div:bt.div,mod:wt}):ot.length>this.length||this.cmp(ot)<0?{div:new it(0),mod:this}:ot.length===1?ft==="div"?{div:this.divn(ot.words[0]),mod:null}:ft==="mod"?{div:null,mod:new it(this.modn(ot.words[0]))}:{div:this.divn(ot.words[0]),mod:new it(this.modn(ot.words[0]))}:this._wordDiv(ot,ft)},it.prototype.div=function(ot){return this.divmod(ot,"div",!1).div},it.prototype.mod=function(ot){return this.divmod(ot,"mod",!1).mod},it.prototype.umod=function(ot){return this.divmod(ot,"mod",!0).mod},it.prototype.divRound=function(ot){var ft=this.divmod(ot);if(ft.mod.isZero())return ft.div;var ht=ft.div.negative!==0?ft.mod.isub(ot):ft.mod,vt=ot.ushrn(1),wt=ot.andln(1),bt=ht.cmp(vt);return bt<0||wt===1&&bt===0?ft.div:ft.div.negative!==0?ft.div.isubn(1):ft.div.iaddn(1)},it.prototype.modn=function(ot){nt(ot<=67108863);for(var ft=(1<<26)%ot,ht=0,vt=this.length-1;vt>=0;vt--)ht=(ft*ht+(this.words[vt]|0))%ot;return ht},it.prototype.idivn=function(ot){nt(ot<=67108863);for(var ft=0,ht=this.length-1;ht>=0;ht--){var vt=(this.words[ht]|0)+ft*67108864;this.words[ht]=vt/ot|0,ft=vt%ot}return this.strip()},it.prototype.divn=function(ot){return this.clone().idivn(ot)},it.prototype.egcd=function(ot){nt(ot.negative===0),nt(!ot.isZero());var ft=this,ht=ot.clone();ft.negative!==0?ft=ft.umod(ot):ft=ft.clone();for(var vt=new it(1),wt=new it(0),bt=new it(0),$t=new it(1),Et=0;ft.isEven()&&ht.isEven();)ft.iushrn(1),ht.iushrn(1),++Et;for(var ct=ht.clone(),St=ft.clone();!ft.isZero();){for(var Mt=0,Lt=1;!(ft.words[0]&Lt)&&Mt<26;++Mt,Lt<<=1);if(Mt>0)for(ft.iushrn(Mt);Mt-- >0;)(vt.isOdd()||wt.isOdd())&&(vt.iadd(ct),wt.isub(St)),vt.iushrn(1),wt.iushrn(1);for(var Ut=0,Kt=1;!(ht.words[0]&Kt)&&Ut<26;++Ut,Kt<<=1);if(Ut>0)for(ht.iushrn(Ut);Ut-- >0;)(bt.isOdd()||$t.isOdd())&&(bt.iadd(ct),$t.isub(St)),bt.iushrn(1),$t.iushrn(1);ft.cmp(ht)>=0?(ft.isub(ht),vt.isub(bt),wt.isub($t)):(ht.isub(ft),bt.isub(vt),$t.isub(wt))}return{a:bt,b:$t,gcd:ht.iushln(Et)}},it.prototype._invmp=function(ot){nt(ot.negative===0),nt(!ot.isZero());var ft=this,ht=ot.clone();ft.negative!==0?ft=ft.umod(ot):ft=ft.clone();for(var vt=new it(1),wt=new it(0),bt=ht.clone();ft.cmpn(1)>0&&ht.cmpn(1)>0;){for(var $t=0,Et=1;!(ft.words[0]&Et)&&$t<26;++$t,Et<<=1);if($t>0)for(ft.iushrn($t);$t-- >0;)vt.isOdd()&&vt.iadd(bt),vt.iushrn(1);for(var ct=0,St=1;!(ht.words[0]&St)&&ct<26;++ct,St<<=1);if(ct>0)for(ht.iushrn(ct);ct-- >0;)wt.isOdd()&&wt.iadd(bt),wt.iushrn(1);ft.cmp(ht)>=0?(ft.isub(ht),vt.isub(wt)):(ht.isub(ft),wt.isub(vt))}var Mt;return ft.cmpn(1)===0?Mt=vt:Mt=wt,Mt.cmpn(0)<0&&Mt.iadd(ot),Mt},it.prototype.gcd=function(ot){if(this.isZero())return ot.abs();if(ot.isZero())return this.abs();var ft=this.clone(),ht=ot.clone();ft.negative=0,ht.negative=0;for(var vt=0;ft.isEven()&&ht.isEven();vt++)ft.iushrn(1),ht.iushrn(1);do{for(;ft.isEven();)ft.iushrn(1);for(;ht.isEven();)ht.iushrn(1);var wt=ft.cmp(ht);if(wt<0){var bt=ft;ft=ht,ht=bt}else if(wt===0||ht.cmpn(1)===0)break;ft.isub(ht)}while(!0);return ht.iushln(vt)},it.prototype.invm=function(ot){return this.egcd(ot).a.umod(ot)},it.prototype.isEven=function(){return(this.words[0]&1)===0},it.prototype.isOdd=function(){return(this.words[0]&1)===1},it.prototype.andln=function(ot){return this.words[0]&ot},it.prototype.bincn=function(ot){nt(typeof ot=="number");var ft=ot%26,ht=(ot-ft)/26,vt=1<<ft;if(this.length<=ht)return this._expand(ht+1),this.words[ht]|=vt,this;for(var wt=vt,bt=ht;wt!==0&&bt<this.length;bt++){var $t=this.words[bt]|0;$t+=wt,wt=$t>>>26,$t&=67108863,this.words[bt]=$t}return wt!==0&&(this.words[bt]=wt,this.length++),this},it.prototype.isZero=function(){return this.length===1&&this.words[0]===0},it.prototype.cmpn=function(ot){var ft=ot<0;if(this.negative!==0&&!ft)return-1;if(this.negative===0&&ft)return 1;this.strip();var ht;if(this.length>1)ht=1;else{ft&&(ot=-ot),nt(ot<=67108863,"Number is too big");var vt=this.words[0]|0;ht=vt===ot?0:vt<ot?-1:1}return this.negative!==0?-ht|0:ht},it.prototype.cmp=function(ot){if(this.negative!==0&&ot.negative===0)return-1;if(this.negative===0&&ot.negative!==0)return 1;var ft=this.ucmp(ot);return this.negative!==0?-ft|0:ft},it.prototype.ucmp=function(ot){if(this.length>ot.length)return 1;if(this.length<ot.length)return-1;for(var ft=0,ht=this.length-1;ht>=0;ht--){var vt=this.words[ht]|0,wt=ot.words[ht]|0;if(vt!==wt){vt<wt?ft=-1:vt>wt&&(ft=1);break}}return ft},it.prototype.gtn=function(ot){return this.cmpn(ot)===1},it.prototype.gt=function(ot){return this.cmp(ot)===1},it.prototype.gten=function(ot){return this.cmpn(ot)>=0},it.prototype.gte=function(ot){return this.cmp(ot)>=0},it.prototype.ltn=function(ot){return this.cmpn(ot)===-1},it.prototype.lt=function(ot){return this.cmp(ot)===-1},it.prototype.lten=function(ot){return this.cmpn(ot)<=0},it.prototype.lte=function(ot){return this.cmp(ot)<=0},it.prototype.eqn=function(ot){return this.cmpn(ot)===0},it.prototype.eq=function(ot){return this.cmp(ot)===0},it.red=function(ot){return new er(ot)},it.prototype.toRed=function(ot){return nt(!this.red,"Already a number in reduction context"),nt(this.negative===0,"red works only with positives"),ot.convertTo(this)._forceRed(ot)},it.prototype.fromRed=function(){return nt(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},it.prototype._forceRed=function(ot){return this.red=ot,this},it.prototype.forceRed=function(ot){return nt(!this.red,"Already a number in reduction context"),this._forceRed(ot)},it.prototype.redAdd=function(ot){return nt(this.red,"redAdd works only with red numbers"),this.red.add(this,ot)},it.prototype.redIAdd=function(ot){return nt(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ot)},it.prototype.redSub=function(ot){return nt(this.red,"redSub works only with red numbers"),this.red.sub(this,ot)},it.prototype.redISub=function(ot){return nt(this.red,"redISub works only with red numbers"),this.red.isub(this,ot)},it.prototype.redShl=function(ot){return nt(this.red,"redShl works only with red numbers"),this.red.shl(this,ot)},it.prototype.redMul=function(ot){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ot),this.red.mul(this,ot)},it.prototype.redIMul=function(ot){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ot),this.red.imul(this,ot)},it.prototype.redSqr=function(){return nt(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},it.prototype.redISqr=function(){return nt(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},it.prototype.redSqrt=function(){return nt(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},it.prototype.redInvm=function(){return nt(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},it.prototype.redNeg=function(){return nt(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},it.prototype.redPow=function(ot){return nt(this.red&&!ot.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ot)};var Pt={k256:null,p224:null,p192:null,p25519:null};function Dt(It,ot){this.name=It,this.p=new it(ot,16),this.n=this.p.bitLength(),this.k=new it(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Dt.prototype._tmp=function(){var ot=new it(null);return ot.words=new Array(Math.ceil(this.n/13)),ot},Dt.prototype.ireduce=function(ot){var ft=ot,ht;do this.split(ft,this.tmp),ft=this.imulK(ft),ft=ft.iadd(this.tmp),ht=ft.bitLength();while(ht>this.n);var vt=ht<this.n?-1:ft.ucmp(this.p);return vt===0?(ft.words[0]=0,ft.length=1):vt>0?ft.isub(this.p):ft.strip!==void 0?ft.strip():ft._strip(),ft},Dt.prototype.split=function(ot,ft){ot.iushrn(this.n,0,ft)},Dt.prototype.imulK=function(ot){return ot.imul(this.k)};function Gt(){Dt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}at(Gt,Dt),Gt.prototype.split=function(ot,ft){for(var ht=4194303,vt=Math.min(ot.length,9),wt=0;wt<vt;wt++)ft.words[wt]=ot.words[wt];if(ft.length=vt,ot.length<=9){ot.words[0]=0,ot.length=1;return}var bt=ot.words[9];for(ft.words[ft.length++]=bt&ht,wt=10;wt<ot.length;wt++){var $t=ot.words[wt]|0;ot.words[wt-10]=($t&ht)<<4|bt>>>22,bt=$t}bt>>>=22,ot.words[wt-10]=bt,bt===0&&ot.length>10?ot.length-=10:ot.length-=9},Gt.prototype.imulK=function(ot){ot.words[ot.length]=0,ot.words[ot.length+1]=0,ot.length+=2;for(var ft=0,ht=0;ht<ot.length;ht++){var vt=ot.words[ht]|0;ft+=vt*977,ot.words[ht]=ft&67108863,ft=vt*64+(ft/67108864|0)}return ot.words[ot.length-1]===0&&(ot.length--,ot.words[ot.length-1]===0&&ot.length--),ot};function jt(){Dt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}at(jt,Dt);function Yt(){Dt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}at(Yt,Dt);function tr(){Dt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}at(tr,Dt),tr.prototype.imulK=function(ot){for(var ft=0,ht=0;ht<ot.length;ht++){var vt=(ot.words[ht]|0)*19+ft,wt=vt&67108863;vt>>>=26,ot.words[ht]=wt,ft=vt}return ft!==0&&(ot.words[ot.length++]=ft),ot},it._prime=function(ot){if(Pt[ot])return Pt[ot];var ft;if(ot==="k256")ft=new Gt;else if(ot==="p224")ft=new jt;else if(ot==="p192")ft=new Yt;else if(ot==="p25519")ft=new tr;else throw new Error("Unknown prime "+ot);return Pt[ot]=ft,ft};function er(It){if(typeof It=="string"){var ot=it._prime(It);this.m=ot.p,this.prime=ot}else nt(It.gtn(1),"modulus must be greater than 1"),this.m=It,this.prime=null}er.prototype._verify1=function(ot){nt(ot.negative===0,"red works only with positives"),nt(ot.red,"red works only with red numbers")},er.prototype._verify2=function(ot,ft){nt((ot.negative|ft.negative)===0,"red works only with positives"),nt(ot.red&&ot.red===ft.red,"red works only with red numbers")},er.prototype.imod=function(ot){return this.prime?this.prime.ireduce(ot)._forceRed(this):ot.umod(this.m)._forceRed(this)},er.prototype.neg=function(ot){return ot.isZero()?ot.clone():this.m.sub(ot)._forceRed(this)},er.prototype.add=function(ot,ft){this._verify2(ot,ft);var ht=ot.add(ft);return ht.cmp(this.m)>=0&&ht.isub(this.m),ht._forceRed(this)},er.prototype.iadd=function(ot,ft){this._verify2(ot,ft);var ht=ot.iadd(ft);return ht.cmp(this.m)>=0&&ht.isub(this.m),ht},er.prototype.sub=function(ot,ft){this._verify2(ot,ft);var ht=ot.sub(ft);return ht.cmpn(0)<0&&ht.iadd(this.m),ht._forceRed(this)},er.prototype.isub=function(ot,ft){this._verify2(ot,ft);var ht=ot.isub(ft);return ht.cmpn(0)<0&&ht.iadd(this.m),ht},er.prototype.shl=function(ot,ft){return this._verify1(ot),this.imod(ot.ushln(ft))},er.prototype.imul=function(ot,ft){return this._verify2(ot,ft),this.imod(ot.imul(ft))},er.prototype.mul=function(ot,ft){return this._verify2(ot,ft),this.imod(ot.mul(ft))},er.prototype.isqr=function(ot){return this.imul(ot,ot.clone())},er.prototype.sqr=function(ot){return this.mul(ot,ot)},er.prototype.sqrt=function(ot){if(ot.isZero())return ot.clone();var ft=this.m.andln(3);if(nt(ft%2===1),ft===3){var ht=this.m.add(new it(1)).iushrn(2);return this.pow(ot,ht)}for(var vt=this.m.subn(1),wt=0;!vt.isZero()&&vt.andln(1)===0;)wt++,vt.iushrn(1);nt(!vt.isZero());var bt=new it(1).toRed(this),$t=bt.redNeg(),Et=this.m.subn(1).iushrn(1),ct=this.m.bitLength();for(ct=new it(2*ct*ct).toRed(this);this.pow(ct,Et).cmp($t)!==0;)ct.redIAdd($t);for(var St=this.pow(ct,vt),Mt=this.pow(ot,vt.addn(1).iushrn(1)),Lt=this.pow(ot,vt),Ut=wt;Lt.cmp(bt)!==0;){for(var Kt=Lt,Ht=0;Kt.cmp(bt)!==0;Ht++)Kt=Kt.redSqr();nt(Ht<Ut);var Ft=this.pow(St,new it(1).iushln(Ut-Ht-1));Mt=Mt.redMul(Ft),St=Ft.redSqr(),Lt=Lt.redMul(St),Ut=Ht}return Mt},er.prototype.invm=function(ot){var ft=ot._invmp(this.m);return ft.negative!==0?(ft.negative=0,this.imod(ft).redNeg()):this.imod(ft)},er.prototype.pow=function(ot,ft){if(ft.isZero())return new it(1).toRed(this);if(ft.cmpn(1)===0)return ot.clone();var ht=4,vt=new Array(1<<ht);vt[0]=new it(1).toRed(this),vt[1]=ot;for(var wt=2;wt<vt.length;wt++)vt[wt]=this.mul(vt[wt-1],ot);var bt=vt[0],$t=0,Et=0,ct=ft.bitLength()%26;for(ct===0&&(ct=26),wt=ft.length-1;wt>=0;wt--){for(var St=ft.words[wt],Mt=ct-1;Mt>=0;Mt--){var Lt=St>>Mt&1;if(bt!==vt[0]&&(bt=this.sqr(bt)),Lt===0&&$t===0){Et=0;continue}$t<<=1,$t|=Lt,Et++,!(Et!==ht&&(wt!==0||Mt!==0))&&(bt=this.mul(bt,vt[$t]),Et=0,$t=0)}ct=26}return bt},er.prototype.convertTo=function(ot){var ft=ot.umod(this.m);return ft===ot?ft.clone():ft},er.prototype.convertFrom=function(ot){var ft=ot.clone();return ft.red=null,ft},it.mont=function(ot){return new lr(ot)};function lr(It){er.call(this,It),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new it(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}at(lr,er),lr.prototype.convertTo=function(ot){return this.imod(ot.ushln(this.shift))},lr.prototype.convertFrom=function(ot){var ft=this.imod(ot.mul(this.rinv));return ft.red=null,ft},lr.prototype.imul=function(ot,ft){if(ot.isZero()||ft.isZero())return ot.words[0]=0,ot.length=1,ot;var ht=ot.imul(ft),vt=ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),wt=ht.isub(vt).iushrn(this.shift),bt=wt;return wt.cmp(this.m)>=0?bt=wt.isub(this.m):wt.cmpn(0)<0&&(bt=wt.iadd(this.m)),bt._forceRed(this)},lr.prototype.mul=function(ot,ft){if(ot.isZero()||ft.isZero())return new it(0)._forceRed(this);var ht=ot.mul(ft),vt=ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),wt=ht.isub(vt).iushrn(this.shift),bt=wt;return wt.cmp(this.m)>=0?bt=wt.isub(this.m):wt.cmpn(0)<0&&(bt=wt.iadd(this.m)),bt._forceRed(this)},lr.prototype.invm=function(ot){var ft=this.imod(ot._invmp(this.m).mul(this.r2));return ft._forceRed(this)}})(tt,commonjsGlobal$1)}(bn$3)),bn$3.exports}var utils$1={},hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(tt){var et=tt;function rt(it,st){if(Array.isArray(it))return it.slice();if(!it)return[];var dt=[];if(typeof it!="string"){for(var pt=0;pt<it.length;pt++)dt[pt]=it[pt]|0;return dt}if(st==="hex"){it=it.replace(/[^a-z0-9]+/ig,""),it.length%2!==0&&(it="0"+it);for(var pt=0;pt<it.length;pt+=2)dt.push(parseInt(it[pt]+it[pt+1],16))}else for(var pt=0;pt<it.length;pt++){var mt=it.charCodeAt(pt),yt=mt>>8,Rt=mt&255;yt?dt.push(yt,Rt):dt.push(Rt)}return dt}et.toArray=rt;function nt(it){return it.length===1?"0"+it:it}et.zero2=nt;function at(it){for(var st="",dt=0;dt<it.length;dt++)st+=nt(it[dt].toString(16));return st}et.toHex=at,et.encode=function(st,dt){return dt==="hex"?at(st):st}}(utils$1)),utils$1}var hasRequiredUtils$1;function requireUtils$1(){return hasRequiredUtils$1||(hasRequiredUtils$1=1,function(tt){var et=tt,rt=requireBn$3(),nt=requireMinimalisticAssert(),at=requireUtils$2();et.assert=nt,et.toArray=at.toArray,et.zero2=at.zero2,et.toHex=at.toHex,et.encode=at.encode;function it(yt,Rt,Tt){var At=new Array(Math.max(yt.bitLength(),Tt)+1),xt;for(xt=0;xt<At.length;xt+=1)At[xt]=0;var Nt=1<<Rt+1,Ct=yt.clone();for(xt=0;xt<At.length;xt++){var Ot,kt=Ct.andln(Nt-1);Ct.isOdd()?(kt>(Nt>>1)-1?Ot=(Nt>>1)-kt:Ot=kt,Ct.isubn(Ot)):Ot=0,At[xt]=Ot,Ct.iushrn(1)}return At}et.getNAF=it;function st(yt,Rt){var Tt=[[],[]];yt=yt.clone(),Rt=Rt.clone();for(var At=0,xt=0,Nt;yt.cmpn(-At)>0||Rt.cmpn(-xt)>0;){var Ct=yt.andln(3)+At&3,Ot=Rt.andln(3)+xt&3;Ct===3&&(Ct=-1),Ot===3&&(Ot=-1);var kt;Ct&1?(Nt=yt.andln(7)+At&7,(Nt===3||Nt===5)&&Ot===2?kt=-Ct:kt=Ct):kt=0,Tt[0].push(kt);var Pt;Ot&1?(Nt=Rt.andln(7)+xt&7,(Nt===3||Nt===5)&&Ct===2?Pt=-Ot:Pt=Ot):Pt=0,Tt[1].push(Pt),2*At===kt+1&&(At=1-At),2*xt===Pt+1&&(xt=1-xt),yt.iushrn(1),Rt.iushrn(1)}return Tt}et.getJSF=st;function dt(yt,Rt,Tt){var At="_"+Rt;yt.prototype[Rt]=function(){return this[At]!==void 0?this[At]:this[At]=Tt.call(this)}}et.cachedProperty=dt;function pt(yt){return typeof yt=="string"?et.toArray(yt,"hex"):yt}et.parseBytes=pt;function mt(yt){return new rt(yt,"hex","le")}et.intFromLE=mt}(utils$2)),utils$2}var curve={},base$4,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$4;hasRequiredBase$1=1;var tt=requireBn$3(),et=requireUtils$1(),rt=et.getNAF,nt=et.getJSF,at=et.assert;function it(dt,pt){this.type=dt,this.p=new tt(pt.p,16),this.red=pt.prime?tt.red(pt.prime):tt.mont(this.p),this.zero=new tt(0).toRed(this.red),this.one=new tt(1).toRed(this.red),this.two=new tt(2).toRed(this.red),this.n=pt.n&&new tt(pt.n,16),this.g=pt.g&&this.pointFromJSON(pt.g,pt.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var mt=this.n&&this.p.div(this.n);!mt||mt.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$4=it,it.prototype.point=function(){throw new Error("Not implemented")},it.prototype.validate=function(){throw new Error("Not implemented")},it.prototype._fixedNafMul=function(pt,mt){at(pt.precomputed);var yt=pt._getDoubles(),Rt=rt(mt,1,this._bitLength),Tt=(1<<yt.step+1)-(yt.step%2===0?2:1);Tt/=3;var At=[],xt,Nt;for(xt=0;xt<Rt.length;xt+=yt.step){Nt=0;for(var Ct=xt+yt.step-1;Ct>=xt;Ct--)Nt=(Nt<<1)+Rt[Ct];At.push(Nt)}for(var Ot=this.jpoint(null,null,null),kt=this.jpoint(null,null,null),Pt=Tt;Pt>0;Pt--){for(xt=0;xt<At.length;xt++)Nt=At[xt],Nt===Pt?kt=kt.mixedAdd(yt.points[xt]):Nt===-Pt&&(kt=kt.mixedAdd(yt.points[xt].neg()));Ot=Ot.add(kt)}return Ot.toP()},it.prototype._wnafMul=function(pt,mt){var yt=4,Rt=pt._getNAFPoints(yt);yt=Rt.wnd;for(var Tt=Rt.points,At=rt(mt,yt,this._bitLength),xt=this.jpoint(null,null,null),Nt=At.length-1;Nt>=0;Nt--){for(var Ct=0;Nt>=0&&At[Nt]===0;Nt--)Ct++;if(Nt>=0&&Ct++,xt=xt.dblp(Ct),Nt<0)break;var Ot=At[Nt];at(Ot!==0),pt.type==="affine"?Ot>0?xt=xt.mixedAdd(Tt[Ot-1>>1]):xt=xt.mixedAdd(Tt[-Ot-1>>1].neg()):Ot>0?xt=xt.add(Tt[Ot-1>>1]):xt=xt.add(Tt[-Ot-1>>1].neg())}return pt.type==="affine"?xt.toP():xt},it.prototype._wnafMulAdd=function(pt,mt,yt,Rt,Tt){var At=this._wnafT1,xt=this._wnafT2,Nt=this._wnafT3,Ct=0,Ot,kt,Pt;for(Ot=0;Ot<Rt;Ot++){Pt=mt[Ot];var Dt=Pt._getNAFPoints(pt);At[Ot]=Dt.wnd,xt[Ot]=Dt.points}for(Ot=Rt-1;Ot>=1;Ot-=2){var Gt=Ot-1,jt=Ot;if(At[Gt]!==1||At[jt]!==1){Nt[Gt]=rt(yt[Gt],At[Gt],this._bitLength),Nt[jt]=rt(yt[jt],At[jt],this._bitLength),Ct=Math.max(Nt[Gt].length,Ct),Ct=Math.max(Nt[jt].length,Ct);continue}var Yt=[mt[Gt],null,null,mt[jt]];mt[Gt].y.cmp(mt[jt].y)===0?(Yt[1]=mt[Gt].add(mt[jt]),Yt[2]=mt[Gt].toJ().mixedAdd(mt[jt].neg())):mt[Gt].y.cmp(mt[jt].y.redNeg())===0?(Yt[1]=mt[Gt].toJ().mixedAdd(mt[jt]),Yt[2]=mt[Gt].add(mt[jt].neg())):(Yt[1]=mt[Gt].toJ().mixedAdd(mt[jt]),Yt[2]=mt[Gt].toJ().mixedAdd(mt[jt].neg()));var tr=[-3,-1,-5,-7,0,7,5,1,3],er=nt(yt[Gt],yt[jt]);for(Ct=Math.max(er[0].length,Ct),Nt[Gt]=new Array(Ct),Nt[jt]=new Array(Ct),kt=0;kt<Ct;kt++){var lr=er[0][kt]|0,It=er[1][kt]|0;Nt[Gt][kt]=tr[(lr+1)*3+(It+1)],Nt[jt][kt]=0,xt[Gt]=Yt}}var ot=this.jpoint(null,null,null),ft=this._wnafT4;for(Ot=Ct;Ot>=0;Ot--){for(var ht=0;Ot>=0;){var vt=!0;for(kt=0;kt<Rt;kt++)ft[kt]=Nt[kt][Ot]|0,ft[kt]!==0&&(vt=!1);if(!vt)break;ht++,Ot--}if(Ot>=0&&ht++,ot=ot.dblp(ht),Ot<0)break;for(kt=0;kt<Rt;kt++){var wt=ft[kt];wt!==0&&(wt>0?Pt=xt[kt][wt-1>>1]:wt<0&&(Pt=xt[kt][-wt-1>>1].neg()),Pt.type==="affine"?ot=ot.mixedAdd(Pt):ot=ot.add(Pt))}}for(Ot=0;Ot<Rt;Ot++)xt[Ot]=null;return Tt?ot:ot.toP()};function st(dt,pt){this.curve=dt,this.type=pt,this.precomputed=null}return it.BasePoint=st,st.prototype.eq=function(){throw new Error("Not implemented")},st.prototype.validate=function(){return this.curve.validate(this)},it.prototype.decodePoint=function(pt,mt){pt=et.toArray(pt,mt);var yt=this.p.byteLength();if((pt[0]===4||pt[0]===6||pt[0]===7)&&pt.length-1===2*yt){pt[0]===6?at(pt[pt.length-1]%2===0):pt[0]===7&&at(pt[pt.length-1]%2===1);var Rt=this.point(pt.slice(1,1+yt),pt.slice(1+yt,1+2*yt));return Rt}else if((pt[0]===2||pt[0]===3)&&pt.length-1===yt)return this.pointFromX(pt.slice(1,1+yt),pt[0]===3);throw new Error("Unknown point format")},st.prototype.encodeCompressed=function(pt){return this.encode(pt,!0)},st.prototype._encode=function(pt){var mt=this.curve.p.byteLength(),yt=this.getX().toArray("be",mt);return pt?[this.getY().isEven()?2:3].concat(yt):[4].concat(yt,this.getY().toArray("be",mt))},st.prototype.encode=function(pt,mt){return et.encode(this._encode(mt),pt)},st.prototype.precompute=function(pt){if(this.precomputed)return this;var mt={doubles:null,naf:null,beta:null};return mt.naf=this._getNAFPoints(8),mt.doubles=this._getDoubles(4,pt),mt.beta=this._getBeta(),this.precomputed=mt,this},st.prototype._hasDoubles=function(pt){if(!this.precomputed)return!1;var mt=this.precomputed.doubles;return mt?mt.points.length>=Math.ceil((pt.bitLength()+1)/mt.step):!1},st.prototype._getDoubles=function(pt,mt){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var yt=[this],Rt=this,Tt=0;Tt<mt;Tt+=pt){for(var At=0;At<pt;At++)Rt=Rt.dbl();yt.push(Rt)}return{step:pt,points:yt}},st.prototype._getNAFPoints=function(pt){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var mt=[this],yt=(1<<pt)-1,Rt=yt===1?null:this.dbl(),Tt=1;Tt<yt;Tt++)mt[Tt]=mt[Tt-1].add(Rt);return{wnd:pt,points:mt}},st.prototype._getBeta=function(){return null},st.prototype.dblp=function(pt){for(var mt=this,yt=0;yt<pt;yt++)mt=mt.dbl();return mt},base$4}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var tt=requireUtils$1(),et=requireBn$3(),rt=requireInherits_browser(),nt=requireBase$1(),at=tt.assert;function it(pt){nt.call(this,"short",pt),this.a=new et(pt.a,16).toRed(this.red),this.b=new et(pt.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(pt),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}rt(it,nt),short=it,it.prototype._getEndomorphism=function(mt){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var yt,Rt;if(mt.beta)yt=new et(mt.beta,16).toRed(this.red);else{var Tt=this._getEndoRoots(this.p);yt=Tt[0].cmp(Tt[1])<0?Tt[0]:Tt[1],yt=yt.toRed(this.red)}if(mt.lambda)Rt=new et(mt.lambda,16);else{var At=this._getEndoRoots(this.n);this.g.mul(At[0]).x.cmp(this.g.x.redMul(yt))===0?Rt=At[0]:(Rt=At[1],at(this.g.mul(Rt).x.cmp(this.g.x.redMul(yt))===0))}var xt;return mt.basis?xt=mt.basis.map(function(Nt){return{a:new et(Nt.a,16),b:new et(Nt.b,16)}}):xt=this._getEndoBasis(Rt),{beta:yt,lambda:Rt,basis:xt}}},it.prototype._getEndoRoots=function(mt){var yt=mt===this.p?this.red:et.mont(mt),Rt=new et(2).toRed(yt).redInvm(),Tt=Rt.redNeg(),At=new et(3).toRed(yt).redNeg().redSqrt().redMul(Rt),xt=Tt.redAdd(At).fromRed(),Nt=Tt.redSub(At).fromRed();return[xt,Nt]},it.prototype._getEndoBasis=function(mt){for(var yt=this.n.ushrn(Math.floor(this.n.bitLength()/2)),Rt=mt,Tt=this.n.clone(),At=new et(1),xt=new et(0),Nt=new et(0),Ct=new et(1),Ot,kt,Pt,Dt,Gt,jt,Yt,tr=0,er,lr;Rt.cmpn(0)!==0;){var It=Tt.div(Rt);er=Tt.sub(It.mul(Rt)),lr=Nt.sub(It.mul(At));var ot=Ct.sub(It.mul(xt));if(!Pt&&er.cmp(yt)<0)Ot=Yt.neg(),kt=At,Pt=er.neg(),Dt=lr;else if(Pt&&++tr===2)break;Yt=er,Tt=Rt,Rt=er,Nt=At,At=lr,Ct=xt,xt=ot}Gt=er.neg(),jt=lr;var ft=Pt.sqr().add(Dt.sqr()),ht=Gt.sqr().add(jt.sqr());return ht.cmp(ft)>=0&&(Gt=Ot,jt=kt),Pt.negative&&(Pt=Pt.neg(),Dt=Dt.neg()),Gt.negative&&(Gt=Gt.neg(),jt=jt.neg()),[{a:Pt,b:Dt},{a:Gt,b:jt}]},it.prototype._endoSplit=function(mt){var yt=this.endo.basis,Rt=yt[0],Tt=yt[1],At=Tt.b.mul(mt).divRound(this.n),xt=Rt.b.neg().mul(mt).divRound(this.n),Nt=At.mul(Rt.a),Ct=xt.mul(Tt.a),Ot=At.mul(Rt.b),kt=xt.mul(Tt.b),Pt=mt.sub(Nt).sub(Ct),Dt=Ot.add(kt).neg();return{k1:Pt,k2:Dt}},it.prototype.pointFromX=function(mt,yt){mt=new et(mt,16),mt.red||(mt=mt.toRed(this.red));var Rt=mt.redSqr().redMul(mt).redIAdd(mt.redMul(this.a)).redIAdd(this.b),Tt=Rt.redSqrt();if(Tt.redSqr().redSub(Rt).cmp(this.zero)!==0)throw new Error("invalid point");var At=Tt.fromRed().isOdd();return(yt&&!At||!yt&&At)&&(Tt=Tt.redNeg()),this.point(mt,Tt)},it.prototype.validate=function(mt){if(mt.inf)return!0;var yt=mt.x,Rt=mt.y,Tt=this.a.redMul(yt),At=yt.redSqr().redMul(yt).redIAdd(Tt).redIAdd(this.b);return Rt.redSqr().redISub(At).cmpn(0)===0},it.prototype._endoWnafMulAdd=function(mt,yt,Rt){for(var Tt=this._endoWnafT1,At=this._endoWnafT2,xt=0;xt<mt.length;xt++){var Nt=this._endoSplit(yt[xt]),Ct=mt[xt],Ot=Ct._getBeta();Nt.k1.negative&&(Nt.k1.ineg(),Ct=Ct.neg(!0)),Nt.k2.negative&&(Nt.k2.ineg(),Ot=Ot.neg(!0)),Tt[xt*2]=Ct,Tt[xt*2+1]=Ot,At[xt*2]=Nt.k1,At[xt*2+1]=Nt.k2}for(var kt=this._wnafMulAdd(1,Tt,At,xt*2,Rt),Pt=0;Pt<xt*2;Pt++)Tt[Pt]=null,At[Pt]=null;return kt};function st(pt,mt,yt,Rt){nt.BasePoint.call(this,pt,"affine"),mt===null&&yt===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new et(mt,16),this.y=new et(yt,16),Rt&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}rt(st,nt.BasePoint),it.prototype.point=function(mt,yt,Rt){return new st(this,mt,yt,Rt)},it.prototype.pointFromJSON=function(mt,yt){return st.fromJSON(this,mt,yt)},st.prototype._getBeta=function(){if(this.curve.endo){var mt=this.precomputed;if(mt&&mt.beta)return mt.beta;var yt=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(mt){var Rt=this.curve,Tt=function(At){return Rt.point(At.x.redMul(Rt.endo.beta),At.y)};mt.beta=yt,yt.precomputed={beta:null,naf:mt.naf&&{wnd:mt.naf.wnd,points:mt.naf.points.map(Tt)},doubles:mt.doubles&&{step:mt.doubles.step,points:mt.doubles.points.map(Tt)}}}return yt}},st.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},st.fromJSON=function(mt,yt,Rt){typeof yt=="string"&&(yt=JSON.parse(yt));var Tt=mt.point(yt[0],yt[1],Rt);if(!yt[2])return Tt;function At(Nt){return mt.point(Nt[0],Nt[1],Rt)}var xt=yt[2];return Tt.precomputed={beta:null,doubles:xt.doubles&&{step:xt.doubles.step,points:[Tt].concat(xt.doubles.points.map(At))},naf:xt.naf&&{wnd:xt.naf.wnd,points:[Tt].concat(xt.naf.points.map(At))}},Tt},st.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},st.prototype.isInfinity=function(){return this.inf},st.prototype.add=function(mt){if(this.inf)return mt;if(mt.inf)return this;if(this.eq(mt))return this.dbl();if(this.neg().eq(mt))return this.curve.point(null,null);if(this.x.cmp(mt.x)===0)return this.curve.point(null,null);var yt=this.y.redSub(mt.y);yt.cmpn(0)!==0&&(yt=yt.redMul(this.x.redSub(mt.x).redInvm()));var Rt=yt.redSqr().redISub(this.x).redISub(mt.x),Tt=yt.redMul(this.x.redSub(Rt)).redISub(this.y);return this.curve.point(Rt,Tt)},st.prototype.dbl=function(){if(this.inf)return this;var mt=this.y.redAdd(this.y);if(mt.cmpn(0)===0)return this.curve.point(null,null);var yt=this.curve.a,Rt=this.x.redSqr(),Tt=mt.redInvm(),At=Rt.redAdd(Rt).redIAdd(Rt).redIAdd(yt).redMul(Tt),xt=At.redSqr().redISub(this.x.redAdd(this.x)),Nt=At.redMul(this.x.redSub(xt)).redISub(this.y);return this.curve.point(xt,Nt)},st.prototype.getX=function(){return this.x.fromRed()},st.prototype.getY=function(){return this.y.fromRed()},st.prototype.mul=function(mt){return mt=new et(mt,16),this.isInfinity()?this:this._hasDoubles(mt)?this.curve._fixedNafMul(this,mt):this.curve.endo?this.curve._endoWnafMulAdd([this],[mt]):this.curve._wnafMul(this,mt)},st.prototype.mulAdd=function(mt,yt,Rt){var Tt=[this,yt],At=[mt,Rt];return this.curve.endo?this.curve._endoWnafMulAdd(Tt,At):this.curve._wnafMulAdd(1,Tt,At,2)},st.prototype.jmulAdd=function(mt,yt,Rt){var Tt=[this,yt],At=[mt,Rt];return this.curve.endo?this.curve._endoWnafMulAdd(Tt,At,!0):this.curve._wnafMulAdd(1,Tt,At,2,!0)},st.prototype.eq=function(mt){return this===mt||this.inf===mt.inf&&(this.inf||this.x.cmp(mt.x)===0&&this.y.cmp(mt.y)===0)},st.prototype.neg=function(mt){if(this.inf)return this;var yt=this.curve.point(this.x,this.y.redNeg());if(mt&&this.precomputed){var Rt=this.precomputed,Tt=function(At){return At.neg()};yt.precomputed={naf:Rt.naf&&{wnd:Rt.naf.wnd,points:Rt.naf.points.map(Tt)},doubles:Rt.doubles&&{step:Rt.doubles.step,points:Rt.doubles.points.map(Tt)}}}return yt},st.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var mt=this.curve.jpoint(this.x,this.y,this.curve.one);return mt};function dt(pt,mt,yt,Rt){nt.BasePoint.call(this,pt,"jacobian"),mt===null&&yt===null&&Rt===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new et(0)):(this.x=new et(mt,16),this.y=new et(yt,16),this.z=new et(Rt,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return rt(dt,nt.BasePoint),it.prototype.jpoint=function(mt,yt,Rt){return new dt(this,mt,yt,Rt)},dt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var mt=this.z.redInvm(),yt=mt.redSqr(),Rt=this.x.redMul(yt),Tt=this.y.redMul(yt).redMul(mt);return this.curve.point(Rt,Tt)},dt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},dt.prototype.add=function(mt){if(this.isInfinity())return mt;if(mt.isInfinity())return this;var yt=mt.z.redSqr(),Rt=this.z.redSqr(),Tt=this.x.redMul(yt),At=mt.x.redMul(Rt),xt=this.y.redMul(yt.redMul(mt.z)),Nt=mt.y.redMul(Rt.redMul(this.z)),Ct=Tt.redSub(At),Ot=xt.redSub(Nt);if(Ct.cmpn(0)===0)return Ot.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var kt=Ct.redSqr(),Pt=kt.redMul(Ct),Dt=Tt.redMul(kt),Gt=Ot.redSqr().redIAdd(Pt).redISub(Dt).redISub(Dt),jt=Ot.redMul(Dt.redISub(Gt)).redISub(xt.redMul(Pt)),Yt=this.z.redMul(mt.z).redMul(Ct);return this.curve.jpoint(Gt,jt,Yt)},dt.prototype.mixedAdd=function(mt){if(this.isInfinity())return mt.toJ();if(mt.isInfinity())return this;var yt=this.z.redSqr(),Rt=this.x,Tt=mt.x.redMul(yt),At=this.y,xt=mt.y.redMul(yt).redMul(this.z),Nt=Rt.redSub(Tt),Ct=At.redSub(xt);if(Nt.cmpn(0)===0)return Ct.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var Ot=Nt.redSqr(),kt=Ot.redMul(Nt),Pt=Rt.redMul(Ot),Dt=Ct.redSqr().redIAdd(kt).redISub(Pt).redISub(Pt),Gt=Ct.redMul(Pt.redISub(Dt)).redISub(At.redMul(kt)),jt=this.z.redMul(Nt);return this.curve.jpoint(Dt,Gt,jt)},dt.prototype.dblp=function(mt){if(mt===0)return this;if(this.isInfinity())return this;if(!mt)return this.dbl();var yt;if(this.curve.zeroA||this.curve.threeA){var Rt=this;for(yt=0;yt<mt;yt++)Rt=Rt.dbl();return Rt}var Tt=this.curve.a,At=this.curve.tinv,xt=this.x,Nt=this.y,Ct=this.z,Ot=Ct.redSqr().redSqr(),kt=Nt.redAdd(Nt);for(yt=0;yt<mt;yt++){var Pt=xt.redSqr(),Dt=kt.redSqr(),Gt=Dt.redSqr(),jt=Pt.redAdd(Pt).redIAdd(Pt).redIAdd(Tt.redMul(Ot)),Yt=xt.redMul(Dt),tr=jt.redSqr().redISub(Yt.redAdd(Yt)),er=Yt.redISub(tr),lr=jt.redMul(er);lr=lr.redIAdd(lr).redISub(Gt);var It=kt.redMul(Ct);yt+1<mt&&(Ot=Ot.redMul(Gt)),xt=tr,Ct=It,kt=lr}return this.curve.jpoint(xt,kt.redMul(At),Ct)},dt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},dt.prototype._zeroDbl=function(){var mt,yt,Rt;if(this.zOne){var Tt=this.x.redSqr(),At=this.y.redSqr(),xt=At.redSqr(),Nt=this.x.redAdd(At).redSqr().redISub(Tt).redISub(xt);Nt=Nt.redIAdd(Nt);var Ct=Tt.redAdd(Tt).redIAdd(Tt),Ot=Ct.redSqr().redISub(Nt).redISub(Nt),kt=xt.redIAdd(xt);kt=kt.redIAdd(kt),kt=kt.redIAdd(kt),mt=Ot,yt=Ct.redMul(Nt.redISub(Ot)).redISub(kt),Rt=this.y.redAdd(this.y)}else{var Pt=this.x.redSqr(),Dt=this.y.redSqr(),Gt=Dt.redSqr(),jt=this.x.redAdd(Dt).redSqr().redISub(Pt).redISub(Gt);jt=jt.redIAdd(jt);var Yt=Pt.redAdd(Pt).redIAdd(Pt),tr=Yt.redSqr(),er=Gt.redIAdd(Gt);er=er.redIAdd(er),er=er.redIAdd(er),mt=tr.redISub(jt).redISub(jt),yt=Yt.redMul(jt.redISub(mt)).redISub(er),Rt=this.y.redMul(this.z),Rt=Rt.redIAdd(Rt)}return this.curve.jpoint(mt,yt,Rt)},dt.prototype._threeDbl=function(){var mt,yt,Rt;if(this.zOne){var Tt=this.x.redSqr(),At=this.y.redSqr(),xt=At.redSqr(),Nt=this.x.redAdd(At).redSqr().redISub(Tt).redISub(xt);Nt=Nt.redIAdd(Nt);var Ct=Tt.redAdd(Tt).redIAdd(Tt).redIAdd(this.curve.a),Ot=Ct.redSqr().redISub(Nt).redISub(Nt);mt=Ot;var kt=xt.redIAdd(xt);kt=kt.redIAdd(kt),kt=kt.redIAdd(kt),yt=Ct.redMul(Nt.redISub(Ot)).redISub(kt),Rt=this.y.redAdd(this.y)}else{var Pt=this.z.redSqr(),Dt=this.y.redSqr(),Gt=this.x.redMul(Dt),jt=this.x.redSub(Pt).redMul(this.x.redAdd(Pt));jt=jt.redAdd(jt).redIAdd(jt);var Yt=Gt.redIAdd(Gt);Yt=Yt.redIAdd(Yt);var tr=Yt.redAdd(Yt);mt=jt.redSqr().redISub(tr),Rt=this.y.redAdd(this.z).redSqr().redISub(Dt).redISub(Pt);var er=Dt.redSqr();er=er.redIAdd(er),er=er.redIAdd(er),er=er.redIAdd(er),yt=jt.redMul(Yt.redISub(mt)).redISub(er)}return this.curve.jpoint(mt,yt,Rt)},dt.prototype._dbl=function(){var mt=this.curve.a,yt=this.x,Rt=this.y,Tt=this.z,At=Tt.redSqr().redSqr(),xt=yt.redSqr(),Nt=Rt.redSqr(),Ct=xt.redAdd(xt).redIAdd(xt).redIAdd(mt.redMul(At)),Ot=yt.redAdd(yt);Ot=Ot.redIAdd(Ot);var kt=Ot.redMul(Nt),Pt=Ct.redSqr().redISub(kt.redAdd(kt)),Dt=kt.redISub(Pt),Gt=Nt.redSqr();Gt=Gt.redIAdd(Gt),Gt=Gt.redIAdd(Gt),Gt=Gt.redIAdd(Gt);var jt=Ct.redMul(Dt).redISub(Gt),Yt=Rt.redAdd(Rt).redMul(Tt);return this.curve.jpoint(Pt,jt,Yt)},dt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var mt=this.x.redSqr(),yt=this.y.redSqr(),Rt=this.z.redSqr(),Tt=yt.redSqr(),At=mt.redAdd(mt).redIAdd(mt),xt=At.redSqr(),Nt=this.x.redAdd(yt).redSqr().redISub(mt).redISub(Tt);Nt=Nt.redIAdd(Nt),Nt=Nt.redAdd(Nt).redIAdd(Nt),Nt=Nt.redISub(xt);var Ct=Nt.redSqr(),Ot=Tt.redIAdd(Tt);Ot=Ot.redIAdd(Ot),Ot=Ot.redIAdd(Ot),Ot=Ot.redIAdd(Ot);var kt=At.redIAdd(Nt).redSqr().redISub(xt).redISub(Ct).redISub(Ot),Pt=yt.redMul(kt);Pt=Pt.redIAdd(Pt),Pt=Pt.redIAdd(Pt);var Dt=this.x.redMul(Ct).redISub(Pt);Dt=Dt.redIAdd(Dt),Dt=Dt.redIAdd(Dt);var Gt=this.y.redMul(kt.redMul(Ot.redISub(kt)).redISub(Nt.redMul(Ct)));Gt=Gt.redIAdd(Gt),Gt=Gt.redIAdd(Gt),Gt=Gt.redIAdd(Gt);var jt=this.z.redAdd(Nt).redSqr().redISub(Rt).redISub(Ct);return this.curve.jpoint(Dt,Gt,jt)},dt.prototype.mul=function(mt,yt){return mt=new et(mt,yt),this.curve._wnafMul(this,mt)},dt.prototype.eq=function(mt){if(mt.type==="affine")return this.eq(mt.toJ());if(this===mt)return!0;var yt=this.z.redSqr(),Rt=mt.z.redSqr();if(this.x.redMul(Rt).redISub(mt.x.redMul(yt)).cmpn(0)!==0)return!1;var Tt=yt.redMul(this.z),At=Rt.redMul(mt.z);return this.y.redMul(At).redISub(mt.y.redMul(Tt)).cmpn(0)===0},dt.prototype.eqXToP=function(mt){var yt=this.z.redSqr(),Rt=mt.toRed(this.curve.red).redMul(yt);if(this.x.cmp(Rt)===0)return!0;for(var Tt=mt.clone(),At=this.curve.redN.redMul(yt);;){if(Tt.iadd(this.curve.n),Tt.cmp(this.curve.p)>=0)return!1;if(Rt.redIAdd(At),this.x.cmp(Rt)===0)return!0}},dt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},dt.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var tt=requireBn$3(),et=requireInherits_browser(),rt=requireBase$1(),nt=requireUtils$1();function at(st){rt.call(this,"mont",st),this.a=new tt(st.a,16).toRed(this.red),this.b=new tt(st.b,16).toRed(this.red),this.i4=new tt(4).toRed(this.red).redInvm(),this.two=new tt(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}et(at,rt),mont=at,at.prototype.validate=function(dt){var pt=dt.normalize().x,mt=pt.redSqr(),yt=mt.redMul(pt).redAdd(mt.redMul(this.a)).redAdd(pt),Rt=yt.redSqrt();return Rt.redSqr().cmp(yt)===0};function it(st,dt,pt){rt.BasePoint.call(this,st,"projective"),dt===null&&pt===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new tt(dt,16),this.z=new tt(pt,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return et(it,rt.BasePoint),at.prototype.decodePoint=function(dt,pt){return this.point(nt.toArray(dt,pt),1)},at.prototype.point=function(dt,pt){return new it(this,dt,pt)},at.prototype.pointFromJSON=function(dt){return it.fromJSON(this,dt)},it.prototype.precompute=function(){},it.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},it.fromJSON=function(dt,pt){return new it(dt,pt[0],pt[1]||dt.one)},it.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},it.prototype.isInfinity=function(){return this.z.cmpn(0)===0},it.prototype.dbl=function(){var dt=this.x.redAdd(this.z),pt=dt.redSqr(),mt=this.x.redSub(this.z),yt=mt.redSqr(),Rt=pt.redSub(yt),Tt=pt.redMul(yt),At=Rt.redMul(yt.redAdd(this.curve.a24.redMul(Rt)));return this.curve.point(Tt,At)},it.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},it.prototype.diffAdd=function(dt,pt){var mt=this.x.redAdd(this.z),yt=this.x.redSub(this.z),Rt=dt.x.redAdd(dt.z),Tt=dt.x.redSub(dt.z),At=Tt.redMul(mt),xt=Rt.redMul(yt),Nt=pt.z.redMul(At.redAdd(xt).redSqr()),Ct=pt.x.redMul(At.redISub(xt).redSqr());return this.curve.point(Nt,Ct)},it.prototype.mul=function(dt){for(var pt=dt.clone(),mt=this,yt=this.curve.point(null,null),Rt=this,Tt=[];pt.cmpn(0)!==0;pt.iushrn(1))Tt.push(pt.andln(1));for(var At=Tt.length-1;At>=0;At--)Tt[At]===0?(mt=mt.diffAdd(yt,Rt),yt=yt.dbl()):(yt=mt.diffAdd(yt,Rt),mt=mt.dbl());return yt},it.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},it.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},it.prototype.eq=function(dt){return this.getX().cmp(dt.getX())===0},it.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},it.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var tt=requireUtils$1(),et=requireBn$3(),rt=requireInherits_browser(),nt=requireBase$1(),at=tt.assert;function it(dt){this.twisted=(dt.a|0)!==1,this.mOneA=this.twisted&&(dt.a|0)===-1,this.extended=this.mOneA,nt.call(this,"edwards",dt),this.a=new et(dt.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new et(dt.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new et(dt.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),at(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(dt.c|0)===1}rt(it,nt),edwards=it,it.prototype._mulA=function(pt){return this.mOneA?pt.redNeg():this.a.redMul(pt)},it.prototype._mulC=function(pt){return this.oneC?pt:this.c.redMul(pt)},it.prototype.jpoint=function(pt,mt,yt,Rt){return this.point(pt,mt,yt,Rt)},it.prototype.pointFromX=function(pt,mt){pt=new et(pt,16),pt.red||(pt=pt.toRed(this.red));var yt=pt.redSqr(),Rt=this.c2.redSub(this.a.redMul(yt)),Tt=this.one.redSub(this.c2.redMul(this.d).redMul(yt)),At=Rt.redMul(Tt.redInvm()),xt=At.redSqrt();if(xt.redSqr().redSub(At).cmp(this.zero)!==0)throw new Error("invalid point");var Nt=xt.fromRed().isOdd();return(mt&&!Nt||!mt&&Nt)&&(xt=xt.redNeg()),this.point(pt,xt)},it.prototype.pointFromY=function(pt,mt){pt=new et(pt,16),pt.red||(pt=pt.toRed(this.red));var yt=pt.redSqr(),Rt=yt.redSub(this.c2),Tt=yt.redMul(this.d).redMul(this.c2).redSub(this.a),At=Rt.redMul(Tt.redInvm());if(At.cmp(this.zero)===0){if(mt)throw new Error("invalid point");return this.point(this.zero,pt)}var xt=At.redSqrt();if(xt.redSqr().redSub(At).cmp(this.zero)!==0)throw new Error("invalid point");return xt.fromRed().isOdd()!==mt&&(xt=xt.redNeg()),this.point(xt,pt)},it.prototype.validate=function(pt){if(pt.isInfinity())return!0;pt.normalize();var mt=pt.x.redSqr(),yt=pt.y.redSqr(),Rt=mt.redMul(this.a).redAdd(yt),Tt=this.c2.redMul(this.one.redAdd(this.d.redMul(mt).redMul(yt)));return Rt.cmp(Tt)===0};function st(dt,pt,mt,yt,Rt){nt.BasePoint.call(this,dt,"projective"),pt===null&&mt===null&&yt===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new et(pt,16),this.y=new et(mt,16),this.z=yt?new et(yt,16):this.curve.one,this.t=Rt&&new et(Rt,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return rt(st,nt.BasePoint),it.prototype.pointFromJSON=function(pt){return st.fromJSON(this,pt)},it.prototype.point=function(pt,mt,yt,Rt){return new st(this,pt,mt,yt,Rt)},st.fromJSON=function(pt,mt){return new st(pt,mt[0],mt[1],mt[2])},st.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},st.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},st.prototype._extDbl=function(){var pt=this.x.redSqr(),mt=this.y.redSqr(),yt=this.z.redSqr();yt=yt.redIAdd(yt);var Rt=this.curve._mulA(pt),Tt=this.x.redAdd(this.y).redSqr().redISub(pt).redISub(mt),At=Rt.redAdd(mt),xt=At.redSub(yt),Nt=Rt.redSub(mt),Ct=Tt.redMul(xt),Ot=At.redMul(Nt),kt=Tt.redMul(Nt),Pt=xt.redMul(At);return this.curve.point(Ct,Ot,Pt,kt)},st.prototype._projDbl=function(){var pt=this.x.redAdd(this.y).redSqr(),mt=this.x.redSqr(),yt=this.y.redSqr(),Rt,Tt,At,xt,Nt,Ct;if(this.curve.twisted){xt=this.curve._mulA(mt);var Ot=xt.redAdd(yt);this.zOne?(Rt=pt.redSub(mt).redSub(yt).redMul(Ot.redSub(this.curve.two)),Tt=Ot.redMul(xt.redSub(yt)),At=Ot.redSqr().redSub(Ot).redSub(Ot)):(Nt=this.z.redSqr(),Ct=Ot.redSub(Nt).redISub(Nt),Rt=pt.redSub(mt).redISub(yt).redMul(Ct),Tt=Ot.redMul(xt.redSub(yt)),At=Ot.redMul(Ct))}else xt=mt.redAdd(yt),Nt=this.curve._mulC(this.z).redSqr(),Ct=xt.redSub(Nt).redSub(Nt),Rt=this.curve._mulC(pt.redISub(xt)).redMul(Ct),Tt=this.curve._mulC(xt).redMul(mt.redISub(yt)),At=xt.redMul(Ct);return this.curve.point(Rt,Tt,At)},st.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},st.prototype._extAdd=function(pt){var mt=this.y.redSub(this.x).redMul(pt.y.redSub(pt.x)),yt=this.y.redAdd(this.x).redMul(pt.y.redAdd(pt.x)),Rt=this.t.redMul(this.curve.dd).redMul(pt.t),Tt=this.z.redMul(pt.z.redAdd(pt.z)),At=yt.redSub(mt),xt=Tt.redSub(Rt),Nt=Tt.redAdd(Rt),Ct=yt.redAdd(mt),Ot=At.redMul(xt),kt=Nt.redMul(Ct),Pt=At.redMul(Ct),Dt=xt.redMul(Nt);return this.curve.point(Ot,kt,Dt,Pt)},st.prototype._projAdd=function(pt){var mt=this.z.redMul(pt.z),yt=mt.redSqr(),Rt=this.x.redMul(pt.x),Tt=this.y.redMul(pt.y),At=this.curve.d.redMul(Rt).redMul(Tt),xt=yt.redSub(At),Nt=yt.redAdd(At),Ct=this.x.redAdd(this.y).redMul(pt.x.redAdd(pt.y)).redISub(Rt).redISub(Tt),Ot=mt.redMul(xt).redMul(Ct),kt,Pt;return this.curve.twisted?(kt=mt.redMul(Nt).redMul(Tt.redSub(this.curve._mulA(Rt))),Pt=xt.redMul(Nt)):(kt=mt.redMul(Nt).redMul(Tt.redSub(Rt)),Pt=this.curve._mulC(xt).redMul(Nt)),this.curve.point(Ot,kt,Pt)},st.prototype.add=function(pt){return this.isInfinity()?pt:pt.isInfinity()?this:this.curve.extended?this._extAdd(pt):this._projAdd(pt)},st.prototype.mul=function(pt){return this._hasDoubles(pt)?this.curve._fixedNafMul(this,pt):this.curve._wnafMul(this,pt)},st.prototype.mulAdd=function(pt,mt,yt){return this.curve._wnafMulAdd(1,[this,mt],[pt,yt],2,!1)},st.prototype.jmulAdd=function(pt,mt,yt){return this.curve._wnafMulAdd(1,[this,mt],[pt,yt],2,!0)},st.prototype.normalize=function(){if(this.zOne)return this;var pt=this.z.redInvm();return this.x=this.x.redMul(pt),this.y=this.y.redMul(pt),this.t&&(this.t=this.t.redMul(pt)),this.z=this.curve.one,this.zOne=!0,this},st.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},st.prototype.getX=function(){return this.normalize(),this.x.fromRed()},st.prototype.getY=function(){return this.normalize(),this.y.fromRed()},st.prototype.eq=function(pt){return this===pt||this.getX().cmp(pt.getX())===0&&this.getY().cmp(pt.getY())===0},st.prototype.eqXToP=function(pt){var mt=pt.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(mt)===0)return!0;for(var yt=pt.clone(),Rt=this.curve.redN.redMul(this.z);;){if(yt.iadd(this.curve.n),yt.cmp(this.curve.p)>=0)return!1;if(mt.redIAdd(Rt),this.x.cmp(mt)===0)return!0}},st.prototype.toP=st.prototype.normalize,st.prototype.mixedAdd=st.prototype.add,edwards}var hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,function(tt){var et=tt;et.base=requireBase$1(),et.short=requireShort(),et.mont=requireMont(),et.edwards=requireEdwards()}(curve)),curve}var curves={},hash={},utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;var tt=requireMinimalisticAssert(),et=requireInherits_browser();utils.inherits=et;function rt(ot,ft){return(ot.charCodeAt(ft)&64512)!==55296||ft<0||ft+1>=ot.length?!1:(ot.charCodeAt(ft+1)&64512)===56320}function nt(ot,ft){if(Array.isArray(ot))return ot.slice();if(!ot)return[];var ht=[];if(typeof ot=="string")if(ft){if(ft==="hex")for(ot=ot.replace(/[^a-z0-9]+/ig,""),ot.length%2!==0&&(ot="0"+ot),wt=0;wt<ot.length;wt+=2)ht.push(parseInt(ot[wt]+ot[wt+1],16))}else for(var vt=0,wt=0;wt<ot.length;wt++){var bt=ot.charCodeAt(wt);bt<128?ht[vt++]=bt:bt<2048?(ht[vt++]=bt>>6|192,ht[vt++]=bt&63|128):rt(ot,wt)?(bt=65536+((bt&1023)<<10)+(ot.charCodeAt(++wt)&1023),ht[vt++]=bt>>18|240,ht[vt++]=bt>>12&63|128,ht[vt++]=bt>>6&63|128,ht[vt++]=bt&63|128):(ht[vt++]=bt>>12|224,ht[vt++]=bt>>6&63|128,ht[vt++]=bt&63|128)}else for(wt=0;wt<ot.length;wt++)ht[wt]=ot[wt]|0;return ht}utils.toArray=nt;function at(ot){for(var ft="",ht=0;ht<ot.length;ht++)ft+=dt(ot[ht].toString(16));return ft}utils.toHex=at;function it(ot){var ft=ot>>>24|ot>>>8&65280|ot<<8&16711680|(ot&255)<<24;return ft>>>0}utils.htonl=it;function st(ot,ft){for(var ht="",vt=0;vt<ot.length;vt++){var wt=ot[vt];ft==="little"&&(wt=it(wt)),ht+=pt(wt.toString(16))}return ht}utils.toHex32=st;function dt(ot){return ot.length===1?"0"+ot:ot}utils.zero2=dt;function pt(ot){return ot.length===7?"0"+ot:ot.length===6?"00"+ot:ot.length===5?"000"+ot:ot.length===4?"0000"+ot:ot.length===3?"00000"+ot:ot.length===2?"000000"+ot:ot.length===1?"0000000"+ot:ot}utils.zero8=pt;function mt(ot,ft,ht,vt){var wt=ht-ft;tt(wt%4===0);for(var bt=new Array(wt/4),$t=0,Et=ft;$t<bt.length;$t++,Et+=4){var ct;vt==="big"?ct=ot[Et]<<24|ot[Et+1]<<16|ot[Et+2]<<8|ot[Et+3]:ct=ot[Et+3]<<24|ot[Et+2]<<16|ot[Et+1]<<8|ot[Et],bt[$t]=ct>>>0}return bt}utils.join32=mt;function yt(ot,ft){for(var ht=new Array(ot.length*4),vt=0,wt=0;vt<ot.length;vt++,wt+=4){var bt=ot[vt];ft==="big"?(ht[wt]=bt>>>24,ht[wt+1]=bt>>>16&255,ht[wt+2]=bt>>>8&255,ht[wt+3]=bt&255):(ht[wt+3]=bt>>>24,ht[wt+2]=bt>>>16&255,ht[wt+1]=bt>>>8&255,ht[wt]=bt&255)}return ht}utils.split32=yt;function Rt(ot,ft){return ot>>>ft|ot<<32-ft}utils.rotr32=Rt;function Tt(ot,ft){return ot<<ft|ot>>>32-ft}utils.rotl32=Tt;function At(ot,ft){return ot+ft>>>0}utils.sum32=At;function xt(ot,ft,ht){return ot+ft+ht>>>0}utils.sum32_3=xt;function Nt(ot,ft,ht,vt){return ot+ft+ht+vt>>>0}utils.sum32_4=Nt;function Ct(ot,ft,ht,vt,wt){return ot+ft+ht+vt+wt>>>0}utils.sum32_5=Ct;function Ot(ot,ft,ht,vt){var wt=ot[ft],bt=ot[ft+1],$t=vt+bt>>>0,Et=($t<vt?1:0)+ht+wt;ot[ft]=Et>>>0,ot[ft+1]=$t}utils.sum64=Ot;function kt(ot,ft,ht,vt){var wt=ft+vt>>>0,bt=(wt<ft?1:0)+ot+ht;return bt>>>0}utils.sum64_hi=kt;function Pt(ot,ft,ht,vt){var wt=ft+vt;return wt>>>0}utils.sum64_lo=Pt;function Dt(ot,ft,ht,vt,wt,bt,$t,Et){var ct=0,St=ft;St=St+vt>>>0,ct+=St<ft?1:0,St=St+bt>>>0,ct+=St<bt?1:0,St=St+Et>>>0,ct+=St<Et?1:0;var Mt=ot+ht+wt+$t+ct;return Mt>>>0}utils.sum64_4_hi=Dt;function Gt(ot,ft,ht,vt,wt,bt,$t,Et){var ct=ft+vt+bt+Et;return ct>>>0}utils.sum64_4_lo=Gt;function jt(ot,ft,ht,vt,wt,bt,$t,Et,ct,St){var Mt=0,Lt=ft;Lt=Lt+vt>>>0,Mt+=Lt<ft?1:0,Lt=Lt+bt>>>0,Mt+=Lt<bt?1:0,Lt=Lt+Et>>>0,Mt+=Lt<Et?1:0,Lt=Lt+St>>>0,Mt+=Lt<St?1:0;var Ut=ot+ht+wt+$t+ct+Mt;return Ut>>>0}utils.sum64_5_hi=jt;function Yt(ot,ft,ht,vt,wt,bt,$t,Et,ct,St){var Mt=ft+vt+bt+Et+St;return Mt>>>0}utils.sum64_5_lo=Yt;function tr(ot,ft,ht){var vt=ft<<32-ht|ot>>>ht;return vt>>>0}utils.rotr64_hi=tr;function er(ot,ft,ht){var vt=ot<<32-ht|ft>>>ht;return vt>>>0}utils.rotr64_lo=er;function lr(ot,ft,ht){return ot>>>ht}utils.shr64_hi=lr;function It(ot,ft,ht){var vt=ot<<32-ht|ft>>>ht;return vt>>>0}return utils.shr64_lo=It,utils}var common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var tt=requireUtils(),et=requireMinimalisticAssert();function rt(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$1.BlockHash=rt,rt.prototype.update=function(at,it){if(at=tt.toArray(at,it),this.pending?this.pending=this.pending.concat(at):this.pending=at,this.pendingTotal+=at.length,this.pending.length>=this._delta8){at=this.pending;var st=at.length%this._delta8;this.pending=at.slice(at.length-st,at.length),this.pending.length===0&&(this.pending=null),at=tt.join32(at,0,at.length-st,this.endian);for(var dt=0;dt<at.length;dt+=this._delta32)this._update(at,dt,dt+this._delta32)}return this},rt.prototype.digest=function(at){return this.update(this._pad()),et(this.pending===null),this._digest(at)},rt.prototype._pad=function(){var at=this.pendingTotal,it=this._delta8,st=it-(at+this.padLength)%it,dt=new Array(st+this.padLength);dt[0]=128;for(var pt=1;pt<st;pt++)dt[pt]=0;if(at<<=3,this.endian==="big"){for(var mt=8;mt<this.padLength;mt++)dt[pt++]=0;dt[pt++]=0,dt[pt++]=0,dt[pt++]=0,dt[pt++]=0,dt[pt++]=at>>>24&255,dt[pt++]=at>>>16&255,dt[pt++]=at>>>8&255,dt[pt++]=at&255}else for(dt[pt++]=at&255,dt[pt++]=at>>>8&255,dt[pt++]=at>>>16&255,dt[pt++]=at>>>24&255,dt[pt++]=0,dt[pt++]=0,dt[pt++]=0,dt[pt++]=0,mt=8;mt<this.padLength;mt++)dt[pt++]=0;return dt},common$1}var sha={},common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var tt=requireUtils(),et=tt.rotr32;function rt(yt,Rt,Tt,At){if(yt===0)return nt(Rt,Tt,At);if(yt===1||yt===3)return it(Rt,Tt,At);if(yt===2)return at(Rt,Tt,At)}common.ft_1=rt;function nt(yt,Rt,Tt){return yt&Rt^~yt&Tt}common.ch32=nt;function at(yt,Rt,Tt){return yt&Rt^yt&Tt^Rt&Tt}common.maj32=at;function it(yt,Rt,Tt){return yt^Rt^Tt}common.p32=it;function st(yt){return et(yt,2)^et(yt,13)^et(yt,22)}common.s0_256=st;function dt(yt){return et(yt,6)^et(yt,11)^et(yt,25)}common.s1_256=dt;function pt(yt){return et(yt,7)^et(yt,18)^yt>>>3}common.g0_256=pt;function mt(yt){return et(yt,17)^et(yt,19)^yt>>>10}return common.g1_256=mt,common}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var tt=requireUtils(),et=requireCommon$1(),rt=requireCommon(),nt=tt.rotl32,at=tt.sum32,it=tt.sum32_5,st=rt.ft_1,dt=et.BlockHash,pt=[1518500249,1859775393,2400959708,3395469782];function mt(){if(!(this instanceof mt))return new mt;dt.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return tt.inherits(mt,dt),_1=mt,mt.blockSize=512,mt.outSize=160,mt.hmacStrength=80,mt.padLength=64,mt.prototype._update=function(Rt,Tt){for(var At=this.W,xt=0;xt<16;xt++)At[xt]=Rt[Tt+xt];for(;xt<At.length;xt++)At[xt]=nt(At[xt-3]^At[xt-8]^At[xt-14]^At[xt-16],1);var Nt=this.h[0],Ct=this.h[1],Ot=this.h[2],kt=this.h[3],Pt=this.h[4];for(xt=0;xt<At.length;xt++){var Dt=~~(xt/20),Gt=it(nt(Nt,5),st(Dt,Ct,Ot,kt),Pt,At[xt],pt[Dt]);Pt=kt,kt=Ot,Ot=nt(Ct,30),Ct=Nt,Nt=Gt}this.h[0]=at(this.h[0],Nt),this.h[1]=at(this.h[1],Ct),this.h[2]=at(this.h[2],Ot),this.h[3]=at(this.h[3],kt),this.h[4]=at(this.h[4],Pt)},mt.prototype._digest=function(Rt){return Rt==="hex"?tt.toHex32(this.h,"big"):tt.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var tt=requireUtils(),et=requireCommon$1(),rt=requireCommon(),nt=requireMinimalisticAssert(),at=tt.sum32,it=tt.sum32_4,st=tt.sum32_5,dt=rt.ch32,pt=rt.maj32,mt=rt.s0_256,yt=rt.s1_256,Rt=rt.g0_256,Tt=rt.g1_256,At=et.BlockHash,xt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Nt(){if(!(this instanceof Nt))return new Nt;At.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=xt,this.W=new Array(64)}return tt.inherits(Nt,At),_256=Nt,Nt.blockSize=512,Nt.outSize=256,Nt.hmacStrength=192,Nt.padLength=64,Nt.prototype._update=function(Ot,kt){for(var Pt=this.W,Dt=0;Dt<16;Dt++)Pt[Dt]=Ot[kt+Dt];for(;Dt<Pt.length;Dt++)Pt[Dt]=it(Tt(Pt[Dt-2]),Pt[Dt-7],Rt(Pt[Dt-15]),Pt[Dt-16]);var Gt=this.h[0],jt=this.h[1],Yt=this.h[2],tr=this.h[3],er=this.h[4],lr=this.h[5],It=this.h[6],ot=this.h[7];for(nt(this.k.length===Pt.length),Dt=0;Dt<Pt.length;Dt++){var ft=st(ot,yt(er),dt(er,lr,It),this.k[Dt],Pt[Dt]),ht=at(mt(Gt),pt(Gt,jt,Yt));ot=It,It=lr,lr=er,er=at(tr,ft),tr=Yt,Yt=jt,jt=Gt,Gt=at(ft,ht)}this.h[0]=at(this.h[0],Gt),this.h[1]=at(this.h[1],jt),this.h[2]=at(this.h[2],Yt),this.h[3]=at(this.h[3],tr),this.h[4]=at(this.h[4],er),this.h[5]=at(this.h[5],lr),this.h[6]=at(this.h[6],It),this.h[7]=at(this.h[7],ot)},Nt.prototype._digest=function(Ot){return Ot==="hex"?tt.toHex32(this.h,"big"):tt.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var tt=requireUtils(),et=require_256();function rt(){if(!(this instanceof rt))return new rt;et.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return tt.inherits(rt,et),_224=rt,rt.blockSize=512,rt.outSize=224,rt.hmacStrength=192,rt.padLength=64,rt.prototype._digest=function(at){return at==="hex"?tt.toHex32(this.h.slice(0,7),"big"):tt.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var tt=requireUtils(),et=requireCommon$1(),rt=requireMinimalisticAssert(),nt=tt.rotr64_hi,at=tt.rotr64_lo,it=tt.shr64_hi,st=tt.shr64_lo,dt=tt.sum64,pt=tt.sum64_hi,mt=tt.sum64_lo,yt=tt.sum64_4_hi,Rt=tt.sum64_4_lo,Tt=tt.sum64_5_hi,At=tt.sum64_5_lo,xt=et.BlockHash,Nt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ct(){if(!(this instanceof Ct))return new Ct;xt.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Nt,this.W=new Array(160)}tt.inherits(Ct,xt),_512=Ct,Ct.blockSize=1024,Ct.outSize=512,Ct.hmacStrength=192,Ct.padLength=128,Ct.prototype._prepareBlock=function(ht,vt){for(var wt=this.W,bt=0;bt<32;bt++)wt[bt]=ht[vt+bt];for(;bt<wt.length;bt+=2){var $t=It(wt[bt-4],wt[bt-3]),Et=ot(wt[bt-4],wt[bt-3]),ct=wt[bt-14],St=wt[bt-13],Mt=er(wt[bt-30],wt[bt-29]),Lt=lr(wt[bt-30],wt[bt-29]),Ut=wt[bt-32],Kt=wt[bt-31];wt[bt]=yt($t,Et,ct,St,Mt,Lt,Ut,Kt),wt[bt+1]=Rt($t,Et,ct,St,Mt,Lt,Ut,Kt)}},Ct.prototype._update=function(ht,vt){this._prepareBlock(ht,vt);var wt=this.W,bt=this.h[0],$t=this.h[1],Et=this.h[2],ct=this.h[3],St=this.h[4],Mt=this.h[5],Lt=this.h[6],Ut=this.h[7],Kt=this.h[8],Ht=this.h[9],Ft=this.h[10],zt=this.h[11],ir=this.h[12],sr=this.h[13],ar=this.h[14],Vt=this.h[15];rt(this.k.length===wt.length);for(var fr=0;fr<wt.length;fr+=2){var Gr=ar,ur=Vt,pr=Yt(Kt,Ht),Fr=tr(Kt,Ht),yr=Ot(Kt,Ht,Ft,zt,ir),hr=kt(Kt,Ht,Ft,zt,ir,sr),Wr=this.k[fr],$r=this.k[fr+1],Cr=wt[fr],an=wt[fr+1],Er=Tt(Gr,ur,pr,Fr,yr,hr,Wr,$r,Cr,an),Ar=At(Gr,ur,pr,Fr,yr,hr,Wr,$r,Cr,an);Gr=Gt(bt,$t),ur=jt(bt,$t),pr=Pt(bt,$t,Et,ct,St),Fr=Dt(bt,$t,Et,ct,St,Mt);var gn=pt(Gr,ur,pr,Fr),Or=mt(Gr,ur,pr,Fr);ar=ir,Vt=sr,ir=Ft,sr=zt,Ft=Kt,zt=Ht,Kt=pt(Lt,Ut,Er,Ar),Ht=mt(Ut,Ut,Er,Ar),Lt=St,Ut=Mt,St=Et,Mt=ct,Et=bt,ct=$t,bt=pt(Er,Ar,gn,Or),$t=mt(Er,Ar,gn,Or)}dt(this.h,0,bt,$t),dt(this.h,2,Et,ct),dt(this.h,4,St,Mt),dt(this.h,6,Lt,Ut),dt(this.h,8,Kt,Ht),dt(this.h,10,Ft,zt),dt(this.h,12,ir,sr),dt(this.h,14,ar,Vt)},Ct.prototype._digest=function(ht){return ht==="hex"?tt.toHex32(this.h,"big"):tt.split32(this.h,"big")};function Ot(ft,ht,vt,wt,bt){var $t=ft&vt^~ft&bt;return $t<0&&($t+=4294967296),$t}function kt(ft,ht,vt,wt,bt,$t){var Et=ht&wt^~ht&$t;return Et<0&&(Et+=4294967296),Et}function Pt(ft,ht,vt,wt,bt){var $t=ft&vt^ft&bt^vt&bt;return $t<0&&($t+=4294967296),$t}function Dt(ft,ht,vt,wt,bt,$t){var Et=ht&wt^ht&$t^wt&$t;return Et<0&&(Et+=4294967296),Et}function Gt(ft,ht){var vt=nt(ft,ht,28),wt=nt(ht,ft,2),bt=nt(ht,ft,7),$t=vt^wt^bt;return $t<0&&($t+=4294967296),$t}function jt(ft,ht){var vt=at(ft,ht,28),wt=at(ht,ft,2),bt=at(ht,ft,7),$t=vt^wt^bt;return $t<0&&($t+=4294967296),$t}function Yt(ft,ht){var vt=nt(ft,ht,14),wt=nt(ft,ht,18),bt=nt(ht,ft,9),$t=vt^wt^bt;return $t<0&&($t+=4294967296),$t}function tr(ft,ht){var vt=at(ft,ht,14),wt=at(ft,ht,18),bt=at(ht,ft,9),$t=vt^wt^bt;return $t<0&&($t+=4294967296),$t}function er(ft,ht){var vt=nt(ft,ht,1),wt=nt(ft,ht,8),bt=it(ft,ht,7),$t=vt^wt^bt;return $t<0&&($t+=4294967296),$t}function lr(ft,ht){var vt=at(ft,ht,1),wt=at(ft,ht,8),bt=st(ft,ht,7),$t=vt^wt^bt;return $t<0&&($t+=4294967296),$t}function It(ft,ht){var vt=nt(ft,ht,19),wt=nt(ht,ft,29),bt=it(ft,ht,6),$t=vt^wt^bt;return $t<0&&($t+=4294967296),$t}function ot(ft,ht){var vt=at(ft,ht,19),wt=at(ht,ft,29),bt=st(ft,ht,6),$t=vt^wt^bt;return $t<0&&($t+=4294967296),$t}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var tt=requireUtils(),et=require_512();function rt(){if(!(this instanceof rt))return new rt;et.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return tt.inherits(rt,et),_384=rt,rt.blockSize=1024,rt.outSize=384,rt.hmacStrength=192,rt.padLength=128,rt.prototype._digest=function(at){return at==="hex"?tt.toHex32(this.h.slice(0,12),"big"):tt.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var tt=requireUtils(),et=requireCommon$1(),rt=tt.rotl32,nt=tt.sum32,at=tt.sum32_3,it=tt.sum32_4,st=et.BlockHash;function dt(){if(!(this instanceof dt))return new dt;st.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}tt.inherits(dt,st),ripemd.ripemd160=dt,dt.blockSize=512,dt.outSize=160,dt.hmacStrength=192,dt.padLength=64,dt.prototype._update=function(Ct,Ot){for(var kt=this.h[0],Pt=this.h[1],Dt=this.h[2],Gt=this.h[3],jt=this.h[4],Yt=kt,tr=Pt,er=Dt,lr=Gt,It=jt,ot=0;ot<80;ot++){var ft=nt(rt(it(kt,pt(ot,Pt,Dt,Gt),Ct[Rt[ot]+Ot],mt(ot)),At[ot]),jt);kt=jt,jt=Gt,Gt=rt(Dt,10),Dt=Pt,Pt=ft,ft=nt(rt(it(Yt,pt(79-ot,tr,er,lr),Ct[Tt[ot]+Ot],yt(ot)),xt[ot]),It),Yt=It,It=lr,lr=rt(er,10),er=tr,tr=ft}ft=at(this.h[1],Dt,lr),this.h[1]=at(this.h[2],Gt,It),this.h[2]=at(this.h[3],jt,Yt),this.h[3]=at(this.h[4],kt,tr),this.h[4]=at(this.h[0],Pt,er),this.h[0]=ft},dt.prototype._digest=function(Ct){return Ct==="hex"?tt.toHex32(this.h,"little"):tt.split32(this.h,"little")};function pt(Nt,Ct,Ot,kt){return Nt<=15?Ct^Ot^kt:Nt<=31?Ct&Ot|~Ct&kt:Nt<=47?(Ct|~Ot)^kt:Nt<=63?Ct&kt|Ot&~kt:Ct^(Ot|~kt)}function mt(Nt){return Nt<=15?0:Nt<=31?1518500249:Nt<=47?1859775393:Nt<=63?2400959708:2840853838}function yt(Nt){return Nt<=15?1352829926:Nt<=31?1548603684:Nt<=47?1836072691:Nt<=63?2053994217:0}var Rt=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Tt=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],At=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],xt=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac,hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac;hasRequiredHmac=1;var tt=requireUtils(),et=requireMinimalisticAssert();function rt(nt,at,it){if(!(this instanceof rt))return new rt(nt,at,it);this.Hash=nt,this.blockSize=nt.blockSize/8,this.outSize=nt.outSize/8,this.inner=null,this.outer=null,this._init(tt.toArray(at,it))}return hmac=rt,rt.prototype._init=function(at){at.length>this.blockSize&&(at=new this.Hash().update(at).digest()),et(at.length<=this.blockSize);for(var it=at.length;it<this.blockSize;it++)at.push(0);for(it=0;it<at.length;it++)at[it]^=54;for(this.inner=new this.Hash().update(at),it=0;it<at.length;it++)at[it]^=106;this.outer=new this.Hash().update(at)},rt.prototype.update=function(at,it){return this.inner.update(at,it),this},rt.prototype.digest=function(at){return this.outer.update(this.inner.digest()),this.outer.digest(at)},hmac}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(tt){var et=tt;et.utils=requireUtils(),et.common=requireCommon$1(),et.sha=requireSha(),et.ripemd=requireRipemd(),et.hmac=requireHmac(),et.sha1=et.sha.sha1,et.sha256=et.sha.sha256,et.sha224=et.sha.sha224,et.sha384=et.sha.sha384,et.sha512=et.sha.sha512,et.ripemd160=et.ripemd.ripemd160}(hash)),hash}var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(tt){var et=tt,rt=requireHash(),nt=requireCurve(),at=requireUtils$1(),it=at.assert;function st(mt){mt.type==="short"?this.curve=new nt.short(mt):mt.type==="edwards"?this.curve=new nt.edwards(mt):this.curve=new nt.mont(mt),this.g=this.curve.g,this.n=this.curve.n,this.hash=mt.hash,it(this.g.validate(),"Invalid curve"),it(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}et.PresetCurve=st;function dt(mt,yt){Object.defineProperty(et,mt,{configurable:!0,enumerable:!0,get:function(){var Rt=new st(yt);return Object.defineProperty(et,mt,{configurable:!0,enumerable:!0,value:Rt}),Rt}})}dt("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:rt.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),dt("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:rt.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),dt("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:rt.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),dt("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:rt.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),dt("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:rt.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),dt("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:rt.sha256,gRed:!1,g:["9"]}),dt("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:rt.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var pt;try{pt=requireSecp256k1()}catch{pt=void 0}dt("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:rt.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",pt]})}(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var tt=requireHash(),et=requireUtils$2(),rt=requireMinimalisticAssert();function nt(at){if(!(this instanceof nt))return new nt(at);this.hash=at.hash,this.predResist=!!at.predResist,this.outLen=this.hash.outSize,this.minEntropy=at.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var it=et.toArray(at.entropy,at.entropyEnc||"hex"),st=et.toArray(at.nonce,at.nonceEnc||"hex"),dt=et.toArray(at.pers,at.persEnc||"hex");rt(it.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(it,st,dt)}return hmacDrbg=nt,nt.prototype._init=function(it,st,dt){var pt=it.concat(st).concat(dt);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var mt=0;mt<this.V.length;mt++)this.K[mt]=0,this.V[mt]=1;this._update(pt),this._reseed=1,this.reseedInterval=281474976710656},nt.prototype._hmac=function(){return new tt.hmac(this.hash,this.K)},nt.prototype._update=function(it){var st=this._hmac().update(this.V).update([0]);it&&(st=st.update(it)),this.K=st.digest(),this.V=this._hmac().update(this.V).digest(),it&&(this.K=this._hmac().update(this.V).update([1]).update(it).digest(),this.V=this._hmac().update(this.V).digest())},nt.prototype.reseed=function(it,st,dt,pt){typeof st!="string"&&(pt=dt,dt=st,st=null),it=et.toArray(it,st),dt=et.toArray(dt,pt),rt(it.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(it.concat(dt||[])),this._reseed=1},nt.prototype.generate=function(it,st,dt,pt){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof st!="string"&&(pt=dt,dt=st,st=null),dt&&(dt=et.toArray(dt,pt||"hex"),this._update(dt));for(var mt=[];mt.length<it;)this.V=this._hmac().update(this.V).digest(),mt=mt.concat(this.V);var yt=mt.slice(0,it);return this._update(dt),this._reseed++,et.encode(yt,st)},hmacDrbg}var key$1,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var tt=requireBn$3(),et=requireUtils$1(),rt=et.assert;function nt(at,it){this.ec=at,this.priv=null,this.pub=null,it.priv&&this._importPrivate(it.priv,it.privEnc),it.pub&&this._importPublic(it.pub,it.pubEnc)}return key$1=nt,nt.fromPublic=function(it,st,dt){return st instanceof nt?st:new nt(it,{pub:st,pubEnc:dt})},nt.fromPrivate=function(it,st,dt){return st instanceof nt?st:new nt(it,{priv:st,privEnc:dt})},nt.prototype.validate=function(){var it=this.getPublic();return it.isInfinity()?{result:!1,reason:"Invalid public key"}:it.validate()?it.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},nt.prototype.getPublic=function(it,st){return typeof it=="string"&&(st=it,it=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),st?this.pub.encode(st,it):this.pub},nt.prototype.getPrivate=function(it){return it==="hex"?this.priv.toString(16,2):this.priv},nt.prototype._importPrivate=function(it,st){this.priv=new tt(it,st||16),this.priv=this.priv.umod(this.ec.curve.n)},nt.prototype._importPublic=function(it,st){if(it.x||it.y){this.ec.curve.type==="mont"?rt(it.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&rt(it.x&&it.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(it.x,it.y);return}this.pub=this.ec.curve.decodePoint(it,st)},nt.prototype.derive=function(it){return it.validate()||rt(it.validate(),"public point not validated"),it.mul(this.priv).getX()},nt.prototype.sign=function(it,st,dt){return this.ec.sign(it,this,st,dt)},nt.prototype.verify=function(it,st){return this.ec.verify(it,st,this)},nt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$1}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var tt=requireBn$3(),et=requireUtils$1(),rt=et.assert;function nt(pt,mt){if(pt instanceof nt)return pt;this._importDER(pt,mt)||(rt(pt.r&&pt.s,"Signature without r or s"),this.r=new tt(pt.r,16),this.s=new tt(pt.s,16),pt.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=pt.recoveryParam)}signature$1=nt;function at(){this.place=0}function it(pt,mt){var yt=pt[mt.place++];if(!(yt&128))return yt;var Rt=yt&15;if(Rt===0||Rt>4)return!1;for(var Tt=0,At=0,xt=mt.place;At<Rt;At++,xt++)Tt<<=8,Tt|=pt[xt],Tt>>>=0;return Tt<=127?!1:(mt.place=xt,Tt)}function st(pt){for(var mt=0,yt=pt.length-1;!pt[mt]&&!(pt[mt+1]&128)&&mt<yt;)mt++;return mt===0?pt:pt.slice(mt)}nt.prototype._importDER=function(mt,yt){mt=et.toArray(mt,yt);var Rt=new at;if(mt[Rt.place++]!==48)return!1;var Tt=it(mt,Rt);if(Tt===!1||Tt+Rt.place!==mt.length||mt[Rt.place++]!==2)return!1;var At=it(mt,Rt);if(At===!1)return!1;var xt=mt.slice(Rt.place,At+Rt.place);if(Rt.place+=At,mt[Rt.place++]!==2)return!1;var Nt=it(mt,Rt);if(Nt===!1||mt.length!==Nt+Rt.place)return!1;var Ct=mt.slice(Rt.place,Nt+Rt.place);if(xt[0]===0)if(xt[1]&128)xt=xt.slice(1);else return!1;if(Ct[0]===0)if(Ct[1]&128)Ct=Ct.slice(1);else return!1;return this.r=new tt(xt),this.s=new tt(Ct),this.recoveryParam=null,!0};function dt(pt,mt){if(mt<128){pt.push(mt);return}var yt=1+(Math.log(mt)/Math.LN2>>>3);for(pt.push(yt|128);--yt;)pt.push(mt>>>(yt<<3)&255);pt.push(mt)}return nt.prototype.toDER=function(mt){var yt=this.r.toArray(),Rt=this.s.toArray();for(yt[0]&128&&(yt=[0].concat(yt)),Rt[0]&128&&(Rt=[0].concat(Rt)),yt=st(yt),Rt=st(Rt);!Rt[0]&&!(Rt[1]&128);)Rt=Rt.slice(1);var Tt=[2];dt(Tt,yt.length),Tt=Tt.concat(yt),Tt.push(2),dt(Tt,Rt.length);var At=Tt.concat(Rt),xt=[48];return dt(xt,At.length),xt=xt.concat(At),et.encode(xt,mt)},signature$1}var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var tt=requireBn$3(),et=requireHmacDrbg(),rt=requireUtils$1(),nt=requireCurves(),at=requireBrorand(),it=rt.assert,st=requireKey$1(),dt=requireSignature$1();function pt(mt){if(!(this instanceof pt))return new pt(mt);typeof mt=="string"&&(it(Object.prototype.hasOwnProperty.call(nt,mt),"Unknown curve "+mt),mt=nt[mt]),mt instanceof nt.PresetCurve&&(mt={curve:mt}),this.curve=mt.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=mt.curve.g,this.g.precompute(mt.curve.n.bitLength()+1),this.hash=mt.hash||mt.curve.hash}return ec=pt,pt.prototype.keyPair=function(yt){return new st(this,yt)},pt.prototype.keyFromPrivate=function(yt,Rt){return st.fromPrivate(this,yt,Rt)},pt.prototype.keyFromPublic=function(yt,Rt){return st.fromPublic(this,yt,Rt)},pt.prototype.genKeyPair=function(yt){yt||(yt={});for(var Rt=new et({hash:this.hash,pers:yt.pers,persEnc:yt.persEnc||"utf8",entropy:yt.entropy||at(this.hash.hmacStrength),entropyEnc:yt.entropy&&yt.entropyEnc||"utf8",nonce:this.n.toArray()}),Tt=this.n.byteLength(),At=this.n.sub(new tt(2));;){var xt=new tt(Rt.generate(Tt));if(!(xt.cmp(At)>0))return xt.iaddn(1),this.keyFromPrivate(xt)}},pt.prototype._truncateToN=function(yt,Rt){var Tt=yt.byteLength()*8-this.n.bitLength();return Tt>0&&(yt=yt.ushrn(Tt)),!Rt&&yt.cmp(this.n)>=0?yt.sub(this.n):yt},pt.prototype.sign=function(yt,Rt,Tt,At){typeof Tt=="object"&&(At=Tt,Tt=null),At||(At={}),Rt=this.keyFromPrivate(Rt,Tt),yt=this._truncateToN(new tt(yt,16));for(var xt=this.n.byteLength(),Nt=Rt.getPrivate().toArray("be",xt),Ct=yt.toArray("be",xt),Ot=new et({hash:this.hash,entropy:Nt,nonce:Ct,pers:At.pers,persEnc:At.persEnc||"utf8"}),kt=this.n.sub(new tt(1)),Pt=0;;Pt++){var Dt=At.k?At.k(Pt):new tt(Ot.generate(this.n.byteLength()));if(Dt=this._truncateToN(Dt,!0),!(Dt.cmpn(1)<=0||Dt.cmp(kt)>=0)){var Gt=this.g.mul(Dt);if(!Gt.isInfinity()){var jt=Gt.getX(),Yt=jt.umod(this.n);if(Yt.cmpn(0)!==0){var tr=Dt.invm(this.n).mul(Yt.mul(Rt.getPrivate()).iadd(yt));if(tr=tr.umod(this.n),tr.cmpn(0)!==0){var er=(Gt.getY().isOdd()?1:0)|(jt.cmp(Yt)!==0?2:0);return At.canonical&&tr.cmp(this.nh)>0&&(tr=this.n.sub(tr),er^=1),new dt({r:Yt,s:tr,recoveryParam:er})}}}}}},pt.prototype.verify=function(yt,Rt,Tt,At){yt=this._truncateToN(new tt(yt,16)),Tt=this.keyFromPublic(Tt,At),Rt=new dt(Rt,"hex");var xt=Rt.r,Nt=Rt.s;if(xt.cmpn(1)<0||xt.cmp(this.n)>=0||Nt.cmpn(1)<0||Nt.cmp(this.n)>=0)return!1;var Ct=Nt.invm(this.n),Ot=Ct.mul(yt).umod(this.n),kt=Ct.mul(xt).umod(this.n),Pt;return this.curve._maxwellTrick?(Pt=this.g.jmulAdd(Ot,Tt.getPublic(),kt),Pt.isInfinity()?!1:Pt.eqXToP(xt)):(Pt=this.g.mulAdd(Ot,Tt.getPublic(),kt),Pt.isInfinity()?!1:Pt.getX().umod(this.n).cmp(xt)===0)},pt.prototype.recoverPubKey=function(mt,yt,Rt,Tt){it((3&Rt)===Rt,"The recovery param is more than two bits"),yt=new dt(yt,Tt);var At=this.n,xt=new tt(mt),Nt=yt.r,Ct=yt.s,Ot=Rt&1,kt=Rt>>1;if(Nt.cmp(this.curve.p.umod(this.curve.n))>=0&&kt)throw new Error("Unable to find sencond key candinate");kt?Nt=this.curve.pointFromX(Nt.add(this.curve.n),Ot):Nt=this.curve.pointFromX(Nt,Ot);var Pt=yt.r.invm(At),Dt=At.sub(xt).mul(Pt).umod(At),Gt=Ct.mul(Pt).umod(At);return this.g.mulAdd(Dt,Nt,Gt)},pt.prototype.getKeyRecoveryParam=function(mt,yt,Rt,Tt){if(yt=new dt(yt,Tt),yt.recoveryParam!==null)return yt.recoveryParam;for(var At=0;At<4;At++){var xt;try{xt=this.recoverPubKey(mt,yt,At)}catch{continue}if(xt.eq(Rt))return At}throw new Error("Unable to find valid recovery factor")},ec}var key,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1;var tt=requireUtils$1(),et=tt.assert,rt=tt.parseBytes,nt=tt.cachedProperty;function at(it,st){this.eddsa=it,this._secret=rt(st.secret),it.isPoint(st.pub)?this._pub=st.pub:this._pubBytes=rt(st.pub)}return at.fromPublic=function(st,dt){return dt instanceof at?dt:new at(st,{pub:dt})},at.fromSecret=function(st,dt){return dt instanceof at?dt:new at(st,{secret:dt})},at.prototype.secret=function(){return this._secret},nt(at,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),nt(at,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),nt(at,"privBytes",function(){var st=this.eddsa,dt=this.hash(),pt=st.encodingLength-1,mt=dt.slice(0,st.encodingLength);return mt[0]&=248,mt[pt]&=127,mt[pt]|=64,mt}),nt(at,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),nt(at,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),nt(at,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),at.prototype.sign=function(st){return et(this._secret,"KeyPair can only verify"),this.eddsa.sign(st,this)},at.prototype.verify=function(st,dt){return this.eddsa.verify(st,dt,this)},at.prototype.getSecret=function(st){return et(this._secret,"KeyPair is public only"),tt.encode(this.secret(),st)},at.prototype.getPublic=function(st){return tt.encode(this.pubBytes(),st)},key=at,key}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var tt=requireBn$3(),et=requireUtils$1(),rt=et.assert,nt=et.cachedProperty,at=et.parseBytes;function it(st,dt){this.eddsa=st,typeof dt!="object"&&(dt=at(dt)),Array.isArray(dt)&&(dt={R:dt.slice(0,st.encodingLength),S:dt.slice(st.encodingLength)}),rt(dt.R&&dt.S,"Signature without R or S"),st.isPoint(dt.R)&&(this._R=dt.R),dt.S instanceof tt&&(this._S=dt.S),this._Rencoded=Array.isArray(dt.R)?dt.R:dt.Rencoded,this._Sencoded=Array.isArray(dt.S)?dt.S:dt.Sencoded}return nt(it,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),nt(it,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),nt(it,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),nt(it,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),it.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},it.prototype.toHex=function(){return et.encode(this.toBytes(),"hex").toUpperCase()},signature=it,signature}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var tt=requireHash(),et=requireCurves(),rt=requireUtils$1(),nt=rt.assert,at=rt.parseBytes,it=requireKey(),st=requireSignature();function dt(pt){if(nt(pt==="ed25519","only tested with ed25519 so far"),!(this instanceof dt))return new dt(pt);pt=et[pt].curve,this.curve=pt,this.g=pt.g,this.g.precompute(pt.n.bitLength()+1),this.pointClass=pt.point().constructor,this.encodingLength=Math.ceil(pt.n.bitLength()/8),this.hash=tt.sha512}return eddsa=dt,dt.prototype.sign=function(mt,yt){mt=at(mt);var Rt=this.keyFromSecret(yt),Tt=this.hashInt(Rt.messagePrefix(),mt),At=this.g.mul(Tt),xt=this.encodePoint(At),Nt=this.hashInt(xt,Rt.pubBytes(),mt).mul(Rt.priv()),Ct=Tt.add(Nt).umod(this.curve.n);return this.makeSignature({R:At,S:Ct,Rencoded:xt})},dt.prototype.verify=function(mt,yt,Rt){mt=at(mt),yt=this.makeSignature(yt);var Tt=this.keyFromPublic(Rt),At=this.hashInt(yt.Rencoded(),Tt.pubBytes(),mt),xt=this.g.mul(yt.S()),Nt=yt.R().add(Tt.pub().mul(At));return Nt.eq(xt)},dt.prototype.hashInt=function(){for(var mt=this.hash(),yt=0;yt<arguments.length;yt++)mt.update(arguments[yt]);return rt.intFromLE(mt.digest()).umod(this.curve.n)},dt.prototype.keyFromPublic=function(mt){return it.fromPublic(this,mt)},dt.prototype.keyFromSecret=function(mt){return it.fromSecret(this,mt)},dt.prototype.makeSignature=function(mt){return mt instanceof st?mt:new st(this,mt)},dt.prototype.encodePoint=function(mt){var yt=mt.getY().toArray("le",this.encodingLength);return yt[this.encodingLength-1]|=mt.getX().isOdd()?128:0,yt},dt.prototype.decodePoint=function(mt){mt=rt.parseBytes(mt);var yt=mt.length-1,Rt=mt.slice(0,yt).concat(mt[yt]&-129),Tt=(mt[yt]&128)!==0,At=rt.intFromLE(Rt);return this.curve.pointFromY(At,Tt)},dt.prototype.encodeInt=function(mt){return mt.toArray("le",this.encodingLength)},dt.prototype.decodeInt=function(mt){return rt.intFromLE(mt)},dt.prototype.isPoint=function(mt){return mt instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(tt){var et=tt;et.version=require$$0.version,et.utils=requireUtils$1(),et.rand=requireBrorand(),et.curve=requireCurve(),et.curves=requireCurves(),et.ec=requireEc(),et.eddsa=requireEddsa()}(elliptic)),elliptic}var asn1$1={},asn1={},bn$2={exports:{}};bn$2.exports;var hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,function(tt){(function(et,rt){function nt(It,ot){if(!It)throw new Error(ot||"Assertion failed")}function at(It,ot){It.super_=ot;var ft=function(){};ft.prototype=ot.prototype,It.prototype=new ft,It.prototype.constructor=It}function it(It,ot,ft){if(it.isBN(It))return It;this.negative=0,this.words=null,this.length=0,this.red=null,It!==null&&((ot==="le"||ot==="be")&&(ft=ot,ot=10),this._init(It||0,ot||10,ft||"be"))}typeof et=="object"?et.exports=it:rt.BN=it,it.BN=it,it.wordSize=26;var st;try{typeof window<"u"&&typeof window.Buffer<"u"?st=window.Buffer:st=require$$0$2.Buffer}catch{}it.isBN=function(ot){return ot instanceof it?!0:ot!==null&&typeof ot=="object"&&ot.constructor.wordSize===it.wordSize&&Array.isArray(ot.words)},it.max=function(ot,ft){return ot.cmp(ft)>0?ot:ft},it.min=function(ot,ft){return ot.cmp(ft)<0?ot:ft},it.prototype._init=function(ot,ft,ht){if(typeof ot=="number")return this._initNumber(ot,ft,ht);if(typeof ot=="object")return this._initArray(ot,ft,ht);ft==="hex"&&(ft=16),nt(ft===(ft|0)&&ft>=2&&ft<=36),ot=ot.toString().replace(/\s+/g,"");var vt=0;ot[0]==="-"&&(vt++,this.negative=1),vt<ot.length&&(ft===16?this._parseHex(ot,vt,ht):(this._parseBase(ot,ft,vt),ht==="le"&&this._initArray(this.toArray(),ft,ht)))},it.prototype._initNumber=function(ot,ft,ht){ot<0&&(this.negative=1,ot=-ot),ot<67108864?(this.words=[ot&67108863],this.length=1):ot<4503599627370496?(this.words=[ot&67108863,ot/67108864&67108863],this.length=2):(nt(ot<9007199254740992),this.words=[ot&67108863,ot/67108864&67108863,1],this.length=3),ht==="le"&&this._initArray(this.toArray(),ft,ht)},it.prototype._initArray=function(ot,ft,ht){if(nt(typeof ot.length=="number"),ot.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ot.length/3),this.words=new Array(this.length);for(var vt=0;vt<this.length;vt++)this.words[vt]=0;var wt,bt,$t=0;if(ht==="be")for(vt=ot.length-1,wt=0;vt>=0;vt-=3)bt=ot[vt]|ot[vt-1]<<8|ot[vt-2]<<16,this.words[wt]|=bt<<$t&67108863,this.words[wt+1]=bt>>>26-$t&67108863,$t+=24,$t>=26&&($t-=26,wt++);else if(ht==="le")for(vt=0,wt=0;vt<ot.length;vt+=3)bt=ot[vt]|ot[vt+1]<<8|ot[vt+2]<<16,this.words[wt]|=bt<<$t&67108863,this.words[wt+1]=bt>>>26-$t&67108863,$t+=24,$t>=26&&($t-=26,wt++);return this.strip()};function dt(It,ot){var ft=It.charCodeAt(ot);return ft>=65&&ft<=70?ft-55:ft>=97&&ft<=102?ft-87:ft-48&15}function pt(It,ot,ft){var ht=dt(It,ft);return ft-1>=ot&&(ht|=dt(It,ft-1)<<4),ht}it.prototype._parseHex=function(ot,ft,ht){this.length=Math.ceil((ot.length-ft)/6),this.words=new Array(this.length);for(var vt=0;vt<this.length;vt++)this.words[vt]=0;var wt=0,bt=0,$t;if(ht==="be")for(vt=ot.length-1;vt>=ft;vt-=2)$t=pt(ot,ft,vt)<<wt,this.words[bt]|=$t&67108863,wt>=18?(wt-=18,bt+=1,this.words[bt]|=$t>>>26):wt+=8;else{var Et=ot.length-ft;for(vt=Et%2===0?ft+1:ft;vt<ot.length;vt+=2)$t=pt(ot,ft,vt)<<wt,this.words[bt]|=$t&67108863,wt>=18?(wt-=18,bt+=1,this.words[bt]|=$t>>>26):wt+=8}this.strip()};function mt(It,ot,ft,ht){for(var vt=0,wt=Math.min(It.length,ft),bt=ot;bt<wt;bt++){var $t=It.charCodeAt(bt)-48;vt*=ht,$t>=49?vt+=$t-49+10:$t>=17?vt+=$t-17+10:vt+=$t}return vt}it.prototype._parseBase=function(ot,ft,ht){this.words=[0],this.length=1;for(var vt=0,wt=1;wt<=67108863;wt*=ft)vt++;vt--,wt=wt/ft|0;for(var bt=ot.length-ht,$t=bt%vt,Et=Math.min(bt,bt-$t)+ht,ct=0,St=ht;St<Et;St+=vt)ct=mt(ot,St,St+vt,ft),this.imuln(wt),this.words[0]+ct<67108864?this.words[0]+=ct:this._iaddn(ct);if($t!==0){var Mt=1;for(ct=mt(ot,St,ot.length,ft),St=0;St<$t;St++)Mt*=ft;this.imuln(Mt),this.words[0]+ct<67108864?this.words[0]+=ct:this._iaddn(ct)}this.strip()},it.prototype.copy=function(ot){ot.words=new Array(this.length);for(var ft=0;ft<this.length;ft++)ot.words[ft]=this.words[ft];ot.length=this.length,ot.negative=this.negative,ot.red=this.red},it.prototype.clone=function(){var ot=new it(null);return this.copy(ot),ot},it.prototype._expand=function(ot){for(;this.length<ot;)this.words[this.length++]=0;return this},it.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},it.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},it.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var yt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Rt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Tt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];it.prototype.toString=function(ot,ft){ot=ot||10,ft=ft|0||1;var ht;if(ot===16||ot==="hex"){ht="";for(var vt=0,wt=0,bt=0;bt<this.length;bt++){var $t=this.words[bt],Et=(($t<<vt|wt)&16777215).toString(16);wt=$t>>>24-vt&16777215,wt!==0||bt!==this.length-1?ht=yt[6-Et.length]+Et+ht:ht=Et+ht,vt+=2,vt>=26&&(vt-=26,bt--)}for(wt!==0&&(ht=wt.toString(16)+ht);ht.length%ft!==0;)ht="0"+ht;return this.negative!==0&&(ht="-"+ht),ht}if(ot===(ot|0)&&ot>=2&&ot<=36){var ct=Rt[ot],St=Tt[ot];ht="";var Mt=this.clone();for(Mt.negative=0;!Mt.isZero();){var Lt=Mt.modn(St).toString(ot);Mt=Mt.idivn(St),Mt.isZero()?ht=Lt+ht:ht=yt[ct-Lt.length]+Lt+ht}for(this.isZero()&&(ht="0"+ht);ht.length%ft!==0;)ht="0"+ht;return this.negative!==0&&(ht="-"+ht),ht}nt(!1,"Base should be between 2 and 36")},it.prototype.toNumber=function(){var ot=this.words[0];return this.length===2?ot+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ot+=4503599627370496+this.words[1]*67108864:this.length>2&&nt(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ot:ot},it.prototype.toJSON=function(){return this.toString(16)},it.prototype.toBuffer=function(ot,ft){return nt(typeof st<"u"),this.toArrayLike(st,ot,ft)},it.prototype.toArray=function(ot,ft){return this.toArrayLike(Array,ot,ft)},it.prototype.toArrayLike=function(ot,ft,ht){var vt=this.byteLength(),wt=ht||Math.max(1,vt);nt(vt<=wt,"byte array longer than desired length"),nt(wt>0,"Requested array length <= 0"),this.strip();var bt=ft==="le",$t=new ot(wt),Et,ct,St=this.clone();if(bt){for(ct=0;!St.isZero();ct++)Et=St.andln(255),St.iushrn(8),$t[ct]=Et;for(;ct<wt;ct++)$t[ct]=0}else{for(ct=0;ct<wt-vt;ct++)$t[ct]=0;for(ct=0;!St.isZero();ct++)Et=St.andln(255),St.iushrn(8),$t[wt-ct-1]=Et}return $t},Math.clz32?it.prototype._countBits=function(ot){return 32-Math.clz32(ot)}:it.prototype._countBits=function(ot){var ft=ot,ht=0;return ft>=4096&&(ht+=13,ft>>>=13),ft>=64&&(ht+=7,ft>>>=7),ft>=8&&(ht+=4,ft>>>=4),ft>=2&&(ht+=2,ft>>>=2),ht+ft},it.prototype._zeroBits=function(ot){if(ot===0)return 26;var ft=ot,ht=0;return ft&8191||(ht+=13,ft>>>=13),ft&127||(ht+=7,ft>>>=7),ft&15||(ht+=4,ft>>>=4),ft&3||(ht+=2,ft>>>=2),ft&1||ht++,ht},it.prototype.bitLength=function(){var ot=this.words[this.length-1],ft=this._countBits(ot);return(this.length-1)*26+ft};function At(It){for(var ot=new Array(It.bitLength()),ft=0;ft<ot.length;ft++){var ht=ft/26|0,vt=ft%26;ot[ft]=(It.words[ht]&1<<vt)>>>vt}return ot}it.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ot=0,ft=0;ft<this.length;ft++){var ht=this._zeroBits(this.words[ft]);if(ot+=ht,ht!==26)break}return ot},it.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},it.prototype.toTwos=function(ot){return this.negative!==0?this.abs().inotn(ot).iaddn(1):this.clone()},it.prototype.fromTwos=function(ot){return this.testn(ot-1)?this.notn(ot).iaddn(1).ineg():this.clone()},it.prototype.isNeg=function(){return this.negative!==0},it.prototype.neg=function(){return this.clone().ineg()},it.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},it.prototype.iuor=function(ot){for(;this.length<ot.length;)this.words[this.length++]=0;for(var ft=0;ft<ot.length;ft++)this.words[ft]=this.words[ft]|ot.words[ft];return this.strip()},it.prototype.ior=function(ot){return nt((this.negative|ot.negative)===0),this.iuor(ot)},it.prototype.or=function(ot){return this.length>ot.length?this.clone().ior(ot):ot.clone().ior(this)},it.prototype.uor=function(ot){return this.length>ot.length?this.clone().iuor(ot):ot.clone().iuor(this)},it.prototype.iuand=function(ot){var ft;this.length>ot.length?ft=ot:ft=this;for(var ht=0;ht<ft.length;ht++)this.words[ht]=this.words[ht]&ot.words[ht];return this.length=ft.length,this.strip()},it.prototype.iand=function(ot){return nt((this.negative|ot.negative)===0),this.iuand(ot)},it.prototype.and=function(ot){return this.length>ot.length?this.clone().iand(ot):ot.clone().iand(this)},it.prototype.uand=function(ot){return this.length>ot.length?this.clone().iuand(ot):ot.clone().iuand(this)},it.prototype.iuxor=function(ot){var ft,ht;this.length>ot.length?(ft=this,ht=ot):(ft=ot,ht=this);for(var vt=0;vt<ht.length;vt++)this.words[vt]=ft.words[vt]^ht.words[vt];if(this!==ft)for(;vt<ft.length;vt++)this.words[vt]=ft.words[vt];return this.length=ft.length,this.strip()},it.prototype.ixor=function(ot){return nt((this.negative|ot.negative)===0),this.iuxor(ot)},it.prototype.xor=function(ot){return this.length>ot.length?this.clone().ixor(ot):ot.clone().ixor(this)},it.prototype.uxor=function(ot){return this.length>ot.length?this.clone().iuxor(ot):ot.clone().iuxor(this)},it.prototype.inotn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=Math.ceil(ot/26)|0,ht=ot%26;this._expand(ft),ht>0&&ft--;for(var vt=0;vt<ft;vt++)this.words[vt]=~this.words[vt]&67108863;return ht>0&&(this.words[vt]=~this.words[vt]&67108863>>26-ht),this.strip()},it.prototype.notn=function(ot){return this.clone().inotn(ot)},it.prototype.setn=function(ot,ft){nt(typeof ot=="number"&&ot>=0);var ht=ot/26|0,vt=ot%26;return this._expand(ht+1),ft?this.words[ht]=this.words[ht]|1<<vt:this.words[ht]=this.words[ht]&~(1<<vt),this.strip()},it.prototype.iadd=function(ot){var ft;if(this.negative!==0&&ot.negative===0)return this.negative=0,ft=this.isub(ot),this.negative^=1,this._normSign();if(this.negative===0&&ot.negative!==0)return ot.negative=0,ft=this.isub(ot),ot.negative=1,ft._normSign();var ht,vt;this.length>ot.length?(ht=this,vt=ot):(ht=ot,vt=this);for(var wt=0,bt=0;bt<vt.length;bt++)ft=(ht.words[bt]|0)+(vt.words[bt]|0)+wt,this.words[bt]=ft&67108863,wt=ft>>>26;for(;wt!==0&&bt<ht.length;bt++)ft=(ht.words[bt]|0)+wt,this.words[bt]=ft&67108863,wt=ft>>>26;if(this.length=ht.length,wt!==0)this.words[this.length]=wt,this.length++;else if(ht!==this)for(;bt<ht.length;bt++)this.words[bt]=ht.words[bt];return this},it.prototype.add=function(ot){var ft;return ot.negative!==0&&this.negative===0?(ot.negative=0,ft=this.sub(ot),ot.negative^=1,ft):ot.negative===0&&this.negative!==0?(this.negative=0,ft=ot.sub(this),this.negative=1,ft):this.length>ot.length?this.clone().iadd(ot):ot.clone().iadd(this)},it.prototype.isub=function(ot){if(ot.negative!==0){ot.negative=0;var ft=this.iadd(ot);return ot.negative=1,ft._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ot),this.negative=1,this._normSign();var ht=this.cmp(ot);if(ht===0)return this.negative=0,this.length=1,this.words[0]=0,this;var vt,wt;ht>0?(vt=this,wt=ot):(vt=ot,wt=this);for(var bt=0,$t=0;$t<wt.length;$t++)ft=(vt.words[$t]|0)-(wt.words[$t]|0)+bt,bt=ft>>26,this.words[$t]=ft&67108863;for(;bt!==0&&$t<vt.length;$t++)ft=(vt.words[$t]|0)+bt,bt=ft>>26,this.words[$t]=ft&67108863;if(bt===0&&$t<vt.length&&vt!==this)for(;$t<vt.length;$t++)this.words[$t]=vt.words[$t];return this.length=Math.max(this.length,$t),vt!==this&&(this.negative=1),this.strip()},it.prototype.sub=function(ot){return this.clone().isub(ot)};function xt(It,ot,ft){ft.negative=ot.negative^It.negative;var ht=It.length+ot.length|0;ft.length=ht,ht=ht-1|0;var vt=It.words[0]|0,wt=ot.words[0]|0,bt=vt*wt,$t=bt&67108863,Et=bt/67108864|0;ft.words[0]=$t;for(var ct=1;ct<ht;ct++){for(var St=Et>>>26,Mt=Et&67108863,Lt=Math.min(ct,ot.length-1),Ut=Math.max(0,ct-It.length+1);Ut<=Lt;Ut++){var Kt=ct-Ut|0;vt=It.words[Kt]|0,wt=ot.words[Ut]|0,bt=vt*wt+Mt,St+=bt/67108864|0,Mt=bt&67108863}ft.words[ct]=Mt|0,Et=St|0}return Et!==0?ft.words[ct]=Et|0:ft.length--,ft.strip()}var Nt=function(ot,ft,ht){var vt=ot.words,wt=ft.words,bt=ht.words,$t=0,Et,ct,St,Mt=vt[0]|0,Lt=Mt&8191,Ut=Mt>>>13,Kt=vt[1]|0,Ht=Kt&8191,Ft=Kt>>>13,zt=vt[2]|0,ir=zt&8191,sr=zt>>>13,ar=vt[3]|0,Vt=ar&8191,fr=ar>>>13,Gr=vt[4]|0,ur=Gr&8191,pr=Gr>>>13,Fr=vt[5]|0,yr=Fr&8191,hr=Fr>>>13,Wr=vt[6]|0,$r=Wr&8191,Cr=Wr>>>13,an=vt[7]|0,Er=an&8191,Ar=an>>>13,gn=vt[8]|0,Or=gn&8191,Lr=gn>>>13,wn=vt[9]|0,Xt=wn&8191,Bt=wn>>>13,Wt=wt[0]|0,nr=Wt&8191,cr=Wt>>>13,Sr=wt[1]|0,_r=Sr&8191,xr=Sr>>>13,pn=wt[2]|0,Tr=pn&8191,Ur=pn>>>13,un=wt[3]|0,Ir=un&8191,Nr=un>>>13,zr=wt[4]|0,br=zr&8191,Dr=zr>>>13,yn=wt[5]|0,Mr=yn&8191,qr=yn>>>13,Sn=wt[6]|0,Br=Sn&8191,Hr=Sn>>>13,Zt=wt[7]|0,Qt=Zt&8191,Jt=Zt>>>13,qt=wt[8]|0,rr=qt&8191,dr=qt>>>13,Rr=wt[9]|0,vr=Rr&8191,wr=Rr>>>13;ht.negative=ot.negative^ft.negative,ht.length=19,Et=Math.imul(Lt,nr),ct=Math.imul(Lt,cr),ct=ct+Math.imul(Ut,nr)|0,St=Math.imul(Ut,cr);var Yr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,Et=Math.imul(Ht,nr),ct=Math.imul(Ht,cr),ct=ct+Math.imul(Ft,nr)|0,St=Math.imul(Ft,cr),Et=Et+Math.imul(Lt,_r)|0,ct=ct+Math.imul(Lt,xr)|0,ct=ct+Math.imul(Ut,_r)|0,St=St+Math.imul(Ut,xr)|0;var jr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(jr>>>26)|0,jr&=67108863,Et=Math.imul(ir,nr),ct=Math.imul(ir,cr),ct=ct+Math.imul(sr,nr)|0,St=Math.imul(sr,cr),Et=Et+Math.imul(Ht,_r)|0,ct=ct+Math.imul(Ht,xr)|0,ct=ct+Math.imul(Ft,_r)|0,St=St+Math.imul(Ft,xr)|0,Et=Et+Math.imul(Lt,Tr)|0,ct=ct+Math.imul(Lt,Ur)|0,ct=ct+Math.imul(Ut,Tr)|0,St=St+Math.imul(Ut,Ur)|0;var mn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(mn>>>26)|0,mn&=67108863,Et=Math.imul(Vt,nr),ct=Math.imul(Vt,cr),ct=ct+Math.imul(fr,nr)|0,St=Math.imul(fr,cr),Et=Et+Math.imul(ir,_r)|0,ct=ct+Math.imul(ir,xr)|0,ct=ct+Math.imul(sr,_r)|0,St=St+Math.imul(sr,xr)|0,Et=Et+Math.imul(Ht,Tr)|0,ct=ct+Math.imul(Ht,Ur)|0,ct=ct+Math.imul(Ft,Tr)|0,St=St+Math.imul(Ft,Ur)|0,Et=Et+Math.imul(Lt,Ir)|0,ct=ct+Math.imul(Lt,Nr)|0,ct=ct+Math.imul(Ut,Ir)|0,St=St+Math.imul(Ut,Nr)|0;var Jr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,Et=Math.imul(ur,nr),ct=Math.imul(ur,cr),ct=ct+Math.imul(pr,nr)|0,St=Math.imul(pr,cr),Et=Et+Math.imul(Vt,_r)|0,ct=ct+Math.imul(Vt,xr)|0,ct=ct+Math.imul(fr,_r)|0,St=St+Math.imul(fr,xr)|0,Et=Et+Math.imul(ir,Tr)|0,ct=ct+Math.imul(ir,Ur)|0,ct=ct+Math.imul(sr,Tr)|0,St=St+Math.imul(sr,Ur)|0,Et=Et+Math.imul(Ht,Ir)|0,ct=ct+Math.imul(Ht,Nr)|0,ct=ct+Math.imul(Ft,Ir)|0,St=St+Math.imul(Ft,Nr)|0,Et=Et+Math.imul(Lt,br)|0,ct=ct+Math.imul(Lt,Dr)|0,ct=ct+Math.imul(Ut,br)|0,St=St+Math.imul(Ut,Dr)|0;var cn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(cn>>>26)|0,cn&=67108863,Et=Math.imul(yr,nr),ct=Math.imul(yr,cr),ct=ct+Math.imul(hr,nr)|0,St=Math.imul(hr,cr),Et=Et+Math.imul(ur,_r)|0,ct=ct+Math.imul(ur,xr)|0,ct=ct+Math.imul(pr,_r)|0,St=St+Math.imul(pr,xr)|0,Et=Et+Math.imul(Vt,Tr)|0,ct=ct+Math.imul(Vt,Ur)|0,ct=ct+Math.imul(fr,Tr)|0,St=St+Math.imul(fr,Ur)|0,Et=Et+Math.imul(ir,Ir)|0,ct=ct+Math.imul(ir,Nr)|0,ct=ct+Math.imul(sr,Ir)|0,St=St+Math.imul(sr,Nr)|0,Et=Et+Math.imul(Ht,br)|0,ct=ct+Math.imul(Ht,Dr)|0,ct=ct+Math.imul(Ft,br)|0,St=St+Math.imul(Ft,Dr)|0,Et=Et+Math.imul(Lt,Mr)|0,ct=ct+Math.imul(Lt,qr)|0,ct=ct+Math.imul(Ut,Mr)|0,St=St+Math.imul(Ut,qr)|0;var ln=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(ln>>>26)|0,ln&=67108863,Et=Math.imul($r,nr),ct=Math.imul($r,cr),ct=ct+Math.imul(Cr,nr)|0,St=Math.imul(Cr,cr),Et=Et+Math.imul(yr,_r)|0,ct=ct+Math.imul(yr,xr)|0,ct=ct+Math.imul(hr,_r)|0,St=St+Math.imul(hr,xr)|0,Et=Et+Math.imul(ur,Tr)|0,ct=ct+Math.imul(ur,Ur)|0,ct=ct+Math.imul(pr,Tr)|0,St=St+Math.imul(pr,Ur)|0,Et=Et+Math.imul(Vt,Ir)|0,ct=ct+Math.imul(Vt,Nr)|0,ct=ct+Math.imul(fr,Ir)|0,St=St+Math.imul(fr,Nr)|0,Et=Et+Math.imul(ir,br)|0,ct=ct+Math.imul(ir,Dr)|0,ct=ct+Math.imul(sr,br)|0,St=St+Math.imul(sr,Dr)|0,Et=Et+Math.imul(Ht,Mr)|0,ct=ct+Math.imul(Ht,qr)|0,ct=ct+Math.imul(Ft,Mr)|0,St=St+Math.imul(Ft,qr)|0,Et=Et+Math.imul(Lt,Br)|0,ct=ct+Math.imul(Lt,Hr)|0,ct=ct+Math.imul(Ut,Br)|0,St=St+Math.imul(Ut,Hr)|0;var vn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(vn>>>26)|0,vn&=67108863,Et=Math.imul(Er,nr),ct=Math.imul(Er,cr),ct=ct+Math.imul(Ar,nr)|0,St=Math.imul(Ar,cr),Et=Et+Math.imul($r,_r)|0,ct=ct+Math.imul($r,xr)|0,ct=ct+Math.imul(Cr,_r)|0,St=St+Math.imul(Cr,xr)|0,Et=Et+Math.imul(yr,Tr)|0,ct=ct+Math.imul(yr,Ur)|0,ct=ct+Math.imul(hr,Tr)|0,St=St+Math.imul(hr,Ur)|0,Et=Et+Math.imul(ur,Ir)|0,ct=ct+Math.imul(ur,Nr)|0,ct=ct+Math.imul(pr,Ir)|0,St=St+Math.imul(pr,Nr)|0,Et=Et+Math.imul(Vt,br)|0,ct=ct+Math.imul(Vt,Dr)|0,ct=ct+Math.imul(fr,br)|0,St=St+Math.imul(fr,Dr)|0,Et=Et+Math.imul(ir,Mr)|0,ct=ct+Math.imul(ir,qr)|0,ct=ct+Math.imul(sr,Mr)|0,St=St+Math.imul(sr,qr)|0,Et=Et+Math.imul(Ht,Br)|0,ct=ct+Math.imul(Ht,Hr)|0,ct=ct+Math.imul(Ft,Br)|0,St=St+Math.imul(Ft,Hr)|0,Et=Et+Math.imul(Lt,Qt)|0,ct=ct+Math.imul(Lt,Jt)|0,ct=ct+Math.imul(Ut,Qt)|0,St=St+Math.imul(Ut,Jt)|0;var _n=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(_n>>>26)|0,_n&=67108863,Et=Math.imul(Or,nr),ct=Math.imul(Or,cr),ct=ct+Math.imul(Lr,nr)|0,St=Math.imul(Lr,cr),Et=Et+Math.imul(Er,_r)|0,ct=ct+Math.imul(Er,xr)|0,ct=ct+Math.imul(Ar,_r)|0,St=St+Math.imul(Ar,xr)|0,Et=Et+Math.imul($r,Tr)|0,ct=ct+Math.imul($r,Ur)|0,ct=ct+Math.imul(Cr,Tr)|0,St=St+Math.imul(Cr,Ur)|0,Et=Et+Math.imul(yr,Ir)|0,ct=ct+Math.imul(yr,Nr)|0,ct=ct+Math.imul(hr,Ir)|0,St=St+Math.imul(hr,Nr)|0,Et=Et+Math.imul(ur,br)|0,ct=ct+Math.imul(ur,Dr)|0,ct=ct+Math.imul(pr,br)|0,St=St+Math.imul(pr,Dr)|0,Et=Et+Math.imul(Vt,Mr)|0,ct=ct+Math.imul(Vt,qr)|0,ct=ct+Math.imul(fr,Mr)|0,St=St+Math.imul(fr,qr)|0,Et=Et+Math.imul(ir,Br)|0,ct=ct+Math.imul(ir,Hr)|0,ct=ct+Math.imul(sr,Br)|0,St=St+Math.imul(sr,Hr)|0,Et=Et+Math.imul(Ht,Qt)|0,ct=ct+Math.imul(Ht,Jt)|0,ct=ct+Math.imul(Ft,Qt)|0,St=St+Math.imul(Ft,Jt)|0,Et=Et+Math.imul(Lt,rr)|0,ct=ct+Math.imul(Lt,dr)|0,ct=ct+Math.imul(Ut,rr)|0,St=St+Math.imul(Ut,dr)|0;var fn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(fn>>>26)|0,fn&=67108863,Et=Math.imul(Xt,nr),ct=Math.imul(Xt,cr),ct=ct+Math.imul(Bt,nr)|0,St=Math.imul(Bt,cr),Et=Et+Math.imul(Or,_r)|0,ct=ct+Math.imul(Or,xr)|0,ct=ct+Math.imul(Lr,_r)|0,St=St+Math.imul(Lr,xr)|0,Et=Et+Math.imul(Er,Tr)|0,ct=ct+Math.imul(Er,Ur)|0,ct=ct+Math.imul(Ar,Tr)|0,St=St+Math.imul(Ar,Ur)|0,Et=Et+Math.imul($r,Ir)|0,ct=ct+Math.imul($r,Nr)|0,ct=ct+Math.imul(Cr,Ir)|0,St=St+Math.imul(Cr,Nr)|0,Et=Et+Math.imul(yr,br)|0,ct=ct+Math.imul(yr,Dr)|0,ct=ct+Math.imul(hr,br)|0,St=St+Math.imul(hr,Dr)|0,Et=Et+Math.imul(ur,Mr)|0,ct=ct+Math.imul(ur,qr)|0,ct=ct+Math.imul(pr,Mr)|0,St=St+Math.imul(pr,qr)|0,Et=Et+Math.imul(Vt,Br)|0,ct=ct+Math.imul(Vt,Hr)|0,ct=ct+Math.imul(fr,Br)|0,St=St+Math.imul(fr,Hr)|0,Et=Et+Math.imul(ir,Qt)|0,ct=ct+Math.imul(ir,Jt)|0,ct=ct+Math.imul(sr,Qt)|0,St=St+Math.imul(sr,Jt)|0,Et=Et+Math.imul(Ht,rr)|0,ct=ct+Math.imul(Ht,dr)|0,ct=ct+Math.imul(Ft,rr)|0,St=St+Math.imul(Ft,dr)|0,Et=Et+Math.imul(Lt,vr)|0,ct=ct+Math.imul(Lt,wr)|0,ct=ct+Math.imul(Ut,vr)|0,St=St+Math.imul(Ut,wr)|0;var hn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(hn>>>26)|0,hn&=67108863,Et=Math.imul(Xt,_r),ct=Math.imul(Xt,xr),ct=ct+Math.imul(Bt,_r)|0,St=Math.imul(Bt,xr),Et=Et+Math.imul(Or,Tr)|0,ct=ct+Math.imul(Or,Ur)|0,ct=ct+Math.imul(Lr,Tr)|0,St=St+Math.imul(Lr,Ur)|0,Et=Et+Math.imul(Er,Ir)|0,ct=ct+Math.imul(Er,Nr)|0,ct=ct+Math.imul(Ar,Ir)|0,St=St+Math.imul(Ar,Nr)|0,Et=Et+Math.imul($r,br)|0,ct=ct+Math.imul($r,Dr)|0,ct=ct+Math.imul(Cr,br)|0,St=St+Math.imul(Cr,Dr)|0,Et=Et+Math.imul(yr,Mr)|0,ct=ct+Math.imul(yr,qr)|0,ct=ct+Math.imul(hr,Mr)|0,St=St+Math.imul(hr,qr)|0,Et=Et+Math.imul(ur,Br)|0,ct=ct+Math.imul(ur,Hr)|0,ct=ct+Math.imul(pr,Br)|0,St=St+Math.imul(pr,Hr)|0,Et=Et+Math.imul(Vt,Qt)|0,ct=ct+Math.imul(Vt,Jt)|0,ct=ct+Math.imul(fr,Qt)|0,St=St+Math.imul(fr,Jt)|0,Et=Et+Math.imul(ir,rr)|0,ct=ct+Math.imul(ir,dr)|0,ct=ct+Math.imul(sr,rr)|0,St=St+Math.imul(sr,dr)|0,Et=Et+Math.imul(Ht,vr)|0,ct=ct+Math.imul(Ht,wr)|0,ct=ct+Math.imul(Ft,vr)|0,St=St+Math.imul(Ft,wr)|0;var dn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(dn>>>26)|0,dn&=67108863,Et=Math.imul(Xt,Tr),ct=Math.imul(Xt,Ur),ct=ct+Math.imul(Bt,Tr)|0,St=Math.imul(Bt,Ur),Et=Et+Math.imul(Or,Ir)|0,ct=ct+Math.imul(Or,Nr)|0,ct=ct+Math.imul(Lr,Ir)|0,St=St+Math.imul(Lr,Nr)|0,Et=Et+Math.imul(Er,br)|0,ct=ct+Math.imul(Er,Dr)|0,ct=ct+Math.imul(Ar,br)|0,St=St+Math.imul(Ar,Dr)|0,Et=Et+Math.imul($r,Mr)|0,ct=ct+Math.imul($r,qr)|0,ct=ct+Math.imul(Cr,Mr)|0,St=St+Math.imul(Cr,qr)|0,Et=Et+Math.imul(yr,Br)|0,ct=ct+Math.imul(yr,Hr)|0,ct=ct+Math.imul(hr,Br)|0,St=St+Math.imul(hr,Hr)|0,Et=Et+Math.imul(ur,Qt)|0,ct=ct+Math.imul(ur,Jt)|0,ct=ct+Math.imul(pr,Qt)|0,St=St+Math.imul(pr,Jt)|0,Et=Et+Math.imul(Vt,rr)|0,ct=ct+Math.imul(Vt,dr)|0,ct=ct+Math.imul(fr,rr)|0,St=St+Math.imul(fr,dr)|0,Et=Et+Math.imul(ir,vr)|0,ct=ct+Math.imul(ir,wr)|0,ct=ct+Math.imul(sr,vr)|0,St=St+Math.imul(sr,wr)|0;var tn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(tn>>>26)|0,tn&=67108863,Et=Math.imul(Xt,Ir),ct=Math.imul(Xt,Nr),ct=ct+Math.imul(Bt,Ir)|0,St=Math.imul(Bt,Nr),Et=Et+Math.imul(Or,br)|0,ct=ct+Math.imul(Or,Dr)|0,ct=ct+Math.imul(Lr,br)|0,St=St+Math.imul(Lr,Dr)|0,Et=Et+Math.imul(Er,Mr)|0,ct=ct+Math.imul(Er,qr)|0,ct=ct+Math.imul(Ar,Mr)|0,St=St+Math.imul(Ar,qr)|0,Et=Et+Math.imul($r,Br)|0,ct=ct+Math.imul($r,Hr)|0,ct=ct+Math.imul(Cr,Br)|0,St=St+Math.imul(Cr,Hr)|0,Et=Et+Math.imul(yr,Qt)|0,ct=ct+Math.imul(yr,Jt)|0,ct=ct+Math.imul(hr,Qt)|0,St=St+Math.imul(hr,Jt)|0,Et=Et+Math.imul(ur,rr)|0,ct=ct+Math.imul(ur,dr)|0,ct=ct+Math.imul(pr,rr)|0,St=St+Math.imul(pr,dr)|0,Et=Et+Math.imul(Vt,vr)|0,ct=ct+Math.imul(Vt,wr)|0,ct=ct+Math.imul(fr,vr)|0,St=St+Math.imul(fr,wr)|0;var sn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(sn>>>26)|0,sn&=67108863,Et=Math.imul(Xt,br),ct=Math.imul(Xt,Dr),ct=ct+Math.imul(Bt,br)|0,St=Math.imul(Bt,Dr),Et=Et+Math.imul(Or,Mr)|0,ct=ct+Math.imul(Or,qr)|0,ct=ct+Math.imul(Lr,Mr)|0,St=St+Math.imul(Lr,qr)|0,Et=Et+Math.imul(Er,Br)|0,ct=ct+Math.imul(Er,Hr)|0,ct=ct+Math.imul(Ar,Br)|0,St=St+Math.imul(Ar,Hr)|0,Et=Et+Math.imul($r,Qt)|0,ct=ct+Math.imul($r,Jt)|0,ct=ct+Math.imul(Cr,Qt)|0,St=St+Math.imul(Cr,Jt)|0,Et=Et+Math.imul(yr,rr)|0,ct=ct+Math.imul(yr,dr)|0,ct=ct+Math.imul(hr,rr)|0,St=St+Math.imul(hr,dr)|0,Et=Et+Math.imul(ur,vr)|0,ct=ct+Math.imul(ur,wr)|0,ct=ct+Math.imul(pr,vr)|0,St=St+Math.imul(pr,wr)|0;var Qr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,Et=Math.imul(Xt,Mr),ct=Math.imul(Xt,qr),ct=ct+Math.imul(Bt,Mr)|0,St=Math.imul(Bt,qr),Et=Et+Math.imul(Or,Br)|0,ct=ct+Math.imul(Or,Hr)|0,ct=ct+Math.imul(Lr,Br)|0,St=St+Math.imul(Lr,Hr)|0,Et=Et+Math.imul(Er,Qt)|0,ct=ct+Math.imul(Er,Jt)|0,ct=ct+Math.imul(Ar,Qt)|0,St=St+Math.imul(Ar,Jt)|0,Et=Et+Math.imul($r,rr)|0,ct=ct+Math.imul($r,dr)|0,ct=ct+Math.imul(Cr,rr)|0,St=St+Math.imul(Cr,dr)|0,Et=Et+Math.imul(yr,vr)|0,ct=ct+Math.imul(yr,wr)|0,ct=ct+Math.imul(hr,vr)|0,St=St+Math.imul(hr,wr)|0;var rn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(rn>>>26)|0,rn&=67108863,Et=Math.imul(Xt,Br),ct=Math.imul(Xt,Hr),ct=ct+Math.imul(Bt,Br)|0,St=Math.imul(Bt,Hr),Et=Et+Math.imul(Or,Qt)|0,ct=ct+Math.imul(Or,Jt)|0,ct=ct+Math.imul(Lr,Qt)|0,St=St+Math.imul(Lr,Jt)|0,Et=Et+Math.imul(Er,rr)|0,ct=ct+Math.imul(Er,dr)|0,ct=ct+Math.imul(Ar,rr)|0,St=St+Math.imul(Ar,dr)|0,Et=Et+Math.imul($r,vr)|0,ct=ct+Math.imul($r,wr)|0,ct=ct+Math.imul(Cr,vr)|0,St=St+Math.imul(Cr,wr)|0;var nn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(nn>>>26)|0,nn&=67108863,Et=Math.imul(Xt,Qt),ct=Math.imul(Xt,Jt),ct=ct+Math.imul(Bt,Qt)|0,St=Math.imul(Bt,Jt),Et=Et+Math.imul(Or,rr)|0,ct=ct+Math.imul(Or,dr)|0,ct=ct+Math.imul(Lr,rr)|0,St=St+Math.imul(Lr,dr)|0,Et=Et+Math.imul(Er,vr)|0,ct=ct+Math.imul(Er,wr)|0,ct=ct+Math.imul(Ar,vr)|0,St=St+Math.imul(Ar,wr)|0;var Xr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,Et=Math.imul(Xt,rr),ct=Math.imul(Xt,dr),ct=ct+Math.imul(Bt,rr)|0,St=Math.imul(Bt,dr),Et=Et+Math.imul(Or,vr)|0,ct=ct+Math.imul(Or,wr)|0,ct=ct+Math.imul(Lr,vr)|0,St=St+Math.imul(Lr,wr)|0;var kr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(kr>>>26)|0,kr&=67108863,Et=Math.imul(Xt,vr),ct=Math.imul(Xt,wr),ct=ct+Math.imul(Bt,vr)|0,St=Math.imul(Bt,wr);var Pr=($t+Et|0)+((ct&8191)<<13)|0;return $t=(St+(ct>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,bt[0]=Yr,bt[1]=jr,bt[2]=mn,bt[3]=Jr,bt[4]=cn,bt[5]=ln,bt[6]=vn,bt[7]=_n,bt[8]=fn,bt[9]=hn,bt[10]=dn,bt[11]=tn,bt[12]=sn,bt[13]=Qr,bt[14]=rn,bt[15]=nn,bt[16]=Xr,bt[17]=kr,bt[18]=Pr,$t!==0&&(bt[19]=$t,ht.length++),ht};Math.imul||(Nt=xt);function Ct(It,ot,ft){ft.negative=ot.negative^It.negative,ft.length=It.length+ot.length;for(var ht=0,vt=0,wt=0;wt<ft.length-1;wt++){var bt=vt;vt=0;for(var $t=ht&67108863,Et=Math.min(wt,ot.length-1),ct=Math.max(0,wt-It.length+1);ct<=Et;ct++){var St=wt-ct,Mt=It.words[St]|0,Lt=ot.words[ct]|0,Ut=Mt*Lt,Kt=Ut&67108863;bt=bt+(Ut/67108864|0)|0,Kt=Kt+$t|0,$t=Kt&67108863,bt=bt+(Kt>>>26)|0,vt+=bt>>>26,bt&=67108863}ft.words[wt]=$t,ht=bt,bt=vt}return ht!==0?ft.words[wt]=ht:ft.length--,ft.strip()}function Ot(It,ot,ft){var ht=new kt;return ht.mulp(It,ot,ft)}it.prototype.mulTo=function(ot,ft){var ht,vt=this.length+ot.length;return this.length===10&&ot.length===10?ht=Nt(this,ot,ft):vt<63?ht=xt(this,ot,ft):vt<1024?ht=Ct(this,ot,ft):ht=Ot(this,ot,ft),ht};function kt(It,ot){this.x=It,this.y=ot}kt.prototype.makeRBT=function(ot){for(var ft=new Array(ot),ht=it.prototype._countBits(ot)-1,vt=0;vt<ot;vt++)ft[vt]=this.revBin(vt,ht,ot);return ft},kt.prototype.revBin=function(ot,ft,ht){if(ot===0||ot===ht-1)return ot;for(var vt=0,wt=0;wt<ft;wt++)vt|=(ot&1)<<ft-wt-1,ot>>=1;return vt},kt.prototype.permute=function(ot,ft,ht,vt,wt,bt){for(var $t=0;$t<bt;$t++)vt[$t]=ft[ot[$t]],wt[$t]=ht[ot[$t]]},kt.prototype.transform=function(ot,ft,ht,vt,wt,bt){this.permute(bt,ot,ft,ht,vt,wt);for(var $t=1;$t<wt;$t<<=1)for(var Et=$t<<1,ct=Math.cos(2*Math.PI/Et),St=Math.sin(2*Math.PI/Et),Mt=0;Mt<wt;Mt+=Et)for(var Lt=ct,Ut=St,Kt=0;Kt<$t;Kt++){var Ht=ht[Mt+Kt],Ft=vt[Mt+Kt],zt=ht[Mt+Kt+$t],ir=vt[Mt+Kt+$t],sr=Lt*zt-Ut*ir;ir=Lt*ir+Ut*zt,zt=sr,ht[Mt+Kt]=Ht+zt,vt[Mt+Kt]=Ft+ir,ht[Mt+Kt+$t]=Ht-zt,vt[Mt+Kt+$t]=Ft-ir,Kt!==Et&&(sr=ct*Lt-St*Ut,Ut=ct*Ut+St*Lt,Lt=sr)}},kt.prototype.guessLen13b=function(ot,ft){var ht=Math.max(ft,ot)|1,vt=ht&1,wt=0;for(ht=ht/2|0;ht;ht=ht>>>1)wt++;return 1<<wt+1+vt},kt.prototype.conjugate=function(ot,ft,ht){if(!(ht<=1))for(var vt=0;vt<ht/2;vt++){var wt=ot[vt];ot[vt]=ot[ht-vt-1],ot[ht-vt-1]=wt,wt=ft[vt],ft[vt]=-ft[ht-vt-1],ft[ht-vt-1]=-wt}},kt.prototype.normalize13b=function(ot,ft){for(var ht=0,vt=0;vt<ft/2;vt++){var wt=Math.round(ot[2*vt+1]/ft)*8192+Math.round(ot[2*vt]/ft)+ht;ot[vt]=wt&67108863,wt<67108864?ht=0:ht=wt/67108864|0}return ot},kt.prototype.convert13b=function(ot,ft,ht,vt){for(var wt=0,bt=0;bt<ft;bt++)wt=wt+(ot[bt]|0),ht[2*bt]=wt&8191,wt=wt>>>13,ht[2*bt+1]=wt&8191,wt=wt>>>13;for(bt=2*ft;bt<vt;++bt)ht[bt]=0;nt(wt===0),nt((wt&-8192)===0)},kt.prototype.stub=function(ot){for(var ft=new Array(ot),ht=0;ht<ot;ht++)ft[ht]=0;return ft},kt.prototype.mulp=function(ot,ft,ht){var vt=2*this.guessLen13b(ot.length,ft.length),wt=this.makeRBT(vt),bt=this.stub(vt),$t=new Array(vt),Et=new Array(vt),ct=new Array(vt),St=new Array(vt),Mt=new Array(vt),Lt=new Array(vt),Ut=ht.words;Ut.length=vt,this.convert13b(ot.words,ot.length,$t,vt),this.convert13b(ft.words,ft.length,St,vt),this.transform($t,bt,Et,ct,vt,wt),this.transform(St,bt,Mt,Lt,vt,wt);for(var Kt=0;Kt<vt;Kt++){var Ht=Et[Kt]*Mt[Kt]-ct[Kt]*Lt[Kt];ct[Kt]=Et[Kt]*Lt[Kt]+ct[Kt]*Mt[Kt],Et[Kt]=Ht}return this.conjugate(Et,ct,vt),this.transform(Et,ct,Ut,bt,vt,wt),this.conjugate(Ut,bt,vt),this.normalize13b(Ut,vt),ht.negative=ot.negative^ft.negative,ht.length=ot.length+ft.length,ht.strip()},it.prototype.mul=function(ot){var ft=new it(null);return ft.words=new Array(this.length+ot.length),this.mulTo(ot,ft)},it.prototype.mulf=function(ot){var ft=new it(null);return ft.words=new Array(this.length+ot.length),Ot(this,ot,ft)},it.prototype.imul=function(ot){return this.clone().mulTo(ot,this)},it.prototype.imuln=function(ot){nt(typeof ot=="number"),nt(ot<67108864);for(var ft=0,ht=0;ht<this.length;ht++){var vt=(this.words[ht]|0)*ot,wt=(vt&67108863)+(ft&67108863);ft>>=26,ft+=vt/67108864|0,ft+=wt>>>26,this.words[ht]=wt&67108863}return ft!==0&&(this.words[ht]=ft,this.length++),this},it.prototype.muln=function(ot){return this.clone().imuln(ot)},it.prototype.sqr=function(){return this.mul(this)},it.prototype.isqr=function(){return this.imul(this.clone())},it.prototype.pow=function(ot){var ft=At(ot);if(ft.length===0)return new it(1);for(var ht=this,vt=0;vt<ft.length&&ft[vt]===0;vt++,ht=ht.sqr());if(++vt<ft.length)for(var wt=ht.sqr();vt<ft.length;vt++,wt=wt.sqr())ft[vt]!==0&&(ht=ht.mul(wt));return ht},it.prototype.iushln=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26,vt=67108863>>>26-ft<<26-ft,wt;if(ft!==0){var bt=0;for(wt=0;wt<this.length;wt++){var $t=this.words[wt]&vt,Et=(this.words[wt]|0)-$t<<ft;this.words[wt]=Et|bt,bt=$t>>>26-ft}bt&&(this.words[wt]=bt,this.length++)}if(ht!==0){for(wt=this.length-1;wt>=0;wt--)this.words[wt+ht]=this.words[wt];for(wt=0;wt<ht;wt++)this.words[wt]=0;this.length+=ht}return this.strip()},it.prototype.ishln=function(ot){return nt(this.negative===0),this.iushln(ot)},it.prototype.iushrn=function(ot,ft,ht){nt(typeof ot=="number"&&ot>=0);var vt;ft?vt=(ft-ft%26)/26:vt=0;var wt=ot%26,bt=Math.min((ot-wt)/26,this.length),$t=67108863^67108863>>>wt<<wt,Et=ht;if(vt-=bt,vt=Math.max(0,vt),Et){for(var ct=0;ct<bt;ct++)Et.words[ct]=this.words[ct];Et.length=bt}if(bt!==0)if(this.length>bt)for(this.length-=bt,ct=0;ct<this.length;ct++)this.words[ct]=this.words[ct+bt];else this.words[0]=0,this.length=1;var St=0;for(ct=this.length-1;ct>=0&&(St!==0||ct>=vt);ct--){var Mt=this.words[ct]|0;this.words[ct]=St<<26-wt|Mt>>>wt,St=Mt&$t}return Et&&St!==0&&(Et.words[Et.length++]=St),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},it.prototype.ishrn=function(ot,ft,ht){return nt(this.negative===0),this.iushrn(ot,ft,ht)},it.prototype.shln=function(ot){return this.clone().ishln(ot)},it.prototype.ushln=function(ot){return this.clone().iushln(ot)},it.prototype.shrn=function(ot){return this.clone().ishrn(ot)},it.prototype.ushrn=function(ot){return this.clone().iushrn(ot)},it.prototype.testn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26,vt=1<<ft;if(this.length<=ht)return!1;var wt=this.words[ht];return!!(wt&vt)},it.prototype.imaskn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26;if(nt(this.negative===0,"imaskn works only with positive numbers"),this.length<=ht)return this;if(ft!==0&&ht++,this.length=Math.min(ht,this.length),ft!==0){var vt=67108863^67108863>>>ft<<ft;this.words[this.length-1]&=vt}return this.strip()},it.prototype.maskn=function(ot){return this.clone().imaskn(ot)},it.prototype.iaddn=function(ot){return nt(typeof ot=="number"),nt(ot<67108864),ot<0?this.isubn(-ot):this.negative!==0?this.length===1&&(this.words[0]|0)<ot?(this.words[0]=ot-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ot),this.negative=1,this):this._iaddn(ot)},it.prototype._iaddn=function(ot){this.words[0]+=ot;for(var ft=0;ft<this.length&&this.words[ft]>=67108864;ft++)this.words[ft]-=67108864,ft===this.length-1?this.words[ft+1]=1:this.words[ft+1]++;return this.length=Math.max(this.length,ft+1),this},it.prototype.isubn=function(ot){if(nt(typeof ot=="number"),nt(ot<67108864),ot<0)return this.iaddn(-ot);if(this.negative!==0)return this.negative=0,this.iaddn(ot),this.negative=1,this;if(this.words[0]-=ot,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var ft=0;ft<this.length&&this.words[ft]<0;ft++)this.words[ft]+=67108864,this.words[ft+1]-=1;return this.strip()},it.prototype.addn=function(ot){return this.clone().iaddn(ot)},it.prototype.subn=function(ot){return this.clone().isubn(ot)},it.prototype.iabs=function(){return this.negative=0,this},it.prototype.abs=function(){return this.clone().iabs()},it.prototype._ishlnsubmul=function(ot,ft,ht){var vt=ot.length+ht,wt;this._expand(vt);var bt,$t=0;for(wt=0;wt<ot.length;wt++){bt=(this.words[wt+ht]|0)+$t;var Et=(ot.words[wt]|0)*ft;bt-=Et&67108863,$t=(bt>>26)-(Et/67108864|0),this.words[wt+ht]=bt&67108863}for(;wt<this.length-ht;wt++)bt=(this.words[wt+ht]|0)+$t,$t=bt>>26,this.words[wt+ht]=bt&67108863;if($t===0)return this.strip();for(nt($t===-1),$t=0,wt=0;wt<this.length;wt++)bt=-(this.words[wt]|0)+$t,$t=bt>>26,this.words[wt]=bt&67108863;return this.negative=1,this.strip()},it.prototype._wordDiv=function(ot,ft){var ht=this.length-ot.length,vt=this.clone(),wt=ot,bt=wt.words[wt.length-1]|0,$t=this._countBits(bt);ht=26-$t,ht!==0&&(wt=wt.ushln(ht),vt.iushln(ht),bt=wt.words[wt.length-1]|0);var Et=vt.length-wt.length,ct;if(ft!=="mod"){ct=new it(null),ct.length=Et+1,ct.words=new Array(ct.length);for(var St=0;St<ct.length;St++)ct.words[St]=0}var Mt=vt.clone()._ishlnsubmul(wt,1,Et);Mt.negative===0&&(vt=Mt,ct&&(ct.words[Et]=1));for(var Lt=Et-1;Lt>=0;Lt--){var Ut=(vt.words[wt.length+Lt]|0)*67108864+(vt.words[wt.length+Lt-1]|0);for(Ut=Math.min(Ut/bt|0,67108863),vt._ishlnsubmul(wt,Ut,Lt);vt.negative!==0;)Ut--,vt.negative=0,vt._ishlnsubmul(wt,1,Lt),vt.isZero()||(vt.negative^=1);ct&&(ct.words[Lt]=Ut)}return ct&&ct.strip(),vt.strip(),ft!=="div"&&ht!==0&&vt.iushrn(ht),{div:ct||null,mod:vt}},it.prototype.divmod=function(ot,ft,ht){if(nt(!ot.isZero()),this.isZero())return{div:new it(0),mod:new it(0)};var vt,wt,bt;return this.negative!==0&&ot.negative===0?(bt=this.neg().divmod(ot,ft),ft!=="mod"&&(vt=bt.div.neg()),ft!=="div"&&(wt=bt.mod.neg(),ht&&wt.negative!==0&&wt.iadd(ot)),{div:vt,mod:wt}):this.negative===0&&ot.negative!==0?(bt=this.divmod(ot.neg(),ft),ft!=="mod"&&(vt=bt.div.neg()),{div:vt,mod:bt.mod}):this.negative&ot.negative?(bt=this.neg().divmod(ot.neg(),ft),ft!=="div"&&(wt=bt.mod.neg(),ht&&wt.negative!==0&&wt.isub(ot)),{div:bt.div,mod:wt}):ot.length>this.length||this.cmp(ot)<0?{div:new it(0),mod:this}:ot.length===1?ft==="div"?{div:this.divn(ot.words[0]),mod:null}:ft==="mod"?{div:null,mod:new it(this.modn(ot.words[0]))}:{div:this.divn(ot.words[0]),mod:new it(this.modn(ot.words[0]))}:this._wordDiv(ot,ft)},it.prototype.div=function(ot){return this.divmod(ot,"div",!1).div},it.prototype.mod=function(ot){return this.divmod(ot,"mod",!1).mod},it.prototype.umod=function(ot){return this.divmod(ot,"mod",!0).mod},it.prototype.divRound=function(ot){var ft=this.divmod(ot);if(ft.mod.isZero())return ft.div;var ht=ft.div.negative!==0?ft.mod.isub(ot):ft.mod,vt=ot.ushrn(1),wt=ot.andln(1),bt=ht.cmp(vt);return bt<0||wt===1&&bt===0?ft.div:ft.div.negative!==0?ft.div.isubn(1):ft.div.iaddn(1)},it.prototype.modn=function(ot){nt(ot<=67108863);for(var ft=(1<<26)%ot,ht=0,vt=this.length-1;vt>=0;vt--)ht=(ft*ht+(this.words[vt]|0))%ot;return ht},it.prototype.idivn=function(ot){nt(ot<=67108863);for(var ft=0,ht=this.length-1;ht>=0;ht--){var vt=(this.words[ht]|0)+ft*67108864;this.words[ht]=vt/ot|0,ft=vt%ot}return this.strip()},it.prototype.divn=function(ot){return this.clone().idivn(ot)},it.prototype.egcd=function(ot){nt(ot.negative===0),nt(!ot.isZero());var ft=this,ht=ot.clone();ft.negative!==0?ft=ft.umod(ot):ft=ft.clone();for(var vt=new it(1),wt=new it(0),bt=new it(0),$t=new it(1),Et=0;ft.isEven()&&ht.isEven();)ft.iushrn(1),ht.iushrn(1),++Et;for(var ct=ht.clone(),St=ft.clone();!ft.isZero();){for(var Mt=0,Lt=1;!(ft.words[0]&Lt)&&Mt<26;++Mt,Lt<<=1);if(Mt>0)for(ft.iushrn(Mt);Mt-- >0;)(vt.isOdd()||wt.isOdd())&&(vt.iadd(ct),wt.isub(St)),vt.iushrn(1),wt.iushrn(1);for(var Ut=0,Kt=1;!(ht.words[0]&Kt)&&Ut<26;++Ut,Kt<<=1);if(Ut>0)for(ht.iushrn(Ut);Ut-- >0;)(bt.isOdd()||$t.isOdd())&&(bt.iadd(ct),$t.isub(St)),bt.iushrn(1),$t.iushrn(1);ft.cmp(ht)>=0?(ft.isub(ht),vt.isub(bt),wt.isub($t)):(ht.isub(ft),bt.isub(vt),$t.isub(wt))}return{a:bt,b:$t,gcd:ht.iushln(Et)}},it.prototype._invmp=function(ot){nt(ot.negative===0),nt(!ot.isZero());var ft=this,ht=ot.clone();ft.negative!==0?ft=ft.umod(ot):ft=ft.clone();for(var vt=new it(1),wt=new it(0),bt=ht.clone();ft.cmpn(1)>0&&ht.cmpn(1)>0;){for(var $t=0,Et=1;!(ft.words[0]&Et)&&$t<26;++$t,Et<<=1);if($t>0)for(ft.iushrn($t);$t-- >0;)vt.isOdd()&&vt.iadd(bt),vt.iushrn(1);for(var ct=0,St=1;!(ht.words[0]&St)&&ct<26;++ct,St<<=1);if(ct>0)for(ht.iushrn(ct);ct-- >0;)wt.isOdd()&&wt.iadd(bt),wt.iushrn(1);ft.cmp(ht)>=0?(ft.isub(ht),vt.isub(wt)):(ht.isub(ft),wt.isub(vt))}var Mt;return ft.cmpn(1)===0?Mt=vt:Mt=wt,Mt.cmpn(0)<0&&Mt.iadd(ot),Mt},it.prototype.gcd=function(ot){if(this.isZero())return ot.abs();if(ot.isZero())return this.abs();var ft=this.clone(),ht=ot.clone();ft.negative=0,ht.negative=0;for(var vt=0;ft.isEven()&&ht.isEven();vt++)ft.iushrn(1),ht.iushrn(1);do{for(;ft.isEven();)ft.iushrn(1);for(;ht.isEven();)ht.iushrn(1);var wt=ft.cmp(ht);if(wt<0){var bt=ft;ft=ht,ht=bt}else if(wt===0||ht.cmpn(1)===0)break;ft.isub(ht)}while(!0);return ht.iushln(vt)},it.prototype.invm=function(ot){return this.egcd(ot).a.umod(ot)},it.prototype.isEven=function(){return(this.words[0]&1)===0},it.prototype.isOdd=function(){return(this.words[0]&1)===1},it.prototype.andln=function(ot){return this.words[0]&ot},it.prototype.bincn=function(ot){nt(typeof ot=="number");var ft=ot%26,ht=(ot-ft)/26,vt=1<<ft;if(this.length<=ht)return this._expand(ht+1),this.words[ht]|=vt,this;for(var wt=vt,bt=ht;wt!==0&&bt<this.length;bt++){var $t=this.words[bt]|0;$t+=wt,wt=$t>>>26,$t&=67108863,this.words[bt]=$t}return wt!==0&&(this.words[bt]=wt,this.length++),this},it.prototype.isZero=function(){return this.length===1&&this.words[0]===0},it.prototype.cmpn=function(ot){var ft=ot<0;if(this.negative!==0&&!ft)return-1;if(this.negative===0&&ft)return 1;this.strip();var ht;if(this.length>1)ht=1;else{ft&&(ot=-ot),nt(ot<=67108863,"Number is too big");var vt=this.words[0]|0;ht=vt===ot?0:vt<ot?-1:1}return this.negative!==0?-ht|0:ht},it.prototype.cmp=function(ot){if(this.negative!==0&&ot.negative===0)return-1;if(this.negative===0&&ot.negative!==0)return 1;var ft=this.ucmp(ot);return this.negative!==0?-ft|0:ft},it.prototype.ucmp=function(ot){if(this.length>ot.length)return 1;if(this.length<ot.length)return-1;for(var ft=0,ht=this.length-1;ht>=0;ht--){var vt=this.words[ht]|0,wt=ot.words[ht]|0;if(vt!==wt){vt<wt?ft=-1:vt>wt&&(ft=1);break}}return ft},it.prototype.gtn=function(ot){return this.cmpn(ot)===1},it.prototype.gt=function(ot){return this.cmp(ot)===1},it.prototype.gten=function(ot){return this.cmpn(ot)>=0},it.prototype.gte=function(ot){return this.cmp(ot)>=0},it.prototype.ltn=function(ot){return this.cmpn(ot)===-1},it.prototype.lt=function(ot){return this.cmp(ot)===-1},it.prototype.lten=function(ot){return this.cmpn(ot)<=0},it.prototype.lte=function(ot){return this.cmp(ot)<=0},it.prototype.eqn=function(ot){return this.cmpn(ot)===0},it.prototype.eq=function(ot){return this.cmp(ot)===0},it.red=function(ot){return new er(ot)},it.prototype.toRed=function(ot){return nt(!this.red,"Already a number in reduction context"),nt(this.negative===0,"red works only with positives"),ot.convertTo(this)._forceRed(ot)},it.prototype.fromRed=function(){return nt(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},it.prototype._forceRed=function(ot){return this.red=ot,this},it.prototype.forceRed=function(ot){return nt(!this.red,"Already a number in reduction context"),this._forceRed(ot)},it.prototype.redAdd=function(ot){return nt(this.red,"redAdd works only with red numbers"),this.red.add(this,ot)},it.prototype.redIAdd=function(ot){return nt(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ot)},it.prototype.redSub=function(ot){return nt(this.red,"redSub works only with red numbers"),this.red.sub(this,ot)},it.prototype.redISub=function(ot){return nt(this.red,"redISub works only with red numbers"),this.red.isub(this,ot)},it.prototype.redShl=function(ot){return nt(this.red,"redShl works only with red numbers"),this.red.shl(this,ot)},it.prototype.redMul=function(ot){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ot),this.red.mul(this,ot)},it.prototype.redIMul=function(ot){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ot),this.red.imul(this,ot)},it.prototype.redSqr=function(){return nt(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},it.prototype.redISqr=function(){return nt(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},it.prototype.redSqrt=function(){return nt(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},it.prototype.redInvm=function(){return nt(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},it.prototype.redNeg=function(){return nt(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},it.prototype.redPow=function(ot){return nt(this.red&&!ot.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ot)};var Pt={k256:null,p224:null,p192:null,p25519:null};function Dt(It,ot){this.name=It,this.p=new it(ot,16),this.n=this.p.bitLength(),this.k=new it(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Dt.prototype._tmp=function(){var ot=new it(null);return ot.words=new Array(Math.ceil(this.n/13)),ot},Dt.prototype.ireduce=function(ot){var ft=ot,ht;do this.split(ft,this.tmp),ft=this.imulK(ft),ft=ft.iadd(this.tmp),ht=ft.bitLength();while(ht>this.n);var vt=ht<this.n?-1:ft.ucmp(this.p);return vt===0?(ft.words[0]=0,ft.length=1):vt>0?ft.isub(this.p):ft.strip!==void 0?ft.strip():ft._strip(),ft},Dt.prototype.split=function(ot,ft){ot.iushrn(this.n,0,ft)},Dt.prototype.imulK=function(ot){return ot.imul(this.k)};function Gt(){Dt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}at(Gt,Dt),Gt.prototype.split=function(ot,ft){for(var ht=4194303,vt=Math.min(ot.length,9),wt=0;wt<vt;wt++)ft.words[wt]=ot.words[wt];if(ft.length=vt,ot.length<=9){ot.words[0]=0,ot.length=1;return}var bt=ot.words[9];for(ft.words[ft.length++]=bt&ht,wt=10;wt<ot.length;wt++){var $t=ot.words[wt]|0;ot.words[wt-10]=($t&ht)<<4|bt>>>22,bt=$t}bt>>>=22,ot.words[wt-10]=bt,bt===0&&ot.length>10?ot.length-=10:ot.length-=9},Gt.prototype.imulK=function(ot){ot.words[ot.length]=0,ot.words[ot.length+1]=0,ot.length+=2;for(var ft=0,ht=0;ht<ot.length;ht++){var vt=ot.words[ht]|0;ft+=vt*977,ot.words[ht]=ft&67108863,ft=vt*64+(ft/67108864|0)}return ot.words[ot.length-1]===0&&(ot.length--,ot.words[ot.length-1]===0&&ot.length--),ot};function jt(){Dt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}at(jt,Dt);function Yt(){Dt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}at(Yt,Dt);function tr(){Dt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}at(tr,Dt),tr.prototype.imulK=function(ot){for(var ft=0,ht=0;ht<ot.length;ht++){var vt=(ot.words[ht]|0)*19+ft,wt=vt&67108863;vt>>>=26,ot.words[ht]=wt,ft=vt}return ft!==0&&(ot.words[ot.length++]=ft),ot},it._prime=function(ot){if(Pt[ot])return Pt[ot];var ft;if(ot==="k256")ft=new Gt;else if(ot==="p224")ft=new jt;else if(ot==="p192")ft=new Yt;else if(ot==="p25519")ft=new tr;else throw new Error("Unknown prime "+ot);return Pt[ot]=ft,ft};function er(It){if(typeof It=="string"){var ot=it._prime(It);this.m=ot.p,this.prime=ot}else nt(It.gtn(1),"modulus must be greater than 1"),this.m=It,this.prime=null}er.prototype._verify1=function(ot){nt(ot.negative===0,"red works only with positives"),nt(ot.red,"red works only with red numbers")},er.prototype._verify2=function(ot,ft){nt((ot.negative|ft.negative)===0,"red works only with positives"),nt(ot.red&&ot.red===ft.red,"red works only with red numbers")},er.prototype.imod=function(ot){return this.prime?this.prime.ireduce(ot)._forceRed(this):ot.umod(this.m)._forceRed(this)},er.prototype.neg=function(ot){return ot.isZero()?ot.clone():this.m.sub(ot)._forceRed(this)},er.prototype.add=function(ot,ft){this._verify2(ot,ft);var ht=ot.add(ft);return ht.cmp(this.m)>=0&&ht.isub(this.m),ht._forceRed(this)},er.prototype.iadd=function(ot,ft){this._verify2(ot,ft);var ht=ot.iadd(ft);return ht.cmp(this.m)>=0&&ht.isub(this.m),ht},er.prototype.sub=function(ot,ft){this._verify2(ot,ft);var ht=ot.sub(ft);return ht.cmpn(0)<0&&ht.iadd(this.m),ht._forceRed(this)},er.prototype.isub=function(ot,ft){this._verify2(ot,ft);var ht=ot.isub(ft);return ht.cmpn(0)<0&&ht.iadd(this.m),ht},er.prototype.shl=function(ot,ft){return this._verify1(ot),this.imod(ot.ushln(ft))},er.prototype.imul=function(ot,ft){return this._verify2(ot,ft),this.imod(ot.imul(ft))},er.prototype.mul=function(ot,ft){return this._verify2(ot,ft),this.imod(ot.mul(ft))},er.prototype.isqr=function(ot){return this.imul(ot,ot.clone())},er.prototype.sqr=function(ot){return this.mul(ot,ot)},er.prototype.sqrt=function(ot){if(ot.isZero())return ot.clone();var ft=this.m.andln(3);if(nt(ft%2===1),ft===3){var ht=this.m.add(new it(1)).iushrn(2);return this.pow(ot,ht)}for(var vt=this.m.subn(1),wt=0;!vt.isZero()&&vt.andln(1)===0;)wt++,vt.iushrn(1);nt(!vt.isZero());var bt=new it(1).toRed(this),$t=bt.redNeg(),Et=this.m.subn(1).iushrn(1),ct=this.m.bitLength();for(ct=new it(2*ct*ct).toRed(this);this.pow(ct,Et).cmp($t)!==0;)ct.redIAdd($t);for(var St=this.pow(ct,vt),Mt=this.pow(ot,vt.addn(1).iushrn(1)),Lt=this.pow(ot,vt),Ut=wt;Lt.cmp(bt)!==0;){for(var Kt=Lt,Ht=0;Kt.cmp(bt)!==0;Ht++)Kt=Kt.redSqr();nt(Ht<Ut);var Ft=this.pow(St,new it(1).iushln(Ut-Ht-1));Mt=Mt.redMul(Ft),St=Ft.redSqr(),Lt=Lt.redMul(St),Ut=Ht}return Mt},er.prototype.invm=function(ot){var ft=ot._invmp(this.m);return ft.negative!==0?(ft.negative=0,this.imod(ft).redNeg()):this.imod(ft)},er.prototype.pow=function(ot,ft){if(ft.isZero())return new it(1).toRed(this);if(ft.cmpn(1)===0)return ot.clone();var ht=4,vt=new Array(1<<ht);vt[0]=new it(1).toRed(this),vt[1]=ot;for(var wt=2;wt<vt.length;wt++)vt[wt]=this.mul(vt[wt-1],ot);var bt=vt[0],$t=0,Et=0,ct=ft.bitLength()%26;for(ct===0&&(ct=26),wt=ft.length-1;wt>=0;wt--){for(var St=ft.words[wt],Mt=ct-1;Mt>=0;Mt--){var Lt=St>>Mt&1;if(bt!==vt[0]&&(bt=this.sqr(bt)),Lt===0&&$t===0){Et=0;continue}$t<<=1,$t|=Lt,Et++,!(Et!==ht&&(wt!==0||Mt!==0))&&(bt=this.mul(bt,vt[$t]),Et=0,$t=0)}ct=26}return bt},er.prototype.convertTo=function(ot){var ft=ot.umod(this.m);return ft===ot?ft.clone():ft},er.prototype.convertFrom=function(ot){var ft=ot.clone();return ft.red=null,ft},it.mont=function(ot){return new lr(ot)};function lr(It){er.call(this,It),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new it(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}at(lr,er),lr.prototype.convertTo=function(ot){return this.imod(ot.ushln(this.shift))},lr.prototype.convertFrom=function(ot){var ft=this.imod(ot.mul(this.rinv));return ft.red=null,ft},lr.prototype.imul=function(ot,ft){if(ot.isZero()||ft.isZero())return ot.words[0]=0,ot.length=1,ot;var ht=ot.imul(ft),vt=ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),wt=ht.isub(vt).iushrn(this.shift),bt=wt;return wt.cmp(this.m)>=0?bt=wt.isub(this.m):wt.cmpn(0)<0&&(bt=wt.iadd(this.m)),bt._forceRed(this)},lr.prototype.mul=function(ot,ft){if(ot.isZero()||ft.isZero())return new it(0)._forceRed(this);var ht=ot.mul(ft),vt=ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),wt=ht.isub(vt).iushrn(this.shift),bt=wt;return wt.cmp(this.m)>=0?bt=wt.isub(this.m):wt.cmpn(0)<0&&(bt=wt.iadd(this.m)),bt._forceRed(this)},lr.prototype.invm=function(ot){var ft=this.imod(ot._invmp(this.m).mul(this.r2));return ft._forceRed(this)}})(tt,commonjsGlobal$1)}(bn$2)),bn$2.exports}var api={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(tt,et){if(tt.indexOf)return tt.indexOf(et);for(var rt=0;rt<tt.length;rt++)if(tt[rt]===et)return rt;return-1},Object_keys=function(tt){if(Object.keys)return Object.keys(tt);var et=[];for(var rt in tt)et.push(rt);return et},forEach=function(tt,et){if(tt.forEach)return tt.forEach(et);for(var rt=0;rt<tt.length;rt++)et(tt[rt],rt,tt)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(tt,et,rt){Object.defineProperty(tt,et,{writable:!0,enumerable:!1,configurable:!0,value:rt})}}catch{return function(et,rt,nt){et[rt]=nt}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(et){if(!(this instanceof Script))return new Script(et);this.code=et};Script.prototype.runInContext=function(tt){if(!(tt instanceof Context))throw new TypeError("needs a 'context' argument.");var et=document.createElement("iframe");et.style||(et.style={}),et.style.display="none",document.body.appendChild(et);var rt=et.contentWindow,nt=rt.eval,at=rt.execScript;!nt&&at&&(at.call(rt,"null"),nt=rt.eval),forEach(Object_keys(tt),function(dt){rt[dt]=tt[dt]}),forEach(globals,function(dt){tt[dt]&&(rt[dt]=tt[dt])});var it=Object_keys(rt),st=nt.call(rt,this.code);return forEach(Object_keys(rt),function(dt){(dt in tt||indexOf(it,dt)===-1)&&(tt[dt]=rt[dt])}),forEach(globals,function(dt){dt in tt||defineProp(tt,dt,rt[dt])}),document.body.removeChild(et),st},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(tt){var et=Script.createContext(tt),rt=this.runInContext(et);return tt&&forEach(Object_keys(et),function(nt){tt[nt]=et[nt]}),rt},forEach(Object_keys(Script.prototype),function(tt){exports[tt]=Script[tt]=function(et){var rt=Script(et);return rt[tt].apply(rt,[].slice.call(arguments,1))}}),exports.isContext=function(tt){return tt instanceof Context},exports.createScript=function(tt){return exports.Script(tt)},exports.createContext=Script.createContext=function(tt){var et=new Context;return typeof tt=="object"&&forEach(Object_keys(tt),function(rt){et[rt]=tt[rt]}),et}}(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(tt){var et=requireAsn1$1(),rt=requireInherits_browser(),nt=tt;nt.define=function(st,dt){return new at(st,dt)};function at(it,st){this.name=it,this.body=st,this.decoders={},this.encoders={}}at.prototype._createNamed=function(st){var dt;try{dt=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{dt=function(mt){this._initNamed(mt)}}return rt(dt,st),dt.prototype._initNamed=function(mt){st.call(this,mt)},new dt(this)},at.prototype._getDecoder=function(st){return st=st||"der",this.decoders.hasOwnProperty(st)||(this.decoders[st]=this._createNamed(et.decoders[st])),this.decoders[st]},at.prototype.decode=function(st,dt,pt){return this._getDecoder(dt).decode(st,pt)},at.prototype._getEncoder=function(st){return st=st||"der",this.encoders.hasOwnProperty(st)||(this.encoders[st]=this._createNamed(et.encoders[st])),this.encoders[st]},at.prototype.encode=function(st,dt,pt){return this._getEncoder(dt).encode(st,pt)}}(api)),api}var base$3={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var tt=requireInherits_browser();function et(nt){this._reporterState={obj:null,path:[],options:nt||{},errors:[]}}reporter.Reporter=et,et.prototype.isError=function(at){return at instanceof rt},et.prototype.save=function(){var at=this._reporterState;return{obj:at.obj,pathLen:at.path.length}},et.prototype.restore=function(at){var it=this._reporterState;it.obj=at.obj,it.path=it.path.slice(0,at.pathLen)},et.prototype.enterKey=function(at){return this._reporterState.path.push(at)},et.prototype.exitKey=function(at){var it=this._reporterState;it.path=it.path.slice(0,at-1)},et.prototype.leaveKey=function(at,it,st){var dt=this._reporterState;this.exitKey(at),dt.obj!==null&&(dt.obj[it]=st)},et.prototype.path=function(){return this._reporterState.path.join("/")},et.prototype.enterObject=function(){var at=this._reporterState,it=at.obj;return at.obj={},it},et.prototype.leaveObject=function(at){var it=this._reporterState,st=it.obj;return it.obj=at,st},et.prototype.error=function(at){var it,st=this._reporterState,dt=at instanceof rt;if(dt?it=at:it=new rt(st.path.map(function(pt){return"["+JSON.stringify(pt)+"]"}).join(""),at.message||at,at.stack),!st.options.partial)throw it;return dt||st.errors.push(it),it},et.prototype.wrapResult=function(at){var it=this._reporterState;return it.options.partial?{result:this.isError(at)?null:at,errors:it.errors}:at};function rt(nt,at){this.path=nt,this.rethrow(at)}return tt(rt,Error),rt.prototype.rethrow=function(at){if(this.message=at+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,rt),!this.stack)try{throw new Error(this.message)}catch(it){this.stack=it.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var tt=requireInherits_browser(),et=requireBase().Reporter,rt=require$$0$2.Buffer;function nt(it,st){if(et.call(this,st),!rt.isBuffer(it)){this.error("Input not Buffer");return}this.base=it,this.offset=0,this.length=it.length}tt(nt,et),buffer.DecoderBuffer=nt,nt.prototype.save=function(){return{offset:this.offset,reporter:et.prototype.save.call(this)}},nt.prototype.restore=function(st){var dt=new nt(this.base);return dt.offset=st.offset,dt.length=this.offset,this.offset=st.offset,et.prototype.restore.call(this,st.reporter),dt},nt.prototype.isEmpty=function(){return this.offset===this.length},nt.prototype.readUInt8=function(st){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(st||"DecoderBuffer overrun")},nt.prototype.skip=function(st,dt){if(!(this.offset+st<=this.length))return this.error(dt||"DecoderBuffer overrun");var pt=new nt(this.base);return pt._reporterState=this._reporterState,pt.offset=this.offset,pt.length=this.offset+st,this.offset+=st,pt},nt.prototype.raw=function(st){return this.base.slice(st?st.offset:this.offset,this.length)};function at(it,st){if(Array.isArray(it))this.length=0,this.value=it.map(function(dt){return dt instanceof at||(dt=new at(dt,st)),this.length+=dt.length,dt},this);else if(typeof it=="number"){if(!(0<=it&&it<=255))return st.error("non-byte EncoderBuffer value");this.value=it,this.length=1}else if(typeof it=="string")this.value=it,this.length=rt.byteLength(it);else if(rt.isBuffer(it))this.value=it,this.length=it.length;else return st.error("Unsupported type: "+typeof it)}return buffer.EncoderBuffer=at,at.prototype.join=function(st,dt){return st||(st=new rt(this.length)),dt||(dt=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(pt){pt.join(st,dt),dt+=pt.length}):(typeof this.value=="number"?st[dt]=this.value:typeof this.value=="string"?st.write(this.value,dt):rt.isBuffer(this.value)&&this.value.copy(st,dt),dt+=this.length)),st},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var tt=requireBase().Reporter,et=requireBase().EncoderBuffer,rt=requireBase().DecoderBuffer,nt=requireMinimalisticAssert(),at=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],it=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(at),st=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function dt(mt,yt){var Rt={};this._baseState=Rt,Rt.enc=mt,Rt.parent=yt||null,Rt.children=null,Rt.tag=null,Rt.args=null,Rt.reverseArgs=null,Rt.choice=null,Rt.optional=!1,Rt.any=!1,Rt.obj=!1,Rt.use=null,Rt.useDecoder=null,Rt.key=null,Rt.default=null,Rt.explicit=null,Rt.implicit=null,Rt.contains=null,Rt.parent||(Rt.children=[],this._wrap())}node=dt;var pt=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return dt.prototype.clone=function(){var yt=this._baseState,Rt={};pt.forEach(function(At){Rt[At]=yt[At]});var Tt=new this.constructor(Rt.parent);return Tt._baseState=Rt,Tt},dt.prototype._wrap=function(){var yt=this._baseState;it.forEach(function(Rt){this[Rt]=function(){var At=new this.constructor(this);return yt.children.push(At),At[Rt].apply(At,arguments)}},this)},dt.prototype._init=function(yt){var Rt=this._baseState;nt(Rt.parent===null),yt.call(this),Rt.children=Rt.children.filter(function(Tt){return Tt._baseState.parent===this},this),nt.equal(Rt.children.length,1,"Root node can have only one child")},dt.prototype._useArgs=function(yt){var Rt=this._baseState,Tt=yt.filter(function(At){return At instanceof this.constructor},this);yt=yt.filter(function(At){return!(At instanceof this.constructor)},this),Tt.length!==0&&(nt(Rt.children===null),Rt.children=Tt,Tt.forEach(function(At){At._baseState.parent=this},this)),yt.length!==0&&(nt(Rt.args===null),Rt.args=yt,Rt.reverseArgs=yt.map(function(At){if(typeof At!="object"||At.constructor!==Object)return At;var xt={};return Object.keys(At).forEach(function(Nt){Nt==(Nt|0)&&(Nt|=0);var Ct=At[Nt];xt[Ct]=Nt}),xt}))},st.forEach(function(mt){dt.prototype[mt]=function(){var Rt=this._baseState;throw new Error(mt+" not implemented for encoding: "+Rt.enc)}}),at.forEach(function(mt){dt.prototype[mt]=function(){var Rt=this._baseState,Tt=Array.prototype.slice.call(arguments);return nt(Rt.tag===null),Rt.tag=mt,this._useArgs(Tt),this}}),dt.prototype.use=function(yt){nt(yt);var Rt=this._baseState;return nt(Rt.use===null),Rt.use=yt,this},dt.prototype.optional=function(){var yt=this._baseState;return yt.optional=!0,this},dt.prototype.def=function(yt){var Rt=this._baseState;return nt(Rt.default===null),Rt.default=yt,Rt.optional=!0,this},dt.prototype.explicit=function(yt){var Rt=this._baseState;return nt(Rt.explicit===null&&Rt.implicit===null),Rt.explicit=yt,this},dt.prototype.implicit=function(yt){var Rt=this._baseState;return nt(Rt.explicit===null&&Rt.implicit===null),Rt.implicit=yt,this},dt.prototype.obj=function(){var yt=this._baseState,Rt=Array.prototype.slice.call(arguments);return yt.obj=!0,Rt.length!==0&&this._useArgs(Rt),this},dt.prototype.key=function(yt){var Rt=this._baseState;return nt(Rt.key===null),Rt.key=yt,this},dt.prototype.any=function(){var yt=this._baseState;return yt.any=!0,this},dt.prototype.choice=function(yt){var Rt=this._baseState;return nt(Rt.choice===null),Rt.choice=yt,this._useArgs(Object.keys(yt).map(function(Tt){return yt[Tt]})),this},dt.prototype.contains=function(yt){var Rt=this._baseState;return nt(Rt.use===null),Rt.contains=yt,this},dt.prototype._decode=function(yt,Rt){var Tt=this._baseState;if(Tt.parent===null)return yt.wrapResult(Tt.children[0]._decode(yt,Rt));var At=Tt.default,xt=!0,Nt=null;if(Tt.key!==null&&(Nt=yt.enterKey(Tt.key)),Tt.optional){var Ct=null;if(Tt.explicit!==null?Ct=Tt.explicit:Tt.implicit!==null?Ct=Tt.implicit:Tt.tag!==null&&(Ct=Tt.tag),Ct===null&&!Tt.any){var Ot=yt.save();try{Tt.choice===null?this._decodeGeneric(Tt.tag,yt,Rt):this._decodeChoice(yt,Rt),xt=!0}catch{xt=!1}yt.restore(Ot)}else if(xt=this._peekTag(yt,Ct,Tt.any),yt.isError(xt))return xt}var kt;if(Tt.obj&&xt&&(kt=yt.enterObject()),xt){if(Tt.explicit!==null){var Pt=this._decodeTag(yt,Tt.explicit);if(yt.isError(Pt))return Pt;yt=Pt}var Dt=yt.offset;if(Tt.use===null&&Tt.choice===null){if(Tt.any)var Ot=yt.save();var Gt=this._decodeTag(yt,Tt.implicit!==null?Tt.implicit:Tt.tag,Tt.any);if(yt.isError(Gt))return Gt;Tt.any?At=yt.raw(Ot):yt=Gt}if(Rt&&Rt.track&&Tt.tag!==null&&Rt.track(yt.path(),Dt,yt.length,"tagged"),Rt&&Rt.track&&Tt.tag!==null&&Rt.track(yt.path(),yt.offset,yt.length,"content"),Tt.any?At=At:Tt.choice===null?At=this._decodeGeneric(Tt.tag,yt,Rt):At=this._decodeChoice(yt,Rt),yt.isError(At))return At;if(!Tt.any&&Tt.choice===null&&Tt.children!==null&&Tt.children.forEach(function(tr){tr._decode(yt,Rt)}),Tt.contains&&(Tt.tag==="octstr"||Tt.tag==="bitstr")){var jt=new rt(At);At=this._getUse(Tt.contains,yt._reporterState.obj)._decode(jt,Rt)}}return Tt.obj&&xt&&(At=yt.leaveObject(kt)),Tt.key!==null&&(At!==null||xt===!0)?yt.leaveKey(Nt,Tt.key,At):Nt!==null&&yt.exitKey(Nt),At},dt.prototype._decodeGeneric=function(yt,Rt,Tt){var At=this._baseState;return yt==="seq"||yt==="set"?null:yt==="seqof"||yt==="setof"?this._decodeList(Rt,yt,At.args[0],Tt):/str$/.test(yt)?this._decodeStr(Rt,yt,Tt):yt==="objid"&&At.args?this._decodeObjid(Rt,At.args[0],At.args[1],Tt):yt==="objid"?this._decodeObjid(Rt,null,null,Tt):yt==="gentime"||yt==="utctime"?this._decodeTime(Rt,yt,Tt):yt==="null_"?this._decodeNull(Rt,Tt):yt==="bool"?this._decodeBool(Rt,Tt):yt==="objDesc"?this._decodeStr(Rt,yt,Tt):yt==="int"||yt==="enum"?this._decodeInt(Rt,At.args&&At.args[0],Tt):At.use!==null?this._getUse(At.use,Rt._reporterState.obj)._decode(Rt,Tt):Rt.error("unknown tag: "+yt)},dt.prototype._getUse=function(yt,Rt){var Tt=this._baseState;return Tt.useDecoder=this._use(yt,Rt),nt(Tt.useDecoder._baseState.parent===null),Tt.useDecoder=Tt.useDecoder._baseState.children[0],Tt.implicit!==Tt.useDecoder._baseState.implicit&&(Tt.useDecoder=Tt.useDecoder.clone(),Tt.useDecoder._baseState.implicit=Tt.implicit),Tt.useDecoder},dt.prototype._decodeChoice=function(yt,Rt){var Tt=this._baseState,At=null,xt=!1;return Object.keys(Tt.choice).some(function(Nt){var Ct=yt.save(),Ot=Tt.choice[Nt];try{var kt=Ot._decode(yt,Rt);if(yt.isError(kt))return!1;At={type:Nt,value:kt},xt=!0}catch{return yt.restore(Ct),!1}return!0},this),xt?At:yt.error("Choice not matched")},dt.prototype._createEncoderBuffer=function(yt){return new et(yt,this.reporter)},dt.prototype._encode=function(yt,Rt,Tt){var At=this._baseState;if(!(At.default!==null&&At.default===yt)){var xt=this._encodeValue(yt,Rt,Tt);if(xt!==void 0&&!this._skipDefault(xt,Rt,Tt))return xt}},dt.prototype._encodeValue=function(yt,Rt,Tt){var At=this._baseState;if(At.parent===null)return At.children[0]._encode(yt,Rt||new tt);var Ot=null;if(this.reporter=Rt,At.optional&&yt===void 0)if(At.default!==null)yt=At.default;else return;var xt=null,Nt=!1;if(At.any)Ot=this._createEncoderBuffer(yt);else if(At.choice)Ot=this._encodeChoice(yt,Rt);else if(At.contains)xt=this._getUse(At.contains,Tt)._encode(yt,Rt),Nt=!0;else if(At.children)xt=At.children.map(function(Dt){if(Dt._baseState.tag==="null_")return Dt._encode(null,Rt,yt);if(Dt._baseState.key===null)return Rt.error("Child should have a key");var Gt=Rt.enterKey(Dt._baseState.key);if(typeof yt!="object")return Rt.error("Child expected, but input is not object");var jt=Dt._encode(yt[Dt._baseState.key],Rt,yt);return Rt.leaveKey(Gt),jt},this).filter(function(Dt){return Dt}),xt=this._createEncoderBuffer(xt);else if(At.tag==="seqof"||At.tag==="setof"){if(!(At.args&&At.args.length===1))return Rt.error("Too many args for : "+At.tag);if(!Array.isArray(yt))return Rt.error("seqof/setof, but data is not Array");var Ct=this.clone();Ct._baseState.implicit=null,xt=this._createEncoderBuffer(yt.map(function(Dt){var Gt=this._baseState;return this._getUse(Gt.args[0],yt)._encode(Dt,Rt)},Ct))}else At.use!==null?Ot=this._getUse(At.use,Tt)._encode(yt,Rt):(xt=this._encodePrimitive(At.tag,yt),Nt=!0);var Ot;if(!At.any&&At.choice===null){var kt=At.implicit!==null?At.implicit:At.tag,Pt=At.implicit===null?"universal":"context";kt===null?At.use===null&&Rt.error("Tag could be omitted only for .use()"):At.use===null&&(Ot=this._encodeComposite(kt,Nt,Pt,xt))}return At.explicit!==null&&(Ot=this._encodeComposite(At.explicit,!1,"context",Ot)),Ot},dt.prototype._encodeChoice=function(yt,Rt){var Tt=this._baseState,At=Tt.choice[yt.type];return At||nt(!1,yt.type+" not found in "+JSON.stringify(Object.keys(Tt.choice))),At._encode(yt.value,Rt)},dt.prototype._encodePrimitive=function(yt,Rt){var Tt=this._baseState;if(/str$/.test(yt))return this._encodeStr(Rt,yt);if(yt==="objid"&&Tt.args)return this._encodeObjid(Rt,Tt.reverseArgs[0],Tt.args[1]);if(yt==="objid")return this._encodeObjid(Rt,null,null);if(yt==="gentime"||yt==="utctime")return this._encodeTime(Rt,yt);if(yt==="null_")return this._encodeNull();if(yt==="int"||yt==="enum")return this._encodeInt(Rt,Tt.args&&Tt.reverseArgs[0]);if(yt==="bool")return this._encodeBool(Rt);if(yt==="objDesc")return this._encodeStr(Rt,yt);throw new Error("Unsupported tag: "+yt)},dt.prototype._isNumstr=function(yt){return/^[0-9 ]*$/.test(yt)},dt.prototype._isPrintstr=function(yt){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(yt)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(tt){var et=tt;et.Reporter=requireReporter().Reporter,et.DecoderBuffer=requireBuffer().DecoderBuffer,et.EncoderBuffer=requireBuffer().EncoderBuffer,et.Node=requireNode()}(base$3)),base$3}var constants$1={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(tt){var et=requireConstants();tt.tagClass={0:"universal",1:"application",2:"context",3:"private"},tt.tagClassByName=et._reverse(tt.tagClass),tt.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},tt.tagByName=et._reverse(tt.tag)}(der)),der}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(tt){var et=tt;et._reverse=function(nt){var at={};return Object.keys(nt).forEach(function(it){(it|0)==it&&(it=it|0);var st=nt[it];at[st]=it}),at},et.der=requireDer$2()}(constants$1)),constants$1}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var tt=requireInherits_browser(),et=requireAsn1$1(),rt=et.base,nt=et.bignum,at=et.constants.der;function it(mt){this.enc="der",this.name=mt.name,this.entity=mt,this.tree=new st,this.tree._init(mt.body)}der_1$1=it,it.prototype.decode=function(yt,Rt){return yt instanceof rt.DecoderBuffer||(yt=new rt.DecoderBuffer(yt,Rt)),this.tree._decode(yt,Rt)};function st(mt){rt.Node.call(this,"der",mt)}tt(st,rt.Node),st.prototype._peekTag=function(yt,Rt,Tt){if(yt.isEmpty())return!1;var At=yt.save(),xt=dt(yt,'Failed to peek tag: "'+Rt+'"');return yt.isError(xt)?xt:(yt.restore(At),xt.tag===Rt||xt.tagStr===Rt||xt.tagStr+"of"===Rt||Tt)},st.prototype._decodeTag=function(yt,Rt,Tt){var At=dt(yt,'Failed to decode tag of "'+Rt+'"');if(yt.isError(At))return At;var xt=pt(yt,At.primitive,'Failed to get length of "'+Rt+'"');if(yt.isError(xt))return xt;if(!Tt&&At.tag!==Rt&&At.tagStr!==Rt&&At.tagStr+"of"!==Rt)return yt.error('Failed to match tag: "'+Rt+'"');if(At.primitive||xt!==null)return yt.skip(xt,'Failed to match body of: "'+Rt+'"');var Nt=yt.save(),Ct=this._skipUntilEnd(yt,'Failed to skip indefinite length body: "'+this.tag+'"');return yt.isError(Ct)?Ct:(xt=yt.offset-Nt.offset,yt.restore(Nt),yt.skip(xt,'Failed to match body of: "'+Rt+'"'))},st.prototype._skipUntilEnd=function(yt,Rt){for(;;){var Tt=dt(yt,Rt);if(yt.isError(Tt))return Tt;var At=pt(yt,Tt.primitive,Rt);if(yt.isError(At))return At;var xt;if(Tt.primitive||At!==null?xt=yt.skip(At):xt=this._skipUntilEnd(yt,Rt),yt.isError(xt))return xt;if(Tt.tagStr==="end")break}},st.prototype._decodeList=function(yt,Rt,Tt,At){for(var xt=[];!yt.isEmpty();){var Nt=this._peekTag(yt,"end");if(yt.isError(Nt))return Nt;var Ct=Tt.decode(yt,"der",At);if(yt.isError(Ct)&&Nt)break;xt.push(Ct)}return xt},st.prototype._decodeStr=function(yt,Rt){if(Rt==="bitstr"){var Tt=yt.readUInt8();return yt.isError(Tt)?Tt:{unused:Tt,data:yt.raw()}}else if(Rt==="bmpstr"){var At=yt.raw();if(At.length%2===1)return yt.error("Decoding of string type: bmpstr length mismatch");for(var xt="",Nt=0;Nt<At.length/2;Nt++)xt+=String.fromCharCode(At.readUInt16BE(Nt*2));return xt}else if(Rt==="numstr"){var Ct=yt.raw().toString("ascii");return this._isNumstr(Ct)?Ct:yt.error("Decoding of string type: numstr unsupported characters")}else{if(Rt==="octstr")return yt.raw();if(Rt==="objDesc")return yt.raw();if(Rt==="printstr"){var Ot=yt.raw().toString("ascii");return this._isPrintstr(Ot)?Ot:yt.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(Rt)?yt.raw().toString():yt.error("Decoding of string type: "+Rt+" unsupported")}},st.prototype._decodeObjid=function(yt,Rt,Tt){for(var At,xt=[],Nt=0;!yt.isEmpty();){var Ct=yt.readUInt8();Nt<<=7,Nt|=Ct&127,Ct&128||(xt.push(Nt),Nt=0)}Ct&128&&xt.push(Nt);var Ot=xt[0]/40|0,kt=xt[0]%40;if(Tt?At=xt:At=[Ot,kt].concat(xt.slice(1)),Rt){var Pt=Rt[At.join(" ")];Pt===void 0&&(Pt=Rt[At.join(".")]),Pt!==void 0&&(At=Pt)}return At},st.prototype._decodeTime=function(yt,Rt){var Tt=yt.raw().toString();if(Rt==="gentime")var At=Tt.slice(0,4)|0,xt=Tt.slice(4,6)|0,Nt=Tt.slice(6,8)|0,Ct=Tt.slice(8,10)|0,Ot=Tt.slice(10,12)|0,kt=Tt.slice(12,14)|0;else if(Rt==="utctime"){var At=Tt.slice(0,2)|0,xt=Tt.slice(2,4)|0,Nt=Tt.slice(4,6)|0,Ct=Tt.slice(6,8)|0,Ot=Tt.slice(8,10)|0,kt=Tt.slice(10,12)|0;At<70?At=2e3+At:At=1900+At}else return yt.error("Decoding "+Rt+" time is not supported yet");return Date.UTC(At,xt-1,Nt,Ct,Ot,kt,0)},st.prototype._decodeNull=function(yt){return null},st.prototype._decodeBool=function(yt){var Rt=yt.readUInt8();return yt.isError(Rt)?Rt:Rt!==0},st.prototype._decodeInt=function(yt,Rt){var Tt=yt.raw(),At=new nt(Tt);return Rt&&(At=Rt[At.toString(10)]||At),At},st.prototype._use=function(yt,Rt){return typeof yt=="function"&&(yt=yt(Rt)),yt._getDecoder("der").tree};function dt(mt,yt){var Rt=mt.readUInt8(yt);if(mt.isError(Rt))return Rt;var Tt=at.tagClass[Rt>>6],At=(Rt&32)===0;if((Rt&31)===31){var xt=Rt;for(Rt=0;(xt&128)===128;){if(xt=mt.readUInt8(yt),mt.isError(xt))return xt;Rt<<=7,Rt|=xt&127}}else Rt&=31;var Nt=at.tag[Rt];return{cls:Tt,primitive:At,tag:Rt,tagStr:Nt}}function pt(mt,yt,Rt){var Tt=mt.readUInt8(Rt);if(mt.isError(Tt))return Tt;if(!yt&&Tt===128)return null;if(!(Tt&128))return Tt;var At=Tt&127;if(At>4)return mt.error("length octect is too long");Tt=0;for(var xt=0;xt<At;xt++){Tt<<=8;var Nt=mt.readUInt8(Rt);if(mt.isError(Nt))return Nt;Tt|=Nt}return Tt}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var tt=requireInherits_browser(),et=require$$0$2.Buffer,rt=requireDer$1();function nt(at){rt.call(this,at),this.enc="pem"}return tt(nt,rt),pem$1=nt,nt.prototype.decode=function(it,st){for(var dt=it.toString().split(/[\r\n]+/g),pt=st.label.toUpperCase(),mt=/^-----(BEGIN|END) ([^-]+)-----$/,yt=-1,Rt=-1,Tt=0;Tt<dt.length;Tt++){var At=dt[Tt].match(mt);if(At!==null&&At[2]===pt)if(yt===-1){if(At[1]!=="BEGIN")break;yt=Tt}else{if(At[1]!=="END")break;Rt=Tt;break}}if(yt===-1||Rt===-1)throw new Error("PEM section not found for: "+pt);var xt=dt.slice(yt+1,Rt).join("");xt.replace(/[^a-z0-9\+\/=]+/gi,"");var Nt=new et(xt,"base64");return rt.prototype.decode.call(this,Nt,st)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(tt){var et=tt;et.der=requireDer$1(),et.pem=requirePem$1()}(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var tt=requireInherits_browser(),et=require$$0$2.Buffer,rt=requireAsn1$1(),nt=rt.base,at=rt.constants.der;function it(mt){this.enc="der",this.name=mt.name,this.entity=mt,this.tree=new st,this.tree._init(mt.body)}der_1=it,it.prototype.encode=function(yt,Rt){return this.tree._encode(yt,Rt).join()};function st(mt){nt.Node.call(this,"der",mt)}tt(st,nt.Node),st.prototype._encodeComposite=function(yt,Rt,Tt,At){var xt=pt(yt,Rt,Tt,this.reporter);if(At.length<128){var Ot=new et(2);return Ot[0]=xt,Ot[1]=At.length,this._createEncoderBuffer([Ot,At])}for(var Nt=1,Ct=At.length;Ct>=256;Ct>>=8)Nt++;var Ot=new et(2+Nt);Ot[0]=xt,Ot[1]=128|Nt;for(var Ct=1+Nt,kt=At.length;kt>0;Ct--,kt>>=8)Ot[Ct]=kt&255;return this._createEncoderBuffer([Ot,At])},st.prototype._encodeStr=function(yt,Rt){if(Rt==="bitstr")return this._createEncoderBuffer([yt.unused|0,yt.data]);if(Rt==="bmpstr"){for(var Tt=new et(yt.length*2),At=0;At<yt.length;At++)Tt.writeUInt16BE(yt.charCodeAt(At),At*2);return this._createEncoderBuffer(Tt)}else return Rt==="numstr"?this._isNumstr(yt)?this._createEncoderBuffer(yt):this.reporter.error("Encoding of string type: numstr supports only digits and space"):Rt==="printstr"?this._isPrintstr(yt)?this._createEncoderBuffer(yt):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(Rt)?this._createEncoderBuffer(yt):Rt==="objDesc"?this._createEncoderBuffer(yt):this.reporter.error("Encoding of string type: "+Rt+" unsupported")},st.prototype._encodeObjid=function(yt,Rt,Tt){if(typeof yt=="string"){if(!Rt)return this.reporter.error("string objid given, but no values map found");if(!Rt.hasOwnProperty(yt))return this.reporter.error("objid not found in values map");yt=Rt[yt].split(/[\s\.]+/g);for(var At=0;At<yt.length;At++)yt[At]|=0}else if(Array.isArray(yt)){yt=yt.slice();for(var At=0;At<yt.length;At++)yt[At]|=0}if(!Array.isArray(yt))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(yt));if(!Tt){if(yt[1]>=40)return this.reporter.error("Second objid identifier OOB");yt.splice(0,2,yt[0]*40+yt[1])}for(var xt=0,At=0;At<yt.length;At++){var Nt=yt[At];for(xt++;Nt>=128;Nt>>=7)xt++}for(var Ct=new et(xt),Ot=Ct.length-1,At=yt.length-1;At>=0;At--){var Nt=yt[At];for(Ct[Ot--]=Nt&127;(Nt>>=7)>0;)Ct[Ot--]=128|Nt&127}return this._createEncoderBuffer(Ct)};function dt(mt){return mt<10?"0"+mt:mt}st.prototype._encodeTime=function(yt,Rt){var Tt,At=new Date(yt);return Rt==="gentime"?Tt=[dt(At.getFullYear()),dt(At.getUTCMonth()+1),dt(At.getUTCDate()),dt(At.getUTCHours()),dt(At.getUTCMinutes()),dt(At.getUTCSeconds()),"Z"].join(""):Rt==="utctime"?Tt=[dt(At.getFullYear()%100),dt(At.getUTCMonth()+1),dt(At.getUTCDate()),dt(At.getUTCHours()),dt(At.getUTCMinutes()),dt(At.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+Rt+" time is not supported yet"),this._encodeStr(Tt,"octstr")},st.prototype._encodeNull=function(){return this._createEncoderBuffer("")},st.prototype._encodeInt=function(yt,Rt){if(typeof yt=="string"){if(!Rt)return this.reporter.error("String int or enum given, but no values map");if(!Rt.hasOwnProperty(yt))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(yt));yt=Rt[yt]}if(typeof yt!="number"&&!et.isBuffer(yt)){var Tt=yt.toArray();!yt.sign&&Tt[0]&128&&Tt.unshift(0),yt=new et(Tt)}if(et.isBuffer(yt)){var At=yt.length;yt.length===0&&At++;var Nt=new et(At);return yt.copy(Nt),yt.length===0&&(Nt[0]=0),this._createEncoderBuffer(Nt)}if(yt<128)return this._createEncoderBuffer(yt);if(yt<256)return this._createEncoderBuffer([0,yt]);for(var At=1,xt=yt;xt>=256;xt>>=8)At++;for(var Nt=new Array(At),xt=Nt.length-1;xt>=0;xt--)Nt[xt]=yt&255,yt>>=8;return Nt[0]&128&&Nt.unshift(0),this._createEncoderBuffer(new et(Nt))},st.prototype._encodeBool=function(yt){return this._createEncoderBuffer(yt?255:0)},st.prototype._use=function(yt,Rt){return typeof yt=="function"&&(yt=yt(Rt)),yt._getEncoder("der").tree},st.prototype._skipDefault=function(yt,Rt,Tt){var At=this._baseState,xt;if(At.default===null)return!1;var Nt=yt.join();if(At.defaultBuffer===void 0&&(At.defaultBuffer=this._encodeValue(At.default,Rt,Tt).join()),Nt.length!==At.defaultBuffer.length)return!1;for(xt=0;xt<Nt.length;xt++)if(Nt[xt]!==At.defaultBuffer[xt])return!1;return!0};function pt(mt,yt,Rt,Tt){var At;if(mt==="seqof"?mt="seq":mt==="setof"&&(mt="set"),at.tagByName.hasOwnProperty(mt))At=at.tagByName[mt];else if(typeof mt=="number"&&(mt|0)===mt)At=mt;else return Tt.error("Unknown tag: "+mt);return At>=31?Tt.error("Multi-octet tag encoding unsupported"):(yt||(At|=32),At|=at.tagClassByName[Rt||"universal"]<<6,At)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var tt=requireInherits_browser(),et=requireDer();function rt(nt){et.call(this,nt),this.enc="pem"}return tt(rt,et),pem=rt,rt.prototype.encode=function(at,it){for(var st=et.prototype.encode.call(this,at),dt=st.toString("base64"),pt=["-----BEGIN "+it.label+"-----"],mt=0;mt<dt.length;mt+=64)pt.push(dt.slice(mt,mt+64));return pt.push("-----END "+it.label+"-----"),pt.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(tt){var et=tt;et.der=requireDer(),et.pem=requirePem()}(encoders)),encoders}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(tt){var et=tt;et.bignum=requireBn$2(),et.define=requireApi().define,et.base=requireBase(),et.constants=requireConstants(),et.decoders=requireDecoders(),et.encoders=requireEncoders()}(asn1)),asn1}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var tt=requireAsn1$1(),et=tt.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),rt=tt.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),nt=tt.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),at=tt.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(nt),this.key("subjectPublicKey").bitstr())}),it=tt.define("RelativeDistinguishedName",function(){this.setof(rt)}),st=tt.define("RDNSequence",function(){this.seqof(it)}),dt=tt.define("Name",function(){this.choice({rdnSequence:this.use(st)})}),pt=tt.define("Validity",function(){this.seq().obj(this.key("notBefore").use(et),this.key("notAfter").use(et))}),mt=tt.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),yt=tt.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(nt),this.key("issuer").use(dt),this.key("validity").use(pt),this.key("subject").use(dt),this.key("subjectPublicKeyInfo").use(at),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(mt).optional())}),Rt=tt.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(yt),this.key("signatureAlgorithm").use(nt),this.key("signatureValue").bitstr())});return certificate=Rt,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$1;hasRequiredAsn1=1;var tt=requireAsn1$1();asn1$1.certificate=requireCertificate();var et=tt.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$1.RSAPrivateKey=et;var rt=tt.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$1.RSAPublicKey=rt;var nt=tt.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),at=tt.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(nt),this.key("subjectPublicKey").bitstr())});asn1$1.PublicKey=at;var it=tt.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(nt),this.key("subjectPrivateKey").octstr())});asn1$1.PrivateKey=it;var st=tt.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$1.EncryptedPrivateKey=st;var dt=tt.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$1.DSAPrivateKey=dt,asn1$1.DSAparam=tt.define("DSAparam",function(){this.int()});var pt=tt.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),mt=tt.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(pt),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$1.ECPrivateKey=mt,asn1$1.signature=tt.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$1}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var tt=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,et=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,rt=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,nt=requireEvp_bytestokey(),at=requireBrowser$6(),it=safeBufferExports.Buffer;return fixProc=function(st,dt){var pt=st.toString(),mt=pt.match(tt),yt;if(mt){var Tt="aes"+mt[1],At=it.from(mt[2],"hex"),xt=it.from(mt[3].replace(/[\r\n]/g,""),"base64"),Nt=nt(dt,At.slice(0,8),parseInt(mt[1],10)).key,Ct=[],Ot=at.createDecipheriv(Tt,Nt,At);Ct.push(Ot.update(xt)),Ct.push(Ot.final()),yt=it.concat(Ct)}else{var Rt=pt.match(rt);yt=it.from(Rt[2].replace(/[\r\n]/g,""),"base64")}var kt=pt.match(et)[1];return{tag:kt,data:yt}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var tt=requireAsn1(),et=require$$1,rt=requireFixProc(),nt=requireBrowser$6(),at=requireBrowser$7(),it=safeBufferExports.Buffer;function st(pt,mt){var yt=pt.algorithm.decrypt.kde.kdeparams.salt,Rt=parseInt(pt.algorithm.decrypt.kde.kdeparams.iters.toString(),10),Tt=et[pt.algorithm.decrypt.cipher.algo.join(".")],At=pt.algorithm.decrypt.cipher.iv,xt=pt.subjectPrivateKey,Nt=parseInt(Tt.split("-")[1],10)/8,Ct=at.pbkdf2Sync(mt,yt,Rt,Nt,"sha1"),Ot=nt.createDecipheriv(Tt,Ct,At),kt=[];return kt.push(Ot.update(xt)),kt.push(Ot.final()),it.concat(kt)}function dt(pt){var mt;typeof pt=="object"&&!it.isBuffer(pt)&&(mt=pt.passphrase,pt=pt.key),typeof pt=="string"&&(pt=it.from(pt));var yt=rt(pt,mt),Rt=yt.tag,Tt=yt.data,At,xt;switch(Rt){case"CERTIFICATE":xt=tt.certificate.decode(Tt,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(xt||(xt=tt.PublicKey.decode(Tt,"der")),At=xt.algorithm.algorithm.join("."),At){case"1.2.840.113549.1.1.1":return tt.RSAPublicKey.decode(xt.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return xt.subjectPrivateKey=xt.subjectPublicKey,{type:"ec",data:xt};case"1.2.840.10040.4.1":return xt.algorithm.params.pub_key=tt.DSAparam.decode(xt.subjectPublicKey.data,"der"),{type:"dsa",data:xt.algorithm.params};default:throw new Error("unknown key id "+At)}case"ENCRYPTED PRIVATE KEY":Tt=tt.EncryptedPrivateKey.decode(Tt,"der"),Tt=st(Tt,mt);case"PRIVATE KEY":switch(xt=tt.PrivateKey.decode(Tt,"der"),At=xt.algorithm.algorithm.join("."),At){case"1.2.840.113549.1.1.1":return tt.RSAPrivateKey.decode(xt.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:xt.algorithm.curve,privateKey:tt.ECPrivateKey.decode(xt.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return xt.algorithm.params.priv_key=tt.DSAparam.decode(xt.subjectPrivateKey,"der"),{type:"dsa",params:xt.algorithm.params};default:throw new Error("unknown key id "+At)}case"RSA PUBLIC KEY":return tt.RSAPublicKey.decode(Tt,"der");case"RSA PRIVATE KEY":return tt.RSAPrivateKey.decode(Tt,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:tt.DSAPrivateKey.decode(Tt,"der")};case"EC PRIVATE KEY":return Tt=tt.ECPrivateKey.decode(Tt,"der"),{curve:Tt.parameters.value,privateKey:Tt.privateKey};default:throw new Error("unknown key type "+Rt)}}return dt.signature=tt.signature,parseAsn1=dt,parseAsn1}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign.exports;hasRequiredSign=1;var tt=safeBufferExports.Buffer,et=requireBrowser$8(),rt=requireBrowserifyRsa(),nt=requireElliptic().ec,at=bnExports,it=requireParseAsn1(),st=require$$4,dt=1;function pt(Ot,kt,Pt,Dt,Gt){var jt=it(kt);if(jt.curve){if(Dt!=="ecdsa"&&Dt!=="ecdsa/rsa")throw new Error("wrong private key type");return mt(Ot,jt)}else if(jt.type==="dsa"){if(Dt!=="dsa")throw new Error("wrong private key type");return yt(Ot,jt,Pt)}if(Dt!=="rsa"&&Dt!=="ecdsa/rsa")throw new Error("wrong private key type");if(kt.padding!==void 0&&kt.padding!==dt)throw new Error("illegal or unsupported padding mode");Ot=tt.concat([Gt,Ot]);for(var Yt=jt.modulus.byteLength(),tr=[0,1];Ot.length+tr.length+1<Yt;)tr.push(255);tr.push(0);for(var er=-1;++er<Ot.length;)tr.push(Ot[er]);var lr=rt(tr,jt);return lr}function mt(Ot,kt){var Pt=st[kt.curve.join(".")];if(!Pt)throw new Error("unknown curve "+kt.curve.join("."));var Dt=new nt(Pt),Gt=Dt.keyFromPrivate(kt.privateKey),jt=Gt.sign(Ot);return tt.from(jt.toDER())}function yt(Ot,kt,Pt){for(var Dt=kt.params.priv_key,Gt=kt.params.p,jt=kt.params.q,Yt=kt.params.g,tr=new at(0),er,lr=At(Ot,jt).mod(jt),It=!1,ot=Tt(Dt,jt,Ot,Pt);It===!1;)er=Nt(jt,ot,Pt),tr=Ct(Yt,er,Gt,jt),It=er.invm(jt).imul(lr.add(Dt.mul(tr))).mod(jt),It.cmpn(0)===0&&(It=!1,tr=new at(0));return Rt(tr,It)}function Rt(Ot,kt){Ot=Ot.toArray(),kt=kt.toArray(),Ot[0]&128&&(Ot=[0].concat(Ot)),kt[0]&128&&(kt=[0].concat(kt));var Pt=Ot.length+kt.length+4,Dt=[48,Pt,2,Ot.length];return Dt=Dt.concat(Ot,[2,kt.length],kt),tt.from(Dt)}function Tt(Ot,kt,Pt,Dt){if(Ot=tt.from(Ot.toArray()),Ot.length<kt.byteLength()){var Gt=tt.alloc(kt.byteLength()-Ot.length);Ot=tt.concat([Gt,Ot])}var jt=Pt.length,Yt=xt(Pt,kt),tr=tt.alloc(jt);tr.fill(1);var er=tt.alloc(jt);return er=et(Dt,er).update(tr).update(tt.from([0])).update(Ot).update(Yt).digest(),tr=et(Dt,er).update(tr).digest(),er=et(Dt,er).update(tr).update(tt.from([1])).update(Ot).update(Yt).digest(),tr=et(Dt,er).update(tr).digest(),{k:er,v:tr}}function At(Ot,kt){var Pt=new at(Ot),Dt=(Ot.length<<3)-kt.bitLength();return Dt>0&&Pt.ishrn(Dt),Pt}function xt(Ot,kt){Ot=At(Ot,kt),Ot=Ot.mod(kt);var Pt=tt.from(Ot.toArray());if(Pt.length<kt.byteLength()){var Dt=tt.alloc(kt.byteLength()-Pt.length);Pt=tt.concat([Dt,Pt])}return Pt}function Nt(Ot,kt,Pt){var Dt,Gt;do{for(Dt=tt.alloc(0);Dt.length*8<Ot.bitLength();)kt.v=et(Pt,kt.k).update(kt.v).digest(),Dt=tt.concat([Dt,kt.v]);Gt=At(Dt,Ot),kt.k=et(Pt,kt.k).update(kt.v).update(tt.from([0])).digest(),kt.v=et(Pt,kt.k).update(kt.v).digest()}while(Gt.cmp(Ot)!==-1);return Gt}function Ct(Ot,kt,Pt,Dt){return Ot.toRed(at.mont(Pt)).redPow(kt).fromRed().mod(Dt)}return sign.exports=pt,sign.exports.getKey=Tt,sign.exports.makeKey=Nt,sign.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var tt=safeBufferExports.Buffer,et=bnExports,rt=requireElliptic().ec,nt=requireParseAsn1(),at=require$$4;function it(mt,yt,Rt,Tt,At){var xt=nt(Rt);if(xt.type==="ec"){if(Tt!=="ecdsa"&&Tt!=="ecdsa/rsa")throw new Error("wrong public key type");return st(mt,yt,xt)}else if(xt.type==="dsa"){if(Tt!=="dsa")throw new Error("wrong public key type");return dt(mt,yt,xt)}if(Tt!=="rsa"&&Tt!=="ecdsa/rsa")throw new Error("wrong public key type");yt=tt.concat([At,yt]);for(var Nt=xt.modulus.byteLength(),Ct=[1],Ot=0;yt.length+Ct.length+2<Nt;)Ct.push(255),Ot+=1;Ct.push(0);for(var kt=-1;++kt<yt.length;)Ct.push(yt[kt]);Ct=tt.from(Ct);var Pt=et.mont(xt.modulus);mt=new et(mt).toRed(Pt),mt=mt.redPow(new et(xt.publicExponent)),mt=tt.from(mt.fromRed().toArray());var Dt=Ot<8?1:0;for(Nt=Math.min(mt.length,Ct.length),mt.length!==Ct.length&&(Dt=1),kt=-1;++kt<Nt;)Dt|=mt[kt]^Ct[kt];return Dt===0}function st(mt,yt,Rt){var Tt=at[Rt.data.algorithm.curve.join(".")];if(!Tt)throw new Error("unknown curve "+Rt.data.algorithm.curve.join("."));var At=new rt(Tt),xt=Rt.data.subjectPrivateKey.data;return At.verify(yt,mt,xt)}function dt(mt,yt,Rt){var Tt=Rt.data.p,At=Rt.data.q,xt=Rt.data.g,Nt=Rt.data.pub_key,Ct=nt.signature.decode(mt,"der"),Ot=Ct.s,kt=Ct.r;pt(Ot,At),pt(kt,At);var Pt=et.mont(Tt),Dt=Ot.invm(At),Gt=xt.toRed(Pt).redPow(new et(yt).mul(Dt).mod(At)).fromRed().mul(Nt.toRed(Pt).redPow(kt.mul(Dt).mod(At)).fromRed()).mod(Tt).mod(At);return Gt.cmp(kt)===0}function pt(mt,yt){if(mt.cmpn(0)<=0)throw new Error("invalid sig");if(mt.cmp(yt)>=0)throw new Error("invalid sig")}return verify_1=it,verify_1}var browser$3,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$3;hasRequiredBrowser$3=1;var tt=safeBufferExports.Buffer,et=requireBrowser$9(),rt=requireReadableBrowser(),nt=requireInherits_browser(),at=requireSign(),it=requireVerify(),st=require$$6;Object.keys(st).forEach(function(Rt){st[Rt].id=tt.from(st[Rt].id,"hex"),st[Rt.toLowerCase()]=st[Rt]});function dt(Rt){rt.Writable.call(this);var Tt=st[Rt];if(!Tt)throw new Error("Unknown message digest");this._hashType=Tt.hash,this._hash=et(Tt.hash),this._tag=Tt.id,this._signType=Tt.sign}nt(dt,rt.Writable),dt.prototype._write=function(Tt,At,xt){this._hash.update(Tt),xt()},dt.prototype.update=function(Tt,At){return this._hash.update(typeof Tt=="string"?tt.from(Tt,At):Tt),this},dt.prototype.sign=function(Tt,At){this.end();var xt=this._hash.digest(),Nt=at(xt,Tt,this._hashType,this._signType,this._tag);return At?Nt.toString(At):Nt};function pt(Rt){rt.Writable.call(this);var Tt=st[Rt];if(!Tt)throw new Error("Unknown message digest");this._hash=et(Tt.hash),this._tag=Tt.id,this._signType=Tt.sign}nt(pt,rt.Writable),pt.prototype._write=function(Tt,At,xt){this._hash.update(Tt),xt()},pt.prototype.update=function(Tt,At){return this._hash.update(typeof Tt=="string"?tt.from(Tt,At):Tt),this},pt.prototype.verify=function(Tt,At,xt){var Nt=typeof At=="string"?tt.from(At,xt):At;this.end();var Ct=this._hash.digest();return it(Nt,Ct,Tt,this._signType,this._tag)};function mt(Rt){return new dt(Rt)}function yt(Rt){return new pt(Rt)}return browser$3={Sign:mt,Verify:yt,createSign:mt,createVerify:yt},browser$3}var bn$1={exports:{}};bn$1.exports;var hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(tt){(function(et,rt){function nt(It,ot){if(!It)throw new Error(ot||"Assertion failed")}function at(It,ot){It.super_=ot;var ft=function(){};ft.prototype=ot.prototype,It.prototype=new ft,It.prototype.constructor=It}function it(It,ot,ft){if(it.isBN(It))return It;this.negative=0,this.words=null,this.length=0,this.red=null,It!==null&&((ot==="le"||ot==="be")&&(ft=ot,ot=10),this._init(It||0,ot||10,ft||"be"))}typeof et=="object"?et.exports=it:rt.BN=it,it.BN=it,it.wordSize=26;var st;try{typeof window<"u"&&typeof window.Buffer<"u"?st=window.Buffer:st=require$$0$2.Buffer}catch{}it.isBN=function(ot){return ot instanceof it?!0:ot!==null&&typeof ot=="object"&&ot.constructor.wordSize===it.wordSize&&Array.isArray(ot.words)},it.max=function(ot,ft){return ot.cmp(ft)>0?ot:ft},it.min=function(ot,ft){return ot.cmp(ft)<0?ot:ft},it.prototype._init=function(ot,ft,ht){if(typeof ot=="number")return this._initNumber(ot,ft,ht);if(typeof ot=="object")return this._initArray(ot,ft,ht);ft==="hex"&&(ft=16),nt(ft===(ft|0)&&ft>=2&&ft<=36),ot=ot.toString().replace(/\s+/g,"");var vt=0;ot[0]==="-"&&(vt++,this.negative=1),vt<ot.length&&(ft===16?this._parseHex(ot,vt,ht):(this._parseBase(ot,ft,vt),ht==="le"&&this._initArray(this.toArray(),ft,ht)))},it.prototype._initNumber=function(ot,ft,ht){ot<0&&(this.negative=1,ot=-ot),ot<67108864?(this.words=[ot&67108863],this.length=1):ot<4503599627370496?(this.words=[ot&67108863,ot/67108864&67108863],this.length=2):(nt(ot<9007199254740992),this.words=[ot&67108863,ot/67108864&67108863,1],this.length=3),ht==="le"&&this._initArray(this.toArray(),ft,ht)},it.prototype._initArray=function(ot,ft,ht){if(nt(typeof ot.length=="number"),ot.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ot.length/3),this.words=new Array(this.length);for(var vt=0;vt<this.length;vt++)this.words[vt]=0;var wt,bt,$t=0;if(ht==="be")for(vt=ot.length-1,wt=0;vt>=0;vt-=3)bt=ot[vt]|ot[vt-1]<<8|ot[vt-2]<<16,this.words[wt]|=bt<<$t&67108863,this.words[wt+1]=bt>>>26-$t&67108863,$t+=24,$t>=26&&($t-=26,wt++);else if(ht==="le")for(vt=0,wt=0;vt<ot.length;vt+=3)bt=ot[vt]|ot[vt+1]<<8|ot[vt+2]<<16,this.words[wt]|=bt<<$t&67108863,this.words[wt+1]=bt>>>26-$t&67108863,$t+=24,$t>=26&&($t-=26,wt++);return this.strip()};function dt(It,ot){var ft=It.charCodeAt(ot);return ft>=65&&ft<=70?ft-55:ft>=97&&ft<=102?ft-87:ft-48&15}function pt(It,ot,ft){var ht=dt(It,ft);return ft-1>=ot&&(ht|=dt(It,ft-1)<<4),ht}it.prototype._parseHex=function(ot,ft,ht){this.length=Math.ceil((ot.length-ft)/6),this.words=new Array(this.length);for(var vt=0;vt<this.length;vt++)this.words[vt]=0;var wt=0,bt=0,$t;if(ht==="be")for(vt=ot.length-1;vt>=ft;vt-=2)$t=pt(ot,ft,vt)<<wt,this.words[bt]|=$t&67108863,wt>=18?(wt-=18,bt+=1,this.words[bt]|=$t>>>26):wt+=8;else{var Et=ot.length-ft;for(vt=Et%2===0?ft+1:ft;vt<ot.length;vt+=2)$t=pt(ot,ft,vt)<<wt,this.words[bt]|=$t&67108863,wt>=18?(wt-=18,bt+=1,this.words[bt]|=$t>>>26):wt+=8}this.strip()};function mt(It,ot,ft,ht){for(var vt=0,wt=Math.min(It.length,ft),bt=ot;bt<wt;bt++){var $t=It.charCodeAt(bt)-48;vt*=ht,$t>=49?vt+=$t-49+10:$t>=17?vt+=$t-17+10:vt+=$t}return vt}it.prototype._parseBase=function(ot,ft,ht){this.words=[0],this.length=1;for(var vt=0,wt=1;wt<=67108863;wt*=ft)vt++;vt--,wt=wt/ft|0;for(var bt=ot.length-ht,$t=bt%vt,Et=Math.min(bt,bt-$t)+ht,ct=0,St=ht;St<Et;St+=vt)ct=mt(ot,St,St+vt,ft),this.imuln(wt),this.words[0]+ct<67108864?this.words[0]+=ct:this._iaddn(ct);if($t!==0){var Mt=1;for(ct=mt(ot,St,ot.length,ft),St=0;St<$t;St++)Mt*=ft;this.imuln(Mt),this.words[0]+ct<67108864?this.words[0]+=ct:this._iaddn(ct)}this.strip()},it.prototype.copy=function(ot){ot.words=new Array(this.length);for(var ft=0;ft<this.length;ft++)ot.words[ft]=this.words[ft];ot.length=this.length,ot.negative=this.negative,ot.red=this.red},it.prototype.clone=function(){var ot=new it(null);return this.copy(ot),ot},it.prototype._expand=function(ot){for(;this.length<ot;)this.words[this.length++]=0;return this},it.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},it.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},it.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var yt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Rt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Tt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];it.prototype.toString=function(ot,ft){ot=ot||10,ft=ft|0||1;var ht;if(ot===16||ot==="hex"){ht="";for(var vt=0,wt=0,bt=0;bt<this.length;bt++){var $t=this.words[bt],Et=(($t<<vt|wt)&16777215).toString(16);wt=$t>>>24-vt&16777215,wt!==0||bt!==this.length-1?ht=yt[6-Et.length]+Et+ht:ht=Et+ht,vt+=2,vt>=26&&(vt-=26,bt--)}for(wt!==0&&(ht=wt.toString(16)+ht);ht.length%ft!==0;)ht="0"+ht;return this.negative!==0&&(ht="-"+ht),ht}if(ot===(ot|0)&&ot>=2&&ot<=36){var ct=Rt[ot],St=Tt[ot];ht="";var Mt=this.clone();for(Mt.negative=0;!Mt.isZero();){var Lt=Mt.modn(St).toString(ot);Mt=Mt.idivn(St),Mt.isZero()?ht=Lt+ht:ht=yt[ct-Lt.length]+Lt+ht}for(this.isZero()&&(ht="0"+ht);ht.length%ft!==0;)ht="0"+ht;return this.negative!==0&&(ht="-"+ht),ht}nt(!1,"Base should be between 2 and 36")},it.prototype.toNumber=function(){var ot=this.words[0];return this.length===2?ot+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ot+=4503599627370496+this.words[1]*67108864:this.length>2&&nt(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ot:ot},it.prototype.toJSON=function(){return this.toString(16)},it.prototype.toBuffer=function(ot,ft){return nt(typeof st<"u"),this.toArrayLike(st,ot,ft)},it.prototype.toArray=function(ot,ft){return this.toArrayLike(Array,ot,ft)},it.prototype.toArrayLike=function(ot,ft,ht){var vt=this.byteLength(),wt=ht||Math.max(1,vt);nt(vt<=wt,"byte array longer than desired length"),nt(wt>0,"Requested array length <= 0"),this.strip();var bt=ft==="le",$t=new ot(wt),Et,ct,St=this.clone();if(bt){for(ct=0;!St.isZero();ct++)Et=St.andln(255),St.iushrn(8),$t[ct]=Et;for(;ct<wt;ct++)$t[ct]=0}else{for(ct=0;ct<wt-vt;ct++)$t[ct]=0;for(ct=0;!St.isZero();ct++)Et=St.andln(255),St.iushrn(8),$t[wt-ct-1]=Et}return $t},Math.clz32?it.prototype._countBits=function(ot){return 32-Math.clz32(ot)}:it.prototype._countBits=function(ot){var ft=ot,ht=0;return ft>=4096&&(ht+=13,ft>>>=13),ft>=64&&(ht+=7,ft>>>=7),ft>=8&&(ht+=4,ft>>>=4),ft>=2&&(ht+=2,ft>>>=2),ht+ft},it.prototype._zeroBits=function(ot){if(ot===0)return 26;var ft=ot,ht=0;return ft&8191||(ht+=13,ft>>>=13),ft&127||(ht+=7,ft>>>=7),ft&15||(ht+=4,ft>>>=4),ft&3||(ht+=2,ft>>>=2),ft&1||ht++,ht},it.prototype.bitLength=function(){var ot=this.words[this.length-1],ft=this._countBits(ot);return(this.length-1)*26+ft};function At(It){for(var ot=new Array(It.bitLength()),ft=0;ft<ot.length;ft++){var ht=ft/26|0,vt=ft%26;ot[ft]=(It.words[ht]&1<<vt)>>>vt}return ot}it.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ot=0,ft=0;ft<this.length;ft++){var ht=this._zeroBits(this.words[ft]);if(ot+=ht,ht!==26)break}return ot},it.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},it.prototype.toTwos=function(ot){return this.negative!==0?this.abs().inotn(ot).iaddn(1):this.clone()},it.prototype.fromTwos=function(ot){return this.testn(ot-1)?this.notn(ot).iaddn(1).ineg():this.clone()},it.prototype.isNeg=function(){return this.negative!==0},it.prototype.neg=function(){return this.clone().ineg()},it.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},it.prototype.iuor=function(ot){for(;this.length<ot.length;)this.words[this.length++]=0;for(var ft=0;ft<ot.length;ft++)this.words[ft]=this.words[ft]|ot.words[ft];return this.strip()},it.prototype.ior=function(ot){return nt((this.negative|ot.negative)===0),this.iuor(ot)},it.prototype.or=function(ot){return this.length>ot.length?this.clone().ior(ot):ot.clone().ior(this)},it.prototype.uor=function(ot){return this.length>ot.length?this.clone().iuor(ot):ot.clone().iuor(this)},it.prototype.iuand=function(ot){var ft;this.length>ot.length?ft=ot:ft=this;for(var ht=0;ht<ft.length;ht++)this.words[ht]=this.words[ht]&ot.words[ht];return this.length=ft.length,this.strip()},it.prototype.iand=function(ot){return nt((this.negative|ot.negative)===0),this.iuand(ot)},it.prototype.and=function(ot){return this.length>ot.length?this.clone().iand(ot):ot.clone().iand(this)},it.prototype.uand=function(ot){return this.length>ot.length?this.clone().iuand(ot):ot.clone().iuand(this)},it.prototype.iuxor=function(ot){var ft,ht;this.length>ot.length?(ft=this,ht=ot):(ft=ot,ht=this);for(var vt=0;vt<ht.length;vt++)this.words[vt]=ft.words[vt]^ht.words[vt];if(this!==ft)for(;vt<ft.length;vt++)this.words[vt]=ft.words[vt];return this.length=ft.length,this.strip()},it.prototype.ixor=function(ot){return nt((this.negative|ot.negative)===0),this.iuxor(ot)},it.prototype.xor=function(ot){return this.length>ot.length?this.clone().ixor(ot):ot.clone().ixor(this)},it.prototype.uxor=function(ot){return this.length>ot.length?this.clone().iuxor(ot):ot.clone().iuxor(this)},it.prototype.inotn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=Math.ceil(ot/26)|0,ht=ot%26;this._expand(ft),ht>0&&ft--;for(var vt=0;vt<ft;vt++)this.words[vt]=~this.words[vt]&67108863;return ht>0&&(this.words[vt]=~this.words[vt]&67108863>>26-ht),this.strip()},it.prototype.notn=function(ot){return this.clone().inotn(ot)},it.prototype.setn=function(ot,ft){nt(typeof ot=="number"&&ot>=0);var ht=ot/26|0,vt=ot%26;return this._expand(ht+1),ft?this.words[ht]=this.words[ht]|1<<vt:this.words[ht]=this.words[ht]&~(1<<vt),this.strip()},it.prototype.iadd=function(ot){var ft;if(this.negative!==0&&ot.negative===0)return this.negative=0,ft=this.isub(ot),this.negative^=1,this._normSign();if(this.negative===0&&ot.negative!==0)return ot.negative=0,ft=this.isub(ot),ot.negative=1,ft._normSign();var ht,vt;this.length>ot.length?(ht=this,vt=ot):(ht=ot,vt=this);for(var wt=0,bt=0;bt<vt.length;bt++)ft=(ht.words[bt]|0)+(vt.words[bt]|0)+wt,this.words[bt]=ft&67108863,wt=ft>>>26;for(;wt!==0&&bt<ht.length;bt++)ft=(ht.words[bt]|0)+wt,this.words[bt]=ft&67108863,wt=ft>>>26;if(this.length=ht.length,wt!==0)this.words[this.length]=wt,this.length++;else if(ht!==this)for(;bt<ht.length;bt++)this.words[bt]=ht.words[bt];return this},it.prototype.add=function(ot){var ft;return ot.negative!==0&&this.negative===0?(ot.negative=0,ft=this.sub(ot),ot.negative^=1,ft):ot.negative===0&&this.negative!==0?(this.negative=0,ft=ot.sub(this),this.negative=1,ft):this.length>ot.length?this.clone().iadd(ot):ot.clone().iadd(this)},it.prototype.isub=function(ot){if(ot.negative!==0){ot.negative=0;var ft=this.iadd(ot);return ot.negative=1,ft._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ot),this.negative=1,this._normSign();var ht=this.cmp(ot);if(ht===0)return this.negative=0,this.length=1,this.words[0]=0,this;var vt,wt;ht>0?(vt=this,wt=ot):(vt=ot,wt=this);for(var bt=0,$t=0;$t<wt.length;$t++)ft=(vt.words[$t]|0)-(wt.words[$t]|0)+bt,bt=ft>>26,this.words[$t]=ft&67108863;for(;bt!==0&&$t<vt.length;$t++)ft=(vt.words[$t]|0)+bt,bt=ft>>26,this.words[$t]=ft&67108863;if(bt===0&&$t<vt.length&&vt!==this)for(;$t<vt.length;$t++)this.words[$t]=vt.words[$t];return this.length=Math.max(this.length,$t),vt!==this&&(this.negative=1),this.strip()},it.prototype.sub=function(ot){return this.clone().isub(ot)};function xt(It,ot,ft){ft.negative=ot.negative^It.negative;var ht=It.length+ot.length|0;ft.length=ht,ht=ht-1|0;var vt=It.words[0]|0,wt=ot.words[0]|0,bt=vt*wt,$t=bt&67108863,Et=bt/67108864|0;ft.words[0]=$t;for(var ct=1;ct<ht;ct++){for(var St=Et>>>26,Mt=Et&67108863,Lt=Math.min(ct,ot.length-1),Ut=Math.max(0,ct-It.length+1);Ut<=Lt;Ut++){var Kt=ct-Ut|0;vt=It.words[Kt]|0,wt=ot.words[Ut]|0,bt=vt*wt+Mt,St+=bt/67108864|0,Mt=bt&67108863}ft.words[ct]=Mt|0,Et=St|0}return Et!==0?ft.words[ct]=Et|0:ft.length--,ft.strip()}var Nt=function(ot,ft,ht){var vt=ot.words,wt=ft.words,bt=ht.words,$t=0,Et,ct,St,Mt=vt[0]|0,Lt=Mt&8191,Ut=Mt>>>13,Kt=vt[1]|0,Ht=Kt&8191,Ft=Kt>>>13,zt=vt[2]|0,ir=zt&8191,sr=zt>>>13,ar=vt[3]|0,Vt=ar&8191,fr=ar>>>13,Gr=vt[4]|0,ur=Gr&8191,pr=Gr>>>13,Fr=vt[5]|0,yr=Fr&8191,hr=Fr>>>13,Wr=vt[6]|0,$r=Wr&8191,Cr=Wr>>>13,an=vt[7]|0,Er=an&8191,Ar=an>>>13,gn=vt[8]|0,Or=gn&8191,Lr=gn>>>13,wn=vt[9]|0,Xt=wn&8191,Bt=wn>>>13,Wt=wt[0]|0,nr=Wt&8191,cr=Wt>>>13,Sr=wt[1]|0,_r=Sr&8191,xr=Sr>>>13,pn=wt[2]|0,Tr=pn&8191,Ur=pn>>>13,un=wt[3]|0,Ir=un&8191,Nr=un>>>13,zr=wt[4]|0,br=zr&8191,Dr=zr>>>13,yn=wt[5]|0,Mr=yn&8191,qr=yn>>>13,Sn=wt[6]|0,Br=Sn&8191,Hr=Sn>>>13,Zt=wt[7]|0,Qt=Zt&8191,Jt=Zt>>>13,qt=wt[8]|0,rr=qt&8191,dr=qt>>>13,Rr=wt[9]|0,vr=Rr&8191,wr=Rr>>>13;ht.negative=ot.negative^ft.negative,ht.length=19,Et=Math.imul(Lt,nr),ct=Math.imul(Lt,cr),ct=ct+Math.imul(Ut,nr)|0,St=Math.imul(Ut,cr);var Yr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,Et=Math.imul(Ht,nr),ct=Math.imul(Ht,cr),ct=ct+Math.imul(Ft,nr)|0,St=Math.imul(Ft,cr),Et=Et+Math.imul(Lt,_r)|0,ct=ct+Math.imul(Lt,xr)|0,ct=ct+Math.imul(Ut,_r)|0,St=St+Math.imul(Ut,xr)|0;var jr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(jr>>>26)|0,jr&=67108863,Et=Math.imul(ir,nr),ct=Math.imul(ir,cr),ct=ct+Math.imul(sr,nr)|0,St=Math.imul(sr,cr),Et=Et+Math.imul(Ht,_r)|0,ct=ct+Math.imul(Ht,xr)|0,ct=ct+Math.imul(Ft,_r)|0,St=St+Math.imul(Ft,xr)|0,Et=Et+Math.imul(Lt,Tr)|0,ct=ct+Math.imul(Lt,Ur)|0,ct=ct+Math.imul(Ut,Tr)|0,St=St+Math.imul(Ut,Ur)|0;var mn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(mn>>>26)|0,mn&=67108863,Et=Math.imul(Vt,nr),ct=Math.imul(Vt,cr),ct=ct+Math.imul(fr,nr)|0,St=Math.imul(fr,cr),Et=Et+Math.imul(ir,_r)|0,ct=ct+Math.imul(ir,xr)|0,ct=ct+Math.imul(sr,_r)|0,St=St+Math.imul(sr,xr)|0,Et=Et+Math.imul(Ht,Tr)|0,ct=ct+Math.imul(Ht,Ur)|0,ct=ct+Math.imul(Ft,Tr)|0,St=St+Math.imul(Ft,Ur)|0,Et=Et+Math.imul(Lt,Ir)|0,ct=ct+Math.imul(Lt,Nr)|0,ct=ct+Math.imul(Ut,Ir)|0,St=St+Math.imul(Ut,Nr)|0;var Jr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,Et=Math.imul(ur,nr),ct=Math.imul(ur,cr),ct=ct+Math.imul(pr,nr)|0,St=Math.imul(pr,cr),Et=Et+Math.imul(Vt,_r)|0,ct=ct+Math.imul(Vt,xr)|0,ct=ct+Math.imul(fr,_r)|0,St=St+Math.imul(fr,xr)|0,Et=Et+Math.imul(ir,Tr)|0,ct=ct+Math.imul(ir,Ur)|0,ct=ct+Math.imul(sr,Tr)|0,St=St+Math.imul(sr,Ur)|0,Et=Et+Math.imul(Ht,Ir)|0,ct=ct+Math.imul(Ht,Nr)|0,ct=ct+Math.imul(Ft,Ir)|0,St=St+Math.imul(Ft,Nr)|0,Et=Et+Math.imul(Lt,br)|0,ct=ct+Math.imul(Lt,Dr)|0,ct=ct+Math.imul(Ut,br)|0,St=St+Math.imul(Ut,Dr)|0;var cn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(cn>>>26)|0,cn&=67108863,Et=Math.imul(yr,nr),ct=Math.imul(yr,cr),ct=ct+Math.imul(hr,nr)|0,St=Math.imul(hr,cr),Et=Et+Math.imul(ur,_r)|0,ct=ct+Math.imul(ur,xr)|0,ct=ct+Math.imul(pr,_r)|0,St=St+Math.imul(pr,xr)|0,Et=Et+Math.imul(Vt,Tr)|0,ct=ct+Math.imul(Vt,Ur)|0,ct=ct+Math.imul(fr,Tr)|0,St=St+Math.imul(fr,Ur)|0,Et=Et+Math.imul(ir,Ir)|0,ct=ct+Math.imul(ir,Nr)|0,ct=ct+Math.imul(sr,Ir)|0,St=St+Math.imul(sr,Nr)|0,Et=Et+Math.imul(Ht,br)|0,ct=ct+Math.imul(Ht,Dr)|0,ct=ct+Math.imul(Ft,br)|0,St=St+Math.imul(Ft,Dr)|0,Et=Et+Math.imul(Lt,Mr)|0,ct=ct+Math.imul(Lt,qr)|0,ct=ct+Math.imul(Ut,Mr)|0,St=St+Math.imul(Ut,qr)|0;var ln=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(ln>>>26)|0,ln&=67108863,Et=Math.imul($r,nr),ct=Math.imul($r,cr),ct=ct+Math.imul(Cr,nr)|0,St=Math.imul(Cr,cr),Et=Et+Math.imul(yr,_r)|0,ct=ct+Math.imul(yr,xr)|0,ct=ct+Math.imul(hr,_r)|0,St=St+Math.imul(hr,xr)|0,Et=Et+Math.imul(ur,Tr)|0,ct=ct+Math.imul(ur,Ur)|0,ct=ct+Math.imul(pr,Tr)|0,St=St+Math.imul(pr,Ur)|0,Et=Et+Math.imul(Vt,Ir)|0,ct=ct+Math.imul(Vt,Nr)|0,ct=ct+Math.imul(fr,Ir)|0,St=St+Math.imul(fr,Nr)|0,Et=Et+Math.imul(ir,br)|0,ct=ct+Math.imul(ir,Dr)|0,ct=ct+Math.imul(sr,br)|0,St=St+Math.imul(sr,Dr)|0,Et=Et+Math.imul(Ht,Mr)|0,ct=ct+Math.imul(Ht,qr)|0,ct=ct+Math.imul(Ft,Mr)|0,St=St+Math.imul(Ft,qr)|0,Et=Et+Math.imul(Lt,Br)|0,ct=ct+Math.imul(Lt,Hr)|0,ct=ct+Math.imul(Ut,Br)|0,St=St+Math.imul(Ut,Hr)|0;var vn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(vn>>>26)|0,vn&=67108863,Et=Math.imul(Er,nr),ct=Math.imul(Er,cr),ct=ct+Math.imul(Ar,nr)|0,St=Math.imul(Ar,cr),Et=Et+Math.imul($r,_r)|0,ct=ct+Math.imul($r,xr)|0,ct=ct+Math.imul(Cr,_r)|0,St=St+Math.imul(Cr,xr)|0,Et=Et+Math.imul(yr,Tr)|0,ct=ct+Math.imul(yr,Ur)|0,ct=ct+Math.imul(hr,Tr)|0,St=St+Math.imul(hr,Ur)|0,Et=Et+Math.imul(ur,Ir)|0,ct=ct+Math.imul(ur,Nr)|0,ct=ct+Math.imul(pr,Ir)|0,St=St+Math.imul(pr,Nr)|0,Et=Et+Math.imul(Vt,br)|0,ct=ct+Math.imul(Vt,Dr)|0,ct=ct+Math.imul(fr,br)|0,St=St+Math.imul(fr,Dr)|0,Et=Et+Math.imul(ir,Mr)|0,ct=ct+Math.imul(ir,qr)|0,ct=ct+Math.imul(sr,Mr)|0,St=St+Math.imul(sr,qr)|0,Et=Et+Math.imul(Ht,Br)|0,ct=ct+Math.imul(Ht,Hr)|0,ct=ct+Math.imul(Ft,Br)|0,St=St+Math.imul(Ft,Hr)|0,Et=Et+Math.imul(Lt,Qt)|0,ct=ct+Math.imul(Lt,Jt)|0,ct=ct+Math.imul(Ut,Qt)|0,St=St+Math.imul(Ut,Jt)|0;var _n=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(_n>>>26)|0,_n&=67108863,Et=Math.imul(Or,nr),ct=Math.imul(Or,cr),ct=ct+Math.imul(Lr,nr)|0,St=Math.imul(Lr,cr),Et=Et+Math.imul(Er,_r)|0,ct=ct+Math.imul(Er,xr)|0,ct=ct+Math.imul(Ar,_r)|0,St=St+Math.imul(Ar,xr)|0,Et=Et+Math.imul($r,Tr)|0,ct=ct+Math.imul($r,Ur)|0,ct=ct+Math.imul(Cr,Tr)|0,St=St+Math.imul(Cr,Ur)|0,Et=Et+Math.imul(yr,Ir)|0,ct=ct+Math.imul(yr,Nr)|0,ct=ct+Math.imul(hr,Ir)|0,St=St+Math.imul(hr,Nr)|0,Et=Et+Math.imul(ur,br)|0,ct=ct+Math.imul(ur,Dr)|0,ct=ct+Math.imul(pr,br)|0,St=St+Math.imul(pr,Dr)|0,Et=Et+Math.imul(Vt,Mr)|0,ct=ct+Math.imul(Vt,qr)|0,ct=ct+Math.imul(fr,Mr)|0,St=St+Math.imul(fr,qr)|0,Et=Et+Math.imul(ir,Br)|0,ct=ct+Math.imul(ir,Hr)|0,ct=ct+Math.imul(sr,Br)|0,St=St+Math.imul(sr,Hr)|0,Et=Et+Math.imul(Ht,Qt)|0,ct=ct+Math.imul(Ht,Jt)|0,ct=ct+Math.imul(Ft,Qt)|0,St=St+Math.imul(Ft,Jt)|0,Et=Et+Math.imul(Lt,rr)|0,ct=ct+Math.imul(Lt,dr)|0,ct=ct+Math.imul(Ut,rr)|0,St=St+Math.imul(Ut,dr)|0;var fn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(fn>>>26)|0,fn&=67108863,Et=Math.imul(Xt,nr),ct=Math.imul(Xt,cr),ct=ct+Math.imul(Bt,nr)|0,St=Math.imul(Bt,cr),Et=Et+Math.imul(Or,_r)|0,ct=ct+Math.imul(Or,xr)|0,ct=ct+Math.imul(Lr,_r)|0,St=St+Math.imul(Lr,xr)|0,Et=Et+Math.imul(Er,Tr)|0,ct=ct+Math.imul(Er,Ur)|0,ct=ct+Math.imul(Ar,Tr)|0,St=St+Math.imul(Ar,Ur)|0,Et=Et+Math.imul($r,Ir)|0,ct=ct+Math.imul($r,Nr)|0,ct=ct+Math.imul(Cr,Ir)|0,St=St+Math.imul(Cr,Nr)|0,Et=Et+Math.imul(yr,br)|0,ct=ct+Math.imul(yr,Dr)|0,ct=ct+Math.imul(hr,br)|0,St=St+Math.imul(hr,Dr)|0,Et=Et+Math.imul(ur,Mr)|0,ct=ct+Math.imul(ur,qr)|0,ct=ct+Math.imul(pr,Mr)|0,St=St+Math.imul(pr,qr)|0,Et=Et+Math.imul(Vt,Br)|0,ct=ct+Math.imul(Vt,Hr)|0,ct=ct+Math.imul(fr,Br)|0,St=St+Math.imul(fr,Hr)|0,Et=Et+Math.imul(ir,Qt)|0,ct=ct+Math.imul(ir,Jt)|0,ct=ct+Math.imul(sr,Qt)|0,St=St+Math.imul(sr,Jt)|0,Et=Et+Math.imul(Ht,rr)|0,ct=ct+Math.imul(Ht,dr)|0,ct=ct+Math.imul(Ft,rr)|0,St=St+Math.imul(Ft,dr)|0,Et=Et+Math.imul(Lt,vr)|0,ct=ct+Math.imul(Lt,wr)|0,ct=ct+Math.imul(Ut,vr)|0,St=St+Math.imul(Ut,wr)|0;var hn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(hn>>>26)|0,hn&=67108863,Et=Math.imul(Xt,_r),ct=Math.imul(Xt,xr),ct=ct+Math.imul(Bt,_r)|0,St=Math.imul(Bt,xr),Et=Et+Math.imul(Or,Tr)|0,ct=ct+Math.imul(Or,Ur)|0,ct=ct+Math.imul(Lr,Tr)|0,St=St+Math.imul(Lr,Ur)|0,Et=Et+Math.imul(Er,Ir)|0,ct=ct+Math.imul(Er,Nr)|0,ct=ct+Math.imul(Ar,Ir)|0,St=St+Math.imul(Ar,Nr)|0,Et=Et+Math.imul($r,br)|0,ct=ct+Math.imul($r,Dr)|0,ct=ct+Math.imul(Cr,br)|0,St=St+Math.imul(Cr,Dr)|0,Et=Et+Math.imul(yr,Mr)|0,ct=ct+Math.imul(yr,qr)|0,ct=ct+Math.imul(hr,Mr)|0,St=St+Math.imul(hr,qr)|0,Et=Et+Math.imul(ur,Br)|0,ct=ct+Math.imul(ur,Hr)|0,ct=ct+Math.imul(pr,Br)|0,St=St+Math.imul(pr,Hr)|0,Et=Et+Math.imul(Vt,Qt)|0,ct=ct+Math.imul(Vt,Jt)|0,ct=ct+Math.imul(fr,Qt)|0,St=St+Math.imul(fr,Jt)|0,Et=Et+Math.imul(ir,rr)|0,ct=ct+Math.imul(ir,dr)|0,ct=ct+Math.imul(sr,rr)|0,St=St+Math.imul(sr,dr)|0,Et=Et+Math.imul(Ht,vr)|0,ct=ct+Math.imul(Ht,wr)|0,ct=ct+Math.imul(Ft,vr)|0,St=St+Math.imul(Ft,wr)|0;var dn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(dn>>>26)|0,dn&=67108863,Et=Math.imul(Xt,Tr),ct=Math.imul(Xt,Ur),ct=ct+Math.imul(Bt,Tr)|0,St=Math.imul(Bt,Ur),Et=Et+Math.imul(Or,Ir)|0,ct=ct+Math.imul(Or,Nr)|0,ct=ct+Math.imul(Lr,Ir)|0,St=St+Math.imul(Lr,Nr)|0,Et=Et+Math.imul(Er,br)|0,ct=ct+Math.imul(Er,Dr)|0,ct=ct+Math.imul(Ar,br)|0,St=St+Math.imul(Ar,Dr)|0,Et=Et+Math.imul($r,Mr)|0,ct=ct+Math.imul($r,qr)|0,ct=ct+Math.imul(Cr,Mr)|0,St=St+Math.imul(Cr,qr)|0,Et=Et+Math.imul(yr,Br)|0,ct=ct+Math.imul(yr,Hr)|0,ct=ct+Math.imul(hr,Br)|0,St=St+Math.imul(hr,Hr)|0,Et=Et+Math.imul(ur,Qt)|0,ct=ct+Math.imul(ur,Jt)|0,ct=ct+Math.imul(pr,Qt)|0,St=St+Math.imul(pr,Jt)|0,Et=Et+Math.imul(Vt,rr)|0,ct=ct+Math.imul(Vt,dr)|0,ct=ct+Math.imul(fr,rr)|0,St=St+Math.imul(fr,dr)|0,Et=Et+Math.imul(ir,vr)|0,ct=ct+Math.imul(ir,wr)|0,ct=ct+Math.imul(sr,vr)|0,St=St+Math.imul(sr,wr)|0;var tn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(tn>>>26)|0,tn&=67108863,Et=Math.imul(Xt,Ir),ct=Math.imul(Xt,Nr),ct=ct+Math.imul(Bt,Ir)|0,St=Math.imul(Bt,Nr),Et=Et+Math.imul(Or,br)|0,ct=ct+Math.imul(Or,Dr)|0,ct=ct+Math.imul(Lr,br)|0,St=St+Math.imul(Lr,Dr)|0,Et=Et+Math.imul(Er,Mr)|0,ct=ct+Math.imul(Er,qr)|0,ct=ct+Math.imul(Ar,Mr)|0,St=St+Math.imul(Ar,qr)|0,Et=Et+Math.imul($r,Br)|0,ct=ct+Math.imul($r,Hr)|0,ct=ct+Math.imul(Cr,Br)|0,St=St+Math.imul(Cr,Hr)|0,Et=Et+Math.imul(yr,Qt)|0,ct=ct+Math.imul(yr,Jt)|0,ct=ct+Math.imul(hr,Qt)|0,St=St+Math.imul(hr,Jt)|0,Et=Et+Math.imul(ur,rr)|0,ct=ct+Math.imul(ur,dr)|0,ct=ct+Math.imul(pr,rr)|0,St=St+Math.imul(pr,dr)|0,Et=Et+Math.imul(Vt,vr)|0,ct=ct+Math.imul(Vt,wr)|0,ct=ct+Math.imul(fr,vr)|0,St=St+Math.imul(fr,wr)|0;var sn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(sn>>>26)|0,sn&=67108863,Et=Math.imul(Xt,br),ct=Math.imul(Xt,Dr),ct=ct+Math.imul(Bt,br)|0,St=Math.imul(Bt,Dr),Et=Et+Math.imul(Or,Mr)|0,ct=ct+Math.imul(Or,qr)|0,ct=ct+Math.imul(Lr,Mr)|0,St=St+Math.imul(Lr,qr)|0,Et=Et+Math.imul(Er,Br)|0,ct=ct+Math.imul(Er,Hr)|0,ct=ct+Math.imul(Ar,Br)|0,St=St+Math.imul(Ar,Hr)|0,Et=Et+Math.imul($r,Qt)|0,ct=ct+Math.imul($r,Jt)|0,ct=ct+Math.imul(Cr,Qt)|0,St=St+Math.imul(Cr,Jt)|0,Et=Et+Math.imul(yr,rr)|0,ct=ct+Math.imul(yr,dr)|0,ct=ct+Math.imul(hr,rr)|0,St=St+Math.imul(hr,dr)|0,Et=Et+Math.imul(ur,vr)|0,ct=ct+Math.imul(ur,wr)|0,ct=ct+Math.imul(pr,vr)|0,St=St+Math.imul(pr,wr)|0;var Qr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,Et=Math.imul(Xt,Mr),ct=Math.imul(Xt,qr),ct=ct+Math.imul(Bt,Mr)|0,St=Math.imul(Bt,qr),Et=Et+Math.imul(Or,Br)|0,ct=ct+Math.imul(Or,Hr)|0,ct=ct+Math.imul(Lr,Br)|0,St=St+Math.imul(Lr,Hr)|0,Et=Et+Math.imul(Er,Qt)|0,ct=ct+Math.imul(Er,Jt)|0,ct=ct+Math.imul(Ar,Qt)|0,St=St+Math.imul(Ar,Jt)|0,Et=Et+Math.imul($r,rr)|0,ct=ct+Math.imul($r,dr)|0,ct=ct+Math.imul(Cr,rr)|0,St=St+Math.imul(Cr,dr)|0,Et=Et+Math.imul(yr,vr)|0,ct=ct+Math.imul(yr,wr)|0,ct=ct+Math.imul(hr,vr)|0,St=St+Math.imul(hr,wr)|0;var rn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(rn>>>26)|0,rn&=67108863,Et=Math.imul(Xt,Br),ct=Math.imul(Xt,Hr),ct=ct+Math.imul(Bt,Br)|0,St=Math.imul(Bt,Hr),Et=Et+Math.imul(Or,Qt)|0,ct=ct+Math.imul(Or,Jt)|0,ct=ct+Math.imul(Lr,Qt)|0,St=St+Math.imul(Lr,Jt)|0,Et=Et+Math.imul(Er,rr)|0,ct=ct+Math.imul(Er,dr)|0,ct=ct+Math.imul(Ar,rr)|0,St=St+Math.imul(Ar,dr)|0,Et=Et+Math.imul($r,vr)|0,ct=ct+Math.imul($r,wr)|0,ct=ct+Math.imul(Cr,vr)|0,St=St+Math.imul(Cr,wr)|0;var nn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(nn>>>26)|0,nn&=67108863,Et=Math.imul(Xt,Qt),ct=Math.imul(Xt,Jt),ct=ct+Math.imul(Bt,Qt)|0,St=Math.imul(Bt,Jt),Et=Et+Math.imul(Or,rr)|0,ct=ct+Math.imul(Or,dr)|0,ct=ct+Math.imul(Lr,rr)|0,St=St+Math.imul(Lr,dr)|0,Et=Et+Math.imul(Er,vr)|0,ct=ct+Math.imul(Er,wr)|0,ct=ct+Math.imul(Ar,vr)|0,St=St+Math.imul(Ar,wr)|0;var Xr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,Et=Math.imul(Xt,rr),ct=Math.imul(Xt,dr),ct=ct+Math.imul(Bt,rr)|0,St=Math.imul(Bt,dr),Et=Et+Math.imul(Or,vr)|0,ct=ct+Math.imul(Or,wr)|0,ct=ct+Math.imul(Lr,vr)|0,St=St+Math.imul(Lr,wr)|0;var kr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(kr>>>26)|0,kr&=67108863,Et=Math.imul(Xt,vr),ct=Math.imul(Xt,wr),ct=ct+Math.imul(Bt,vr)|0,St=Math.imul(Bt,wr);var Pr=($t+Et|0)+((ct&8191)<<13)|0;return $t=(St+(ct>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,bt[0]=Yr,bt[1]=jr,bt[2]=mn,bt[3]=Jr,bt[4]=cn,bt[5]=ln,bt[6]=vn,bt[7]=_n,bt[8]=fn,bt[9]=hn,bt[10]=dn,bt[11]=tn,bt[12]=sn,bt[13]=Qr,bt[14]=rn,bt[15]=nn,bt[16]=Xr,bt[17]=kr,bt[18]=Pr,$t!==0&&(bt[19]=$t,ht.length++),ht};Math.imul||(Nt=xt);function Ct(It,ot,ft){ft.negative=ot.negative^It.negative,ft.length=It.length+ot.length;for(var ht=0,vt=0,wt=0;wt<ft.length-1;wt++){var bt=vt;vt=0;for(var $t=ht&67108863,Et=Math.min(wt,ot.length-1),ct=Math.max(0,wt-It.length+1);ct<=Et;ct++){var St=wt-ct,Mt=It.words[St]|0,Lt=ot.words[ct]|0,Ut=Mt*Lt,Kt=Ut&67108863;bt=bt+(Ut/67108864|0)|0,Kt=Kt+$t|0,$t=Kt&67108863,bt=bt+(Kt>>>26)|0,vt+=bt>>>26,bt&=67108863}ft.words[wt]=$t,ht=bt,bt=vt}return ht!==0?ft.words[wt]=ht:ft.length--,ft.strip()}function Ot(It,ot,ft){var ht=new kt;return ht.mulp(It,ot,ft)}it.prototype.mulTo=function(ot,ft){var ht,vt=this.length+ot.length;return this.length===10&&ot.length===10?ht=Nt(this,ot,ft):vt<63?ht=xt(this,ot,ft):vt<1024?ht=Ct(this,ot,ft):ht=Ot(this,ot,ft),ht};function kt(It,ot){this.x=It,this.y=ot}kt.prototype.makeRBT=function(ot){for(var ft=new Array(ot),ht=it.prototype._countBits(ot)-1,vt=0;vt<ot;vt++)ft[vt]=this.revBin(vt,ht,ot);return ft},kt.prototype.revBin=function(ot,ft,ht){if(ot===0||ot===ht-1)return ot;for(var vt=0,wt=0;wt<ft;wt++)vt|=(ot&1)<<ft-wt-1,ot>>=1;return vt},kt.prototype.permute=function(ot,ft,ht,vt,wt,bt){for(var $t=0;$t<bt;$t++)vt[$t]=ft[ot[$t]],wt[$t]=ht[ot[$t]]},kt.prototype.transform=function(ot,ft,ht,vt,wt,bt){this.permute(bt,ot,ft,ht,vt,wt);for(var $t=1;$t<wt;$t<<=1)for(var Et=$t<<1,ct=Math.cos(2*Math.PI/Et),St=Math.sin(2*Math.PI/Et),Mt=0;Mt<wt;Mt+=Et)for(var Lt=ct,Ut=St,Kt=0;Kt<$t;Kt++){var Ht=ht[Mt+Kt],Ft=vt[Mt+Kt],zt=ht[Mt+Kt+$t],ir=vt[Mt+Kt+$t],sr=Lt*zt-Ut*ir;ir=Lt*ir+Ut*zt,zt=sr,ht[Mt+Kt]=Ht+zt,vt[Mt+Kt]=Ft+ir,ht[Mt+Kt+$t]=Ht-zt,vt[Mt+Kt+$t]=Ft-ir,Kt!==Et&&(sr=ct*Lt-St*Ut,Ut=ct*Ut+St*Lt,Lt=sr)}},kt.prototype.guessLen13b=function(ot,ft){var ht=Math.max(ft,ot)|1,vt=ht&1,wt=0;for(ht=ht/2|0;ht;ht=ht>>>1)wt++;return 1<<wt+1+vt},kt.prototype.conjugate=function(ot,ft,ht){if(!(ht<=1))for(var vt=0;vt<ht/2;vt++){var wt=ot[vt];ot[vt]=ot[ht-vt-1],ot[ht-vt-1]=wt,wt=ft[vt],ft[vt]=-ft[ht-vt-1],ft[ht-vt-1]=-wt}},kt.prototype.normalize13b=function(ot,ft){for(var ht=0,vt=0;vt<ft/2;vt++){var wt=Math.round(ot[2*vt+1]/ft)*8192+Math.round(ot[2*vt]/ft)+ht;ot[vt]=wt&67108863,wt<67108864?ht=0:ht=wt/67108864|0}return ot},kt.prototype.convert13b=function(ot,ft,ht,vt){for(var wt=0,bt=0;bt<ft;bt++)wt=wt+(ot[bt]|0),ht[2*bt]=wt&8191,wt=wt>>>13,ht[2*bt+1]=wt&8191,wt=wt>>>13;for(bt=2*ft;bt<vt;++bt)ht[bt]=0;nt(wt===0),nt((wt&-8192)===0)},kt.prototype.stub=function(ot){for(var ft=new Array(ot),ht=0;ht<ot;ht++)ft[ht]=0;return ft},kt.prototype.mulp=function(ot,ft,ht){var vt=2*this.guessLen13b(ot.length,ft.length),wt=this.makeRBT(vt),bt=this.stub(vt),$t=new Array(vt),Et=new Array(vt),ct=new Array(vt),St=new Array(vt),Mt=new Array(vt),Lt=new Array(vt),Ut=ht.words;Ut.length=vt,this.convert13b(ot.words,ot.length,$t,vt),this.convert13b(ft.words,ft.length,St,vt),this.transform($t,bt,Et,ct,vt,wt),this.transform(St,bt,Mt,Lt,vt,wt);for(var Kt=0;Kt<vt;Kt++){var Ht=Et[Kt]*Mt[Kt]-ct[Kt]*Lt[Kt];ct[Kt]=Et[Kt]*Lt[Kt]+ct[Kt]*Mt[Kt],Et[Kt]=Ht}return this.conjugate(Et,ct,vt),this.transform(Et,ct,Ut,bt,vt,wt),this.conjugate(Ut,bt,vt),this.normalize13b(Ut,vt),ht.negative=ot.negative^ft.negative,ht.length=ot.length+ft.length,ht.strip()},it.prototype.mul=function(ot){var ft=new it(null);return ft.words=new Array(this.length+ot.length),this.mulTo(ot,ft)},it.prototype.mulf=function(ot){var ft=new it(null);return ft.words=new Array(this.length+ot.length),Ot(this,ot,ft)},it.prototype.imul=function(ot){return this.clone().mulTo(ot,this)},it.prototype.imuln=function(ot){nt(typeof ot=="number"),nt(ot<67108864);for(var ft=0,ht=0;ht<this.length;ht++){var vt=(this.words[ht]|0)*ot,wt=(vt&67108863)+(ft&67108863);ft>>=26,ft+=vt/67108864|0,ft+=wt>>>26,this.words[ht]=wt&67108863}return ft!==0&&(this.words[ht]=ft,this.length++),this},it.prototype.muln=function(ot){return this.clone().imuln(ot)},it.prototype.sqr=function(){return this.mul(this)},it.prototype.isqr=function(){return this.imul(this.clone())},it.prototype.pow=function(ot){var ft=At(ot);if(ft.length===0)return new it(1);for(var ht=this,vt=0;vt<ft.length&&ft[vt]===0;vt++,ht=ht.sqr());if(++vt<ft.length)for(var wt=ht.sqr();vt<ft.length;vt++,wt=wt.sqr())ft[vt]!==0&&(ht=ht.mul(wt));return ht},it.prototype.iushln=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26,vt=67108863>>>26-ft<<26-ft,wt;if(ft!==0){var bt=0;for(wt=0;wt<this.length;wt++){var $t=this.words[wt]&vt,Et=(this.words[wt]|0)-$t<<ft;this.words[wt]=Et|bt,bt=$t>>>26-ft}bt&&(this.words[wt]=bt,this.length++)}if(ht!==0){for(wt=this.length-1;wt>=0;wt--)this.words[wt+ht]=this.words[wt];for(wt=0;wt<ht;wt++)this.words[wt]=0;this.length+=ht}return this.strip()},it.prototype.ishln=function(ot){return nt(this.negative===0),this.iushln(ot)},it.prototype.iushrn=function(ot,ft,ht){nt(typeof ot=="number"&&ot>=0);var vt;ft?vt=(ft-ft%26)/26:vt=0;var wt=ot%26,bt=Math.min((ot-wt)/26,this.length),$t=67108863^67108863>>>wt<<wt,Et=ht;if(vt-=bt,vt=Math.max(0,vt),Et){for(var ct=0;ct<bt;ct++)Et.words[ct]=this.words[ct];Et.length=bt}if(bt!==0)if(this.length>bt)for(this.length-=bt,ct=0;ct<this.length;ct++)this.words[ct]=this.words[ct+bt];else this.words[0]=0,this.length=1;var St=0;for(ct=this.length-1;ct>=0&&(St!==0||ct>=vt);ct--){var Mt=this.words[ct]|0;this.words[ct]=St<<26-wt|Mt>>>wt,St=Mt&$t}return Et&&St!==0&&(Et.words[Et.length++]=St),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},it.prototype.ishrn=function(ot,ft,ht){return nt(this.negative===0),this.iushrn(ot,ft,ht)},it.prototype.shln=function(ot){return this.clone().ishln(ot)},it.prototype.ushln=function(ot){return this.clone().iushln(ot)},it.prototype.shrn=function(ot){return this.clone().ishrn(ot)},it.prototype.ushrn=function(ot){return this.clone().iushrn(ot)},it.prototype.testn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26,vt=1<<ft;if(this.length<=ht)return!1;var wt=this.words[ht];return!!(wt&vt)},it.prototype.imaskn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26;if(nt(this.negative===0,"imaskn works only with positive numbers"),this.length<=ht)return this;if(ft!==0&&ht++,this.length=Math.min(ht,this.length),ft!==0){var vt=67108863^67108863>>>ft<<ft;this.words[this.length-1]&=vt}return this.strip()},it.prototype.maskn=function(ot){return this.clone().imaskn(ot)},it.prototype.iaddn=function(ot){return nt(typeof ot=="number"),nt(ot<67108864),ot<0?this.isubn(-ot):this.negative!==0?this.length===1&&(this.words[0]|0)<ot?(this.words[0]=ot-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ot),this.negative=1,this):this._iaddn(ot)},it.prototype._iaddn=function(ot){this.words[0]+=ot;for(var ft=0;ft<this.length&&this.words[ft]>=67108864;ft++)this.words[ft]-=67108864,ft===this.length-1?this.words[ft+1]=1:this.words[ft+1]++;return this.length=Math.max(this.length,ft+1),this},it.prototype.isubn=function(ot){if(nt(typeof ot=="number"),nt(ot<67108864),ot<0)return this.iaddn(-ot);if(this.negative!==0)return this.negative=0,this.iaddn(ot),this.negative=1,this;if(this.words[0]-=ot,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var ft=0;ft<this.length&&this.words[ft]<0;ft++)this.words[ft]+=67108864,this.words[ft+1]-=1;return this.strip()},it.prototype.addn=function(ot){return this.clone().iaddn(ot)},it.prototype.subn=function(ot){return this.clone().isubn(ot)},it.prototype.iabs=function(){return this.negative=0,this},it.prototype.abs=function(){return this.clone().iabs()},it.prototype._ishlnsubmul=function(ot,ft,ht){var vt=ot.length+ht,wt;this._expand(vt);var bt,$t=0;for(wt=0;wt<ot.length;wt++){bt=(this.words[wt+ht]|0)+$t;var Et=(ot.words[wt]|0)*ft;bt-=Et&67108863,$t=(bt>>26)-(Et/67108864|0),this.words[wt+ht]=bt&67108863}for(;wt<this.length-ht;wt++)bt=(this.words[wt+ht]|0)+$t,$t=bt>>26,this.words[wt+ht]=bt&67108863;if($t===0)return this.strip();for(nt($t===-1),$t=0,wt=0;wt<this.length;wt++)bt=-(this.words[wt]|0)+$t,$t=bt>>26,this.words[wt]=bt&67108863;return this.negative=1,this.strip()},it.prototype._wordDiv=function(ot,ft){var ht=this.length-ot.length,vt=this.clone(),wt=ot,bt=wt.words[wt.length-1]|0,$t=this._countBits(bt);ht=26-$t,ht!==0&&(wt=wt.ushln(ht),vt.iushln(ht),bt=wt.words[wt.length-1]|0);var Et=vt.length-wt.length,ct;if(ft!=="mod"){ct=new it(null),ct.length=Et+1,ct.words=new Array(ct.length);for(var St=0;St<ct.length;St++)ct.words[St]=0}var Mt=vt.clone()._ishlnsubmul(wt,1,Et);Mt.negative===0&&(vt=Mt,ct&&(ct.words[Et]=1));for(var Lt=Et-1;Lt>=0;Lt--){var Ut=(vt.words[wt.length+Lt]|0)*67108864+(vt.words[wt.length+Lt-1]|0);for(Ut=Math.min(Ut/bt|0,67108863),vt._ishlnsubmul(wt,Ut,Lt);vt.negative!==0;)Ut--,vt.negative=0,vt._ishlnsubmul(wt,1,Lt),vt.isZero()||(vt.negative^=1);ct&&(ct.words[Lt]=Ut)}return ct&&ct.strip(),vt.strip(),ft!=="div"&&ht!==0&&vt.iushrn(ht),{div:ct||null,mod:vt}},it.prototype.divmod=function(ot,ft,ht){if(nt(!ot.isZero()),this.isZero())return{div:new it(0),mod:new it(0)};var vt,wt,bt;return this.negative!==0&&ot.negative===0?(bt=this.neg().divmod(ot,ft),ft!=="mod"&&(vt=bt.div.neg()),ft!=="div"&&(wt=bt.mod.neg(),ht&&wt.negative!==0&&wt.iadd(ot)),{div:vt,mod:wt}):this.negative===0&&ot.negative!==0?(bt=this.divmod(ot.neg(),ft),ft!=="mod"&&(vt=bt.div.neg()),{div:vt,mod:bt.mod}):this.negative&ot.negative?(bt=this.neg().divmod(ot.neg(),ft),ft!=="div"&&(wt=bt.mod.neg(),ht&&wt.negative!==0&&wt.isub(ot)),{div:bt.div,mod:wt}):ot.length>this.length||this.cmp(ot)<0?{div:new it(0),mod:this}:ot.length===1?ft==="div"?{div:this.divn(ot.words[0]),mod:null}:ft==="mod"?{div:null,mod:new it(this.modn(ot.words[0]))}:{div:this.divn(ot.words[0]),mod:new it(this.modn(ot.words[0]))}:this._wordDiv(ot,ft)},it.prototype.div=function(ot){return this.divmod(ot,"div",!1).div},it.prototype.mod=function(ot){return this.divmod(ot,"mod",!1).mod},it.prototype.umod=function(ot){return this.divmod(ot,"mod",!0).mod},it.prototype.divRound=function(ot){var ft=this.divmod(ot);if(ft.mod.isZero())return ft.div;var ht=ft.div.negative!==0?ft.mod.isub(ot):ft.mod,vt=ot.ushrn(1),wt=ot.andln(1),bt=ht.cmp(vt);return bt<0||wt===1&&bt===0?ft.div:ft.div.negative!==0?ft.div.isubn(1):ft.div.iaddn(1)},it.prototype.modn=function(ot){nt(ot<=67108863);for(var ft=(1<<26)%ot,ht=0,vt=this.length-1;vt>=0;vt--)ht=(ft*ht+(this.words[vt]|0))%ot;return ht},it.prototype.idivn=function(ot){nt(ot<=67108863);for(var ft=0,ht=this.length-1;ht>=0;ht--){var vt=(this.words[ht]|0)+ft*67108864;this.words[ht]=vt/ot|0,ft=vt%ot}return this.strip()},it.prototype.divn=function(ot){return this.clone().idivn(ot)},it.prototype.egcd=function(ot){nt(ot.negative===0),nt(!ot.isZero());var ft=this,ht=ot.clone();ft.negative!==0?ft=ft.umod(ot):ft=ft.clone();for(var vt=new it(1),wt=new it(0),bt=new it(0),$t=new it(1),Et=0;ft.isEven()&&ht.isEven();)ft.iushrn(1),ht.iushrn(1),++Et;for(var ct=ht.clone(),St=ft.clone();!ft.isZero();){for(var Mt=0,Lt=1;!(ft.words[0]&Lt)&&Mt<26;++Mt,Lt<<=1);if(Mt>0)for(ft.iushrn(Mt);Mt-- >0;)(vt.isOdd()||wt.isOdd())&&(vt.iadd(ct),wt.isub(St)),vt.iushrn(1),wt.iushrn(1);for(var Ut=0,Kt=1;!(ht.words[0]&Kt)&&Ut<26;++Ut,Kt<<=1);if(Ut>0)for(ht.iushrn(Ut);Ut-- >0;)(bt.isOdd()||$t.isOdd())&&(bt.iadd(ct),$t.isub(St)),bt.iushrn(1),$t.iushrn(1);ft.cmp(ht)>=0?(ft.isub(ht),vt.isub(bt),wt.isub($t)):(ht.isub(ft),bt.isub(vt),$t.isub(wt))}return{a:bt,b:$t,gcd:ht.iushln(Et)}},it.prototype._invmp=function(ot){nt(ot.negative===0),nt(!ot.isZero());var ft=this,ht=ot.clone();ft.negative!==0?ft=ft.umod(ot):ft=ft.clone();for(var vt=new it(1),wt=new it(0),bt=ht.clone();ft.cmpn(1)>0&&ht.cmpn(1)>0;){for(var $t=0,Et=1;!(ft.words[0]&Et)&&$t<26;++$t,Et<<=1);if($t>0)for(ft.iushrn($t);$t-- >0;)vt.isOdd()&&vt.iadd(bt),vt.iushrn(1);for(var ct=0,St=1;!(ht.words[0]&St)&&ct<26;++ct,St<<=1);if(ct>0)for(ht.iushrn(ct);ct-- >0;)wt.isOdd()&&wt.iadd(bt),wt.iushrn(1);ft.cmp(ht)>=0?(ft.isub(ht),vt.isub(wt)):(ht.isub(ft),wt.isub(vt))}var Mt;return ft.cmpn(1)===0?Mt=vt:Mt=wt,Mt.cmpn(0)<0&&Mt.iadd(ot),Mt},it.prototype.gcd=function(ot){if(this.isZero())return ot.abs();if(ot.isZero())return this.abs();var ft=this.clone(),ht=ot.clone();ft.negative=0,ht.negative=0;for(var vt=0;ft.isEven()&&ht.isEven();vt++)ft.iushrn(1),ht.iushrn(1);do{for(;ft.isEven();)ft.iushrn(1);for(;ht.isEven();)ht.iushrn(1);var wt=ft.cmp(ht);if(wt<0){var bt=ft;ft=ht,ht=bt}else if(wt===0||ht.cmpn(1)===0)break;ft.isub(ht)}while(!0);return ht.iushln(vt)},it.prototype.invm=function(ot){return this.egcd(ot).a.umod(ot)},it.prototype.isEven=function(){return(this.words[0]&1)===0},it.prototype.isOdd=function(){return(this.words[0]&1)===1},it.prototype.andln=function(ot){return this.words[0]&ot},it.prototype.bincn=function(ot){nt(typeof ot=="number");var ft=ot%26,ht=(ot-ft)/26,vt=1<<ft;if(this.length<=ht)return this._expand(ht+1),this.words[ht]|=vt,this;for(var wt=vt,bt=ht;wt!==0&&bt<this.length;bt++){var $t=this.words[bt]|0;$t+=wt,wt=$t>>>26,$t&=67108863,this.words[bt]=$t}return wt!==0&&(this.words[bt]=wt,this.length++),this},it.prototype.isZero=function(){return this.length===1&&this.words[0]===0},it.prototype.cmpn=function(ot){var ft=ot<0;if(this.negative!==0&&!ft)return-1;if(this.negative===0&&ft)return 1;this.strip();var ht;if(this.length>1)ht=1;else{ft&&(ot=-ot),nt(ot<=67108863,"Number is too big");var vt=this.words[0]|0;ht=vt===ot?0:vt<ot?-1:1}return this.negative!==0?-ht|0:ht},it.prototype.cmp=function(ot){if(this.negative!==0&&ot.negative===0)return-1;if(this.negative===0&&ot.negative!==0)return 1;var ft=this.ucmp(ot);return this.negative!==0?-ft|0:ft},it.prototype.ucmp=function(ot){if(this.length>ot.length)return 1;if(this.length<ot.length)return-1;for(var ft=0,ht=this.length-1;ht>=0;ht--){var vt=this.words[ht]|0,wt=ot.words[ht]|0;if(vt!==wt){vt<wt?ft=-1:vt>wt&&(ft=1);break}}return ft},it.prototype.gtn=function(ot){return this.cmpn(ot)===1},it.prototype.gt=function(ot){return this.cmp(ot)===1},it.prototype.gten=function(ot){return this.cmpn(ot)>=0},it.prototype.gte=function(ot){return this.cmp(ot)>=0},it.prototype.ltn=function(ot){return this.cmpn(ot)===-1},it.prototype.lt=function(ot){return this.cmp(ot)===-1},it.prototype.lten=function(ot){return this.cmpn(ot)<=0},it.prototype.lte=function(ot){return this.cmp(ot)<=0},it.prototype.eqn=function(ot){return this.cmpn(ot)===0},it.prototype.eq=function(ot){return this.cmp(ot)===0},it.red=function(ot){return new er(ot)},it.prototype.toRed=function(ot){return nt(!this.red,"Already a number in reduction context"),nt(this.negative===0,"red works only with positives"),ot.convertTo(this)._forceRed(ot)},it.prototype.fromRed=function(){return nt(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},it.prototype._forceRed=function(ot){return this.red=ot,this},it.prototype.forceRed=function(ot){return nt(!this.red,"Already a number in reduction context"),this._forceRed(ot)},it.prototype.redAdd=function(ot){return nt(this.red,"redAdd works only with red numbers"),this.red.add(this,ot)},it.prototype.redIAdd=function(ot){return nt(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ot)},it.prototype.redSub=function(ot){return nt(this.red,"redSub works only with red numbers"),this.red.sub(this,ot)},it.prototype.redISub=function(ot){return nt(this.red,"redISub works only with red numbers"),this.red.isub(this,ot)},it.prototype.redShl=function(ot){return nt(this.red,"redShl works only with red numbers"),this.red.shl(this,ot)},it.prototype.redMul=function(ot){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ot),this.red.mul(this,ot)},it.prototype.redIMul=function(ot){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ot),this.red.imul(this,ot)},it.prototype.redSqr=function(){return nt(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},it.prototype.redISqr=function(){return nt(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},it.prototype.redSqrt=function(){return nt(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},it.prototype.redInvm=function(){return nt(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},it.prototype.redNeg=function(){return nt(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},it.prototype.redPow=function(ot){return nt(this.red&&!ot.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ot)};var Pt={k256:null,p224:null,p192:null,p25519:null};function Dt(It,ot){this.name=It,this.p=new it(ot,16),this.n=this.p.bitLength(),this.k=new it(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Dt.prototype._tmp=function(){var ot=new it(null);return ot.words=new Array(Math.ceil(this.n/13)),ot},Dt.prototype.ireduce=function(ot){var ft=ot,ht;do this.split(ft,this.tmp),ft=this.imulK(ft),ft=ft.iadd(this.tmp),ht=ft.bitLength();while(ht>this.n);var vt=ht<this.n?-1:ft.ucmp(this.p);return vt===0?(ft.words[0]=0,ft.length=1):vt>0?ft.isub(this.p):ft.strip!==void 0?ft.strip():ft._strip(),ft},Dt.prototype.split=function(ot,ft){ot.iushrn(this.n,0,ft)},Dt.prototype.imulK=function(ot){return ot.imul(this.k)};function Gt(){Dt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}at(Gt,Dt),Gt.prototype.split=function(ot,ft){for(var ht=4194303,vt=Math.min(ot.length,9),wt=0;wt<vt;wt++)ft.words[wt]=ot.words[wt];if(ft.length=vt,ot.length<=9){ot.words[0]=0,ot.length=1;return}var bt=ot.words[9];for(ft.words[ft.length++]=bt&ht,wt=10;wt<ot.length;wt++){var $t=ot.words[wt]|0;ot.words[wt-10]=($t&ht)<<4|bt>>>22,bt=$t}bt>>>=22,ot.words[wt-10]=bt,bt===0&&ot.length>10?ot.length-=10:ot.length-=9},Gt.prototype.imulK=function(ot){ot.words[ot.length]=0,ot.words[ot.length+1]=0,ot.length+=2;for(var ft=0,ht=0;ht<ot.length;ht++){var vt=ot.words[ht]|0;ft+=vt*977,ot.words[ht]=ft&67108863,ft=vt*64+(ft/67108864|0)}return ot.words[ot.length-1]===0&&(ot.length--,ot.words[ot.length-1]===0&&ot.length--),ot};function jt(){Dt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}at(jt,Dt);function Yt(){Dt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}at(Yt,Dt);function tr(){Dt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}at(tr,Dt),tr.prototype.imulK=function(ot){for(var ft=0,ht=0;ht<ot.length;ht++){var vt=(ot.words[ht]|0)*19+ft,wt=vt&67108863;vt>>>=26,ot.words[ht]=wt,ft=vt}return ft!==0&&(ot.words[ot.length++]=ft),ot},it._prime=function(ot){if(Pt[ot])return Pt[ot];var ft;if(ot==="k256")ft=new Gt;else if(ot==="p224")ft=new jt;else if(ot==="p192")ft=new Yt;else if(ot==="p25519")ft=new tr;else throw new Error("Unknown prime "+ot);return Pt[ot]=ft,ft};function er(It){if(typeof It=="string"){var ot=it._prime(It);this.m=ot.p,this.prime=ot}else nt(It.gtn(1),"modulus must be greater than 1"),this.m=It,this.prime=null}er.prototype._verify1=function(ot){nt(ot.negative===0,"red works only with positives"),nt(ot.red,"red works only with red numbers")},er.prototype._verify2=function(ot,ft){nt((ot.negative|ft.negative)===0,"red works only with positives"),nt(ot.red&&ot.red===ft.red,"red works only with red numbers")},er.prototype.imod=function(ot){return this.prime?this.prime.ireduce(ot)._forceRed(this):ot.umod(this.m)._forceRed(this)},er.prototype.neg=function(ot){return ot.isZero()?ot.clone():this.m.sub(ot)._forceRed(this)},er.prototype.add=function(ot,ft){this._verify2(ot,ft);var ht=ot.add(ft);return ht.cmp(this.m)>=0&&ht.isub(this.m),ht._forceRed(this)},er.prototype.iadd=function(ot,ft){this._verify2(ot,ft);var ht=ot.iadd(ft);return ht.cmp(this.m)>=0&&ht.isub(this.m),ht},er.prototype.sub=function(ot,ft){this._verify2(ot,ft);var ht=ot.sub(ft);return ht.cmpn(0)<0&&ht.iadd(this.m),ht._forceRed(this)},er.prototype.isub=function(ot,ft){this._verify2(ot,ft);var ht=ot.isub(ft);return ht.cmpn(0)<0&&ht.iadd(this.m),ht},er.prototype.shl=function(ot,ft){return this._verify1(ot),this.imod(ot.ushln(ft))},er.prototype.imul=function(ot,ft){return this._verify2(ot,ft),this.imod(ot.imul(ft))},er.prototype.mul=function(ot,ft){return this._verify2(ot,ft),this.imod(ot.mul(ft))},er.prototype.isqr=function(ot){return this.imul(ot,ot.clone())},er.prototype.sqr=function(ot){return this.mul(ot,ot)},er.prototype.sqrt=function(ot){if(ot.isZero())return ot.clone();var ft=this.m.andln(3);if(nt(ft%2===1),ft===3){var ht=this.m.add(new it(1)).iushrn(2);return this.pow(ot,ht)}for(var vt=this.m.subn(1),wt=0;!vt.isZero()&&vt.andln(1)===0;)wt++,vt.iushrn(1);nt(!vt.isZero());var bt=new it(1).toRed(this),$t=bt.redNeg(),Et=this.m.subn(1).iushrn(1),ct=this.m.bitLength();for(ct=new it(2*ct*ct).toRed(this);this.pow(ct,Et).cmp($t)!==0;)ct.redIAdd($t);for(var St=this.pow(ct,vt),Mt=this.pow(ot,vt.addn(1).iushrn(1)),Lt=this.pow(ot,vt),Ut=wt;Lt.cmp(bt)!==0;){for(var Kt=Lt,Ht=0;Kt.cmp(bt)!==0;Ht++)Kt=Kt.redSqr();nt(Ht<Ut);var Ft=this.pow(St,new it(1).iushln(Ut-Ht-1));Mt=Mt.redMul(Ft),St=Ft.redSqr(),Lt=Lt.redMul(St),Ut=Ht}return Mt},er.prototype.invm=function(ot){var ft=ot._invmp(this.m);return ft.negative!==0?(ft.negative=0,this.imod(ft).redNeg()):this.imod(ft)},er.prototype.pow=function(ot,ft){if(ft.isZero())return new it(1).toRed(this);if(ft.cmpn(1)===0)return ot.clone();var ht=4,vt=new Array(1<<ht);vt[0]=new it(1).toRed(this),vt[1]=ot;for(var wt=2;wt<vt.length;wt++)vt[wt]=this.mul(vt[wt-1],ot);var bt=vt[0],$t=0,Et=0,ct=ft.bitLength()%26;for(ct===0&&(ct=26),wt=ft.length-1;wt>=0;wt--){for(var St=ft.words[wt],Mt=ct-1;Mt>=0;Mt--){var Lt=St>>Mt&1;if(bt!==vt[0]&&(bt=this.sqr(bt)),Lt===0&&$t===0){Et=0;continue}$t<<=1,$t|=Lt,Et++,!(Et!==ht&&(wt!==0||Mt!==0))&&(bt=this.mul(bt,vt[$t]),Et=0,$t=0)}ct=26}return bt},er.prototype.convertTo=function(ot){var ft=ot.umod(this.m);return ft===ot?ft.clone():ft},er.prototype.convertFrom=function(ot){var ft=ot.clone();return ft.red=null,ft},it.mont=function(ot){return new lr(ot)};function lr(It){er.call(this,It),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new it(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}at(lr,er),lr.prototype.convertTo=function(ot){return this.imod(ot.ushln(this.shift))},lr.prototype.convertFrom=function(ot){var ft=this.imod(ot.mul(this.rinv));return ft.red=null,ft},lr.prototype.imul=function(ot,ft){if(ot.isZero()||ft.isZero())return ot.words[0]=0,ot.length=1,ot;var ht=ot.imul(ft),vt=ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),wt=ht.isub(vt).iushrn(this.shift),bt=wt;return wt.cmp(this.m)>=0?bt=wt.isub(this.m):wt.cmpn(0)<0&&(bt=wt.iadd(this.m)),bt._forceRed(this)},lr.prototype.mul=function(ot,ft){if(ot.isZero()||ft.isZero())return new it(0)._forceRed(this);var ht=ot.mul(ft),vt=ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),wt=ht.isub(vt).iushrn(this.shift),bt=wt;return wt.cmp(this.m)>=0?bt=wt.isub(this.m):wt.cmpn(0)<0&&(bt=wt.iadd(this.m)),bt._forceRed(this)},lr.prototype.invm=function(ot){var ft=this.imod(ot._invmp(this.m).mul(this.r2));return ft._forceRed(this)}})(tt,commonjsGlobal$1)}(bn$1)),bn$1.exports}var browser$2,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$2;hasRequiredBrowser$2=1;var tt=requireElliptic(),et=requireBn$1();browser$2=function(st){return new nt(st)};var rt={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};rt.p224=rt.secp224r1,rt.p256=rt.secp256r1=rt.prime256v1,rt.p192=rt.secp192r1=rt.prime192v1,rt.p384=rt.secp384r1,rt.p521=rt.secp521r1;function nt(it){this.curveType=rt[it],this.curveType||(this.curveType={name:it}),this.curve=new tt.ec(this.curveType.name),this.keys=void 0}nt.prototype.generateKeys=function(it,st){return this.keys=this.curve.genKeyPair(),this.getPublicKey(it,st)},nt.prototype.computeSecret=function(it,st,dt){st=st||"utf8",Buffer.isBuffer(it)||(it=new Buffer(it,st));var pt=this.curve.keyFromPublic(it).getPublic(),mt=pt.mul(this.keys.getPrivate()).getX();return at(mt,dt,this.curveType.byteLength)},nt.prototype.getPublicKey=function(it,st){var dt=this.keys.getPublic(st==="compressed",!0);return st==="hybrid"&&(dt[dt.length-1]%2?dt[0]=7:dt[0]=6),at(dt,it)},nt.prototype.getPrivateKey=function(it){return at(this.keys.getPrivate(),it)},nt.prototype.setPublicKey=function(it,st){return st=st||"utf8",Buffer.isBuffer(it)||(it=new Buffer(it,st)),this.keys._importPublic(it),this},nt.prototype.setPrivateKey=function(it,st){st=st||"utf8",Buffer.isBuffer(it)||(it=new Buffer(it,st));var dt=new et(it);return dt=dt.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(dt),this};function at(it,st,dt){Array.isArray(it)||(it=it.toArray());var pt=new Buffer(it);if(dt&&pt.length<dt){var mt=new Buffer(dt-pt.length);mt.fill(0),pt=Buffer.concat([mt,pt])}return st?pt.toString(st):pt}return browser$2}var browser$1={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var tt=requireBrowser$9(),et=safeBufferExports.Buffer;mgf=function(nt,at){for(var it=et.alloc(0),st=0,dt;it.length<at;)dt=rt(st++),it=et.concat([it,tt("sha1").update(nt).update(dt).digest()]);return it.slice(0,at)};function rt(nt){var at=et.allocUnsafe(4);return at.writeUInt32BE(nt,0),at}return mgf}var xor$1,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor$1=function(et,rt){for(var nt=et.length,at=-1;++at<nt;)et[at]^=rt[at];return et}),xor$1}var bn={exports:{}};bn.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(tt){(function(et,rt){function nt(It,ot){if(!It)throw new Error(ot||"Assertion failed")}function at(It,ot){It.super_=ot;var ft=function(){};ft.prototype=ot.prototype,It.prototype=new ft,It.prototype.constructor=It}function it(It,ot,ft){if(it.isBN(It))return It;this.negative=0,this.words=null,this.length=0,this.red=null,It!==null&&((ot==="le"||ot==="be")&&(ft=ot,ot=10),this._init(It||0,ot||10,ft||"be"))}typeof et=="object"?et.exports=it:rt.BN=it,it.BN=it,it.wordSize=26;var st;try{typeof window<"u"&&typeof window.Buffer<"u"?st=window.Buffer:st=require$$0$2.Buffer}catch{}it.isBN=function(ot){return ot instanceof it?!0:ot!==null&&typeof ot=="object"&&ot.constructor.wordSize===it.wordSize&&Array.isArray(ot.words)},it.max=function(ot,ft){return ot.cmp(ft)>0?ot:ft},it.min=function(ot,ft){return ot.cmp(ft)<0?ot:ft},it.prototype._init=function(ot,ft,ht){if(typeof ot=="number")return this._initNumber(ot,ft,ht);if(typeof ot=="object")return this._initArray(ot,ft,ht);ft==="hex"&&(ft=16),nt(ft===(ft|0)&&ft>=2&&ft<=36),ot=ot.toString().replace(/\s+/g,"");var vt=0;ot[0]==="-"&&(vt++,this.negative=1),vt<ot.length&&(ft===16?this._parseHex(ot,vt,ht):(this._parseBase(ot,ft,vt),ht==="le"&&this._initArray(this.toArray(),ft,ht)))},it.prototype._initNumber=function(ot,ft,ht){ot<0&&(this.negative=1,ot=-ot),ot<67108864?(this.words=[ot&67108863],this.length=1):ot<4503599627370496?(this.words=[ot&67108863,ot/67108864&67108863],this.length=2):(nt(ot<9007199254740992),this.words=[ot&67108863,ot/67108864&67108863,1],this.length=3),ht==="le"&&this._initArray(this.toArray(),ft,ht)},it.prototype._initArray=function(ot,ft,ht){if(nt(typeof ot.length=="number"),ot.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ot.length/3),this.words=new Array(this.length);for(var vt=0;vt<this.length;vt++)this.words[vt]=0;var wt,bt,$t=0;if(ht==="be")for(vt=ot.length-1,wt=0;vt>=0;vt-=3)bt=ot[vt]|ot[vt-1]<<8|ot[vt-2]<<16,this.words[wt]|=bt<<$t&67108863,this.words[wt+1]=bt>>>26-$t&67108863,$t+=24,$t>=26&&($t-=26,wt++);else if(ht==="le")for(vt=0,wt=0;vt<ot.length;vt+=3)bt=ot[vt]|ot[vt+1]<<8|ot[vt+2]<<16,this.words[wt]|=bt<<$t&67108863,this.words[wt+1]=bt>>>26-$t&67108863,$t+=24,$t>=26&&($t-=26,wt++);return this.strip()};function dt(It,ot){var ft=It.charCodeAt(ot);return ft>=65&&ft<=70?ft-55:ft>=97&&ft<=102?ft-87:ft-48&15}function pt(It,ot,ft){var ht=dt(It,ft);return ft-1>=ot&&(ht|=dt(It,ft-1)<<4),ht}it.prototype._parseHex=function(ot,ft,ht){this.length=Math.ceil((ot.length-ft)/6),this.words=new Array(this.length);for(var vt=0;vt<this.length;vt++)this.words[vt]=0;var wt=0,bt=0,$t;if(ht==="be")for(vt=ot.length-1;vt>=ft;vt-=2)$t=pt(ot,ft,vt)<<wt,this.words[bt]|=$t&67108863,wt>=18?(wt-=18,bt+=1,this.words[bt]|=$t>>>26):wt+=8;else{var Et=ot.length-ft;for(vt=Et%2===0?ft+1:ft;vt<ot.length;vt+=2)$t=pt(ot,ft,vt)<<wt,this.words[bt]|=$t&67108863,wt>=18?(wt-=18,bt+=1,this.words[bt]|=$t>>>26):wt+=8}this.strip()};function mt(It,ot,ft,ht){for(var vt=0,wt=Math.min(It.length,ft),bt=ot;bt<wt;bt++){var $t=It.charCodeAt(bt)-48;vt*=ht,$t>=49?vt+=$t-49+10:$t>=17?vt+=$t-17+10:vt+=$t}return vt}it.prototype._parseBase=function(ot,ft,ht){this.words=[0],this.length=1;for(var vt=0,wt=1;wt<=67108863;wt*=ft)vt++;vt--,wt=wt/ft|0;for(var bt=ot.length-ht,$t=bt%vt,Et=Math.min(bt,bt-$t)+ht,ct=0,St=ht;St<Et;St+=vt)ct=mt(ot,St,St+vt,ft),this.imuln(wt),this.words[0]+ct<67108864?this.words[0]+=ct:this._iaddn(ct);if($t!==0){var Mt=1;for(ct=mt(ot,St,ot.length,ft),St=0;St<$t;St++)Mt*=ft;this.imuln(Mt),this.words[0]+ct<67108864?this.words[0]+=ct:this._iaddn(ct)}this.strip()},it.prototype.copy=function(ot){ot.words=new Array(this.length);for(var ft=0;ft<this.length;ft++)ot.words[ft]=this.words[ft];ot.length=this.length,ot.negative=this.negative,ot.red=this.red},it.prototype.clone=function(){var ot=new it(null);return this.copy(ot),ot},it.prototype._expand=function(ot){for(;this.length<ot;)this.words[this.length++]=0;return this},it.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},it.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},it.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var yt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Rt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Tt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];it.prototype.toString=function(ot,ft){ot=ot||10,ft=ft|0||1;var ht;if(ot===16||ot==="hex"){ht="";for(var vt=0,wt=0,bt=0;bt<this.length;bt++){var $t=this.words[bt],Et=(($t<<vt|wt)&16777215).toString(16);wt=$t>>>24-vt&16777215,wt!==0||bt!==this.length-1?ht=yt[6-Et.length]+Et+ht:ht=Et+ht,vt+=2,vt>=26&&(vt-=26,bt--)}for(wt!==0&&(ht=wt.toString(16)+ht);ht.length%ft!==0;)ht="0"+ht;return this.negative!==0&&(ht="-"+ht),ht}if(ot===(ot|0)&&ot>=2&&ot<=36){var ct=Rt[ot],St=Tt[ot];ht="";var Mt=this.clone();for(Mt.negative=0;!Mt.isZero();){var Lt=Mt.modn(St).toString(ot);Mt=Mt.idivn(St),Mt.isZero()?ht=Lt+ht:ht=yt[ct-Lt.length]+Lt+ht}for(this.isZero()&&(ht="0"+ht);ht.length%ft!==0;)ht="0"+ht;return this.negative!==0&&(ht="-"+ht),ht}nt(!1,"Base should be between 2 and 36")},it.prototype.toNumber=function(){var ot=this.words[0];return this.length===2?ot+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ot+=4503599627370496+this.words[1]*67108864:this.length>2&&nt(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ot:ot},it.prototype.toJSON=function(){return this.toString(16)},it.prototype.toBuffer=function(ot,ft){return nt(typeof st<"u"),this.toArrayLike(st,ot,ft)},it.prototype.toArray=function(ot,ft){return this.toArrayLike(Array,ot,ft)},it.prototype.toArrayLike=function(ot,ft,ht){var vt=this.byteLength(),wt=ht||Math.max(1,vt);nt(vt<=wt,"byte array longer than desired length"),nt(wt>0,"Requested array length <= 0"),this.strip();var bt=ft==="le",$t=new ot(wt),Et,ct,St=this.clone();if(bt){for(ct=0;!St.isZero();ct++)Et=St.andln(255),St.iushrn(8),$t[ct]=Et;for(;ct<wt;ct++)$t[ct]=0}else{for(ct=0;ct<wt-vt;ct++)$t[ct]=0;for(ct=0;!St.isZero();ct++)Et=St.andln(255),St.iushrn(8),$t[wt-ct-1]=Et}return $t},Math.clz32?it.prototype._countBits=function(ot){return 32-Math.clz32(ot)}:it.prototype._countBits=function(ot){var ft=ot,ht=0;return ft>=4096&&(ht+=13,ft>>>=13),ft>=64&&(ht+=7,ft>>>=7),ft>=8&&(ht+=4,ft>>>=4),ft>=2&&(ht+=2,ft>>>=2),ht+ft},it.prototype._zeroBits=function(ot){if(ot===0)return 26;var ft=ot,ht=0;return ft&8191||(ht+=13,ft>>>=13),ft&127||(ht+=7,ft>>>=7),ft&15||(ht+=4,ft>>>=4),ft&3||(ht+=2,ft>>>=2),ft&1||ht++,ht},it.prototype.bitLength=function(){var ot=this.words[this.length-1],ft=this._countBits(ot);return(this.length-1)*26+ft};function At(It){for(var ot=new Array(It.bitLength()),ft=0;ft<ot.length;ft++){var ht=ft/26|0,vt=ft%26;ot[ft]=(It.words[ht]&1<<vt)>>>vt}return ot}it.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ot=0,ft=0;ft<this.length;ft++){var ht=this._zeroBits(this.words[ft]);if(ot+=ht,ht!==26)break}return ot},it.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},it.prototype.toTwos=function(ot){return this.negative!==0?this.abs().inotn(ot).iaddn(1):this.clone()},it.prototype.fromTwos=function(ot){return this.testn(ot-1)?this.notn(ot).iaddn(1).ineg():this.clone()},it.prototype.isNeg=function(){return this.negative!==0},it.prototype.neg=function(){return this.clone().ineg()},it.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},it.prototype.iuor=function(ot){for(;this.length<ot.length;)this.words[this.length++]=0;for(var ft=0;ft<ot.length;ft++)this.words[ft]=this.words[ft]|ot.words[ft];return this.strip()},it.prototype.ior=function(ot){return nt((this.negative|ot.negative)===0),this.iuor(ot)},it.prototype.or=function(ot){return this.length>ot.length?this.clone().ior(ot):ot.clone().ior(this)},it.prototype.uor=function(ot){return this.length>ot.length?this.clone().iuor(ot):ot.clone().iuor(this)},it.prototype.iuand=function(ot){var ft;this.length>ot.length?ft=ot:ft=this;for(var ht=0;ht<ft.length;ht++)this.words[ht]=this.words[ht]&ot.words[ht];return this.length=ft.length,this.strip()},it.prototype.iand=function(ot){return nt((this.negative|ot.negative)===0),this.iuand(ot)},it.prototype.and=function(ot){return this.length>ot.length?this.clone().iand(ot):ot.clone().iand(this)},it.prototype.uand=function(ot){return this.length>ot.length?this.clone().iuand(ot):ot.clone().iuand(this)},it.prototype.iuxor=function(ot){var ft,ht;this.length>ot.length?(ft=this,ht=ot):(ft=ot,ht=this);for(var vt=0;vt<ht.length;vt++)this.words[vt]=ft.words[vt]^ht.words[vt];if(this!==ft)for(;vt<ft.length;vt++)this.words[vt]=ft.words[vt];return this.length=ft.length,this.strip()},it.prototype.ixor=function(ot){return nt((this.negative|ot.negative)===0),this.iuxor(ot)},it.prototype.xor=function(ot){return this.length>ot.length?this.clone().ixor(ot):ot.clone().ixor(this)},it.prototype.uxor=function(ot){return this.length>ot.length?this.clone().iuxor(ot):ot.clone().iuxor(this)},it.prototype.inotn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=Math.ceil(ot/26)|0,ht=ot%26;this._expand(ft),ht>0&&ft--;for(var vt=0;vt<ft;vt++)this.words[vt]=~this.words[vt]&67108863;return ht>0&&(this.words[vt]=~this.words[vt]&67108863>>26-ht),this.strip()},it.prototype.notn=function(ot){return this.clone().inotn(ot)},it.prototype.setn=function(ot,ft){nt(typeof ot=="number"&&ot>=0);var ht=ot/26|0,vt=ot%26;return this._expand(ht+1),ft?this.words[ht]=this.words[ht]|1<<vt:this.words[ht]=this.words[ht]&~(1<<vt),this.strip()},it.prototype.iadd=function(ot){var ft;if(this.negative!==0&&ot.negative===0)return this.negative=0,ft=this.isub(ot),this.negative^=1,this._normSign();if(this.negative===0&&ot.negative!==0)return ot.negative=0,ft=this.isub(ot),ot.negative=1,ft._normSign();var ht,vt;this.length>ot.length?(ht=this,vt=ot):(ht=ot,vt=this);for(var wt=0,bt=0;bt<vt.length;bt++)ft=(ht.words[bt]|0)+(vt.words[bt]|0)+wt,this.words[bt]=ft&67108863,wt=ft>>>26;for(;wt!==0&&bt<ht.length;bt++)ft=(ht.words[bt]|0)+wt,this.words[bt]=ft&67108863,wt=ft>>>26;if(this.length=ht.length,wt!==0)this.words[this.length]=wt,this.length++;else if(ht!==this)for(;bt<ht.length;bt++)this.words[bt]=ht.words[bt];return this},it.prototype.add=function(ot){var ft;return ot.negative!==0&&this.negative===0?(ot.negative=0,ft=this.sub(ot),ot.negative^=1,ft):ot.negative===0&&this.negative!==0?(this.negative=0,ft=ot.sub(this),this.negative=1,ft):this.length>ot.length?this.clone().iadd(ot):ot.clone().iadd(this)},it.prototype.isub=function(ot){if(ot.negative!==0){ot.negative=0;var ft=this.iadd(ot);return ot.negative=1,ft._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ot),this.negative=1,this._normSign();var ht=this.cmp(ot);if(ht===0)return this.negative=0,this.length=1,this.words[0]=0,this;var vt,wt;ht>0?(vt=this,wt=ot):(vt=ot,wt=this);for(var bt=0,$t=0;$t<wt.length;$t++)ft=(vt.words[$t]|0)-(wt.words[$t]|0)+bt,bt=ft>>26,this.words[$t]=ft&67108863;for(;bt!==0&&$t<vt.length;$t++)ft=(vt.words[$t]|0)+bt,bt=ft>>26,this.words[$t]=ft&67108863;if(bt===0&&$t<vt.length&&vt!==this)for(;$t<vt.length;$t++)this.words[$t]=vt.words[$t];return this.length=Math.max(this.length,$t),vt!==this&&(this.negative=1),this.strip()},it.prototype.sub=function(ot){return this.clone().isub(ot)};function xt(It,ot,ft){ft.negative=ot.negative^It.negative;var ht=It.length+ot.length|0;ft.length=ht,ht=ht-1|0;var vt=It.words[0]|0,wt=ot.words[0]|0,bt=vt*wt,$t=bt&67108863,Et=bt/67108864|0;ft.words[0]=$t;for(var ct=1;ct<ht;ct++){for(var St=Et>>>26,Mt=Et&67108863,Lt=Math.min(ct,ot.length-1),Ut=Math.max(0,ct-It.length+1);Ut<=Lt;Ut++){var Kt=ct-Ut|0;vt=It.words[Kt]|0,wt=ot.words[Ut]|0,bt=vt*wt+Mt,St+=bt/67108864|0,Mt=bt&67108863}ft.words[ct]=Mt|0,Et=St|0}return Et!==0?ft.words[ct]=Et|0:ft.length--,ft.strip()}var Nt=function(ot,ft,ht){var vt=ot.words,wt=ft.words,bt=ht.words,$t=0,Et,ct,St,Mt=vt[0]|0,Lt=Mt&8191,Ut=Mt>>>13,Kt=vt[1]|0,Ht=Kt&8191,Ft=Kt>>>13,zt=vt[2]|0,ir=zt&8191,sr=zt>>>13,ar=vt[3]|0,Vt=ar&8191,fr=ar>>>13,Gr=vt[4]|0,ur=Gr&8191,pr=Gr>>>13,Fr=vt[5]|0,yr=Fr&8191,hr=Fr>>>13,Wr=vt[6]|0,$r=Wr&8191,Cr=Wr>>>13,an=vt[7]|0,Er=an&8191,Ar=an>>>13,gn=vt[8]|0,Or=gn&8191,Lr=gn>>>13,wn=vt[9]|0,Xt=wn&8191,Bt=wn>>>13,Wt=wt[0]|0,nr=Wt&8191,cr=Wt>>>13,Sr=wt[1]|0,_r=Sr&8191,xr=Sr>>>13,pn=wt[2]|0,Tr=pn&8191,Ur=pn>>>13,un=wt[3]|0,Ir=un&8191,Nr=un>>>13,zr=wt[4]|0,br=zr&8191,Dr=zr>>>13,yn=wt[5]|0,Mr=yn&8191,qr=yn>>>13,Sn=wt[6]|0,Br=Sn&8191,Hr=Sn>>>13,Zt=wt[7]|0,Qt=Zt&8191,Jt=Zt>>>13,qt=wt[8]|0,rr=qt&8191,dr=qt>>>13,Rr=wt[9]|0,vr=Rr&8191,wr=Rr>>>13;ht.negative=ot.negative^ft.negative,ht.length=19,Et=Math.imul(Lt,nr),ct=Math.imul(Lt,cr),ct=ct+Math.imul(Ut,nr)|0,St=Math.imul(Ut,cr);var Yr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,Et=Math.imul(Ht,nr),ct=Math.imul(Ht,cr),ct=ct+Math.imul(Ft,nr)|0,St=Math.imul(Ft,cr),Et=Et+Math.imul(Lt,_r)|0,ct=ct+Math.imul(Lt,xr)|0,ct=ct+Math.imul(Ut,_r)|0,St=St+Math.imul(Ut,xr)|0;var jr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(jr>>>26)|0,jr&=67108863,Et=Math.imul(ir,nr),ct=Math.imul(ir,cr),ct=ct+Math.imul(sr,nr)|0,St=Math.imul(sr,cr),Et=Et+Math.imul(Ht,_r)|0,ct=ct+Math.imul(Ht,xr)|0,ct=ct+Math.imul(Ft,_r)|0,St=St+Math.imul(Ft,xr)|0,Et=Et+Math.imul(Lt,Tr)|0,ct=ct+Math.imul(Lt,Ur)|0,ct=ct+Math.imul(Ut,Tr)|0,St=St+Math.imul(Ut,Ur)|0;var mn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(mn>>>26)|0,mn&=67108863,Et=Math.imul(Vt,nr),ct=Math.imul(Vt,cr),ct=ct+Math.imul(fr,nr)|0,St=Math.imul(fr,cr),Et=Et+Math.imul(ir,_r)|0,ct=ct+Math.imul(ir,xr)|0,ct=ct+Math.imul(sr,_r)|0,St=St+Math.imul(sr,xr)|0,Et=Et+Math.imul(Ht,Tr)|0,ct=ct+Math.imul(Ht,Ur)|0,ct=ct+Math.imul(Ft,Tr)|0,St=St+Math.imul(Ft,Ur)|0,Et=Et+Math.imul(Lt,Ir)|0,ct=ct+Math.imul(Lt,Nr)|0,ct=ct+Math.imul(Ut,Ir)|0,St=St+Math.imul(Ut,Nr)|0;var Jr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,Et=Math.imul(ur,nr),ct=Math.imul(ur,cr),ct=ct+Math.imul(pr,nr)|0,St=Math.imul(pr,cr),Et=Et+Math.imul(Vt,_r)|0,ct=ct+Math.imul(Vt,xr)|0,ct=ct+Math.imul(fr,_r)|0,St=St+Math.imul(fr,xr)|0,Et=Et+Math.imul(ir,Tr)|0,ct=ct+Math.imul(ir,Ur)|0,ct=ct+Math.imul(sr,Tr)|0,St=St+Math.imul(sr,Ur)|0,Et=Et+Math.imul(Ht,Ir)|0,ct=ct+Math.imul(Ht,Nr)|0,ct=ct+Math.imul(Ft,Ir)|0,St=St+Math.imul(Ft,Nr)|0,Et=Et+Math.imul(Lt,br)|0,ct=ct+Math.imul(Lt,Dr)|0,ct=ct+Math.imul(Ut,br)|0,St=St+Math.imul(Ut,Dr)|0;var cn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(cn>>>26)|0,cn&=67108863,Et=Math.imul(yr,nr),ct=Math.imul(yr,cr),ct=ct+Math.imul(hr,nr)|0,St=Math.imul(hr,cr),Et=Et+Math.imul(ur,_r)|0,ct=ct+Math.imul(ur,xr)|0,ct=ct+Math.imul(pr,_r)|0,St=St+Math.imul(pr,xr)|0,Et=Et+Math.imul(Vt,Tr)|0,ct=ct+Math.imul(Vt,Ur)|0,ct=ct+Math.imul(fr,Tr)|0,St=St+Math.imul(fr,Ur)|0,Et=Et+Math.imul(ir,Ir)|0,ct=ct+Math.imul(ir,Nr)|0,ct=ct+Math.imul(sr,Ir)|0,St=St+Math.imul(sr,Nr)|0,Et=Et+Math.imul(Ht,br)|0,ct=ct+Math.imul(Ht,Dr)|0,ct=ct+Math.imul(Ft,br)|0,St=St+Math.imul(Ft,Dr)|0,Et=Et+Math.imul(Lt,Mr)|0,ct=ct+Math.imul(Lt,qr)|0,ct=ct+Math.imul(Ut,Mr)|0,St=St+Math.imul(Ut,qr)|0;var ln=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(ln>>>26)|0,ln&=67108863,Et=Math.imul($r,nr),ct=Math.imul($r,cr),ct=ct+Math.imul(Cr,nr)|0,St=Math.imul(Cr,cr),Et=Et+Math.imul(yr,_r)|0,ct=ct+Math.imul(yr,xr)|0,ct=ct+Math.imul(hr,_r)|0,St=St+Math.imul(hr,xr)|0,Et=Et+Math.imul(ur,Tr)|0,ct=ct+Math.imul(ur,Ur)|0,ct=ct+Math.imul(pr,Tr)|0,St=St+Math.imul(pr,Ur)|0,Et=Et+Math.imul(Vt,Ir)|0,ct=ct+Math.imul(Vt,Nr)|0,ct=ct+Math.imul(fr,Ir)|0,St=St+Math.imul(fr,Nr)|0,Et=Et+Math.imul(ir,br)|0,ct=ct+Math.imul(ir,Dr)|0,ct=ct+Math.imul(sr,br)|0,St=St+Math.imul(sr,Dr)|0,Et=Et+Math.imul(Ht,Mr)|0,ct=ct+Math.imul(Ht,qr)|0,ct=ct+Math.imul(Ft,Mr)|0,St=St+Math.imul(Ft,qr)|0,Et=Et+Math.imul(Lt,Br)|0,ct=ct+Math.imul(Lt,Hr)|0,ct=ct+Math.imul(Ut,Br)|0,St=St+Math.imul(Ut,Hr)|0;var vn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(vn>>>26)|0,vn&=67108863,Et=Math.imul(Er,nr),ct=Math.imul(Er,cr),ct=ct+Math.imul(Ar,nr)|0,St=Math.imul(Ar,cr),Et=Et+Math.imul($r,_r)|0,ct=ct+Math.imul($r,xr)|0,ct=ct+Math.imul(Cr,_r)|0,St=St+Math.imul(Cr,xr)|0,Et=Et+Math.imul(yr,Tr)|0,ct=ct+Math.imul(yr,Ur)|0,ct=ct+Math.imul(hr,Tr)|0,St=St+Math.imul(hr,Ur)|0,Et=Et+Math.imul(ur,Ir)|0,ct=ct+Math.imul(ur,Nr)|0,ct=ct+Math.imul(pr,Ir)|0,St=St+Math.imul(pr,Nr)|0,Et=Et+Math.imul(Vt,br)|0,ct=ct+Math.imul(Vt,Dr)|0,ct=ct+Math.imul(fr,br)|0,St=St+Math.imul(fr,Dr)|0,Et=Et+Math.imul(ir,Mr)|0,ct=ct+Math.imul(ir,qr)|0,ct=ct+Math.imul(sr,Mr)|0,St=St+Math.imul(sr,qr)|0,Et=Et+Math.imul(Ht,Br)|0,ct=ct+Math.imul(Ht,Hr)|0,ct=ct+Math.imul(Ft,Br)|0,St=St+Math.imul(Ft,Hr)|0,Et=Et+Math.imul(Lt,Qt)|0,ct=ct+Math.imul(Lt,Jt)|0,ct=ct+Math.imul(Ut,Qt)|0,St=St+Math.imul(Ut,Jt)|0;var _n=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(_n>>>26)|0,_n&=67108863,Et=Math.imul(Or,nr),ct=Math.imul(Or,cr),ct=ct+Math.imul(Lr,nr)|0,St=Math.imul(Lr,cr),Et=Et+Math.imul(Er,_r)|0,ct=ct+Math.imul(Er,xr)|0,ct=ct+Math.imul(Ar,_r)|0,St=St+Math.imul(Ar,xr)|0,Et=Et+Math.imul($r,Tr)|0,ct=ct+Math.imul($r,Ur)|0,ct=ct+Math.imul(Cr,Tr)|0,St=St+Math.imul(Cr,Ur)|0,Et=Et+Math.imul(yr,Ir)|0,ct=ct+Math.imul(yr,Nr)|0,ct=ct+Math.imul(hr,Ir)|0,St=St+Math.imul(hr,Nr)|0,Et=Et+Math.imul(ur,br)|0,ct=ct+Math.imul(ur,Dr)|0,ct=ct+Math.imul(pr,br)|0,St=St+Math.imul(pr,Dr)|0,Et=Et+Math.imul(Vt,Mr)|0,ct=ct+Math.imul(Vt,qr)|0,ct=ct+Math.imul(fr,Mr)|0,St=St+Math.imul(fr,qr)|0,Et=Et+Math.imul(ir,Br)|0,ct=ct+Math.imul(ir,Hr)|0,ct=ct+Math.imul(sr,Br)|0,St=St+Math.imul(sr,Hr)|0,Et=Et+Math.imul(Ht,Qt)|0,ct=ct+Math.imul(Ht,Jt)|0,ct=ct+Math.imul(Ft,Qt)|0,St=St+Math.imul(Ft,Jt)|0,Et=Et+Math.imul(Lt,rr)|0,ct=ct+Math.imul(Lt,dr)|0,ct=ct+Math.imul(Ut,rr)|0,St=St+Math.imul(Ut,dr)|0;var fn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(fn>>>26)|0,fn&=67108863,Et=Math.imul(Xt,nr),ct=Math.imul(Xt,cr),ct=ct+Math.imul(Bt,nr)|0,St=Math.imul(Bt,cr),Et=Et+Math.imul(Or,_r)|0,ct=ct+Math.imul(Or,xr)|0,ct=ct+Math.imul(Lr,_r)|0,St=St+Math.imul(Lr,xr)|0,Et=Et+Math.imul(Er,Tr)|0,ct=ct+Math.imul(Er,Ur)|0,ct=ct+Math.imul(Ar,Tr)|0,St=St+Math.imul(Ar,Ur)|0,Et=Et+Math.imul($r,Ir)|0,ct=ct+Math.imul($r,Nr)|0,ct=ct+Math.imul(Cr,Ir)|0,St=St+Math.imul(Cr,Nr)|0,Et=Et+Math.imul(yr,br)|0,ct=ct+Math.imul(yr,Dr)|0,ct=ct+Math.imul(hr,br)|0,St=St+Math.imul(hr,Dr)|0,Et=Et+Math.imul(ur,Mr)|0,ct=ct+Math.imul(ur,qr)|0,ct=ct+Math.imul(pr,Mr)|0,St=St+Math.imul(pr,qr)|0,Et=Et+Math.imul(Vt,Br)|0,ct=ct+Math.imul(Vt,Hr)|0,ct=ct+Math.imul(fr,Br)|0,St=St+Math.imul(fr,Hr)|0,Et=Et+Math.imul(ir,Qt)|0,ct=ct+Math.imul(ir,Jt)|0,ct=ct+Math.imul(sr,Qt)|0,St=St+Math.imul(sr,Jt)|0,Et=Et+Math.imul(Ht,rr)|0,ct=ct+Math.imul(Ht,dr)|0,ct=ct+Math.imul(Ft,rr)|0,St=St+Math.imul(Ft,dr)|0,Et=Et+Math.imul(Lt,vr)|0,ct=ct+Math.imul(Lt,wr)|0,ct=ct+Math.imul(Ut,vr)|0,St=St+Math.imul(Ut,wr)|0;var hn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(hn>>>26)|0,hn&=67108863,Et=Math.imul(Xt,_r),ct=Math.imul(Xt,xr),ct=ct+Math.imul(Bt,_r)|0,St=Math.imul(Bt,xr),Et=Et+Math.imul(Or,Tr)|0,ct=ct+Math.imul(Or,Ur)|0,ct=ct+Math.imul(Lr,Tr)|0,St=St+Math.imul(Lr,Ur)|0,Et=Et+Math.imul(Er,Ir)|0,ct=ct+Math.imul(Er,Nr)|0,ct=ct+Math.imul(Ar,Ir)|0,St=St+Math.imul(Ar,Nr)|0,Et=Et+Math.imul($r,br)|0,ct=ct+Math.imul($r,Dr)|0,ct=ct+Math.imul(Cr,br)|0,St=St+Math.imul(Cr,Dr)|0,Et=Et+Math.imul(yr,Mr)|0,ct=ct+Math.imul(yr,qr)|0,ct=ct+Math.imul(hr,Mr)|0,St=St+Math.imul(hr,qr)|0,Et=Et+Math.imul(ur,Br)|0,ct=ct+Math.imul(ur,Hr)|0,ct=ct+Math.imul(pr,Br)|0,St=St+Math.imul(pr,Hr)|0,Et=Et+Math.imul(Vt,Qt)|0,ct=ct+Math.imul(Vt,Jt)|0,ct=ct+Math.imul(fr,Qt)|0,St=St+Math.imul(fr,Jt)|0,Et=Et+Math.imul(ir,rr)|0,ct=ct+Math.imul(ir,dr)|0,ct=ct+Math.imul(sr,rr)|0,St=St+Math.imul(sr,dr)|0,Et=Et+Math.imul(Ht,vr)|0,ct=ct+Math.imul(Ht,wr)|0,ct=ct+Math.imul(Ft,vr)|0,St=St+Math.imul(Ft,wr)|0;var dn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(dn>>>26)|0,dn&=67108863,Et=Math.imul(Xt,Tr),ct=Math.imul(Xt,Ur),ct=ct+Math.imul(Bt,Tr)|0,St=Math.imul(Bt,Ur),Et=Et+Math.imul(Or,Ir)|0,ct=ct+Math.imul(Or,Nr)|0,ct=ct+Math.imul(Lr,Ir)|0,St=St+Math.imul(Lr,Nr)|0,Et=Et+Math.imul(Er,br)|0,ct=ct+Math.imul(Er,Dr)|0,ct=ct+Math.imul(Ar,br)|0,St=St+Math.imul(Ar,Dr)|0,Et=Et+Math.imul($r,Mr)|0,ct=ct+Math.imul($r,qr)|0,ct=ct+Math.imul(Cr,Mr)|0,St=St+Math.imul(Cr,qr)|0,Et=Et+Math.imul(yr,Br)|0,ct=ct+Math.imul(yr,Hr)|0,ct=ct+Math.imul(hr,Br)|0,St=St+Math.imul(hr,Hr)|0,Et=Et+Math.imul(ur,Qt)|0,ct=ct+Math.imul(ur,Jt)|0,ct=ct+Math.imul(pr,Qt)|0,St=St+Math.imul(pr,Jt)|0,Et=Et+Math.imul(Vt,rr)|0,ct=ct+Math.imul(Vt,dr)|0,ct=ct+Math.imul(fr,rr)|0,St=St+Math.imul(fr,dr)|0,Et=Et+Math.imul(ir,vr)|0,ct=ct+Math.imul(ir,wr)|0,ct=ct+Math.imul(sr,vr)|0,St=St+Math.imul(sr,wr)|0;var tn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(tn>>>26)|0,tn&=67108863,Et=Math.imul(Xt,Ir),ct=Math.imul(Xt,Nr),ct=ct+Math.imul(Bt,Ir)|0,St=Math.imul(Bt,Nr),Et=Et+Math.imul(Or,br)|0,ct=ct+Math.imul(Or,Dr)|0,ct=ct+Math.imul(Lr,br)|0,St=St+Math.imul(Lr,Dr)|0,Et=Et+Math.imul(Er,Mr)|0,ct=ct+Math.imul(Er,qr)|0,ct=ct+Math.imul(Ar,Mr)|0,St=St+Math.imul(Ar,qr)|0,Et=Et+Math.imul($r,Br)|0,ct=ct+Math.imul($r,Hr)|0,ct=ct+Math.imul(Cr,Br)|0,St=St+Math.imul(Cr,Hr)|0,Et=Et+Math.imul(yr,Qt)|0,ct=ct+Math.imul(yr,Jt)|0,ct=ct+Math.imul(hr,Qt)|0,St=St+Math.imul(hr,Jt)|0,Et=Et+Math.imul(ur,rr)|0,ct=ct+Math.imul(ur,dr)|0,ct=ct+Math.imul(pr,rr)|0,St=St+Math.imul(pr,dr)|0,Et=Et+Math.imul(Vt,vr)|0,ct=ct+Math.imul(Vt,wr)|0,ct=ct+Math.imul(fr,vr)|0,St=St+Math.imul(fr,wr)|0;var sn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(sn>>>26)|0,sn&=67108863,Et=Math.imul(Xt,br),ct=Math.imul(Xt,Dr),ct=ct+Math.imul(Bt,br)|0,St=Math.imul(Bt,Dr),Et=Et+Math.imul(Or,Mr)|0,ct=ct+Math.imul(Or,qr)|0,ct=ct+Math.imul(Lr,Mr)|0,St=St+Math.imul(Lr,qr)|0,Et=Et+Math.imul(Er,Br)|0,ct=ct+Math.imul(Er,Hr)|0,ct=ct+Math.imul(Ar,Br)|0,St=St+Math.imul(Ar,Hr)|0,Et=Et+Math.imul($r,Qt)|0,ct=ct+Math.imul($r,Jt)|0,ct=ct+Math.imul(Cr,Qt)|0,St=St+Math.imul(Cr,Jt)|0,Et=Et+Math.imul(yr,rr)|0,ct=ct+Math.imul(yr,dr)|0,ct=ct+Math.imul(hr,rr)|0,St=St+Math.imul(hr,dr)|0,Et=Et+Math.imul(ur,vr)|0,ct=ct+Math.imul(ur,wr)|0,ct=ct+Math.imul(pr,vr)|0,St=St+Math.imul(pr,wr)|0;var Qr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,Et=Math.imul(Xt,Mr),ct=Math.imul(Xt,qr),ct=ct+Math.imul(Bt,Mr)|0,St=Math.imul(Bt,qr),Et=Et+Math.imul(Or,Br)|0,ct=ct+Math.imul(Or,Hr)|0,ct=ct+Math.imul(Lr,Br)|0,St=St+Math.imul(Lr,Hr)|0,Et=Et+Math.imul(Er,Qt)|0,ct=ct+Math.imul(Er,Jt)|0,ct=ct+Math.imul(Ar,Qt)|0,St=St+Math.imul(Ar,Jt)|0,Et=Et+Math.imul($r,rr)|0,ct=ct+Math.imul($r,dr)|0,ct=ct+Math.imul(Cr,rr)|0,St=St+Math.imul(Cr,dr)|0,Et=Et+Math.imul(yr,vr)|0,ct=ct+Math.imul(yr,wr)|0,ct=ct+Math.imul(hr,vr)|0,St=St+Math.imul(hr,wr)|0;var rn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(rn>>>26)|0,rn&=67108863,Et=Math.imul(Xt,Br),ct=Math.imul(Xt,Hr),ct=ct+Math.imul(Bt,Br)|0,St=Math.imul(Bt,Hr),Et=Et+Math.imul(Or,Qt)|0,ct=ct+Math.imul(Or,Jt)|0,ct=ct+Math.imul(Lr,Qt)|0,St=St+Math.imul(Lr,Jt)|0,Et=Et+Math.imul(Er,rr)|0,ct=ct+Math.imul(Er,dr)|0,ct=ct+Math.imul(Ar,rr)|0,St=St+Math.imul(Ar,dr)|0,Et=Et+Math.imul($r,vr)|0,ct=ct+Math.imul($r,wr)|0,ct=ct+Math.imul(Cr,vr)|0,St=St+Math.imul(Cr,wr)|0;var nn=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(nn>>>26)|0,nn&=67108863,Et=Math.imul(Xt,Qt),ct=Math.imul(Xt,Jt),ct=ct+Math.imul(Bt,Qt)|0,St=Math.imul(Bt,Jt),Et=Et+Math.imul(Or,rr)|0,ct=ct+Math.imul(Or,dr)|0,ct=ct+Math.imul(Lr,rr)|0,St=St+Math.imul(Lr,dr)|0,Et=Et+Math.imul(Er,vr)|0,ct=ct+Math.imul(Er,wr)|0,ct=ct+Math.imul(Ar,vr)|0,St=St+Math.imul(Ar,wr)|0;var Xr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,Et=Math.imul(Xt,rr),ct=Math.imul(Xt,dr),ct=ct+Math.imul(Bt,rr)|0,St=Math.imul(Bt,dr),Et=Et+Math.imul(Or,vr)|0,ct=ct+Math.imul(Or,wr)|0,ct=ct+Math.imul(Lr,vr)|0,St=St+Math.imul(Lr,wr)|0;var kr=($t+Et|0)+((ct&8191)<<13)|0;$t=(St+(ct>>>13)|0)+(kr>>>26)|0,kr&=67108863,Et=Math.imul(Xt,vr),ct=Math.imul(Xt,wr),ct=ct+Math.imul(Bt,vr)|0,St=Math.imul(Bt,wr);var Pr=($t+Et|0)+((ct&8191)<<13)|0;return $t=(St+(ct>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,bt[0]=Yr,bt[1]=jr,bt[2]=mn,bt[3]=Jr,bt[4]=cn,bt[5]=ln,bt[6]=vn,bt[7]=_n,bt[8]=fn,bt[9]=hn,bt[10]=dn,bt[11]=tn,bt[12]=sn,bt[13]=Qr,bt[14]=rn,bt[15]=nn,bt[16]=Xr,bt[17]=kr,bt[18]=Pr,$t!==0&&(bt[19]=$t,ht.length++),ht};Math.imul||(Nt=xt);function Ct(It,ot,ft){ft.negative=ot.negative^It.negative,ft.length=It.length+ot.length;for(var ht=0,vt=0,wt=0;wt<ft.length-1;wt++){var bt=vt;vt=0;for(var $t=ht&67108863,Et=Math.min(wt,ot.length-1),ct=Math.max(0,wt-It.length+1);ct<=Et;ct++){var St=wt-ct,Mt=It.words[St]|0,Lt=ot.words[ct]|0,Ut=Mt*Lt,Kt=Ut&67108863;bt=bt+(Ut/67108864|0)|0,Kt=Kt+$t|0,$t=Kt&67108863,bt=bt+(Kt>>>26)|0,vt+=bt>>>26,bt&=67108863}ft.words[wt]=$t,ht=bt,bt=vt}return ht!==0?ft.words[wt]=ht:ft.length--,ft.strip()}function Ot(It,ot,ft){var ht=new kt;return ht.mulp(It,ot,ft)}it.prototype.mulTo=function(ot,ft){var ht,vt=this.length+ot.length;return this.length===10&&ot.length===10?ht=Nt(this,ot,ft):vt<63?ht=xt(this,ot,ft):vt<1024?ht=Ct(this,ot,ft):ht=Ot(this,ot,ft),ht};function kt(It,ot){this.x=It,this.y=ot}kt.prototype.makeRBT=function(ot){for(var ft=new Array(ot),ht=it.prototype._countBits(ot)-1,vt=0;vt<ot;vt++)ft[vt]=this.revBin(vt,ht,ot);return ft},kt.prototype.revBin=function(ot,ft,ht){if(ot===0||ot===ht-1)return ot;for(var vt=0,wt=0;wt<ft;wt++)vt|=(ot&1)<<ft-wt-1,ot>>=1;return vt},kt.prototype.permute=function(ot,ft,ht,vt,wt,bt){for(var $t=0;$t<bt;$t++)vt[$t]=ft[ot[$t]],wt[$t]=ht[ot[$t]]},kt.prototype.transform=function(ot,ft,ht,vt,wt,bt){this.permute(bt,ot,ft,ht,vt,wt);for(var $t=1;$t<wt;$t<<=1)for(var Et=$t<<1,ct=Math.cos(2*Math.PI/Et),St=Math.sin(2*Math.PI/Et),Mt=0;Mt<wt;Mt+=Et)for(var Lt=ct,Ut=St,Kt=0;Kt<$t;Kt++){var Ht=ht[Mt+Kt],Ft=vt[Mt+Kt],zt=ht[Mt+Kt+$t],ir=vt[Mt+Kt+$t],sr=Lt*zt-Ut*ir;ir=Lt*ir+Ut*zt,zt=sr,ht[Mt+Kt]=Ht+zt,vt[Mt+Kt]=Ft+ir,ht[Mt+Kt+$t]=Ht-zt,vt[Mt+Kt+$t]=Ft-ir,Kt!==Et&&(sr=ct*Lt-St*Ut,Ut=ct*Ut+St*Lt,Lt=sr)}},kt.prototype.guessLen13b=function(ot,ft){var ht=Math.max(ft,ot)|1,vt=ht&1,wt=0;for(ht=ht/2|0;ht;ht=ht>>>1)wt++;return 1<<wt+1+vt},kt.prototype.conjugate=function(ot,ft,ht){if(!(ht<=1))for(var vt=0;vt<ht/2;vt++){var wt=ot[vt];ot[vt]=ot[ht-vt-1],ot[ht-vt-1]=wt,wt=ft[vt],ft[vt]=-ft[ht-vt-1],ft[ht-vt-1]=-wt}},kt.prototype.normalize13b=function(ot,ft){for(var ht=0,vt=0;vt<ft/2;vt++){var wt=Math.round(ot[2*vt+1]/ft)*8192+Math.round(ot[2*vt]/ft)+ht;ot[vt]=wt&67108863,wt<67108864?ht=0:ht=wt/67108864|0}return ot},kt.prototype.convert13b=function(ot,ft,ht,vt){for(var wt=0,bt=0;bt<ft;bt++)wt=wt+(ot[bt]|0),ht[2*bt]=wt&8191,wt=wt>>>13,ht[2*bt+1]=wt&8191,wt=wt>>>13;for(bt=2*ft;bt<vt;++bt)ht[bt]=0;nt(wt===0),nt((wt&-8192)===0)},kt.prototype.stub=function(ot){for(var ft=new Array(ot),ht=0;ht<ot;ht++)ft[ht]=0;return ft},kt.prototype.mulp=function(ot,ft,ht){var vt=2*this.guessLen13b(ot.length,ft.length),wt=this.makeRBT(vt),bt=this.stub(vt),$t=new Array(vt),Et=new Array(vt),ct=new Array(vt),St=new Array(vt),Mt=new Array(vt),Lt=new Array(vt),Ut=ht.words;Ut.length=vt,this.convert13b(ot.words,ot.length,$t,vt),this.convert13b(ft.words,ft.length,St,vt),this.transform($t,bt,Et,ct,vt,wt),this.transform(St,bt,Mt,Lt,vt,wt);for(var Kt=0;Kt<vt;Kt++){var Ht=Et[Kt]*Mt[Kt]-ct[Kt]*Lt[Kt];ct[Kt]=Et[Kt]*Lt[Kt]+ct[Kt]*Mt[Kt],Et[Kt]=Ht}return this.conjugate(Et,ct,vt),this.transform(Et,ct,Ut,bt,vt,wt),this.conjugate(Ut,bt,vt),this.normalize13b(Ut,vt),ht.negative=ot.negative^ft.negative,ht.length=ot.length+ft.length,ht.strip()},it.prototype.mul=function(ot){var ft=new it(null);return ft.words=new Array(this.length+ot.length),this.mulTo(ot,ft)},it.prototype.mulf=function(ot){var ft=new it(null);return ft.words=new Array(this.length+ot.length),Ot(this,ot,ft)},it.prototype.imul=function(ot){return this.clone().mulTo(ot,this)},it.prototype.imuln=function(ot){nt(typeof ot=="number"),nt(ot<67108864);for(var ft=0,ht=0;ht<this.length;ht++){var vt=(this.words[ht]|0)*ot,wt=(vt&67108863)+(ft&67108863);ft>>=26,ft+=vt/67108864|0,ft+=wt>>>26,this.words[ht]=wt&67108863}return ft!==0&&(this.words[ht]=ft,this.length++),this},it.prototype.muln=function(ot){return this.clone().imuln(ot)},it.prototype.sqr=function(){return this.mul(this)},it.prototype.isqr=function(){return this.imul(this.clone())},it.prototype.pow=function(ot){var ft=At(ot);if(ft.length===0)return new it(1);for(var ht=this,vt=0;vt<ft.length&&ft[vt]===0;vt++,ht=ht.sqr());if(++vt<ft.length)for(var wt=ht.sqr();vt<ft.length;vt++,wt=wt.sqr())ft[vt]!==0&&(ht=ht.mul(wt));return ht},it.prototype.iushln=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26,vt=67108863>>>26-ft<<26-ft,wt;if(ft!==0){var bt=0;for(wt=0;wt<this.length;wt++){var $t=this.words[wt]&vt,Et=(this.words[wt]|0)-$t<<ft;this.words[wt]=Et|bt,bt=$t>>>26-ft}bt&&(this.words[wt]=bt,this.length++)}if(ht!==0){for(wt=this.length-1;wt>=0;wt--)this.words[wt+ht]=this.words[wt];for(wt=0;wt<ht;wt++)this.words[wt]=0;this.length+=ht}return this.strip()},it.prototype.ishln=function(ot){return nt(this.negative===0),this.iushln(ot)},it.prototype.iushrn=function(ot,ft,ht){nt(typeof ot=="number"&&ot>=0);var vt;ft?vt=(ft-ft%26)/26:vt=0;var wt=ot%26,bt=Math.min((ot-wt)/26,this.length),$t=67108863^67108863>>>wt<<wt,Et=ht;if(vt-=bt,vt=Math.max(0,vt),Et){for(var ct=0;ct<bt;ct++)Et.words[ct]=this.words[ct];Et.length=bt}if(bt!==0)if(this.length>bt)for(this.length-=bt,ct=0;ct<this.length;ct++)this.words[ct]=this.words[ct+bt];else this.words[0]=0,this.length=1;var St=0;for(ct=this.length-1;ct>=0&&(St!==0||ct>=vt);ct--){var Mt=this.words[ct]|0;this.words[ct]=St<<26-wt|Mt>>>wt,St=Mt&$t}return Et&&St!==0&&(Et.words[Et.length++]=St),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},it.prototype.ishrn=function(ot,ft,ht){return nt(this.negative===0),this.iushrn(ot,ft,ht)},it.prototype.shln=function(ot){return this.clone().ishln(ot)},it.prototype.ushln=function(ot){return this.clone().iushln(ot)},it.prototype.shrn=function(ot){return this.clone().ishrn(ot)},it.prototype.ushrn=function(ot){return this.clone().iushrn(ot)},it.prototype.testn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26,vt=1<<ft;if(this.length<=ht)return!1;var wt=this.words[ht];return!!(wt&vt)},it.prototype.imaskn=function(ot){nt(typeof ot=="number"&&ot>=0);var ft=ot%26,ht=(ot-ft)/26;if(nt(this.negative===0,"imaskn works only with positive numbers"),this.length<=ht)return this;if(ft!==0&&ht++,this.length=Math.min(ht,this.length),ft!==0){var vt=67108863^67108863>>>ft<<ft;this.words[this.length-1]&=vt}return this.strip()},it.prototype.maskn=function(ot){return this.clone().imaskn(ot)},it.prototype.iaddn=function(ot){return nt(typeof ot=="number"),nt(ot<67108864),ot<0?this.isubn(-ot):this.negative!==0?this.length===1&&(this.words[0]|0)<ot?(this.words[0]=ot-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ot),this.negative=1,this):this._iaddn(ot)},it.prototype._iaddn=function(ot){this.words[0]+=ot;for(var ft=0;ft<this.length&&this.words[ft]>=67108864;ft++)this.words[ft]-=67108864,ft===this.length-1?this.words[ft+1]=1:this.words[ft+1]++;return this.length=Math.max(this.length,ft+1),this},it.prototype.isubn=function(ot){if(nt(typeof ot=="number"),nt(ot<67108864),ot<0)return this.iaddn(-ot);if(this.negative!==0)return this.negative=0,this.iaddn(ot),this.negative=1,this;if(this.words[0]-=ot,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var ft=0;ft<this.length&&this.words[ft]<0;ft++)this.words[ft]+=67108864,this.words[ft+1]-=1;return this.strip()},it.prototype.addn=function(ot){return this.clone().iaddn(ot)},it.prototype.subn=function(ot){return this.clone().isubn(ot)},it.prototype.iabs=function(){return this.negative=0,this},it.prototype.abs=function(){return this.clone().iabs()},it.prototype._ishlnsubmul=function(ot,ft,ht){var vt=ot.length+ht,wt;this._expand(vt);var bt,$t=0;for(wt=0;wt<ot.length;wt++){bt=(this.words[wt+ht]|0)+$t;var Et=(ot.words[wt]|0)*ft;bt-=Et&67108863,$t=(bt>>26)-(Et/67108864|0),this.words[wt+ht]=bt&67108863}for(;wt<this.length-ht;wt++)bt=(this.words[wt+ht]|0)+$t,$t=bt>>26,this.words[wt+ht]=bt&67108863;if($t===0)return this.strip();for(nt($t===-1),$t=0,wt=0;wt<this.length;wt++)bt=-(this.words[wt]|0)+$t,$t=bt>>26,this.words[wt]=bt&67108863;return this.negative=1,this.strip()},it.prototype._wordDiv=function(ot,ft){var ht=this.length-ot.length,vt=this.clone(),wt=ot,bt=wt.words[wt.length-1]|0,$t=this._countBits(bt);ht=26-$t,ht!==0&&(wt=wt.ushln(ht),vt.iushln(ht),bt=wt.words[wt.length-1]|0);var Et=vt.length-wt.length,ct;if(ft!=="mod"){ct=new it(null),ct.length=Et+1,ct.words=new Array(ct.length);for(var St=0;St<ct.length;St++)ct.words[St]=0}var Mt=vt.clone()._ishlnsubmul(wt,1,Et);Mt.negative===0&&(vt=Mt,ct&&(ct.words[Et]=1));for(var Lt=Et-1;Lt>=0;Lt--){var Ut=(vt.words[wt.length+Lt]|0)*67108864+(vt.words[wt.length+Lt-1]|0);for(Ut=Math.min(Ut/bt|0,67108863),vt._ishlnsubmul(wt,Ut,Lt);vt.negative!==0;)Ut--,vt.negative=0,vt._ishlnsubmul(wt,1,Lt),vt.isZero()||(vt.negative^=1);ct&&(ct.words[Lt]=Ut)}return ct&&ct.strip(),vt.strip(),ft!=="div"&&ht!==0&&vt.iushrn(ht),{div:ct||null,mod:vt}},it.prototype.divmod=function(ot,ft,ht){if(nt(!ot.isZero()),this.isZero())return{div:new it(0),mod:new it(0)};var vt,wt,bt;return this.negative!==0&&ot.negative===0?(bt=this.neg().divmod(ot,ft),ft!=="mod"&&(vt=bt.div.neg()),ft!=="div"&&(wt=bt.mod.neg(),ht&&wt.negative!==0&&wt.iadd(ot)),{div:vt,mod:wt}):this.negative===0&&ot.negative!==0?(bt=this.divmod(ot.neg(),ft),ft!=="mod"&&(vt=bt.div.neg()),{div:vt,mod:bt.mod}):this.negative&ot.negative?(bt=this.neg().divmod(ot.neg(),ft),ft!=="div"&&(wt=bt.mod.neg(),ht&&wt.negative!==0&&wt.isub(ot)),{div:bt.div,mod:wt}):ot.length>this.length||this.cmp(ot)<0?{div:new it(0),mod:this}:ot.length===1?ft==="div"?{div:this.divn(ot.words[0]),mod:null}:ft==="mod"?{div:null,mod:new it(this.modn(ot.words[0]))}:{div:this.divn(ot.words[0]),mod:new it(this.modn(ot.words[0]))}:this._wordDiv(ot,ft)},it.prototype.div=function(ot){return this.divmod(ot,"div",!1).div},it.prototype.mod=function(ot){return this.divmod(ot,"mod",!1).mod},it.prototype.umod=function(ot){return this.divmod(ot,"mod",!0).mod},it.prototype.divRound=function(ot){var ft=this.divmod(ot);if(ft.mod.isZero())return ft.div;var ht=ft.div.negative!==0?ft.mod.isub(ot):ft.mod,vt=ot.ushrn(1),wt=ot.andln(1),bt=ht.cmp(vt);return bt<0||wt===1&&bt===0?ft.div:ft.div.negative!==0?ft.div.isubn(1):ft.div.iaddn(1)},it.prototype.modn=function(ot){nt(ot<=67108863);for(var ft=(1<<26)%ot,ht=0,vt=this.length-1;vt>=0;vt--)ht=(ft*ht+(this.words[vt]|0))%ot;return ht},it.prototype.idivn=function(ot){nt(ot<=67108863);for(var ft=0,ht=this.length-1;ht>=0;ht--){var vt=(this.words[ht]|0)+ft*67108864;this.words[ht]=vt/ot|0,ft=vt%ot}return this.strip()},it.prototype.divn=function(ot){return this.clone().idivn(ot)},it.prototype.egcd=function(ot){nt(ot.negative===0),nt(!ot.isZero());var ft=this,ht=ot.clone();ft.negative!==0?ft=ft.umod(ot):ft=ft.clone();for(var vt=new it(1),wt=new it(0),bt=new it(0),$t=new it(1),Et=0;ft.isEven()&&ht.isEven();)ft.iushrn(1),ht.iushrn(1),++Et;for(var ct=ht.clone(),St=ft.clone();!ft.isZero();){for(var Mt=0,Lt=1;!(ft.words[0]&Lt)&&Mt<26;++Mt,Lt<<=1);if(Mt>0)for(ft.iushrn(Mt);Mt-- >0;)(vt.isOdd()||wt.isOdd())&&(vt.iadd(ct),wt.isub(St)),vt.iushrn(1),wt.iushrn(1);for(var Ut=0,Kt=1;!(ht.words[0]&Kt)&&Ut<26;++Ut,Kt<<=1);if(Ut>0)for(ht.iushrn(Ut);Ut-- >0;)(bt.isOdd()||$t.isOdd())&&(bt.iadd(ct),$t.isub(St)),bt.iushrn(1),$t.iushrn(1);ft.cmp(ht)>=0?(ft.isub(ht),vt.isub(bt),wt.isub($t)):(ht.isub(ft),bt.isub(vt),$t.isub(wt))}return{a:bt,b:$t,gcd:ht.iushln(Et)}},it.prototype._invmp=function(ot){nt(ot.negative===0),nt(!ot.isZero());var ft=this,ht=ot.clone();ft.negative!==0?ft=ft.umod(ot):ft=ft.clone();for(var vt=new it(1),wt=new it(0),bt=ht.clone();ft.cmpn(1)>0&&ht.cmpn(1)>0;){for(var $t=0,Et=1;!(ft.words[0]&Et)&&$t<26;++$t,Et<<=1);if($t>0)for(ft.iushrn($t);$t-- >0;)vt.isOdd()&&vt.iadd(bt),vt.iushrn(1);for(var ct=0,St=1;!(ht.words[0]&St)&&ct<26;++ct,St<<=1);if(ct>0)for(ht.iushrn(ct);ct-- >0;)wt.isOdd()&&wt.iadd(bt),wt.iushrn(1);ft.cmp(ht)>=0?(ft.isub(ht),vt.isub(wt)):(ht.isub(ft),wt.isub(vt))}var Mt;return ft.cmpn(1)===0?Mt=vt:Mt=wt,Mt.cmpn(0)<0&&Mt.iadd(ot),Mt},it.prototype.gcd=function(ot){if(this.isZero())return ot.abs();if(ot.isZero())return this.abs();var ft=this.clone(),ht=ot.clone();ft.negative=0,ht.negative=0;for(var vt=0;ft.isEven()&&ht.isEven();vt++)ft.iushrn(1),ht.iushrn(1);do{for(;ft.isEven();)ft.iushrn(1);for(;ht.isEven();)ht.iushrn(1);var wt=ft.cmp(ht);if(wt<0){var bt=ft;ft=ht,ht=bt}else if(wt===0||ht.cmpn(1)===0)break;ft.isub(ht)}while(!0);return ht.iushln(vt)},it.prototype.invm=function(ot){return this.egcd(ot).a.umod(ot)},it.prototype.isEven=function(){return(this.words[0]&1)===0},it.prototype.isOdd=function(){return(this.words[0]&1)===1},it.prototype.andln=function(ot){return this.words[0]&ot},it.prototype.bincn=function(ot){nt(typeof ot=="number");var ft=ot%26,ht=(ot-ft)/26,vt=1<<ft;if(this.length<=ht)return this._expand(ht+1),this.words[ht]|=vt,this;for(var wt=vt,bt=ht;wt!==0&&bt<this.length;bt++){var $t=this.words[bt]|0;$t+=wt,wt=$t>>>26,$t&=67108863,this.words[bt]=$t}return wt!==0&&(this.words[bt]=wt,this.length++),this},it.prototype.isZero=function(){return this.length===1&&this.words[0]===0},it.prototype.cmpn=function(ot){var ft=ot<0;if(this.negative!==0&&!ft)return-1;if(this.negative===0&&ft)return 1;this.strip();var ht;if(this.length>1)ht=1;else{ft&&(ot=-ot),nt(ot<=67108863,"Number is too big");var vt=this.words[0]|0;ht=vt===ot?0:vt<ot?-1:1}return this.negative!==0?-ht|0:ht},it.prototype.cmp=function(ot){if(this.negative!==0&&ot.negative===0)return-1;if(this.negative===0&&ot.negative!==0)return 1;var ft=this.ucmp(ot);return this.negative!==0?-ft|0:ft},it.prototype.ucmp=function(ot){if(this.length>ot.length)return 1;if(this.length<ot.length)return-1;for(var ft=0,ht=this.length-1;ht>=0;ht--){var vt=this.words[ht]|0,wt=ot.words[ht]|0;if(vt!==wt){vt<wt?ft=-1:vt>wt&&(ft=1);break}}return ft},it.prototype.gtn=function(ot){return this.cmpn(ot)===1},it.prototype.gt=function(ot){return this.cmp(ot)===1},it.prototype.gten=function(ot){return this.cmpn(ot)>=0},it.prototype.gte=function(ot){return this.cmp(ot)>=0},it.prototype.ltn=function(ot){return this.cmpn(ot)===-1},it.prototype.lt=function(ot){return this.cmp(ot)===-1},it.prototype.lten=function(ot){return this.cmpn(ot)<=0},it.prototype.lte=function(ot){return this.cmp(ot)<=0},it.prototype.eqn=function(ot){return this.cmpn(ot)===0},it.prototype.eq=function(ot){return this.cmp(ot)===0},it.red=function(ot){return new er(ot)},it.prototype.toRed=function(ot){return nt(!this.red,"Already a number in reduction context"),nt(this.negative===0,"red works only with positives"),ot.convertTo(this)._forceRed(ot)},it.prototype.fromRed=function(){return nt(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},it.prototype._forceRed=function(ot){return this.red=ot,this},it.prototype.forceRed=function(ot){return nt(!this.red,"Already a number in reduction context"),this._forceRed(ot)},it.prototype.redAdd=function(ot){return nt(this.red,"redAdd works only with red numbers"),this.red.add(this,ot)},it.prototype.redIAdd=function(ot){return nt(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ot)},it.prototype.redSub=function(ot){return nt(this.red,"redSub works only with red numbers"),this.red.sub(this,ot)},it.prototype.redISub=function(ot){return nt(this.red,"redISub works only with red numbers"),this.red.isub(this,ot)},it.prototype.redShl=function(ot){return nt(this.red,"redShl works only with red numbers"),this.red.shl(this,ot)},it.prototype.redMul=function(ot){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ot),this.red.mul(this,ot)},it.prototype.redIMul=function(ot){return nt(this.red,"redMul works only with red numbers"),this.red._verify2(this,ot),this.red.imul(this,ot)},it.prototype.redSqr=function(){return nt(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},it.prototype.redISqr=function(){return nt(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},it.prototype.redSqrt=function(){return nt(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},it.prototype.redInvm=function(){return nt(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},it.prototype.redNeg=function(){return nt(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},it.prototype.redPow=function(ot){return nt(this.red&&!ot.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ot)};var Pt={k256:null,p224:null,p192:null,p25519:null};function Dt(It,ot){this.name=It,this.p=new it(ot,16),this.n=this.p.bitLength(),this.k=new it(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Dt.prototype._tmp=function(){var ot=new it(null);return ot.words=new Array(Math.ceil(this.n/13)),ot},Dt.prototype.ireduce=function(ot){var ft=ot,ht;do this.split(ft,this.tmp),ft=this.imulK(ft),ft=ft.iadd(this.tmp),ht=ft.bitLength();while(ht>this.n);var vt=ht<this.n?-1:ft.ucmp(this.p);return vt===0?(ft.words[0]=0,ft.length=1):vt>0?ft.isub(this.p):ft.strip!==void 0?ft.strip():ft._strip(),ft},Dt.prototype.split=function(ot,ft){ot.iushrn(this.n,0,ft)},Dt.prototype.imulK=function(ot){return ot.imul(this.k)};function Gt(){Dt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}at(Gt,Dt),Gt.prototype.split=function(ot,ft){for(var ht=4194303,vt=Math.min(ot.length,9),wt=0;wt<vt;wt++)ft.words[wt]=ot.words[wt];if(ft.length=vt,ot.length<=9){ot.words[0]=0,ot.length=1;return}var bt=ot.words[9];for(ft.words[ft.length++]=bt&ht,wt=10;wt<ot.length;wt++){var $t=ot.words[wt]|0;ot.words[wt-10]=($t&ht)<<4|bt>>>22,bt=$t}bt>>>=22,ot.words[wt-10]=bt,bt===0&&ot.length>10?ot.length-=10:ot.length-=9},Gt.prototype.imulK=function(ot){ot.words[ot.length]=0,ot.words[ot.length+1]=0,ot.length+=2;for(var ft=0,ht=0;ht<ot.length;ht++){var vt=ot.words[ht]|0;ft+=vt*977,ot.words[ht]=ft&67108863,ft=vt*64+(ft/67108864|0)}return ot.words[ot.length-1]===0&&(ot.length--,ot.words[ot.length-1]===0&&ot.length--),ot};function jt(){Dt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}at(jt,Dt);function Yt(){Dt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}at(Yt,Dt);function tr(){Dt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}at(tr,Dt),tr.prototype.imulK=function(ot){for(var ft=0,ht=0;ht<ot.length;ht++){var vt=(ot.words[ht]|0)*19+ft,wt=vt&67108863;vt>>>=26,ot.words[ht]=wt,ft=vt}return ft!==0&&(ot.words[ot.length++]=ft),ot},it._prime=function(ot){if(Pt[ot])return Pt[ot];var ft;if(ot==="k256")ft=new Gt;else if(ot==="p224")ft=new jt;else if(ot==="p192")ft=new Yt;else if(ot==="p25519")ft=new tr;else throw new Error("Unknown prime "+ot);return Pt[ot]=ft,ft};function er(It){if(typeof It=="string"){var ot=it._prime(It);this.m=ot.p,this.prime=ot}else nt(It.gtn(1),"modulus must be greater than 1"),this.m=It,this.prime=null}er.prototype._verify1=function(ot){nt(ot.negative===0,"red works only with positives"),nt(ot.red,"red works only with red numbers")},er.prototype._verify2=function(ot,ft){nt((ot.negative|ft.negative)===0,"red works only with positives"),nt(ot.red&&ot.red===ft.red,"red works only with red numbers")},er.prototype.imod=function(ot){return this.prime?this.prime.ireduce(ot)._forceRed(this):ot.umod(this.m)._forceRed(this)},er.prototype.neg=function(ot){return ot.isZero()?ot.clone():this.m.sub(ot)._forceRed(this)},er.prototype.add=function(ot,ft){this._verify2(ot,ft);var ht=ot.add(ft);return ht.cmp(this.m)>=0&&ht.isub(this.m),ht._forceRed(this)},er.prototype.iadd=function(ot,ft){this._verify2(ot,ft);var ht=ot.iadd(ft);return ht.cmp(this.m)>=0&&ht.isub(this.m),ht},er.prototype.sub=function(ot,ft){this._verify2(ot,ft);var ht=ot.sub(ft);return ht.cmpn(0)<0&&ht.iadd(this.m),ht._forceRed(this)},er.prototype.isub=function(ot,ft){this._verify2(ot,ft);var ht=ot.isub(ft);return ht.cmpn(0)<0&&ht.iadd(this.m),ht},er.prototype.shl=function(ot,ft){return this._verify1(ot),this.imod(ot.ushln(ft))},er.prototype.imul=function(ot,ft){return this._verify2(ot,ft),this.imod(ot.imul(ft))},er.prototype.mul=function(ot,ft){return this._verify2(ot,ft),this.imod(ot.mul(ft))},er.prototype.isqr=function(ot){return this.imul(ot,ot.clone())},er.prototype.sqr=function(ot){return this.mul(ot,ot)},er.prototype.sqrt=function(ot){if(ot.isZero())return ot.clone();var ft=this.m.andln(3);if(nt(ft%2===1),ft===3){var ht=this.m.add(new it(1)).iushrn(2);return this.pow(ot,ht)}for(var vt=this.m.subn(1),wt=0;!vt.isZero()&&vt.andln(1)===0;)wt++,vt.iushrn(1);nt(!vt.isZero());var bt=new it(1).toRed(this),$t=bt.redNeg(),Et=this.m.subn(1).iushrn(1),ct=this.m.bitLength();for(ct=new it(2*ct*ct).toRed(this);this.pow(ct,Et).cmp($t)!==0;)ct.redIAdd($t);for(var St=this.pow(ct,vt),Mt=this.pow(ot,vt.addn(1).iushrn(1)),Lt=this.pow(ot,vt),Ut=wt;Lt.cmp(bt)!==0;){for(var Kt=Lt,Ht=0;Kt.cmp(bt)!==0;Ht++)Kt=Kt.redSqr();nt(Ht<Ut);var Ft=this.pow(St,new it(1).iushln(Ut-Ht-1));Mt=Mt.redMul(Ft),St=Ft.redSqr(),Lt=Lt.redMul(St),Ut=Ht}return Mt},er.prototype.invm=function(ot){var ft=ot._invmp(this.m);return ft.negative!==0?(ft.negative=0,this.imod(ft).redNeg()):this.imod(ft)},er.prototype.pow=function(ot,ft){if(ft.isZero())return new it(1).toRed(this);if(ft.cmpn(1)===0)return ot.clone();var ht=4,vt=new Array(1<<ht);vt[0]=new it(1).toRed(this),vt[1]=ot;for(var wt=2;wt<vt.length;wt++)vt[wt]=this.mul(vt[wt-1],ot);var bt=vt[0],$t=0,Et=0,ct=ft.bitLength()%26;for(ct===0&&(ct=26),wt=ft.length-1;wt>=0;wt--){for(var St=ft.words[wt],Mt=ct-1;Mt>=0;Mt--){var Lt=St>>Mt&1;if(bt!==vt[0]&&(bt=this.sqr(bt)),Lt===0&&$t===0){Et=0;continue}$t<<=1,$t|=Lt,Et++,!(Et!==ht&&(wt!==0||Mt!==0))&&(bt=this.mul(bt,vt[$t]),Et=0,$t=0)}ct=26}return bt},er.prototype.convertTo=function(ot){var ft=ot.umod(this.m);return ft===ot?ft.clone():ft},er.prototype.convertFrom=function(ot){var ft=ot.clone();return ft.red=null,ft},it.mont=function(ot){return new lr(ot)};function lr(It){er.call(this,It),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new it(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}at(lr,er),lr.prototype.convertTo=function(ot){return this.imod(ot.ushln(this.shift))},lr.prototype.convertFrom=function(ot){var ft=this.imod(ot.mul(this.rinv));return ft.red=null,ft},lr.prototype.imul=function(ot,ft){if(ot.isZero()||ft.isZero())return ot.words[0]=0,ot.length=1,ot;var ht=ot.imul(ft),vt=ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),wt=ht.isub(vt).iushrn(this.shift),bt=wt;return wt.cmp(this.m)>=0?bt=wt.isub(this.m):wt.cmpn(0)<0&&(bt=wt.iadd(this.m)),bt._forceRed(this)},lr.prototype.mul=function(ot,ft){if(ot.isZero()||ft.isZero())return new it(0)._forceRed(this);var ht=ot.mul(ft),vt=ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),wt=ht.isub(vt).iushrn(this.shift),bt=wt;return wt.cmp(this.m)>=0?bt=wt.isub(this.m):wt.cmpn(0)<0&&(bt=wt.iadd(this.m)),bt._forceRed(this)},lr.prototype.invm=function(ot){var ft=this.imod(ot._invmp(this.m).mul(this.r2));return ft._forceRed(this)}})(tt,commonjsGlobal$1)}(bn)),bn.exports}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var tt=requireBn(),et=safeBufferExports.Buffer;function rt(nt,at){return et.from(nt.toRed(tt.mont(at.modulus)).redPow(new tt(at.publicExponent)).fromRed().toArray())}return withPublic_1=rt,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var tt=requireParseAsn1(),et=requireBrowser$b(),rt=requireBrowser$9(),nt=requireMgf(),at=requireXor(),it=requireBn(),st=requireWithPublic(),dt=requireBrowserifyRsa(),pt=safeBufferExports.Buffer;publicEncrypt=function(At,xt,Nt){var Ct;At.padding?Ct=At.padding:Nt?Ct=1:Ct=4;var Ot=tt(At),kt;if(Ct===4)kt=mt(Ot,xt);else if(Ct===1)kt=yt(Ot,xt,Nt);else if(Ct===3){if(kt=new it(xt),kt.cmp(Ot.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return Nt?dt(kt,Ot):st(kt,Ot)};function mt(Tt,At){var xt=Tt.modulus.byteLength(),Nt=At.length,Ct=rt("sha1").update(pt.alloc(0)).digest(),Ot=Ct.length,kt=2*Ot;if(Nt>xt-kt-2)throw new Error("message too long");var Pt=pt.alloc(xt-Nt-kt-2),Dt=xt-Ot-1,Gt=et(Ot),jt=at(pt.concat([Ct,Pt,pt.alloc(1,1),At],Dt),nt(Gt,Dt)),Yt=at(Gt,nt(jt,Ot));return new it(pt.concat([pt.alloc(1),Yt,jt],xt))}function yt(Tt,At,xt){var Nt=At.length,Ct=Tt.modulus.byteLength();if(Nt>Ct-11)throw new Error("message too long");var Ot;return xt?Ot=pt.alloc(Ct-Nt-3,255):Ot=Rt(Ct-Nt-3),new it(pt.concat([pt.from([0,xt?1:2]),Ot,pt.alloc(1),At],Ct))}function Rt(Tt){for(var At=pt.allocUnsafe(Tt),xt=0,Nt=et(Tt*2),Ct=0,Ot;xt<Tt;)Ct===Nt.length&&(Nt=et(Tt*2),Ct=0),Ot=Nt[Ct++],Ot&&(At[xt++]=Ot);return At}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var tt=requireParseAsn1(),et=requireMgf(),rt=requireXor(),nt=requireBn(),at=requireBrowserifyRsa(),it=requireBrowser$9(),st=requireWithPublic(),dt=safeBufferExports.Buffer;privateDecrypt=function(Tt,At,xt){var Nt;Tt.padding?Nt=Tt.padding:xt?Nt=1:Nt=4;var Ct=tt(Tt),Ot=Ct.modulus.byteLength();if(At.length>Ot||new nt(At).cmp(Ct.modulus)>=0)throw new Error("decryption error");var kt;xt?kt=st(new nt(At),Ct):kt=at(At,Ct);var Pt=dt.alloc(Ot-kt.length);if(kt=dt.concat([Pt,kt],Ot),Nt===4)return pt(Ct,kt);if(Nt===1)return mt(Ct,kt,xt);if(Nt===3)return kt;throw new Error("unknown padding")};function pt(Rt,Tt){var At=Rt.modulus.byteLength(),xt=it("sha1").update(dt.alloc(0)).digest(),Nt=xt.length;if(Tt[0]!==0)throw new Error("decryption error");var Ct=Tt.slice(1,Nt+1),Ot=Tt.slice(Nt+1),kt=rt(Ct,et(Ot,Nt)),Pt=rt(Ot,et(kt,At-Nt-1));if(yt(xt,Pt.slice(0,Nt)))throw new Error("decryption error");for(var Dt=Nt;Pt[Dt]===0;)Dt++;if(Pt[Dt++]!==1)throw new Error("decryption error");return Pt.slice(Dt)}function mt(Rt,Tt,At){for(var xt=Tt.slice(0,2),Nt=2,Ct=0;Tt[Nt++]!==0;)if(Nt>=Tt.length){Ct++;break}var Ot=Tt.slice(2,Nt-1);if((xt.toString("hex")!=="0002"&&!At||xt.toString("hex")!=="0001"&&At)&&Ct++,Ot.length<8&&Ct++,Ct)throw new Error("decryption error");return Tt.slice(Nt)}function yt(Rt,Tt){Rt=dt.from(Rt),Tt=dt.from(Tt);var At=0,xt=Rt.length;Rt.length!==Tt.length&&(At++,xt=Math.min(Rt.length,Tt.length));for(var Nt=-1;++Nt<xt;)At+=Rt[Nt]^Tt[Nt];return At}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(tt){tt.publicEncrypt=requirePublicEncrypt(),tt.privateDecrypt=requirePrivateDecrypt(),tt.privateEncrypt=function(rt,nt){return tt.publicEncrypt(rt,nt,!0)},tt.publicDecrypt=function(rt,nt){return tt.privateDecrypt(rt,nt,!0)}}(browser$1)),browser$1}var browser={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1;function tt(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var et=safeBufferExports,rt=requireBrowser$b(),nt=et.Buffer,at=et.kMaxLength,it=commonjsGlobal$1.crypto||commonjsGlobal$1.msCrypto,st=Math.pow(2,32)-1;function dt(Tt,At){if(typeof Tt!="number"||Tt!==Tt)throw new TypeError("offset must be a number");if(Tt>st||Tt<0)throw new TypeError("offset must be a uint32");if(Tt>at||Tt>At)throw new RangeError("offset out of range")}function pt(Tt,At,xt){if(typeof Tt!="number"||Tt!==Tt)throw new TypeError("size must be a number");if(Tt>st||Tt<0)throw new TypeError("size must be a uint32");if(Tt+At>xt||Tt>at)throw new RangeError("buffer too small")}it&&it.getRandomValues||!process$1.browser?(browser.randomFill=mt,browser.randomFillSync=Rt):(browser.randomFill=tt,browser.randomFillSync=tt);function mt(Tt,At,xt,Nt){if(!nt.isBuffer(Tt)&&!(Tt instanceof commonjsGlobal$1.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof At=="function")Nt=At,At=0,xt=Tt.length;else if(typeof xt=="function")Nt=xt,xt=Tt.length-At;else if(typeof Nt!="function")throw new TypeError('"cb" argument must be a function');return dt(At,Tt.length),pt(xt,At,Tt.length),yt(Tt,At,xt,Nt)}function yt(Tt,At,xt,Nt){if(process$1.browser){var Ct=Tt.buffer,Ot=new Uint8Array(Ct,At,xt);if(it.getRandomValues(Ot),Nt){process$1.nextTick(function(){Nt(null,Tt)});return}return Tt}if(Nt){rt(xt,function(Pt,Dt){if(Pt)return Nt(Pt);Dt.copy(Tt,At),Nt(null,Tt)});return}var kt=rt(xt);return kt.copy(Tt,At),Tt}function Rt(Tt,At,xt){if(typeof At>"u"&&(At=0),!nt.isBuffer(Tt)&&!(Tt instanceof commonjsGlobal$1.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return dt(At,Tt.length),xt===void 0&&(xt=Tt.length-At),pt(xt,At,Tt.length),yt(Tt,At,xt)}return browser}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$b(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var tt=requireAlgos(),et=Object.keys(tt),rt=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(et);cryptoBrowserify.getHashes=function(){return rt};var nt=requireBrowser$7();cryptoBrowserify.pbkdf2=nt.pbkdf2,cryptoBrowserify.pbkdf2Sync=nt.pbkdf2Sync;var at=requireBrowser$5();cryptoBrowserify.Cipher=at.Cipher,cryptoBrowserify.createCipher=at.createCipher,cryptoBrowserify.Cipheriv=at.Cipheriv,cryptoBrowserify.createCipheriv=at.createCipheriv,cryptoBrowserify.Decipher=at.Decipher,cryptoBrowserify.createDecipher=at.createDecipher,cryptoBrowserify.Decipheriv=at.Decipheriv,cryptoBrowserify.createDecipheriv=at.createDecipheriv,cryptoBrowserify.getCiphers=at.getCiphers,cryptoBrowserify.listCiphers=at.listCiphers;var it=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=it.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=it.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=it.getDiffieHellman,cryptoBrowserify.createDiffieHellman=it.createDiffieHellman,cryptoBrowserify.DiffieHellman=it.DiffieHellman;var st=requireBrowser$3();cryptoBrowserify.createSign=st.createSign,cryptoBrowserify.Sign=st.Sign,cryptoBrowserify.createVerify=st.createVerify,cryptoBrowserify.Verify=st.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var dt=requireBrowser$1();cryptoBrowserify.publicEncrypt=dt.publicEncrypt,cryptoBrowserify.privateEncrypt=dt.privateEncrypt,cryptoBrowserify.publicDecrypt=dt.publicDecrypt,cryptoBrowserify.privateDecrypt=dt.privateDecrypt;var pt=requireBrowser();return cryptoBrowserify.randomFill=pt.randomFill,cryptoBrowserify.randomFillSync=pt.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}const PROGRAM_ID=new PublicKey("air4tyw7S12bvdRtgoLgyQXuBfoLrjBS7Fg4r91zLb1"),UNIQUENESS_PASS=new PublicKey("uniqobk8oGh4XBLMqM68K8M2zNu3CdYX7q5go7whQiv");new PublicKey("vaa1QRNEBb1G2XjPohqGWnPsvxWnwwXF67pdjrhDSwM");class AirdropClient{constructor(et,rt,nt,at,it,st){this.program=et,this.authority=rt,this.airdrop=nt,this.airdropAddress=at,this.ticket=it,this.ticketAddress=st,console.log("Created new client...")}static calculateMintAuthority(et){return PublicKey.findProgramAddressSync([et.toBuffer(),Buffer.from("mint_authority")],PROGRAM_ID)[0]}get mintAuthority(){return AirdropClient.calculateMintAuthority(this.airdropAddress)}static async get(et,rt){const nt=new Program(GatedAirdropIDL,et),at=await nt.account.airdrop.fetchNullable(rt);if(!at)return;const[it]=PublicKey.findProgramAddressSync([rt.toBuffer(),et.publicKey.toBuffer(),Buffer.from("ticket")],PROGRAM_ID),st=await nt.account.ticket.fetchNullable(it);return new AirdropClient(nt,et.publicKey,at,rt,st,it)}async claim(et){if(this.ticket)throw new Error("You already have a ticket");return this.program.methods.claim().accounts({payer:this.authority,airdrop:this.airdropAddress,recipient:this.authority,gatewayToken:et}).rpc()}async getBalance(){const et=this.airdrop.mint;return(await this.program.provider.connection.getTokenAccountBalance(getAssociatedTokenAddressSync(et,this.authority))).value.uiAmount}}const ConnectionContext=reactExports.createContext({});function useConnection(){return reactExports.useContext(ConnectionContext)}const ConnectionProvider=({children:tt,endpoint:et,config:rt={commitment:"confirmed"}})=>{const nt=reactExports.useMemo(()=>new Connection(et,rt),[et,rt]);return React.createElement(ConnectionContext.Provider,{value:{connection:nt}},tt)};class WalletError extends Error{constructor(et,rt){super(et),this.error=rt}}class WalletNotReadyError extends WalletError{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class WalletConfigError extends WalletError{constructor(){super(...arguments),this.name="WalletConfigError"}}class WalletConnectionError extends WalletError{constructor(){super(...arguments),this.name="WalletConnectionError"}}class WalletDisconnectedError extends WalletError{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class WalletDisconnectionError extends WalletError{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class WalletAccountError extends WalletError{constructor(){super(...arguments),this.name="WalletAccountError"}}class WalletPublicKeyError extends WalletError{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class WalletNotConnectedError extends WalletError{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class WalletSendTransactionError extends WalletError{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class WalletSignTransactionError extends WalletError{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class WalletSignMessageError extends WalletError{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class WalletSignInError extends WalletError{constructor(){super(...arguments),this.name="WalletSignInError"}}var WalletReadyState;(function(tt){tt.Installed="Installed",tt.NotDetected="NotDetected",tt.Loadable="Loadable",tt.Unsupported="Unsupported"})(WalletReadyState||(WalletReadyState={}));class BaseWalletAdapter extends EventEmitter{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(et,rt,nt={}){const at=this.publicKey;if(!at)throw new WalletNotConnectedError;return et.feePayer=et.feePayer||at,et.recentBlockhash=et.recentBlockhash||(await rt.getLatestBlockhash({commitment:nt.preflightCommitment,minContextSlot:nt.minContextSlot})).blockhash,et}}function isVersionedTransaction$1(tt){return"version"in tt}class BaseSignerWalletAdapter extends BaseWalletAdapter{async sendTransaction(et,rt,nt={}){let at=!0;try{if(isVersionedTransaction$1(et)){if(!this.supportedTransactionVersions)throw new WalletSendTransactionError("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(et.version))throw new WalletSendTransactionError(`Sending transaction version ${et.version} isn't supported by this wallet`);try{et=await this.signTransaction(et);const it=et.serialize();return await rt.sendRawTransaction(it,nt)}catch(it){throw it instanceof WalletSignTransactionError?(at=!1,it):new WalletSendTransactionError(it==null?void 0:it.message,it)}}else try{const{signers:it,...st}=nt;et=await this.prepareTransaction(et,rt,st),it!=null&&it.length&&et.partialSign(...it),et=await this.signTransaction(et);const dt=et.serialize();return await rt.sendRawTransaction(dt,st)}catch(it){throw it instanceof WalletSignTransactionError?(at=!1,it):new WalletSendTransactionError(it==null?void 0:it.message,it)}}catch(it){throw at&&this.emit("error",it),it}}async signAllTransactions(et){for(const nt of et)if(isVersionedTransaction$1(nt)){if(!this.supportedTransactionVersions)throw new WalletSignTransactionError("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(nt.version))throw new WalletSignTransactionError(`Signing transaction version ${nt.version} isn't supported by this wallet`)}const rt=[];for(const nt of et)rt.push(await this.signTransaction(nt));return rt}}class BaseMessageSignerWalletAdapter extends BaseSignerWalletAdapter{}class BaseSignInMessageSignerWalletAdapter extends BaseMessageSignerWalletAdapter{}const SolanaSignAndSendTransaction="solana:signAndSendTransaction",SolanaSignIn="solana:signIn",SolanaSignMessage="solana:signMessage",SolanaSignTransaction="solana:signTransaction",StandardConnect="standard:connect",StandardDisconnect="standard:disconnect",StandardEvents="standard:events";function isWalletAdapterCompatibleStandardWallet(tt){return StandardConnect in tt.features&&StandardEvents in tt.features&&(SolanaSignAndSendTransaction in tt.features||SolanaSignTransaction in tt.features)}var WalletAdapterNetwork;(function(tt){tt.Mainnet="mainnet-beta",tt.Testnet="testnet",tt.Devnet="devnet"})(WalletAdapterNetwork||(WalletAdapterNetwork={}));class WalletNotSelectedError extends WalletError{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const EMPTY_ARRAY=[],DEFAULT_CONTEXT$1={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){logMissingProviderError("call","select")},connect(){return Promise.reject(logMissingProviderError("call","connect"))},disconnect(){return Promise.reject(logMissingProviderError("call","disconnect"))},sendTransaction(){return Promise.reject(logMissingProviderError("call","sendTransaction"))},signTransaction(){return Promise.reject(logMissingProviderError("call","signTransaction"))},signAllTransactions(){return Promise.reject(logMissingProviderError("call","signAllTransactions"))},signMessage(){return Promise.reject(logMissingProviderError("call","signMessage"))},signIn(){return Promise.reject(logMissingProviderError("call","signIn"))}};Object.defineProperty(DEFAULT_CONTEXT$1,"wallets",{get(){return logMissingProviderError("read","wallets"),EMPTY_ARRAY}});Object.defineProperty(DEFAULT_CONTEXT$1,"wallet",{get(){return logMissingProviderError("read","wallet"),null}});Object.defineProperty(DEFAULT_CONTEXT$1,"publicKey",{get(){return logMissingProviderError("read","publicKey"),null}});function logMissingProviderError(tt,et){const rt=new Error(`You have tried to ${tt} "${et}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(rt),rt}const WalletContext=reactExports.createContext(DEFAULT_CONTEXT$1);function useWallet(){return reactExports.useContext(WalletContext)}function useAnchorWallet(){const{publicKey:tt,signTransaction:et,signAllTransactions:rt}=useWallet();return reactExports.useMemo(()=>tt&&et&&rt?{publicKey:tt,signTransaction:et,signAllTransactions:rt}:void 0,[tt,et,rt])}function useLocalStorage(tt,et){const rt=reactExports.useState(()=>{try{const it=localStorage.getItem(tt);if(it)return JSON.parse(it)}catch(it){typeof window<"u"&&console.error(it)}return et}),nt=rt[0],at=reactExports.useRef(!0);return reactExports.useEffect(()=>{if(at.current){at.current=!1;return}try{nt===null?localStorage.removeItem(tt):localStorage.setItem(tt,JSON.stringify(nt))}catch(it){typeof window<"u"&&console.error(it)}},[nt,tt]),rt}function getCommitment(tt){switch(tt){case"processed":case"confirmed":case"finalized":case void 0:return tt;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const SOLANA_MAINNET_CHAIN="solana:mainnet",SOLANA_DEVNET_CHAIN="solana:devnet",SOLANA_TESTNET_CHAIN="solana:testnet",SOLANA_LOCALNET_CHAIN="solana:localnet",MAINNET_ENDPOINT="https://api.mainnet-beta.solana.com";function getChainForEndpoint(tt){return tt.includes(MAINNET_ENDPOINT)?SOLANA_MAINNET_CHAIN:/\bdevnet\b/i.test(tt)?SOLANA_DEVNET_CHAIN:/\btestnet\b/i.test(tt)?SOLANA_TESTNET_CHAIN:/\blocalhost\b/i.test(tt)||/\b127\.0\.0\.1\b/.test(tt)?SOLANA_LOCALNET_CHAIN:SOLANA_MAINNET_CHAIN}function createSignInMessageText(tt){let et=`${tt.domain} wants you to sign in with your Solana account:
`;et+=`${tt.address}`,tt.statement&&(et+=`

${tt.statement}`);const rt=[];if(tt.uri&&rt.push(`URI: ${tt.uri}`),tt.version&&rt.push(`Version: ${tt.version}`),tt.chainId&&rt.push(`Chain ID: ${tt.chainId}`),tt.nonce&&rt.push(`Nonce: ${tt.nonce}`),tt.issuedAt&&rt.push(`Issued At: ${tt.issuedAt}`),tt.expirationTime&&rt.push(`Expiration Time: ${tt.expirationTime}`),tt.notBefore&&rt.push(`Not Before: ${tt.notBefore}`),tt.requestId&&rt.push(`Request ID: ${tt.requestId}`),tt.resources){rt.push("Resources:");for(const nt of tt.resources)rt.push(`- ${nt}`)}return rt.length&&(et+=`

${rt.join(`
`)}`),et}const SolanaMobileWalletAdapterErrorCode={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class SolanaMobileWalletAdapterError extends Error{constructor(...et){const[rt,nt,at]=et;super(nt),this.code=rt,this.data=at,this.name="SolanaMobileWalletAdapterError"}}class SolanaMobileWalletAdapterProtocolError extends Error{constructor(...et){const[rt,nt,at,it]=et;super(at),this.code=nt,this.data=it,this.jsonRpcMessageId=rt,this.name="SolanaMobileWalletAdapterProtocolError"}}function __awaiter$6(tt,et,rt,nt){function at(it){return it instanceof rt?it:new rt(function(st){st(it)})}return new(rt||(rt=Promise))(function(it,st){function dt(yt){try{mt(nt.next(yt))}catch(Rt){st(Rt)}}function pt(yt){try{mt(nt.throw(yt))}catch(Rt){st(Rt)}}function mt(yt){yt.done?it(yt.value):at(yt.value).then(dt,pt)}mt((nt=nt.apply(tt,[])).next())})}function createHelloReq(tt,et){return __awaiter$6(this,void 0,void 0,function*(){const rt=yield crypto.subtle.exportKey("raw",tt),nt=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},et,rt),at=new Uint8Array(rt.byteLength+nt.byteLength);return at.set(new Uint8Array(rt),0),at.set(new Uint8Array(nt),rt.byteLength),at})}function encode(tt){return window.btoa(tt)}function createSIWSMessage(tt){return createSignInMessageText(tt)}function createSIWSMessageBase64(tt){return encode(createSIWSMessage(tt))}const SolanaSignTransactions="solana:signTransactions",SolanaCloneAuthorization="solana:cloneAuthorization";function createMobileWalletProxy(tt,et){return new Proxy({},{get(rt,nt){return rt[nt]==null&&(rt[nt]=function(at){return __awaiter$6(this,void 0,void 0,function*(){const{method:it,params:st}=handleMobileWalletRequest(nt,at,tt),dt=yield et(it,st);return it==="authorize"&&st.sign_in_payload&&!dt.sign_in_result&&(dt.sign_in_result=yield signInFallback(st.sign_in_payload,dt,et)),handleMobileWalletResponse(nt,dt,tt)})}),rt[nt]},defineProperty(){return!1},deleteProperty(){return!1}})}function handleMobileWalletRequest(tt,et,rt){let nt=et,at=tt.toString().replace(/[A-Z]/g,it=>`_${it.toLowerCase()}`).toLowerCase();switch(tt){case"authorize":{let{chain:it}=nt;if(rt==="legacy"){switch(it){case"solana:testnet":{it="testnet";break}case"solana:devnet":{it="devnet";break}case"solana:mainnet":{it="mainnet-beta";break}default:it=nt.cluster}nt.cluster=it}else{switch(it){case"testnet":case"devnet":{it=`solana:${it}`;break}case"mainnet-beta":{it="solana:mainnet";break}}nt.chain=it}}case"reauthorize":{const{auth_token:it,identity:st}=nt;if(it)switch(rt){case"legacy":{at="reauthorize",nt={auth_token:it,identity:st};break}default:{at="authorize";break}}break}}return{method:at,params:nt}}function handleMobileWalletResponse(tt,et,rt){switch(tt){case"getCapabilities":{const nt=et;switch(rt){case"legacy":{const at=[SolanaSignTransactions];return nt.supports_clone_authorization===!0&&at.push(SolanaCloneAuthorization),Object.assign(Object.assign({},nt),{features:at})}case"v1":return Object.assign(Object.assign({},nt),{supports_sign_and_send_transactions:!0,supports_clone_authorization:nt.features.includes(SolanaCloneAuthorization)})}}}return et}function signInFallback(tt,et,rt){var nt;return __awaiter$6(this,void 0,void 0,function*(){const at=(nt=tt.domain)!==null&&nt!==void 0?nt:window.location.host,it=et.accounts[0].address,st=createSIWSMessageBase64(Object.assign(Object.assign({},tt),{domain:at,address:it})),dt=yield rt("sign_messages",{addresses:[it],payloads:[st]});return{address:it,signed_message:st,signature:dt.signed_payloads[0].slice(st.length)}})}const SEQUENCE_NUMBER_BYTES=4;function createSequenceNumberVector(tt){if(tt>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const et=new ArrayBuffer(SEQUENCE_NUMBER_BYTES);return new DataView(et).setUint32(0,tt,!1),new Uint8Array(et)}const INITIALIZATION_VECTOR_BYTES=12,ENCODED_PUBLIC_KEY_LENGTH_BYTES=65;function encryptMessage(tt,et,rt){return __awaiter$6(this,void 0,void 0,function*(){const nt=createSequenceNumberVector(et),at=new Uint8Array(INITIALIZATION_VECTOR_BYTES);crypto.getRandomValues(at);const it=yield crypto.subtle.encrypt(getAlgorithmParams(nt,at),rt,new TextEncoder().encode(tt)),st=new Uint8Array(nt.byteLength+at.byteLength+it.byteLength);return st.set(new Uint8Array(nt),0),st.set(new Uint8Array(at),nt.byteLength),st.set(new Uint8Array(it),nt.byteLength+at.byteLength),st})}function decryptMessage(tt,et){return __awaiter$6(this,void 0,void 0,function*(){const rt=tt.slice(0,SEQUENCE_NUMBER_BYTES),nt=tt.slice(SEQUENCE_NUMBER_BYTES,SEQUENCE_NUMBER_BYTES+INITIALIZATION_VECTOR_BYTES),at=tt.slice(SEQUENCE_NUMBER_BYTES+INITIALIZATION_VECTOR_BYTES),it=yield crypto.subtle.decrypt(getAlgorithmParams(rt,nt),et,at);return getUtf8Decoder().decode(it)})}function getAlgorithmParams(tt,et){return{additionalData:tt,iv:et,name:"AES-GCM",tagLength:128}}let _utf8Decoder;function getUtf8Decoder(){return _utf8Decoder===void 0&&(_utf8Decoder=new TextDecoder("utf-8")),_utf8Decoder}function generateAssociationKeypair(){return __awaiter$6(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function generateECDHKeypair(){return __awaiter$6(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function encryptJsonRpcMessage(tt,et){return __awaiter$6(this,void 0,void 0,function*(){const rt=JSON.stringify(tt),nt=tt.id;return encryptMessage(rt,nt,et)})}function decryptJsonRpcMessage(tt,et){return __awaiter$6(this,void 0,void 0,function*(){const rt=yield decryptMessage(tt,et),nt=JSON.parse(rt);if(Object.hasOwnProperty.call(nt,"error"))throw new SolanaMobileWalletAdapterProtocolError(nt.id,nt.error.code,nt.error.message);return nt})}function parseHelloRsp(tt,et,rt){return __awaiter$6(this,void 0,void 0,function*(){const[nt,at]=yield Promise.all([crypto.subtle.exportKey("raw",et),crypto.subtle.importKey("raw",tt.slice(0,ENCODED_PUBLIC_KEY_LENGTH_BYTES),{name:"ECDH",namedCurve:"P-256"},!1,[])]),it=yield crypto.subtle.deriveBits({name:"ECDH",public:at},rt,256),st=yield crypto.subtle.importKey("raw",it,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(nt),info:new Uint8Array},st,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function parseSessionProps(tt,et){return __awaiter$6(this,void 0,void 0,function*(){const rt=yield decryptMessage(tt,et),nt=JSON.parse(rt);let at="legacy";if(Object.hasOwnProperty.call(nt,"v"))switch(nt.v){case 1:case"1":case"v1":at="v1";break;case"legacy":at="legacy";break;default:throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${nt.v}`)}return{protocol_version:at}})}function getRandomAssociationPort(){return assertAssociationPort(49152+Math.floor(Math.random()*16384))}function assertAssociationPort(tt){if(tt<49152||tt>65535)throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${tt} given.`,{port:tt});return tt}function arrayBufferToBase64String(tt){let et="";const rt=new Uint8Array(tt),nt=rt.byteLength;for(let at=0;at<nt;at++)et+=String.fromCharCode(rt[at]);return window.btoa(et)}function getStringWithURLUnsafeCharactersReplaced(tt){return tt.replace(/[/+=]/g,et=>({"/":"_","+":"-","=":"."})[et])}const INTENT_NAME="solana-wallet";function getPathParts(tt){return tt.replace(/(^\/+|\/+$)/g,"").split("/")}function getIntentURL(tt,et){let rt=null;if(et){try{rt=new URL(et)}catch{}if((rt==null?void 0:rt.protocol)!=="https:")throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}rt||(rt=new URL(`${INTENT_NAME}:/`));const nt=tt.startsWith("/")?tt:[...getPathParts(rt.pathname),...getPathParts(tt)].join("/");return new URL(nt,rt)}function getAssociateAndroidIntentURL(tt,et,rt,nt=["v1"]){return __awaiter$6(this,void 0,void 0,function*(){const at=assertAssociationPort(et),it=yield crypto.subtle.exportKey("raw",tt),st=arrayBufferToBase64String(it),dt=getIntentURL("v1/associate/local",rt);return dt.searchParams.set("association",getStringWithURLUnsafeCharactersReplaced(st)),dt.searchParams.set("port",`${at}`),nt.forEach(pt=>{dt.searchParams.set("v",pt)}),dt})}const Browser={Firefox:0,Other:1};function assertUnreachable(tt){return tt}function getBrowser(){return navigator.userAgent.indexOf("Firefox/")!==-1?Browser.Firefox:Browser.Other}function getDetectionPromise(){return new Promise((tt,et)=>{function rt(){clearTimeout(at),window.removeEventListener("blur",nt)}function nt(){rt(),tt()}window.addEventListener("blur",nt);const at=setTimeout(()=>{rt(),et()},2e3)})}let _frame=null;function launchUrlThroughHiddenFrame(tt){_frame==null&&(_frame=document.createElement("iframe"),_frame.style.display="none",document.body.appendChild(_frame)),_frame.contentWindow.location.href=tt.toString()}function startSession(tt,et){return __awaiter$6(this,void 0,void 0,function*(){const rt=getRandomAssociationPort(),nt=yield getAssociateAndroidIntentURL(tt,rt,et);if(nt.protocol==="https:")window.location.assign(nt);else try{const at=getBrowser();switch(at){case Browser.Firefox:launchUrlThroughHiddenFrame(nt);break;case Browser.Other:{const it=getDetectionPromise();window.location.assign(nt),yield it;break}default:}}catch{throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}return rt})}const WEBSOCKET_CONNECTION_CONFIG={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},WEBSOCKET_PROTOCOL="com.solana.mobilewalletadapter.v1";function assertSecureContext(){if(typeof window>"u"||window.isSecureContext!==!0)throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function assertSecureEndpointSpecificURI(tt){let et;try{et=new URL(tt)}catch{throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(et.protocol!=="https:")throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function getSequenceNumberFromByteArray(tt){return new DataView(tt).getUint32(0,!1)}function transact$1(tt,et){return __awaiter$6(this,void 0,void 0,function*(){assertSecureContext();const rt=yield generateAssociationKeypair(),nt=yield startSession(rt.publicKey,et==null?void 0:et.baseUri),at=`ws://localhost:${nt}/solana-wallet`;let it;const st=(()=>{const yt=[...WEBSOCKET_CONNECTION_CONFIG.retryDelayScheduleMs];return()=>yt.length>1?yt.shift():yt[0]})();let dt=1,pt=0,mt={__type:"disconnected"};return new Promise((yt,Rt)=>{let Tt;const At={},xt=()=>__awaiter$6(this,void 0,void 0,function*(){if(mt.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${mt.__type}\`.`);return}const{associationKeypair:Gt}=mt;Tt.removeEventListener("open",xt);const jt=yield generateECDHKeypair();Tt.send(yield createHelloReq(jt.publicKey,Gt.privateKey)),mt={__type:"hello_req_sent",associationPublicKey:Gt.publicKey,ecdhPrivateKey:jt.privateKey}}),Nt=Gt=>{Gt.wasClean?mt={__type:"disconnected"}:Rt(new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${Gt.code}: ${Gt.reason}).`,{closeEvent:Gt})),kt()},Ct=Gt=>__awaiter$6(this,void 0,void 0,function*(){kt(),Date.now()-it>=WEBSOCKET_CONNECTION_CONFIG.timeoutMs?Rt(new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket on port ${nt}.`)):(yield new Promise(jt=>{const Yt=st();Pt=window.setTimeout(jt,Yt)}),Dt())}),Ot=Gt=>__awaiter$6(this,void 0,void 0,function*(){const jt=yield Gt.data.arrayBuffer();switch(mt.__type){case"connected":try{const Yt=jt.slice(0,SEQUENCE_NUMBER_BYTES),tr=getSequenceNumberFromByteArray(Yt);if(tr!==pt+1)throw new Error("Encrypted message has invalid sequence number");pt=tr;const er=yield decryptJsonRpcMessage(jt,mt.sharedSecret),lr=At[er.id];delete At[er.id],lr.resolve(er.result)}catch(Yt){if(Yt instanceof SolanaMobileWalletAdapterProtocolError){const tr=At[Yt.jsonRpcMessageId];delete At[Yt.jsonRpcMessageId],tr.reject(Yt)}else throw Yt}break;case"hello_req_sent":{const Yt=yield parseHelloRsp(jt,mt.associationPublicKey,mt.ecdhPrivateKey),tr=jt.slice(ENCODED_PUBLIC_KEY_LENGTH_BYTES),er=tr.byteLength!==0?yield __awaiter$6(this,void 0,void 0,function*(){const It=tr.slice(0,SEQUENCE_NUMBER_BYTES),ot=getSequenceNumberFromByteArray(It);if(ot!==pt+1)throw new Error("Encrypted message has invalid sequence number");return pt=ot,parseSessionProps(tr,Yt)}):{protocol_version:"legacy"};mt={__type:"connected",sharedSecret:Yt,sessionProperties:er};const lr=createMobileWalletProxy(er.protocol_version,(It,ot)=>__awaiter$6(this,void 0,void 0,function*(){const ft=dt++;return Tt.send(yield encryptJsonRpcMessage({id:ft,jsonrpc:"2.0",method:It,params:ot??{}},Yt)),new Promise((ht,vt)=>{At[ft]={resolve(wt){switch(It){case"authorize":case"reauthorize":{const{wallet_uri_base:bt}=wt;if(bt!=null)try{assertSecureEndpointSpecificURI(bt)}catch($t){vt($t);return}break}}ht(wt)},reject:vt}})}));try{yt(yield tt(lr))}catch(It){Rt(It)}finally{kt(),Tt.close()}break}}});let kt,Pt;const Dt=()=>{kt&&kt(),mt={__type:"connecting",associationKeypair:rt},it===void 0&&(it=Date.now()),Tt=new WebSocket(at,[WEBSOCKET_PROTOCOL]),Tt.addEventListener("open",xt),Tt.addEventListener("close",Nt),Tt.addEventListener("error",Ct),Tt.addEventListener("message",Ot),kt=()=>{window.clearTimeout(Pt),Tt.removeEventListener("open",xt),Tt.removeEventListener("close",Nt),Tt.removeEventListener("error",Ct),Tt.removeEventListener("message",Ot)}};Dt()})})}function base$2(tt){if(tt.length>=255)throw new TypeError("Alphabet too long");for(var et=new Uint8Array(256),rt=0;rt<et.length;rt++)et[rt]=255;for(var nt=0;nt<tt.length;nt++){var at=tt.charAt(nt),it=at.charCodeAt(0);if(et[it]!==255)throw new TypeError(at+" is ambiguous");et[it]=nt}var st=tt.length,dt=tt.charAt(0),pt=Math.log(st)/Math.log(256),mt=Math.log(256)/Math.log(st);function yt(At){if(At instanceof Uint8Array||(ArrayBuffer.isView(At)?At=new Uint8Array(At.buffer,At.byteOffset,At.byteLength):Array.isArray(At)&&(At=Uint8Array.from(At))),!(At instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(At.length===0)return"";for(var xt=0,Nt=0,Ct=0,Ot=At.length;Ct!==Ot&&At[Ct]===0;)Ct++,xt++;for(var kt=(Ot-Ct)*mt+1>>>0,Pt=new Uint8Array(kt);Ct!==Ot;){for(var Dt=At[Ct],Gt=0,jt=kt-1;(Dt!==0||Gt<Nt)&&jt!==-1;jt--,Gt++)Dt+=256*Pt[jt]>>>0,Pt[jt]=Dt%st>>>0,Dt=Dt/st>>>0;if(Dt!==0)throw new Error("Non-zero carry");Nt=Gt,Ct++}for(var Yt=kt-Nt;Yt!==kt&&Pt[Yt]===0;)Yt++;for(var tr=dt.repeat(xt);Yt<kt;++Yt)tr+=tt.charAt(Pt[Yt]);return tr}function Rt(At){if(typeof At!="string")throw new TypeError("Expected String");if(At.length===0)return new Uint8Array;for(var xt=0,Nt=0,Ct=0;At[xt]===dt;)Nt++,xt++;for(var Ot=(At.length-xt)*pt+1>>>0,kt=new Uint8Array(Ot);At[xt];){var Pt=et[At.charCodeAt(xt)];if(Pt===255)return;for(var Dt=0,Gt=Ot-1;(Pt!==0||Dt<Ct)&&Gt!==-1;Gt--,Dt++)Pt+=st*kt[Gt]>>>0,kt[Gt]=Pt%256>>>0,Pt=Pt/256>>>0;if(Pt!==0)throw new Error("Non-zero carry");Ct=Dt,xt++}for(var jt=Ot-Ct;jt!==Ot&&kt[jt]===0;)jt++;for(var Yt=new Uint8Array(Nt+(Ot-jt)),tr=Nt;jt!==Ot;)Yt[tr++]=kt[jt++];return Yt}function Tt(At){var xt=Rt(At);if(xt)return xt;throw new Error("Non-base"+st+" character")}return{encode:yt,decodeUnsafe:Rt,decode:Tt}}var src$3=base$2;const basex$2=src$3,ALPHABET$2="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var bs58$2=basex$2(ALPHABET$2);const bs58$3=getDefaultExportFromCjs$5(bs58$2);function __rest$6(tt,et){var rt={};for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&et.indexOf(nt)<0&&(rt[nt]=tt[nt]);if(tt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var at=0,nt=Object.getOwnPropertySymbols(tt);at<nt.length;at++)et.indexOf(nt[at])<0&&Object.prototype.propertyIsEnumerable.call(tt,nt[at])&&(rt[nt[at]]=tt[nt[at]]);return rt}function __awaiter$5(tt,et,rt,nt){function at(it){return it instanceof rt?it:new rt(function(st){st(it)})}return new(rt||(rt=Promise))(function(it,st){function dt(yt){try{mt(nt.next(yt))}catch(Rt){st(Rt)}}function pt(yt){try{mt(nt.throw(yt))}catch(Rt){st(Rt)}}function mt(yt){yt.done?it(yt.value):at(yt.value).then(dt,pt)}mt((nt=nt.apply(tt,[])).next())})}function fromUint8Array(tt){return window.btoa(String.fromCharCode.call(null,...tt))}function toUint8Array$1(tt){return new Uint8Array(window.atob(tt).split("").map(et=>et.charCodeAt(0)))}function getPayloadFromTransaction(tt){const et="version"in tt?tt.serialize():tt.serialize({requireAllSignatures:!1,verifySignatures:!1});return fromUint8Array(et)}function getTransactionFromWireMessage(tt){const rt=tt[0]*SIGNATURE_LENGTH_IN_BYTES$1+1;return VersionedMessage.deserializeMessageVersion(tt.slice(rt,tt.length))==="legacy"?Transaction.from(tt):VersionedTransaction.deserialize(tt)}function transact(tt,et){return __awaiter$5(this,void 0,void 0,function*(){return yield transact$1(nt=>{const at=new Proxy({},{get(it,st){if(it[st]==null)switch(st){case"signAndSendTransactions":it[st]=function(dt){var{minContextSlot:pt,commitment:mt,skipPreflight:yt,maxRetries:Rt,waitForCommitmentToSendNextTransaction:Tt,transactions:At}=dt,xt=__rest$6(dt,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return __awaiter$5(this,void 0,void 0,function*(){const Nt=At.map(getPayloadFromTransaction),Ct={min_context_slot:pt,commitment:mt,skip_preflight:yt,max_retries:Rt,wait_for_commitment_to_send_next_transaction:Tt},{signatures:Ot}=yield nt.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},xt),Object.values(Ct).some(Pt=>Pt!=null)?{options:Ct}:null),{payloads:Nt}));return Ot.map(toUint8Array$1).map(bs58$3.encode)})};break;case"signMessages":it[st]=function(dt){var{payloads:pt}=dt,mt=__rest$6(dt,["payloads"]);return __awaiter$5(this,void 0,void 0,function*(){const yt=pt.map(fromUint8Array),{signed_payloads:Rt}=yield nt.signMessages(Object.assign(Object.assign({},mt),{payloads:yt}));return Rt.map(toUint8Array$1)})};break;case"signTransactions":it[st]=function(dt){var{transactions:pt}=dt,mt=__rest$6(dt,["transactions"]);return __awaiter$5(this,void 0,void 0,function*(){const yt=pt.map(getPayloadFromTransaction),{signed_payloads:Rt}=yield nt.signTransactions(Object.assign(Object.assign({},mt),{payloads:yt}));return Rt.map(toUint8Array$1).map(getTransactionFromWireMessage)})};break;default:{it[st]=nt[st];break}}return it[st]},defineProperty(){return!1},deleteProperty(){return!1}});return tt(at)},et)})}function __awaiter$4(tt,et,rt,nt){function at(it){return it instanceof rt?it:new rt(function(st){st(it)})}return new(rt||(rt=Promise))(function(it,st){function dt(yt){try{mt(nt.next(yt))}catch(Rt){st(Rt)}}function pt(yt){try{mt(nt.throw(yt))}catch(Rt){st(Rt)}}function mt(yt){yt.done?it(yt.value):at(yt.value).then(dt,pt)}mt((nt=nt.apply(tt,[])).next())})}function toUint8Array(tt){return new Uint8Array(window.atob(tt).split("").map(et=>et.charCodeAt(0)))}function getIsSupported(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}const SolanaMobileWalletAdapterWalletName="Mobile Wallet Adapter",SIGNATURE_LENGTH_IN_BYTES=64;function getPublicKeyFromAddress(tt){const et=toUint8Array(tt);return new PublicKey(et)}function isVersionedTransaction(tt){return"version"in tt}class SolanaMobileWalletAdapter extends BaseSignInMessageSignerWalletAdapter{constructor(et){var rt;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=SolanaMobileWalletAdapterWalletName,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=getIsSupported()?WalletReadyState.Loadable:WalletReadyState.Unsupported,this._authorizationResultCache=et.authorizationResultCache,this._addressSelector=et.addressSelector,this._appIdentity=et.appIdentity,this._chain=(rt=et.chain)!==null&&rt!==void 0?rt:et.cluster,this._onWalletNotFound=et.onWalletNotFound,this._readyState!==WalletReadyState.Unsupported&&this._authorizationResultCache.get().then(nt=>{nt&&this.declareWalletAsInstalled()})}get publicKey(){if(this._publicKey==null&&this._selectedAddress!=null)try{this._publicKey=getPublicKeyFromAddress(this._selectedAddress)}catch(et){throw new WalletPublicKeyError(et instanceof Error&&(et==null?void 0:et.message)||"Unknown error",et)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==WalletReadyState.Installed&&this.emit("readyStateChange",this._readyState=WalletReadyState.Installed)}runWithGuard(et){return __awaiter$4(this,void 0,void 0,function*(){try{return yield et()}catch(rt){throw this.emit("error",rt),rt}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return __awaiter$4(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return __awaiter$4(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>__awaiter$4(this,void 0,void 0,function*(){if(this._readyState!==WalletReadyState.Installed&&this._readyState!==WalletReadyState.Loadable)throw new WalletNotReadyError;this._connecting=!0;try{const et=yield this._authorizationResultCache.get();et&&this.handleAuthorizationResult(et)}catch(et){throw new WalletConnectionError(et instanceof Error&&et.message||"Unknown error",et)}finally{this._connecting=!1}}))})}connect(){return __awaiter$4(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>__awaiter$4(this,void 0,void 0,function*(){if(this._readyState!==WalletReadyState.Installed&&this._readyState!==WalletReadyState.Loadable)throw new WalletNotReadyError;this._connecting=!0;try{yield this.performAuthorization()}catch(et){throw new WalletConnectionError(et instanceof Error&&et.message||"Unknown error",et)}finally{this._connecting=!1}}))})}performAuthorization(et){return __awaiter$4(this,void 0,void 0,function*(){try{const rt=yield this._authorizationResultCache.get();return rt?(this.handleAuthorizationResult(rt),rt):yield this.transact(nt=>__awaiter$4(this,void 0,void 0,function*(){const at=yield nt.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:et});return Promise.all([this._authorizationResultCache.set(at),this.handleAuthorizationResult(at)]),at}))}catch(rt){throw new WalletConnectionError(rt instanceof Error&&rt.message||"Unknown error",rt)}})}handleAuthorizationResult(et){var rt;return __awaiter$4(this,void 0,void 0,function*(){const nt=this._authorizationResult==null||((rt=this._authorizationResult)===null||rt===void 0?void 0:rt.accounts.length)!==et.accounts.length||this._authorizationResult.accounts.some((at,it)=>at.address!==et.accounts[it].address);if(this._authorizationResult=et,this.declareWalletAsInstalled(),nt){const at=yield this._addressSelector.select(et.accounts.map(({address:it})=>it));at!==this._selectedAddress&&(this._selectedAddress=at,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(et,rt){return __awaiter$4(this,void 0,void 0,function*(){try{const nt=yield et.authorize({auth_token:rt,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(nt),this.handleAuthorizationResult(nt)])}catch(nt){throw this.disconnect(),new WalletDisconnectedError(nt instanceof Error&&(nt==null?void 0:nt.message)||"Unknown error",nt)}})}disconnect(){return __awaiter$4(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(et){var rt;return __awaiter$4(this,void 0,void 0,function*(){const nt=(rt=this._authorizationResult)===null||rt===void 0?void 0:rt.wallet_uri_base,at=nt?{baseUri:nt}:void 0,it=this._connectionGeneration;try{return yield transact(et,at)}catch(st){throw this._connectionGeneration!==it&&(yield new Promise(()=>{})),st instanceof Error&&st.name==="SolanaMobileWalletAdapterError"&&st.code==="ERROR_WALLET_NOT_FOUND"&&(yield this._onWalletNotFound(this)),st}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new WalletNotConnectedError;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(et){return __awaiter$4(this,void 0,void 0,function*(){const{authToken:rt}=this.assertIsAuthorized();try{return yield this.transact(nt=>__awaiter$4(this,void 0,void 0,function*(){return yield this.performReauthorization(nt,rt),yield nt.signTransactions({transactions:et})}))}catch(nt){throw new WalletSignTransactionError(nt==null?void 0:nt.message,nt)}})}sendTransaction(et,rt,nt){return __awaiter$4(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>__awaiter$4(this,void 0,void 0,function*(){const{authToken:at}=this.assertIsAuthorized(),it=nt==null?void 0:nt.minContextSlot;try{return yield this.transact(st=>__awaiter$4(this,void 0,void 0,function*(){function dt(){let Rt;switch(rt.commitment){case"confirmed":case"finalized":case"processed":Rt=rt.commitment;break;default:Rt="finalized"}let Tt;switch(nt==null?void 0:nt.preflightCommitment){case"confirmed":case"finalized":case"processed":Tt=nt.preflightCommitment;break;case void 0:Tt=Rt;break;default:Tt="finalized"}return(Tt==="finalized"?2:Tt==="confirmed"?1:0)<(Rt==="finalized"?2:Rt==="confirmed"?1:0)?Tt:Rt}const[pt,mt,yt]=yield Promise.all([st.getCapabilities(),this.performReauthorization(st,at),isVersionedTransaction(et)?null:__awaiter$4(this,void 0,void 0,function*(){var Rt;if(et.feePayer||(et.feePayer=(Rt=this.publicKey)!==null&&Rt!==void 0?Rt:void 0),et.recentBlockhash==null){const{blockhash:Tt}=yield rt.getLatestBlockhash({commitment:dt()});et.recentBlockhash=Tt}})]);if(pt.supports_sign_and_send_transactions)return(yield st.signAndSendTransactions({minContextSlot:it,transactions:[et]}))[0];{const[Rt]=yield st.signTransactions({transactions:[et]});if(isVersionedTransaction(Rt))return yield rt.sendTransaction(Rt);{const Tt=Rt.serialize();return yield rt.sendRawTransaction(Tt,Object.assign(Object.assign({},nt),{preflightCommitment:dt()}))}}}))}catch(st){throw new WalletSendTransactionError(st==null?void 0:st.message,st)}}))})}signTransaction(et){return __awaiter$4(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>__awaiter$4(this,void 0,void 0,function*(){const[rt]=yield this.performSignTransactions([et]);return rt}))})}signAllTransactions(et){return __awaiter$4(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>__awaiter$4(this,void 0,void 0,function*(){return yield this.performSignTransactions(et)}))})}signMessage(et){return __awaiter$4(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>__awaiter$4(this,void 0,void 0,function*(){const{authToken:rt,selectedAddress:nt}=this.assertIsAuthorized();try{return yield this.transact(at=>__awaiter$4(this,void 0,void 0,function*(){yield this.performReauthorization(at,rt);const[it]=yield at.signMessages({addresses:[nt],payloads:[et]});return it.slice(-SIGNATURE_LENGTH_IN_BYTES)}))}catch(at){throw new WalletSignMessageError(at==null?void 0:at.message,at)}}))})}signIn(et){return __awaiter$4(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>__awaiter$4(this,void 0,void 0,function*(){var rt,nt;if(this._readyState!==WalletReadyState.Installed&&this._readyState!==WalletReadyState.Loadable)throw new WalletNotReadyError;this._connecting=!0;try{const at=yield this.performAuthorization(Object.assign(Object.assign({},et),{domain:(rt=et==null?void 0:et.domain)!==null&&rt!==void 0?rt:window.location.host}));if(!at.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const it=at.sign_in_result.address;return{account:Object.assign(Object.assign({},(nt=at.accounts.find(dt=>dt.address==it))!==null&&nt!==void 0?nt:{address:it}),{publicKey:toUint8Array(it)}),signedMessage:toUint8Array(at.sign_in_result.signed_message),signature:toUint8Array(at.sign_in_result.signature)}}catch(at){throw new WalletConnectionError(at instanceof Error&&at.message||"Unknown error",at)}finally{this._connecting=!1}}))})}}function createDefaultAddressSelector(){return{select(tt){return __awaiter$4(this,void 0,void 0,function*(){return tt[0]})}}}const CACHE_KEY="SolanaMobileWalletAdapterDefaultAuthorizationCache";function createDefaultAuthorizationResultCache(){let tt;try{tt=window.localStorage}catch{}return{clear(){return __awaiter$4(this,void 0,void 0,function*(){if(tt)try{tt.removeItem(CACHE_KEY)}catch{}})},get(){return __awaiter$4(this,void 0,void 0,function*(){if(tt)try{return JSON.parse(tt.getItem(CACHE_KEY))||void 0}catch{}})},set(et){return __awaiter$4(this,void 0,void 0,function*(){if(tt)try{tt.setItem(CACHE_KEY,JSON.stringify(et))}catch{}})}}}function defaultWalletNotFoundHandler(tt){return __awaiter$4(this,void 0,void 0,function*(){typeof window<"u"&&window.location.assign(tt.url)})}function createDefaultWalletNotFoundHandler(){return defaultWalletNotFoundHandler}function arraysEqual(tt,et){if(tt===et)return!0;const rt=tt.length;if(rt!==et.length)return!1;for(let nt=0;nt<rt;nt++)if(tt[nt]!==et[nt])return!1;return!0}var __classPrivateFieldSet$1=function(tt,et,rt,nt,at){if(nt==="m")throw new TypeError("Private method is not writable");if(nt==="a"&&!at)throw new TypeError("Private accessor was defined without a setter");if(typeof et=="function"?tt!==et||!at:!et.has(tt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return nt==="a"?at.call(tt,rt):at?at.value=rt:et.set(tt,rt),rt},__classPrivateFieldGet$1=function(tt,et,rt,nt){if(rt==="a"&&!nt)throw new TypeError("Private accessor was defined without a getter");if(typeof et=="function"?tt!==et||!nt:!et.has(tt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return rt==="m"?nt:rt==="a"?nt.call(tt):nt?nt.value:et.get(tt)},_StandardWalletAdapter_instances,_StandardWalletAdapter_account,_StandardWalletAdapter_publicKey,_StandardWalletAdapter_connecting,_StandardWalletAdapter_disconnecting,_StandardWalletAdapter_off,_StandardWalletAdapter_supportedTransactionVersions,_StandardWalletAdapter_wallet,_StandardWalletAdapter_readyState,_StandardWalletAdapter_connect,_StandardWalletAdapter_connected,_StandardWalletAdapter_disconnected,_StandardWalletAdapter_reset,_StandardWalletAdapter_changed,_StandardWalletAdapter_signTransaction,_StandardWalletAdapter_signAllTransactions,_StandardWalletAdapter_signMessage,_StandardWalletAdapter_signIn;class StandardWalletAdapter extends BaseWalletAdapter{constructor({wallet:et}){super(),_StandardWalletAdapter_instances.add(this),_StandardWalletAdapter_account.set(this,void 0),_StandardWalletAdapter_publicKey.set(this,void 0),_StandardWalletAdapter_connecting.set(this,void 0),_StandardWalletAdapter_disconnecting.set(this,void 0),_StandardWalletAdapter_off.set(this,void 0),_StandardWalletAdapter_supportedTransactionVersions.set(this,void 0),_StandardWalletAdapter_wallet.set(this,void 0),_StandardWalletAdapter_readyState.set(this,typeof window>"u"||typeof document>"u"?WalletReadyState.Unsupported:WalletReadyState.Installed),_StandardWalletAdapter_changed.set(this,rt=>{if("accounts"in rt){const nt=__classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").accounts[0];__classPrivateFieldGet$1(this,_StandardWalletAdapter_account,"f")&&!__classPrivateFieldGet$1(this,_StandardWalletAdapter_disconnecting,"f")&&nt!==__classPrivateFieldGet$1(this,_StandardWalletAdapter_account,"f")&&(nt?__classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_connected).call(this,nt):(this.emit("error",new WalletDisconnectedError),__classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_disconnected).call(this)))}"features"in rt&&__classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_reset).call(this)}),__classPrivateFieldSet$1(this,_StandardWalletAdapter_wallet,et,"f"),__classPrivateFieldSet$1(this,_StandardWalletAdapter_account,null,"f"),__classPrivateFieldSet$1(this,_StandardWalletAdapter_publicKey,null,"f"),__classPrivateFieldSet$1(this,_StandardWalletAdapter_connecting,!1,"f"),__classPrivateFieldSet$1(this,_StandardWalletAdapter_disconnecting,!1,"f"),__classPrivateFieldSet$1(this,_StandardWalletAdapter_off,__classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features[StandardEvents].on("change",__classPrivateFieldGet$1(this,_StandardWalletAdapter_changed,"f")),"f"),__classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_reset).call(this)}get name(){return __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").icon}get readyState(){return __classPrivateFieldGet$1(this,_StandardWalletAdapter_readyState,"f")}get publicKey(){return __classPrivateFieldGet$1(this,_StandardWalletAdapter_publicKey,"f")}get connecting(){return __classPrivateFieldGet$1(this,_StandardWalletAdapter_connecting,"f")}get supportedTransactionVersions(){return __classPrivateFieldGet$1(this,_StandardWalletAdapter_supportedTransactionVersions,"f")}get wallet(){return __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f")}get standard(){return!0}destroy(){__classPrivateFieldSet$1(this,_StandardWalletAdapter_account,null,"f"),__classPrivateFieldSet$1(this,_StandardWalletAdapter_publicKey,null,"f"),__classPrivateFieldSet$1(this,_StandardWalletAdapter_connecting,!1,"f"),__classPrivateFieldSet$1(this,_StandardWalletAdapter_disconnecting,!1,"f");const et=__classPrivateFieldGet$1(this,_StandardWalletAdapter_off,"f");et&&(__classPrivateFieldSet$1(this,_StandardWalletAdapter_off,null,"f"),et())}async autoConnect(){return __classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_connect).call(this,{silent:!0})}async connect(){return __classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_connect).call(this)}async disconnect(){if(StandardDisconnect in __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features)try{__classPrivateFieldSet$1(this,_StandardWalletAdapter_disconnecting,!0,"f"),await __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features[StandardDisconnect].disconnect()}catch(et){this.emit("error",new WalletDisconnectionError(et==null?void 0:et.message,et))}finally{__classPrivateFieldSet$1(this,_StandardWalletAdapter_disconnecting,!1,"f")}__classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_disconnected).call(this)}async sendTransaction(et,rt,nt={}){try{const at=__classPrivateFieldGet$1(this,_StandardWalletAdapter_account,"f");if(!at)throw new WalletNotConnectedError;let it;if(SolanaSignAndSendTransaction in __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features)if(at.features.includes(SolanaSignAndSendTransaction))it=SolanaSignAndSendTransaction;else if(SolanaSignTransaction in __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features&&at.features.includes(SolanaSignTransaction))it=SolanaSignTransaction;else throw new WalletAccountError;else if(SolanaSignTransaction in __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features){if(!at.features.includes(SolanaSignTransaction))throw new WalletAccountError;it=SolanaSignTransaction}else throw new WalletConfigError;const st=getChainForEndpoint(rt.rpcEndpoint);if(!at.chains.includes(st))throw new WalletSendTransactionError;try{const{signers:dt,...pt}=nt;let mt;if(isVersionedTransaction$1(et)?(dt!=null&&dt.length&&et.sign(dt),mt=et.serialize()):(et=await this.prepareTransaction(et,rt,pt),dt!=null&&dt.length&&et.partialSign(...dt),mt=new Uint8Array(et.serialize({requireAllSignatures:!1,verifySignatures:!1}))),it===SolanaSignAndSendTransaction){const[yt]=await __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features[SolanaSignAndSendTransaction].signAndSendTransaction({account:at,chain:st,transaction:mt,options:{preflightCommitment:getCommitment(pt.preflightCommitment||rt.commitment),skipPreflight:pt.skipPreflight,maxRetries:pt.maxRetries,minContextSlot:pt.minContextSlot}});return bs58$5.encode(yt.signature)}else{const[yt]=await __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features[SolanaSignTransaction].signTransaction({account:at,chain:st,transaction:mt,options:{preflightCommitment:getCommitment(pt.preflightCommitment||rt.commitment),minContextSlot:pt.minContextSlot}});return await rt.sendRawTransaction(yt.signedTransaction,{...pt,preflightCommitment:getCommitment(pt.preflightCommitment||rt.commitment)})}}catch(dt){throw dt instanceof WalletError?dt:new WalletSendTransactionError(dt==null?void 0:dt.message,dt)}}catch(at){throw this.emit("error",at),at}}}_StandardWalletAdapter_account=new WeakMap,_StandardWalletAdapter_publicKey=new WeakMap,_StandardWalletAdapter_connecting=new WeakMap,_StandardWalletAdapter_disconnecting=new WeakMap,_StandardWalletAdapter_off=new WeakMap,_StandardWalletAdapter_supportedTransactionVersions=new WeakMap,_StandardWalletAdapter_wallet=new WeakMap,_StandardWalletAdapter_readyState=new WeakMap,_StandardWalletAdapter_changed=new WeakMap,_StandardWalletAdapter_instances=new WeakSet,_StandardWalletAdapter_connect=async function tt(et){try{if(this.connected||this.connecting)return;if(__classPrivateFieldGet$1(this,_StandardWalletAdapter_readyState,"f")!==WalletReadyState.Installed)throw new WalletNotReadyError;if(__classPrivateFieldSet$1(this,_StandardWalletAdapter_connecting,!0,"f"),!__classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").accounts.length)try{await __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features[StandardConnect].connect(et)}catch(nt){throw new WalletConnectionError(nt==null?void 0:nt.message,nt)}const rt=__classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").accounts[0];if(!rt)throw new WalletAccountError;__classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_connected).call(this,rt)}catch(rt){throw this.emit("error",rt),rt}finally{__classPrivateFieldSet$1(this,_StandardWalletAdapter_connecting,!1,"f")}},_StandardWalletAdapter_connected=function tt(et){let rt;try{rt=new PublicKey(et.address)}catch(nt){throw new WalletPublicKeyError(nt==null?void 0:nt.message,nt)}__classPrivateFieldSet$1(this,_StandardWalletAdapter_account,et,"f"),__classPrivateFieldSet$1(this,_StandardWalletAdapter_publicKey,rt,"f"),__classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_reset).call(this),this.emit("connect",rt)},_StandardWalletAdapter_disconnected=function tt(){__classPrivateFieldSet$1(this,_StandardWalletAdapter_account,null,"f"),__classPrivateFieldSet$1(this,_StandardWalletAdapter_publicKey,null,"f"),__classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_reset).call(this),this.emit("disconnect")},_StandardWalletAdapter_reset=function tt(){var rt,nt;const et=SolanaSignAndSendTransaction in __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features?__classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features[SolanaSignAndSendTransaction].supportedTransactionVersions:__classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features[SolanaSignTransaction].supportedTransactionVersions;__classPrivateFieldSet$1(this,_StandardWalletAdapter_supportedTransactionVersions,arraysEqual(et,["legacy"])?null:new Set(et),"f"),SolanaSignTransaction in __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features&&((rt=__classPrivateFieldGet$1(this,_StandardWalletAdapter_account,"f"))!=null&&rt.features.includes(SolanaSignTransaction))?(this.signTransaction=__classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_signTransaction),this.signAllTransactions=__classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_signAllTransactions)):(delete this.signTransaction,delete this.signAllTransactions),SolanaSignMessage in __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features&&((nt=__classPrivateFieldGet$1(this,_StandardWalletAdapter_account,"f"))!=null&&nt.features.includes(SolanaSignMessage))?this.signMessage=__classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_signMessage):delete this.signMessage,SolanaSignIn in __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features?this.signIn=__classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_signIn):delete this.signIn},_StandardWalletAdapter_signTransaction=async function tt(et){try{const rt=__classPrivateFieldGet$1(this,_StandardWalletAdapter_account,"f");if(!rt)throw new WalletNotConnectedError;if(!(SolanaSignTransaction in __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features))throw new WalletConfigError;if(!rt.features.includes(SolanaSignTransaction))throw new WalletAccountError;try{const at=(await __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features[SolanaSignTransaction].signTransaction({account:rt,transaction:isVersionedTransaction$1(et)?et.serialize():new Uint8Array(et.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return isVersionedTransaction$1(et)?VersionedTransaction.deserialize(at):Transaction.from(at)}catch(nt){throw nt instanceof WalletError?nt:new WalletSignTransactionError(nt==null?void 0:nt.message,nt)}}catch(rt){throw this.emit("error",rt),rt}},_StandardWalletAdapter_signAllTransactions=async function tt(et){try{const rt=__classPrivateFieldGet$1(this,_StandardWalletAdapter_account,"f");if(!rt)throw new WalletNotConnectedError;if(!(SolanaSignTransaction in __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features))throw new WalletConfigError;if(!rt.features.includes(SolanaSignTransaction))throw new WalletAccountError;try{const nt=await __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features[SolanaSignTransaction].signTransaction(...et.map(at=>({account:rt,transaction:isVersionedTransaction$1(at)?at.serialize():new Uint8Array(at.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return et.map((at,it)=>{const st=nt[it].signedTransaction;return isVersionedTransaction$1(at)?VersionedTransaction.deserialize(st):Transaction.from(st)})}catch(nt){throw new WalletSignTransactionError(nt==null?void 0:nt.message,nt)}}catch(rt){throw this.emit("error",rt),rt}},_StandardWalletAdapter_signMessage=async function tt(et){try{const rt=__classPrivateFieldGet$1(this,_StandardWalletAdapter_account,"f");if(!rt)throw new WalletNotConnectedError;if(!(SolanaSignMessage in __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features))throw new WalletConfigError;if(!rt.features.includes(SolanaSignMessage))throw new WalletAccountError;try{return(await __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features[SolanaSignMessage].signMessage({account:rt,message:et}))[0].signature}catch(nt){throw new WalletSignMessageError(nt==null?void 0:nt.message,nt)}}catch(rt){throw this.emit("error",rt),rt}},_StandardWalletAdapter_signIn=async function tt(et={}){try{if(!(SolanaSignIn in __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features))throw new WalletConfigError;let rt;try{[rt]=await __classPrivateFieldGet$1(this,_StandardWalletAdapter_wallet,"f").features[SolanaSignIn].signIn(et)}catch(nt){throw new WalletSignInError(nt==null?void 0:nt.message,nt)}if(!rt)throw new WalletSignInError;return __classPrivateFieldGet$1(this,_StandardWalletAdapter_instances,"m",_StandardWalletAdapter_connected).call(this,rt.account),rt}catch(rt){throw this.emit("error",rt),rt}};const isWalletAdapterCompatibleWallet=isWalletAdapterCompatibleStandardWallet;var __classPrivateFieldSet=function(tt,et,rt,nt,at){if(nt==="m")throw new TypeError("Private method is not writable");if(nt==="a"&&!at)throw new TypeError("Private accessor was defined without a setter");if(typeof et=="function"?tt!==et||!at:!et.has(tt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return nt==="a"?at.call(tt,rt):at?at.value=rt:et.set(tt,rt),rt},__classPrivateFieldGet=function(tt,et,rt,nt){if(rt==="a"&&!nt)throw new TypeError("Private accessor was defined without a getter");if(typeof et=="function"?tt!==et||!nt:!et.has(tt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return rt==="m"?nt:rt==="a"?nt.call(tt):nt?nt.value:et.get(tt)},_AppReadyEvent_detail;let wallets;const registered=new Set,listeners={};function getWallets(){if(wallets||(wallets=Object.freeze({register,get,on:on$1}),typeof window>"u"))return wallets;const tt=Object.freeze({register});try{window.addEventListener("wallet-standard:register-wallet",({detail:et})=>et(tt))}catch(et){console.error(`wallet-standard:register-wallet event listener could not be added
`,et)}try{window.dispatchEvent(new AppReadyEvent(tt))}catch(et){console.error(`wallet-standard:app-ready event could not be dispatched
`,et)}return wallets}function register(...tt){var et;return tt=tt.filter(rt=>!registered.has(rt)),tt.length?(tt.forEach(rt=>registered.add(rt)),(et=listeners.register)==null||et.forEach(rt=>guard(()=>rt(...tt))),function(){var nt;tt.forEach(at=>registered.delete(at)),(nt=listeners.unregister)==null||nt.forEach(at=>guard(()=>at(...tt)))}):()=>{}}function get(){return[...registered]}function on$1(tt,et){var rt;return(rt=listeners[tt])!=null&&rt.push(et)||(listeners[tt]=[et]),function(){var at;listeners[tt]=(at=listeners[tt])==null?void 0:at.filter(it=>et!==it)}}function guard(tt){try{tt()}catch(et){console.error(et)}}class AppReadyEvent extends Event{constructor(et){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),_AppReadyEvent_detail.set(this,void 0),__classPrivateFieldSet(this,_AppReadyEvent_detail,et,"f")}get detail(){return __classPrivateFieldGet(this,_AppReadyEvent_detail,"f")}get type(){return"wallet-standard:app-ready"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}_AppReadyEvent_detail=new WeakMap;function DEPRECATED_getWallets(){if(wallets||(wallets=getWallets(),typeof window>"u"))return wallets;const tt=window.navigator.wallets||[];if(!Array.isArray(tt))return console.error("window.navigator.wallets is not an array"),wallets;const{register:et}=wallets,rt=(...nt)=>nt.forEach(at=>guard(()=>at({register:et})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:rt})})}catch{return console.error("window.navigator.wallets could not be set"),wallets}return rt(...tt),wallets}function useStandardWalletAdapters(tt){const et=useConstant(()=>new Set),{get:rt,on:nt}=useConstant(()=>DEPRECATED_getWallets()),[at,it]=reactExports.useState(()=>wrapWalletsWithAdapters(rt()));reactExports.useEffect(()=>{const dt=[nt("register",(...pt)=>it(mt=>[...mt,...wrapWalletsWithAdapters(pt)])),nt("unregister",(...pt)=>it(mt=>mt.filter(yt=>pt.some(Rt=>Rt===yt.wallet))))];return()=>dt.forEach(pt=>pt())},[nt]);const st=usePrevious(at);return reactExports.useEffect(()=>{if(!st)return;const dt=new Set(at);new Set(st.filter(mt=>!dt.has(mt))).forEach(mt=>mt.destroy())},[st,at]),reactExports.useEffect(()=>()=>at.forEach(dt=>dt.destroy()),[]),reactExports.useMemo(()=>[...at,...tt.filter(({name:dt})=>at.some(pt=>pt.name===dt)?(et.has(dt)||(et.add(dt),console.warn(`${dt} was registered as a Standard Wallet. The Wallet Adapter for ${dt} can be removed from your app.`)),!1):!0)],[at,tt,et])}function useConstant(tt){const et=reactExports.useRef();return et.current||(et.current={value:tt()}),et.current.value}function usePrevious(tt){const et=reactExports.useRef();return reactExports.useEffect(()=>{et.current=tt}),et.current}function wrapWalletsWithAdapters(tt){return tt.filter(isWalletAdapterCompatibleWallet).map(et=>new StandardWalletAdapter({wallet:et}))}var Environment;(function(tt){tt[tt.DESKTOP_WEB=0]="DESKTOP_WEB",tt[tt.MOBILE_WEB=1]="MOBILE_WEB"})(Environment||(Environment={}));function isWebView(tt){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(tt)}function getEnvironment({adapters:tt,userAgentString:et}){return tt.some(rt=>rt.name!==SolanaMobileWalletAdapterWalletName&&rt.readyState===WalletReadyState.Installed)?Environment.DESKTOP_WEB:et&&/android/i.test(et)&&!isWebView(et)?Environment.MOBILE_WEB:Environment.DESKTOP_WEB}function getInferredClusterFromEndpoint(tt){return tt?/devnet/i.test(tt)?"devnet":/testnet/i.test(tt)?"testnet":"mainnet-beta":"mainnet-beta"}function WalletProviderBase({children:tt,wallets:et,adapter:rt,isUnloadingRef:nt,onAutoConnectRequest:at,onConnectError:it,onError:st,onSelectWallet:dt}){const pt=reactExports.useRef(!1),[mt,yt]=reactExports.useState(!1),Rt=reactExports.useRef(!1),[Tt,At]=reactExports.useState(!1),[xt,Nt]=reactExports.useState(()=>(rt==null?void 0:rt.publicKey)??null),[Ct,Ot]=reactExports.useState(()=>(rt==null?void 0:rt.connected)??!1),kt=reactExports.useRef(st);reactExports.useEffect(()=>(kt.current=st,()=>{kt.current=void 0}),[st]);const Pt=reactExports.useRef((vt,wt)=>(nt.current||(kt.current?kt.current(vt,wt):(console.error(vt,wt),vt instanceof WalletNotReadyError&&typeof window<"u"&&wt&&window.open(wt.url,"_blank"))),vt)),[Dt,Gt]=reactExports.useState(()=>et.map(vt=>({adapter:vt,readyState:vt.readyState})).filter(({readyState:vt})=>vt!==WalletReadyState.Unsupported));reactExports.useEffect(()=>{Gt(wt=>et.map((bt,$t)=>{const Et=wt[$t];return Et&&Et.adapter===bt&&Et.readyState===bt.readyState?Et:{adapter:bt,readyState:bt.readyState}}).filter(({readyState:bt})=>bt!==WalletReadyState.Unsupported));function vt(wt){Gt(bt=>{const $t=bt.findIndex(({adapter:ct})=>ct===this);if($t===-1)return bt;const{adapter:Et}=bt[$t];return[...bt.slice(0,$t),{adapter:Et,readyState:wt},...bt.slice($t+1)].filter(({readyState:ct})=>ct!==WalletReadyState.Unsupported)})}return et.forEach(wt=>wt.on("readyStateChange",vt,wt)),()=>{et.forEach(wt=>wt.off("readyStateChange",vt,wt))}},[rt,et]);const jt=reactExports.useMemo(()=>Dt.find(vt=>vt.adapter===rt)??null,[rt,Dt]);reactExports.useEffect(()=>{if(!rt)return;const vt=$t=>{Nt($t),pt.current=!1,yt(!1),Ot(!0),Rt.current=!1,At(!1)},wt=()=>{nt.current||(Nt(null),pt.current=!1,yt(!1),Ot(!1),Rt.current=!1,At(!1))},bt=$t=>{Pt.current($t,rt)};return rt.on("connect",vt),rt.on("disconnect",wt),rt.on("error",bt),()=>{rt.off("connect",vt),rt.off("disconnect",wt),rt.off("error",bt),wt()}},[rt,nt]);const Yt=reactExports.useRef(!1);reactExports.useEffect(()=>()=>{Yt.current=!1},[rt]),reactExports.useEffect(()=>{Yt.current||pt.current||Ct||!at||!((jt==null?void 0:jt.readyState)===WalletReadyState.Installed||(jt==null?void 0:jt.readyState)===WalletReadyState.Loadable)||(pt.current=!0,yt(!0),Yt.current=!0,async function(){try{await at()}catch{it()}finally{yt(!1),pt.current=!1}}())},[Ct,at,it,jt]);const tr=reactExports.useCallback(async(vt,wt,bt)=>{if(!rt)throw Pt.current(new WalletNotSelectedError);if(!Ct)throw Pt.current(new WalletNotConnectedError,rt);return await rt.sendTransaction(vt,wt,bt)},[rt,Ct]),er=reactExports.useMemo(()=>rt&&"signTransaction"in rt?async vt=>{if(!Ct)throw Pt.current(new WalletNotConnectedError,rt);return await rt.signTransaction(vt)}:void 0,[rt,Ct]),lr=reactExports.useMemo(()=>rt&&"signAllTransactions"in rt?async vt=>{if(!Ct)throw Pt.current(new WalletNotConnectedError,rt);return await rt.signAllTransactions(vt)}:void 0,[rt,Ct]),It=reactExports.useMemo(()=>rt&&"signMessage"in rt?async vt=>{if(!Ct)throw Pt.current(new WalletNotConnectedError,rt);return await rt.signMessage(vt)}:void 0,[rt,Ct]),ot=reactExports.useMemo(()=>rt&&"signIn"in rt?async vt=>await rt.signIn(vt):void 0,[rt]),ft=reactExports.useCallback(async()=>{if(pt.current||Rt.current||jt!=null&&jt.adapter.connected)return;if(!jt)throw Pt.current(new WalletNotSelectedError);const{adapter:vt,readyState:wt}=jt;if(!(wt===WalletReadyState.Installed||wt===WalletReadyState.Loadable))throw Pt.current(new WalletNotReadyError,vt);pt.current=!0,yt(!0);try{await vt.connect()}catch(bt){throw it(),bt}finally{yt(!1),pt.current=!1}},[it,jt]),ht=reactExports.useCallback(async()=>{if(!Rt.current&&rt){Rt.current=!0,At(!0);try{await rt.disconnect()}finally{At(!1),Rt.current=!1}}},[rt]);return React.createElement(WalletContext.Provider,{value:{autoConnect:!!at,wallets:Dt,wallet:jt,publicKey:xt,connected:Ct,connecting:mt,disconnecting:Tt,select:dt,connect:ft,disconnect:ht,sendTransaction:tr,signTransaction:er,signAllTransactions:lr,signMessage:It,signIn:ot}},tt)}let _userAgent;function getUserAgent(){var tt;return _userAgent===void 0&&(_userAgent=((tt=globalThis.navigator)==null?void 0:tt.userAgent)??null),_userAgent}function getIsMobile(tt){const et=getUserAgent();return getEnvironment({adapters:tt,userAgentString:et})===Environment.MOBILE_WEB}function getUriForAppIdentity(){const tt=globalThis.location;if(tt)return`${tt.protocol}//${tt.host}`}function WalletProvider({children:tt,wallets:et,autoConnect:rt,localStorageKey:nt="walletName",onError:at}){const{connection:it}=useConnection(),st=useStandardWalletAdapters(et),dt=reactExports.useMemo(()=>{if(!getIsMobile(st))return null;const kt=st.find(Pt=>Pt.name===SolanaMobileWalletAdapterWalletName);return kt||new SolanaMobileWalletAdapter({addressSelector:createDefaultAddressSelector(),appIdentity:{uri:getUriForAppIdentity()},authorizationResultCache:createDefaultAuthorizationResultCache(),cluster:getInferredClusterFromEndpoint(it==null?void 0:it.rpcEndpoint),onWalletNotFound:createDefaultWalletNotFoundHandler()})},[st,it==null?void 0:it.rpcEndpoint]),pt=reactExports.useMemo(()=>dt==null||st.indexOf(dt)!==-1?st:[dt,...st],[st,dt]),[mt,yt]=useLocalStorage(nt,getIsMobile(st)?SolanaMobileWalletAdapterWalletName:null),Rt=reactExports.useMemo(()=>pt.find(kt=>kt.name===mt)??null,[pt,mt]),Tt=reactExports.useCallback(kt=>{mt!==kt&&(Rt&&Rt.name!==SolanaMobileWalletAdapterWalletName&&Rt.disconnect(),yt(kt))},[Rt,yt,mt]);reactExports.useEffect(()=>{if(!Rt)return;function kt(){Nt.current||mt===SolanaMobileWalletAdapterWalletName&&getIsMobile(st)||yt(null)}return Rt.on("disconnect",kt),()=>{Rt.off("disconnect",kt)}},[Rt,st,yt,mt]);const At=reactExports.useRef(!1),xt=reactExports.useMemo(()=>{if(!(!rt||!Rt))return async()=>{(rt===!0||await rt(Rt))&&(At.current?await Rt.connect():await Rt.autoConnect())}},[rt,Rt]),Nt=reactExports.useRef(!1);reactExports.useEffect(()=>{if(mt===SolanaMobileWalletAdapterWalletName&&getIsMobile(st)){Nt.current=!1;return}function kt(){Nt.current=!0}return window.addEventListener("beforeunload",kt),()=>{window.removeEventListener("beforeunload",kt)}},[st,mt]);const Ct=reactExports.useCallback(()=>{Rt&&Rt.name!==SolanaMobileWalletAdapterWalletName&&Tt(null)},[Rt,Tt]),Ot=reactExports.useCallback(kt=>{At.current=!0,Tt(kt)},[Tt]);return React.createElement(WalletProviderBase,{wallets:pt,adapter:Rt,isUnloadingRef:Nt,onAutoConnectRequest:xt,onConnectError:Ct,onError:at,onSelectWallet:Ot},tt)}const VERSION$1="@civic/solana-gateway-react:1.0.4";var define_import_meta_env_default$1={VITE_AIRDROP_ADDRESS:"6BVf7qroiW1PzSZGK4zUKSruK6xCqepHXVdtW1P4iDn1",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},extendStatics$2=function(tt,et){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rt,nt){rt.__proto__=nt}||function(rt,nt){for(var at in nt)Object.prototype.hasOwnProperty.call(nt,at)&&(rt[at]=nt[at])},extendStatics$2(tt,et)};function __extends$2(tt,et){if(typeof et!="function"&&et!==null)throw new TypeError("Class extends value "+String(et)+" is not a constructor or null");extendStatics$2(tt,et);function rt(){this.constructor=tt}tt.prototype=et===null?Object.create(et):(rt.prototype=et.prototype,new rt)}var __assign$2=function(){return __assign$2=Object.assign||function(et){for(var rt,nt=1,at=arguments.length;nt<at;nt++){rt=arguments[nt];for(var it in rt)Object.prototype.hasOwnProperty.call(rt,it)&&(et[it]=rt[it])}return et},__assign$2.apply(this,arguments)};function __awaiter$3(tt,et,rt,nt){function at(it){return it instanceof rt?it:new rt(function(st){st(it)})}return new(rt||(rt=Promise))(function(it,st){function dt(yt){try{mt(nt.next(yt))}catch(Rt){st(Rt)}}function pt(yt){try{mt(nt.throw(yt))}catch(Rt){st(Rt)}}function mt(yt){yt.done?it(yt.value):at(yt.value).then(dt,pt)}mt((nt=nt.apply(tt,et||[])).next())})}function __generator$2(tt,et){var rt={label:0,sent:function(){if(it[0]&1)throw it[1];return it[1]},trys:[],ops:[]},nt,at,it,st;return st={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(st[Symbol.iterator]=function(){return this}),st;function dt(mt){return function(yt){return pt([mt,yt])}}function pt(mt){if(nt)throw new TypeError("Generator is already executing.");for(;st&&(st=0,mt[0]&&(rt=0)),rt;)try{if(nt=1,at&&(it=mt[0]&2?at.return:mt[0]?at.throw||((it=at.return)&&it.call(at),0):at.next)&&!(it=it.call(at,mt[1])).done)return it;switch(at=0,it&&(mt=[mt[0]&2,it.value]),mt[0]){case 0:case 1:it=mt;break;case 4:return rt.label++,{value:mt[1],done:!1};case 5:rt.label++,at=mt[1],mt=[0];continue;case 7:mt=rt.ops.pop(),rt.trys.pop();continue;default:if(it=rt.trys,!(it=it.length>0&&it[it.length-1])&&(mt[0]===6||mt[0]===2)){rt=0;continue}if(mt[0]===3&&(!it||mt[1]>it[0]&&mt[1]<it[3])){rt.label=mt[1];break}if(mt[0]===6&&rt.label<it[1]){rt.label=it[1],it=mt;break}if(it&&rt.label<it[2]){rt.label=it[2],rt.ops.push(mt);break}it[2]&&rt.ops.pop(),rt.trys.pop();continue}mt=et.call(tt,rt)}catch(yt){mt=[6,yt],at=0}finally{nt=it=0}if(mt[0]&5)throw mt[1];return{value:mt[0]?mt[1]:void 0,done:!0}}}function __spreadArray$2(tt,et,rt){if(rt||arguments.length===2)for(var nt=0,at=et.length,it;nt<at;nt++)(it||!(nt in et))&&(it||(it=Array.prototype.slice.call(et,0,nt)),it[nt]=et[nt]);return tt.concat(it||Array.prototype.slice.call(et))}typeof SuppressedError=="function"&&SuppressedError;function getDefaultExportFromCjs$2(tt){return tt&&tt.__esModule&&Object.prototype.hasOwnProperty.call(tt,"default")?tt.default:tt}var fetchRetry$2=function(tt,et){if(et=et||{},typeof tt!="function")throw new ArgumentError$2("fetch must be a function");if(typeof et!="object")throw new ArgumentError$2("defaults must be an object");if(et.retries!==void 0&&!isPositiveInteger$2(et.retries))throw new ArgumentError$2("retries must be a positive integer");if(et.retryDelay!==void 0&&!isPositiveInteger$2(et.retryDelay)&&typeof et.retryDelay!="function")throw new ArgumentError$2("retryDelay must be a positive integer or a function returning a positive integer");if(et.retryOn!==void 0&&!Array.isArray(et.retryOn)&&typeof et.retryOn!="function")throw new ArgumentError$2("retryOn property expects an array or function");var rt={retries:3,retryDelay:1e3,retryOn:[]};return et=Object.assign(rt,et),function(at,it){var st=et.retries,dt=et.retryDelay,pt=et.retryOn;if(it&&it.retries!==void 0)if(isPositiveInteger$2(it.retries))st=it.retries;else throw new ArgumentError$2("retries must be a positive integer");if(it&&it.retryDelay!==void 0)if(isPositiveInteger$2(it.retryDelay)||typeof it.retryDelay=="function")dt=it.retryDelay;else throw new ArgumentError$2("retryDelay must be a positive integer or a function returning a positive integer");if(it&&it.retryOn)if(Array.isArray(it.retryOn)||typeof it.retryOn=="function")pt=it.retryOn;else throw new ArgumentError$2("retryOn property expects an array or function");return new Promise(function(mt,yt){var Rt=function(At){var xt=typeof Request<"u"&&at instanceof Request?at.clone():at;tt(xt,it).then(function(Nt){if(Array.isArray(pt)&&pt.indexOf(Nt.status)===-1)mt(Nt);else if(typeof pt=="function")try{return Promise.resolve(pt(At,null,Nt)).then(function(Ct){Ct?Tt(At,null,Nt):mt(Nt)}).catch(yt)}catch(Ct){yt(Ct)}else At<st?Tt(At,null,Nt):mt(Nt)}).catch(function(Nt){if(typeof pt=="function")try{Promise.resolve(pt(At,Nt,null)).then(function(Ct){Ct?Tt(At,Nt,null):yt(Nt)}).catch(function(Ct){yt(Ct)})}catch(Ct){yt(Ct)}else At<st?Tt(At,Nt,null):yt(Nt)})};function Tt(At,xt,Nt){var Ct=typeof dt=="function"?dt(At,xt,Nt):dt;setTimeout(function(){Rt(++At)},Ct)}Rt(0)})}};function isPositiveInteger$2(tt){return Number.isInteger(tt)&&tt>=0}function ArgumentError$2(tt){this.name="ArgumentError",this.message=tt}var fetchBuilder$2=getDefaultExportFromCjs$2(fetchRetry$2),objectToURLParams$2=function(tt){return tt?Object.entries(tt).reduce(function(et,rt){var nt,at=rt[0],it=rt[1];return it==null||it instanceof Array&&it.length===0||it instanceof Object&&Object.keys(it).length===0||it===""?et:__assign$2(__assign$2({},et),(nt={},nt[at]=it.toString(),nt))},{}):{}},LogLevel$2;(function(tt){tt.DEBUG="debug",tt.INFO="info",tt.WARN="warn",tt.ERROR="error"})(LogLevel$2||(LogLevel$2={}));var logLevels$2=[LogLevel$2.DEBUG,LogLevel$2.INFO,LogLevel$2.WARN,LogLevel$2.ERROR],allowLogging$2=function(tt,et){return logLevels$2.indexOf(et)>=logLevels$2.indexOf(tt)},DEFAULT_LOG_LEVEL$2=LogLevel$2.INFO,LoggingProvider$2=function(){function tt(et,rt){if(rt===void 0&&(rt=DEFAULT_LOG_LEVEL$2),this.logger=et,typeof window<"u"){var nt=new URLSearchParams(window.location.search),at=nt.get("logLevel");this.logLevel=at&&logLevels$2.includes(at)?at:rt}else this.logLevel=rt}return tt.prototype.setLogLevel=function(et){this.logLevel=et},tt.prototype.debug=function(et,rt){allowLogging$2(this.logLevel,LogLevel$2.DEBUG)&&this.logger.debug(et,rt)},tt.prototype.info=function(et,rt){allowLogging$2(this.logLevel,LogLevel$2.INFO)&&this.logger.info(et,rt)},tt.prototype.warn=function(et,rt){allowLogging$2(this.logLevel,LogLevel$2.WARN)&&this.logger.warn(et,rt)},tt.prototype.error=function(et,rt){allowLogging$2(this.logLevel,LogLevel$2.ERROR)&&this.logger.error(et,rt)},tt}(),consoleWithOptionalObject$2=function(tt,et,rt){rt?tt(et,rt):tt(et)},LogLocal$2=function(tt){__extends$2(et,tt);function et(rt){return rt===void 0&&(rt=DEFAULT_LOG_LEVEL$2),tt.call(this,console,rt)||this}return et.prototype.setLogLevel=function(rt){this.logLevel=rt},et.prototype.debug=function(rt,nt){consoleWithOptionalObject$2(this.logger.debug,rt,nt)},et.prototype.info=function(rt,nt){consoleWithOptionalObject$2(this.logger.info,rt,nt)},et.prototype.warn=function(rt,nt){consoleWithOptionalObject$2(this.logger.warn,rt,nt)},et.prototype.error=function(rt,nt){consoleWithOptionalObject$2(this.logger.error,rt,nt)},et}(LoggingProvider$2),localLogger$2=new LoggingProvider$2(new LogLocal$2),prefixDebug$2=function(tt,et){return function(rt,nt){return nt===void 0&&(nt=null),localLogger$2.debug("[".concat(et,"][").concat(tt,"] ").concat(rt),nt)}},prefixError$2=function(tt,et){return function(rt,nt){return nt===void 0&&(nt=null),localLogger$2.error("[".concat(et,"][").concat(tt,"] ").concat(rt),nt)}},prefixWarn$2=function(tt,et){return function(rt,nt){return nt===void 0&&(nt=null),localLogger$2.warn("[".concat(et,"][").concat(tt,"] ").concat(rt),nt)}},prefixInfo$2=function(tt,et){return function(rt,nt){return nt===void 0&&(nt=null),localLogger$2.info("[".concat(et,"][").concat(tt,"] ").concat(rt),nt)}},prefixLogger$2=function(tt,et){return et===void 0&&(et="GatewayClientCore"),{setLogLevel:function(rt){var nt;return(nt=localLogger$2==null?void 0:localLogger$2.setLogLevel)===null||nt===void 0?void 0:nt.call(localLogger$2,rt)},debug:prefixDebug$2(tt,et),error:prefixError$2(tt,et),warn:prefixWarn$2(tt,et),info:prefixInfo$2(tt,et)}},GatekeeperAPIStatus$2;(function(tt){tt[tt.REQUESTING=0]="REQUESTING",tt[tt.NOT_REQUESTED=404]="NOT_REQUESTED",tt[tt.REQUESTED=202]="REQUESTED",tt[tt.ISSUED=200]="ISSUED",tt[tt.ISSUED_EXPIRY_APPROACHING=205]="ISSUED_EXPIRY_APPROACHING",tt[tt.ISSUED_EXPIRED=426]="ISSUED_EXPIRED",tt[tt.LOCATION_NOT_SUPPORTED=401]="LOCATION_NOT_SUPPORTED",tt[tt.REJECTED=403]="REJECTED",tt[tt.VPN_NOT_SUPPORTED=421]="VPN_NOT_SUPPORTED",tt[tt.ISSUED_LOCATION_NOT_SUPPORTED=412]="ISSUED_LOCATION_NOT_SUPPORTED",tt[tt.ISSUED_VPN_NOT_SUPPORTED=451]="ISSUED_VPN_NOT_SUPPORTED",tt[tt.SERVER_FAILURE=500]="SERVER_FAILURE",tt[tt.REQUESTED_RETRIES_EXHAUSTED=408]="REQUESTED_RETRIES_EXHAUSTED"})(GatekeeperAPIStatus$2||(GatekeeperAPIStatus$2={}));var GATEKEEPER_BASE_ENDPOINTS$2={local:"http://localhost:3001/local",test:"https://dev-gatekeeper-api.civic.com",dev:"https://dev-gatekeeper-api.civic.com",preprod:"https://preprod-gatekeeper-api.civic.com",prod:"https://gatekeeper-api.civic.com"},logDebug$2$2=prefixLogger$2("GatekeeperClient").debug,logWarn$3=prefixLogger$2("GatekeeperClient").warn,logError$3$2=prefixLogger$2("GatekeeperClient").error,getGatekeeperEndpoint$2=function(tt,et){var rt=GATEKEEPER_BASE_ENDPOINTS$2[tt];return rt||(logWarn$3("No Gatekeeper endpoint for stage ".concat(tt," . Using dev endpoint.")),rt=GATEKEEPER_BASE_ENDPOINTS$2.dev),"".concat(rt,"/v1/token/").concat(et)},withoutUndefined$2=function(tt){return Object.fromEntries(Object.entries(tt).filter(function(et){var rt=et[1];return rt!==void 0}))},GatekeeperClient$2=function(){function tt(et,rt){var nt=this;this.initConfig=et,this.abortController=et.abortController,this.baseUrl=et.baseUrl||getGatekeeperEndpoint$2(et.stage,et.chainType),this.queryParams=et.queryParams,this.headers=objectToURLParams$2(__assign$2(__assign$2({},et.headers),{"x-civic-flowid":rt})),this.fetchImplementation=et.fetchImplementation;var at=et.numRetries;this.defaultRetryParams={retries:at,retryOn:function(it,st,dt){return __awaiter$3(nt,void 0,void 0,function(){var pt,mt,yt;return __generator$2(this,function(Rt){switch(Rt.label){case 0:return dt?[4,dt.clone().json()]:[3,2];case 1:return mt=Rt.sent(),[3,3];case 2:mt={},Rt.label=3;case 3:if(pt=mt,dt&&dt.status>=500){if(!((yt=pt==null?void 0:pt.message)===null||yt===void 0)&&yt.includes("NO_AUTO_RETRY"))return[2,!1];if(it>=at)throw logError$3$2("retryOn error run out of retries",{error:st,attempt:it,retries:at,response:dt,body:pt}),st;return logDebug$2$2("retrying on 5xx error",{error:st,attempt:it,retries:at,response:dt,body:pt}),[2,!0]}return logDebug$2$2("retryOn returning false as error was not a 5xx error"),[2,!1]}})})},retryDelay:function(it){var st=10+Math.pow(2,it)*1e3;return logDebug$2$2("retryDelay",{attempt:it+1,retryDelay:st}),st}},this.fetchWithRetry=fetchBuilder$2(this.fetchImplementation,this.defaultRetryParams)}return tt.prototype.setFlowId=function(et){this.headers=objectToURLParams$2(__assign$2(__assign$2({},this.headers||{}),{"x-civic-flowid":et}))},tt.prototype.instanceName=function(){var et,rt;return(rt=(et=this.queryParams)===null||et===void 0?void 0:et.gatekeeperNetworkAddress)===null||rt===void 0?void 0:rt.substring(0,6)},tt.prototype.abort=function(){var et,rt;logDebug$2$2("abort ".concat((rt=(et=this.queryParams)===null||et===void 0?void 0:et.gatekeeperNetworkAddress)===null||rt===void 0?void 0:rt.substring(0,6))),this.abortController.abort()},tt.prototype.addQueryParams=function(et){this.queryParams&&Object.entries(this.queryParams).forEach(function(rt){var nt=rt[0],at=rt[1];et.searchParams.append(nt,at)})},tt.prototype.continueIfNotAborted=function(et){return logDebug$2$2("continueIfNotAborted ".concat(this.instanceName()," this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted),this.queryParams),this.abortController.signal.aborted?null:et()},tt.prototype.urlForWallet=function(et){et===void 0&&(et=this.initConfig.walletAddress);var rt=new URL("".concat(this.baseUrl,"/").concat(et));return this.addQueryParams(rt),rt.toString()},tt.prototype.getGatekeeperRecordWithPayload=function(){return __awaiter$3(this,arguments,void 0,function(et){var rt=this;return et===void 0&&(et=this.initConfig.walletAddress),__generator$2(this,function(nt){return logDebug$2$2("url: ".concat(this.urlForWallet(et)," getGatekeeperRecordWithPayload: ").concat(this.instanceName(),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted)),[2,this.fetchWithRetry(this.urlForWallet(et),{method:"GET",headers:this.headers,signal:this.abortController.signal}).then(this.continueIfNotAborted(function(){return function(at){return __awaiter$3(rt,void 0,void 0,function(){var it;return __generator$2(this,function(st){switch(st.label){case 0:return it={state:GatekeeperAPIStatus$2[GatekeeperAPIStatus$2[at.status]]},[4,at.json()];case 1:return[2,(it.payload=st.sent(),it)]}})})}})).catch(function(at){if(at.name==="AbortError")return logDebug$2$2("error due to abort controller signal aborted"),null;throw at})]})})},tt.prototype.getGatekeeperStatus=function(){return __awaiter$3(this,arguments,void 0,function(et){return et===void 0&&(et=this.initConfig.walletAddress),__generator$2(this,function(rt){return logDebug$2$2("getGatekeeperStatus: ".concat(this.instanceName(),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted)),[2,this.fetchWithRetry(this.urlForWallet(et),{method:"HEAD",headers:this.headers,signal:this.abortController.signal}).then(this.continueIfNotAborted(function(){return function(nt){var at=nt.status;return at}})).catch(function(nt){if(logError$3$2("getGatekeeperStatus",nt),nt.name==="AbortError")return logDebug$2$2("error due to abort controller signal aborted"),GatekeeperAPIStatus$2.SERVER_FAILURE;throw nt})]})})},tt.prototype.requestGatewayTokenFromGatekeeper=function(et){return __awaiter$3(this,arguments,void 0,function(rt){var nt,at,it=this,st=rt.payload,dt=rt.proof,pt=rt.payer;return __generator$2(this,function(mt){return logDebug$2$2("requestGatewayTokenFromGatekeeper: ".concat(this.instanceName(),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted),__assign$2(__assign$2({},st),{proof:dt})),nt=withoutUndefined$2(__assign$2(__assign$2({},st),{proof:dt,address:this.initConfig.walletAddress,payer:pt})),logDebug$2$2("requestGatewayTokenFromGatekeeper Requesting a new gatekeeper token...",nt),at=new URL(this.baseUrl),this.addQueryParams(at),[2,this.fetchWithRetry(at.toString(),{method:"POST",headers:__assign$2(__assign$2({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(nt),signal:this.abortController.signal}).then(this.continueIfNotAborted(function(){return function(yt){return __awaiter$3(it,void 0,void 0,function(){var Rt,Tt;return __generator$2(this,function(At){switch(At.label){case 0:return Rt=yt.status,[4,yt.json()];case 1:return Tt=At.sent(),[2,__assign$2(__assign$2({},Tt),{state:GatekeeperAPIStatus$2[GatekeeperAPIStatus$2[Rt]],status:Rt})]}})})}})).catch(function(yt){if(logError$3$2("requestGatewayTokenFromGatekeeper",yt),yt.name==="AbortError")return logDebug$2$2("error due to abort controller signal aborted"),null;throw yt})]})})},tt.prototype.refreshToken=function(et){return __awaiter$3(this,arguments,void 0,function(rt){var nt,at=this,it,st,dt=rt.payload,pt=rt.proof,mt=rt.payer;return __generator$2(this,function(yt){return logDebug$2$2("refreshToken: ".concat(this.urlForWallet(this.initConfig.walletAddress)).concat((st=(it=this.queryParams)===null||it===void 0?void 0:it.gatekeeperNetworkAddress)===null||st===void 0?void 0:st.substring(0,6),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted),{payload:dt}),nt=withoutUndefined$2(__assign$2(__assign$2({},dt),{proof:pt,request:"refresh",payer:mt})),[2,this.fetchWithRetry(this.urlForWallet(this.initConfig.walletAddress),{method:"PATCH",headers:__assign$2(__assign$2({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(nt),signal:this.abortController.signal}).then(function(Rt){return __awaiter$3(at,void 0,void 0,function(){var Tt,At;return __generator$2(this,function(xt){switch(xt.label){case 0:return Tt=Rt.status,[4,Rt.json()];case 1:return At=xt.sent(),[2,__assign$2(__assign$2({},At),{state:GatekeeperAPIStatus$2[GatekeeperAPIStatus$2[Tt]],status:Tt})]}})})}).catch(function(Rt){if(logError$3$2("refreshToken",Rt),Rt.name==="AbortError")return logDebug$2$2("error due to abort controller signal aborted"),null;throw Rt})]})})},tt.prototype.fetchFreshTransaction=function(et){return __awaiter$3(this,arguments,void 0,function(rt){var nt,at,it=this,st,dt,pt=rt.payer;return __generator$2(this,function(mt){return nt=new URL("".concat(this.baseUrl,"/").concat(this.initConfig.walletAddress,"/transaction")),this.addQueryParams(nt),logDebug$2$2("fetchFreshTransaction: ".concat(nt.toString()).concat((dt=(st=this.queryParams)===null||st===void 0?void 0:st.gatekeeperNetworkAddress)===null||dt===void 0?void 0:dt.substring(0,6),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted)),at=withoutUndefined$2({payer:pt}),[2,this.fetchWithRetry("".concat(nt.toString()),{method:"POST",headers:__assign$2(__assign$2({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(at),signal:this.abortController.signal}).then(function(yt){return __awaiter$3(it,void 0,void 0,function(){var Rt,Tt;return __generator$2(this,function(At){switch(At.label){case 0:return Rt=yt.status,[4,yt.json()];case 1:return Tt=At.sent(),[2,__assign$2(__assign$2({},Tt),{state:GatekeeperAPIStatus$2[GatekeeperAPIStatus$2[Rt]],status:Rt})]}})})}).catch(function(yt){if(logError$3$2("fetchFreshTransaction",yt),yt.name==="AbortError")return logDebug$2$2("error due to abort controller signal aborted"),null;throw yt})]})})},tt.prototype.updateTransactionStatus=function(et){return __awaiter$3(this,arguments,void 0,function(rt,nt){var at,it,st=this;return nt===void 0&&(nt="sent"),__generator$2(this,function(dt){return at=new URL("".concat(this.baseUrl,"/").concat(this.initConfig.walletAddress,"/transaction/").concat(rt)),this.addQueryParams(at),it={status:nt},[2,this.fetchWithRetry(at.toString(),{method:"PATCH",headers:__assign$2(__assign$2({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(it),signal:this.abortController.signal}).then(this.continueIfNotAborted(function(){return function(){return __awaiter$3(st,void 0,void 0,function(){return __generator$2(this,function(pt){return logDebug$2$2("updateTransactionStatus successful",{txId:rt,url:at,wallet:this.initConfig.walletAddress}),[2]})})}})).catch(function(pt){if(pt.name==="AbortError")return logDebug$2$2("error due to abort controller signal aborted"),null;throw logError$3$2("updateTransactionStatus",pt),pt})]})})},tt}(),State$2;(function(tt){tt.ACTIVE="ACTIVE",tt.REVOKED="REVOKED",tt.FROZEN="FROZEN"})(State$2||(State$2={}));var TokenState$2;(function(tt){tt.REQUESTED="REQUESTED",tt.ACTIVE="ACTIVE",tt.REVOKED="REVOKED",tt.FROZEN="FROZEN",tt.REJECTED="REJECTED"})(TokenState$2||(TokenState$2={}));var ChainType$2;(function(tt){tt.SOLANA="solana",tt.ETHEREUM="ethereum",tt.CASPER="casper"})(ChainType$2||(ChainType$2={}));var SignatureMethod$2;(function(tt){tt[tt.TRANSACTION=0]="TRANSACTION",tt[tt.MESSAGE=1]="MESSAGE"})(SignatureMethod$2||(SignatureMethod$2={}));var ErrorCode$2={INSUFFICIENT_FUNDS:"0x1",SIGN_TRANSACTION_ERROR:"0x2",SIGN_TRANSACTION_USER_REJECTED_ERROR:"0x21",SIGN_TRANSACTION_UNKNOWN_ERROR:"0x22",SEND_TRANSACTION_ERROR:"0x3",CUSTOM_HANDLE_TRANSACTION_ERROR:"0x4",POWO_ERROR:"0x5",CHAIN_CONFIRMATION_TIMEOUT_ERROR:"0x6",EXPECTED_GATEKEEPER_RECORD:"0x7"},ChainError$2=function(tt){__extends$2(et,tt);function et(rt,nt,at){at===void 0&&(at=localLogger$2);var it=tt.call(this,rt)||this;return it.errorCode=nt,at==null||at.error("ChainError: ".concat(rt," throwing code ").concat(nt)),Object.setPrototypeOf(it,et.prototype),it}return et}(Error),ChainConfirmationTimeout$2=function(tt){__extends$2(et,tt);function et(rt,nt){nt===void 0&&(nt=ErrorCode$2.CHAIN_CONFIRMATION_TIMEOUT_ERROR);var at=tt.call(this,rt)||this;return at.errorCode=nt,localLogger$2.error("ChainConfirmationTimeout: ".concat(rt," throwing code ").concat(nt)),Object.setPrototypeOf(at,et.prototype),at}return et}(Error),GatewayStatus$3;(function(tt){tt.UNKNOWN="UNKNOWN",tt.CHECKING="CHECKING",tt.NOT_REQUESTED="NOT_REQUESTED",tt.COLLECTING_USER_INFORMATION="COLLECTING_USER_INFORMATION",tt.IN_REVIEW="IN_REVIEW",tt.REJECTED="REJECTED",tt.REVOKED="REVOKED",tt.FROZEN="FROZEN",tt.ACTIVE="ACTIVE",tt.ERROR="ERROR",tt.LOCATION_NOT_SUPPORTED="LOCATION_NOT_SUPPORTED",tt.VPN_NOT_SUPPORTED="VPN_NOT_SUPPORTED",tt.REFRESH_TOKEN_REQUIRED="REFRESH_TOKEN_REQUIRED",tt.VALIDATING_USER_INFORMATION="VALIDATING_USER_INFORMATION",tt.USER_INFORMATION_VALIDATED="USER_INFORMATION_VALIDATED",tt.USER_INFORMATION_REJECTED="USER_INFORMATION_REJECTED"})(GatewayStatus$3||(GatewayStatus$3={}));var ExtendedGatewayStatus$2;(function(tt){tt.AWAITING_OWNER_TRANSACTION="AWAITING_OWNER_TRANSACTION",tt.CHAIN_TIMEOUT_ERROR="CHAIN_TIMEOUT_ERROR",tt.CONFIRM_OWNER_TRANSACTION="CONFIRM_OWNER_TRANSACTION",tt.CHAIN_TRANSACTION_ERROR="CHAIN_TRANSACTION_ERROR",tt.TOKEN_IN_PARTNER_REVIEW="TOKEN_IN_PARTNER_REVIEW",tt.TOKEN_REFRESH_IN_REVIEW="TOKEN_REFRESH_IN_REVIEW",tt.RESTART="RESTART",tt.CHAIN_SIGN_MESSAGE_ERROR="CHAIN_SIGN_MESSAGE_ERROR",tt.ISSUANCE_CLIENT_PAYER_REQUESTED="ISSUANCE_CLIENT_PAYER_REQUESTED",tt.ISSUANCE_AWAITING_TRANSACTION_SEND="ISSUANCE_AWAITING_TRANSACTION_SEND",tt.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND="ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND",tt.ISSUANCE_AWAITING_ON_CHAIN_TOKEN="ISSUANCE_AWAITING_ON_CHAIN_TOKEN",tt.ISSUANCE_RESTART_DATA_COLLECTION="ISSUANCE_RESTART_DATA_COLLECTION",tt.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX="ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX",tt.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX="ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX",tt.ISSUANCE_CLIENT_SENDS_START_NEW_TX="ISSUANCE_CLIENT_SENDS_START_NEW_TX",tt.REFRESH_USER_INFORMATION_VALIDATED="REFRESH_USER_INFORMATION_VALIDATED",tt.REFRESH_CLIENT_PAYER_REQUESTED="REFRESH_CLIENT_PAYER_REQUESTED",tt.REFRESH_IN_REVIEW="REFRESH_IN_REVIEW",tt.REFRESH_AWAITING_TRANSACTION_SEND="REFRESH_AWAITING_TRANSACTION_SEND",tt.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND="REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND",tt.REFRESH_AWAITING_ON_CHAIN_TOKEN="REFRESH_AWAITING_ON_CHAIN_TOKEN",tt.RESTART_REFRESH="RESTART_REFRESH",tt.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX="REFRESH_CLIENT_SENDS_REQUEST_NEW_TX",tt.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX="REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX",tt.REFRESH_CLIENT_SENDS_START_NEW_TX="REFRESH_CLIENT_SENDS_START_NEW_TX"})(ExtendedGatewayStatus$2||(ExtendedGatewayStatus$2={}));var GKN_SERVICE_ENDPOINTS$1={local:"https://dev.api.civic.com/gkn-dev",test:"https://dev.api.civic.com/gkn-dev",dev:"https://dev.api.civic.com/gkn-dev",preprod:"https://dev.api.civic.com/gkn-preprod",prod:"https://api.civic.com/gkn"},getGatekeeperNetworkData$1=function(tt,et){return __awaiter$3(void 0,void 0,void 0,function(){var rt,nt;return __generator$2(this,function(at){switch(at.label){case 0:if(!GKN_SERVICE_ENDPOINTS$1[tt])throw new Error("No Gatekeeper Network Service endpoint found for stage ".concat(tt));return[4,fetch("".concat(GKN_SERVICE_ENDPOINTS$1[tt],"/public/gatekeeperNetwork/").concat(et))];case 1:return rt=at.sent(),[4,rt.json()];case 2:if(nt=at.sent(),(nt==null?void 0:nt.id)!==et)throw new Error("Could not fetch data from Gatekeeper Network Service for ".concat(et));return[2,nt]}})})},FlowType$2;(function(tt){tt.ISSUANCE="issuance",tt.REFRESH="refresh",tt.STATUS="status",tt.REVOCATION="revocation",tt.UNFREEZE="unfreeze"})(FlowType$2||(FlowType$2={}));var FlowStatus$2;(function(tt){tt.IN_PROGRESS="in-progress",tt.RESULT="result",tt.FINISHED="finished"})(FlowStatus$2||(FlowStatus$2={}));let getRandomValues$1;const rnds8$1=new Uint8Array(16);function rng$1(){if(!getRandomValues$1&&(getRandomValues$1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues$1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues$1(rnds8$1)}const byteToHex$2=[];for(let tt=0;tt<256;++tt)byteToHex$2.push((tt+256).toString(16).slice(1));function unsafeStringify$1(tt,et=0){return byteToHex$2[tt[et+0]]+byteToHex$2[tt[et+1]]+byteToHex$2[tt[et+2]]+byteToHex$2[tt[et+3]]+"-"+byteToHex$2[tt[et+4]]+byteToHex$2[tt[et+5]]+"-"+byteToHex$2[tt[et+6]]+byteToHex$2[tt[et+7]]+"-"+byteToHex$2[tt[et+8]]+byteToHex$2[tt[et+9]]+"-"+byteToHex$2[tt[et+10]]+byteToHex$2[tt[et+11]]+byteToHex$2[tt[et+12]]+byteToHex$2[tt[et+13]]+byteToHex$2[tt[et+14]]+byteToHex$2[tt[et+15]]}const randomUUID$1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var native$1={randomUUID:randomUUID$1};function v4$1(tt,et,rt){if(native$1.randomUUID&&!et&&!tt)return native$1.randomUUID();tt=tt||{};const nt=tt.random||(tt.rng||rng$1)();return nt[6]=nt[6]&15|64,nt[8]=nt[8]&63|128,unsafeStringify$1(nt)}var CivicPassMessageEventResult$2;(function(tt){tt.SUCCESS="success",tt.FAILURE="failure",tt.CANCELLED="cancelled",tt.IN_PROGRESS="inProgress",tt.ERROR="error"})(CivicPassMessageEventResult$2||(CivicPassMessageEventResult$2={}));var CivicPassMessageAction$2;(function(tt){tt.ISSUANCE="issuance",tt.CONFIRM_TRANSACTION="confirmTransaction",tt.TOKEN_FROZEN="tokenFrozen",tt.TOKEN_ACTIVE="tokenActive",tt.TOKEN_REVOKED="tokenRevoked",tt.TOKEN_REJECTED="tokenRejected",tt.TOKEN_IN_REVIEW="tokenInReview",tt.TOKEN_REFRESH_IN_REVIEW="tokenRefreshInReview",tt.TOKEN_IN_PARTNER_REVIEW="tokenInPartnerReview",tt.FAILED_IP_CHECK="failedIpCheck",tt.FAILED_VPN_CHECK="failedVpnCheck",tt.REFRESH="refresh",tt.STATUS="status",tt.ERROR="error",tt.CHAIN_ERROR="chainError",tt.SIGN_TRANSACTION="signTransaction",tt.AWAITING_TRANSACTION_CONFIRMATION="awaitingTransactionConfirmation",tt.START_PRE_APPROVED_TRANSACTION="startPreApprovedTransaction"})(CivicPassMessageAction$2||(CivicPassMessageAction$2={}));var ValidationStatus$2;(function(tt){tt.COLLECTING="COLLECTING",tt.PROCESSING="PROCESSING",tt.IN_REVIEW="IN_REVIEW",tt.COMPLETED="COMPLETED",tt.FAILED="FAILED",tt.NOT_FOUND="NOT_FOUND"})(ValidationStatus$2||(ValidationStatus$2={}));var CivicSignEventTypeResponse$2;(function(tt){tt.RESPONSE_PUBLIC_KEY="RESPONSE_PUBLIC_KEY",tt.RESPONSE_DID="RESPONSE_DID",tt.RESPONSE_SIGNED_PROOF="RESPONSE_SIGNED_PROOF",tt.RESPONSE_SIGNED_MESSAGE="RESPONSE_SIGNED_MESSAGE"})(CivicSignEventTypeResponse$2||(CivicSignEventTypeResponse$2={}));var CivicSignEventTypeRequest$2;(function(tt){tt.REQUEST_PUBLIC_KEY="REQUEST_PUBLIC_KEY",tt.REQUEST_DID="REQUEST_DID",tt.REQUEST_SIGNED_PROOF="REQUEST_SIGNED_PROOF",tt.REQUEST_SIGNED_MESSAGE="REQUEST_SIGNED_MESSAGE"})(CivicSignEventTypeRequest$2||(CivicSignEventTypeRequest$2={}));var ListenerManager$2=function(){function tt(et,rt,nt,at){at===void 0&&(at=prefixLogger$2("ListenerManager")),this.messageEventInterface=et,this.chainImplementation=rt,this.instanceId=nt,this.log=at,this.messageListeners={}}return tt.prototype.registerCivicPassListener=function(et){var rt=this,nt=function(at){var it,st;if(!at.data){rt.log.error("No data in response");return}if(((it=at.data)===null||it===void 0?void 0:it.instanceId)!==rt.instanceId){!((st=at.data)===null||st===void 0)&&st.instanceId&&at.data.source!=="@devtools-page"&&rt.log.debug("instanceId for different instance",{event:at.data,instanceId:rt.instanceId});return}Object.values(CivicPassMessageAction$2).includes(at.data.action)&&(rt.log.debug("received CivicPassListener postMessage",at.data),et(at.data))};this.log.debug("Adding event listener for civic-pass events"),this.messageEventInterface.addMessageEventListener(nt),this.messageListeners.civicPass=nt},tt.prototype.registerCivicSignListener=function(et){var rt=this,nt=function(at){var it,st;if(!at.data){rt.log.error("No data in response");return}if(((it=at.data)===null||it===void 0?void 0:it.instanceId)!==rt.instanceId){!((st=at.data)===null||st===void 0)&&st.instanceId&&at.data.source!=="@devtools-page"&&rt.log.debug("instanceId for different instance",{event:at.data,instanceId:rt.instanceId});return}Object.values(CivicSignEventTypeRequest$2).includes(at.data.request)&&(rt.log.debug("received CivicSignListener postMessage",at.data),et(at.data))};this.log.debug("Adding event listener for civic-sign events"),this.messageEventInterface.addMessageEventListener(nt),this.messageListeners.civicSign=nt},tt.prototype.registerOnChainListeners=function(et){this.chainImplementation.on("TOKEN_CREATED",et),this.chainImplementation.on("TOKEN_CHANGED",et)},tt.prototype.unregisterAllListeners=function(){var et=this;Object.entries(this.messageListeners).forEach(function(rt){var nt=rt[0],at=rt[1];et.log.debug("Removing message event listener",nt),et.messageEventInterface.removeMessageEventListener(at),delete et.messageListeners[nt]})},tt}(),InputStatus$2;(function(tt){tt.IN_PROGRESS="IN_PROGRESS",tt.COMPLETE="COMPLETE",tt.ERROR="ERROR",tt.RECEIVED="RECEIVED",tt.RESPONDED="RESPONDED"})(InputStatus$2||(InputStatus$2={}));var getPayer$2=function(tt){var et=tt.gatekeeperSendsTransaction,rt=tt.payer,nt=tt.wallet;if(!et)return rt||(nt==null?void 0:nt.address)},logDebug$1$1=prefixLogger$2("remoteSign").debug,logError$2$2=prefixLogger$2("remoteSign").error,eventEmitter$2=function(tt){return{postMessage:function(et,rt){tt.postMessage(et,rt)}}},RemoteSignWindowEventEmitter$2=function(){function tt(et,rt){this.instanceId=rt,this.postMessageTarget=et}return tt.prototype.sendPublicKey=function(et){this.emit({event:CivicSignEventTypeResponse$2.RESPONSE_PUBLIC_KEY,data:et})},tt.prototype.sendDid=function(et){this.emit({event:CivicSignEventTypeResponse$2.RESPONSE_DID,data:et})},tt.prototype.sendSignedProof=function(et,rt){this.emit({event:CivicSignEventTypeResponse$2.RESPONSE_SIGNED_PROOF,data:{proof:et,signatureMethod:rt}})},tt.prototype.sendSignedMessage=function(et){this.emit({event:CivicSignEventTypeResponse$2.RESPONSE_SIGNED_MESSAGE,data:et})},tt.prototype.emit=function(et){this.postMessageTarget.postMessage(__assign$2(__assign$2({},et),{instanceId:this.instanceId}),"*")},tt}(),handleRemoteSignEvent$2=function(tt,et,rt){return __awaiter$3(void 0,void 0,void 0,function(){var nt,at,it,st,dt,pt;return __generator$2(this,function(mt){switch(mt.label){case 0:return nt=rt.wallet,at=rt.chainImplementation,st=rt.ownerDids,st?[3,2]:[4,at.ownerDids()];case 1:st=mt.sent(),mt.label=2;case 2:return it=st,logDebug$1$1("handleRemoteSignEvent ".concat(tt.request),{remoteSignerInst:et,wallet:nt,chainImplDids:it}),Object.values(CivicSignEventTypeRequest$2).includes(tt.request)?tt.request===CivicSignEventTypeRequest$2.REQUEST_PUBLIC_KEY?(et==null||et.sendPublicKey(nt.address),[2,nt.address]):tt.request===CivicSignEventTypeRequest$2.REQUEST_DID?(et==null||et.sendDid(it==null?void 0:it[0]),[2,it==null?void 0:it[0]]):tt.request!==CivicSignEventTypeRequest$2.REQUEST_SIGNED_PROOF?[3,4]:[4,at.proveWalletOwnership(tt.payload)]:(logError$2$2("No result from remote sign event"),[2]);case 3:return dt=mt.sent(),et==null||et.sendSignedProof(dt.proof,dt.signatureMethod),[2,{proof:dt.proof,signatureMethod:dt.signatureMethod}];case 4:return tt.request!==CivicSignEventTypeRequest$2.REQUEST_SIGNED_MESSAGE?[3,6]:tt.payload?[4,at.proveWalletOwnership(tt.payload)]:[3,6];case 5:return pt=mt.sent(),et==null||et.sendSignedMessage(Buffer.from(pt.proof)),[2,pt];case 6:return[2]}})})},OrchestratorFlow$1=function(){function tt(et,rt,nt){this.gatewayCoreStore=et,this.gatekeeperClient=rt,this.abortController=nt,this.log=prefixLogger$2("OrchestratorFlow")}return tt.prototype.setGatekeeperClientFlowId=function(){var et,rt,nt,at,it=this.gatewayCoreStore.getState();if(!(!((rt=(et=it.output)===null||et===void 0?void 0:et.flowParameters)===null||rt===void 0)&&rt.flowId))throw this.log.error("Missing flowId",it),new Error("Missing flowId");this.gatekeeperClient.setFlowId((at=(nt=it.output)===null||nt===void 0?void 0:nt.flowParameters)===null||at===void 0?void 0:at.flowId)},tt}(),DEFAULT_EXPECT_TOKEN_TIMEOUT_SECONDS$2=120,DEFAULT_MAX_CLIENT_SENDS_RETRIES$2=3,isApproachingExpiry$2=function(tt,et){var rt=Math.floor(Date.now()/1e3);return tt-rt<=et},hasExpired$2=function(tt){if(!tt)return!1;var et=Math.floor(Date.now()/1e3);return et>=tt},isTokenRefreshRequired$2=function(tt){var et=tt.gatewayToken,rt=tt.tokenExpirationMarginSeconds,nt=tt.forceRequireRefresh,at=et||{},it=at.expiryTime,st=at.state,dt=st===State$2.ACTIVE;return!it||!dt?!1:!!nt||hasExpired$2(it)||isApproachingExpiry$2(it,rt)},MAX_ALLOWED_TIMEOUT$2=2147483647,nowSeconds$2=function(){return Math.floor(Date.now()/1e3)},getTokenRefreshIntervalMilliseconds$2=function(tt,et){var rt=tt-nowSeconds$2()-et,nt=rt>0?rt*1e3:0;return nt>=MAX_ALLOWED_TIMEOUT$2?MAX_ALLOWED_TIMEOUT$2-1:nt},Issuance$2=function(tt){__extends$2(et,tt);function et(rt,nt,at,it,st){st===void 0&&(st=DEFAULT_EXPECT_TOKEN_TIMEOUT_SECONDS$2);var dt=tt.call(this,rt,at,it)||this;return dt.gatewayCoreStore=rt,dt.chainImplementation=nt,dt.gatekeeperClient=at,dt.abortController=it,dt.expectTokenTimeoutSeconds=st,dt.timers={},dt.log=prefixLogger$2("Issuance instance with expectTokenTimeoutSeconds ".concat(st)),dt}return et.prototype.sendTransaction=function(){return __awaiter$3(this,void 0,void 0,function(){var rt,nt=this,at;return __generator$2(this,function(it){if(rt=this.gatewayCoreStore.getState(),!(!((at=rt.inputs.gatekeeperRecord.received)===null||at===void 0)&&at.transaction))throw this.log.error("Missing gatekeeperRecord payload"),new Error("Missing gatekeeperRecord payload");if(this.gatewayCoreStore.setState(function(st){st.internal.chainTransaction||(st.internal.chainTransaction={attempts:0}),st.internal.chainTransaction.attempts!==void 0&&(st.internal.chainTransaction.attempts+=1),st.internal.chainTransaction.sentTxId=void 0,st.internal.errors.expectedOnChainToken=null,st.inputs.gatewayToken.status=InputStatus$2.COMPLETE,st.internal.chainTransaction.error=void 0,st.inputs.civicPass.received=null}),this.abortExpectedTokenTimer(),!this.chainImplementation.handleTransaction)throw this.log.error("No handleTransaction defined on chainImplementation."),new Error("No handleTransaction defined on chainImplementation");return this.chainImplementation.handleTransaction(rt.inputs.gatekeeperRecord.received.transaction).then(function(st){nt.abortController.signal.aborted||nt.gatewayCoreStore.setState(function(dt){dt.internal.chainTransaction||(dt.internal.chainTransaction={}),nt.gatekeeperClient.updateTransactionStatus(st),dt.internal.chainTransaction.sentTxId=st})}).catch(function(st){nt.gatewayCoreStore.setState(function(dt){dt.internal.chainTransaction||(dt.internal.chainTransaction={}),dt.internal.chainTransaction.error=st})}),[2]})})},et.prototype.gatekeeperRequest=function(rt,nt){return __awaiter$3(this,void 0,void 0,function(){var at,it,st;return __generator$2(this,function(dt){if(!(!((at=nt.inputs.civicPass.received)===null||at===void 0)&&at.payload))throw this.log.error("Missing civicPass payload",nt),new Error("Missing civicPass payload");return this.currentPayload=(it=nt.inputs.civicPass.received)===null||it===void 0?void 0:it.payload,[2,this.gatekeeperClient.requestGatewayTokenFromGatekeeper({payload:(st=nt.inputs.civicPass.received)===null||st===void 0?void 0:st.payload,payer:rt})]})})},et.prototype.freshTransactionGatekeeperRequest=function(rt){return __awaiter$3(this,void 0,void 0,function(){return __generator$2(this,function(nt){return[2,this.gatekeeperClient.fetchFreshTransaction({payer:rt})]})})},et.prototype.clearStateBeforeGatekeeperRequest=function(rt){rt===void 0&&(rt=!1),this.gatewayCoreStore.setState(function(nt){nt.internal.errors.expectedOnChainToken=null,nt.inputs.gatewayToken.status=InputStatus$2.COMPLETE,nt.inputs.gatekeeperRecord.received=null,nt.inputs.gatekeeperRecord.status=InputStatus$2.IN_PROGRESS,rt&&(nt.internal.chainTransaction=void 0)})},et.prototype.makeGatekeeperRequest=function(rt){return __awaiter$3(this,arguments,void 0,function(nt){var at,it,st=this,dt=nt.payer,pt=nt.isFreshTransactionRequest;return __generator$2(this,function(mt){return at=this.gatewayCoreStore.getState(),this.setGatekeeperClientFlowId(),this.log.debug("makeGatekeeperRequest",at),this.abortExpectedTokenTimer(),this.clearStateBeforeGatekeeperRequest(pt),it=pt?this.freshTransactionGatekeeperRequest(dt):this.gatekeeperRequest(dt,at),it.then(function(yt){st.abortController.signal.aborted||st.gatewayCoreStore.setState(function(Rt){Rt.inputs.gatekeeperRecord.status=InputStatus$2.COMPLETE,Rt.inputs.gatekeeperRecord.received=yt})}).catch(function(yt){st.gatewayCoreStore.setState(function(Rt){Rt.inputs.gatekeeperRecord.status=InputStatus$2.ERROR,Rt.inputs.gatekeeperRecord.error=yt})}),[2]})})},et.prototype.retrieveFreshTransaction=function(rt){return __awaiter$3(this,void 0,void 0,function(){var nt,at=this,it;return __generator$2(this,function(st){if(nt=this.gatewayCoreStore.getState(),!(!((it=nt.inputs.civicPass.received)===null||it===void 0)&&it.payload))throw this.log.error("Missing civicPass payload",nt),new Error("Missing civicPass payload");return this.setGatekeeperClientFlowId(),this.log.debug("retrieveFreshTransaction",nt),this.abortExpectedTokenTimer(),this.clearStateBeforeGatekeeperRequest(),this.gatekeeperRequest(rt,nt).then(function(dt){at.abortController.signal.aborted||at.gatewayCoreStore.setState(function(pt){pt.inputs.gatekeeperRecord.status=InputStatus$2.COMPLETE,pt.inputs.gatekeeperRecord.received=dt})}).catch(function(dt){at.gatewayCoreStore.setState(function(pt){pt.inputs.gatekeeperRecord.status=InputStatus$2.ERROR,pt.inputs.gatekeeperRecord.error=dt})}),[2]})})},et.prototype.statusHasValidToken=function(){var rt=this.gatewayCoreStore.getState();return!!rt.inputs.gatewayToken.received},et.prototype.expectOnChainToken=function(){var rt=this,nt=this.gatewayCoreStore.getState();nt.inputs.gatewayToken.received||this.timers.expectOnChainToken||(this.timers.expectOnChainToken=setTimeout(function(){rt.gatewayCoreStore.setState(function(at){rt.statusHasValidToken()||(at.internal.errors.expectedOnChainToken=new ChainConfirmationTimeout$2("No on-chain token found within interval"))})},this.expectTokenTimeoutSeconds*1e3),this.log.debug("Started expected token timer",this.timers.expectOnChainToken))},et.prototype.abort=function(){this.abortExpectedTokenTimer(),this.abortRefreshCountdownTimer()},et.prototype.abortExpectedTokenTimer=function(){this.timers.expectOnChainToken&&(this.log.debug("Aborting expected token timer",this.timers.expectOnChainToken),clearTimeout(this.timers.expectOnChainToken))},et.prototype.onActiveTokenFound=function(){this.abortExpectedTokenTimer(),this.gatewayCoreStore.setState(function(rt){var nt;((nt=rt.inputs.dynamicParameters)===null||nt===void 0?void 0:nt.forceRequireRefresh)!==void 0&&(rt.inputs.gatekeeperRecord.received=null,rt.internal.chainTransaction=void 0,rt.inputs.dynamicParameters.forceRequireRefresh=!1)}),this.startRefreshCountdownTimer()},et.prototype.startRefreshCountdownTimer=function(){var rt=this,nt=this.gatewayCoreStore.getState(),at=nt.inputs.gatewayToken.received;if(at!=null&&at.expiryTime){this.abortRefreshCountdownTimer();var it=getTokenRefreshIntervalMilliseconds$2(at.expiryTime,0);this.timers.refreshCountdownTimer=setTimeout(function(){rt.abortRefreshCountdownTimer()},it),this.log.debug("Started refresh countdown timer",{gatewayToken:at,refreshCountdownTimer:this.timers.refreshCountdownTimer})}},et.prototype.abortRefreshCountdownTimer=function(){this.log.debug("abortRefreshCountdownTimer",{refreshCountdownTimer:this.timers.refreshCountdownTimer}),this.timers.refreshCountdownTimer&&(clearTimeout(this.timers.refreshCountdownTimer),this.timers.refreshCountdownTimer=void 0)},et.prototype.restartDataCollection=function(){this.gatewayCoreStore.setState(function(rt){rt.inputs.civicPass.received=null})},et}(OrchestratorFlow$1),Refresh$2=function(tt){__extends$2(et,tt);function et(rt,nt,at,it,st){st===void 0&&(st=DEFAULT_EXPECT_TOKEN_TIMEOUT_SECONDS$2);var dt=tt.call(this,rt,nt,at,it,st)||this;return dt.gatewayCoreStore=rt,dt.chainImplementation=nt,dt.gatekeeperClient=at,dt.abortController=it,dt.expectTokenTimeoutSeconds=st,dt}return et.prototype.clearStateBeforeGatekeeperRequest=function(){this.gatewayCoreStore.setState(function(rt){rt.inputs.gatekeeperRecord.received=null,rt.internal.chainTransaction=void 0,rt.inputs.gatekeeperRecord.status=InputStatus$2.IN_PROGRESS})},et.prototype.gatekeeperRequest=function(rt,nt){return __awaiter$3(this,void 0,void 0,function(){var at,it,st;return __generator$2(this,function(dt){if(!(!((at=nt.inputs.civicPass.received)===null||at===void 0)&&at.payload))throw this.log.error("Missing civicPass payload",nt),new Error("Missing civicPass payload");return this.currentPayload=(it=nt.inputs.civicPass.received)===null||it===void 0?void 0:it.payload,[2,this.gatekeeperClient.refreshToken({payload:(st=nt.inputs.civicPass.received)===null||st===void 0?void 0:st.payload,payer:rt})]})})},et.prototype.statusHasValidToken=function(){var rt=this.gatewayCoreStore.getState(),nt=rt.inputs.gatewayToken.received;return nt!=null&&nt.expiryTime?!!(nt&&!isTokenRefreshRequired$2({gatewayToken:nt,tokenExpirationMarginSeconds:0})):!1},et}(Issuance$2),UserInteractionStatus$2;(function(tt){tt.STARTED="started",tt.FINISHED="finished"})(UserInteractionStatus$2||(UserInteractionStatus$2={}));var getUserInteractionStatusFromAction$2=function(tt,et){var rt,nt;return[CivicPassMessageAction$2.TOKEN_ACTIVE,CivicPassMessageAction$2.TOKEN_REVOKED,CivicPassMessageAction$2.TOKEN_FROZEN,CivicPassMessageAction$2.TOKEN_REJECTED,CivicPassMessageAction$2.FAILED_IP_CHECK,CivicPassMessageAction$2.FAILED_VPN_CHECK,CivicPassMessageAction$2.ERROR].includes(et)?UserInteractionStatus$2.FINISHED:(nt=(rt=tt.internal)===null||rt===void 0?void 0:rt.userInteraction)===null||nt===void 0?void 0:nt.status},PartnerReview$2=function(tt){__extends$2(et,tt);function et(rt,nt,at,it){it===void 0&&(it=2);var st=tt.call(this,rt,nt,at)||this;return st.gatewayCoreStore=rt,st.gatekeeperClient=nt,st.abortController=at,st.pollingIntervalSeconds=it,st.timers={},st.log=prefixLogger$2("PartnerReview instance"),st}return et.prototype.pollForReviewFinished=function(){return __awaiter$3(this,void 0,void 0,function(){var rt,nt=this;return __generator$2(this,function(at){return this.setGatekeeperClientFlowId(),rt=function(){return __awaiter$3(nt,void 0,void 0,function(){var it=this,st;return __generator$2(this,function(dt){return!((st=this.abortController)===null||st===void 0)&&st.signal.aborted?(clearInterval(this.timers.pollForReviewFinishedTimer),[2]):(this.gatekeeperClient.getGatekeeperRecordWithPayload().then(function(pt){if(!pt||(pt==null?void 0:pt.state)===void 0||(pt==null?void 0:pt.state)===GatekeeperAPIStatus$2.SERVER_FAILURE)throw it.log.error("Error polling gatekeeper, no state returned",pt),clearInterval(it.timers.pollForReviewFinishedTimer),new Error("Error polling gatekeeper, no state returned");it.log.debug("pollUntilNotRequested record.state",pt.state),pt.state!==GatekeeperAPIStatus$2.REQUESTED&&(it.gatewayCoreStore.setState(function(mt){mt.inputs.gatekeeperRecord.status=InputStatus$2.COMPLETE,mt.inputs.gatekeeperRecord.received=pt}),clearInterval(it.timers.pollForReviewFinishedTimer))}),[2])})})},rt(),this.timers.pollForReviewFinishedTimer=setInterval(rt,this.pollingIntervalSeconds*1e3),[2]})})},et.prototype.abort=function(){clearInterval(this.timers.pollForReviewFinishedTimer)},et}(OrchestratorFlow$1),_a$2$2,logError$1$2=prefixLogger$2("common").error,validationProcessToGatewayStatus$2=(_a$2$2={},_a$2$2[ValidationStatus$2.COLLECTING]=GatewayStatus$3.COLLECTING_USER_INFORMATION,_a$2$2[ValidationStatus$2.PROCESSING]=GatewayStatus$3.VALIDATING_USER_INFORMATION,_a$2$2[ValidationStatus$2.IN_REVIEW]=GatewayStatus$3.VALIDATING_USER_INFORMATION,_a$2$2[ValidationStatus$2.FAILED]=GatewayStatus$3.USER_INFORMATION_REJECTED,_a$2$2[ValidationStatus$2.COMPLETED]=GatewayStatus$3.USER_INFORMATION_VALIDATED,_a$2$2),payerIsWalletOwner$2=function(tt){var et,rt,nt;return((et=tt.inputs.parameters)===null||et===void 0?void 0:et.payer)===((nt=(rt=tt.inputs.parameters)===null||rt===void 0?void 0:rt.wallet)===null||nt===void 0?void 0:nt.address)},tokenNoGatekeeperRecordError$2=function(tt){var et,rt,nt;return!!(!((et=tt.inputs.gatewayToken)===null||et===void 0)&&et.received&&((nt=(rt=tt.inputs.gatekeeperRecord)===null||rt===void 0?void 0:rt.received)===null||nt===void 0?void 0:nt.state)===GatekeeperAPIStatus$2.NOT_REQUESTED)},statusFromGatewayTokenIfExists$2=function(tt){var et,rt,nt=(et=tt.inputs.gatewayToken)===null||et===void 0?void 0:et.received;if(tokenNoGatekeeperRecordError$2(tt))return GatewayStatus$3.ERROR;if(nt){var at=isTokenRefreshRequired$2({gatewayToken:nt,tokenExpirationMarginSeconds:0,forceRequireRefresh:(rt=tt.inputs.dynamicParameters)===null||rt===void 0?void 0:rt.forceRequireRefresh});switch(nt.state){case"ACTIVE":return at?GatewayStatus$3.REFRESH_TOKEN_REQUIRED:GatewayStatus$3.ACTIVE;case"FROZEN":return GatewayStatus$3.FROZEN;case"REVOKED":return GatewayStatus$3.REVOKED;default:return logError$1$2("Unexpected token state: ".concat(nt.state)),GatewayStatus$3.ERROR}}},handleGatewayTokenExistsStatus$2=function(tt){var et=statusFromGatewayTokenIfExists$2(tt);return et||(logError$1$2("The gateway status indicated an existing token but no status could be derived"),GatewayStatus$3.ERROR)},statusIfGatekeeperRecordRejected$2=function(tt){var et,rt=tt.inputs.gatekeeperRecord,nt=tt.inputs.gatewayToken,at=(et=rt==null?void 0:rt.received)===null||et===void 0?void 0:et.state;switch(at){case GatekeeperAPIStatus$2.ISSUED_EXPIRED:return nt!=null&&nt.received?void 0:GatewayStatus$3.ERROR;case GatekeeperAPIStatus$2.REJECTED:return GatewayStatus$3.REJECTED;case GatekeeperAPIStatus$2.ISSUED_LOCATION_NOT_SUPPORTED:case GatekeeperAPIStatus$2.LOCATION_NOT_SUPPORTED:return GatewayStatus$3.LOCATION_NOT_SUPPORTED;case GatekeeperAPIStatus$2.ISSUED_VPN_NOT_SUPPORTED:case GatekeeperAPIStatus$2.VPN_NOT_SUPPORTED:return GatewayStatus$3.VPN_NOT_SUPPORTED;case GatekeeperAPIStatus$2.REQUESTED_RETRIES_EXHAUSTED:return GatewayStatus$3.ERROR;default:return}},Orchestrator$1=function(){function tt(et,rt,nt,at,it,st,dt){var pt,mt,yt,Rt,Tt,At,xt,Nt;if(this.gatewayCoreStore=et,this.messageEventInterface=rt,this.instanceId=nt,this.inputs=at,this.postMessageTargetCallback=st,this.chainImplementation=dt,this.abortController=new AbortController,!this.chainImplementation||!(!((pt=at.wallet)===null||pt===void 0)&&pt.address)||!at.stage)throw new Error("chainImplementation wallet and stage are required");this.wallet=at.wallet,this.payer=getPayer$2(at),this.log=prefixLogger$2("Orchestrator[".concat(this.instanceId,"]")),this.listenerManager=new ListenerManager$2(this.messageEventInterface,this.chainImplementation,this.instanceId);var Ct=(yt=(mt=this.chainImplementation)===null||mt===void 0?void 0:mt.chainDetails)===null||yt===void 0?void 0:yt.chainNetwork;this.gatekeeperClient=new GatekeeperClient$2({abortController:this.abortController,baseUrl:(Rt=at.gatekeeperConfig)===null||Rt===void 0?void 0:Rt.baseUrl,queryParams:at.gatekeeperNetwork?{network:Ct,gatekeeperNetworkAddress:at.gatekeeperNetwork}:void 0,headers:__assign$2(__assign$2({},((Tt=at.gatekeeperConfig)===null||Tt===void 0?void 0:Tt.headers)||{}),at.xCivicClientHeader?{"x-civic-client":at.xCivicClientHeader}:{}),stage:at.stage,fetchImplementation:it.fetchImplementation,numRetries:it.numRetries,walletAddress:(At=at.wallet)===null||At===void 0?void 0:At.address,chainType:(Nt=(xt=this.chainImplementation)===null||xt===void 0?void 0:xt.chainDetails)===null||Nt===void 0?void 0:Nt.chainType}),this.log.debug("Orchestrator created")}return Object.defineProperty(tt.prototype,"issuance",{get:function(){return this._issuance||(this._issuance=new Issuance$2(this.gatewayCoreStore,this.chainImplementation,this.gatekeeperClient,this.abortController,this.inputs.expectTokenTimeoutSeconds)),this._issuance},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"refresh",{get:function(){return this._refresh||(this._refresh=new Refresh$2(this.gatewayCoreStore,this.chainImplementation,this.gatekeeperClient,this.abortController,this.inputs.expectTokenTimeoutSeconds)),this._refresh},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"partnerReview",{get:function(){return this._partnerReview||(this._partnerReview=new PartnerReview$2(this.gatewayCoreStore,this.gatekeeperClient,this.abortController,this.inputs.gatekeeperPollingIntervalSeconds)),this._partnerReview},enumerable:!1,configurable:!0}),tt.prototype.getRemoteSignInstance=function(){return this.remoteSignInstance||(this.remoteSignInstance=new RemoteSignWindowEventEmitter$2(eventEmitter$2(this.postMessageTargetCallback(this.instanceId)),this.instanceId)),this.remoteSignInstance},tt.prototype.getOwnerDids=function(){return __awaiter$3(this,void 0,void 0,function(){var et;return __generator$2(this,function(rt){switch(rt.label){case 0:return[4,this.chainImplementation.ownerDids()];case 1:return et=rt.sent(),this.gatewayCoreStore.setState(function(nt){nt.internal.ownerDids=et}),[2]}})})},tt.prototype.fetchGatekeeperNetworkData=function(){return __awaiter$3(this,void 0,void 0,function(){var et=this;return __generator$2(this,function(rt){return this.gatewayCoreStore.setState(function(nt){nt.inputs.gatekeeperNetworkData.status=InputStatus$2.IN_PROGRESS}),[2,getGatekeeperNetworkData$1(this.inputs.stage||"prod",this.inputs.gatekeeperNetwork||"").then(function(nt){et.log.debug("getGatekeeperNetworkData",nt),!et.abortController.signal.aborted&&et.gatewayCoreStore.setState(function(at){at.inputs.gatekeeperNetworkData.status=InputStatus$2.COMPLETE,at.inputs.gatekeeperNetworkData.received=nt})}).catch(function(nt){et.log.error("Error retrieving gatekeeper network data",nt),!et.abortController.signal.aborted&&et.gatewayCoreStore.setState(function(at){at.inputs.gatekeeperNetworkData.status=InputStatus$2.ERROR,at.inputs.gatekeeperNetworkData.error=nt})})]})})},tt.prototype.lookupTokenState=function(){return __awaiter$3(this,void 0,void 0,function(){var et,rt,nt,at=this;return __generator$2(this,function(it){switch(it.label){case 0:return et=function(){return __awaiter$3(at,void 0,void 0,function(){var st=this;return __generator$2(this,function(dt){return this.gatewayCoreStore.setState(function(pt){pt.inputs.gatekeeperRecord.status=InputStatus$2.IN_PROGRESS}),[2,this.gatekeeperClient.getGatekeeperRecordWithPayload().then(function(pt){st.log.debug("getGatekeeperRecordWithPayload record",pt),!st.abortController.signal.aborted&&st.gatewayCoreStore.setState(function(mt){mt.inputs.gatekeeperRecord.status=InputStatus$2.COMPLETE,mt.inputs.gatekeeperRecord.received=pt})}).catch(function(pt){st.log.error("Error retrieving gatekeeper record",pt),!st.abortController.signal.aborted&&st.gatewayCoreStore.setState(function(mt){mt.inputs.gatekeeperRecord.status=InputStatus$2.ERROR,mt.inputs.gatekeeperRecord.error=pt})})]})})},rt=function(){return __awaiter$3(at,void 0,void 0,function(){var st=this;return __generator$2(this,function(dt){return this.gatewayCoreStore.setState(function(pt){pt.inputs.gatewayToken.status=InputStatus$2.IN_PROGRESS}),[2,this.chainImplementation.findGatewayToken().then(function(pt){st.abortController.signal.aborted||st.gatewayCoreStore.setState(function(mt){mt.inputs.gatewayToken.status=InputStatus$2.COMPLETE,pt&&(mt.inputs.gatewayToken.received=pt)})}).catch(function(pt){st.abortController.signal.aborted||(st.log.error("Error retrieving gateway token",pt),st.gatewayCoreStore.setState(function(mt){mt.inputs.gatewayToken.status=InputStatus$2.ERROR,mt.inputs.gatewayToken.error=pt}))})]})})},nt=[rt()],this.inputs.disableInitialGatekeeperLookup||nt.push(et()),[4,Promise.allSettled(nt)];case 1:return it.sent(),[2]}})})},tt.prototype.initialise=function(){return __awaiter$3(this,void 0,void 0,function(){return __generator$2(this,function(et){switch(et.label){case 0:return this.log.debug("Initialising orchestrator"),this.abortController=new AbortController,this.remoteSignInstance=void 0,this.gatewayCoreStore.getState().functions.reset(),[4,Promise.allSettled([this.getOwnerDids(),this.lookupTokenState(),this.fetchGatekeeperNetworkData()])];case 1:return et.sent(),[2]}})})},tt.prototype.reset=function(){this.log.debug("resetting orchestrator"),this.initialise()},tt.prototype.onInternalStatusChange=function(et,rt){var nt,at;if(et===GatewayStatus$3.ERROR){var it=this.gatewayCoreStore.getState();tokenNoGatekeeperRecordError$2(it)&&this.gatewayCoreStore.setState(function(st){st.internal.errors||(st.internal.errors={}),st.internal.errors.expectedTokenGatekeeperRecord=new ChainError$2("Token has no gatekeeper record",ErrorCode$2.EXPECTED_GATEKEEPER_RECORD)});return}if(et===GatewayStatus$3.ACTIVE){rt!==GatewayStatus$3.ACTIVE&&((nt=this._refresh)===null||nt===void 0||nt.onActiveTokenFound(),this._refresh||(at=this._issuance)===null||at===void 0||at.onActiveTokenFound());return}if(et===ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION)return this.issuance.restartDataCollection();if(et===GatewayStatus$3.USER_INFORMATION_VALIDATED)return this.issuance.makeGatekeeperRequest({payer:this.payer});if([ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX].includes(et))return this.issuance.makeGatekeeperRequest({payer:this.payer,isFreshTransactionRequest:!0});if([ExtendedGatewayStatus$2.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND].includes(et))return this.issuance.sendTransaction();if(et===ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN)return this.issuance.expectOnChainToken();if(et===ExtendedGatewayStatus$2.REFRESH_USER_INFORMATION_VALIDATED)return this.refresh.makeGatekeeperRequest({payer:this.payer});if([ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX].includes(et))return this.refresh.makeGatekeeperRequest({payer:this.payer,isFreshTransactionRequest:!0});if(et===ExtendedGatewayStatus$2.REFRESH_AWAITING_TRANSACTION_SEND)return this.refresh.sendTransaction();if(et===ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN)return this.refresh.expectOnChainToken();if(et===ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW)return this.partnerReview.pollForReviewFinished();if([ExtendedGatewayStatus$2.RESTART,ExtendedGatewayStatus$2.RESTART_REFRESH].includes(et))return this.reset()},tt.prototype.orchestrate=function(){var et=this;this.log.debug("running orchestrate()"),this.gatewayCoreStore.subscribe(function(rt){return rt.internal.status},function(rt,nt){return et.onInternalStatusChange(rt,nt)}),this.gatewayCoreStore.subscribe(function(rt){var nt;return(nt=rt.inputs.gatewayToken.received)===null||nt===void 0?void 0:nt.expiryTime},function(rt,nt){rt&&nt&&rt>nt&&et.gatewayCoreStore.setState(function(at){var it;((it=at.inputs.dynamicParameters)===null||it===void 0?void 0:it.forceRequireRefresh)!==void 0&&(at.inputs.dynamicParameters.forceRequireRefresh=!1)})}),this.gatewayCoreStore.subscribe(function(rt){return rt.inputs.civicPass.received},function(rt){return et.gatewayCoreStore.setState(function(nt){var at=getUserInteractionStatusFromAction$2(nt,rt==null?void 0:rt.action);nt.internal.userInteraction.status=at})}),this.listenerManager.registerCivicPassListener(function(rt){et.gatewayCoreStore.setState(function(nt){nt.inputs.civicPass.status=InputStatus$2.COMPLETE,nt.inputs.civicPass.received=rt})}),this.listenerManager.registerCivicSignListener(function(rt){et.gatewayCoreStore.setState(function(at){at.inputs.civicSign.status=InputStatus$2.RECEIVED,at.inputs.civicSign.received=rt});var nt=et.gatewayCoreStore.getState().internal.ownerDids;handleRemoteSignEvent$2(rt,et.getRemoteSignInstance(),{chainImplementation:et.chainImplementation,wallet:et.wallet,ownerDids:nt}).then(function(at){at||et.log.warn("No result from remote sign event"),et.gatewayCoreStore.setState(function(it){it.inputs.civicSign.received=null,it.inputs.civicSign.sent=at,it.inputs.civicSign.error=null,it.inputs.civicSign.status=InputStatus$2.RESPONDED})}).catch(function(at){et.gatewayCoreStore.setState(function(it){it.inputs.civicSign.error=at,it.inputs.civicSign.status=InputStatus$2.ERROR})})}),this.listenerManager.registerOnChainListeners(function(rt){et.gatewayCoreStore.setState(function(nt){nt.inputs.gatewayToken.received=rt})})},tt.prototype.abort=function(){var et,rt,nt;this.log.info("Aborting orchestration"),this.chainImplementation.onDestroy(),(et=this._issuance)===null||et===void 0||et.abort(),(rt=this._refresh)===null||rt===void 0||rt.abort(),(nt=this._partnerReview)===null||nt===void 0||nt.abort(),this.abortController.abort(),this.gatekeeperClient.abort(),this.listenerManager.unregisterAllListeners()},tt}();const createStoreImpl$1=tt=>{let et;const rt=new Set,nt=(yt,Rt)=>{const Tt=typeof yt=="function"?yt(et):yt;if(!Object.is(Tt,et)){const At=et;et=Rt??(typeof Tt!="object"||Tt===null)?Tt:Object.assign({},et,Tt),rt.forEach(xt=>xt(et,At))}},at=()=>et,pt={setState:nt,getState:at,getInitialState:()=>mt,subscribe:yt=>(rt.add(yt),()=>rt.delete(yt)),destroy:()=>{(define_import_meta_env_default$1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),rt.clear()}},mt=et=tt(nt,at,pt);return pt},createStore$1=tt=>tt?createStoreImpl$1(tt):createStoreImpl$1;var NOTHING$2=Symbol.for("immer-nothing"),DRAFTABLE$2=Symbol.for("immer-draftable"),DRAFT_STATE$2=Symbol.for("immer-state");function die$2(tt,...et){throw new Error(`[Immer] minified error nr: ${tt}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf$3=Object.getPrototypeOf;function isDraft$2(tt){return!!tt&&!!tt[DRAFT_STATE$2]}function isDraftable$2(tt){var et;return tt?isPlainObject$2(tt)||Array.isArray(tt)||!!tt[DRAFTABLE$2]||!!((et=tt.constructor)!=null&&et[DRAFTABLE$2])||isMap$2(tt)||isSet$2(tt):!1}var objectCtorString$2=Object.prototype.constructor.toString();function isPlainObject$2(tt){if(!tt||typeof tt!="object")return!1;const et=getPrototypeOf$3(tt);if(et===null)return!0;const rt=Object.hasOwnProperty.call(et,"constructor")&&et.constructor;return rt===Object?!0:typeof rt=="function"&&Function.toString.call(rt)===objectCtorString$2}function each$2(tt,et){getArchtype$2(tt)===0?Reflect.ownKeys(tt).forEach(rt=>{et(rt,tt[rt],tt)}):tt.forEach((rt,nt)=>et(nt,rt,tt))}function getArchtype$2(tt){const et=tt[DRAFT_STATE$2];return et?et.type_:Array.isArray(tt)?1:isMap$2(tt)?2:isSet$2(tt)?3:0}function has$3(tt,et){return getArchtype$2(tt)===2?tt.has(et):Object.prototype.hasOwnProperty.call(tt,et)}function set$3(tt,et,rt){const nt=getArchtype$2(tt);nt===2?tt.set(et,rt):nt===3?tt.add(rt):tt[et]=rt}function is$4(tt,et){return tt===et?tt!==0||1/tt===1/et:tt!==tt&&et!==et}function isMap$2(tt){return tt instanceof Map}function isSet$2(tt){return tt instanceof Set}function latest$2(tt){return tt.copy_||tt.base_}function shallowCopy$2(tt,et){if(isMap$2(tt))return new Map(tt);if(isSet$2(tt))return new Set(tt);if(Array.isArray(tt))return Array.prototype.slice.call(tt);if(!et&&isPlainObject$2(tt))return getPrototypeOf$3(tt)?{...tt}:Object.assign(Object.create(null),tt);const rt=Object.getOwnPropertyDescriptors(tt);delete rt[DRAFT_STATE$2];let nt=Reflect.ownKeys(rt);for(let at=0;at<nt.length;at++){const it=nt[at],st=rt[it];st.writable===!1&&(st.writable=!0,st.configurable=!0),(st.get||st.set)&&(rt[it]={configurable:!0,writable:!0,enumerable:st.enumerable,value:tt[it]})}return Object.create(getPrototypeOf$3(tt),rt)}function freeze$3(tt,et=!1){return isFrozen$2(tt)||isDraft$2(tt)||!isDraftable$2(tt)||(getArchtype$2(tt)>1&&(tt.set=tt.add=tt.clear=tt.delete=dontMutateFrozenCollections$2),Object.freeze(tt),et&&Object.entries(tt).forEach(([rt,nt])=>freeze$3(nt,!0))),tt}function dontMutateFrozenCollections$2(){die$2(2)}function isFrozen$2(tt){return Object.isFrozen(tt)}var plugins$2={};function getPlugin$2(tt){const et=plugins$2[tt];return et||die$2(0,tt),et}var currentScope$2;function getCurrentScope$2(){return currentScope$2}function createScope$2(tt,et){return{drafts_:[],parent_:tt,immer_:et,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope$2(tt,et){et&&(getPlugin$2("Patches"),tt.patches_=[],tt.inversePatches_=[],tt.patchListener_=et)}function revokeScope$2(tt){leaveScope$2(tt),tt.drafts_.forEach(revokeDraft$2),tt.drafts_=null}function leaveScope$2(tt){tt===currentScope$2&&(currentScope$2=tt.parent_)}function enterScope$2(tt){return currentScope$2=createScope$2(currentScope$2,tt)}function revokeDraft$2(tt){const et=tt[DRAFT_STATE$2];et.type_===0||et.type_===1?et.revoke_():et.revoked_=!0}function processResult$2(tt,et){et.unfinalizedDrafts_=et.drafts_.length;const rt=et.drafts_[0];return tt!==void 0&&tt!==rt?(rt[DRAFT_STATE$2].modified_&&(revokeScope$2(et),die$2(4)),isDraftable$2(tt)&&(tt=finalize$2(et,tt),et.parent_||maybeFreeze$2(et,tt)),et.patches_&&getPlugin$2("Patches").generateReplacementPatches_(rt[DRAFT_STATE$2].base_,tt,et.patches_,et.inversePatches_)):tt=finalize$2(et,rt,[]),revokeScope$2(et),et.patches_&&et.patchListener_(et.patches_,et.inversePatches_),tt!==NOTHING$2?tt:void 0}function finalize$2(tt,et,rt){if(isFrozen$2(et))return et;const nt=et[DRAFT_STATE$2];if(!nt)return each$2(et,(at,it)=>finalizeProperty$2(tt,nt,et,at,it,rt)),et;if(nt.scope_!==tt)return et;if(!nt.modified_)return maybeFreeze$2(tt,nt.base_,!0),nt.base_;if(!nt.finalized_){nt.finalized_=!0,nt.scope_.unfinalizedDrafts_--;const at=nt.copy_;let it=at,st=!1;nt.type_===3&&(it=new Set(at),at.clear(),st=!0),each$2(it,(dt,pt)=>finalizeProperty$2(tt,nt,at,dt,pt,rt,st)),maybeFreeze$2(tt,at,!1),rt&&tt.patches_&&getPlugin$2("Patches").generatePatches_(nt,rt,tt.patches_,tt.inversePatches_)}return nt.copy_}function finalizeProperty$2(tt,et,rt,nt,at,it,st){if(isDraft$2(at)){const dt=it&&et&&et.type_!==3&&!has$3(et.assigned_,nt)?it.concat(nt):void 0,pt=finalize$2(tt,at,dt);if(set$3(rt,nt,pt),isDraft$2(pt))tt.canAutoFreeze_=!1;else return}else st&&rt.add(at);if(isDraftable$2(at)&&!isFrozen$2(at)){if(!tt.immer_.autoFreeze_&&tt.unfinalizedDrafts_<1)return;finalize$2(tt,at),(!et||!et.scope_.parent_)&&typeof nt!="symbol"&&Object.prototype.propertyIsEnumerable.call(rt,nt)&&maybeFreeze$2(tt,at)}}function maybeFreeze$2(tt,et,rt=!1){!tt.parent_&&tt.immer_.autoFreeze_&&tt.canAutoFreeze_&&freeze$3(et,rt)}function createProxyProxy$2(tt,et){const rt=Array.isArray(tt),nt={type_:rt?1:0,scope_:et?et.scope_:getCurrentScope$2(),modified_:!1,finalized_:!1,assigned_:{},parent_:et,base_:tt,draft_:null,copy_:null,revoke_:null,isManual_:!1};let at=nt,it=objectTraps$2;rt&&(at=[nt],it=arrayTraps$2);const{revoke:st,proxy:dt}=Proxy.revocable(at,it);return nt.draft_=dt,nt.revoke_=st,dt}var objectTraps$2={get(tt,et){if(et===DRAFT_STATE$2)return tt;const rt=latest$2(tt);if(!has$3(rt,et))return readPropFromProto$2(tt,rt,et);const nt=rt[et];return tt.finalized_||!isDraftable$2(nt)?nt:nt===peek$2(tt.base_,et)?(prepareCopy$2(tt),tt.copy_[et]=createProxy$2(nt,tt)):nt},has(tt,et){return et in latest$2(tt)},ownKeys(tt){return Reflect.ownKeys(latest$2(tt))},set(tt,et,rt){const nt=getDescriptorFromProto$2(latest$2(tt),et);if(nt!=null&&nt.set)return nt.set.call(tt.draft_,rt),!0;if(!tt.modified_){const at=peek$2(latest$2(tt),et),it=at==null?void 0:at[DRAFT_STATE$2];if(it&&it.base_===rt)return tt.copy_[et]=rt,tt.assigned_[et]=!1,!0;if(is$4(rt,at)&&(rt!==void 0||has$3(tt.base_,et)))return!0;prepareCopy$2(tt),markChanged$2(tt)}return tt.copy_[et]===rt&&(rt!==void 0||et in tt.copy_)||Number.isNaN(rt)&&Number.isNaN(tt.copy_[et])||(tt.copy_[et]=rt,tt.assigned_[et]=!0),!0},deleteProperty(tt,et){return peek$2(tt.base_,et)!==void 0||et in tt.base_?(tt.assigned_[et]=!1,prepareCopy$2(tt),markChanged$2(tt)):delete tt.assigned_[et],tt.copy_&&delete tt.copy_[et],!0},getOwnPropertyDescriptor(tt,et){const rt=latest$2(tt),nt=Reflect.getOwnPropertyDescriptor(rt,et);return nt&&{writable:!0,configurable:tt.type_!==1||et!=="length",enumerable:nt.enumerable,value:rt[et]}},defineProperty(){die$2(11)},getPrototypeOf(tt){return getPrototypeOf$3(tt.base_)},setPrototypeOf(){die$2(12)}},arrayTraps$2={};each$2(objectTraps$2,(tt,et)=>{arrayTraps$2[tt]=function(){return arguments[0]=arguments[0][0],et.apply(this,arguments)}});arrayTraps$2.deleteProperty=function(tt,et){return arrayTraps$2.set.call(this,tt,et,void 0)};arrayTraps$2.set=function(tt,et,rt){return objectTraps$2.set.call(this,tt[0],et,rt,tt[0])};function peek$2(tt,et){const rt=tt[DRAFT_STATE$2];return(rt?latest$2(rt):tt)[et]}function readPropFromProto$2(tt,et,rt){var at;const nt=getDescriptorFromProto$2(et,rt);return nt?"value"in nt?nt.value:(at=nt.get)==null?void 0:at.call(tt.draft_):void 0}function getDescriptorFromProto$2(tt,et){if(!(et in tt))return;let rt=getPrototypeOf$3(tt);for(;rt;){const nt=Object.getOwnPropertyDescriptor(rt,et);if(nt)return nt;rt=getPrototypeOf$3(rt)}}function markChanged$2(tt){tt.modified_||(tt.modified_=!0,tt.parent_&&markChanged$2(tt.parent_))}function prepareCopy$2(tt){tt.copy_||(tt.copy_=shallowCopy$2(tt.base_,tt.scope_.immer_.useStrictShallowCopy_))}var Immer2$2=class{constructor(et){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(rt,nt,at)=>{if(typeof rt=="function"&&typeof nt!="function"){const st=nt;nt=rt;const dt=this;return function(mt=st,...yt){return dt.produce(mt,Rt=>nt.call(this,Rt,...yt))}}typeof nt!="function"&&die$2(6),at!==void 0&&typeof at!="function"&&die$2(7);let it;if(isDraftable$2(rt)){const st=enterScope$2(this),dt=createProxy$2(rt,void 0);let pt=!0;try{it=nt(dt),pt=!1}finally{pt?revokeScope$2(st):leaveScope$2(st)}return usePatchesInScope$2(st,at),processResult$2(it,st)}else if(!rt||typeof rt!="object"){if(it=nt(rt),it===void 0&&(it=rt),it===NOTHING$2&&(it=void 0),this.autoFreeze_&&freeze$3(it,!0),at){const st=[],dt=[];getPlugin$2("Patches").generateReplacementPatches_(rt,it,st,dt),at(st,dt)}return it}else die$2(1,rt)},this.produceWithPatches=(rt,nt)=>{if(typeof rt=="function")return(dt,...pt)=>this.produceWithPatches(dt,mt=>rt(mt,...pt));let at,it;return[this.produce(rt,nt,(dt,pt)=>{at=dt,it=pt}),at,it]},typeof(et==null?void 0:et.autoFreeze)=="boolean"&&this.setAutoFreeze(et.autoFreeze),typeof(et==null?void 0:et.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(et.useStrictShallowCopy)}createDraft(et){isDraftable$2(et)||die$2(8),isDraft$2(et)&&(et=current$2(et));const rt=enterScope$2(this),nt=createProxy$2(et,void 0);return nt[DRAFT_STATE$2].isManual_=!0,leaveScope$2(rt),nt}finishDraft(et,rt){const nt=et&&et[DRAFT_STATE$2];(!nt||!nt.isManual_)&&die$2(9);const{scope_:at}=nt;return usePatchesInScope$2(at,rt),processResult$2(void 0,at)}setAutoFreeze(et){this.autoFreeze_=et}setUseStrictShallowCopy(et){this.useStrictShallowCopy_=et}applyPatches(et,rt){let nt;for(nt=rt.length-1;nt>=0;nt--){const it=rt[nt];if(it.path.length===0&&it.op==="replace"){et=it.value;break}}nt>-1&&(rt=rt.slice(nt+1));const at=getPlugin$2("Patches").applyPatches_;return isDraft$2(et)?at(et,rt):this.produce(et,it=>at(it,rt))}};function createProxy$2(tt,et){const rt=isMap$2(tt)?getPlugin$2("MapSet").proxyMap_(tt,et):isSet$2(tt)?getPlugin$2("MapSet").proxySet_(tt,et):createProxyProxy$2(tt,et);return(et?et.scope_:getCurrentScope$2()).drafts_.push(rt),rt}function current$2(tt){return isDraft$2(tt)||die$2(10,tt),currentImpl$2(tt)}function currentImpl$2(tt){if(!isDraftable$2(tt)||isFrozen$2(tt))return tt;const et=tt[DRAFT_STATE$2];let rt;if(et){if(!et.modified_)return et.base_;et.finalized_=!0,rt=shallowCopy$2(tt,et.scope_.immer_.useStrictShallowCopy_)}else rt=shallowCopy$2(tt,!0);return each$2(rt,(nt,at)=>{set$3(rt,nt,currentImpl$2(at))}),et&&(et.finalized_=!1),rt}var immer$1$2=new Immer2$2,produce$1=immer$1$2.produce;immer$1$2.produceWithPatches.bind(immer$1$2);immer$1$2.setAutoFreeze.bind(immer$1$2);immer$1$2.setUseStrictShallowCopy.bind(immer$1$2);immer$1$2.applyPatches.bind(immer$1$2);immer$1$2.createDraft.bind(immer$1$2);immer$1$2.finishDraft.bind(immer$1$2);const immerImpl$1=tt=>(et,rt,nt)=>(nt.setState=(at,it,...st)=>{const dt=typeof at=="function"?produce$1(at):at;return et(dt,it,...st)},tt(nt.setState,rt,nt)),immer$2=immerImpl$1,trackedConnections$1=new Map,getTrackedConnectionState$1=tt=>{const et=trackedConnections$1.get(tt);return et?Object.fromEntries(Object.entries(et.stores).map(([rt,nt])=>[rt,nt.getState()])):{}},extractConnectionInformation$1=(tt,et,rt)=>{if(tt===void 0)return{type:"untracked",connection:et.connect(rt)};const nt=trackedConnections$1.get(rt.name);if(nt)return{type:"tracked",store:tt,...nt};const at={connection:et.connect(rt),stores:{}};return trackedConnections$1.set(rt.name,at),{type:"tracked",store:tt,...at}},devtoolsImpl$1=(tt,et={})=>(rt,nt,at)=>{const{enabled:it,anonymousActionType:st,store:dt,...pt}=et;let mt;try{mt=(it??(define_import_meta_env_default$1?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!mt)return(define_import_meta_env_default$1?"production":void 0)!=="production"&&it&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),tt(rt,nt,at);const{connection:yt,...Rt}=extractConnectionInformation$1(dt,mt,pt);let Tt=!0;at.setState=(Nt,Ct,Ot)=>{const kt=rt(Nt,Ct);if(!Tt)return kt;const Pt=Ot===void 0?{type:st||"anonymous"}:typeof Ot=="string"?{type:Ot}:Ot;return dt===void 0?(yt==null||yt.send(Pt,nt()),kt):(yt==null||yt.send({...Pt,type:`${dt}/${Pt.type}`},{...getTrackedConnectionState$1(pt.name),[dt]:at.getState()}),kt)};const At=(...Nt)=>{const Ct=Tt;Tt=!1,rt(...Nt),Tt=Ct},xt=tt(at.setState,nt,at);if(Rt.type==="untracked"?yt==null||yt.init(xt):(Rt.stores[Rt.store]=at,yt==null||yt.init(Object.fromEntries(Object.entries(Rt.stores).map(([Nt,Ct])=>[Nt,Nt===Rt.store?xt:Ct.getState()])))),at.dispatchFromDevtools&&typeof at.dispatch=="function"){let Nt=!1;const Ct=at.dispatch;at.dispatch=(...Ot)=>{(define_import_meta_env_default$1?"production":void 0)!=="production"&&Ot[0].type==="__setState"&&!Nt&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),Nt=!0),Ct(...Ot)}}return yt.subscribe(Nt=>{var Ct;switch(Nt.type){case"ACTION":if(typeof Nt.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return parseJsonThen$1(Nt.payload,Ot=>{if(Ot.type==="__setState"){if(dt===void 0){At(Ot.state);return}Object.keys(Ot.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const kt=Ot.state[dt];if(kt==null)return;JSON.stringify(at.getState())!==JSON.stringify(kt)&&At(kt);return}at.dispatchFromDevtools&&typeof at.dispatch=="function"&&at.dispatch(Ot)});case"DISPATCH":switch(Nt.payload.type){case"RESET":return At(xt),dt===void 0?yt==null?void 0:yt.init(at.getState()):yt==null?void 0:yt.init(getTrackedConnectionState$1(pt.name));case"COMMIT":if(dt===void 0){yt==null||yt.init(at.getState());return}return yt==null?void 0:yt.init(getTrackedConnectionState$1(pt.name));case"ROLLBACK":return parseJsonThen$1(Nt.state,Ot=>{if(dt===void 0){At(Ot),yt==null||yt.init(at.getState());return}At(Ot[dt]),yt==null||yt.init(getTrackedConnectionState$1(pt.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return parseJsonThen$1(Nt.state,Ot=>{if(dt===void 0){At(Ot);return}JSON.stringify(at.getState())!==JSON.stringify(Ot[dt])&&At(Ot[dt])});case"IMPORT_STATE":{const{nextLiftedState:Ot}=Nt.payload,kt=(Ct=Ot.computedStates.slice(-1)[0])==null?void 0:Ct.state;if(!kt)return;At(dt===void 0?kt:kt[dt]),yt==null||yt.send(null,Ot);return}case"PAUSE_RECORDING":return Tt=!Tt}return}}),xt},devtools$1=devtoolsImpl$1,parseJsonThen$1=(tt,et)=>{let rt;try{rt=JSON.parse(tt)}catch(nt){console.error("[zustand devtools middleware] Could not parse the received json",nt)}rt!==void 0&&et(rt)},subscribeWithSelectorImpl$1=tt=>(et,rt,nt)=>{const at=nt.subscribe;return nt.subscribe=(st,dt,pt)=>{let mt=st;if(dt){const yt=(pt==null?void 0:pt.equalityFn)||Object.is;let Rt=st(nt.getState());mt=Tt=>{const At=st(Tt);if(!yt(Rt,At)){const xt=Rt;dt(Rt=At,xt)}},pt!=null&&pt.fireImmediately&&dt(Rt,Rt)}return at(mt)},tt(et,rt,nt)},subscribeWithSelector$1=subscribeWithSelectorImpl$1;function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(tt){for(var et=1;et<arguments.length;et++){var rt=arguments[et];for(var nt in rt)Object.prototype.hasOwnProperty.call(rt,nt)&&(tt[nt]=rt[nt])}return tt},_extends$2.apply(this,arguments)}var prefix$1="$$_computed_";function injectComputedMiddleware$1(tt){return function(et,rt,nt){var at,it=function(mt,yt){et(function(Rt){var Tt,At=typeof mt=="object"?mt:mt(Rt),xt=(Tt=Rt[prefix$1])==null?void 0:Tt.call(Rt,At);return _extends$2({},Rt,At,xt)},yt)};nt.setState=it;var st=tt(it,rt,nt),dt=(at=st[prefix$1])==null?void 0:at.call(st,st);return Object.assign({},st,dt)}}function compute$1(tt,et){var rt;return rt={},rt[prefix$1]=et,rt}var computed$1=function tt(et){return injectComputedMiddleware$1(et)},_a$1$2,gatewayStatusToCivicPassAction$1=(_a$1$2={},_a$1$2[GatewayStatus$3.IN_REVIEW]=CivicPassMessageAction$2.TOKEN_IN_REVIEW,_a$1$2[GatewayStatus$3.ERROR]=CivicPassMessageAction$2.ERROR,_a$1$2[GatewayStatus$3.ACTIVE]=CivicPassMessageAction$2.TOKEN_ACTIVE,_a$1$2[GatewayStatus$3.REVOKED]=CivicPassMessageAction$2.TOKEN_REVOKED,_a$1$2[GatewayStatus$3.FROZEN]=CivicPassMessageAction$2.TOKEN_FROZEN,_a$1$2[GatewayStatus$3.REJECTED]=CivicPassMessageAction$2.TOKEN_REJECTED,_a$1$2[GatewayStatus$3.LOCATION_NOT_SUPPORTED]=CivicPassMessageAction$2.FAILED_IP_CHECK,_a$1$2[GatewayStatus$3.VPN_NOT_SUPPORTED]=CivicPassMessageAction$2.FAILED_VPN_CHECK,_a$1$2[GatewayStatus$3.REFRESH_TOKEN_REQUIRED]=CivicPassMessageAction$2.REFRESH,_a$1$2[GatewayStatus$3.CHECKING]=CivicPassMessageAction$2.STATUS,_a$1$2[GatewayStatus$3.UNKNOWN]=CivicPassMessageAction$2.ISSUANCE,_a$1$2[GatewayStatus$3.NOT_REQUESTED]=CivicPassMessageAction$2.ISSUANCE,_a$1$2[GatewayStatus$3.COLLECTING_USER_INFORMATION]=CivicPassMessageAction$2.ISSUANCE,_a$1$2[GatewayStatus$3.VALIDATING_USER_INFORMATION]=CivicPassMessageAction$2.ISSUANCE,_a$1$2[GatewayStatus$3.USER_INFORMATION_VALIDATED]=CivicPassMessageAction$2.ISSUANCE,_a$1$2[GatewayStatus$3.USER_INFORMATION_REJECTED]=CivicPassMessageAction$2.ISSUANCE,_a$1$2[ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION]=CivicPassMessageAction$2.ISSUANCE,_a$1$2[ExtendedGatewayStatus$2.ISSUANCE_AWAITING_TRANSACTION_SEND]=CivicPassMessageAction$2.SIGN_TRANSACTION,_a$1$2[ExtendedGatewayStatus$2.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND]=CivicPassMessageAction$2.TOKEN_IN_REVIEW,_a$1$2[ExtendedGatewayStatus$2.ISSUANCE_CLIENT_PAYER_REQUESTED]=CivicPassMessageAction$2.SIGN_TRANSACTION,_a$1$2[ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN]=CivicPassMessageAction$2.AWAITING_TRANSACTION_CONFIRMATION,_a$1$2[ExtendedGatewayStatus$2.CONFIRM_OWNER_TRANSACTION]=CivicPassMessageAction$2.SIGN_TRANSACTION,_a$1$2[ExtendedGatewayStatus$2.AWAITING_OWNER_TRANSACTION]=CivicPassMessageAction$2.AWAITING_TRANSACTION_CONFIRMATION,_a$1$2[ExtendedGatewayStatus$2.CHAIN_TIMEOUT_ERROR]=CivicPassMessageAction$2.CHAIN_ERROR,_a$1$2[ExtendedGatewayStatus$2.CHAIN_TRANSACTION_ERROR]=CivicPassMessageAction$2.CHAIN_ERROR,_a$1$2[ExtendedGatewayStatus$2.CHAIN_SIGN_MESSAGE_ERROR]=CivicPassMessageAction$2.CHAIN_ERROR,_a$1$2[ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW]=CivicPassMessageAction$2.TOKEN_IN_PARTNER_REVIEW,_a$1$2[ExtendedGatewayStatus$2.TOKEN_REFRESH_IN_REVIEW]=CivicPassMessageAction$2.TOKEN_REFRESH_IN_REVIEW,_a$1$2[ExtendedGatewayStatus$2.REFRESH_AWAITING_TRANSACTION_SEND]=CivicPassMessageAction$2.SIGN_TRANSACTION,_a$1$2[ExtendedGatewayStatus$2.REFRESH_CLIENT_PAYER_REQUESTED]=CivicPassMessageAction$2.SIGN_TRANSACTION,_a$1$2[ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN]=CivicPassMessageAction$2.AWAITING_TRANSACTION_CONFIRMATION,_a$1$2[ExtendedGatewayStatus$2.REFRESH_USER_INFORMATION_VALIDATED]=CivicPassMessageAction$2.REFRESH,_a$1$2[ExtendedGatewayStatus$2.RESTART]=CivicPassMessageAction$2.ISSUANCE,_a$1$2[ExtendedGatewayStatus$2.REFRESH_IN_REVIEW]=CivicPassMessageAction$2.REFRESH,_a$1$2[ExtendedGatewayStatus$2.RESTART_REFRESH]=CivicPassMessageAction$2.REFRESH,_a$1$2[ExtendedGatewayStatus$2.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND]=CivicPassMessageAction$2.TOKEN_REFRESH_IN_REVIEW,_a$1$2[ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_START_NEW_TX]=CivicPassMessageAction$2.START_PRE_APPROVED_TRANSACTION,_a$1$2[ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_START_NEW_TX]=CivicPassMessageAction$2.START_PRE_APPROVED_TRANSACTION,_a$1$2[ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX]=CivicPassMessageAction$2.SIGN_TRANSACTION,_a$1$2[ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX]=CivicPassMessageAction$2.SIGN_TRANSACTION,_a$1$2[ExtendedGatewayStatus$2.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX]=CivicPassMessageAction$2.TOKEN_IN_REVIEW,_a$1$2[ExtendedGatewayStatus$2.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX]=CivicPassMessageAction$2.TOKEN_REFRESH_IN_REVIEW,_a$1$2),internalToOutputGatewayStatus$1=function(tt){switch(tt){case ExtendedGatewayStatus$2.AWAITING_OWNER_TRANSACTION:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.CONFIRM_OWNER_TRANSACTION:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.CHAIN_TIMEOUT_ERROR:return GatewayStatus$3.ERROR;case ExtendedGatewayStatus$2.CHAIN_TRANSACTION_ERROR:return GatewayStatus$3.ERROR;case ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.TOKEN_REFRESH_IN_REVIEW:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.RESTART:return GatewayStatus$3.NOT_REQUESTED;case ExtendedGatewayStatus$2.RESTART_REFRESH:return GatewayStatus$3.REFRESH_TOKEN_REQUIRED;case ExtendedGatewayStatus$2.CHAIN_SIGN_MESSAGE_ERROR:return GatewayStatus$3.ERROR;case ExtendedGatewayStatus$2.ISSUANCE_AWAITING_TRANSACTION_SEND:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION:return GatewayStatus$3.NOT_REQUESTED;case ExtendedGatewayStatus$2.ISSUANCE_CLIENT_PAYER_REQUESTED:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.REFRESH_USER_INFORMATION_VALIDATED:return GatewayStatus$3.USER_INFORMATION_VALIDATED;case ExtendedGatewayStatus$2.REFRESH_CLIENT_PAYER_REQUESTED:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.REFRESH_IN_REVIEW:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.REFRESH_AWAITING_TRANSACTION_SEND:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_START_NEW_TX:return GatewayStatus$3.USER_INFORMATION_VALIDATED;case ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_START_NEW_TX:return GatewayStatus$3.USER_INFORMATION_VALIDATED;case ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX:return GatewayStatus$3.IN_REVIEW;case ExtendedGatewayStatus$2.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX:return GatewayStatus$3.IN_REVIEW;default:return tt}},DEFAULT_FLOW_ID_PREFIX$1="GWC",flowTypeFromState$1=function(tt,et){var rt,nt,at,it,st,dt,pt,mt,yt;if(!((rt=tt.inputs.gatewayToken)===null||rt===void 0)&&rt.received){var Rt=isTokenRefreshRequired$2({gatewayToken:(nt=tt.inputs.gatewayToken)===null||nt===void 0?void 0:nt.received,tokenExpirationMarginSeconds:0,forceRequireRefresh:(it=(at=tt.inputs)===null||at===void 0?void 0:at.dynamicParameters)===null||it===void 0?void 0:it.forceRequireRefresh});return Rt||!((st=tt.internal.status)===null||st===void 0)&&st.toLowerCase().includes("refresh")||et.toLowerCase().includes("refresh")||!((pt=(dt=tt.output)===null||dt===void 0?void 0:dt.flowParameters)===null||pt===void 0)&&pt.flowId.toLowerCase().includes(FlowType$2.REFRESH.toLowerCase())?FlowType$2.REFRESH:!((yt=(mt=tt.output)===null||mt===void 0?void 0:mt.flowParameters)===null||yt===void 0)&&yt.flowId.toLowerCase().includes(FlowType$2.ISSUANCE.toLowerCase())?FlowType$2.ISSUANCE:FlowType$2.STATUS}return[GatewayStatus$3.CHECKING,GatewayStatus$3.UNKNOWN].includes(et)?FlowType$2.STATUS:FlowType$2.ISSUANCE},getFlowId$1=function(tt,et){var rt,nt,at,it=(nt=(rt=tt.output)===null||rt===void 0?void 0:rt.flowParameters)===null||nt===void 0?void 0:nt.flowId,st=flowTypeFromState$1(tt,et),dt="".concat(st,"_");return!it||it===""||!it.includes(dt)?"".concat(((at=tt.inputs.parameters)===null||at===void 0?void 0:at.flowIdPrefix)||DEFAULT_FLOW_ID_PREFIX$1,"_").concat(dt).concat(v4$1()):it},initialFlowResultStatuses$1=[GatewayStatus$3.REFRESH_TOKEN_REQUIRED,GatewayStatus$3.FROZEN,GatewayStatus$3.REVOKED,GatewayStatus$3.ERROR],flowResultsStatuses$1=[GatewayStatus$3.ACTIVE,GatewayStatus$3.REFRESH_TOKEN_REQUIRED,GatewayStatus$3.FROZEN,GatewayStatus$3.REVOKED,GatewayStatus$3.ERROR],flowStatusFromState$1=function(tt,et){var rt,nt,at,it,st,dt,pt,mt,yt,Rt,Tt,At,xt,Nt,Ct;if(!((rt=tt.internal)===null||rt===void 0)&&rt.userInteraction){var Ot=tt.internal.status;return Ot===GatewayStatus$3.CHECKING&&initialFlowResultStatuses$1.includes(et)||Ot!==GatewayStatus$3.CHECKING&&flowResultsStatuses$1.includes(et)&&!flowResultsStatuses$1.includes(Ot)||Ot===GatewayStatus$3.ACTIVE&&(!((at=(nt=tt.inputs)===null||nt===void 0?void 0:nt.dynamicParameters)===null||at===void 0)&&at.forceRequireRefresh)?((dt=(st=(it=tt.inputs.gatekeeperNetworkData)===null||it===void 0?void 0:it.received)===null||st===void 0?void 0:st.client)===null||dt===void 0?void 0:dt.tokenActiveDisplay)==="hidden"?FlowStatus$2.FINISHED:FlowStatus$2.RESULT:((pt=tt.internal)===null||pt===void 0?void 0:pt.userInteraction.status)===UserInteractionStatus$2.FINISHED||Ot===GatewayStatus$3.ACTIVE&&((Rt=(yt=(mt=tt.inputs.gatekeeperNetworkData)===null||mt===void 0?void 0:mt.received)===null||yt===void 0?void 0:yt.client)===null||Rt===void 0?void 0:Rt.tokenActiveDisplay)==="hidden"&&((At=(Tt=tt.internal)===null||Tt===void 0?void 0:Tt.userInteraction)===null||At===void 0?void 0:At.status)===null?FlowStatus$2.FINISHED:((xt=tt.internal)===null||xt===void 0?void 0:xt.userInteraction.status)===UserInteractionStatus$2.STARTED?FlowStatus$2.IN_PROGRESS:(Ct=(Nt=tt.output)===null||Nt===void 0?void 0:Nt.flowState)===null||Ct===void 0?void 0:Ct.status}},handleChainError$2=function(tt){var et,rt,nt,at,it,st,dt,pt;if(((et=tt.inputs.civicPass.received)===null||et===void 0?void 0:et.event)===CivicPassMessageEventResult$2.FAILURE&&((rt=tt.inputs.civicPass.received)===null||rt===void 0?void 0:rt.action)===CivicPassMessageAction$2.CHAIN_ERROR){var mt=!!(!((nt=tt.inputs.gatewayToken)===null||nt===void 0)&&nt.received);return((at=tt.inputs.civicSign)===null||at===void 0?void 0:at.status)===InputStatus$2.ERROR?mt?ExtendedGatewayStatus$2.RESTART_REFRESH:ExtendedGatewayStatus$2.RESTART:!((it=tt.internal.chainTransaction)===null||it===void 0)&&it.error&&(tt.internal.chainTransaction.attempts||0)<=(((dt=(st=tt.inputs.parameters)===null||st===void 0?void 0:st.options)===null||dt===void 0?void 0:dt.clientSendsMaxRetries)||DEFAULT_MAX_CLIENT_SENDS_RETRIES$2)?mt?payerIsWalletOwner$2(tt)?ExtendedGatewayStatus$2.REFRESH_AWAITING_TRANSACTION_SEND:ExtendedGatewayStatus$2.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND:payerIsWalletOwner$2(tt)?ExtendedGatewayStatus$2.ISSUANCE_AWAITING_TRANSACTION_SEND:ExtendedGatewayStatus$2.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND:mt?payerIsWalletOwner$2(tt)?ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX:ExtendedGatewayStatus$2.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX:payerIsWalletOwner$2(tt)?ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX:ExtendedGatewayStatus$2.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX}return(pt=tt.internal)===null||pt===void 0?void 0:pt.status},handleGatekeeperError$2=function(tt){var et,rt,nt,at=!!tt.inputs.gatewayToken.received;return((et=tt.inputs.civicPass.received)===null||et===void 0?void 0:et.event)===CivicPassMessageEventResult$2.FAILURE&&((rt=tt.inputs.civicPass.received)===null||rt===void 0?void 0:rt.action)===CivicPassMessageAction$2.ERROR?at?ExtendedGatewayStatus$2.RESTART_REFRESH:ExtendedGatewayStatus$2.RESTART:(nt=tt.internal)===null||nt===void 0?void 0:nt.status},getPendingRequestFromGatekeeperRecord$2=function(tt){var et,rt,nt;return((rt=(et=tt==null?void 0:tt.received)===null||et===void 0?void 0:et.payload)===null||rt===void 0?void 0:rt.pending)||((nt=tt==null?void 0:tt.received)===null||nt===void 0?void 0:nt.pending)},calculateIssuanceStartPreApprovedTransaction$1=function(tt){var et,rt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received;if((rt==null?void 0:rt.action)===CivicPassMessageAction$2.START_PRE_APPROVED_TRANSACTION&&(rt==null?void 0:rt.event)===CivicPassMessageEventResult$2.SUCCESS&&(rt==null?void 0:rt.payload)!==void 0)return payerIsWalletOwner$2(tt)?ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX:ExtendedGatewayStatus$2.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX},hasExistingDataCollectionProcessInProgress$1=function(tt){var et;return(tt==null?void 0:tt.action)===CivicPassMessageAction$2.STATUS&&(tt==null?void 0:tt.event)===CivicPassMessageEventResult$2.SUCCESS&&((et=tt.payload)===null||et===void 0?void 0:et.status)!==ValidationStatus$2.NOT_FOUND||(tt==null?void 0:tt.action)===CivicPassMessageAction$2.ISSUANCE&&(tt==null?void 0:tt.event)===CivicPassMessageEventResult$2.IN_PROGRESS},isInPartnerReview$2=function(tt){return!!getPendingRequestFromGatekeeperRecord$2(tt)},preApprovedTxAvailable$1=function(tt){var et,rt;return!!(!((rt=(et=tt==null?void 0:tt.received)===null||et===void 0?void 0:et.payload)===null||rt===void 0)&&rt.preApprovedTxAvailable)},calculateFromIssuanceAwaitingOnChain$2=function(tt){var et,rt;if(((rt=(et=tt.internal.errors)===null||et===void 0?void 0:et.expectedOnChainToken)===null||rt===void 0?void 0:rt.errorCode)===ErrorCode$2.CHAIN_CONFIRMATION_TIMEOUT_ERROR)return ExtendedGatewayStatus$2.CHAIN_TIMEOUT_ERROR},calculateFromIssuanceInReview$2=function(tt){var et,rt,nt,at,it,st,dt,pt,mt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received,yt=tt.inputs.gatekeeperRecord;return(yt==null?void 0:yt.status)===InputStatus$2.IN_PROGRESS?tt.internal.status:isInPartnerReview$2(yt)?ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW:!((rt=tt.inputs.parameters)===null||rt===void 0)&&rt.payer?(yt==null?void 0:yt.status)===InputStatus$2.COMPLETE&&(mt==null?void 0:mt.action)!==CivicPassMessageAction$2.ISSUANCE&&!(!((nt=yt.received)===null||nt===void 0)&&nt.transaction)?ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION:!((it=(at=tt.internal)===null||at===void 0?void 0:at.chainTransaction)===null||it===void 0)&&it.sentTxId?ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN:!((dt=(st=tt.internal)===null||st===void 0?void 0:st.chainTransaction)===null||dt===void 0)&&dt.error?ExtendedGatewayStatus$2.CHAIN_TRANSACTION_ERROR:!((pt=yt.received)===null||pt===void 0)&&pt.transaction?payerIsWalletOwner$2(tt)?ExtendedGatewayStatus$2.ISSUANCE_AWAITING_TRANSACTION_SEND:ExtendedGatewayStatus$2.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND:void 0:ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN},calculateFromGatekeeperIssuanceRequested$2=function(tt){var et,rt,nt,at=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received,it=tt.inputs.gatekeeperRecord;if(at&&(((rt=it==null?void 0:it.received)===null||rt===void 0?void 0:rt.state)===GatekeeperAPIStatus$2.REQUESTED||(it==null?void 0:it.status)===InputStatus$2.IN_PROGRESS))return!((nt=tt.inputs.parameters)===null||nt===void 0)&&nt.payer&&payerIsWalletOwner$2(tt)?ExtendedGatewayStatus$2.ISSUANCE_CLIENT_PAYER_REQUESTED:GatewayStatus$3.IN_REVIEW},calculateIssuanceRequestedDataCollectionRestart$2=function(tt){var et,rt,nt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received;if((nt==null?void 0:nt.event)===CivicPassMessageEventResult$2.FAILURE)return ExtendedGatewayStatus$2.RESTART;var at=validationProcessToGatewayStatus$2[(rt=nt==null?void 0:nt.payload)===null||rt===void 0?void 0:rt.status];if((nt==null?void 0:nt.action)===CivicPassMessageAction$2.STATUS&&(nt==null?void 0:nt.event)===CivicPassMessageEventResult$2.SUCCESS&&at)return at===GatewayStatus$3.USER_INFORMATION_VALIDATED?nt.payload?GatewayStatus$3.USER_INFORMATION_VALIDATED:GatewayStatus$3.NOT_REQUESTED:at;if((nt==null?void 0:nt.action)===CivicPassMessageAction$2.ISSUANCE&&(nt==null?void 0:nt.event)===CivicPassMessageEventResult$2.SUCCESS)return GatewayStatus$3.USER_INFORMATION_VALIDATED;if(hasExistingDataCollectionProcessInProgress$1(nt))return at||GatewayStatus$3.COLLECTING_USER_INFORMATION},computeIssuanceDataCollectionRestart$2=function(tt){var et;return statusFromGatewayTokenIfExists$2(tt)||calculateIssuanceRequestedDataCollectionRestart$2(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeIssuanceRequested$2=function(tt){var et;return statusFromGatewayTokenIfExists$2(tt)||calculateFromGatekeeperIssuanceRequested$2(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeIssuanceAwaitingOnChainToken$2=function(tt){var et;return statusFromGatewayTokenIfExists$2(tt)||calculateFromIssuanceAwaitingOnChain$2(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeIssuanceInReview$2=function(tt){var et;return statusFromGatewayTokenIfExists$2(tt)||statusIfGatekeeperRecordRejected$2(tt)||calculateFromIssuanceInReview$2(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},calculateIssuanceStatus$2=function(tt){var et,rt,nt,at,it,st,dt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received,pt=tt.inputs.gatekeeperRecord;if((dt==null?void 0:dt.event)===CivicPassMessageEventResult$2.FAILURE)return ExtendedGatewayStatus$2.RESTART;if((dt==null?void 0:dt.action)===CivicPassMessageAction$2.ISSUANCE&&(dt==null?void 0:dt.event)===CivicPassMessageEventResult$2.SUCCESS)return GatewayStatus$3.USER_INFORMATION_VALIDATED;if(!(pt!=null&&pt.received)||((rt=pt==null?void 0:pt.received)===null||rt===void 0?void 0:rt.state)===GatekeeperAPIStatus$2.NOT_REQUESTED){if(hasExistingDataCollectionProcessInProgress$1(dt)){var mt=validationProcessToGatewayStatus$2[(nt=dt==null?void 0:dt.payload)===null||nt===void 0?void 0:nt.status];return mt===GatewayStatus$3.USER_INFORMATION_VALIDATED?GatewayStatus$3.NOT_REQUESTED:mt||GatewayStatus$3.COLLECTING_USER_INFORMATION}return GatewayStatus$3.NOT_REQUESTED}if(((at=pt==null?void 0:pt.received)===null||at===void 0?void 0:at.state)===GatekeeperAPIStatus$2.REQUESTED){if(preApprovedTxAvailable$1(pt))return payerIsWalletOwner$2(tt)?ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_START_NEW_TX:ExtendedGatewayStatus$2.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX;if(isInPartnerReview$2(pt))return ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW;if(!((it=tt.inputs.parameters)===null||it===void 0)&&it.payer){if((pt==null?void 0:pt.status)===InputStatus$2.COMPLETE&&(dt==null?void 0:dt.action)!==CivicPassMessageAction$2.ISSUANCE&&!(!((st=pt.received)===null||st===void 0)&&st.transaction))return ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION}else return ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN}},computeIssuanceStatus$2=function(tt){var et;return statusFromGatewayTokenIfExists$2(tt)||calculateIssuanceStatus$2(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeIssuanceStartPreApprovedTransaction$1=function(tt){var et;return statusFromGatewayTokenIfExists$2(tt)||calculateIssuanceStartPreApprovedTransaction$1(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},civicPassStatusLookupInProgress$1=function(tt){var et,rt,nt;return((et=tt.inputs.civicPass.received)===null||et===void 0?void 0:et.action)===CivicPassMessageAction$2.STATUS&&(!tt.inputs.gatewayToken.status||tt.inputs.gatewayToken.status===InputStatus$2.IN_PROGRESS||!(!((rt=tt.inputs.parameters)===null||rt===void 0)&&rt.disableInitialGatekeeperLookup)&&(!tt.inputs.gatekeeperRecord.status||((nt=tt.inputs.gatekeeperRecord)===null||nt===void 0?void 0:nt.status)===InputStatus$2.IN_PROGRESS))},computeChecking$2=function(tt){if(!tt.inputs.civicPass.status||civicPassStatusLookupInProgress$1(tt)){if(tt.inputs.gatekeeperRecord.status===InputStatus$2.ERROR||tt.inputs.gatewayToken.status===InputStatus$2.ERROR)return GatewayStatus$3.ERROR;if(tt.inputs.gatekeeperRecord.status===InputStatus$2.IN_PROGRESS||tt.inputs.gatewayToken.status===InputStatus$2.IN_PROGRESS)return GatewayStatus$3.CHECKING}},checkForInProgress$2=function(tt){var et;return statusFromGatewayTokenIfExists$2(tt)||computeChecking$2(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeInitialState$2=function(tt){var et;return computeChecking$2(tt)||statusIfGatekeeperRecordRejected$2(tt)||statusFromGatewayTokenIfExists$2(tt)||computeIssuanceStatus$2(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},calculateRefreshStartPreApprovedTransaction$1=function(tt){var et,rt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received;if((rt==null?void 0:rt.action)===CivicPassMessageAction$2.START_PRE_APPROVED_TRANSACTION&&(rt==null?void 0:rt.event)===CivicPassMessageEventResult$2.SUCCESS&&(rt==null?void 0:rt.payload)!==void 0)return payerIsWalletOwner$2(tt)?ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX:ExtendedGatewayStatus$2.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX},calculateFromRefreshInReview$2=function(tt){var et,rt,nt,at,it,st,dt=tt.inputs.gatekeeperRecord;if(!((et=tt.inputs.parameters)===null||et===void 0)&&et.payer){if(!((nt=(rt=tt.internal)===null||rt===void 0?void 0:rt.chainTransaction)===null||nt===void 0)&&nt.sentTxId)return ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN;if(!((it=(at=tt.internal)===null||at===void 0?void 0:at.chainTransaction)===null||it===void 0)&&it.error)return ExtendedGatewayStatus$2.CHAIN_TRANSACTION_ERROR;if(!((st=dt.received)===null||st===void 0)&&st.transaction)return payerIsWalletOwner$2(tt)?ExtendedGatewayStatus$2.REFRESH_AWAITING_TRANSACTION_SEND:ExtendedGatewayStatus$2.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND}else return ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN},calculateFromGatekeeperRefreshRequested$2=function(tt){var et,rt,nt=tt.inputs.gatekeeperRecord;if(((et=nt==null?void 0:nt.received)===null||et===void 0?void 0:et.state)===GatekeeperAPIStatus$2.REQUESTED||(nt==null?void 0:nt.status)===InputStatus$2.IN_PROGRESS)return!((rt=tt.inputs.parameters)===null||rt===void 0)&&rt.payer&&payerIsWalletOwner$2(tt)?ExtendedGatewayStatus$2.REFRESH_CLIENT_PAYER_REQUESTED:ExtendedGatewayStatus$2.REFRESH_IN_REVIEW},tokenNotRefreshRequired$2=function(tt){var et=statusFromGatewayTokenIfExists$2(tt);return et&&![ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN,GatewayStatus$3.REFRESH_TOKEN_REQUIRED].includes(et)?et:void 0},computeRefreshRequested$2=function(tt){var et;return tokenNotRefreshRequired$2(tt)||calculateFromGatekeeperRefreshRequested$2(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeRefreshInReview$2=function(tt){var et;return tokenNotRefreshRequired$2(tt)||statusIfGatekeeperRecordRejected$2(tt)||calculateFromRefreshInReview$2(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},calculateRefreshStatus$2=function(tt){var et,rt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received;if(preApprovedTxAvailable$1(tt.inputs.gatekeeperRecord))return payerIsWalletOwner$2(tt)?ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_START_NEW_TX:ExtendedGatewayStatus$2.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX;if((rt==null?void 0:rt.action)===CivicPassMessageAction$2.REFRESH&&(rt==null?void 0:rt.event)===CivicPassMessageEventResult$2.SUCCESS)return ExtendedGatewayStatus$2.REFRESH_USER_INFORMATION_VALIDATED},computeRefreshStatus$2=function(tt){var et;return tokenNotRefreshRequired$2(tt)||statusIfGatekeeperRecordRejected$2(tt)||calculateRefreshStatus$2(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},calculateFromRefreshAwaitingOnChain$2=function(tt){var et,rt;if(((rt=(et=tt.internal.errors)===null||et===void 0?void 0:et.expectedOnChainToken)===null||rt===void 0?void 0:rt.errorCode)===ErrorCode$2.CHAIN_CONFIRMATION_TIMEOUT_ERROR)return ExtendedGatewayStatus$2.CHAIN_TIMEOUT_ERROR},computeRefreshAwaitingOnChainToken$2=function(tt){var et;return tokenNotRefreshRequired$2(tt)||statusIfGatekeeperRecordRejected$2(tt)||calculateFromRefreshAwaitingOnChain$2(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeRefreshStartPreApprovedTransaction$1=function(tt){var et;return tokenNotRefreshRequired$2(tt)||calculateRefreshStartPreApprovedTransaction$1(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},_a$4,logDebug$5=prefixLogger$2("gatewayStatus").debug,logError$4=prefixLogger$2("gatewayStatus").error,gatewayTokenStatuses$2=[GatewayStatus$3.ACTIVE,GatewayStatus$3.FROZEN,GatewayStatus$3.REVOKED,GatewayStatus$3.REFRESH_TOKEN_REQUIRED],validationProcessStatuses$2=[GatewayStatus$3.COLLECTING_USER_INFORMATION,GatewayStatus$3.VALIDATING_USER_INFORMATION,GatewayStatus$3.USER_INFORMATION_REJECTED,GatewayStatus$3.USER_INFORMATION_VALIDATED],errorStatuses$2=[GatewayStatus$3.REJECTED,GatewayStatus$3.ERROR,GatewayStatus$3.LOCATION_NOT_SUPPORTED,GatewayStatus$3.VPN_NOT_SUPPORTED];function createTransition$2(tt,et){return{nextState:tt,compute:et}}var transitions$1=(_a$4={},_a$4[GatewayStatus$3.UNKNOWN]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[GatewayStatus$3.CHECKING],!1),checkForInProgress$2),_a$4[GatewayStatus$3.CHECKING]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),errorStatuses$2,!0),validationProcessStatuses$2,!0),[GatewayStatus$3.NOT_REQUESTED,ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION,ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_START_NEW_TX,ExtendedGatewayStatus$2.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_START_NEW_TX,ExtendedGatewayStatus$2.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX],!1),computeInitialState$2),_a$4[GatewayStatus$3.NOT_REQUESTED]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),validationProcessStatuses$2,!0),[ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,GatewayStatus$3.NOT_REQUESTED,ExtendedGatewayStatus$2.RESTART,ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION],!1),computeIssuanceStatus$2),_a$4[GatewayStatus$3.COLLECTING_USER_INFORMATION]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),validationProcessStatuses$2,!0),[ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,GatewayStatus$3.NOT_REQUESTED,ExtendedGatewayStatus$2.RESTART,ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION],!1),computeIssuanceStatus$2),_a$4[GatewayStatus$3.USER_INFORMATION_VALIDATED]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[ExtendedGatewayStatus$2.ISSUANCE_CLIENT_PAYER_REQUESTED,GatewayStatus$3.IN_REVIEW],!1),computeIssuanceRequested$2),_a$4[ExtendedGatewayStatus$2.ISSUANCE_CLIENT_PAYER_REQUESTED]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),errorStatuses$2,!0),[ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW],!1),computeIssuanceInReview$2),_a$4[GatewayStatus$3.IN_REVIEW]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),errorStatuses$2,!0),[ExtendedGatewayStatus$2.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW],!1),computeIssuanceInReview$2),_a$4[GatewayStatus$3.REJECTED]=createTransition$2([],function(){return GatewayStatus$3.REJECTED}),_a$4[ExtendedGatewayStatus$2.ISSUANCE_AWAITING_TRANSACTION_SEND]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$2.CONFIRM_OWNER_TRANSACTION,ExtendedGatewayStatus$2.CHAIN_TRANSACTION_ERROR],!1),computeIssuanceInReview$2),_a$4[ExtendedGatewayStatus$2.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$2.CONFIRM_OWNER_TRANSACTION,ExtendedGatewayStatus$2.CHAIN_TRANSACTION_ERROR],!1),computeIssuanceInReview$2),_a$4[ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[ExtendedGatewayStatus$2.CHAIN_TIMEOUT_ERROR],!1),computeIssuanceAwaitingOnChainToken$2),_a$4[ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),validationProcessStatuses$2,!0),[GatewayStatus$3.USER_INFORMATION_VALIDATED,ExtendedGatewayStatus$2.ISSUANCE_CLIENT_PAYER_REQUESTED,GatewayStatus$3.NOT_REQUESTED],!1),computeIssuanceDataCollectionRestart$2),_a$4[GatewayStatus$3.REVOKED]=createTransition$2([],handleGatewayTokenExistsStatus$2),_a$4[GatewayStatus$3.FROZEN]=createTransition$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),handleGatewayTokenExistsStatus$2),_a$4[GatewayStatus$3.ACTIVE]=createTransition$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),handleGatewayTokenExistsStatus$2),_a$4[GatewayStatus$3.ERROR]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[ExtendedGatewayStatus$2.RESTART,ExtendedGatewayStatus$2.RESTART_REFRESH],!1),handleGatekeeperError$2),_a$4[GatewayStatus$3.LOCATION_NOT_SUPPORTED]=createTransition$2([],function(){return GatewayStatus$3.LOCATION_NOT_SUPPORTED}),_a$4[GatewayStatus$3.VPN_NOT_SUPPORTED]=createTransition$2([],function(){return GatewayStatus$3.VPN_NOT_SUPPORTED}),_a$4[GatewayStatus$3.REFRESH_TOKEN_REQUIRED]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[ExtendedGatewayStatus$2.REFRESH_USER_INFORMATION_VALIDATED,ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_START_NEW_TX],!1),computeRefreshStatus$2),_a$4[ExtendedGatewayStatus$2.REFRESH_USER_INFORMATION_VALIDATED]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[ExtendedGatewayStatus$2.REFRESH_CLIENT_PAYER_REQUESTED,ExtendedGatewayStatus$2.REFRESH_IN_REVIEW],!1),computeRefreshRequested$2),_a$4[ExtendedGatewayStatus$2.REFRESH_IN_REVIEW]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),errorStatuses$2,!0),[ExtendedGatewayStatus$2.REFRESH_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$2.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),computeRefreshInReview$2),_a$4[ExtendedGatewayStatus$2.TOKEN_REFRESH_IN_REVIEW]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),errorStatuses$2,!0),[ExtendedGatewayStatus$2.REFRESH_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$2.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),computeRefreshInReview$2),_a$4[ExtendedGatewayStatus$2.REFRESH_CLIENT_PAYER_REQUESTED]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),errorStatuses$2,!0),[ExtendedGatewayStatus$2.REFRESH_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$2.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),computeRefreshInReview$2),_a$4[ExtendedGatewayStatus$2.REFRESH_AWAITING_TRANSACTION_SEND]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$2.CONFIRM_OWNER_TRANSACTION,ExtendedGatewayStatus$2.CHAIN_TRANSACTION_ERROR],!1),computeRefreshInReview$2),_a$4[ExtendedGatewayStatus$2.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$2.CONFIRM_OWNER_TRANSACTION,ExtendedGatewayStatus$2.CHAIN_TRANSACTION_ERROR],!1),computeRefreshInReview$2),_a$4[ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),errorStatuses$2,!0),[ExtendedGatewayStatus$2.CHAIN_TIMEOUT_ERROR],!1),computeRefreshAwaitingOnChainToken$2),_a$4[ExtendedGatewayStatus$2.CHAIN_TIMEOUT_ERROR]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[GatewayStatus$3.USER_INFORMATION_VALIDATED,ExtendedGatewayStatus$2.RESTART,ExtendedGatewayStatus$2.RESTART_REFRESH,ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX],!1),handleChainError$2),_a$4[ExtendedGatewayStatus$2.CHAIN_TRANSACTION_ERROR]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[ExtendedGatewayStatus$2.RESTART,ExtendedGatewayStatus$2.RESTART_REFRESH,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.REFRESH_AWAITING_TRANSACTION_SEND],!1),handleChainError$2),_a$4[ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),errorStatuses$2,!0),[ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN],!1),computeIssuanceInReview$2),_a$4[ExtendedGatewayStatus$2.RESTART]=createTransition$2([ExtendedGatewayStatus$2.RESTART],function(){return ExtendedGatewayStatus$2.RESTART}),_a$4[ExtendedGatewayStatus$2.RESTART_REFRESH]=createTransition$2([ExtendedGatewayStatus$2.RESTART_REFRESH],function(){return ExtendedGatewayStatus$2.RESTART_REFRESH}),_a$4[ExtendedGatewayStatus$2.CHAIN_SIGN_MESSAGE_ERROR]=createTransition$2([ExtendedGatewayStatus$2.RESTART,ExtendedGatewayStatus$2.RESTART_REFRESH,ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX],handleChainError$2),_a$4[GatewayStatus$3.VALIDATING_USER_INFORMATION]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),validationProcessStatuses$2,!0),[ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$2.RESTART,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION,GatewayStatus$3.NOT_REQUESTED],!1),computeIssuanceStatus$2),_a$4[GatewayStatus$3.USER_INFORMATION_REJECTED]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),validationProcessStatuses$2,!0),[ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$2.RESTART,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION,GatewayStatus$3.NOT_REQUESTED],!1),computeIssuanceStatus$2),_a$4[ExtendedGatewayStatus$2.AWAITING_OWNER_TRANSACTION]=createTransition$2([],function(){return ExtendedGatewayStatus$2.AWAITING_OWNER_TRANSACTION}),_a$4[ExtendedGatewayStatus$2.CONFIRM_OWNER_TRANSACTION]=createTransition$2([],function(){return ExtendedGatewayStatus$2.CONFIRM_OWNER_TRANSACTION}),_a$4[ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_START_NEW_TX]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX],!1),computeIssuanceStartPreApprovedTransaction$1),_a$4[ExtendedGatewayStatus$2.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),errorStatuses$2,!0),[ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$2.CHAIN_TRANSACTION_ERROR],!1),computeIssuanceInReview$2),_a$4[ExtendedGatewayStatus$2.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),errorStatuses$2,!0),[ExtendedGatewayStatus$2.ISSUANCE_RESTART_DATA_COLLECTION,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$2.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$2.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$2.CHAIN_TRANSACTION_ERROR],!1),computeIssuanceInReview$2),_a$4[ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_START_NEW_TX]=createTransition$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),[ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$2.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX],!1),computeRefreshStartPreApprovedTransaction$1),_a$4[ExtendedGatewayStatus$2.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),errorStatuses$2,!0),[ExtendedGatewayStatus$2.REFRESH_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$2.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),computeRefreshInReview$2),_a$4[ExtendedGatewayStatus$2.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX]=createTransition$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],gatewayTokenStatuses$2,!0),errorStatuses$2,!0),[ExtendedGatewayStatus$2.REFRESH_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$2.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$2.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),computeRefreshInReview$2),_a$4),isValidTransition$1=function(tt,et){var rt;return(rt=transitions$1[tt])===null||rt===void 0?void 0:rt.nextState.includes(et)},performTransition$1=function(tt){var et,rt,nt=(et=tt.internal)===null||et===void 0?void 0:et.status,at=(rt=transitions$1[nt])===null||rt===void 0?void 0:rt.compute;if(!at)throw new Error("No transition function defined for ".concat(nt," status"));var it=at(tt);if(it===nt)return nt;if(!isValidTransition$1(nt,it))throw logError$4("Invalid transition, throwing an error...",{currentStatus:nt,computedStatus:it}),new Error("Invalid transition, returning currentStatus currentStatus: ".concat(nt," computedStatus: ").concat(it));return logDebug$5("Transitioning to new status",{currentStatus:nt,computedStatus:it}),it},computeInternalStatus$1=function(tt){return tt.inputs.civicSign.status===InputStatus$2.ERROR&&!tt.inputs.civicPass.received?ExtendedGatewayStatus$2.CHAIN_SIGN_MESSAGE_ERROR:performTransition$1(tt)},isEmptyObject$1=function(tt){return tt==null||Object.keys(tt).length===0},computeFlowParameters$1=function(tt,et){var rt,nt,at,it,st,dt,pt,mt,yt,Rt,Tt,At,xt,Nt,Ct,Ot,kt,Pt,Dt,Gt,jt,Yt,tr,er,lr,It;if(!(!((rt=tt.inputs.parameters)===null||rt===void 0)&&rt.wallet&&(!((nt=tt.internal.chainDetails)===null||nt===void 0)&&nt.chainType)&&(!((at=tt.internal)===null||at===void 0)&&at.instanceId))||[GatewayStatus$3.UNKNOWN,GatewayStatus$3.CHECKING].includes(et))return null;var ot=((st=(it=tt.internal.errors)===null||it===void 0?void 0:it.expectedTokenGatekeeperRecord)===null||st===void 0?void 0:st.errorCode)||((pt=(dt=tt.internal.chainTransaction)===null||dt===void 0?void 0:dt.error)===null||pt===void 0?void 0:pt.errorCode)||((yt=(mt=tt.inputs.gatekeeperRecord)===null||mt===void 0?void 0:mt.received)===null||yt===void 0?void 0:yt.errorCode)||((At=(Tt=(Rt=tt.inputs.gatekeeperRecord)===null||Rt===void 0?void 0:Rt.received)===null||Tt===void 0?void 0:Tt.payload)===null||At===void 0?void 0:At.errorCode)||((Nt=(xt=tt.inputs.civicSign)===null||xt===void 0?void 0:xt.error)===null||Nt===void 0?void 0:Nt.errorCode),ft=gatewayStatusToCivicPassAction$1[et],ht=getFlowId$1(tt,et),vt=isEmptyObject$1((Ot=(Ct=tt.inputs.gatekeeperRecord)===null||Ct===void 0?void 0:Ct.received)===null||Ot===void 0?void 0:Ot.payload)?void 0:JSON.stringify((Pt=(kt=tt.inputs.gatekeeperRecord)===null||kt===void 0?void 0:kt.received)===null||Pt===void 0?void 0:Pt.payload),wt=!tt.inputs.parameters.gatekeeperSendsTransaction&&payerIsWalletOwner$2(tt);return __assign$2(__assign$2({action:ft,flowId:ht,ownerSigns:wt,errorCode:ot,flowType:flowTypeFromState$1(tt,et)},vt?{payload:vt}:{}),{redirectUrl:(Dt=tt.inputs.parameters)===null||Dt===void 0?void 0:Dt.redirectUrl,networkAddress:(Gt=tt.inputs.parameters)===null||Gt===void 0?void 0:Gt.gatekeeperNetwork,wallet:tt.inputs.parameters.wallet.address,chain:(jt=tt.internal.chainDetails)===null||jt===void 0?void 0:jt.chainType,chainNetwork:(Yt=tt.internal.chainDetails)===null||Yt===void 0?void 0:Yt.chainNetwork,did:(tr=tt.internal.ownerDids)===null||tr===void 0?void 0:tr[0],gatekeeperSendsTransaction:tt.inputs.parameters.gatekeeperSendsTransaction,partnerAppId:tt.inputs.parameters.partnerAppId,referrer:tt.inputs.parameters.referrer,instanceId:tt.internal.instanceId,hideWalletPrompts:tt.inputs.parameters.payer&&tt.inputs.parameters.payer!==tt.inputs.parameters.wallet.address?(er=tt.inputs.parameters.options)===null||er===void 0?void 0:er.hideWalletPrompts:void 0,signedTx:(It=(lr=tt.internal)===null||lr===void 0?void 0:lr.chainTransaction)===null||It===void 0?void 0:It.sentTxId})},IFRAME_ENDPOINTS$1={local:"http://localhost:3004",test:"http://localhost:3004",dev:"https://passv2-dev.civic.com",preprod:"https://passv2-preprod.civic.com",prod:"https://passv2.civic.com"},getCivicPassEndpoint$1=function(tt){var et=IFRAME_ENDPOINTS$1[tt];if(!et)throw new Error("Invalid stage ".concat(tt));return et},getUrl$1=function(tt,et){var rt,nt;if(et&&!((nt=(rt=tt.inputs)===null||rt===void 0?void 0:rt.parameters)===null||nt===void 0)&&nt.stage){var at=new URL(getCivicPassEndpoint$1(tt.inputs.parameters.stage)),it=objectToURLParams$2(et||{}),st=new URLSearchParams(it);return"".concat(at.href,"?").concat(st.toString())}},computeUiState$1=function(tt,et,rt){var nt,at,it,st,dt,pt,mt,yt,Rt,Tt,At=(nt=tt.inputs.parameters)===null||nt===void 0?void 0:nt.options,xt=!!(!((it=(at=tt.output)===null||at===void 0?void 0:at.ui)===null||it===void 0)&&it.isVisible);et===FlowStatus$2.FINISHED||((dt=(st=tt.internal)===null||st===void 0?void 0:st.userInteraction)===null||dt===void 0?void 0:dt.status)===UserInteractionStatus$2.FINISHED?xt=!1:(((mt=(pt=tt.internal)===null||pt===void 0?void 0:pt.userInteraction)===null||mt===void 0?void 0:mt.status)===UserInteractionStatus$2.STARTED||et===FlowStatus$2.IN_PROGRESS)&&(xt=!0),et===FlowStatus$2.RESULT&&(At!=null&&At.autoShowModal)&&(xt=!0);var Nt=getUrl$1(tt,rt),Ct=((Rt=(yt=tt.output)===null||yt===void 0?void 0:yt.ui)===null||Rt===void 0?void 0:Rt.url)!==Nt;return __assign$2(__assign$2({},(Tt=tt.output)===null||Tt===void 0?void 0:Tt.ui),{isLoading:Ct,url:Nt,isVisible:!!xt})},initialInternalState$1={status:GatewayStatus$3.UNKNOWN,userInteraction:{status:null},errors:{},ownerDids:[],chainDetails:void 0},initialOutputState$1={flowParameters:void 0,flowState:{status:void 0,userInteraction:{status:null,count:0}},gatewayStatus:GatewayStatus$3.UNKNOWN,gatewayToken:void 0,gatewayTokenTransaction:void 0,pendingRequests:void 0,ui:void 0},initialInputState$1={civicSign:{status:null,received:null},civicPass:{status:null,received:null},gatewayToken:{status:null,received:null},gatekeeperRecord:{status:null,received:null},parameters:null,dynamicParameters:{forceRequireRefresh:!1},gatekeeperNetworkData:{status:null,received:null}},initialState$1={inputs:initialInputState$1,internal:initialInternalState$1,output:initialOutputState$1},computeState$1=function(tt){var et,rt,nt,at,it,st,dt=computeInternalStatus$1(tt),pt=computeFlowParameters$1(tt,dt)||void 0,mt=flowStatusFromState$1(tt,dt),yt=__assign$2(__assign$2({},(et=tt.output)===null||et===void 0?void 0:et.ui),computeUiState$1(tt,mt,pt)),Rt=[FlowStatus$2.RESULT,FlowStatus$2.FINISHED].includes(mt)&&((at=(nt=(rt=tt.inputs.gatekeeperNetworkData)===null||rt===void 0?void 0:rt.received)===null||nt===void 0?void 0:nt.client)===null||at===void 0?void 0:at.tokenActiveDisplay)==="hidden"?null:tt.internal.userInteraction.status;return{internal:__assign$2(__assign$2({},tt.internal),{status:dt,userInteraction:__assign$2(__assign$2({},tt.internal.userInteraction),{status:Rt})}),output:__assign$2(__assign$2({},tt.output),{ui:yt,flowParameters:pt,flowState:{status:mt,userInteraction:__assign$2(__assign$2({},tt.internal.userInteraction),{status:Rt})},gatewayStatus:internalToOutputGatewayStatus$1(dt),gatewayToken:tt.inputs.gatewayToken.received||void 0,gatewayTokenTransaction:(st=(it=tt.inputs.gatekeeperRecord)===null||it===void 0?void 0:it.received)===null||st===void 0?void 0:st.transaction,pendingRequests:getPendingRequestFromGatekeeperRecord$2(tt.inputs.gatekeeperRecord)})}},combinedMiddleware$1=function(tt){return function(et){return subscribeWithSelector$1(computed$1(immer$2(devtools$1(et,tt))))}},createGatewayCoreStore$1=function(tt){return createStore$1(combinedMiddleware$1(tt)(function(et,rt){return __assign$2(__assign$2(__assign$2({},initialState$1),{functions:{reset:function(){return et(produce$1(function(nt){var at;nt.inputs=__assign$2(__assign$2({},initialInputState$1),{dynamicParameters:nt.inputs.dynamicParameters,parameters:nt.inputs.parameters}),nt.internal=__assign$2(__assign$2({},initialInternalState$1),{userInteraction:{status:nt.internal.userInteraction.status},instanceId:nt.internal.instanceId,ownerDids:[],chainDetails:nt.internal.chainDetails}),nt.output=__assign$2(__assign$2({},initialOutputState$1),{ui:(at=nt.output)===null||at===void 0?void 0:at.ui})}))}}}),compute$1(rt,computeState$1))}))},defaultValues$1={isVisible:!1,isLoading:!1,url:void 0,isLoaded:!1},UIManager$1=function(){function tt(et){this.gatewayCoreStore=et,this.log=prefixLogger$2("UIManager")}return tt.prototype.onShow=function(){this.log.debug("onShow"),this.gatewayCoreStore.setState(function(et){var rt;et.output=et.output||{gatewayStatus:GatewayStatus$3.UNKNOWN},et.output.ui=((rt=et.output)===null||rt===void 0?void 0:rt.ui)||__assign$2({},defaultValues$1),et.output.ui.isVisible=!0,et.internal.userInteraction.status=UserInteractionStatus$2.STARTED})},tt.prototype.onHide=function(){this.log.debug("onHide"),this.gatewayCoreStore.setState(function(et){var rt;et.output=et.output||{gatewayStatus:GatewayStatus$3.UNKNOWN},et.output.ui=((rt=et.output)===null||rt===void 0?void 0:rt.ui)||__assign$2({},defaultValues$1),et.output.ui.isVisible=!1,et.internal.userInteraction.status=UserInteractionStatus$2.FINISHED})},tt.prototype.onLoad=function(){this.log.debug("onLoad"),this.gatewayCoreStore.setState(function(et){var rt;et.output=et.output||{gatewayStatus:GatewayStatus$3.UNKNOWN},et.output.ui=((rt=et.output)===null||rt===void 0?void 0:rt.ui)||__assign$2({},defaultValues$1),et.output.ui.isLoading=!1,et.output.ui.isLoaded=!0})},tt}(),_placeholder$1={"@@functional/placeholder":!0};function _isPlaceholder$8(tt){return tt===_placeholder$1}function _curry1$Z(tt){return function et(rt){return arguments.length===0||_isPlaceholder$8(rt)?et:tt.apply(this,arguments)}}function _curry2$26(tt){return function et(rt,nt){switch(arguments.length){case 0:return et;case 1:return _isPlaceholder$8(rt)?et:_curry1$Z(function(at){return tt(rt,at)});default:return _isPlaceholder$8(rt)&&_isPlaceholder$8(nt)?et:_isPlaceholder$8(rt)?_curry1$Z(function(at){return tt(at,nt)}):_isPlaceholder$8(nt)?_curry1$Z(function(at){return tt(rt,at)}):tt(rt,nt)}}}function _arrayFromIterator$3(tt){for(var et=[],rt;!(rt=tt.next()).done;)et.push(rt.value);return et}function _includesWith$7(tt,et,rt){for(var nt=0,at=rt.length;nt<at;){if(tt(et,rt[nt]))return!0;nt+=1}return!1}function _functionName$3(tt){var et=String(tt).match(/^function (\w*)/);return et==null?"":et[1]}function _has$i(tt,et){return Object.prototype.hasOwnProperty.call(et,tt)}function _objectIs$4(tt,et){return tt===et?tt!==0||1/tt===1/et:tt!==tt&&et!==et}var _objectIs$1$2=typeof Object.is=="function"?Object.is:_objectIs$4,toString$9=Object.prototype.toString,_isArguments$5=function(){return toString$9.call(arguments)==="[object Arguments]"?function(et){return toString$9.call(et)==="[object Arguments]"}:function(et){return _has$i("callee",et)}}(),hasEnumBug$3=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps$3=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],hasArgsEnumBug$3=function(){return arguments.propertyIsEnumerable("length")}(),contains$3=function tt(et,rt){for(var nt=0;nt<et.length;){if(et[nt]===rt)return!0;nt+=1}return!1},keys$d=_curry1$Z(typeof Object.keys=="function"&&!hasArgsEnumBug$3?function tt(et){return Object(et)!==et?[]:Object.keys(et)}:function tt(et){if(Object(et)!==et)return[];var rt,nt,at=[],it=hasArgsEnumBug$3&&_isArguments$5(et);for(rt in et)_has$i(rt,et)&&(!it||rt!=="length")&&(at[at.length]=rt);if(hasEnumBug$3)for(nt=nonEnumerableProps$3.length-1;nt>=0;)rt=nonEnumerableProps$3[nt],_has$i(rt,et)&&!contains$3(at,rt)&&(at[at.length]=rt),nt-=1;return at}),type$5=_curry1$Z(function tt(et){return et===null?"Null":et===void 0?"Undefined":Object.prototype.toString.call(et).slice(8,-1)});function _uniqContentEquals$2(tt,et,rt,nt){var at=_arrayFromIterator$3(tt),it=_arrayFromIterator$3(et);function st(dt,pt){return _equals$3(dt,pt,rt.slice(),nt.slice())}return!_includesWith$7(function(dt,pt){return!_includesWith$7(st,pt,dt)},it,at)}function _equals$3(tt,et,rt,nt){if(_objectIs$1$2(tt,et))return!0;var at=type$5(tt);if(at!==type$5(et))return!1;if(typeof tt["fantasy-land/equals"]=="function"||typeof et["fantasy-land/equals"]=="function")return typeof tt["fantasy-land/equals"]=="function"&&tt["fantasy-land/equals"](et)&&typeof et["fantasy-land/equals"]=="function"&&et["fantasy-land/equals"](tt);if(typeof tt.equals=="function"||typeof et.equals=="function")return typeof tt.equals=="function"&&tt.equals(et)&&typeof et.equals=="function"&&et.equals(tt);switch(at){case"Arguments":case"Array":case"Object":if(typeof tt.constructor=="function"&&_functionName$3(tt.constructor)==="Promise")return tt===et;break;case"Boolean":case"Number":case"String":if(!(typeof tt==typeof et&&_objectIs$1$2(tt.valueOf(),et.valueOf())))return!1;break;case"Date":if(!_objectIs$1$2(tt.valueOf(),et.valueOf()))return!1;break;case"Error":return tt.name===et.name&&tt.message===et.message;case"RegExp":if(!(tt.source===et.source&&tt.global===et.global&&tt.ignoreCase===et.ignoreCase&&tt.multiline===et.multiline&&tt.sticky===et.sticky&&tt.unicode===et.unicode))return!1;break}for(var it=rt.length-1;it>=0;){if(rt[it]===tt)return nt[it]===et;it-=1}switch(at){case"Map":return tt.size!==et.size?!1:_uniqContentEquals$2(tt.entries(),et.entries(),rt.concat([tt]),nt.concat([et]));case"Set":return tt.size!==et.size?!1:_uniqContentEquals$2(tt.values(),et.values(),rt.concat([tt]),nt.concat([et]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var st=keys$d(tt);if(st.length!==keys$d(et).length)return!1;var dt=rt.concat([tt]),pt=nt.concat([et]);for(it=st.length-1;it>=0;){var mt=st[it];if(!(_has$i(mt,et)&&_equals$3(et[mt],tt[mt],dt,pt)))return!1;it-=1}return!0}var equals$d=_curry2$26(function tt(et,rt){return _equals$3(et,rt,[],[])}),equals$1$2=equals$d;function _cloneRegExp$5(tt){return new RegExp(tt.source,tt.flags?tt.flags:(tt.global?"g":"")+(tt.ignoreCase?"i":"")+(tt.multiline?"m":"")+(tt.sticky?"y":"")+(tt.unicode?"u":"")+(tt.dotAll?"s":""))}function _clone$6(tt,et,rt){if(rt||(rt=new _ObjectMap$2),_isPrimitive$2(tt))return tt;var nt=function(it){var st=rt.get(tt);if(st)return st;rt.set(tt,it);for(var dt in tt)Object.prototype.hasOwnProperty.call(tt,dt)&&(it[dt]=_clone$6(tt[dt],!0,rt));return it};switch(type$5(tt)){case"Object":return nt(Object.create(Object.getPrototypeOf(tt)));case"Array":return nt(Array(tt.length));case"Date":return new Date(tt.valueOf());case"RegExp":return _cloneRegExp$5(tt);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return tt.slice();default:return tt}}function _isPrimitive$2(tt){var et=typeof tt;return tt==null||et!="object"&&et!="function"}var _ObjectMap$2=function(){function tt(){this.map={},this.length=0}return tt.prototype.set=function(et,rt){var nt=this.hash(et),at=this.map[nt];at||(this.map[nt]=at=[]),at.push([et,rt]),this.length+=1},tt.prototype.hash=function(et){var rt=[];for(var nt in et)rt.push(Object.prototype.toString.call(et[nt]));return rt.join()},tt.prototype.get=function(et){if(this.length<=180){for(var rt in this.map)for(var st=this.map[rt],nt=0;nt<st.length;nt+=1){var at=st[nt];if(at[0]===et)return at[1]}return}var it=this.hash(et),st=this.map[it];if(st)for(var nt=0;nt<st.length;nt+=1){var at=st[nt];if(at[0]===et)return at[1]}},tt}(),clone$4=_curry1$Z(function tt(et){return et!=null&&typeof et.clone=="function"?et.clone():_clone$6(et)}),getInstanceInputObject$1=function(tt){var et;return tt?__assign$2(__assign$2({},tt.parameters),(et=tt.chainImplementation)===null||et===void 0?void 0:et.chainDetails):{}},shouldUpdateInstance$1=function(tt,et){return!et||!equals$1$2(getInstanceInputObject$1(et.inputs),getInstanceInputObject$1(tt))},hasRequiredInputs$1=function(tt){var et;return!!(!((et=tt.parameters.wallet)===null||et===void 0)&&et.address&&tt.chainImplementation)},getInstanceName$1=function(tt,et){var rt,nt,at,it,st,dt,pt,mt;return"gcc_".concat((nt=(rt=tt.parameters.wallet)===null||rt===void 0?void 0:rt.address)===null||nt===void 0?void 0:nt.substring(0,4),"_").concat((it=(at=tt.parameters)===null||at===void 0?void 0:at.gatekeeperNetwork)===null||it===void 0?void 0:it.substring(0,4),"_").concat((dt=(st=tt.chainImplementation)===null||st===void 0?void 0:st.chainDetails)===null||dt===void 0?void 0:dt.chainType,"_").concat((mt=(pt=tt.chainImplementation)===null||pt===void 0?void 0:pt.chainDetails)===null||mt===void 0?void 0:mt.chainNetwork,"_").concat(et.substring(0,4))},GatewayClientCore=function(){function tt(et){var rt=this,nt,at,it,st;this.inputs=et,this.instanceId=v4$1(),this.log=prefixLogger$2("Core instance: ".concat(this.instanceId)),(at=(nt=this.log)===null||nt===void 0?void 0:nt.setLogLevel)===null||at===void 0||at.call(nt,((st=(it=et.parameters)===null||it===void 0?void 0:it.options)===null||st===void 0?void 0:st.logLevel)||DEFAULT_LOG_LEVEL$2),this.log.info("GatewayClientCore created",{inputs:et}),this.gatewayCoreStore=createGatewayCoreStore$1({name:getInstanceName$1(et,this.instanceId),store:"gateway-client-core"}),this.log.info("GatewayClientCore gatewayCoreStore created",this.gatewayCoreStore),this.gatewayCoreStore.subscribe(function(dt){return dt.output},function(dt){rt.log.debug("GatewayClientCore output changed",dt),et.onOutputChange(clone$4(dt))}),this.orchestratorInst=new Orchestrator$1(this.gatewayCoreStore,et.messageEventInterface,this.instanceId,et.parameters,et.fetchConfig,et.postMessageTargetCallback,et.chainImplementation),this.gatewayCoreStore.setState(function(dt){dt.inputs.parameters=clone$4(__assign$2(__assign$2({},et.parameters),{payer:getPayer$2(et.parameters)})),dt.internal.chainDetails=clone$4(et.chainImplementation.chainDetails),dt.inputs.dynamicParameters=clone$4(et.dynamicParameters),dt.internal.instanceId=rt.instanceId}),this.orchestratorInst.orchestrate(),this.orchestratorInst.initialise(),this.uiInst=new UIManager$1(this.gatewayCoreStore)}return tt.getSingleInstance=function(et){var rt,nt,at=prefixLogger$2("GatewayClientCore.getSingleInstance");if(!hasRequiredInputs$1(et)){at.debug("Missing wallet address or chain implementation, aborting previous and setting to undefined",et),(rt=tt.currentInstance)===null||rt===void 0||rt.abort(),tt.currentInstance=void 0;return}return shouldUpdateInstance$1(et,tt.currentInstance)&&(at.debug("Inputs have changed, aborting previous and creating a new instance",et),(nt=tt.currentInstance)===null||nt===void 0||nt.abort(),tt.currentInstance=new tt(et)),tt.currentInstance},tt.prototype.updateDynamicParameters=function(et){this.gatewayCoreStore.setState(function(rt){rt.internal.userInteraction.status=null,rt.inputs.dynamicParameters=clone$4(et)})},tt.prototype.updateGatekeeperNetworkServiceData=function(et){this.gatewayCoreStore.setState(function(rt){rt.inputs.gatekeeperNetworkData=clone$4(et)})},tt.prototype.startOrResumeFlow=function(){this.gatewayCoreStore.setState(function(et){et.internal.userInteraction.status=UserInteractionStatus$2.STARTED})},tt.prototype.abort=function(){this.log.info("GatewayClientCore aborting"),this.orchestratorInst.abort()},Object.defineProperty(tt.prototype,"ui",{get:function(){var et=this;return{onShow:function(){return et.uiInst.onShow()},onHide:function(){return et.uiInst.onHide()},onLoad:function(){return et.uiInst.onLoad()}}},enumerable:!1,configurable:!0}),tt}(),propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function tt(nt,at,it,st,dt,pt){if(pt!==ReactPropTypesSecret){var mt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw mt.name="Invariant Violation",mt}}tt.isRequired=tt;function et(){return tt}var rt={array:tt,bigint:tt,bool:tt,func:tt,number:tt,object:tt,string:tt,symbol:tt,any:tt,arrayOf:et,element:tt,elementType:tt,instanceOf:et,node:tt,objectOf:et,oneOf:et,oneOfType:et,shape:et,exact:et,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return rt.PropTypes=rt,rt};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs$5(propTypesExports);function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(tt){for(var et=1;et<arguments.length;et++){var rt=arguments[et];for(var nt in rt)Object.prototype.hasOwnProperty.call(rt,nt)&&(tt[nt]=rt[nt])}return tt},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose(tt,et){if(tt==null)return{};var rt={};for(var nt in tt)if(Object.prototype.hasOwnProperty.call(tt,nt)){if(et.indexOf(nt)>=0)continue;rt[nt]=tt[nt]}return rt}function createCommonjsModule$1(tt,et){return et={exports:{}},tt(et,et.exports),et.exports}var iframeResizer=createCommonjsModule$1(function(tt){(function(et){if(typeof window>"u")return;var rt=0,nt,at=!1,it=!1,st="message",dt=st.length,pt="[iFrameSizer]",mt=pt.length,yt=null,Rt=window.requestAnimationFrame,Tt=Object.freeze({max:1,scroll:1,bodyScroll:1,documentElementScroll:1}),At={},xt=null,Nt=Object.freeze({autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,license:"1jqr0si6pnt",log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mouseEvents:!0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:function(){return!0},onClosed:function(){},onInit:function(){},onMessage:function(){er("onMessage function not defined")},onMouseEnter:function(){},onMouseLeave:function(){},onResized:function(){},onScroll:function(){return!0}});function Ct(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function Ot(ur,pr,Fr){ur.addEventListener(pr,Fr,!1)}function kt(ur,pr,Fr){ur.removeEventListener(pr,Fr,!1)}function Pt(){var ur=["moz","webkit","o","ms"],pr;for(pr=0;pr<ur.length&&!Rt;pr+=1)Rt=window[ur[pr]+"RequestAnimationFrame"];Rt?Rt=Rt.bind(window):Yt("setup","RequestAnimationFrame not supported")}function Dt(ur){var pr="Host page: "+ur;return window.top!==window.self&&(pr=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+ur:"Nested host page: "+ur),pr}function Gt(ur){return pt+"["+Dt(ur)+"]"}function jt(ur){return At[ur]?At[ur].log:at}function Yt(ur,pr){lr("log",ur,pr,jt(ur))}function tr(ur,pr){lr("info",ur,pr,jt(ur))}function er(ur,pr){lr("warn",ur,pr,!0)}function lr(ur,pr,Fr,yr){yr===!0&&typeof window.console=="object"&&console[ur](Gt(pr),Fr)}function It(ur){function pr(){function zr(){Et(Ir),wt(Nr),_r("onResized",Ir)}Wr("Height"),Wr("Width"),ct(zr,Ir,"init")}function Fr(){var zr=un.slice(mt).split(":"),br=zr[1]?parseInt(zr[1],10):0,Dr=At[zr[0]]&&At[zr[0]].iframe,yn=getComputedStyle(Dr);return{iframe:Dr,id:zr[0],height:br+yr(yn)+hr(yn),width:zr[2],type:zr[3]}}function yr(zr){if(zr.boxSizing!=="border-box")return 0;var br=zr.paddingTop?parseInt(zr.paddingTop,10):0,Dr=zr.paddingBottom?parseInt(zr.paddingBottom,10):0;return br+Dr}function hr(zr){if(zr.boxSizing!=="border-box")return 0;var br=zr.borderTopWidth?parseInt(zr.borderTopWidth,10):0,Dr=zr.borderBottomWidth?parseInt(zr.borderBottomWidth,10):0;return br+Dr}function Wr(zr){var br=Number(At[Nr]["max"+zr]),Dr=Number(At[Nr]["min"+zr]),yn=zr.toLowerCase(),Mr=Number(Ir[yn]);Yt(Nr,"Checking "+yn+" is in range "+Dr+"-"+br),Mr<Dr&&(Mr=Dr,Yt(Nr,"Set "+yn+" to min value")),Mr>br&&(Mr=br,Yt(Nr,"Set "+yn+" to max value")),Ir[yn]=""+Mr}function $r(){function zr(){function yn(){var qr=0,Sn=!1;for(Yt(Nr,"Checking connection is from allowed list of origins: "+Dr);qr<Dr.length;qr++)if(Dr[qr]===br){Sn=!0;break}return Sn}function Mr(){var qr=At[Nr]&&At[Nr].remoteHost;return Yt(Nr,"Checking connection is from: "+qr),br===qr}return Dr.constructor===Array?yn():Mr()}var br=ur.origin,Dr=At[Nr]&&At[Nr].checkOrigin;if(Dr&&""+br!="null"&&!zr())throw new Error("Unexpected message received from: "+br+" for "+Ir.iframe.id+". Message was: "+ur.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function Cr(){return pt===(""+un).slice(0,mt)&&un.slice(mt).split(":")[0]in At}function an(){var zr=Ir.type in{true:1,false:1,undefined:1};return zr&&Yt(Nr,"Ignoring init message from meta parent page"),zr}function Er(zr){return un.slice(un.indexOf(":")+dt+zr)}function Ar(zr){Yt(Nr,"onMessage passed: {iframe: "+Ir.iframe.id+", message: "+zr+"}"),_r("onMessage",{iframe:Ir.iframe,message:JSON.parse(zr)}),Yt(Nr,"--")}function gn(){var zr=document.body.getBoundingClientRect(),br=Ir.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:br.height,iframeWidth:br.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(br.top-zr.top,10),offsetLeft:parseInt(br.left-zr.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})}function Or(zr,br){function Dr(){St("Send Page Info","pageInfo:"+gn(),zr,br)}Ft(Dr,32,br)}function Lr(){function zr(Mr,qr){function Sn(){At[yn]?Or(At[yn].iframe,yn):br()}["scroll","resize"].forEach(function(Br){Yt(yn,Mr+Br+" listener for sendPageInfo"),qr(window,Br,Sn)})}function br(){zr("Remove ",kt)}function Dr(){zr("Add ",Ot)}var yn=Nr;Dr(),At[yn]&&(At[yn].stopPageInfo=br)}function wn(){At[Nr]&&At[Nr].stopPageInfo&&(At[Nr].stopPageInfo(),delete At[Nr].stopPageInfo)}function Xt(){var zr=!0;return Ir.iframe===null&&(er(Nr,"IFrame ("+Ir.id+") not found"),zr=!1),zr}function Bt(zr){var br=zr.getBoundingClientRect();return vt(Nr),{x:Math.floor(Number(br.left)+Number(yt.x)),y:Math.floor(Number(br.top)+Number(yt.y))}}function Wt(zr){function br(){yt=qr,nr(),Yt(Nr,"--")}function Dr(){return{x:Number(Ir.width)+Mr.x,y:Number(Ir.height)+Mr.y}}function yn(){window.parentIFrame?window.parentIFrame["scrollTo"+(zr?"Offset":"")](qr.x,qr.y):er(Nr,"Unable to scroll to requested position, window.parentIFrame not found")}var Mr=zr?Bt(Ir.iframe):{x:0,y:0},qr=Dr();Yt(Nr,"Reposition requested from iFrame (offset x:"+Mr.x+" y:"+Mr.y+")"),window.top===window.self?br():yn()}function nr(){_r("onScroll",yt)===!1?bt():wt(Nr)}function cr(zr){function br(){var Sn=Bt(qr);Yt(Nr,"Moving to in page link (#"+yn+") at x: "+Sn.x+" y: "+Sn.y),yt={x:Sn.x,y:Sn.y},nr(),Yt(Nr,"--")}function Dr(){window.parentIFrame?window.parentIFrame.moveToAnchor(yn):Yt(Nr,"In page link #"+yn+" not found and window.parentIFrame not found")}var yn=zr.split("#")[1]||"",Mr=decodeURIComponent(yn),qr=document.getElementById(Mr)||document.getElementsByName(Mr)[0];qr?br():window.top===window.self?Yt(Nr,"In page link #"+yn+" not found"):Dr()}function Sr(zr){var br={};if(Number(Ir.width)===0&&Number(Ir.height)===0){var Dr=Er(9).split(":");br={x:Dr[1],y:Dr[0]}}else br={x:Ir.width,y:Ir.height};_r(zr,{iframe:Ir.iframe,screenX:Number(br.x),screenY:Number(br.y),type:Ir.type})}function _r(zr,br){return ot(Nr,zr,br)}function xr(){switch(At[Nr]&&At[Nr].firstRun&&Ur(),Ir.type){case"close":{ht(Ir.iframe);break}case"message":{Ar(Er(6));break}case"mouseenter":{Sr("onMouseEnter");break}case"mouseleave":{Sr("onMouseLeave");break}case"autoResize":{At[Nr].autoResize=JSON.parse(Er(9));break}case"scrollTo":{Wt(!1);break}case"scrollToOffset":{Wt(!0);break}case"pageInfo":{Or(At[Nr]&&At[Nr].iframe,Nr),Lr();break}case"pageInfoStop":{wn();break}case"inPageLink":{cr(Er(9));break}case"reset":{$t(Ir);break}case"init":{pr(),_r("onInit",Ir.iframe);break}default:Number(Ir.width)===0&&Number(Ir.height)===0?er("Unsupported message received ("+Ir.type+"), this is likely due to the iframe containing a later version of iframe-resizer than the parent page"):pr()}}function pn(zr){var br=!0;return At[zr]||(br=!1,er(Ir.type+" No settings for "+zr+". Message was: "+un)),br}function Tr(){for(var zr in At)St("iFrame requested init",Mt(zr),At[zr].iframe,zr)}function Ur(){At[Nr]&&(At[Nr].firstRun=!1)}var un=ur.data,Ir={},Nr=null;un==="[iFrameResizerChild]Ready"?Tr():Cr()?(Ir=Fr(),Nr=Ir.id,At[Nr]&&(At[Nr].loaded=!0),!an()&&pn(Nr)&&(Yt(Nr,"Received: "+un),Xt()&&$r()&&xr())):tr(Nr,"Ignored: "+un)}function ot(ur,pr,Fr){var yr=null,hr=null;if(At[ur])if(yr=At[ur][pr],typeof yr=="function")hr=yr(Fr);else throw new TypeError(pr+" on iFrame["+ur+"] is not a function");return hr}function ft(ur){var pr=ur.id;delete At[pr]}function ht(ur){var pr=ur.id;if(ot(pr,"onClose",pr)===!1){Yt(pr,"Close iframe cancelled by onClose event");return}Yt(pr,"Removing iFrame: "+pr);try{ur.parentNode&&ur.parentNode.removeChild(ur)}catch(Fr){er(Fr)}ot(pr,"onClosed",pr),Yt(pr,"--"),ft(ur),nt&&(nt.disconnect(),nt=null)}function vt(ur){yt===null&&(yt={x:window.pageXOffset===et?document.documentElement.scrollLeft:window.pageXOffset,y:window.pageYOffset===et?document.documentElement.scrollTop:window.pageYOffset},Yt(ur,"Get page position: "+yt.x+","+yt.y))}function wt(ur){yt!==null&&(window.scrollTo(yt.x,yt.y),Yt(ur,"Set page position: "+yt.x+","+yt.y),bt())}function bt(){yt=null}function $t(ur){function pr(){Et(ur),St("reset","reset",ur.iframe,ur.id)}Yt(ur.id,"Size reset requested by "+(ur.type==="init"?"host page":"iFrame")),vt(ur.id),ct(pr,ur,"reset")}function Et(ur){function pr(Wr){if(!ur.id){Yt("undefined","messageData id not set");return}ur.iframe.style[Wr]=ur[Wr]+"px",Yt(ur.id,"IFrame ("+hr+") "+Wr+" set to "+ur[Wr]+"px")}function Fr(Wr){!it&&ur[Wr]==="0"&&(it=!0,Yt(hr,"Hidden iFrame detected, creating visibility listener"),zt())}function yr(Wr){pr(Wr),Fr(Wr)}var hr=ur.iframe.id;At[hr]&&(At[hr].sizeHeight&&yr("height"),At[hr].sizeWidth&&yr("width"))}function ct(ur,pr,Fr){Fr!==pr.type&&Rt&&!window.jasmine?(Yt(pr.id,"Requesting animation frame"),Rt(ur)):ur()}function St(ur,pr,Fr,yr,hr){function Wr(){var Ar=At[yr]&&At[yr].targetOrigin;Yt(yr,"["+ur+"] Sending msg to iframe["+yr+"] ("+pr+") targetOrigin: "+Ar),Fr.contentWindow.postMessage(pt+pr,Ar)}function $r(){er(yr,"["+ur+"] IFrame("+yr+") not found")}function Cr(){Fr&&"contentWindow"in Fr&&Fr.contentWindow!==null?Wr():$r()}function an(){function Ar(){At[yr]&&!At[yr].loaded&&!Er&&(Er=!0,er(yr,"IFrame has not responded within "+At[yr].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}hr&&At[yr]&&At[yr].warningTimeout&&(At[yr].msgTimeout=setTimeout(Ar,At[yr].warningTimeout))}var Er=!1;yr=yr||Fr.id,At[yr]&&(Cr(),an())}function Mt(ur){return ur+":"+At[ur].bodyMarginV1+":"+At[ur].sizeWidth+":"+At[ur].log+":"+At[ur].interval+":"+At[ur].enablePublicMethods+":"+At[ur].autoResize+":"+At[ur].bodyMargin+":"+At[ur].heightCalculationMethod+":"+At[ur].bodyBackground+":"+At[ur].bodyPadding+":"+At[ur].tolerance+":"+At[ur].inPageLinks+":"+At[ur].resizeFrom+":"+At[ur].widthCalculationMethod+":"+At[ur].mouseEvents}function Lt(ur){return typeof ur=="number"}function Ut(ur,pr){function Fr(){function Wt(cr){var Sr=At[Bt][cr];Sr!==1/0&&Sr!==0&&(ur.style[cr]=Lt(Sr)?Sr+"px":Sr,Yt(Bt,"Set "+cr+" = "+ur.style[cr]))}function nr(cr){if(At[Bt]["min"+cr]>At[Bt]["max"+cr])throw new Error("Value for min"+cr+" can not be greater than max"+cr)}nr("Height"),nr("Width"),Wt("maxHeight"),Wt("minHeight"),Wt("maxWidth"),Wt("minWidth")}function yr(){var Wt=pr&&pr.id||Nt.id+rt++;return document.getElementById(Wt)!==null&&(Wt+=rt++),Wt}function hr(Wt){if(typeof Wt!="string")throw new TypeError("Invaild id for iFrame. Expected String");return Wt===""&&(ur.id=Wt=yr(),at=(pr||{}).log,Yt(Wt,"Added missing iframe ID: "+Wt+" ("+ur.src+")")),Wt}function Wr(){switch(Yt(Bt,"IFrame scrolling "+(At[Bt]&&At[Bt].scrolling?"enabled":"disabled")+" for "+Bt),ur.style.overflow=(At[Bt]&&At[Bt].scrolling)===!1?"hidden":"auto",At[Bt]&&At[Bt].scrolling){case"omit":break;case!0:{ur.scrolling="yes";break}case!1:{ur.scrolling="no";break}default:ur.scrolling=At[Bt]?At[Bt].scrolling:"no"}}function $r(){(typeof(At[Bt]&&At[Bt].bodyMargin)=="number"||(At[Bt]&&At[Bt].bodyMargin)==="0")&&(At[Bt].bodyMarginV1=At[Bt].bodyMargin,At[Bt].bodyMargin=""+At[Bt].bodyMargin+"px")}function Cr(){var Wt=At[Bt]&&At[Bt].firstRun,nr=At[Bt]&&At[Bt].heightCalculationMethod in Tt;!Wt&&nr&&$t({iframe:ur,height:0,width:0,type:"init"})}function an(){At[Bt]&&(At[Bt].iframe.iFrameResizer={close:ht.bind(null,At[Bt].iframe),removeListeners:ft.bind(null,At[Bt].iframe),resize:St.bind(null,"Window resize","resize",At[Bt].iframe),moveToAnchor:function(Wt){St("Move to anchor","moveToAnchor:"+Wt,At[Bt].iframe,Bt)},sendMessage:function(Wt){Wt=JSON.stringify(Wt),St("Send Message","message:"+Wt,At[Bt].iframe,Bt)}})}function Er(Wt){function nr(){St("iFrame.onload",Wt,ur,et,!0),Cr()}function cr(_r){if(!ur.parentNode)return null;var xr=new _r(function(pn){pn.forEach(function(Tr){var Ur=Array.prototype.slice.call(Tr.removedNodes);Ur.forEach(function(un){un===ur&&ht(ur)})})});return xr.observe(ur.parentNode,{childList:!0}),xr}var Sr=Ct();Sr&&(nt=cr(Sr)),Ot(ur,"load",nr),St("init",Wt,ur,et,!0)}function Ar(Wt){if(typeof Wt!="object")throw new TypeError("Options is not an object")}function gn(Wt){for(var nr in Nt)Object.prototype.hasOwnProperty.call(Nt,nr)&&(At[Bt][nr]=Object.prototype.hasOwnProperty.call(Wt,nr)?Wt[nr]:Nt[nr])}function Or(Wt){return Wt===""||Wt.match(/^(about:blank|javascript:|file:\/\/)/)!==null?"*":Wt}function Lr(Wt){var nr=Wt.split("Callback");if(nr.length===2){var cr="on"+nr[0].charAt(0).toUpperCase()+nr[0].slice(1);this[cr]=this[Wt],delete this[Wt],er(Bt,"Deprecated: '"+Wt+"' has been renamed '"+cr+"'. The old method will be removed in the next major version.")}}function wn(Wt){Wt=Wt||{},At[Bt]=Object.create(null),At[Bt].iframe=ur,At[Bt].firstRun=!0,At[Bt].remoteHost=ur.src&&ur.src.split("/").slice(0,3).join("/"),Ar(Wt),Object.keys(Wt).forEach(Lr,Wt),gn(Wt),At[Bt]&&(At[Bt].targetOrigin=At[Bt].checkOrigin===!0?Or(At[Bt].remoteHost):"*")}function Xt(){return Bt in At&&"iFrameResizer"in ur}var Bt=hr(ur.id);Xt()?er(Bt,"Ignored iFrame, already setup."):(wn(pr),Wr(),Fr(),$r(),Er(Mt(Bt)),an())}function Kt(ur,pr){xt===null&&(xt=setTimeout(function(){xt=null,ur()},pr))}var Ht={};function Ft(ur,pr,Fr){Ht[Fr]||(Ht[Fr]=setTimeout(function(){Ht[Fr]=null,ur()},pr))}function zt(){function ur(){function hr(Wr){function $r(an){return(At[Wr]&&At[Wr].iframe.style[an])==="0px"}function Cr(an){return an.offsetParent!==null}At[Wr]&&Cr(At[Wr].iframe)&&($r("height")||$r("width"))&&St("Visibility change","resize",At[Wr].iframe,Wr)}Object.keys(At).forEach(function(Wr){hr(Wr)})}function pr(hr){Yt("window","Mutation observed: "+hr[0].target+" "+hr[0].type),Kt(ur,16)}function Fr(){var hr=document.querySelector("body"),Wr={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},$r=new yr(pr);$r.observe(hr,Wr)}var yr=Ct();yr&&Fr()}function ir(ur){function pr(){ar("Window "+ur,"resize")}Yt("window","Trigger event: "+ur),Kt(pr,16)}function sr(){function ur(){ar("Tab Visible","resize")}document.visibilityState!=="hidden"&&(Yt("document","Trigger event: Visibility change"),Kt(ur,16))}function ar(ur,pr){function Fr(yr){return At[yr]&&At[yr].resizeFrom==="parent"&&At[yr].autoResize&&!At[yr].firstRun}Object.keys(At).forEach(function(yr){Fr(yr)&&St(ur,pr,At[yr].iframe,yr)})}function Vt(){Ot(window,"message",It),Ot(window,"resize",function(){ir("resize")}),Ot(document,"visibilitychange",sr),Ot(document,"-webkit-visibilitychange",sr)}function fr(){function ur(yr,hr){function Wr(){if(hr.tagName){if(hr.tagName.toUpperCase()!=="IFRAME")throw new TypeError("Expected <IFRAME> tag, found <"+hr.tagName+">")}else throw new TypeError("Object is not a valid DOM element")}hr&&(Wr(),Ut(hr,yr),Fr.push(hr))}function pr(yr){yr&&yr.enablePublicMethods&&er("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}var Fr;return Pt(),Vt(),function(hr,Wr){switch(Fr=[],pr(hr),typeof Wr){case"undefined":case"string":{Array.prototype.forEach.call(document.querySelectorAll(Wr||"iframe"),ur.bind(et,hr));break}case"object":{ur(hr,Wr);break}default:throw new TypeError("Unexpected data type ("+typeof Wr+")")}return Fr}}function Gr(ur){ur.fn?ur.fn.iFrameResize||(ur.fn.iFrameResize=function(Fr){function yr(hr,Wr){Ut(Wr,Fr)}return this.filter("iframe").each(yr).end()}):tr("","Unable to bind to jQuery, it is not fully loaded.")}window.jQuery!==et&&Gr(window.jQuery),tt.exports=fr(),window.iFrameResize=window.iFrameResize||fr()})()}),warning=function(){},warning_1=warning,_excluded$1=["autoResize","bodyBackground","bodyMargin","bodyPadding","checkOrigin","inPageLinks","heightCalculationMethod","interval","log","maxHeight","maxWidth","minHeight","minWidth","resizeFrom","scrolling","sizeHeight","sizeWidth","warningTimeout","tolerance","widthCalculationMethod","onClosed","onInit","onMessage","onResized"],filterIframeAttribs=function(tt){tt.autoResize,tt.bodyBackground,tt.bodyMargin,tt.bodyPadding,tt.checkOrigin,tt.inPageLinks,tt.heightCalculationMethod,tt.interval,tt.log,tt.maxHeight,tt.maxWidth,tt.minHeight,tt.minWidth,tt.resizeFrom,tt.scrolling,tt.sizeHeight,tt.sizeWidth,tt.warningTimeout,tt.tolerance,tt.widthCalculationMethod,tt.onClosed,tt.onInit,tt.onMessage,tt.onResized;var et=_objectWithoutPropertiesLoose(tt,_excluded$1);return et},_excluded=["title","forwardRef"],IframeResizer=function tt(et){var rt=et.title,nt=rt===void 0?"iframe":rt,at=et.forwardRef,it=_objectWithoutPropertiesLoose(et,_excluded),st=filterIframeAttribs(it),dt=reactExports.useRef(null),pt=function(){var yt;return warning_1(!(dt!=null&&dt.current),"[iframeSizerReact]["+(dt==null||(yt=dt.current)==null?void 0:yt.id)+"] Close event ignored, to remove the iframe update your React component"),!(dt!=null&&dt.current)};return reactExports.useEffect(function(){var mt=dt.current;return iframeResizer(_extends$1({},it,{onClose:pt}),mt),function(){var yt;return mt==null||(yt=mt.iFrameResizer)==null?void 0:yt.removeListeners()}},[]),reactExports.useImperativeHandle(at,function(){return{getIframeElement:function(){return dt.current},resize:function(){return dt.current.iFrameResizer.resize()},moveToAnchor:function(yt){return dt.current.iFrameResizer.moveToAnchor(yt)},sendMessage:function(yt,Rt){dt.current.iFrameResizer.sendMessage(yt,Rt)}}}),React.createElement("iframe",_extends$1({title:nt},st,{ref:dt}))};IframeResizer.propTypes={title:PropTypes.string};function _isPlaceholder$7(tt){return tt!=null&&typeof tt=="object"&&tt["@@functional/placeholder"]===!0}function _curry1$Y(tt){return function et(rt){return arguments.length===0||_isPlaceholder$7(rt)?et:tt.apply(this,arguments)}}function _cloneRegExp$4(tt){return new RegExp(tt.source,(tt.global?"g":"")+(tt.ignoreCase?"i":"")+(tt.multiline?"m":"")+(tt.sticky?"y":"")+(tt.unicode?"u":""))}var type$4=_curry1$Y(function tt(et){return et===null?"Null":et===void 0?"Undefined":Object.prototype.toString.call(et).slice(8,-1)});function _clone$5(tt,et,rt,nt){var at=function(st){for(var dt=et.length,pt=0;pt<dt;){if(tt===et[pt])return rt[pt];pt+=1}et[pt]=tt,rt[pt]=st;for(var mt in tt)tt.hasOwnProperty(mt)&&(st[mt]=_clone$5(tt[mt],et,rt));return st};switch(type$4(tt)){case"Object":return at(Object.create(Object.getPrototypeOf(tt)));case"Array":return at([]);case"Date":return new Date(tt.valueOf());case"RegExp":return _cloneRegExp$4(tt);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return tt.slice();default:return tt}}var clone$3=_curry1$Y(function tt(et){return et!=null&&typeof et.clone=="function"?et.clone():_clone$5(et,[],[])}),GatewayStatus$2;(function(tt){tt[tt.UNKNOWN=0]="UNKNOWN",tt[tt.CHECKING=1]="CHECKING",tt[tt.NOT_REQUESTED=2]="NOT_REQUESTED",tt[tt.COLLECTING_USER_INFORMATION=3]="COLLECTING_USER_INFORMATION",tt[tt.PROOF_OF_WALLET_OWNERSHIP=4]="PROOF_OF_WALLET_OWNERSHIP",tt[tt.IN_REVIEW=5]="IN_REVIEW",tt[tt.REJECTED=6]="REJECTED",tt[tt.REVOKED=7]="REVOKED",tt[tt.FROZEN=8]="FROZEN",tt[tt.ACTIVE=9]="ACTIVE",tt[tt.ERROR=10]="ERROR",tt[tt.LOCATION_NOT_SUPPORTED=11]="LOCATION_NOT_SUPPORTED",tt[tt.VPN_NOT_SUPPORTED=12]="VPN_NOT_SUPPORTED",tt[tt.REFRESH_TOKEN_REQUIRED=13]="REFRESH_TOKEN_REQUIRED",tt[tt.VALIDATING_USER_INFORMATION=14]="VALIDATING_USER_INFORMATION",tt[tt.USER_INFORMATION_VALIDATED=15]="USER_INFORMATION_VALIDATED",tt[tt.USER_INFORMATION_REJECTED=16]="USER_INFORMATION_REJECTED"})(GatewayStatus$2||(GatewayStatus$2={}));var LogLevel$1;(function(tt){tt.DEBUG="debug",tt.INFO="info",tt.WARN="warn",tt.ERROR="error"})(LogLevel$1||(LogLevel$1={}));function SVGClose({color:tt="#777777",light:et=!1}){const rt=et?"#FFFFFF":tt;return jsxRuntimeExports.jsx("svg",Object.assign({width:"17",height:"17",viewBox:"0 0 17 17",fill:rt,xmlns:"http://www.w3.org/2000/svg"},{children:jsxRuntimeExports.jsx("path",{d:"M14.0082 0.865234L8.00683 6.86523L2.00683 0.865234L0.00683594 2.86523L6.00683 8.86523L0.00683594 14.8652L2.00683 16.8652L8.00683 10.8652L14.0082 16.8652L16.0082 14.8652L10.0082 8.86523L16.0082 2.86523L14.0082 0.865234Z"})}))}var reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$2=typeof Symbol=="function"&&Symbol.for,c$1=b$2?Symbol.for("react.element"):60103,d$1=b$2?Symbol.for("react.portal"):60106,e$1=b$2?Symbol.for("react.fragment"):60107,f$1=b$2?Symbol.for("react.strict_mode"):60108,g$2=b$2?Symbol.for("react.profiler"):60114,h$2=b$2?Symbol.for("react.provider"):60109,k$1=b$2?Symbol.for("react.context"):60110,l$1=b$2?Symbol.for("react.async_mode"):60111,m$2=b$2?Symbol.for("react.concurrent_mode"):60111,n$2=b$2?Symbol.for("react.forward_ref"):60112,p$1=b$2?Symbol.for("react.suspense"):60113,q$1=b$2?Symbol.for("react.suspense_list"):60120,r=b$2?Symbol.for("react.memo"):60115,t$1=b$2?Symbol.for("react.lazy"):60116,v$2=b$2?Symbol.for("react.block"):60121,w$2=b$2?Symbol.for("react.fundamental"):60117,x$1=b$2?Symbol.for("react.responder"):60118,y$1=b$2?Symbol.for("react.scope"):60119;function z$1(tt){if(typeof tt=="object"&&tt!==null){var et=tt.$$typeof;switch(et){case c$1:switch(tt=tt.type,tt){case l$1:case m$2:case e$1:case g$2:case f$1:case p$1:return tt;default:switch(tt=tt&&tt.$$typeof,tt){case k$1:case n$2:case t$1:case r:case h$2:return tt;default:return et}}case d$1:return et}}}function A$1(tt){return z$1(tt)===m$2}reactIs_production_min.AsyncMode=l$1;reactIs_production_min.ConcurrentMode=m$2;reactIs_production_min.ContextConsumer=k$1;reactIs_production_min.ContextProvider=h$2;reactIs_production_min.Element=c$1;reactIs_production_min.ForwardRef=n$2;reactIs_production_min.Fragment=e$1;reactIs_production_min.Lazy=t$1;reactIs_production_min.Memo=r;reactIs_production_min.Portal=d$1;reactIs_production_min.Profiler=g$2;reactIs_production_min.StrictMode=f$1;reactIs_production_min.Suspense=p$1;reactIs_production_min.isAsyncMode=function(tt){return A$1(tt)||z$1(tt)===l$1};reactIs_production_min.isConcurrentMode=A$1;reactIs_production_min.isContextConsumer=function(tt){return z$1(tt)===k$1};reactIs_production_min.isContextProvider=function(tt){return z$1(tt)===h$2};reactIs_production_min.isElement=function(tt){return typeof tt=="object"&&tt!==null&&tt.$$typeof===c$1};reactIs_production_min.isForwardRef=function(tt){return z$1(tt)===n$2};reactIs_production_min.isFragment=function(tt){return z$1(tt)===e$1};reactIs_production_min.isLazy=function(tt){return z$1(tt)===t$1};reactIs_production_min.isMemo=function(tt){return z$1(tt)===r};reactIs_production_min.isPortal=function(tt){return z$1(tt)===d$1};reactIs_production_min.isProfiler=function(tt){return z$1(tt)===g$2};reactIs_production_min.isStrictMode=function(tt){return z$1(tt)===f$1};reactIs_production_min.isSuspense=function(tt){return z$1(tt)===p$1};reactIs_production_min.isValidElementType=function(tt){return typeof tt=="string"||typeof tt=="function"||tt===e$1||tt===m$2||tt===g$2||tt===f$1||tt===p$1||tt===q$1||typeof tt=="object"&&tt!==null&&(tt.$$typeof===t$1||tt.$$typeof===r||tt.$$typeof===h$2||tt.$$typeof===k$1||tt.$$typeof===n$2||tt.$$typeof===w$2||tt.$$typeof===x$1||tt.$$typeof===y$1||tt.$$typeof===v$2)};reactIs_production_min.typeOf=z$1;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports;function stylis_min(tt){function et(Mt,Lt,Ut,Kt,Ht){for(var Ft=0,zt=0,ir=0,sr=0,ar,Vt,fr=0,Gr=0,ur,pr=ur=ar=0,Fr=0,yr=0,hr=0,Wr=0,$r=Ut.length,Cr=$r-1,an,Er="",Ar="",gn="",Or="",Lr;Fr<$r;){if(Vt=Ut.charCodeAt(Fr),Fr===Cr&&zt+sr+ir+Ft!==0&&(zt!==0&&(Vt=zt===47?10:47),sr=ir=Ft=0,$r++,Cr++),zt+sr+ir+Ft===0){if(Fr===Cr&&(0<yr&&(Er=Er.replace(Tt,"")),0<Er.trim().length)){switch(Vt){case 32:case 9:case 59:case 13:case 10:break;default:Er+=Ut.charAt(Fr)}Vt=59}switch(Vt){case 123:for(Er=Er.trim(),ar=Er.charCodeAt(0),ur=1,Wr=++Fr;Fr<$r;){switch(Vt=Ut.charCodeAt(Fr)){case 123:ur++;break;case 125:ur--;break;case 47:switch(Vt=Ut.charCodeAt(Fr+1)){case 42:case 47:e:{for(pr=Fr+1;pr<Cr;++pr)switch(Ut.charCodeAt(pr)){case 47:if(Vt===42&&Ut.charCodeAt(pr-1)===42&&Fr+2!==pr){Fr=pr+1;break e}break;case 10:if(Vt===47){Fr=pr+1;break e}}Fr=pr}}break;case 91:Vt++;case 40:Vt++;case 34:case 39:for(;Fr++<Cr&&Ut.charCodeAt(Fr)!==Vt;);}if(ur===0)break;Fr++}switch(ur=Ut.substring(Wr,Fr),ar===0&&(ar=(Er=Er.replace(Rt,"").trim()).charCodeAt(0)),ar){case 64:switch(0<yr&&(Er=Er.replace(Tt,"")),Vt=Er.charCodeAt(1),Vt){case 100:case 109:case 115:case 45:yr=Lt;break;default:yr=wt}if(ur=et(Lt,yr,ur,Vt,Ht+1),Wr=ur.length,0<$t&&(yr=rt(wt,Er,hr),Lr=dt(3,ur,yr,Lt,ft,ot,Wr,Vt,Ht,Kt),Er=yr.join(""),Lr!==void 0&&(Wr=(ur=Lr.trim()).length)===0&&(Vt=0,ur="")),0<Wr)switch(Vt){case 115:Er=Er.replace(jt,st);case 100:case 109:case 45:ur=Er+"{"+ur+"}";break;case 107:Er=Er.replace(kt,"$1 $2"),ur=Er+"{"+ur+"}",ur=vt===1||vt===2&&it("@"+ur,3)?"@-webkit-"+ur+"@"+ur:"@"+ur;break;default:ur=Er+ur,Kt===112&&(ur=(Ar+=ur,""))}else ur="";break;default:ur=et(Lt,rt(Lt,Er,hr),ur,Kt,Ht+1)}gn+=ur,ur=hr=yr=pr=ar=0,Er="",Vt=Ut.charCodeAt(++Fr);break;case 125:case 59:if(Er=(0<yr?Er.replace(Tt,""):Er).trim(),1<(Wr=Er.length))switch(pr===0&&(ar=Er.charCodeAt(0),ar===45||96<ar&&123>ar)&&(Wr=(Er=Er.replace(" ",":")).length),0<$t&&(Lr=dt(1,Er,Lt,Mt,ft,ot,Ar.length,Kt,Ht,Kt))!==void 0&&(Wr=(Er=Lr.trim()).length)===0&&(Er="\0\0"),ar=Er.charCodeAt(0),Vt=Er.charCodeAt(1),ar){case 0:break;case 64:if(Vt===105||Vt===99){Or+=Er+Ut.charAt(Fr);break}default:Er.charCodeAt(Wr-1)!==58&&(Ar+=at(Er,ar,Vt,Er.charCodeAt(2)))}hr=yr=pr=ar=0,Er="",Vt=Ut.charCodeAt(++Fr)}}switch(Vt){case 13:case 10:zt===47?zt=0:1+ar===0&&Kt!==107&&0<Er.length&&(yr=1,Er+="\0"),0<$t*ct&&dt(0,Er,Lt,Mt,ft,ot,Ar.length,Kt,Ht,Kt),ot=1,ft++;break;case 59:case 125:if(zt+sr+ir+Ft===0){ot++;break}default:switch(ot++,an=Ut.charAt(Fr),Vt){case 9:case 32:if(sr+Ft+zt===0)switch(fr){case 44:case 58:case 9:case 32:an="";break;default:Vt!==32&&(an=" ")}break;case 0:an="\\0";break;case 12:an="\\f";break;case 11:an="\\v";break;case 38:sr+zt+Ft===0&&(yr=hr=1,an="\f"+an);break;case 108:if(sr+zt+Ft+ht===0&&0<pr)switch(Fr-pr){case 2:fr===112&&Ut.charCodeAt(Fr-3)===58&&(ht=fr);case 8:Gr===111&&(ht=Gr)}break;case 58:sr+zt+Ft===0&&(pr=Fr);break;case 44:zt+ir+sr+Ft===0&&(yr=1,an+="\r");break;case 34:case 39:zt===0&&(sr=sr===Vt?0:sr===0?Vt:sr);break;case 91:sr+zt+ir===0&&Ft++;break;case 93:sr+zt+ir===0&&Ft--;break;case 41:sr+zt+Ft===0&&ir--;break;case 40:if(sr+zt+Ft===0){if(ar===0)switch(2*fr+3*Gr){case 533:break;default:ar=1}ir++}break;case 64:zt+ir+sr+Ft+pr+ur===0&&(ur=1);break;case 42:case 47:if(!(0<sr+Ft+ir))switch(zt){case 0:switch(2*Vt+3*Ut.charCodeAt(Fr+1)){case 235:zt=47;break;case 220:Wr=Fr,zt=42}break;case 42:Vt===47&&fr===42&&Wr+2!==Fr&&(Ut.charCodeAt(Wr+2)===33&&(Ar+=Ut.substring(Wr,Fr+1)),an="",zt=0)}}zt===0&&(Er+=an)}Gr=fr,fr=Vt,Fr++}if(Wr=Ar.length,0<Wr){if(yr=Lt,0<$t&&(Lr=dt(2,Ar,yr,Mt,ft,ot,Wr,Kt,Ht,Kt),Lr!==void 0&&(Ar=Lr).length===0))return Or+Ar+gn;if(Ar=yr.join(",")+"{"+Ar+"}",vt*ht!==0){switch(vt!==2||it(Ar,2)||(ht=0),ht){case 111:Ar=Ar.replace(Dt,":-moz-$1")+Ar;break;case 112:Ar=Ar.replace(Pt,"::-webkit-input-$1")+Ar.replace(Pt,"::-moz-$1")+Ar.replace(Pt,":-ms-input-$1")+Ar}ht=0}}return Or+Ar+gn}function rt(Mt,Lt,Ut){var Kt=Lt.trim().split(Ct);Lt=Kt;var Ht=Kt.length,Ft=Mt.length;switch(Ft){case 0:case 1:var zt=0;for(Mt=Ft===0?"":Mt[0]+" ";zt<Ht;++zt)Lt[zt]=nt(Mt,Lt[zt],Ut).trim();break;default:var ir=zt=0;for(Lt=[];zt<Ht;++zt)for(var sr=0;sr<Ft;++sr)Lt[ir++]=nt(Mt[sr]+" ",Kt[zt],Ut).trim()}return Lt}function nt(Mt,Lt,Ut){var Kt=Lt.charCodeAt(0);switch(33>Kt&&(Kt=(Lt=Lt.trim()).charCodeAt(0)),Kt){case 38:return Lt.replace(Ot,"$1"+Mt.trim());case 58:return Mt.trim()+Lt.replace(Ot,"$1"+Mt.trim());default:if(0<1*Ut&&0<Lt.indexOf("\f"))return Lt.replace(Ot,(Mt.charCodeAt(0)===58?"":"$1")+Mt.trim())}return Mt+Lt}function at(Mt,Lt,Ut,Kt){var Ht=Mt+";",Ft=2*Lt+3*Ut+4*Kt;if(Ft===944){Mt=Ht.indexOf(":",9)+1;var zt=Ht.substring(Mt,Ht.length-1).trim();return zt=Ht.substring(0,Mt).trim()+zt+";",vt===1||vt===2&&it(zt,1)?"-webkit-"+zt+zt:zt}if(vt===0||vt===2&&!it(Ht,1))return Ht;switch(Ft){case 1015:return Ht.charCodeAt(10)===97?"-webkit-"+Ht+Ht:Ht;case 951:return Ht.charCodeAt(3)===116?"-webkit-"+Ht+Ht:Ht;case 963:return Ht.charCodeAt(5)===110?"-webkit-"+Ht+Ht:Ht;case 1009:if(Ht.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+Ht+Ht;case 978:return"-webkit-"+Ht+"-moz-"+Ht+Ht;case 1019:case 983:return"-webkit-"+Ht+"-moz-"+Ht+"-ms-"+Ht+Ht;case 883:if(Ht.charCodeAt(8)===45)return"-webkit-"+Ht+Ht;if(0<Ht.indexOf("image-set(",11))return Ht.replace(It,"$1-webkit-$2")+Ht;break;case 932:if(Ht.charCodeAt(4)===45)switch(Ht.charCodeAt(5)){case 103:return"-webkit-box-"+Ht.replace("-grow","")+"-webkit-"+Ht+"-ms-"+Ht.replace("grow","positive")+Ht;case 115:return"-webkit-"+Ht+"-ms-"+Ht.replace("shrink","negative")+Ht;case 98:return"-webkit-"+Ht+"-ms-"+Ht.replace("basis","preferred-size")+Ht}return"-webkit-"+Ht+"-ms-"+Ht+Ht;case 964:return"-webkit-"+Ht+"-ms-flex-"+Ht+Ht;case 1023:if(Ht.charCodeAt(8)!==99)break;return zt=Ht.substring(Ht.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+zt+"-webkit-"+Ht+"-ms-flex-pack"+zt+Ht;case 1005:return xt.test(Ht)?Ht.replace(At,":-webkit-")+Ht.replace(At,":-moz-")+Ht:Ht;case 1e3:switch(zt=Ht.substring(13).trim(),Lt=zt.indexOf("-")+1,zt.charCodeAt(0)+zt.charCodeAt(Lt)){case 226:zt=Ht.replace(Gt,"tb");break;case 232:zt=Ht.replace(Gt,"tb-rl");break;case 220:zt=Ht.replace(Gt,"lr");break;default:return Ht}return"-webkit-"+Ht+"-ms-"+zt+Ht;case 1017:if(Ht.indexOf("sticky",9)===-1)break;case 975:switch(Lt=(Ht=Mt).length-10,zt=(Ht.charCodeAt(Lt)===33?Ht.substring(0,Lt):Ht).substring(Mt.indexOf(":",7)+1).trim(),Ft=zt.charCodeAt(0)+(zt.charCodeAt(7)|0)){case 203:if(111>zt.charCodeAt(8))break;case 115:Ht=Ht.replace(zt,"-webkit-"+zt)+";"+Ht;break;case 207:case 102:Ht=Ht.replace(zt,"-webkit-"+(102<Ft?"inline-":"")+"box")+";"+Ht.replace(zt,"-webkit-"+zt)+";"+Ht.replace(zt,"-ms-"+zt+"box")+";"+Ht}return Ht+";";case 938:if(Ht.charCodeAt(5)===45)switch(Ht.charCodeAt(6)){case 105:return zt=Ht.replace("-items",""),"-webkit-"+Ht+"-webkit-box-"+zt+"-ms-flex-"+zt+Ht;case 115:return"-webkit-"+Ht+"-ms-flex-item-"+Ht.replace(tr,"")+Ht;default:return"-webkit-"+Ht+"-ms-flex-line-pack"+Ht.replace("align-content","").replace(tr,"")+Ht}break;case 973:case 989:if(Ht.charCodeAt(3)!==45||Ht.charCodeAt(4)===122)break;case 931:case 953:if(lr.test(Mt)===!0)return(zt=Mt.substring(Mt.indexOf(":")+1)).charCodeAt(0)===115?at(Mt.replace("stretch","fill-available"),Lt,Ut,Kt).replace(":fill-available",":stretch"):Ht.replace(zt,"-webkit-"+zt)+Ht.replace(zt,"-moz-"+zt.replace("fill-",""))+Ht;break;case 962:if(Ht="-webkit-"+Ht+(Ht.charCodeAt(5)===102?"-ms-"+Ht:"")+Ht,Ut+Kt===211&&Ht.charCodeAt(13)===105&&0<Ht.indexOf("transform",10))return Ht.substring(0,Ht.indexOf(";",27)+1).replace(Nt,"$1-webkit-$2")+Ht}return Ht}function it(Mt,Lt){var Ut=Mt.indexOf(Lt===1?":":"{"),Kt=Mt.substring(0,Lt!==3?Ut:10);return Ut=Mt.substring(Ut+1,Mt.length-1),Et(Lt!==2?Kt:Kt.replace(er,"$1"),Ut,Lt)}function st(Mt,Lt){var Ut=at(Lt,Lt.charCodeAt(0),Lt.charCodeAt(1),Lt.charCodeAt(2));return Ut!==Lt+";"?Ut.replace(Yt," or ($1)").substring(4):"("+Lt+")"}function dt(Mt,Lt,Ut,Kt,Ht,Ft,zt,ir,sr,ar){for(var Vt=0,fr=Lt,Gr;Vt<$t;++Vt)switch(Gr=bt[Vt].call(yt,Mt,fr,Ut,Kt,Ht,Ft,zt,ir,sr,ar)){case void 0:case!1:case!0:case null:break;default:fr=Gr}if(fr!==Lt)return fr}function pt(Mt){switch(Mt){case void 0:case null:$t=bt.length=0;break;default:if(typeof Mt=="function")bt[$t++]=Mt;else if(typeof Mt=="object")for(var Lt=0,Ut=Mt.length;Lt<Ut;++Lt)pt(Mt[Lt]);else ct=!!Mt|0}return pt}function mt(Mt){return Mt=Mt.prefix,Mt!==void 0&&(Et=null,Mt?typeof Mt!="function"?vt=1:(vt=2,Et=Mt):vt=0),mt}function yt(Mt,Lt){var Ut=Mt;if(33>Ut.charCodeAt(0)&&(Ut=Ut.trim()),St=Ut,Ut=[St],0<$t){var Kt=dt(-1,Lt,Ut,Ut,ft,ot,0,0,0,0);Kt!==void 0&&typeof Kt=="string"&&(Lt=Kt)}var Ht=et(wt,Ut,Lt,0,0);return 0<$t&&(Kt=dt(-2,Ht,Ut,Ut,ft,ot,Ht.length,0,0,0),Kt!==void 0&&(Ht=Kt)),St="",ht=0,ot=ft=1,Ht}var Rt=/^\0+/g,Tt=/[\0\r\f]/g,At=/: */g,xt=/zoo|gra/,Nt=/([,: ])(transform)/g,Ct=/,\r+?/g,Ot=/([\t\r\n ])*\f?&/g,kt=/@(k\w+)\s*(\S*)\s*/,Pt=/::(place)/g,Dt=/:(read-only)/g,Gt=/[svh]\w+-[tblr]{2}/,jt=/\(\s*(.*)\s*\)/g,Yt=/([\s\S]*?);/g,tr=/-self|flex-/g,er=/[^]*?(:[rp][el]a[\w-]+)[^]*/,lr=/stretch|:\s*\w+\-(?:conte|avail)/,It=/([^-])(image-set\()/,ot=1,ft=1,ht=0,vt=1,wt=[],bt=[],$t=0,Et=null,ct=0,St="";return yt.use=pt,yt.set=mt,tt!==void 0&&mt(tt),yt}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function memoize(tt){var et=Object.create(null);return function(rt){return et[rt]===void 0&&(et[rt]=tt(rt)),et[rt]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize(function(tt){return reactPropsRegex.test(tt)||tt.charCodeAt(0)===111&&tt.charCodeAt(1)===110&&tt.charCodeAt(2)<91}),reactIs=reactIsExports,REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;function getStatics(tt){return reactIs.isMemo(tt)?MEMO_STATICS:TYPE_STATICS[tt.$$typeof]||REACT_STATICS}var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf$2=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(tt,et,rt){if(typeof et!="string"){if(objectPrototype){var nt=getPrototypeOf$2(et);nt&&nt!==objectPrototype&&hoistNonReactStatics(tt,nt,rt)}var at=getOwnPropertyNames(et);getOwnPropertySymbols&&(at=at.concat(getOwnPropertySymbols(et)));for(var it=getStatics(tt),st=getStatics(et),dt=0;dt<at.length;++dt){var pt=at[dt];if(!KNOWN_STATICS[pt]&&!(rt&&rt[pt])&&!(st&&st[pt])&&!(it&&it[pt])){var mt=getOwnPropertyDescriptor(et,pt);try{defineProperty(tt,pt,mt)}catch{}}}}return tt}var hoistNonReactStatics_cjs=hoistNonReactStatics;const m$1=getDefaultExportFromCjs$5(hoistNonReactStatics_cjs);var define_process_env_default={};function y(){return(y=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var rt=arguments[et];for(var nt in rt)Object.prototype.hasOwnProperty.call(rt,nt)&&(tt[nt]=rt[nt])}return tt}).apply(this,arguments)}var v$1=function(tt,et){for(var rt=[tt[0]],nt=0,at=et.length;nt<at;nt+=1)rt.push(et[nt],tt[nt+1]);return rt},g$1=function(tt){return tt!==null&&typeof tt=="object"&&(tt.toString?tt.toString():Object.prototype.toString.call(tt))==="[object Object]"&&!reactIsExports.typeOf(tt)},S$1=Object.freeze([]),w$1=Object.freeze({});function E(tt){return typeof tt=="function"}function b$1(tt){return tt.displayName||tt.name||"Component"}function _$1(tt){return tt&&typeof tt.styledComponentId=="string"}var N=typeof process$1<"u"&&define_process_env_default!==void 0&&(define_process_env_default.REACT_APP_SC_ATTR||define_process_env_default.SC_ATTR)||"data-styled",C=typeof window<"u"&&"HTMLElement"in window,I$1=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process$1<"u"&&define_process_env_default!==void 0&&(define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==""?define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY:define_process_env_default.SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==""&&define_process_env_default.SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.SC_DISABLE_SPEEDY));function D$1(tt){for(var et=arguments.length,rt=new Array(et>1?et-1:0),nt=1;nt<et;nt++)rt[nt-1]=arguments[nt];throw new Error("An error occurred. See https://git.io/JUIaE#"+tt+" for more information."+(rt.length>0?" Args: "+rt.join(", "):""))}var j$1=function(){function tt(rt){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=rt}var et=tt.prototype;return et.indexOfGroup=function(rt){for(var nt=0,at=0;at<rt;at++)nt+=this.groupSizes[at];return nt},et.insertRules=function(rt,nt){if(rt>=this.groupSizes.length){for(var at=this.groupSizes,it=at.length,st=it;rt>=st;)(st<<=1)<0&&D$1(16,""+rt);this.groupSizes=new Uint32Array(st),this.groupSizes.set(at),this.length=st;for(var dt=it;dt<st;dt++)this.groupSizes[dt]=0}for(var pt=this.indexOfGroup(rt+1),mt=0,yt=nt.length;mt<yt;mt++)this.tag.insertRule(pt,nt[mt])&&(this.groupSizes[rt]++,pt++)},et.clearGroup=function(rt){if(rt<this.length){var nt=this.groupSizes[rt],at=this.indexOfGroup(rt),it=at+nt;this.groupSizes[rt]=0;for(var st=at;st<it;st++)this.tag.deleteRule(at)}},et.getGroup=function(rt){var nt="";if(rt>=this.length||this.groupSizes[rt]===0)return nt;for(var at=this.groupSizes[rt],it=this.indexOfGroup(rt),st=it+at,dt=it;dt<st;dt++)nt+=this.tag.getRule(dt)+`/*!sc*/
`;return nt},tt}(),T$2=new Map,x=new Map,k=1,V$1=function(tt){if(T$2.has(tt))return T$2.get(tt);for(;x.has(k);)k++;var et=k++;return T$2.set(tt,et),x.set(et,tt),et},B=function(tt){return x.get(tt)},z=function(tt,et){et>=k&&(k=et+1),T$2.set(tt,et),x.set(et,tt)},M$1="style["+N+'][data-styled-version="5.3.11"]',G$1=new RegExp("^"+N+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),L=function(tt,et,rt){for(var nt,at=rt.split(","),it=0,st=at.length;it<st;it++)(nt=at[it])&&tt.registerName(et,nt)},F$2=function(tt,et){for(var rt=(et.textContent||"").split(`/*!sc*/
`),nt=[],at=0,it=rt.length;at<it;at++){var st=rt[at].trim();if(st){var dt=st.match(G$1);if(dt){var pt=0|parseInt(dt[1],10),mt=dt[2];pt!==0&&(z(mt,pt),L(tt,mt,dt[3]),tt.getTag().insertRules(pt,nt)),nt.length=0}else nt.push(st)}}},Y$1=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},q=function(tt){var et=document.head,rt=tt||et,nt=document.createElement("style"),at=function(dt){for(var pt=dt.childNodes,mt=pt.length;mt>=0;mt--){var yt=pt[mt];if(yt&&yt.nodeType===1&&yt.hasAttribute(N))return yt}}(rt),it=at!==void 0?at.nextSibling:null;nt.setAttribute(N,"active"),nt.setAttribute("data-styled-version","5.3.11");var st=Y$1();return st&&nt.setAttribute("nonce",st),rt.insertBefore(nt,it),nt},H=function(){function tt(rt){var nt=this.element=q(rt);nt.appendChild(document.createTextNode("")),this.sheet=function(at){if(at.sheet)return at.sheet;for(var it=document.styleSheets,st=0,dt=it.length;st<dt;st++){var pt=it[st];if(pt.ownerNode===at)return pt}D$1(17)}(nt),this.length=0}var et=tt.prototype;return et.insertRule=function(rt,nt){try{return this.sheet.insertRule(nt,rt),this.length++,!0}catch{return!1}},et.deleteRule=function(rt){this.sheet.deleteRule(rt),this.length--},et.getRule=function(rt){var nt=this.sheet.cssRules[rt];return nt!==void 0&&typeof nt.cssText=="string"?nt.cssText:""},tt}(),$$1=function(){function tt(rt){var nt=this.element=q(rt);this.nodes=nt.childNodes,this.length=0}var et=tt.prototype;return et.insertRule=function(rt,nt){if(rt<=this.length&&rt>=0){var at=document.createTextNode(nt),it=this.nodes[rt];return this.element.insertBefore(at,it||null),this.length++,!0}return!1},et.deleteRule=function(rt){this.element.removeChild(this.nodes[rt]),this.length--},et.getRule=function(rt){return rt<this.length?this.nodes[rt].textContent:""},tt}(),W$1=function(){function tt(rt){this.rules=[],this.length=0}var et=tt.prototype;return et.insertRule=function(rt,nt){return rt<=this.length&&(this.rules.splice(rt,0,nt),this.length++,!0)},et.deleteRule=function(rt){this.rules.splice(rt,1),this.length--},et.getRule=function(rt){return rt<this.length?this.rules[rt]:""},tt}(),U$1=C,J$1={isServer:!C,useCSSOMInjection:!I$1},X$1=function(){function tt(rt,nt,at){rt===void 0&&(rt=w$1),nt===void 0&&(nt={}),this.options=y({},J$1,{},rt),this.gs=nt,this.names=new Map(at),this.server=!!rt.isServer,!this.server&&C&&U$1&&(U$1=!1,function(it){for(var st=document.querySelectorAll(M$1),dt=0,pt=st.length;dt<pt;dt++){var mt=st[dt];mt&&mt.getAttribute(N)!=="active"&&(F$2(it,mt),mt.parentNode&&mt.parentNode.removeChild(mt))}}(this))}tt.registerId=function(rt){return V$1(rt)};var et=tt.prototype;return et.reconstructWithOptions=function(rt,nt){return nt===void 0&&(nt=!0),new tt(y({},this.options,{},rt),this.gs,nt&&this.names||void 0)},et.allocateGSInstance=function(rt){return this.gs[rt]=(this.gs[rt]||0)+1},et.getTag=function(){return this.tag||(this.tag=(at=(nt=this.options).isServer,it=nt.useCSSOMInjection,st=nt.target,rt=at?new W$1(st):it?new H(st):new $$1(st),new j$1(rt)));var rt,nt,at,it,st},et.hasNameForId=function(rt,nt){return this.names.has(rt)&&this.names.get(rt).has(nt)},et.registerName=function(rt,nt){if(V$1(rt),this.names.has(rt))this.names.get(rt).add(nt);else{var at=new Set;at.add(nt),this.names.set(rt,at)}},et.insertRules=function(rt,nt,at){this.registerName(rt,nt),this.getTag().insertRules(V$1(rt),at)},et.clearNames=function(rt){this.names.has(rt)&&this.names.get(rt).clear()},et.clearRules=function(rt){this.getTag().clearGroup(V$1(rt)),this.clearNames(rt)},et.clearTag=function(){this.tag=void 0},et.toString=function(){return function(rt){for(var nt=rt.getTag(),at=nt.length,it="",st=0;st<at;st++){var dt=B(st);if(dt!==void 0){var pt=rt.names.get(dt),mt=nt.getGroup(st);if(pt&&mt&&pt.size){var yt=N+".g"+st+'[id="'+dt+'"]',Rt="";pt!==void 0&&pt.forEach(function(Tt){Tt.length>0&&(Rt+=Tt+",")}),it+=""+mt+yt+'{content:"'+Rt+`"}/*!sc*/
`}}}return it}(this)},tt}(),Z$1=/(a)(d)/gi,K=function(tt){return String.fromCharCode(tt+(tt>25?39:97))};function Q$1(tt){var et,rt="";for(et=Math.abs(tt);et>52;et=et/52|0)rt=K(et%52)+rt;return(K(et%52)+rt).replace(Z$1,"$1-$2")}var ee$1=function(tt,et){for(var rt=et.length;rt;)tt=33*tt^et.charCodeAt(--rt);return tt},te=function(tt){return ee$1(5381,tt)};function ne$1(tt){for(var et=0;et<tt.length;et+=1){var rt=tt[et];if(E(rt)&&!_$1(rt))return!1}return!0}var re$1=te("5.3.11"),oe$1=function(){function tt(et,rt,nt){this.rules=et,this.staticRulesId="",this.isStatic=(nt===void 0||nt.isStatic)&&ne$1(et),this.componentId=rt,this.baseHash=ee$1(re$1,rt),this.baseStyle=nt,X$1.registerId(rt)}return tt.prototype.generateAndInjectStyles=function(et,rt,nt){var at=this.componentId,it=[];if(this.baseStyle&&it.push(this.baseStyle.generateAndInjectStyles(et,rt,nt)),this.isStatic&&!nt.hash)if(this.staticRulesId&&rt.hasNameForId(at,this.staticRulesId))it.push(this.staticRulesId);else{var st=_e(this.rules,et,rt,nt).join(""),dt=Q$1(ee$1(this.baseHash,st)>>>0);if(!rt.hasNameForId(at,dt)){var pt=nt(st,"."+dt,void 0,at);rt.insertRules(at,dt,pt)}it.push(dt),this.staticRulesId=dt}else{for(var mt=this.rules.length,yt=ee$1(this.baseHash,nt.hash),Rt="",Tt=0;Tt<mt;Tt++){var At=this.rules[Tt];if(typeof At=="string")Rt+=At;else if(At){var xt=_e(At,et,rt,nt),Nt=Array.isArray(xt)?xt.join(""):xt;yt=ee$1(yt,Nt+Tt),Rt+=Nt}}if(Rt){var Ct=Q$1(yt>>>0);if(!rt.hasNameForId(at,Ct)){var Ot=nt(Rt,"."+Ct,void 0,at);rt.insertRules(at,Ct,Ot)}it.push(Ct)}}return it.join(" ")},tt}(),se$1=/^\s*\/\/.*$/gm,ie=[":","[",".","#"];function ae(tt){var et,rt,nt,at,it=w$1,st=it.options,dt=st===void 0?w$1:st,pt=it.plugins,mt=pt===void 0?S$1:pt,yt=new stylis_min(dt),Rt=[],Tt=function(Nt){function Ct(Ot){if(Ot)try{Nt(Ot+"}")}catch{}}return function(Ot,kt,Pt,Dt,Gt,jt,Yt,tr,er,lr){switch(Ot){case 1:if(er===0&&kt.charCodeAt(0)===64)return Nt(kt+";"),"";break;case 2:if(tr===0)return kt+"/*|*/";break;case 3:switch(tr){case 102:case 112:return Nt(Pt[0]+kt),"";default:return kt+(lr===0?"/*|*/":"")}case-2:kt.split("/*|*/}").forEach(Ct)}}}(function(Nt){Rt.push(Nt)}),At=function(Nt,Ct,Ot){return Ct===0&&ie.indexOf(Ot[rt.length])!==-1||Ot.match(at)?Nt:"."+et};function xt(Nt,Ct,Ot,kt){kt===void 0&&(kt="&");var Pt=Nt.replace(se$1,""),Dt=Ct&&Ot?Ot+" "+Ct+" { "+Pt+" }":Pt;return et=kt,rt=Ct,nt=new RegExp("\\"+rt+"\\b","g"),at=new RegExp("(\\"+rt+"\\b){2,}"),yt(Ot||!Ct?"":Ct,Dt)}return yt.use([].concat(mt,[function(Nt,Ct,Ot){Nt===2&&Ot.length&&Ot[0].lastIndexOf(rt)>0&&(Ot[0]=Ot[0].replace(nt,At))},Tt,function(Nt){if(Nt===-2){var Ct=Rt;return Rt=[],Ct}}])),xt.hash=mt.length?mt.reduce(function(Nt,Ct){return Ct.name||D$1(15),ee$1(Nt,Ct.name)},5381).toString():"",xt}var ce=React.createContext();ce.Consumer;var le$1=React.createContext(),de$1=(le$1.Consumer,new X$1),he$1=ae();function pe$1(){return reactExports.useContext(ce)||de$1}function fe$1(){return reactExports.useContext(le$1)||he$1}var ye$1=function(){function tt(et,rt){var nt=this;this.inject=function(at,it){it===void 0&&(it=he$1);var st=nt.name+it.hash;at.hasNameForId(nt.id,st)||at.insertRules(nt.id,st,it(nt.rules,st,"@keyframes"))},this.toString=function(){return D$1(12,String(nt.name))},this.name=et,this.id="sc-keyframes-"+et,this.rules=rt}return tt.prototype.getName=function(et){return et===void 0&&(et=he$1),this.name+et.hash},tt}(),ve$1=/([A-Z])/,ge$1=/([A-Z])/g,Se$1=/^ms-/,we=function(tt){return"-"+tt.toLowerCase()};function Ee$1(tt){return ve$1.test(tt)?tt.replace(ge$1,we).replace(Se$1,"-ms-"):tt}var be$1=function(tt){return tt==null||tt===!1||tt===""};function _e(tt,et,rt,nt){if(Array.isArray(tt)){for(var at,it=[],st=0,dt=tt.length;st<dt;st+=1)(at=_e(tt[st],et,rt,nt))!==""&&(Array.isArray(at)?it.push.apply(it,at):it.push(at));return it}if(be$1(tt))return"";if(_$1(tt))return"."+tt.styledComponentId;if(E(tt)){if(typeof(mt=tt)!="function"||mt.prototype&&mt.prototype.isReactComponent||!et)return tt;var pt=tt(et);return _e(pt,et,rt,nt)}var mt;return tt instanceof ye$1?rt?(tt.inject(rt,nt),tt.getName(nt)):tt:g$1(tt)?function yt(Rt,Tt){var At,xt,Nt=[];for(var Ct in Rt)Rt.hasOwnProperty(Ct)&&!be$1(Rt[Ct])&&(Array.isArray(Rt[Ct])&&Rt[Ct].isCss||E(Rt[Ct])?Nt.push(Ee$1(Ct)+":",Rt[Ct],";"):g$1(Rt[Ct])?Nt.push.apply(Nt,yt(Rt[Ct],Ct)):Nt.push(Ee$1(Ct)+": "+(At=Ct,(xt=Rt[Ct])==null||typeof xt=="boolean"||xt===""?"":typeof xt!="number"||xt===0||At in unitlessKeys||At.startsWith("--")?String(xt).trim():xt+"px")+";"));return Tt?[Tt+" {"].concat(Nt,["}"]):Nt}(tt):tt.toString()}var Ne=function(tt){return Array.isArray(tt)&&(tt.isCss=!0),tt};function Ae$1(tt){for(var et=arguments.length,rt=new Array(et>1?et-1:0),nt=1;nt<et;nt++)rt[nt-1]=arguments[nt];return E(tt)||g$1(tt)?Ne(_e(v$1(S$1,[tt].concat(rt)))):rt.length===0&&tt.length===1&&typeof tt[0]=="string"?tt:Ne(_e(v$1(tt,rt)))}var Oe=function(tt,et,rt){return rt===void 0&&(rt=w$1),tt.theme!==rt.theme&&tt.theme||et||rt.theme},Re$1=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,De=/(^-|-$)/g;function je(tt){return tt.replace(Re$1,"-").replace(De,"")}var Te$1=function(tt){return Q$1(te(tt)>>>0)};function xe$1(tt){return typeof tt=="string"&&!0}var ke=function(tt){return typeof tt=="function"||typeof tt=="object"&&tt!==null&&!Array.isArray(tt)},Ve=function(tt){return tt!=="__proto__"&&tt!=="constructor"&&tt!=="prototype"};function Be(tt,et,rt){var nt=tt[rt];ke(et)&&ke(nt)?ze(nt,et):tt[rt]=et}function ze(tt){for(var et=arguments.length,rt=new Array(et>1?et-1:0),nt=1;nt<et;nt++)rt[nt-1]=arguments[nt];for(var at=0,it=rt;at<it.length;at++){var st=it[at];if(ke(st))for(var dt in st)Ve(dt)&&Be(tt,st[dt],dt)}return tt}var Me=React.createContext();Me.Consumer;var Fe={};function Ye(tt,et,rt){var nt=_$1(tt),at=!xe$1(tt),it=et.attrs,st=it===void 0?S$1:it,dt=et.componentId,pt=dt===void 0?function(kt,Pt){var Dt=typeof kt!="string"?"sc":je(kt);Fe[Dt]=(Fe[Dt]||0)+1;var Gt=Dt+"-"+Te$1("5.3.11"+Dt+Fe[Dt]);return Pt?Pt+"-"+Gt:Gt}(et.displayName,et.parentComponentId):dt,mt=et.displayName,yt=mt===void 0?function(kt){return xe$1(kt)?"styled."+kt:"Styled("+b$1(kt)+")"}(tt):mt,Rt=et.displayName&&et.componentId?je(et.displayName)+"-"+et.componentId:et.componentId||pt,Tt=nt&&tt.attrs?Array.prototype.concat(tt.attrs,st).filter(Boolean):st,At=et.shouldForwardProp;nt&&tt.shouldForwardProp&&(At=et.shouldForwardProp?function(kt,Pt,Dt){return tt.shouldForwardProp(kt,Pt,Dt)&&et.shouldForwardProp(kt,Pt,Dt)}:tt.shouldForwardProp);var xt,Nt=new oe$1(rt,Rt,nt?tt.componentStyle:void 0),Ct=Nt.isStatic&&st.length===0,Ot=function(kt,Pt){return function(Dt,Gt,jt,Yt){var tr=Dt.attrs,er=Dt.componentStyle,lr=Dt.defaultProps,It=Dt.foldedComponentIds,ot=Dt.shouldForwardProp,ft=Dt.styledComponentId,ht=Dt.target,vt=function(Kt,Ht,Ft){Kt===void 0&&(Kt=w$1);var zt=y({},Ht,{theme:Kt}),ir={};return Ft.forEach(function(sr){var ar,Vt,fr,Gr=sr;for(ar in E(Gr)&&(Gr=Gr(zt)),Gr)zt[ar]=ir[ar]=ar==="className"?(Vt=ir[ar],fr=Gr[ar],Vt&&fr?Vt+" "+fr:Vt||fr):Gr[ar]}),[zt,ir]}(Oe(Gt,reactExports.useContext(Me),lr)||w$1,Gt,tr),wt=vt[0],bt=vt[1],$t=function(Kt,Ht,Ft,zt){var ir=pe$1(),sr=fe$1(),ar=Ht?Kt.generateAndInjectStyles(w$1,ir,sr):Kt.generateAndInjectStyles(Ft,ir,sr);return ar}(er,Yt,wt),Et=jt,ct=bt.$as||Gt.$as||bt.as||Gt.as||ht,St=xe$1(ct),Mt=bt!==Gt?y({},Gt,{},bt):Gt,Lt={};for(var Ut in Mt)Ut[0]!=="$"&&Ut!=="as"&&(Ut==="forwardedAs"?Lt.as=Mt[Ut]:(ot?ot(Ut,isPropValid,ct):!St||isPropValid(Ut))&&(Lt[Ut]=Mt[Ut]));return Gt.style&&bt.style!==Gt.style&&(Lt.style=y({},Gt.style,{},bt.style)),Lt.className=Array.prototype.concat(It,ft,$t!==ft?$t:null,Gt.className,bt.className).filter(Boolean).join(" "),Lt.ref=Et,reactExports.createElement(ct,Lt)}(xt,kt,Pt,Ct)};return Ot.displayName=yt,(xt=React.forwardRef(Ot)).attrs=Tt,xt.componentStyle=Nt,xt.displayName=yt,xt.shouldForwardProp=At,xt.foldedComponentIds=nt?Array.prototype.concat(tt.foldedComponentIds,tt.styledComponentId):S$1,xt.styledComponentId=Rt,xt.target=nt?tt.target:tt,xt.withComponent=function(kt){var Pt=et.componentId,Dt=function(jt,Yt){if(jt==null)return{};var tr,er,lr={},It=Object.keys(jt);for(er=0;er<It.length;er++)tr=It[er],Yt.indexOf(tr)>=0||(lr[tr]=jt[tr]);return lr}(et,["componentId"]),Gt=Pt&&Pt+"-"+(xe$1(kt)?kt:je(b$1(kt)));return Ye(kt,y({},Dt,{attrs:Tt,componentId:Gt}),rt)},Object.defineProperty(xt,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(kt){this._foldedDefaultProps=nt?ze({},tt.defaultProps,kt):kt}}),Object.defineProperty(xt,"toString",{value:function(){return"."+xt.styledComponentId}}),at&&m$1(xt,tt,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),xt}var qe=function(tt){return function et(rt,nt,at){if(at===void 0&&(at=w$1),!reactIsExports.isValidElementType(nt))return D$1(1,String(nt));var it=function(){return rt(nt,at,Ae$1.apply(void 0,arguments))};return it.withConfig=function(st){return et(rt,nt,y({},at,{},st))},it.attrs=function(st){return et(rt,nt,y({},at,{attrs:Array.prototype.concat(at.attrs,st).filter(Boolean)}))},it}(Ye,tt)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(tt){qe[tt]=qe(tt)});function We(tt){for(var et=arguments.length,rt=new Array(et>1?et-1:0),nt=1;nt<et;nt++)rt[nt-1]=arguments[nt];var at=Ae$1.apply(void 0,[tt].concat(rt)).join(""),it=Te$1(at);return new ye$1(it,at)}const styled=qe,svgLoadingStyle={position:"absolute",top:0,left:0},shimmer=We`
  0% {
    transform: translate(-320px, 0);
  }

  to {
    transform: translate(320px, 0);
  }
`,Shimmer=styled.path`
  animation: 1s linear infinite both ${shimmer};
`;function SVGLoading(){return jsxRuntimeExports.jsxs("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",viewBox:"0 0 320 16","white-space":"pre",height:"26",width:"100%",style:Object.assign(Object.assign({},svgLoadingStyle),{position:"absolute"})},{children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",Object.assign({id:"Gradient-0",x2:"320",y1:"15",y2:"15",gradientUnits:"userSpaceOnUse"},{children:[jsxRuntimeExports.jsx("stop",{offset:"0",stopColor:"#ffffff"}),jsxRuntimeExports.jsx("stop",{offset:".511",stopColor:"#9A9DA6"}),jsxRuntimeExports.jsx("stop",{offset:"1",stopColor:"#ffffff"})]}))}),jsxRuntimeExports.jsx("path",{id:"rect",fill:"#f6f7f8",d:"M0 0h320v16H0z"}),jsxRuntimeExports.jsx(Shimmer,{id:"shimmer",fill:"url(#Gradient-0)",d:"M0 0h320v16H0z",transform:"translate(-320)"})]}))}const TESTID_IFRAME="IFRAME",TESTID_WRAPPER="WRAPPER",TESTID_WRAPPER_CONTAINER="WRAPPER_CONTAINER",TESTID_IFRAME_CLOSE_BTN="TESTID_IFRAME_CLOSE_BTN",IFRAME_ID="CIVIC_PASS_IFRAME",containerStyle={background:"rgba(0,0,0,0.5)",position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",minHeight:"26",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},containerContentStyle={display:"flex",flexDirection:"column",maxWidth:"526px",width:"100%",minHeight:"26",maxHeight:"100",background:"#fff",borderRadius:"4px",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.25)",overflow:"hidden"},containerButtonStyle={top:"5px",right:"5px",padding:"10px",background:"transparent",border:"none",borderRadius:"25px",height:"50px",width:"50px",cursor:"pointer",margin:"10px 0 0 0"},containerButtonNoLogoStyle=Object.assign(Object.assign({},containerButtonStyle),{margin:"0 0 0 0"}),headerStyle={height:"80px",flexGrow:0,flexShrink:0,flexBasis:"80px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px 4px 0 0",borderBottom:"1px solid #ddd",position:"relative"},logoStyle={maxHeight:"40px",maxWidth:"100%",height:"auto",width:"auto"},noLogoStyle={height:"16px"},DefaultWrapper=({children:tt=null,onClose:et,logo:rt,loaded:nt=!1,loading:at=!1})=>{const it=rt?containerButtonStyle:containerButtonNoLogoStyle;return localLogger$2.debug("DefaultWrapper",{loaded:nt,loading:at}),jsxRuntimeExports.jsx("div",Object.assign({style:Object.assign(Object.assign({},containerStyle),{position:"fixed",flexDirection:"column",zIndex:999})},{children:jsxRuntimeExports.jsxs("div",Object.assign({style:Object.assign(Object.assign(Object.assign({},containerContentStyle),{flexDirection:"column",position:"relative"}),at?{filter:"contrast(0.5)"}:{})},{children:[rt&&nt&&jsxRuntimeExports.jsx("header",Object.assign({style:Object.assign(Object.assign({},headerStyle),{position:"relative"})},{children:jsxRuntimeExports.jsx("img",{style:logoStyle,src:rt,alt:"logo"})})),!rt&&nt&&jsxRuntimeExports.jsx("div",{style:noLogoStyle}),!nt&&jsxRuntimeExports.jsx(SVGLoading,{}),jsxRuntimeExports.jsx("button",Object.assign({"data-testid":TESTID_IFRAME_CLOSE_BTN,type:"button",onClick:et,style:Object.assign(Object.assign({},it),{display:nt?"block":"none",position:"absolute"})},{children:jsxRuntimeExports.jsx(SVGClose,{})})),tt]}))}))},Wrapper=({wrapper:tt,onClose:et,children:rt=null,logo:nt,loaded:at=!1,loading:it=!1})=>{if(tt){const st=tt;return jsxRuntimeExports.jsxs(st,{children:[at&&jsxRuntimeExports.jsx("button",Object.assign({type:"button",onClick:et,style:Object.assign(Object.assign({},containerButtonStyle),{display:at?"block":"none",position:"absolute"})},{children:jsxRuntimeExports.jsx(SVGClose,{})})),rt]})}return jsxRuntimeExports.jsx(DefaultWrapper,Object.assign({onClose:et,logo:nt,loaded:at,loading:it},{children:rt}))},coreToReactGatewayStatus=tt=>tt?GatewayStatus$2[tt.toUpperCase()]:GatewayStatus$2.UNKNOWN,VERSION="@civic/gateway-client-react:1.0.1",GatewayContext=React.createContext({requestGatewayToken:async()=>{},gatewayStatus:GatewayStatus$2.UNKNOWN});let globalThisObject;typeof window<"u"?globalThisObject=window:typeof global$1<"u"?globalThisObject=global$1:globalThisObject=Function("return this")();globalThisObject.globalThis=globalThisObject;const DEFAULT_REDIRECT_URL="https://getpass.civic.com",redirectUrlFromWindow=()=>{var tt;return!((tt=globalThis.window)===null||tt===void 0)&&tt.location.href?encodeURIComponent(globalThis.window.location.href):DEFAULT_REDIRECT_URL},GatewayProvider=({children:tt=null,walletAddress:et,chainImplementation:rt,wrapper:nt,logo:at,stage:it="prod",reactComponentVersion:st,redirectUrl:dt,gatekeeperNetwork:pt,options:mt={autoShowModal:!0},payer:yt,gatekeeperSendsTransaction:Rt,expiryMarginSeconds:Tt=0,partnerAppId:At,forceRequireRefresh:xt,expectTokenTimeoutSeconds:Nt,disableInitialGatekeeperLookup:Ct})=>{var Ot,kt,Pt,Dt,Gt,jt,Yt,tr,er,lr,It,ot;const ft=prefixLogger$2("GatewayProvider","gateway-client-react");if(mt.logLevel&&ft.setLogLevel&&ft.setLogLevel(mt.logLevel),yt&&Rt)throw Error("Cannot set payer when gatekeeperSendsTransaction is true");const[ht,vt]=reactExports.useState(),wt=Lt=>{const Ut=clone$3(Object.assign(Object.assign({},Lt),{gatewayStatus:coreToReactGatewayStatus(Lt==null?void 0:Lt.gatewayStatus)}));ft.debug(`GatewayProvider.onOutputChange: setClientCoreOutput: ${vt}`,Ut),vt(Ut)},bt=new URLSearchParams(((Ot=globalThis.window)===null||Ot===void 0?void 0:Ot.location.search)||""),ct={postMessageTargetCallback:Lt=>{var Ut,Kt,Ht;return(Ht=(Kt=(Ut=globalThis.document)===null||Ut===void 0?void 0:Ut.getElementById)===null||Kt===void 0?void 0:Kt.call(Ut,`${IFRAME_ID}_${Lt}`))===null||Ht===void 0?void 0:Ht.contentWindow},messageEventInterface:{addMessageEventListener:Lt=>window.addEventListener("message",Lt),removeMessageEventListener:Lt=>window.removeEventListener("message",Lt)},parameters:{wallet:et?{address:et}:void 0,reactComponentVersion:st||VERSION,stage:it,redirectUrl:dt||redirectUrlFromWindow(),gatekeeperNetwork:pt,options:mt,payer:yt,gatekeeperSendsTransaction:Rt,expiryMarginSeconds:Tt,partnerAppId:At,expectTokenTimeoutSeconds:Nt,disableInitialGatekeeperLookup:Ct,flowIdPrefix:"GWRC",referrer:bt.get("referrer")||((kt=globalThis.document)===null||kt===void 0?void 0:kt.referrer)},chainImplementation:rt,fetchConfig:{fetchImplementation:fetch,numRetries:3},onOutputChange:wt,dynamicParameters:{forceRequireRefresh:xt}},St=reactExports.useRef();reactExports.useEffect(()=>{var Lt,Ut;if(!hasRequiredInputs$1(ct)){(Lt=St.current)===null||Lt===void 0||Lt.abort(),St.current=void 0;return}return shouldUpdateInstance$1(ct,St.current)&&((Ut=St.current)===null||Ut===void 0||Ut.abort(),St.current=new GatewayClientCore(ct)),()=>{var Kt;(Kt=St.current)===null||Kt===void 0||Kt.abort(),St.current=void 0}},[JSON.stringify(getInstanceInputObject$1(ct))]),reactExports.useEffect(()=>{!et&&!St.current&&(ft.debug("GatewayProvider.onOutputChange undefined"),wt(void 0))},[et]),reactExports.useEffect(()=>{var Lt;(Lt=St.current)===null||Lt===void 0||Lt.updateDynamicParameters({forceRequireRefresh:xt})},[xt,(Pt=St.current)===null||Pt===void 0?void 0:Pt.instanceId]);const Mt=()=>{ft.warn("GatewayProvider.requestGatewayToken() called before the Gateway is ready")};return ft.debug("GatewayProvider.render",{clientCoreOutput:ht,gatewayClientCoreInst:St}),jsxRuntimeExports.jsx(GatewayContext.Provider,Object.assign({value:{civicPassSrcUrl:(Dt=ht==null?void 0:ht.ui)===null||Dt===void 0?void 0:Dt.url,requestGatewayToken:()=>{var Lt,Ut,Kt,Ht,Ft;return!((Ut=(Lt=St.current)===null||Lt===void 0?void 0:Lt.ui)===null||Ut===void 0)&&Ut.onShow?(Ft=(Ht=(Kt=St.current)===null||Kt===void 0?void 0:Kt.ui)===null||Ht===void 0?void 0:Ht.onShow)===null||Ft===void 0?void 0:Ft.call(Ht):Mt},gatewayStatus:(ht==null?void 0:ht.gatewayStatus)||GatewayStatus$2.UNKNOWN,gatewayToken:ht==null?void 0:ht.gatewayToken,gatewayTokenTransaction:ht==null?void 0:ht.gatewayTokenTransaction,pendingRequests:ht==null?void 0:ht.pendingRequests}},{children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[tt,((Gt=ht==null?void 0:ht.ui)===null||Gt===void 0?void 0:Gt.url)&&((jt=St.current)===null||jt===void 0?void 0:jt.instanceId)&&jsxRuntimeExports.jsx("div",Object.assign({"data-testid":TESTID_WRAPPER_CONTAINER,hidden:!(!((Yt=ht==null?void 0:ht.ui)===null||Yt===void 0)&&Yt.isVisible)},{children:jsxRuntimeExports.jsx(Wrapper,Object.assign({"data-testid":TESTID_WRAPPER,onClose:()=>{var Lt,Ut,Kt;(Kt=(Ut=(Lt=St.current)===null||Lt===void 0?void 0:Lt.ui)===null||Ut===void 0?void 0:Ut.onHide)===null||Kt===void 0||Kt.call(Ut)},wrapper:nt,logo:at,loaded:(tr=ht==null?void 0:ht.ui)===null||tr===void 0?void 0:tr.isLoaded,loading:(er=ht==null?void 0:ht.ui)===null||er===void 0?void 0:er.isLoading},{children:jsxRuntimeExports.jsx(IframeResizer,{"data-testid":TESTID_IFRAME,src:(lr=ht==null?void 0:ht.ui)===null||lr===void 0?void 0:lr.url,id:`${IFRAME_ID}_${(It=St.current)===null||It===void 0?void 0:It.instanceId}`,style:{width:"1px",minWidth:"100%",border:"none",height:"26px",transition:"height 0.25s ease",pointerEvents:!((ot=ht==null?void 0:ht.ui)===null||ot===void 0)&&ot.isLoading?"none":"auto"},heightCalculationMethod:"min",checkOrigin:!1,onLoad:()=>{var Lt,Ut,Kt;(Kt=(Ut=(Lt=St.current)===null||Lt===void 0?void 0:Lt.ui)===null||Ut===void 0?void 0:Ut.onLoad)===null||Kt===void 0||Kt.call(Ut)},inPageLinks:!0,allow:"camera",allowFullScreen:!0,frameBorder:"0"})}))}))]})}))},useGateway=()=>reactExports.useContext(GatewayContext);var __rest$5=function(tt,et){var rt={};for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&et.indexOf(nt)<0&&(rt[nt]=tt[nt]);if(tt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var at=0,nt=Object.getOwnPropertySymbols(tt);at<nt.length;at++)et.indexOf(nt[at])<0&&Object.prototype.propertyIsEnumerable.call(tt,nt[at])&&(rt[nt[at]]=tt[nt[at]]);return rt};const IconLogo=tt=>{var et=__rest$5(tt,[]);return jsxRuntimeExports.jsxs("svg",Object.assign({width:"46",height:"46",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg"},et,{children:[jsxRuntimeExports.jsx("path",{d:"M40.8526 28.6242C39.9579 35.5669 34.01 40.9501 26.8238 40.9501H18.845C11.0429 40.9501 4.69549 34.6062 4.69549 26.8085V18.8345C4.69549 11.0368 11.0429 4.69298 18.845 4.69298H26.8238C34.01 4.69298 39.9577 10.0763 40.8526 17.019H45.5795C44.6624 7.48238 36.602 0 26.8238 0H18.845C8.45384 0 0 8.44921 0 18.8345V26.8085C0 37.194 8.45386 45.643 18.845 45.643H26.8238C36.602 45.643 44.6624 38.1605 45.5795 28.6242H40.8526Z",fill:"#FF6B4E"}),jsxRuntimeExports.jsx("path",{d:"M9.44088 5.39129C9.44088 2.84845 7.3785 0.787231 4.83422 0.787231C2.29008 0.787231 0.227539 2.84843 0.227539 5.39129C0.227539 7.17054 1.23907 8.71115 2.7173 9.47765L1.01 16.8562H8.65842L6.95128 9.47765C8.42934 8.71115 9.44088 7.17054 9.44088 5.39129Z",fill:"#FF6B4E",transform:"translate(18.23,14.79)"})]}))};var __rest$4=function(tt,et){var rt={};for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&et.indexOf(nt)<0&&(rt[nt]=tt[nt]);if(tt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var at=0,nt=Object.getOwnPropertySymbols(tt);at<nt.length;at++)et.indexOf(nt[at])<0&&Object.prototype.propertyIsEnumerable.call(tt,nt[at])&&(rt[nt[at]]=tt[nt[at]]);return rt};const IconError=tt=>{var et=__rest$4(tt,[]);return jsxRuntimeExports.jsx("svg",Object.assign({height:"60",viewBox:"0 0 60 60",width:"60",xmlns:"http://www.w3.org/2000/svg"},et,{children:jsxRuntimeExports.jsx("path",{fill:"#9f4c4c",fillRule:"evenodd",d:"M390.774,690a3.994,3.994,0,0,1,2.824,1.17l15.231,15.23A4,4,0,0,1,410,709.233v21.534a4,4,0,0,1-1.172,2.831L393.6,748.828A3.989,3.989,0,0,1,390.774,750H369.225a3.989,3.989,0,0,1-2.824-1.171l-15.23-15.23A3.994,3.994,0,0,1,350,730.767V709.233a4,4,0,0,1,1.173-2.832l15.23-15.23a3.994,3.994,0,0,1,2.824-1.17h21.549ZM395,729.951A3.406,3.406,0,0,1,395,734.77l-0.22.22a3.42,3.42,0,0,1-4.833,0l-8.764-8.755a1.71,1.71,0,0,0-2.417,0l-8.741,8.746a3.417,3.417,0,0,1-4.836,0l-0.194-.193a3.408,3.408,0,0,1,.017-4.842l8.834-8.735a1.7,1.7,0,0,0,0-2.43l-8.831-8.725a3.409,3.409,0,0,1-.018-4.844l0.193-.193a3.411,3.411,0,0,1,2.418-1c0.944,0,3.255,1.835,3.872,2.455l7.286,7.287a1.708,1.708,0,0,0,2.417,0l8.764-8.748a3.417,3.417,0,0,1,4.831,0L395,705.243a3.406,3.406,0,0,1,0,4.818l-8.727,8.737a1.7,1.7,0,0,0,0,2.407Z",id:"error",transform:"translate(-350 -690)"})}))};var __rest$3=function(tt,et){var rt={};for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&et.indexOf(nt)<0&&(rt[nt]=tt[nt]);if(tt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var at=0,nt=Object.getOwnPropertySymbols(tt);at<nt.length;at++)et.indexOf(nt[at])<0&&Object.prototype.propertyIsEnumerable.call(tt,nt[at])&&(rt[nt[at]]=tt[nt[at]]);return rt};const IconLoading=tt=>{var et=__rest$3(tt,[]);return jsxRuntimeExports.jsxs("svg",Object.assign({width:"120",height:"30",viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:"#fff"},et,{children:[jsxRuntimeExports.jsxs("circle",Object.assign({fill:"#FF6B4E",cx:"15",cy:"15",r:"15"},{children:[jsxRuntimeExports.jsx("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),jsxRuntimeExports.jsx("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]})),jsxRuntimeExports.jsxs("circle",Object.assign({fill:"#FF6B4E",cx:"60",cy:"15",r:"9",fillOpacity:"0.3"},{children:[jsxRuntimeExports.jsx("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),jsxRuntimeExports.jsx("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]})),jsxRuntimeExports.jsxs("circle",Object.assign({fill:"#FF6B4E",cx:"105",cy:"15",r:"15"},{children:[jsxRuntimeExports.jsx("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),jsxRuntimeExports.jsx("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]}))]}))};var __rest$2=function(tt,et){var rt={};for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&et.indexOf(nt)<0&&(rt[nt]=tt[nt]);if(tt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var at=0,nt=Object.getOwnPropertySymbols(tt);at<nt.length;at++)et.indexOf(nt[at])<0&&Object.prototype.propertyIsEnumerable.call(tt,nt[at])&&(rt[nt[at]]=tt[nt[at]]);return rt};const IconSuccess=tt=>{var et=__rest$2(tt,[]);return jsxRuntimeExports.jsxs("svg",Object.assign({id:"Layer_1",version:"1.1",viewBox:"0 0 128 128",xmlns:"http://www.w3.org/2000/svg"},et,{children:[jsxRuntimeExports.jsx("g",{children:jsxRuntimeExports.jsx("circle",{fill:"#31AF91",cx:"64",cy:"64",r:"64"})}),jsxRuntimeExports.jsx("g",{children:jsxRuntimeExports.jsx("path",{fill:"#FFFFFF",cx:"64",cy:"64",r:"64",d:"M54.3,97.2L24.8,67.7c-0.4-0.4-0.4-1,0-1.4l8.5-8.5c0.4-0.4,1-0.4,1.4,0L55,78.1l38.2-38.2   c0.4-0.4,1-0.4,1.4,0l8.5,8.5c0.4,0.4,0.4,1,0,1.4L55.7,97.2C55.3,97.6,54.7,97.6,54.3,97.2z"})})]}))};var __rest$1=function(tt,et){var rt={};for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&et.indexOf(nt)<0&&(rt[nt]=tt[nt]);if(tt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var at=0,nt=Object.getOwnPropertySymbols(tt);at<nt.length;at++)et.indexOf(nt[at])<0&&Object.prototype.propertyIsEnumerable.call(tt,nt[at])&&(rt[nt[at]]=tt[nt[at]]);return rt};const IconWarning=tt=>{var et=__rest$1(tt,[]);return jsxRuntimeExports.jsx("svg",Object.assign({baseProfile:"tiny",height:"24px",id:"Layer_1",version:"1.2",viewBox:"0 0 24 24",width:"24px",xmlns:"http://www.w3.org/2000/svg"},et,{children:jsxRuntimeExports.jsx("path",{fill:"#f0c60b",d:"M21.171,15.398l-5.912-9.854C14.483,4.251,13.296,3.511,12,3.511s-2.483,0.74-3.259,2.031l-5.912,9.856  c-0.786,1.309-0.872,2.705-0.235,3.83C3.23,20.354,4.472,21,6,21h12c1.528,0,2.77-0.646,3.406-1.771  C22.043,18.104,21.957,16.708,21.171,15.398z M12,17.549c-0.854,0-1.55-0.695-1.55-1.549c0-0.855,0.695-1.551,1.55-1.551  s1.55,0.696,1.55,1.551C13.55,16.854,12.854,17.549,12,17.549z M13.633,10.125c-0.011,0.031-1.401,3.468-1.401,3.468  c-0.038,0.094-0.13,0.156-0.231,0.156s-0.193-0.062-0.231-0.156l-1.391-3.438C10.289,9.922,10.25,9.712,10.25,9.5  c0-0.965,0.785-1.75,1.75-1.75s1.75,0.785,1.75,1.75C13.75,9.712,13.711,9.922,13.633,10.125z"})}))},buttonIconStyle={width:"25px",height:"25px",fill:"#3AB03E",position:"absolute",left:"15px",top:"10px"},Icon={LOGO:jsxRuntimeExports.jsx(IconLogo,{style:buttonIconStyle}),ERROR:jsxRuntimeExports.jsx(IconError,{style:buttonIconStyle}),SPINNER:jsxRuntimeExports.jsx(IconLoading,{style:buttonIconStyle}),SUCCESS:jsxRuntimeExports.jsx(IconSuccess,{style:buttonIconStyle}),WARNING:jsxRuntimeExports.jsx(IconWarning,{style:buttonIconStyle})},getIcon=tt=>{switch(tt){case GatewayStatus$2.IN_REVIEW:case GatewayStatus$2.CHECKING:return Icon.SPINNER;case GatewayStatus$2.ACTIVE:return Icon.LOGO;case GatewayStatus$2.REFRESH_TOKEN_REQUIRED:case GatewayStatus$2.FROZEN:case GatewayStatus$2.REJECTED:case GatewayStatus$2.REVOKED:case GatewayStatus$2.LOCATION_NOT_SUPPORTED:case GatewayStatus$2.VPN_NOT_SUPPORTED:case GatewayStatus$2.USER_INFORMATION_REJECTED:return Icon.WARNING;case GatewayStatus$2.ERROR:return Icon.ERROR;default:return Icon.LOGO}},getButtonText=tt=>{switch(tt){case GatewayStatus$2.IN_REVIEW:return"Reviewing";case GatewayStatus$2.CHECKING:return"Collecting";case GatewayStatus$2.ACTIVE:return"Active";case GatewayStatus$2.FROZEN:case GatewayStatus$2.REJECTED:case GatewayStatus$2.REVOKED:return"Attention";case GatewayStatus$2.ERROR:return"Error";case GatewayStatus$2.PROOF_OF_WALLET_OWNERSHIP:return"Confirm";case GatewayStatus$2.LOCATION_NOT_SUPPORTED:case GatewayStatus$2.VPN_NOT_SUPPORTED:return"Not supported";case GatewayStatus$2.COLLECTING_USER_INFORMATION:case GatewayStatus$2.USER_INFORMATION_VALIDATED:return"Resume";case GatewayStatus$2.VALIDATING_USER_INFORMATION:return"Review";case GatewayStatus$2.USER_INFORMATION_REJECTED:return"Failed";default:return"Get Verified"}},isDisabled=tt=>tt===GatewayStatus$2.CHECKING;var __rest=function(tt,et){var rt={};for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&et.indexOf(nt)<0&&(rt[nt]=tt[nt]);if(tt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var at=0,nt=Object.getOwnPropertySymbols(tt);at<nt.length;at++)et.indexOf(nt[at])<0&&Object.prototype.propertyIsEnumerable.call(tt,nt[at])&&(rt[nt[at]]=tt[nt[at]]);return rt};const Button$1=styled.button`
  width: 180px;
  background-color: #282c34;
  outline: none;
  border: 1px solid #434343;
  height: 50px;
  line-height: 20px;
  cursor: pointer;
  position: relative;
  &:disabled {
    opacity: 0.7;
    cursor: default;
  }
  &:active {
    top: 1px;
  }
  &:disabled:active {
    top: 0px;
  }
`,buttonTitleStyle={color:"white",fontSize:"16px",paddingLeft:"20px"},buttonStyleLight={background:"#fff",border:"1px solid #ccc"},buttonTitleStyleLight={color:"#666666"};var ButtonMode;(function(tt){tt[tt.LIGHT=0]="LIGHT",tt[tt.DARK=1]="DARK"})(ButtonMode||(ButtonMode={}));const IdentityButton=tt=>{var{mode:et=ButtonMode.DARK}=tt,rt=__rest(tt,["mode"]);const{requestGatewayToken:nt,gatewayStatus:at}=useGateway();return jsxRuntimeExports.jsxs(Button$1,Object.assign({className:rt.className,onClick:nt,type:"button",disabled:isDisabled(at),style:et===ButtonMode.LIGHT?Object.assign({},buttonStyleLight):{}},{children:[getIcon(at),jsxRuntimeExports.jsx("span",Object.assign({"data-testid":"CIVIC_IDENTITY_BUTTON",style:et===ButtonMode.LIGHT?Object.assign(Object.assign({},buttonTitleStyle),buttonTitleStyleLight):buttonTitleStyle},{children:getButtonText(at)}))]}))};var define_import_meta_env_default={VITE_AIRDROP_ADDRESS:"6BVf7qroiW1PzSZGK4zUKSruK6xCqepHXVdtW1P4iDn1",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},extendStatics$1=function(tt,et){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rt,nt){rt.__proto__=nt}||function(rt,nt){for(var at in nt)Object.prototype.hasOwnProperty.call(nt,at)&&(rt[at]=nt[at])},extendStatics$1(tt,et)};function __extends$1(tt,et){if(typeof et!="function"&&et!==null)throw new TypeError("Class extends value "+String(et)+" is not a constructor or null");extendStatics$1(tt,et);function rt(){this.constructor=tt}tt.prototype=et===null?Object.create(et):(rt.prototype=et.prototype,new rt)}var __assign$1=function(){return __assign$1=Object.assign||function(et){for(var rt,nt=1,at=arguments.length;nt<at;nt++){rt=arguments[nt];for(var it in rt)Object.prototype.hasOwnProperty.call(rt,it)&&(et[it]=rt[it])}return et},__assign$1.apply(this,arguments)};function __awaiter$2(tt,et,rt,nt){function at(it){return it instanceof rt?it:new rt(function(st){st(it)})}return new(rt||(rt=Promise))(function(it,st){function dt(yt){try{mt(nt.next(yt))}catch(Rt){st(Rt)}}function pt(yt){try{mt(nt.throw(yt))}catch(Rt){st(Rt)}}function mt(yt){yt.done?it(yt.value):at(yt.value).then(dt,pt)}mt((nt=nt.apply(tt,et||[])).next())})}function __generator$1(tt,et){var rt={label:0,sent:function(){if(it[0]&1)throw it[1];return it[1]},trys:[],ops:[]},nt,at,it,st;return st={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(st[Symbol.iterator]=function(){return this}),st;function dt(mt){return function(yt){return pt([mt,yt])}}function pt(mt){if(nt)throw new TypeError("Generator is already executing.");for(;st&&(st=0,mt[0]&&(rt=0)),rt;)try{if(nt=1,at&&(it=mt[0]&2?at.return:mt[0]?at.throw||((it=at.return)&&it.call(at),0):at.next)&&!(it=it.call(at,mt[1])).done)return it;switch(at=0,it&&(mt=[mt[0]&2,it.value]),mt[0]){case 0:case 1:it=mt;break;case 4:return rt.label++,{value:mt[1],done:!1};case 5:rt.label++,at=mt[1],mt=[0];continue;case 7:mt=rt.ops.pop(),rt.trys.pop();continue;default:if(it=rt.trys,!(it=it.length>0&&it[it.length-1])&&(mt[0]===6||mt[0]===2)){rt=0;continue}if(mt[0]===3&&(!it||mt[1]>it[0]&&mt[1]<it[3])){rt.label=mt[1];break}if(mt[0]===6&&rt.label<it[1]){rt.label=it[1],it=mt;break}if(it&&rt.label<it[2]){rt.label=it[2],rt.ops.push(mt);break}it[2]&&rt.ops.pop(),rt.trys.pop();continue}mt=et.call(tt,rt)}catch(yt){mt=[6,yt],at=0}finally{nt=it=0}if(mt[0]&5)throw mt[1];return{value:mt[0]?mt[1]:void 0,done:!0}}}function __spreadArray$1(tt,et,rt){if(rt||arguments.length===2)for(var nt=0,at=et.length,it;nt<at;nt++)(it||!(nt in et))&&(it||(it=Array.prototype.slice.call(et,0,nt)),it[nt]=et[nt]);return tt.concat(it||Array.prototype.slice.call(et))}typeof SuppressedError=="function"&&SuppressedError;function getDefaultExportFromCjs$1(tt){return tt&&tt.__esModule&&Object.prototype.hasOwnProperty.call(tt,"default")?tt.default:tt}var fetchRetry$1=function(tt,et){if(et=et||{},typeof tt!="function")throw new ArgumentError$1("fetch must be a function");if(typeof et!="object")throw new ArgumentError$1("defaults must be an object");if(et.retries!==void 0&&!isPositiveInteger$1(et.retries))throw new ArgumentError$1("retries must be a positive integer");if(et.retryDelay!==void 0&&!isPositiveInteger$1(et.retryDelay)&&typeof et.retryDelay!="function")throw new ArgumentError$1("retryDelay must be a positive integer or a function returning a positive integer");if(et.retryOn!==void 0&&!Array.isArray(et.retryOn)&&typeof et.retryOn!="function")throw new ArgumentError$1("retryOn property expects an array or function");var rt={retries:3,retryDelay:1e3,retryOn:[]};return et=Object.assign(rt,et),function(at,it){var st=et.retries,dt=et.retryDelay,pt=et.retryOn;if(it&&it.retries!==void 0)if(isPositiveInteger$1(it.retries))st=it.retries;else throw new ArgumentError$1("retries must be a positive integer");if(it&&it.retryDelay!==void 0)if(isPositiveInteger$1(it.retryDelay)||typeof it.retryDelay=="function")dt=it.retryDelay;else throw new ArgumentError$1("retryDelay must be a positive integer or a function returning a positive integer");if(it&&it.retryOn)if(Array.isArray(it.retryOn)||typeof it.retryOn=="function")pt=it.retryOn;else throw new ArgumentError$1("retryOn property expects an array or function");return new Promise(function(mt,yt){var Rt=function(At){var xt=typeof Request<"u"&&at instanceof Request?at.clone():at;tt(xt,it).then(function(Nt){if(Array.isArray(pt)&&pt.indexOf(Nt.status)===-1)mt(Nt);else if(typeof pt=="function")try{return Promise.resolve(pt(At,null,Nt)).then(function(Ct){Ct?Tt(At,null,Nt):mt(Nt)}).catch(yt)}catch(Ct){yt(Ct)}else At<st?Tt(At,null,Nt):mt(Nt)}).catch(function(Nt){if(typeof pt=="function")try{Promise.resolve(pt(At,Nt,null)).then(function(Ct){Ct?Tt(At,Nt,null):yt(Nt)}).catch(function(Ct){yt(Ct)})}catch(Ct){yt(Ct)}else At<st?Tt(At,Nt,null):yt(Nt)})};function Tt(At,xt,Nt){var Ct=typeof dt=="function"?dt(At,xt,Nt):dt;setTimeout(function(){Rt(++At)},Ct)}Rt(0)})}};function isPositiveInteger$1(tt){return Number.isInteger(tt)&&tt>=0}function ArgumentError$1(tt){this.name="ArgumentError",this.message=tt}var fetchBuilder$1=getDefaultExportFromCjs$1(fetchRetry$1),objectToURLParams$1=function(tt){return tt?Object.entries(tt).reduce(function(et,rt){var nt,at=rt[0],it=rt[1];return it==null||it instanceof Array&&it.length===0||it instanceof Object&&Object.keys(it).length===0||it===""?et:__assign$1(__assign$1({},et),(nt={},nt[at]=it.toString(),nt))},{}):{}},LogLevel;(function(tt){tt.DEBUG="debug",tt.INFO="info",tt.WARN="warn",tt.ERROR="error"})(LogLevel||(LogLevel={}));var logLevels$1=[LogLevel.DEBUG,LogLevel.INFO,LogLevel.WARN,LogLevel.ERROR],allowLogging$1=function(tt,et){return logLevels$1.indexOf(et)>=logLevels$1.indexOf(tt)},DEFAULT_LOG_LEVEL$1=LogLevel.INFO,LoggingProvider$1=function(){function tt(et,rt){if(rt===void 0&&(rt=DEFAULT_LOG_LEVEL$1),this.logger=et,typeof window<"u"){var nt=new URLSearchParams(window.location.search),at=nt.get("logLevel");this.logLevel=at&&logLevels$1.includes(at)?at:rt}else this.logLevel=rt}return tt.prototype.setLogLevel=function(et){this.logLevel=et},tt.prototype.debug=function(et,rt){allowLogging$1(this.logLevel,LogLevel.DEBUG)&&this.logger.debug(et,rt)},tt.prototype.info=function(et,rt){allowLogging$1(this.logLevel,LogLevel.INFO)&&this.logger.info(et,rt)},tt.prototype.warn=function(et,rt){allowLogging$1(this.logLevel,LogLevel.WARN)&&this.logger.warn(et,rt)},tt.prototype.error=function(et,rt){allowLogging$1(this.logLevel,LogLevel.ERROR)&&this.logger.error(et,rt)},tt}(),consoleWithOptionalObject$1=function(tt,et,rt){rt?tt(et,rt):tt(et)},LogLocal$1=function(tt){__extends$1(et,tt);function et(rt){return rt===void 0&&(rt=DEFAULT_LOG_LEVEL$1),tt.call(this,console,rt)||this}return et.prototype.setLogLevel=function(rt){this.logLevel=rt},et.prototype.debug=function(rt,nt){consoleWithOptionalObject$1(this.logger.debug,rt,nt)},et.prototype.info=function(rt,nt){consoleWithOptionalObject$1(this.logger.info,rt,nt)},et.prototype.warn=function(rt,nt){consoleWithOptionalObject$1(this.logger.warn,rt,nt)},et.prototype.error=function(rt,nt){consoleWithOptionalObject$1(this.logger.error,rt,nt)},et}(LoggingProvider$1),localLogger$1=new LoggingProvider$1(new LogLocal$1),prefixDebug$1=function(tt,et){return function(rt,nt){return nt===void 0&&(nt=null),localLogger$1.debug("[".concat(et,"][").concat(tt,"] ").concat(rt),nt)}},prefixError$1=function(tt,et){return function(rt,nt){return nt===void 0&&(nt=null),localLogger$1.error("[".concat(et,"][").concat(tt,"] ").concat(rt),nt)}},prefixWarn$1=function(tt,et){return function(rt,nt){return nt===void 0&&(nt=null),localLogger$1.warn("[".concat(et,"][").concat(tt,"] ").concat(rt),nt)}},prefixInfo$1=function(tt,et){return function(rt,nt){return nt===void 0&&(nt=null),localLogger$1.info("[".concat(et,"][").concat(tt,"] ").concat(rt),nt)}},prefixLogger$1=function(tt,et){return et===void 0&&(et="GatewayClientCore"),{setLogLevel:function(rt){var nt;return(nt=localLogger$1==null?void 0:localLogger$1.setLogLevel)===null||nt===void 0?void 0:nt.call(localLogger$1,rt)},debug:prefixDebug$1(tt,et),error:prefixError$1(tt,et),warn:prefixWarn$1(tt,et),info:prefixInfo$1(tt,et)}},GatekeeperAPIStatus$1;(function(tt){tt[tt.REQUESTING=0]="REQUESTING",tt[tt.NOT_REQUESTED=404]="NOT_REQUESTED",tt[tt.REQUESTED=202]="REQUESTED",tt[tt.ISSUED=200]="ISSUED",tt[tt.ISSUED_EXPIRY_APPROACHING=205]="ISSUED_EXPIRY_APPROACHING",tt[tt.ISSUED_EXPIRED=426]="ISSUED_EXPIRED",tt[tt.LOCATION_NOT_SUPPORTED=401]="LOCATION_NOT_SUPPORTED",tt[tt.REJECTED=403]="REJECTED",tt[tt.VPN_NOT_SUPPORTED=421]="VPN_NOT_SUPPORTED",tt[tt.ISSUED_LOCATION_NOT_SUPPORTED=412]="ISSUED_LOCATION_NOT_SUPPORTED",tt[tt.ISSUED_VPN_NOT_SUPPORTED=451]="ISSUED_VPN_NOT_SUPPORTED",tt[tt.SERVER_FAILURE=500]="SERVER_FAILURE",tt[tt.REQUESTED_RETRIES_EXHAUSTED=408]="REQUESTED_RETRIES_EXHAUSTED"})(GatekeeperAPIStatus$1||(GatekeeperAPIStatus$1={}));var GATEKEEPER_BASE_ENDPOINTS$1={local:"http://localhost:3001/local",test:"https://dev-gatekeeper-api.civic.com",dev:"https://dev-gatekeeper-api.civic.com",preprod:"https://preprod-gatekeeper-api.civic.com",prod:"https://gatekeeper-api.civic.com"},logDebug$2$1=prefixLogger$1("GatekeeperClient").debug,logWarn$2=prefixLogger$1("GatekeeperClient").warn,logError$3$1=prefixLogger$1("GatekeeperClient").error,getGatekeeperEndpoint$1=function(tt,et){var rt=GATEKEEPER_BASE_ENDPOINTS$1[tt];return rt||(logWarn$2("No Gatekeeper endpoint for stage ".concat(tt," . Using dev endpoint.")),rt=GATEKEEPER_BASE_ENDPOINTS$1.dev),"".concat(rt,"/v1/token/").concat(et)},withoutUndefined$1=function(tt){return Object.fromEntries(Object.entries(tt).filter(function(et){var rt=et[1];return rt!==void 0}))},GatekeeperClient$1=function(){function tt(et,rt){var nt=this;this.initConfig=et,this.abortController=et.abortController,this.baseUrl=et.baseUrl||getGatekeeperEndpoint$1(et.stage,et.chainType),this.queryParams=et.queryParams,this.headers=objectToURLParams$1(__assign$1(__assign$1({},et.headers),{"x-civic-flowid":rt})),this.fetchImplementation=et.fetchImplementation;var at=et.numRetries;this.defaultRetryParams={retries:at,retryOn:function(it,st,dt){return __awaiter$2(nt,void 0,void 0,function(){var pt,mt,yt;return __generator$1(this,function(Rt){switch(Rt.label){case 0:return dt?[4,dt.clone().json()]:[3,2];case 1:return mt=Rt.sent(),[3,3];case 2:mt={},Rt.label=3;case 3:if(pt=mt,dt&&dt.status>=500){if(!((yt=pt==null?void 0:pt.message)===null||yt===void 0)&&yt.includes("NO_AUTO_RETRY"))return[2,!1];if(it>=at)throw logError$3$1("retryOn error run out of retries",{error:st,attempt:it,retries:at,response:dt,body:pt}),st;return logDebug$2$1("retrying on 5xx error",{error:st,attempt:it,retries:at,response:dt,body:pt}),[2,!0]}return logDebug$2$1("retryOn returning false as error was not a 5xx error"),[2,!1]}})})},retryDelay:function(it){var st=10+Math.pow(2,it)*1e3;return logDebug$2$1("retryDelay",{attempt:it+1,retryDelay:st}),st}},this.fetchWithRetry=fetchBuilder$1(this.fetchImplementation,this.defaultRetryParams)}return tt.prototype.setFlowId=function(et){this.headers=objectToURLParams$1(__assign$1(__assign$1({},this.headers||{}),{"x-civic-flowid":et}))},tt.prototype.instanceName=function(){var et,rt;return(rt=(et=this.queryParams)===null||et===void 0?void 0:et.gatekeeperNetworkAddress)===null||rt===void 0?void 0:rt.substring(0,6)},tt.prototype.abort=function(){var et,rt;logDebug$2$1("abort ".concat((rt=(et=this.queryParams)===null||et===void 0?void 0:et.gatekeeperNetworkAddress)===null||rt===void 0?void 0:rt.substring(0,6))),this.abortController.abort()},tt.prototype.addQueryParams=function(et){this.queryParams&&Object.entries(this.queryParams).forEach(function(rt){var nt=rt[0],at=rt[1];et.searchParams.append(nt,at)})},tt.prototype.continueIfNotAborted=function(et){return logDebug$2$1("continueIfNotAborted ".concat(this.instanceName()," this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted),this.queryParams),this.abortController.signal.aborted?null:et()},tt.prototype.urlForWallet=function(et){et===void 0&&(et=this.initConfig.walletAddress);var rt=new URL("".concat(this.baseUrl,"/").concat(et));return this.addQueryParams(rt),rt.toString()},tt.prototype.getGatekeeperRecordWithPayload=function(){return __awaiter$2(this,arguments,void 0,function(et){var rt=this;return et===void 0&&(et=this.initConfig.walletAddress),__generator$1(this,function(nt){return logDebug$2$1("url: ".concat(this.urlForWallet(et)," getGatekeeperRecordWithPayload: ").concat(this.instanceName(),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted)),[2,this.fetchWithRetry(this.urlForWallet(et),{method:"GET",headers:this.headers,signal:this.abortController.signal}).then(this.continueIfNotAborted(function(){return function(at){return __awaiter$2(rt,void 0,void 0,function(){var it;return __generator$1(this,function(st){switch(st.label){case 0:return it={state:GatekeeperAPIStatus$1[GatekeeperAPIStatus$1[at.status]]},[4,at.json()];case 1:return[2,(it.payload=st.sent(),it)]}})})}})).catch(function(at){if(at.name==="AbortError")return logDebug$2$1("error due to abort controller signal aborted"),null;throw at})]})})},tt.prototype.getGatekeeperStatus=function(){return __awaiter$2(this,arguments,void 0,function(et){return et===void 0&&(et=this.initConfig.walletAddress),__generator$1(this,function(rt){return logDebug$2$1("getGatekeeperStatus: ".concat(this.instanceName(),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted)),[2,this.fetchWithRetry(this.urlForWallet(et),{method:"HEAD",headers:this.headers,signal:this.abortController.signal}).then(this.continueIfNotAborted(function(){return function(nt){var at=nt.status;return at}})).catch(function(nt){if(logError$3$1("getGatekeeperStatus",nt),nt.name==="AbortError")return logDebug$2$1("error due to abort controller signal aborted"),GatekeeperAPIStatus$1.SERVER_FAILURE;throw nt})]})})},tt.prototype.requestGatewayTokenFromGatekeeper=function(et){return __awaiter$2(this,arguments,void 0,function(rt){var nt,at,it=this,st=rt.payload,dt=rt.proof,pt=rt.payer;return __generator$1(this,function(mt){return logDebug$2$1("requestGatewayTokenFromGatekeeper: ".concat(this.instanceName(),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted),__assign$1(__assign$1({},st),{proof:dt})),nt=withoutUndefined$1(__assign$1(__assign$1({},st),{proof:dt,address:this.initConfig.walletAddress,payer:pt})),logDebug$2$1("requestGatewayTokenFromGatekeeper Requesting a new gatekeeper token...",nt),at=new URL(this.baseUrl),this.addQueryParams(at),[2,this.fetchWithRetry(at.toString(),{method:"POST",headers:__assign$1(__assign$1({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(nt),signal:this.abortController.signal}).then(this.continueIfNotAborted(function(){return function(yt){return __awaiter$2(it,void 0,void 0,function(){var Rt,Tt;return __generator$1(this,function(At){switch(At.label){case 0:return Rt=yt.status,[4,yt.json()];case 1:return Tt=At.sent(),[2,__assign$1(__assign$1({},Tt),{state:GatekeeperAPIStatus$1[GatekeeperAPIStatus$1[Rt]],status:Rt})]}})})}})).catch(function(yt){if(logError$3$1("requestGatewayTokenFromGatekeeper",yt),yt.name==="AbortError")return logDebug$2$1("error due to abort controller signal aborted"),null;throw yt})]})})},tt.prototype.refreshToken=function(et){return __awaiter$2(this,arguments,void 0,function(rt){var nt,at=this,it,st,dt=rt.payload,pt=rt.proof,mt=rt.payer;return __generator$1(this,function(yt){return logDebug$2$1("refreshToken: ".concat(this.urlForWallet(this.initConfig.walletAddress)).concat((st=(it=this.queryParams)===null||it===void 0?void 0:it.gatekeeperNetworkAddress)===null||st===void 0?void 0:st.substring(0,6),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted),{payload:dt}),nt=withoutUndefined$1(__assign$1(__assign$1({},dt),{proof:pt,request:"refresh",payer:mt})),[2,this.fetchWithRetry(this.urlForWallet(this.initConfig.walletAddress),{method:"PATCH",headers:__assign$1(__assign$1({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(nt),signal:this.abortController.signal}).then(function(Rt){return __awaiter$2(at,void 0,void 0,function(){var Tt,At;return __generator$1(this,function(xt){switch(xt.label){case 0:return Tt=Rt.status,[4,Rt.json()];case 1:return At=xt.sent(),[2,__assign$1(__assign$1({},At),{state:GatekeeperAPIStatus$1[GatekeeperAPIStatus$1[Tt]],status:Tt})]}})})}).catch(function(Rt){if(logError$3$1("refreshToken",Rt),Rt.name==="AbortError")return logDebug$2$1("error due to abort controller signal aborted"),null;throw Rt})]})})},tt.prototype.fetchFreshTransaction=function(et){return __awaiter$2(this,arguments,void 0,function(rt){var nt,at,it=this,st,dt,pt=rt.payer;return __generator$1(this,function(mt){return nt=new URL("".concat(this.baseUrl,"/").concat(this.initConfig.walletAddress,"/transaction")),this.addQueryParams(nt),logDebug$2$1("fetchFreshTransaction: ".concat(nt.toString()).concat((dt=(st=this.queryParams)===null||st===void 0?void 0:st.gatekeeperNetworkAddress)===null||dt===void 0?void 0:dt.substring(0,6),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted)),at=withoutUndefined$1({payer:pt}),[2,this.fetchWithRetry("".concat(nt.toString()),{method:"POST",headers:__assign$1(__assign$1({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(at),signal:this.abortController.signal}).then(function(yt){return __awaiter$2(it,void 0,void 0,function(){var Rt,Tt;return __generator$1(this,function(At){switch(At.label){case 0:return Rt=yt.status,[4,yt.json()];case 1:return Tt=At.sent(),[2,__assign$1(__assign$1({},Tt),{state:GatekeeperAPIStatus$1[GatekeeperAPIStatus$1[Rt]],status:Rt})]}})})}).catch(function(yt){if(logError$3$1("fetchFreshTransaction",yt),yt.name==="AbortError")return logDebug$2$1("error due to abort controller signal aborted"),null;throw yt})]})})},tt.prototype.updateTransactionStatus=function(et){return __awaiter$2(this,arguments,void 0,function(rt,nt){var at,it,st=this;return nt===void 0&&(nt="sent"),__generator$1(this,function(dt){return at=new URL("".concat(this.baseUrl,"/").concat(this.initConfig.walletAddress,"/transaction/").concat(rt)),this.addQueryParams(at),it={status:nt},[2,this.fetchWithRetry(at.toString(),{method:"PATCH",headers:__assign$1(__assign$1({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(it),signal:this.abortController.signal}).then(this.continueIfNotAborted(function(){return function(){return __awaiter$2(st,void 0,void 0,function(){return __generator$1(this,function(pt){return logDebug$2$1("updateTransactionStatus successful",{txId:rt,url:at,wallet:this.initConfig.walletAddress}),[2]})})}})).catch(function(pt){if(pt.name==="AbortError")return logDebug$2$1("error due to abort controller signal aborted"),null;throw logError$3$1("updateTransactionStatus",pt),pt})]})})},tt}(),State$1;(function(tt){tt.ACTIVE="ACTIVE",tt.REVOKED="REVOKED",tt.FROZEN="FROZEN"})(State$1||(State$1={}));var TokenState$1;(function(tt){tt.REQUESTED="REQUESTED",tt.ACTIVE="ACTIVE",tt.REVOKED="REVOKED",tt.FROZEN="FROZEN",tt.REJECTED="REJECTED"})(TokenState$1||(TokenState$1={}));var ChainType$1;(function(tt){tt.SOLANA="solana",tt.ETHEREUM="ethereum",tt.CASPER="casper"})(ChainType$1||(ChainType$1={}));var SignatureMethod$1;(function(tt){tt[tt.TRANSACTION=0]="TRANSACTION",tt[tt.MESSAGE=1]="MESSAGE"})(SignatureMethod$1||(SignatureMethod$1={}));var ErrorCode$1={INSUFFICIENT_FUNDS:"0x1",SIGN_TRANSACTION_ERROR:"0x2",SIGN_TRANSACTION_USER_REJECTED_ERROR:"0x21",SIGN_TRANSACTION_UNKNOWN_ERROR:"0x22",SEND_TRANSACTION_ERROR:"0x3",CUSTOM_HANDLE_TRANSACTION_ERROR:"0x4",POWO_ERROR:"0x5",CHAIN_CONFIRMATION_TIMEOUT_ERROR:"0x6",EXPECTED_GATEKEEPER_RECORD:"0x7"},ChainError$1=function(tt){__extends$1(et,tt);function et(rt,nt,at){at===void 0&&(at=localLogger$1);var it=tt.call(this,rt)||this;return it.errorCode=nt,at==null||at.error("ChainError: ".concat(rt," throwing code ").concat(nt)),Object.setPrototypeOf(it,et.prototype),it}return et}(Error),ChainConfirmationTimeout$1=function(tt){__extends$1(et,tt);function et(rt,nt){nt===void 0&&(nt=ErrorCode$1.CHAIN_CONFIRMATION_TIMEOUT_ERROR);var at=tt.call(this,rt)||this;return at.errorCode=nt,localLogger$1.error("ChainConfirmationTimeout: ".concat(rt," throwing code ").concat(nt)),Object.setPrototypeOf(at,et.prototype),at}return et}(Error),GatewayStatus$1;(function(tt){tt.UNKNOWN="UNKNOWN",tt.CHECKING="CHECKING",tt.NOT_REQUESTED="NOT_REQUESTED",tt.COLLECTING_USER_INFORMATION="COLLECTING_USER_INFORMATION",tt.IN_REVIEW="IN_REVIEW",tt.REJECTED="REJECTED",tt.REVOKED="REVOKED",tt.FROZEN="FROZEN",tt.ACTIVE="ACTIVE",tt.ERROR="ERROR",tt.LOCATION_NOT_SUPPORTED="LOCATION_NOT_SUPPORTED",tt.VPN_NOT_SUPPORTED="VPN_NOT_SUPPORTED",tt.REFRESH_TOKEN_REQUIRED="REFRESH_TOKEN_REQUIRED",tt.VALIDATING_USER_INFORMATION="VALIDATING_USER_INFORMATION",tt.USER_INFORMATION_VALIDATED="USER_INFORMATION_VALIDATED",tt.USER_INFORMATION_REJECTED="USER_INFORMATION_REJECTED"})(GatewayStatus$1||(GatewayStatus$1={}));var ExtendedGatewayStatus$1;(function(tt){tt.AWAITING_OWNER_TRANSACTION="AWAITING_OWNER_TRANSACTION",tt.CHAIN_TIMEOUT_ERROR="CHAIN_TIMEOUT_ERROR",tt.CONFIRM_OWNER_TRANSACTION="CONFIRM_OWNER_TRANSACTION",tt.CHAIN_TRANSACTION_ERROR="CHAIN_TRANSACTION_ERROR",tt.TOKEN_IN_PARTNER_REVIEW="TOKEN_IN_PARTNER_REVIEW",tt.TOKEN_REFRESH_IN_REVIEW="TOKEN_REFRESH_IN_REVIEW",tt.RESTART="RESTART",tt.CHAIN_SIGN_MESSAGE_ERROR="CHAIN_SIGN_MESSAGE_ERROR",tt.ISSUANCE_CLIENT_PAYER_REQUESTED="ISSUANCE_CLIENT_PAYER_REQUESTED",tt.ISSUANCE_AWAITING_TRANSACTION_SEND="ISSUANCE_AWAITING_TRANSACTION_SEND",tt.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND="ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND",tt.ISSUANCE_AWAITING_ON_CHAIN_TOKEN="ISSUANCE_AWAITING_ON_CHAIN_TOKEN",tt.ISSUANCE_RESTART_DATA_COLLECTION="ISSUANCE_RESTART_DATA_COLLECTION",tt.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX="ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX",tt.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX="ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX",tt.ISSUANCE_CLIENT_SENDS_START_NEW_TX="ISSUANCE_CLIENT_SENDS_START_NEW_TX",tt.REFRESH_USER_INFORMATION_VALIDATED="REFRESH_USER_INFORMATION_VALIDATED",tt.REFRESH_CLIENT_PAYER_REQUESTED="REFRESH_CLIENT_PAYER_REQUESTED",tt.REFRESH_IN_REVIEW="REFRESH_IN_REVIEW",tt.REFRESH_AWAITING_TRANSACTION_SEND="REFRESH_AWAITING_TRANSACTION_SEND",tt.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND="REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND",tt.REFRESH_AWAITING_ON_CHAIN_TOKEN="REFRESH_AWAITING_ON_CHAIN_TOKEN",tt.RESTART_REFRESH="RESTART_REFRESH",tt.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX="REFRESH_CLIENT_SENDS_REQUEST_NEW_TX",tt.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX="REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX",tt.REFRESH_CLIENT_SENDS_START_NEW_TX="REFRESH_CLIENT_SENDS_START_NEW_TX"})(ExtendedGatewayStatus$1||(ExtendedGatewayStatus$1={}));var GKN_SERVICE_ENDPOINTS={local:"https://dev.api.civic.com/gkn-dev",test:"https://dev.api.civic.com/gkn-dev",dev:"https://dev.api.civic.com/gkn-dev",preprod:"https://dev.api.civic.com/gkn-preprod",prod:"https://api.civic.com/gkn"},getGatekeeperNetworkData=function(tt,et){return __awaiter$2(void 0,void 0,void 0,function(){var rt,nt;return __generator$1(this,function(at){switch(at.label){case 0:if(!GKN_SERVICE_ENDPOINTS[tt])throw new Error("No Gatekeeper Network Service endpoint found for stage ".concat(tt));return[4,fetch("".concat(GKN_SERVICE_ENDPOINTS[tt],"/public/gatekeeperNetwork/").concat(et))];case 1:return rt=at.sent(),[4,rt.json()];case 2:if(nt=at.sent(),(nt==null?void 0:nt.id)!==et)throw new Error("Could not fetch data from Gatekeeper Network Service for ".concat(et));return[2,nt]}})})},FlowType$1;(function(tt){tt.ISSUANCE="issuance",tt.REFRESH="refresh",tt.STATUS="status",tt.REVOCATION="revocation",tt.UNFREEZE="unfreeze"})(FlowType$1||(FlowType$1={}));var FlowStatus$1;(function(tt){tt.IN_PROGRESS="in-progress",tt.RESULT="result",tt.FINISHED="finished"})(FlowStatus$1||(FlowStatus$1={}));let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex$1=[];for(let tt=0;tt<256;++tt)byteToHex$1.push((tt+256).toString(16).slice(1));function unsafeStringify(tt,et=0){return byteToHex$1[tt[et+0]]+byteToHex$1[tt[et+1]]+byteToHex$1[tt[et+2]]+byteToHex$1[tt[et+3]]+"-"+byteToHex$1[tt[et+4]]+byteToHex$1[tt[et+5]]+"-"+byteToHex$1[tt[et+6]]+byteToHex$1[tt[et+7]]+"-"+byteToHex$1[tt[et+8]]+byteToHex$1[tt[et+9]]+"-"+byteToHex$1[tt[et+10]]+byteToHex$1[tt[et+11]]+byteToHex$1[tt[et+12]]+byteToHex$1[tt[et+13]]+byteToHex$1[tt[et+14]]+byteToHex$1[tt[et+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var native={randomUUID};function v4(tt,et,rt){if(native.randomUUID&&!et&&!tt)return native.randomUUID();tt=tt||{};const nt=tt.random||(tt.rng||rng)();return nt[6]=nt[6]&15|64,nt[8]=nt[8]&63|128,unsafeStringify(nt)}var CivicPassMessageEventResult$1;(function(tt){tt.SUCCESS="success",tt.FAILURE="failure",tt.CANCELLED="cancelled",tt.IN_PROGRESS="inProgress",tt.ERROR="error"})(CivicPassMessageEventResult$1||(CivicPassMessageEventResult$1={}));var CivicPassMessageAction$1;(function(tt){tt.ISSUANCE="issuance",tt.CONFIRM_TRANSACTION="confirmTransaction",tt.TOKEN_FROZEN="tokenFrozen",tt.TOKEN_ACTIVE="tokenActive",tt.TOKEN_REVOKED="tokenRevoked",tt.TOKEN_REJECTED="tokenRejected",tt.TOKEN_IN_REVIEW="tokenInReview",tt.TOKEN_REFRESH_IN_REVIEW="tokenRefreshInReview",tt.TOKEN_IN_PARTNER_REVIEW="tokenInPartnerReview",tt.FAILED_IP_CHECK="failedIpCheck",tt.FAILED_VPN_CHECK="failedVpnCheck",tt.REFRESH="refresh",tt.STATUS="status",tt.ERROR="error",tt.CHAIN_ERROR="chainError",tt.SIGN_TRANSACTION="signTransaction",tt.AWAITING_TRANSACTION_CONFIRMATION="awaitingTransactionConfirmation",tt.START_PRE_APPROVED_TRANSACTION="startPreApprovedTransaction"})(CivicPassMessageAction$1||(CivicPassMessageAction$1={}));var ValidationStatus$1;(function(tt){tt.COLLECTING="COLLECTING",tt.PROCESSING="PROCESSING",tt.IN_REVIEW="IN_REVIEW",tt.COMPLETED="COMPLETED",tt.FAILED="FAILED",tt.NOT_FOUND="NOT_FOUND"})(ValidationStatus$1||(ValidationStatus$1={}));var CivicSignEventTypeResponse$1;(function(tt){tt.RESPONSE_PUBLIC_KEY="RESPONSE_PUBLIC_KEY",tt.RESPONSE_DID="RESPONSE_DID",tt.RESPONSE_SIGNED_PROOF="RESPONSE_SIGNED_PROOF",tt.RESPONSE_SIGNED_MESSAGE="RESPONSE_SIGNED_MESSAGE"})(CivicSignEventTypeResponse$1||(CivicSignEventTypeResponse$1={}));var CivicSignEventTypeRequest$1;(function(tt){tt.REQUEST_PUBLIC_KEY="REQUEST_PUBLIC_KEY",tt.REQUEST_DID="REQUEST_DID",tt.REQUEST_SIGNED_PROOF="REQUEST_SIGNED_PROOF",tt.REQUEST_SIGNED_MESSAGE="REQUEST_SIGNED_MESSAGE"})(CivicSignEventTypeRequest$1||(CivicSignEventTypeRequest$1={}));var ListenerManager$1=function(){function tt(et,rt,nt,at){at===void 0&&(at=prefixLogger$1("ListenerManager")),this.messageEventInterface=et,this.chainImplementation=rt,this.instanceId=nt,this.log=at,this.messageListeners={}}return tt.prototype.registerCivicPassListener=function(et){var rt=this,nt=function(at){var it,st;if(!at.data){rt.log.error("No data in response");return}if(((it=at.data)===null||it===void 0?void 0:it.instanceId)!==rt.instanceId){!((st=at.data)===null||st===void 0)&&st.instanceId&&at.data.source!=="@devtools-page"&&rt.log.debug("instanceId for different instance",{event:at.data,instanceId:rt.instanceId});return}Object.values(CivicPassMessageAction$1).includes(at.data.action)&&(rt.log.debug("received CivicPassListener postMessage",at.data),et(at.data))};this.log.debug("Adding event listener for civic-pass events"),this.messageEventInterface.addMessageEventListener(nt),this.messageListeners.civicPass=nt},tt.prototype.registerCivicSignListener=function(et){var rt=this,nt=function(at){var it,st;if(!at.data){rt.log.error("No data in response");return}if(((it=at.data)===null||it===void 0?void 0:it.instanceId)!==rt.instanceId){!((st=at.data)===null||st===void 0)&&st.instanceId&&at.data.source!=="@devtools-page"&&rt.log.debug("instanceId for different instance",{event:at.data,instanceId:rt.instanceId});return}Object.values(CivicSignEventTypeRequest$1).includes(at.data.request)&&(rt.log.debug("received CivicSignListener postMessage",at.data),et(at.data))};this.log.debug("Adding event listener for civic-sign events"),this.messageEventInterface.addMessageEventListener(nt),this.messageListeners.civicSign=nt},tt.prototype.registerOnChainListeners=function(et){this.chainImplementation.on("TOKEN_CREATED",et),this.chainImplementation.on("TOKEN_CHANGED",et)},tt.prototype.unregisterAllListeners=function(){var et=this;Object.entries(this.messageListeners).forEach(function(rt){var nt=rt[0],at=rt[1];et.log.debug("Removing message event listener",nt),et.messageEventInterface.removeMessageEventListener(at),delete et.messageListeners[nt]})},tt}(),InputStatus$1;(function(tt){tt.IN_PROGRESS="IN_PROGRESS",tt.COMPLETE="COMPLETE",tt.ERROR="ERROR",tt.RECEIVED="RECEIVED",tt.RESPONDED="RESPONDED"})(InputStatus$1||(InputStatus$1={}));var getPayer$1=function(tt){var et=tt.gatekeeperSendsTransaction,rt=tt.payer,nt=tt.wallet;if(!et)return rt||(nt==null?void 0:nt.address)},logDebug$1=prefixLogger$1("remoteSign").debug,logError$2$1=prefixLogger$1("remoteSign").error,eventEmitter$1=function(tt){return{postMessage:function(et,rt){tt.postMessage(et,rt)}}},RemoteSignWindowEventEmitter$1=function(){function tt(et,rt){this.instanceId=rt,this.postMessageTarget=et}return tt.prototype.sendPublicKey=function(et){this.emit({event:CivicSignEventTypeResponse$1.RESPONSE_PUBLIC_KEY,data:et})},tt.prototype.sendDid=function(et){this.emit({event:CivicSignEventTypeResponse$1.RESPONSE_DID,data:et})},tt.prototype.sendSignedProof=function(et,rt){this.emit({event:CivicSignEventTypeResponse$1.RESPONSE_SIGNED_PROOF,data:{proof:et,signatureMethod:rt}})},tt.prototype.sendSignedMessage=function(et){this.emit({event:CivicSignEventTypeResponse$1.RESPONSE_SIGNED_MESSAGE,data:et})},tt.prototype.emit=function(et){this.postMessageTarget.postMessage(__assign$1(__assign$1({},et),{instanceId:this.instanceId}),"*")},tt}(),handleRemoteSignEvent$1=function(tt,et,rt){return __awaiter$2(void 0,void 0,void 0,function(){var nt,at,it,st,dt,pt;return __generator$1(this,function(mt){switch(mt.label){case 0:return nt=rt.wallet,at=rt.chainImplementation,st=rt.ownerDids,st?[3,2]:[4,at.ownerDids()];case 1:st=mt.sent(),mt.label=2;case 2:return it=st,logDebug$1("handleRemoteSignEvent ".concat(tt.request),{remoteSignerInst:et,wallet:nt,chainImplDids:it}),Object.values(CivicSignEventTypeRequest$1).includes(tt.request)?tt.request===CivicSignEventTypeRequest$1.REQUEST_PUBLIC_KEY?(et==null||et.sendPublicKey(nt.address),[2,nt.address]):tt.request===CivicSignEventTypeRequest$1.REQUEST_DID?(et==null||et.sendDid(it==null?void 0:it[0]),[2,it==null?void 0:it[0]]):tt.request!==CivicSignEventTypeRequest$1.REQUEST_SIGNED_PROOF?[3,4]:[4,at.proveWalletOwnership(tt.payload)]:(logError$2$1("No result from remote sign event"),[2]);case 3:return dt=mt.sent(),et==null||et.sendSignedProof(dt.proof,dt.signatureMethod),[2,{proof:dt.proof,signatureMethod:dt.signatureMethod}];case 4:return tt.request!==CivicSignEventTypeRequest$1.REQUEST_SIGNED_MESSAGE?[3,6]:tt.payload?[4,at.proveWalletOwnership(tt.payload)]:[3,6];case 5:return pt=mt.sent(),et==null||et.sendSignedMessage(Buffer.from(pt.proof)),[2,pt];case 6:return[2]}})})},OrchestratorFlow=function(){function tt(et,rt,nt){this.gatewayCoreStore=et,this.gatekeeperClient=rt,this.abortController=nt,this.log=prefixLogger$1("OrchestratorFlow")}return tt.prototype.setGatekeeperClientFlowId=function(){var et,rt,nt,at,it=this.gatewayCoreStore.getState();if(!(!((rt=(et=it.output)===null||et===void 0?void 0:et.flowParameters)===null||rt===void 0)&&rt.flowId))throw this.log.error("Missing flowId",it),new Error("Missing flowId");this.gatekeeperClient.setFlowId((at=(nt=it.output)===null||nt===void 0?void 0:nt.flowParameters)===null||at===void 0?void 0:at.flowId)},tt}(),DEFAULT_EXPECT_TOKEN_TIMEOUT_SECONDS$1=120,DEFAULT_MAX_CLIENT_SENDS_RETRIES$1=3,isApproachingExpiry$1=function(tt,et){var rt=Math.floor(Date.now()/1e3);return tt-rt<=et},hasExpired$1=function(tt){if(!tt)return!1;var et=Math.floor(Date.now()/1e3);return et>=tt},isTokenRefreshRequired$1=function(tt){var et=tt.gatewayToken,rt=tt.tokenExpirationMarginSeconds,nt=tt.forceRequireRefresh,at=et||{},it=at.expiryTime,st=at.state,dt=st===State$1.ACTIVE;return!it||!dt?!1:!!nt||hasExpired$1(it)||isApproachingExpiry$1(it,rt)},MAX_ALLOWED_TIMEOUT$1=2147483647,nowSeconds$1=function(){return Math.floor(Date.now()/1e3)},getTokenRefreshIntervalMilliseconds$1=function(tt,et){var rt=tt-nowSeconds$1()-et,nt=rt>0?rt*1e3:0;return nt>=MAX_ALLOWED_TIMEOUT$1?MAX_ALLOWED_TIMEOUT$1-1:nt},Issuance$1=function(tt){__extends$1(et,tt);function et(rt,nt,at,it,st){st===void 0&&(st=DEFAULT_EXPECT_TOKEN_TIMEOUT_SECONDS$1);var dt=tt.call(this,rt,at,it)||this;return dt.gatewayCoreStore=rt,dt.chainImplementation=nt,dt.gatekeeperClient=at,dt.abortController=it,dt.expectTokenTimeoutSeconds=st,dt.timers={},dt.log=prefixLogger$1("Issuance instance with expectTokenTimeoutSeconds ".concat(st)),dt}return et.prototype.sendTransaction=function(){return __awaiter$2(this,void 0,void 0,function(){var rt,nt=this,at;return __generator$1(this,function(it){if(rt=this.gatewayCoreStore.getState(),!(!((at=rt.inputs.gatekeeperRecord.received)===null||at===void 0)&&at.transaction))throw this.log.error("Missing gatekeeperRecord payload"),new Error("Missing gatekeeperRecord payload");if(this.gatewayCoreStore.setState(function(st){st.internal.chainTransaction||(st.internal.chainTransaction={attempts:0}),st.internal.chainTransaction.attempts!==void 0&&(st.internal.chainTransaction.attempts+=1),st.internal.chainTransaction.sentTxId=void 0,st.internal.errors.expectedOnChainToken=null,st.inputs.gatewayToken.status=InputStatus$1.COMPLETE,st.internal.chainTransaction.error=void 0,st.inputs.civicPass.received=null}),this.abortExpectedTokenTimer(),!this.chainImplementation.handleTransaction)throw this.log.error("No handleTransaction defined on chainImplementation."),new Error("No handleTransaction defined on chainImplementation");return this.chainImplementation.handleTransaction(rt.inputs.gatekeeperRecord.received.transaction).then(function(st){nt.abortController.signal.aborted||nt.gatewayCoreStore.setState(function(dt){dt.internal.chainTransaction||(dt.internal.chainTransaction={}),nt.gatekeeperClient.updateTransactionStatus(st),dt.internal.chainTransaction.sentTxId=st})}).catch(function(st){nt.gatewayCoreStore.setState(function(dt){dt.internal.chainTransaction||(dt.internal.chainTransaction={}),dt.internal.chainTransaction.error=st})}),[2]})})},et.prototype.gatekeeperRequest=function(rt,nt){return __awaiter$2(this,void 0,void 0,function(){var at,it,st;return __generator$1(this,function(dt){if(!(!((at=nt.inputs.civicPass.received)===null||at===void 0)&&at.payload))throw this.log.error("Missing civicPass payload",nt),new Error("Missing civicPass payload");return this.currentPayload=(it=nt.inputs.civicPass.received)===null||it===void 0?void 0:it.payload,[2,this.gatekeeperClient.requestGatewayTokenFromGatekeeper({payload:(st=nt.inputs.civicPass.received)===null||st===void 0?void 0:st.payload,payer:rt})]})})},et.prototype.freshTransactionGatekeeperRequest=function(rt){return __awaiter$2(this,void 0,void 0,function(){return __generator$1(this,function(nt){return[2,this.gatekeeperClient.fetchFreshTransaction({payer:rt})]})})},et.prototype.clearStateBeforeGatekeeperRequest=function(rt){rt===void 0&&(rt=!1),this.gatewayCoreStore.setState(function(nt){nt.internal.errors.expectedOnChainToken=null,nt.inputs.gatewayToken.status=InputStatus$1.COMPLETE,nt.inputs.gatekeeperRecord.received=null,nt.inputs.gatekeeperRecord.status=InputStatus$1.IN_PROGRESS,rt&&(nt.internal.chainTransaction=void 0)})},et.prototype.makeGatekeeperRequest=function(rt){return __awaiter$2(this,arguments,void 0,function(nt){var at,it,st=this,dt=nt.payer,pt=nt.isFreshTransactionRequest;return __generator$1(this,function(mt){return at=this.gatewayCoreStore.getState(),this.setGatekeeperClientFlowId(),this.log.debug("makeGatekeeperRequest",at),this.abortExpectedTokenTimer(),this.clearStateBeforeGatekeeperRequest(pt),it=pt?this.freshTransactionGatekeeperRequest(dt):this.gatekeeperRequest(dt,at),it.then(function(yt){st.abortController.signal.aborted||st.gatewayCoreStore.setState(function(Rt){Rt.inputs.gatekeeperRecord.status=InputStatus$1.COMPLETE,Rt.inputs.gatekeeperRecord.received=yt})}).catch(function(yt){st.gatewayCoreStore.setState(function(Rt){Rt.inputs.gatekeeperRecord.status=InputStatus$1.ERROR,Rt.inputs.gatekeeperRecord.error=yt})}),[2]})})},et.prototype.retrieveFreshTransaction=function(rt){return __awaiter$2(this,void 0,void 0,function(){var nt,at=this,it;return __generator$1(this,function(st){if(nt=this.gatewayCoreStore.getState(),!(!((it=nt.inputs.civicPass.received)===null||it===void 0)&&it.payload))throw this.log.error("Missing civicPass payload",nt),new Error("Missing civicPass payload");return this.setGatekeeperClientFlowId(),this.log.debug("retrieveFreshTransaction",nt),this.abortExpectedTokenTimer(),this.clearStateBeforeGatekeeperRequest(),this.gatekeeperRequest(rt,nt).then(function(dt){at.abortController.signal.aborted||at.gatewayCoreStore.setState(function(pt){pt.inputs.gatekeeperRecord.status=InputStatus$1.COMPLETE,pt.inputs.gatekeeperRecord.received=dt})}).catch(function(dt){at.gatewayCoreStore.setState(function(pt){pt.inputs.gatekeeperRecord.status=InputStatus$1.ERROR,pt.inputs.gatekeeperRecord.error=dt})}),[2]})})},et.prototype.statusHasValidToken=function(){var rt=this.gatewayCoreStore.getState();return!!rt.inputs.gatewayToken.received},et.prototype.expectOnChainToken=function(){var rt=this,nt=this.gatewayCoreStore.getState();nt.inputs.gatewayToken.received||this.timers.expectOnChainToken||(this.timers.expectOnChainToken=setTimeout(function(){rt.gatewayCoreStore.setState(function(at){rt.statusHasValidToken()||(at.internal.errors.expectedOnChainToken=new ChainConfirmationTimeout$1("No on-chain token found within interval"))})},this.expectTokenTimeoutSeconds*1e3),this.log.debug("Started expected token timer",this.timers.expectOnChainToken))},et.prototype.abort=function(){this.abortExpectedTokenTimer(),this.abortRefreshCountdownTimer()},et.prototype.abortExpectedTokenTimer=function(){this.timers.expectOnChainToken&&(this.log.debug("Aborting expected token timer",this.timers.expectOnChainToken),clearTimeout(this.timers.expectOnChainToken))},et.prototype.onActiveTokenFound=function(){this.abortExpectedTokenTimer(),this.gatewayCoreStore.setState(function(rt){var nt;((nt=rt.inputs.dynamicParameters)===null||nt===void 0?void 0:nt.forceRequireRefresh)!==void 0&&(rt.inputs.gatekeeperRecord.received=null,rt.internal.chainTransaction=void 0,rt.inputs.dynamicParameters.forceRequireRefresh=!1)}),this.startRefreshCountdownTimer()},et.prototype.startRefreshCountdownTimer=function(){var rt=this,nt=this.gatewayCoreStore.getState(),at=nt.inputs.gatewayToken.received;if(at!=null&&at.expiryTime){this.abortRefreshCountdownTimer();var it=getTokenRefreshIntervalMilliseconds$1(at.expiryTime,0);this.timers.refreshCountdownTimer=setTimeout(function(){rt.abortRefreshCountdownTimer()},it),this.log.debug("Started refresh countdown timer",{gatewayToken:at,refreshCountdownTimer:this.timers.refreshCountdownTimer})}},et.prototype.abortRefreshCountdownTimer=function(){this.log.debug("abortRefreshCountdownTimer",{refreshCountdownTimer:this.timers.refreshCountdownTimer}),this.timers.refreshCountdownTimer&&(clearTimeout(this.timers.refreshCountdownTimer),this.timers.refreshCountdownTimer=void 0)},et.prototype.restartDataCollection=function(){this.gatewayCoreStore.setState(function(rt){rt.inputs.civicPass.received=null})},et}(OrchestratorFlow),Refresh$1=function(tt){__extends$1(et,tt);function et(rt,nt,at,it,st){st===void 0&&(st=DEFAULT_EXPECT_TOKEN_TIMEOUT_SECONDS$1);var dt=tt.call(this,rt,nt,at,it,st)||this;return dt.gatewayCoreStore=rt,dt.chainImplementation=nt,dt.gatekeeperClient=at,dt.abortController=it,dt.expectTokenTimeoutSeconds=st,dt}return et.prototype.clearStateBeforeGatekeeperRequest=function(){this.gatewayCoreStore.setState(function(rt){rt.inputs.gatekeeperRecord.received=null,rt.internal.chainTransaction=void 0,rt.inputs.gatekeeperRecord.status=InputStatus$1.IN_PROGRESS})},et.prototype.gatekeeperRequest=function(rt,nt){return __awaiter$2(this,void 0,void 0,function(){var at,it,st;return __generator$1(this,function(dt){if(!(!((at=nt.inputs.civicPass.received)===null||at===void 0)&&at.payload))throw this.log.error("Missing civicPass payload",nt),new Error("Missing civicPass payload");return this.currentPayload=(it=nt.inputs.civicPass.received)===null||it===void 0?void 0:it.payload,[2,this.gatekeeperClient.refreshToken({payload:(st=nt.inputs.civicPass.received)===null||st===void 0?void 0:st.payload,payer:rt})]})})},et.prototype.statusHasValidToken=function(){var rt=this.gatewayCoreStore.getState(),nt=rt.inputs.gatewayToken.received;return nt!=null&&nt.expiryTime?!!(nt&&!isTokenRefreshRequired$1({gatewayToken:nt,tokenExpirationMarginSeconds:0})):!1},et}(Issuance$1),UserInteractionStatus$1;(function(tt){tt.STARTED="started",tt.FINISHED="finished"})(UserInteractionStatus$1||(UserInteractionStatus$1={}));var getUserInteractionStatusFromAction$1=function(tt,et){var rt,nt;return[CivicPassMessageAction$1.TOKEN_ACTIVE,CivicPassMessageAction$1.TOKEN_REVOKED,CivicPassMessageAction$1.TOKEN_FROZEN,CivicPassMessageAction$1.TOKEN_REJECTED,CivicPassMessageAction$1.FAILED_IP_CHECK,CivicPassMessageAction$1.FAILED_VPN_CHECK,CivicPassMessageAction$1.ERROR].includes(et)?UserInteractionStatus$1.FINISHED:(nt=(rt=tt.internal)===null||rt===void 0?void 0:rt.userInteraction)===null||nt===void 0?void 0:nt.status},PartnerReview$1=function(tt){__extends$1(et,tt);function et(rt,nt,at,it){it===void 0&&(it=2);var st=tt.call(this,rt,nt,at)||this;return st.gatewayCoreStore=rt,st.gatekeeperClient=nt,st.abortController=at,st.pollingIntervalSeconds=it,st.timers={},st.log=prefixLogger$1("PartnerReview instance"),st}return et.prototype.pollForReviewFinished=function(){return __awaiter$2(this,void 0,void 0,function(){var rt,nt=this;return __generator$1(this,function(at){return this.setGatekeeperClientFlowId(),rt=function(){return __awaiter$2(nt,void 0,void 0,function(){var it=this,st;return __generator$1(this,function(dt){return!((st=this.abortController)===null||st===void 0)&&st.signal.aborted?(clearInterval(this.timers.pollForReviewFinishedTimer),[2]):(this.gatekeeperClient.getGatekeeperRecordWithPayload().then(function(pt){if(!pt||(pt==null?void 0:pt.state)===void 0||(pt==null?void 0:pt.state)===GatekeeperAPIStatus$1.SERVER_FAILURE)throw it.log.error("Error polling gatekeeper, no state returned",pt),clearInterval(it.timers.pollForReviewFinishedTimer),new Error("Error polling gatekeeper, no state returned");it.log.debug("pollUntilNotRequested record.state",pt.state),pt.state!==GatekeeperAPIStatus$1.REQUESTED&&(it.gatewayCoreStore.setState(function(mt){mt.inputs.gatekeeperRecord.status=InputStatus$1.COMPLETE,mt.inputs.gatekeeperRecord.received=pt}),clearInterval(it.timers.pollForReviewFinishedTimer))}),[2])})})},rt(),this.timers.pollForReviewFinishedTimer=setInterval(rt,this.pollingIntervalSeconds*1e3),[2]})})},et.prototype.abort=function(){clearInterval(this.timers.pollForReviewFinishedTimer)},et}(OrchestratorFlow),_a$2$1,logError$1$1=prefixLogger$1("common").error,validationProcessToGatewayStatus$1=(_a$2$1={},_a$2$1[ValidationStatus$1.COLLECTING]=GatewayStatus$1.COLLECTING_USER_INFORMATION,_a$2$1[ValidationStatus$1.PROCESSING]=GatewayStatus$1.VALIDATING_USER_INFORMATION,_a$2$1[ValidationStatus$1.IN_REVIEW]=GatewayStatus$1.VALIDATING_USER_INFORMATION,_a$2$1[ValidationStatus$1.FAILED]=GatewayStatus$1.USER_INFORMATION_REJECTED,_a$2$1[ValidationStatus$1.COMPLETED]=GatewayStatus$1.USER_INFORMATION_VALIDATED,_a$2$1),payerIsWalletOwner$1=function(tt){var et,rt,nt;return((et=tt.inputs.parameters)===null||et===void 0?void 0:et.payer)===((nt=(rt=tt.inputs.parameters)===null||rt===void 0?void 0:rt.wallet)===null||nt===void 0?void 0:nt.address)},tokenNoGatekeeperRecordError$1=function(tt){var et,rt,nt;return!!(!((et=tt.inputs.gatewayToken)===null||et===void 0)&&et.received&&((nt=(rt=tt.inputs.gatekeeperRecord)===null||rt===void 0?void 0:rt.received)===null||nt===void 0?void 0:nt.state)===GatekeeperAPIStatus$1.NOT_REQUESTED)},statusFromGatewayTokenIfExists$1=function(tt){var et,rt,nt=(et=tt.inputs.gatewayToken)===null||et===void 0?void 0:et.received;if(tokenNoGatekeeperRecordError$1(tt))return GatewayStatus$1.ERROR;if(nt){var at=isTokenRefreshRequired$1({gatewayToken:nt,tokenExpirationMarginSeconds:0,forceRequireRefresh:(rt=tt.inputs.dynamicParameters)===null||rt===void 0?void 0:rt.forceRequireRefresh});switch(nt.state){case"ACTIVE":return at?GatewayStatus$1.REFRESH_TOKEN_REQUIRED:GatewayStatus$1.ACTIVE;case"FROZEN":return GatewayStatus$1.FROZEN;case"REVOKED":return GatewayStatus$1.REVOKED;default:return logError$1$1("Unexpected token state: ".concat(nt.state)),GatewayStatus$1.ERROR}}},handleGatewayTokenExistsStatus$1=function(tt){var et=statusFromGatewayTokenIfExists$1(tt);return et||(logError$1$1("The gateway status indicated an existing token but no status could be derived"),GatewayStatus$1.ERROR)},statusIfGatekeeperRecordRejected$1=function(tt){var et,rt=tt.inputs.gatekeeperRecord,nt=tt.inputs.gatewayToken,at=(et=rt==null?void 0:rt.received)===null||et===void 0?void 0:et.state;switch(at){case GatekeeperAPIStatus$1.ISSUED_EXPIRED:return nt!=null&&nt.received?void 0:GatewayStatus$1.ERROR;case GatekeeperAPIStatus$1.REJECTED:return GatewayStatus$1.REJECTED;case GatekeeperAPIStatus$1.ISSUED_LOCATION_NOT_SUPPORTED:case GatekeeperAPIStatus$1.LOCATION_NOT_SUPPORTED:return GatewayStatus$1.LOCATION_NOT_SUPPORTED;case GatekeeperAPIStatus$1.ISSUED_VPN_NOT_SUPPORTED:case GatekeeperAPIStatus$1.VPN_NOT_SUPPORTED:return GatewayStatus$1.VPN_NOT_SUPPORTED;case GatekeeperAPIStatus$1.REQUESTED_RETRIES_EXHAUSTED:return GatewayStatus$1.ERROR;default:return}},Orchestrator=function(){function tt(et,rt,nt,at,it,st,dt){var pt,mt,yt,Rt,Tt,At,xt,Nt;if(this.gatewayCoreStore=et,this.messageEventInterface=rt,this.instanceId=nt,this.inputs=at,this.postMessageTargetCallback=st,this.chainImplementation=dt,this.abortController=new AbortController,!this.chainImplementation||!(!((pt=at.wallet)===null||pt===void 0)&&pt.address)||!at.stage)throw new Error("chainImplementation wallet and stage are required");this.wallet=at.wallet,this.payer=getPayer$1(at),this.log=prefixLogger$1("Orchestrator[".concat(this.instanceId,"]")),this.listenerManager=new ListenerManager$1(this.messageEventInterface,this.chainImplementation,this.instanceId);var Ct=(yt=(mt=this.chainImplementation)===null||mt===void 0?void 0:mt.chainDetails)===null||yt===void 0?void 0:yt.chainNetwork;this.gatekeeperClient=new GatekeeperClient$1({abortController:this.abortController,baseUrl:(Rt=at.gatekeeperConfig)===null||Rt===void 0?void 0:Rt.baseUrl,queryParams:at.gatekeeperNetwork?{network:Ct,gatekeeperNetworkAddress:at.gatekeeperNetwork}:void 0,headers:__assign$1(__assign$1({},((Tt=at.gatekeeperConfig)===null||Tt===void 0?void 0:Tt.headers)||{}),at.xCivicClientHeader?{"x-civic-client":at.xCivicClientHeader}:{}),stage:at.stage,fetchImplementation:it.fetchImplementation,numRetries:it.numRetries,walletAddress:(At=at.wallet)===null||At===void 0?void 0:At.address,chainType:(Nt=(xt=this.chainImplementation)===null||xt===void 0?void 0:xt.chainDetails)===null||Nt===void 0?void 0:Nt.chainType}),this.log.debug("Orchestrator created")}return Object.defineProperty(tt.prototype,"issuance",{get:function(){return this._issuance||(this._issuance=new Issuance$1(this.gatewayCoreStore,this.chainImplementation,this.gatekeeperClient,this.abortController,this.inputs.expectTokenTimeoutSeconds)),this._issuance},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"refresh",{get:function(){return this._refresh||(this._refresh=new Refresh$1(this.gatewayCoreStore,this.chainImplementation,this.gatekeeperClient,this.abortController,this.inputs.expectTokenTimeoutSeconds)),this._refresh},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"partnerReview",{get:function(){return this._partnerReview||(this._partnerReview=new PartnerReview$1(this.gatewayCoreStore,this.gatekeeperClient,this.abortController,this.inputs.gatekeeperPollingIntervalSeconds)),this._partnerReview},enumerable:!1,configurable:!0}),tt.prototype.getRemoteSignInstance=function(){return this.remoteSignInstance||(this.remoteSignInstance=new RemoteSignWindowEventEmitter$1(eventEmitter$1(this.postMessageTargetCallback(this.instanceId)),this.instanceId)),this.remoteSignInstance},tt.prototype.getOwnerDids=function(){return __awaiter$2(this,void 0,void 0,function(){var et;return __generator$1(this,function(rt){switch(rt.label){case 0:return[4,this.chainImplementation.ownerDids()];case 1:return et=rt.sent(),this.gatewayCoreStore.setState(function(nt){nt.internal.ownerDids=et}),[2]}})})},tt.prototype.fetchGatekeeperNetworkData=function(){return __awaiter$2(this,void 0,void 0,function(){var et=this;return __generator$1(this,function(rt){return this.gatewayCoreStore.setState(function(nt){nt.inputs.gatekeeperNetworkData.status=InputStatus$1.IN_PROGRESS}),[2,getGatekeeperNetworkData(this.inputs.stage||"prod",this.inputs.gatekeeperNetwork||"").then(function(nt){et.log.debug("getGatekeeperNetworkData",nt),!et.abortController.signal.aborted&&et.gatewayCoreStore.setState(function(at){at.inputs.gatekeeperNetworkData.status=InputStatus$1.COMPLETE,at.inputs.gatekeeperNetworkData.received=nt})}).catch(function(nt){et.log.error("Error retrieving gatekeeper network data",nt),!et.abortController.signal.aborted&&et.gatewayCoreStore.setState(function(at){at.inputs.gatekeeperNetworkData.status=InputStatus$1.ERROR,at.inputs.gatekeeperNetworkData.error=nt})})]})})},tt.prototype.lookupTokenState=function(){return __awaiter$2(this,void 0,void 0,function(){var et,rt,nt,at=this;return __generator$1(this,function(it){switch(it.label){case 0:return et=function(){return __awaiter$2(at,void 0,void 0,function(){var st=this;return __generator$1(this,function(dt){return this.gatewayCoreStore.setState(function(pt){pt.inputs.gatekeeperRecord.status=InputStatus$1.IN_PROGRESS}),[2,this.gatekeeperClient.getGatekeeperRecordWithPayload().then(function(pt){st.log.debug("getGatekeeperRecordWithPayload record",pt),!st.abortController.signal.aborted&&st.gatewayCoreStore.setState(function(mt){mt.inputs.gatekeeperRecord.status=InputStatus$1.COMPLETE,mt.inputs.gatekeeperRecord.received=pt})}).catch(function(pt){st.log.error("Error retrieving gatekeeper record",pt),!st.abortController.signal.aborted&&st.gatewayCoreStore.setState(function(mt){mt.inputs.gatekeeperRecord.status=InputStatus$1.ERROR,mt.inputs.gatekeeperRecord.error=pt})})]})})},rt=function(){return __awaiter$2(at,void 0,void 0,function(){var st=this;return __generator$1(this,function(dt){return this.gatewayCoreStore.setState(function(pt){pt.inputs.gatewayToken.status=InputStatus$1.IN_PROGRESS}),[2,this.chainImplementation.findGatewayToken().then(function(pt){st.abortController.signal.aborted||st.gatewayCoreStore.setState(function(mt){mt.inputs.gatewayToken.status=InputStatus$1.COMPLETE,pt&&(mt.inputs.gatewayToken.received=pt)})}).catch(function(pt){st.abortController.signal.aborted||(st.log.error("Error retrieving gateway token",pt),st.gatewayCoreStore.setState(function(mt){mt.inputs.gatewayToken.status=InputStatus$1.ERROR,mt.inputs.gatewayToken.error=pt}))})]})})},nt=[rt()],this.inputs.disableInitialGatekeeperLookup||nt.push(et()),[4,Promise.allSettled(nt)];case 1:return it.sent(),[2]}})})},tt.prototype.initialise=function(){return __awaiter$2(this,void 0,void 0,function(){return __generator$1(this,function(et){switch(et.label){case 0:return this.log.debug("Initialising orchestrator"),this.abortController=new AbortController,this.remoteSignInstance=void 0,this.gatewayCoreStore.getState().functions.reset(),[4,Promise.allSettled([this.getOwnerDids(),this.lookupTokenState(),this.fetchGatekeeperNetworkData()])];case 1:return et.sent(),[2]}})})},tt.prototype.reset=function(){this.log.debug("resetting orchestrator"),this.initialise()},tt.prototype.onInternalStatusChange=function(et,rt){var nt,at;if(et===GatewayStatus$1.ERROR){var it=this.gatewayCoreStore.getState();tokenNoGatekeeperRecordError$1(it)&&this.gatewayCoreStore.setState(function(st){st.internal.errors||(st.internal.errors={}),st.internal.errors.expectedTokenGatekeeperRecord=new ChainError$1("Token has no gatekeeper record",ErrorCode$1.EXPECTED_GATEKEEPER_RECORD)});return}if(et===GatewayStatus$1.ACTIVE){rt!==GatewayStatus$1.ACTIVE&&((nt=this._refresh)===null||nt===void 0||nt.onActiveTokenFound(),this._refresh||(at=this._issuance)===null||at===void 0||at.onActiveTokenFound());return}if(et===ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION)return this.issuance.restartDataCollection();if(et===GatewayStatus$1.USER_INFORMATION_VALIDATED)return this.issuance.makeGatekeeperRequest({payer:this.payer});if([ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX].includes(et))return this.issuance.makeGatekeeperRequest({payer:this.payer,isFreshTransactionRequest:!0});if([ExtendedGatewayStatus$1.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND].includes(et))return this.issuance.sendTransaction();if(et===ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN)return this.issuance.expectOnChainToken();if(et===ExtendedGatewayStatus$1.REFRESH_USER_INFORMATION_VALIDATED)return this.refresh.makeGatekeeperRequest({payer:this.payer});if([ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX].includes(et))return this.refresh.makeGatekeeperRequest({payer:this.payer,isFreshTransactionRequest:!0});if(et===ExtendedGatewayStatus$1.REFRESH_AWAITING_TRANSACTION_SEND)return this.refresh.sendTransaction();if(et===ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN)return this.refresh.expectOnChainToken();if(et===ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW)return this.partnerReview.pollForReviewFinished();if([ExtendedGatewayStatus$1.RESTART,ExtendedGatewayStatus$1.RESTART_REFRESH].includes(et))return this.reset()},tt.prototype.orchestrate=function(){var et=this;this.log.debug("running orchestrate()"),this.gatewayCoreStore.subscribe(function(rt){return rt.internal.status},function(rt,nt){return et.onInternalStatusChange(rt,nt)}),this.gatewayCoreStore.subscribe(function(rt){var nt;return(nt=rt.inputs.gatewayToken.received)===null||nt===void 0?void 0:nt.expiryTime},function(rt,nt){rt&&nt&&rt>nt&&et.gatewayCoreStore.setState(function(at){var it;((it=at.inputs.dynamicParameters)===null||it===void 0?void 0:it.forceRequireRefresh)!==void 0&&(at.inputs.dynamicParameters.forceRequireRefresh=!1)})}),this.gatewayCoreStore.subscribe(function(rt){return rt.inputs.civicPass.received},function(rt){return et.gatewayCoreStore.setState(function(nt){var at=getUserInteractionStatusFromAction$1(nt,rt==null?void 0:rt.action);nt.internal.userInteraction.status=at})}),this.listenerManager.registerCivicPassListener(function(rt){et.gatewayCoreStore.setState(function(nt){nt.inputs.civicPass.status=InputStatus$1.COMPLETE,nt.inputs.civicPass.received=rt})}),this.listenerManager.registerCivicSignListener(function(rt){et.gatewayCoreStore.setState(function(at){at.inputs.civicSign.status=InputStatus$1.RECEIVED,at.inputs.civicSign.received=rt});var nt=et.gatewayCoreStore.getState().internal.ownerDids;handleRemoteSignEvent$1(rt,et.getRemoteSignInstance(),{chainImplementation:et.chainImplementation,wallet:et.wallet,ownerDids:nt}).then(function(at){at||et.log.warn("No result from remote sign event"),et.gatewayCoreStore.setState(function(it){it.inputs.civicSign.received=null,it.inputs.civicSign.sent=at,it.inputs.civicSign.error=null,it.inputs.civicSign.status=InputStatus$1.RESPONDED})}).catch(function(at){et.gatewayCoreStore.setState(function(it){it.inputs.civicSign.error=at,it.inputs.civicSign.status=InputStatus$1.ERROR})})}),this.listenerManager.registerOnChainListeners(function(rt){et.gatewayCoreStore.setState(function(nt){nt.inputs.gatewayToken.received=rt})})},tt.prototype.abort=function(){var et,rt,nt;this.log.info("Aborting orchestration"),this.chainImplementation.onDestroy(),(et=this._issuance)===null||et===void 0||et.abort(),(rt=this._refresh)===null||rt===void 0||rt.abort(),(nt=this._partnerReview)===null||nt===void 0||nt.abort(),this.abortController.abort(),this.gatekeeperClient.abort(),this.listenerManager.unregisterAllListeners()},tt}();const createStoreImpl=tt=>{let et;const rt=new Set,nt=(yt,Rt)=>{const Tt=typeof yt=="function"?yt(et):yt;if(!Object.is(Tt,et)){const At=et;et=Rt??(typeof Tt!="object"||Tt===null)?Tt:Object.assign({},et,Tt),rt.forEach(xt=>xt(et,At))}},at=()=>et,pt={setState:nt,getState:at,getInitialState:()=>mt,subscribe:yt=>(rt.add(yt),()=>rt.delete(yt)),destroy:()=>{(define_import_meta_env_default?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),rt.clear()}},mt=et=tt(nt,at,pt);return pt},createStore=tt=>tt?createStoreImpl(tt):createStoreImpl;var NOTHING$1=Symbol.for("immer-nothing"),DRAFTABLE$1=Symbol.for("immer-draftable"),DRAFT_STATE$1=Symbol.for("immer-state");function die$1(tt,...et){throw new Error(`[Immer] minified error nr: ${tt}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf$1=Object.getPrototypeOf;function isDraft$1(tt){return!!tt&&!!tt[DRAFT_STATE$1]}function isDraftable$1(tt){var et;return tt?isPlainObject$1(tt)||Array.isArray(tt)||!!tt[DRAFTABLE$1]||!!((et=tt.constructor)!=null&&et[DRAFTABLE$1])||isMap$1(tt)||isSet$1(tt):!1}var objectCtorString$1=Object.prototype.constructor.toString();function isPlainObject$1(tt){if(!tt||typeof tt!="object")return!1;const et=getPrototypeOf$1(tt);if(et===null)return!0;const rt=Object.hasOwnProperty.call(et,"constructor")&&et.constructor;return rt===Object?!0:typeof rt=="function"&&Function.toString.call(rt)===objectCtorString$1}function each$1(tt,et){getArchtype$1(tt)===0?Reflect.ownKeys(tt).forEach(rt=>{et(rt,tt[rt],tt)}):tt.forEach((rt,nt)=>et(nt,rt,tt))}function getArchtype$1(tt){const et=tt[DRAFT_STATE$1];return et?et.type_:Array.isArray(tt)?1:isMap$1(tt)?2:isSet$1(tt)?3:0}function has$2(tt,et){return getArchtype$1(tt)===2?tt.has(et):Object.prototype.hasOwnProperty.call(tt,et)}function set$2(tt,et,rt){const nt=getArchtype$1(tt);nt===2?tt.set(et,rt):nt===3?tt.add(rt):tt[et]=rt}function is$3(tt,et){return tt===et?tt!==0||1/tt===1/et:tt!==tt&&et!==et}function isMap$1(tt){return tt instanceof Map}function isSet$1(tt){return tt instanceof Set}function latest$1(tt){return tt.copy_||tt.base_}function shallowCopy$1(tt,et){if(isMap$1(tt))return new Map(tt);if(isSet$1(tt))return new Set(tt);if(Array.isArray(tt))return Array.prototype.slice.call(tt);if(!et&&isPlainObject$1(tt))return getPrototypeOf$1(tt)?{...tt}:Object.assign(Object.create(null),tt);const rt=Object.getOwnPropertyDescriptors(tt);delete rt[DRAFT_STATE$1];let nt=Reflect.ownKeys(rt);for(let at=0;at<nt.length;at++){const it=nt[at],st=rt[it];st.writable===!1&&(st.writable=!0,st.configurable=!0),(st.get||st.set)&&(rt[it]={configurable:!0,writable:!0,enumerable:st.enumerable,value:tt[it]})}return Object.create(getPrototypeOf$1(tt),rt)}function freeze$2(tt,et=!1){return isFrozen$1(tt)||isDraft$1(tt)||!isDraftable$1(tt)||(getArchtype$1(tt)>1&&(tt.set=tt.add=tt.clear=tt.delete=dontMutateFrozenCollections$1),Object.freeze(tt),et&&Object.entries(tt).forEach(([rt,nt])=>freeze$2(nt,!0))),tt}function dontMutateFrozenCollections$1(){die$1(2)}function isFrozen$1(tt){return Object.isFrozen(tt)}var plugins$1={};function getPlugin$1(tt){const et=plugins$1[tt];return et||die$1(0,tt),et}var currentScope$1;function getCurrentScope$1(){return currentScope$1}function createScope$1(tt,et){return{drafts_:[],parent_:tt,immer_:et,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope$1(tt,et){et&&(getPlugin$1("Patches"),tt.patches_=[],tt.inversePatches_=[],tt.patchListener_=et)}function revokeScope$1(tt){leaveScope$1(tt),tt.drafts_.forEach(revokeDraft$1),tt.drafts_=null}function leaveScope$1(tt){tt===currentScope$1&&(currentScope$1=tt.parent_)}function enterScope$1(tt){return currentScope$1=createScope$1(currentScope$1,tt)}function revokeDraft$1(tt){const et=tt[DRAFT_STATE$1];et.type_===0||et.type_===1?et.revoke_():et.revoked_=!0}function processResult$1(tt,et){et.unfinalizedDrafts_=et.drafts_.length;const rt=et.drafts_[0];return tt!==void 0&&tt!==rt?(rt[DRAFT_STATE$1].modified_&&(revokeScope$1(et),die$1(4)),isDraftable$1(tt)&&(tt=finalize$1(et,tt),et.parent_||maybeFreeze$1(et,tt)),et.patches_&&getPlugin$1("Patches").generateReplacementPatches_(rt[DRAFT_STATE$1].base_,tt,et.patches_,et.inversePatches_)):tt=finalize$1(et,rt,[]),revokeScope$1(et),et.patches_&&et.patchListener_(et.patches_,et.inversePatches_),tt!==NOTHING$1?tt:void 0}function finalize$1(tt,et,rt){if(isFrozen$1(et))return et;const nt=et[DRAFT_STATE$1];if(!nt)return each$1(et,(at,it)=>finalizeProperty$1(tt,nt,et,at,it,rt)),et;if(nt.scope_!==tt)return et;if(!nt.modified_)return maybeFreeze$1(tt,nt.base_,!0),nt.base_;if(!nt.finalized_){nt.finalized_=!0,nt.scope_.unfinalizedDrafts_--;const at=nt.copy_;let it=at,st=!1;nt.type_===3&&(it=new Set(at),at.clear(),st=!0),each$1(it,(dt,pt)=>finalizeProperty$1(tt,nt,at,dt,pt,rt,st)),maybeFreeze$1(tt,at,!1),rt&&tt.patches_&&getPlugin$1("Patches").generatePatches_(nt,rt,tt.patches_,tt.inversePatches_)}return nt.copy_}function finalizeProperty$1(tt,et,rt,nt,at,it,st){if(isDraft$1(at)){const dt=it&&et&&et.type_!==3&&!has$2(et.assigned_,nt)?it.concat(nt):void 0,pt=finalize$1(tt,at,dt);if(set$2(rt,nt,pt),isDraft$1(pt))tt.canAutoFreeze_=!1;else return}else st&&rt.add(at);if(isDraftable$1(at)&&!isFrozen$1(at)){if(!tt.immer_.autoFreeze_&&tt.unfinalizedDrafts_<1)return;finalize$1(tt,at),(!et||!et.scope_.parent_)&&typeof nt!="symbol"&&Object.prototype.propertyIsEnumerable.call(rt,nt)&&maybeFreeze$1(tt,at)}}function maybeFreeze$1(tt,et,rt=!1){!tt.parent_&&tt.immer_.autoFreeze_&&tt.canAutoFreeze_&&freeze$2(et,rt)}function createProxyProxy$1(tt,et){const rt=Array.isArray(tt),nt={type_:rt?1:0,scope_:et?et.scope_:getCurrentScope$1(),modified_:!1,finalized_:!1,assigned_:{},parent_:et,base_:tt,draft_:null,copy_:null,revoke_:null,isManual_:!1};let at=nt,it=objectTraps$1;rt&&(at=[nt],it=arrayTraps$1);const{revoke:st,proxy:dt}=Proxy.revocable(at,it);return nt.draft_=dt,nt.revoke_=st,dt}var objectTraps$1={get(tt,et){if(et===DRAFT_STATE$1)return tt;const rt=latest$1(tt);if(!has$2(rt,et))return readPropFromProto$1(tt,rt,et);const nt=rt[et];return tt.finalized_||!isDraftable$1(nt)?nt:nt===peek$1(tt.base_,et)?(prepareCopy$1(tt),tt.copy_[et]=createProxy$1(nt,tt)):nt},has(tt,et){return et in latest$1(tt)},ownKeys(tt){return Reflect.ownKeys(latest$1(tt))},set(tt,et,rt){const nt=getDescriptorFromProto$1(latest$1(tt),et);if(nt!=null&&nt.set)return nt.set.call(tt.draft_,rt),!0;if(!tt.modified_){const at=peek$1(latest$1(tt),et),it=at==null?void 0:at[DRAFT_STATE$1];if(it&&it.base_===rt)return tt.copy_[et]=rt,tt.assigned_[et]=!1,!0;if(is$3(rt,at)&&(rt!==void 0||has$2(tt.base_,et)))return!0;prepareCopy$1(tt),markChanged$1(tt)}return tt.copy_[et]===rt&&(rt!==void 0||et in tt.copy_)||Number.isNaN(rt)&&Number.isNaN(tt.copy_[et])||(tt.copy_[et]=rt,tt.assigned_[et]=!0),!0},deleteProperty(tt,et){return peek$1(tt.base_,et)!==void 0||et in tt.base_?(tt.assigned_[et]=!1,prepareCopy$1(tt),markChanged$1(tt)):delete tt.assigned_[et],tt.copy_&&delete tt.copy_[et],!0},getOwnPropertyDescriptor(tt,et){const rt=latest$1(tt),nt=Reflect.getOwnPropertyDescriptor(rt,et);return nt&&{writable:!0,configurable:tt.type_!==1||et!=="length",enumerable:nt.enumerable,value:rt[et]}},defineProperty(){die$1(11)},getPrototypeOf(tt){return getPrototypeOf$1(tt.base_)},setPrototypeOf(){die$1(12)}},arrayTraps$1={};each$1(objectTraps$1,(tt,et)=>{arrayTraps$1[tt]=function(){return arguments[0]=arguments[0][0],et.apply(this,arguments)}});arrayTraps$1.deleteProperty=function(tt,et){return arrayTraps$1.set.call(this,tt,et,void 0)};arrayTraps$1.set=function(tt,et,rt){return objectTraps$1.set.call(this,tt[0],et,rt,tt[0])};function peek$1(tt,et){const rt=tt[DRAFT_STATE$1];return(rt?latest$1(rt):tt)[et]}function readPropFromProto$1(tt,et,rt){var at;const nt=getDescriptorFromProto$1(et,rt);return nt?"value"in nt?nt.value:(at=nt.get)==null?void 0:at.call(tt.draft_):void 0}function getDescriptorFromProto$1(tt,et){if(!(et in tt))return;let rt=getPrototypeOf$1(tt);for(;rt;){const nt=Object.getOwnPropertyDescriptor(rt,et);if(nt)return nt;rt=getPrototypeOf$1(rt)}}function markChanged$1(tt){tt.modified_||(tt.modified_=!0,tt.parent_&&markChanged$1(tt.parent_))}function prepareCopy$1(tt){tt.copy_||(tt.copy_=shallowCopy$1(tt.base_,tt.scope_.immer_.useStrictShallowCopy_))}var Immer2$1=class{constructor(et){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(rt,nt,at)=>{if(typeof rt=="function"&&typeof nt!="function"){const st=nt;nt=rt;const dt=this;return function(mt=st,...yt){return dt.produce(mt,Rt=>nt.call(this,Rt,...yt))}}typeof nt!="function"&&die$1(6),at!==void 0&&typeof at!="function"&&die$1(7);let it;if(isDraftable$1(rt)){const st=enterScope$1(this),dt=createProxy$1(rt,void 0);let pt=!0;try{it=nt(dt),pt=!1}finally{pt?revokeScope$1(st):leaveScope$1(st)}return usePatchesInScope$1(st,at),processResult$1(it,st)}else if(!rt||typeof rt!="object"){if(it=nt(rt),it===void 0&&(it=rt),it===NOTHING$1&&(it=void 0),this.autoFreeze_&&freeze$2(it,!0),at){const st=[],dt=[];getPlugin$1("Patches").generateReplacementPatches_(rt,it,st,dt),at(st,dt)}return it}else die$1(1,rt)},this.produceWithPatches=(rt,nt)=>{if(typeof rt=="function")return(dt,...pt)=>this.produceWithPatches(dt,mt=>rt(mt,...pt));let at,it;return[this.produce(rt,nt,(dt,pt)=>{at=dt,it=pt}),at,it]},typeof(et==null?void 0:et.autoFreeze)=="boolean"&&this.setAutoFreeze(et.autoFreeze),typeof(et==null?void 0:et.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(et.useStrictShallowCopy)}createDraft(et){isDraftable$1(et)||die$1(8),isDraft$1(et)&&(et=current$1(et));const rt=enterScope$1(this),nt=createProxy$1(et,void 0);return nt[DRAFT_STATE$1].isManual_=!0,leaveScope$1(rt),nt}finishDraft(et,rt){const nt=et&&et[DRAFT_STATE$1];(!nt||!nt.isManual_)&&die$1(9);const{scope_:at}=nt;return usePatchesInScope$1(at,rt),processResult$1(void 0,at)}setAutoFreeze(et){this.autoFreeze_=et}setUseStrictShallowCopy(et){this.useStrictShallowCopy_=et}applyPatches(et,rt){let nt;for(nt=rt.length-1;nt>=0;nt--){const it=rt[nt];if(it.path.length===0&&it.op==="replace"){et=it.value;break}}nt>-1&&(rt=rt.slice(nt+1));const at=getPlugin$1("Patches").applyPatches_;return isDraft$1(et)?at(et,rt):this.produce(et,it=>at(it,rt))}};function createProxy$1(tt,et){const rt=isMap$1(tt)?getPlugin$1("MapSet").proxyMap_(tt,et):isSet$1(tt)?getPlugin$1("MapSet").proxySet_(tt,et):createProxyProxy$1(tt,et);return(et?et.scope_:getCurrentScope$1()).drafts_.push(rt),rt}function current$1(tt){return isDraft$1(tt)||die$1(10,tt),currentImpl$1(tt)}function currentImpl$1(tt){if(!isDraftable$1(tt)||isFrozen$1(tt))return tt;const et=tt[DRAFT_STATE$1];let rt;if(et){if(!et.modified_)return et.base_;et.finalized_=!0,rt=shallowCopy$1(tt,et.scope_.immer_.useStrictShallowCopy_)}else rt=shallowCopy$1(tt,!0);return each$1(rt,(nt,at)=>{set$2(rt,nt,currentImpl$1(at))}),et&&(et.finalized_=!1),rt}var immer$1$1=new Immer2$1,produce=immer$1$1.produce;immer$1$1.produceWithPatches.bind(immer$1$1);immer$1$1.setAutoFreeze.bind(immer$1$1);immer$1$1.setUseStrictShallowCopy.bind(immer$1$1);immer$1$1.applyPatches.bind(immer$1$1);immer$1$1.createDraft.bind(immer$1$1);immer$1$1.finishDraft.bind(immer$1$1);const immerImpl=tt=>(et,rt,nt)=>(nt.setState=(at,it,...st)=>{const dt=typeof at=="function"?produce(at):at;return et(dt,it,...st)},tt(nt.setState,rt,nt)),immer=immerImpl,trackedConnections=new Map,getTrackedConnectionState=tt=>{const et=trackedConnections.get(tt);return et?Object.fromEntries(Object.entries(et.stores).map(([rt,nt])=>[rt,nt.getState()])):{}},extractConnectionInformation=(tt,et,rt)=>{if(tt===void 0)return{type:"untracked",connection:et.connect(rt)};const nt=trackedConnections.get(rt.name);if(nt)return{type:"tracked",store:tt,...nt};const at={connection:et.connect(rt),stores:{}};return trackedConnections.set(rt.name,at),{type:"tracked",store:tt,...at}},devtoolsImpl=(tt,et={})=>(rt,nt,at)=>{const{enabled:it,anonymousActionType:st,store:dt,...pt}=et;let mt;try{mt=(it??(define_import_meta_env_default?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!mt)return(define_import_meta_env_default?"production":void 0)!=="production"&&it&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),tt(rt,nt,at);const{connection:yt,...Rt}=extractConnectionInformation(dt,mt,pt);let Tt=!0;at.setState=(Nt,Ct,Ot)=>{const kt=rt(Nt,Ct);if(!Tt)return kt;const Pt=Ot===void 0?{type:st||"anonymous"}:typeof Ot=="string"?{type:Ot}:Ot;return dt===void 0?(yt==null||yt.send(Pt,nt()),kt):(yt==null||yt.send({...Pt,type:`${dt}/${Pt.type}`},{...getTrackedConnectionState(pt.name),[dt]:at.getState()}),kt)};const At=(...Nt)=>{const Ct=Tt;Tt=!1,rt(...Nt),Tt=Ct},xt=tt(at.setState,nt,at);if(Rt.type==="untracked"?yt==null||yt.init(xt):(Rt.stores[Rt.store]=at,yt==null||yt.init(Object.fromEntries(Object.entries(Rt.stores).map(([Nt,Ct])=>[Nt,Nt===Rt.store?xt:Ct.getState()])))),at.dispatchFromDevtools&&typeof at.dispatch=="function"){let Nt=!1;const Ct=at.dispatch;at.dispatch=(...Ot)=>{(define_import_meta_env_default?"production":void 0)!=="production"&&Ot[0].type==="__setState"&&!Nt&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),Nt=!0),Ct(...Ot)}}return yt.subscribe(Nt=>{var Ct;switch(Nt.type){case"ACTION":if(typeof Nt.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return parseJsonThen(Nt.payload,Ot=>{if(Ot.type==="__setState"){if(dt===void 0){At(Ot.state);return}Object.keys(Ot.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const kt=Ot.state[dt];if(kt==null)return;JSON.stringify(at.getState())!==JSON.stringify(kt)&&At(kt);return}at.dispatchFromDevtools&&typeof at.dispatch=="function"&&at.dispatch(Ot)});case"DISPATCH":switch(Nt.payload.type){case"RESET":return At(xt),dt===void 0?yt==null?void 0:yt.init(at.getState()):yt==null?void 0:yt.init(getTrackedConnectionState(pt.name));case"COMMIT":if(dt===void 0){yt==null||yt.init(at.getState());return}return yt==null?void 0:yt.init(getTrackedConnectionState(pt.name));case"ROLLBACK":return parseJsonThen(Nt.state,Ot=>{if(dt===void 0){At(Ot),yt==null||yt.init(at.getState());return}At(Ot[dt]),yt==null||yt.init(getTrackedConnectionState(pt.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return parseJsonThen(Nt.state,Ot=>{if(dt===void 0){At(Ot);return}JSON.stringify(at.getState())!==JSON.stringify(Ot[dt])&&At(Ot[dt])});case"IMPORT_STATE":{const{nextLiftedState:Ot}=Nt.payload,kt=(Ct=Ot.computedStates.slice(-1)[0])==null?void 0:Ct.state;if(!kt)return;At(dt===void 0?kt:kt[dt]),yt==null||yt.send(null,Ot);return}case"PAUSE_RECORDING":return Tt=!Tt}return}}),xt},devtools=devtoolsImpl,parseJsonThen=(tt,et)=>{let rt;try{rt=JSON.parse(tt)}catch(nt){console.error("[zustand devtools middleware] Could not parse the received json",nt)}rt!==void 0&&et(rt)},subscribeWithSelectorImpl=tt=>(et,rt,nt)=>{const at=nt.subscribe;return nt.subscribe=(st,dt,pt)=>{let mt=st;if(dt){const yt=(pt==null?void 0:pt.equalityFn)||Object.is;let Rt=st(nt.getState());mt=Tt=>{const At=st(Tt);if(!yt(Rt,At)){const xt=Rt;dt(Rt=At,xt)}},pt!=null&&pt.fireImmediately&&dt(Rt,Rt)}return at(mt)},tt(et,rt,nt)},subscribeWithSelector=subscribeWithSelectorImpl;function _extends(){return _extends=Object.assign?Object.assign.bind():function(tt){for(var et=1;et<arguments.length;et++){var rt=arguments[et];for(var nt in rt)Object.prototype.hasOwnProperty.call(rt,nt)&&(tt[nt]=rt[nt])}return tt},_extends.apply(this,arguments)}var prefix="$$_computed_";function injectComputedMiddleware(tt){return function(et,rt,nt){var at,it=function(mt,yt){et(function(Rt){var Tt,At=typeof mt=="object"?mt:mt(Rt),xt=(Tt=Rt[prefix])==null?void 0:Tt.call(Rt,At);return _extends({},Rt,At,xt)},yt)};nt.setState=it;var st=tt(it,rt,nt),dt=(at=st[prefix])==null?void 0:at.call(st,st);return Object.assign({},st,dt)}}function compute(tt,et){var rt;return rt={},rt[prefix]=et,rt}var computed=function tt(et){return injectComputedMiddleware(et)},_a$1$1,gatewayStatusToCivicPassAction=(_a$1$1={},_a$1$1[GatewayStatus$1.IN_REVIEW]=CivicPassMessageAction$1.TOKEN_IN_REVIEW,_a$1$1[GatewayStatus$1.ERROR]=CivicPassMessageAction$1.ERROR,_a$1$1[GatewayStatus$1.ACTIVE]=CivicPassMessageAction$1.TOKEN_ACTIVE,_a$1$1[GatewayStatus$1.REVOKED]=CivicPassMessageAction$1.TOKEN_REVOKED,_a$1$1[GatewayStatus$1.FROZEN]=CivicPassMessageAction$1.TOKEN_FROZEN,_a$1$1[GatewayStatus$1.REJECTED]=CivicPassMessageAction$1.TOKEN_REJECTED,_a$1$1[GatewayStatus$1.LOCATION_NOT_SUPPORTED]=CivicPassMessageAction$1.FAILED_IP_CHECK,_a$1$1[GatewayStatus$1.VPN_NOT_SUPPORTED]=CivicPassMessageAction$1.FAILED_VPN_CHECK,_a$1$1[GatewayStatus$1.REFRESH_TOKEN_REQUIRED]=CivicPassMessageAction$1.REFRESH,_a$1$1[GatewayStatus$1.CHECKING]=CivicPassMessageAction$1.STATUS,_a$1$1[GatewayStatus$1.UNKNOWN]=CivicPassMessageAction$1.ISSUANCE,_a$1$1[GatewayStatus$1.NOT_REQUESTED]=CivicPassMessageAction$1.ISSUANCE,_a$1$1[GatewayStatus$1.COLLECTING_USER_INFORMATION]=CivicPassMessageAction$1.ISSUANCE,_a$1$1[GatewayStatus$1.VALIDATING_USER_INFORMATION]=CivicPassMessageAction$1.ISSUANCE,_a$1$1[GatewayStatus$1.USER_INFORMATION_VALIDATED]=CivicPassMessageAction$1.ISSUANCE,_a$1$1[GatewayStatus$1.USER_INFORMATION_REJECTED]=CivicPassMessageAction$1.ISSUANCE,_a$1$1[ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION]=CivicPassMessageAction$1.ISSUANCE,_a$1$1[ExtendedGatewayStatus$1.ISSUANCE_AWAITING_TRANSACTION_SEND]=CivicPassMessageAction$1.SIGN_TRANSACTION,_a$1$1[ExtendedGatewayStatus$1.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND]=CivicPassMessageAction$1.TOKEN_IN_REVIEW,_a$1$1[ExtendedGatewayStatus$1.ISSUANCE_CLIENT_PAYER_REQUESTED]=CivicPassMessageAction$1.SIGN_TRANSACTION,_a$1$1[ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN]=CivicPassMessageAction$1.AWAITING_TRANSACTION_CONFIRMATION,_a$1$1[ExtendedGatewayStatus$1.CONFIRM_OWNER_TRANSACTION]=CivicPassMessageAction$1.SIGN_TRANSACTION,_a$1$1[ExtendedGatewayStatus$1.AWAITING_OWNER_TRANSACTION]=CivicPassMessageAction$1.AWAITING_TRANSACTION_CONFIRMATION,_a$1$1[ExtendedGatewayStatus$1.CHAIN_TIMEOUT_ERROR]=CivicPassMessageAction$1.CHAIN_ERROR,_a$1$1[ExtendedGatewayStatus$1.CHAIN_TRANSACTION_ERROR]=CivicPassMessageAction$1.CHAIN_ERROR,_a$1$1[ExtendedGatewayStatus$1.CHAIN_SIGN_MESSAGE_ERROR]=CivicPassMessageAction$1.CHAIN_ERROR,_a$1$1[ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW]=CivicPassMessageAction$1.TOKEN_IN_PARTNER_REVIEW,_a$1$1[ExtendedGatewayStatus$1.TOKEN_REFRESH_IN_REVIEW]=CivicPassMessageAction$1.TOKEN_REFRESH_IN_REVIEW,_a$1$1[ExtendedGatewayStatus$1.REFRESH_AWAITING_TRANSACTION_SEND]=CivicPassMessageAction$1.SIGN_TRANSACTION,_a$1$1[ExtendedGatewayStatus$1.REFRESH_CLIENT_PAYER_REQUESTED]=CivicPassMessageAction$1.SIGN_TRANSACTION,_a$1$1[ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN]=CivicPassMessageAction$1.AWAITING_TRANSACTION_CONFIRMATION,_a$1$1[ExtendedGatewayStatus$1.REFRESH_USER_INFORMATION_VALIDATED]=CivicPassMessageAction$1.REFRESH,_a$1$1[ExtendedGatewayStatus$1.RESTART]=CivicPassMessageAction$1.ISSUANCE,_a$1$1[ExtendedGatewayStatus$1.REFRESH_IN_REVIEW]=CivicPassMessageAction$1.REFRESH,_a$1$1[ExtendedGatewayStatus$1.RESTART_REFRESH]=CivicPassMessageAction$1.REFRESH,_a$1$1[ExtendedGatewayStatus$1.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND]=CivicPassMessageAction$1.TOKEN_REFRESH_IN_REVIEW,_a$1$1[ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_START_NEW_TX]=CivicPassMessageAction$1.START_PRE_APPROVED_TRANSACTION,_a$1$1[ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_START_NEW_TX]=CivicPassMessageAction$1.START_PRE_APPROVED_TRANSACTION,_a$1$1[ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX]=CivicPassMessageAction$1.SIGN_TRANSACTION,_a$1$1[ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX]=CivicPassMessageAction$1.SIGN_TRANSACTION,_a$1$1[ExtendedGatewayStatus$1.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX]=CivicPassMessageAction$1.TOKEN_IN_REVIEW,_a$1$1[ExtendedGatewayStatus$1.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX]=CivicPassMessageAction$1.TOKEN_REFRESH_IN_REVIEW,_a$1$1),internalToOutputGatewayStatus=function(tt){switch(tt){case ExtendedGatewayStatus$1.AWAITING_OWNER_TRANSACTION:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.CONFIRM_OWNER_TRANSACTION:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.CHAIN_TIMEOUT_ERROR:return GatewayStatus$1.ERROR;case ExtendedGatewayStatus$1.CHAIN_TRANSACTION_ERROR:return GatewayStatus$1.ERROR;case ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.TOKEN_REFRESH_IN_REVIEW:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.RESTART:return GatewayStatus$1.NOT_REQUESTED;case ExtendedGatewayStatus$1.RESTART_REFRESH:return GatewayStatus$1.REFRESH_TOKEN_REQUIRED;case ExtendedGatewayStatus$1.CHAIN_SIGN_MESSAGE_ERROR:return GatewayStatus$1.ERROR;case ExtendedGatewayStatus$1.ISSUANCE_AWAITING_TRANSACTION_SEND:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION:return GatewayStatus$1.NOT_REQUESTED;case ExtendedGatewayStatus$1.ISSUANCE_CLIENT_PAYER_REQUESTED:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.REFRESH_USER_INFORMATION_VALIDATED:return GatewayStatus$1.USER_INFORMATION_VALIDATED;case ExtendedGatewayStatus$1.REFRESH_CLIENT_PAYER_REQUESTED:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.REFRESH_IN_REVIEW:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.REFRESH_AWAITING_TRANSACTION_SEND:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_START_NEW_TX:return GatewayStatus$1.USER_INFORMATION_VALIDATED;case ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_START_NEW_TX:return GatewayStatus$1.USER_INFORMATION_VALIDATED;case ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX:return GatewayStatus$1.IN_REVIEW;case ExtendedGatewayStatus$1.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX:return GatewayStatus$1.IN_REVIEW;default:return tt}},DEFAULT_FLOW_ID_PREFIX="GWC",flowTypeFromState=function(tt,et){var rt,nt,at,it,st,dt,pt,mt,yt;if(!((rt=tt.inputs.gatewayToken)===null||rt===void 0)&&rt.received){var Rt=isTokenRefreshRequired$1({gatewayToken:(nt=tt.inputs.gatewayToken)===null||nt===void 0?void 0:nt.received,tokenExpirationMarginSeconds:0,forceRequireRefresh:(it=(at=tt.inputs)===null||at===void 0?void 0:at.dynamicParameters)===null||it===void 0?void 0:it.forceRequireRefresh});return Rt||!((st=tt.internal.status)===null||st===void 0)&&st.toLowerCase().includes("refresh")||et.toLowerCase().includes("refresh")||!((pt=(dt=tt.output)===null||dt===void 0?void 0:dt.flowParameters)===null||pt===void 0)&&pt.flowId.toLowerCase().includes(FlowType$1.REFRESH.toLowerCase())?FlowType$1.REFRESH:!((yt=(mt=tt.output)===null||mt===void 0?void 0:mt.flowParameters)===null||yt===void 0)&&yt.flowId.toLowerCase().includes(FlowType$1.ISSUANCE.toLowerCase())?FlowType$1.ISSUANCE:FlowType$1.STATUS}return[GatewayStatus$1.CHECKING,GatewayStatus$1.UNKNOWN].includes(et)?FlowType$1.STATUS:FlowType$1.ISSUANCE},getFlowId=function(tt,et){var rt,nt,at,it=(nt=(rt=tt.output)===null||rt===void 0?void 0:rt.flowParameters)===null||nt===void 0?void 0:nt.flowId,st=flowTypeFromState(tt,et),dt="".concat(st,"_");return!it||it===""||!it.includes(dt)?"".concat(((at=tt.inputs.parameters)===null||at===void 0?void 0:at.flowIdPrefix)||DEFAULT_FLOW_ID_PREFIX,"_").concat(dt).concat(v4()):it},initialFlowResultStatuses=[GatewayStatus$1.REFRESH_TOKEN_REQUIRED,GatewayStatus$1.FROZEN,GatewayStatus$1.REVOKED,GatewayStatus$1.ERROR],flowResultsStatuses=[GatewayStatus$1.ACTIVE,GatewayStatus$1.REFRESH_TOKEN_REQUIRED,GatewayStatus$1.FROZEN,GatewayStatus$1.REVOKED,GatewayStatus$1.ERROR],flowStatusFromState=function(tt,et){var rt,nt,at,it,st,dt,pt,mt,yt,Rt,Tt,At,xt,Nt,Ct;if(!((rt=tt.internal)===null||rt===void 0)&&rt.userInteraction){var Ot=tt.internal.status;return Ot===GatewayStatus$1.CHECKING&&initialFlowResultStatuses.includes(et)||Ot!==GatewayStatus$1.CHECKING&&flowResultsStatuses.includes(et)&&!flowResultsStatuses.includes(Ot)||Ot===GatewayStatus$1.ACTIVE&&(!((at=(nt=tt.inputs)===null||nt===void 0?void 0:nt.dynamicParameters)===null||at===void 0)&&at.forceRequireRefresh)?((dt=(st=(it=tt.inputs.gatekeeperNetworkData)===null||it===void 0?void 0:it.received)===null||st===void 0?void 0:st.client)===null||dt===void 0?void 0:dt.tokenActiveDisplay)==="hidden"?FlowStatus$1.FINISHED:FlowStatus$1.RESULT:((pt=tt.internal)===null||pt===void 0?void 0:pt.userInteraction.status)===UserInteractionStatus$1.FINISHED||Ot===GatewayStatus$1.ACTIVE&&((Rt=(yt=(mt=tt.inputs.gatekeeperNetworkData)===null||mt===void 0?void 0:mt.received)===null||yt===void 0?void 0:yt.client)===null||Rt===void 0?void 0:Rt.tokenActiveDisplay)==="hidden"&&((At=(Tt=tt.internal)===null||Tt===void 0?void 0:Tt.userInteraction)===null||At===void 0?void 0:At.status)===null?FlowStatus$1.FINISHED:((xt=tt.internal)===null||xt===void 0?void 0:xt.userInteraction.status)===UserInteractionStatus$1.STARTED?FlowStatus$1.IN_PROGRESS:(Ct=(Nt=tt.output)===null||Nt===void 0?void 0:Nt.flowState)===null||Ct===void 0?void 0:Ct.status}},handleChainError$1=function(tt){var et,rt,nt,at,it,st,dt,pt;if(((et=tt.inputs.civicPass.received)===null||et===void 0?void 0:et.event)===CivicPassMessageEventResult$1.FAILURE&&((rt=tt.inputs.civicPass.received)===null||rt===void 0?void 0:rt.action)===CivicPassMessageAction$1.CHAIN_ERROR){var mt=!!(!((nt=tt.inputs.gatewayToken)===null||nt===void 0)&&nt.received);return((at=tt.inputs.civicSign)===null||at===void 0?void 0:at.status)===InputStatus$1.ERROR?mt?ExtendedGatewayStatus$1.RESTART_REFRESH:ExtendedGatewayStatus$1.RESTART:!((it=tt.internal.chainTransaction)===null||it===void 0)&&it.error&&(tt.internal.chainTransaction.attempts||0)<=(((dt=(st=tt.inputs.parameters)===null||st===void 0?void 0:st.options)===null||dt===void 0?void 0:dt.clientSendsMaxRetries)||DEFAULT_MAX_CLIENT_SENDS_RETRIES$1)?mt?payerIsWalletOwner$1(tt)?ExtendedGatewayStatus$1.REFRESH_AWAITING_TRANSACTION_SEND:ExtendedGatewayStatus$1.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND:payerIsWalletOwner$1(tt)?ExtendedGatewayStatus$1.ISSUANCE_AWAITING_TRANSACTION_SEND:ExtendedGatewayStatus$1.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND:mt?payerIsWalletOwner$1(tt)?ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX:ExtendedGatewayStatus$1.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX:payerIsWalletOwner$1(tt)?ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX:ExtendedGatewayStatus$1.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX}return(pt=tt.internal)===null||pt===void 0?void 0:pt.status},handleGatekeeperError$1=function(tt){var et,rt,nt,at=!!tt.inputs.gatewayToken.received;return((et=tt.inputs.civicPass.received)===null||et===void 0?void 0:et.event)===CivicPassMessageEventResult$1.FAILURE&&((rt=tt.inputs.civicPass.received)===null||rt===void 0?void 0:rt.action)===CivicPassMessageAction$1.ERROR?at?ExtendedGatewayStatus$1.RESTART_REFRESH:ExtendedGatewayStatus$1.RESTART:(nt=tt.internal)===null||nt===void 0?void 0:nt.status},getPendingRequestFromGatekeeperRecord$1=function(tt){var et,rt,nt;return((rt=(et=tt==null?void 0:tt.received)===null||et===void 0?void 0:et.payload)===null||rt===void 0?void 0:rt.pending)||((nt=tt==null?void 0:tt.received)===null||nt===void 0?void 0:nt.pending)},calculateIssuanceStartPreApprovedTransaction=function(tt){var et,rt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received;if((rt==null?void 0:rt.action)===CivicPassMessageAction$1.START_PRE_APPROVED_TRANSACTION&&(rt==null?void 0:rt.event)===CivicPassMessageEventResult$1.SUCCESS&&(rt==null?void 0:rt.payload)!==void 0)return payerIsWalletOwner$1(tt)?ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX:ExtendedGatewayStatus$1.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX},hasExistingDataCollectionProcessInProgress=function(tt){var et;return(tt==null?void 0:tt.action)===CivicPassMessageAction$1.STATUS&&(tt==null?void 0:tt.event)===CivicPassMessageEventResult$1.SUCCESS&&((et=tt.payload)===null||et===void 0?void 0:et.status)!==ValidationStatus$1.NOT_FOUND||(tt==null?void 0:tt.action)===CivicPassMessageAction$1.ISSUANCE&&(tt==null?void 0:tt.event)===CivicPassMessageEventResult$1.IN_PROGRESS},isInPartnerReview$1=function(tt){return!!getPendingRequestFromGatekeeperRecord$1(tt)},preApprovedTxAvailable=function(tt){var et,rt;return!!(!((rt=(et=tt==null?void 0:tt.received)===null||et===void 0?void 0:et.payload)===null||rt===void 0)&&rt.preApprovedTxAvailable)},calculateFromIssuanceAwaitingOnChain$1=function(tt){var et,rt;if(((rt=(et=tt.internal.errors)===null||et===void 0?void 0:et.expectedOnChainToken)===null||rt===void 0?void 0:rt.errorCode)===ErrorCode$1.CHAIN_CONFIRMATION_TIMEOUT_ERROR)return ExtendedGatewayStatus$1.CHAIN_TIMEOUT_ERROR},calculateFromIssuanceInReview$1=function(tt){var et,rt,nt,at,it,st,dt,pt,mt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received,yt=tt.inputs.gatekeeperRecord;return(yt==null?void 0:yt.status)===InputStatus$1.IN_PROGRESS?tt.internal.status:isInPartnerReview$1(yt)?ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW:!((rt=tt.inputs.parameters)===null||rt===void 0)&&rt.payer?(yt==null?void 0:yt.status)===InputStatus$1.COMPLETE&&(mt==null?void 0:mt.action)!==CivicPassMessageAction$1.ISSUANCE&&!(!((nt=yt.received)===null||nt===void 0)&&nt.transaction)?ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION:!((it=(at=tt.internal)===null||at===void 0?void 0:at.chainTransaction)===null||it===void 0)&&it.sentTxId?ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN:!((dt=(st=tt.internal)===null||st===void 0?void 0:st.chainTransaction)===null||dt===void 0)&&dt.error?ExtendedGatewayStatus$1.CHAIN_TRANSACTION_ERROR:!((pt=yt.received)===null||pt===void 0)&&pt.transaction?payerIsWalletOwner$1(tt)?ExtendedGatewayStatus$1.ISSUANCE_AWAITING_TRANSACTION_SEND:ExtendedGatewayStatus$1.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND:void 0:ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN},calculateFromGatekeeperIssuanceRequested$1=function(tt){var et,rt,nt,at=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received,it=tt.inputs.gatekeeperRecord;if(at&&(((rt=it==null?void 0:it.received)===null||rt===void 0?void 0:rt.state)===GatekeeperAPIStatus$1.REQUESTED||(it==null?void 0:it.status)===InputStatus$1.IN_PROGRESS))return!((nt=tt.inputs.parameters)===null||nt===void 0)&&nt.payer&&payerIsWalletOwner$1(tt)?ExtendedGatewayStatus$1.ISSUANCE_CLIENT_PAYER_REQUESTED:GatewayStatus$1.IN_REVIEW},calculateIssuanceRequestedDataCollectionRestart$1=function(tt){var et,rt,nt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received;if((nt==null?void 0:nt.event)===CivicPassMessageEventResult$1.FAILURE)return ExtendedGatewayStatus$1.RESTART;var at=validationProcessToGatewayStatus$1[(rt=nt==null?void 0:nt.payload)===null||rt===void 0?void 0:rt.status];if((nt==null?void 0:nt.action)===CivicPassMessageAction$1.STATUS&&(nt==null?void 0:nt.event)===CivicPassMessageEventResult$1.SUCCESS&&at)return at===GatewayStatus$1.USER_INFORMATION_VALIDATED?nt.payload?GatewayStatus$1.USER_INFORMATION_VALIDATED:GatewayStatus$1.NOT_REQUESTED:at;if((nt==null?void 0:nt.action)===CivicPassMessageAction$1.ISSUANCE&&(nt==null?void 0:nt.event)===CivicPassMessageEventResult$1.SUCCESS)return GatewayStatus$1.USER_INFORMATION_VALIDATED;if(hasExistingDataCollectionProcessInProgress(nt))return at||GatewayStatus$1.COLLECTING_USER_INFORMATION},computeIssuanceDataCollectionRestart$1=function(tt){var et;return statusFromGatewayTokenIfExists$1(tt)||calculateIssuanceRequestedDataCollectionRestart$1(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeIssuanceRequested$1=function(tt){var et;return statusFromGatewayTokenIfExists$1(tt)||calculateFromGatekeeperIssuanceRequested$1(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeIssuanceAwaitingOnChainToken$1=function(tt){var et;return statusFromGatewayTokenIfExists$1(tt)||calculateFromIssuanceAwaitingOnChain$1(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeIssuanceInReview$1=function(tt){var et;return statusFromGatewayTokenIfExists$1(tt)||statusIfGatekeeperRecordRejected$1(tt)||calculateFromIssuanceInReview$1(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},calculateIssuanceStatus$1=function(tt){var et,rt,nt,at,it,st,dt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received,pt=tt.inputs.gatekeeperRecord;if((dt==null?void 0:dt.event)===CivicPassMessageEventResult$1.FAILURE)return ExtendedGatewayStatus$1.RESTART;if((dt==null?void 0:dt.action)===CivicPassMessageAction$1.ISSUANCE&&(dt==null?void 0:dt.event)===CivicPassMessageEventResult$1.SUCCESS)return GatewayStatus$1.USER_INFORMATION_VALIDATED;if(!(pt!=null&&pt.received)||((rt=pt==null?void 0:pt.received)===null||rt===void 0?void 0:rt.state)===GatekeeperAPIStatus$1.NOT_REQUESTED){if(hasExistingDataCollectionProcessInProgress(dt)){var mt=validationProcessToGatewayStatus$1[(nt=dt==null?void 0:dt.payload)===null||nt===void 0?void 0:nt.status];return mt===GatewayStatus$1.USER_INFORMATION_VALIDATED?GatewayStatus$1.NOT_REQUESTED:mt||GatewayStatus$1.COLLECTING_USER_INFORMATION}return GatewayStatus$1.NOT_REQUESTED}if(((at=pt==null?void 0:pt.received)===null||at===void 0?void 0:at.state)===GatekeeperAPIStatus$1.REQUESTED){if(preApprovedTxAvailable(pt))return payerIsWalletOwner$1(tt)?ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_START_NEW_TX:ExtendedGatewayStatus$1.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX;if(isInPartnerReview$1(pt))return ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW;if(!((it=tt.inputs.parameters)===null||it===void 0)&&it.payer){if((pt==null?void 0:pt.status)===InputStatus$1.COMPLETE&&(dt==null?void 0:dt.action)!==CivicPassMessageAction$1.ISSUANCE&&!(!((st=pt.received)===null||st===void 0)&&st.transaction))return ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION}else return ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN}},computeIssuanceStatus$1=function(tt){var et;return statusFromGatewayTokenIfExists$1(tt)||calculateIssuanceStatus$1(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeIssuanceStartPreApprovedTransaction=function(tt){var et;return statusFromGatewayTokenIfExists$1(tt)||calculateIssuanceStartPreApprovedTransaction(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},civicPassStatusLookupInProgress=function(tt){var et,rt,nt;return((et=tt.inputs.civicPass.received)===null||et===void 0?void 0:et.action)===CivicPassMessageAction$1.STATUS&&(!tt.inputs.gatewayToken.status||tt.inputs.gatewayToken.status===InputStatus$1.IN_PROGRESS||!(!((rt=tt.inputs.parameters)===null||rt===void 0)&&rt.disableInitialGatekeeperLookup)&&(!tt.inputs.gatekeeperRecord.status||((nt=tt.inputs.gatekeeperRecord)===null||nt===void 0?void 0:nt.status)===InputStatus$1.IN_PROGRESS))},computeChecking$1=function(tt){if(!tt.inputs.civicPass.status||civicPassStatusLookupInProgress(tt)){if(tt.inputs.gatekeeperRecord.status===InputStatus$1.ERROR||tt.inputs.gatewayToken.status===InputStatus$1.ERROR)return GatewayStatus$1.ERROR;if(tt.inputs.gatekeeperRecord.status===InputStatus$1.IN_PROGRESS||tt.inputs.gatewayToken.status===InputStatus$1.IN_PROGRESS)return GatewayStatus$1.CHECKING}},checkForInProgress$1=function(tt){var et;return statusFromGatewayTokenIfExists$1(tt)||computeChecking$1(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeInitialState$1=function(tt){var et;return computeChecking$1(tt)||statusIfGatekeeperRecordRejected$1(tt)||statusFromGatewayTokenIfExists$1(tt)||computeIssuanceStatus$1(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},calculateRefreshStartPreApprovedTransaction=function(tt){var et,rt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received;if((rt==null?void 0:rt.action)===CivicPassMessageAction$1.START_PRE_APPROVED_TRANSACTION&&(rt==null?void 0:rt.event)===CivicPassMessageEventResult$1.SUCCESS&&(rt==null?void 0:rt.payload)!==void 0)return payerIsWalletOwner$1(tt)?ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX:ExtendedGatewayStatus$1.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX},calculateFromRefreshInReview$1=function(tt){var et,rt,nt,at,it,st,dt=tt.inputs.gatekeeperRecord;if(!((et=tt.inputs.parameters)===null||et===void 0)&&et.payer){if(!((nt=(rt=tt.internal)===null||rt===void 0?void 0:rt.chainTransaction)===null||nt===void 0)&&nt.sentTxId)return ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN;if(!((it=(at=tt.internal)===null||at===void 0?void 0:at.chainTransaction)===null||it===void 0)&&it.error)return ExtendedGatewayStatus$1.CHAIN_TRANSACTION_ERROR;if(!((st=dt.received)===null||st===void 0)&&st.transaction)return payerIsWalletOwner$1(tt)?ExtendedGatewayStatus$1.REFRESH_AWAITING_TRANSACTION_SEND:ExtendedGatewayStatus$1.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND}else return ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN},calculateFromGatekeeperRefreshRequested$1=function(tt){var et,rt,nt=tt.inputs.gatekeeperRecord;if(((et=nt==null?void 0:nt.received)===null||et===void 0?void 0:et.state)===GatekeeperAPIStatus$1.REQUESTED||(nt==null?void 0:nt.status)===InputStatus$1.IN_PROGRESS)return!((rt=tt.inputs.parameters)===null||rt===void 0)&&rt.payer&&payerIsWalletOwner$1(tt)?ExtendedGatewayStatus$1.REFRESH_CLIENT_PAYER_REQUESTED:ExtendedGatewayStatus$1.REFRESH_IN_REVIEW},tokenNotRefreshRequired$1=function(tt){var et=statusFromGatewayTokenIfExists$1(tt);return et&&![ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN,GatewayStatus$1.REFRESH_TOKEN_REQUIRED].includes(et)?et:void 0},computeRefreshRequested$1=function(tt){var et;return tokenNotRefreshRequired$1(tt)||calculateFromGatekeeperRefreshRequested$1(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeRefreshInReview$1=function(tt){var et;return tokenNotRefreshRequired$1(tt)||statusIfGatekeeperRecordRejected$1(tt)||calculateFromRefreshInReview$1(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},calculateRefreshStatus$1=function(tt){var et,rt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received;if(preApprovedTxAvailable(tt.inputs.gatekeeperRecord))return payerIsWalletOwner$1(tt)?ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_START_NEW_TX:ExtendedGatewayStatus$1.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX;if((rt==null?void 0:rt.action)===CivicPassMessageAction$1.REFRESH&&(rt==null?void 0:rt.event)===CivicPassMessageEventResult$1.SUCCESS)return ExtendedGatewayStatus$1.REFRESH_USER_INFORMATION_VALIDATED},computeRefreshStatus$1=function(tt){var et;return tokenNotRefreshRequired$1(tt)||statusIfGatekeeperRecordRejected$1(tt)||calculateRefreshStatus$1(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},calculateFromRefreshAwaitingOnChain$1=function(tt){var et,rt;if(((rt=(et=tt.internal.errors)===null||et===void 0?void 0:et.expectedOnChainToken)===null||rt===void 0?void 0:rt.errorCode)===ErrorCode$1.CHAIN_CONFIRMATION_TIMEOUT_ERROR)return ExtendedGatewayStatus$1.CHAIN_TIMEOUT_ERROR},computeRefreshAwaitingOnChainToken$1=function(tt){var et;return tokenNotRefreshRequired$1(tt)||statusIfGatekeeperRecordRejected$1(tt)||calculateFromRefreshAwaitingOnChain$1(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeRefreshStartPreApprovedTransaction=function(tt){var et;return tokenNotRefreshRequired$1(tt)||calculateRefreshStartPreApprovedTransaction(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},_a$3,logDebug$4=prefixLogger$1("gatewayStatus").debug,logError=prefixLogger$1("gatewayStatus").error,gatewayTokenStatuses$1=[GatewayStatus$1.ACTIVE,GatewayStatus$1.FROZEN,GatewayStatus$1.REVOKED,GatewayStatus$1.REFRESH_TOKEN_REQUIRED],validationProcessStatuses$1=[GatewayStatus$1.COLLECTING_USER_INFORMATION,GatewayStatus$1.VALIDATING_USER_INFORMATION,GatewayStatus$1.USER_INFORMATION_REJECTED,GatewayStatus$1.USER_INFORMATION_VALIDATED],errorStatuses$1=[GatewayStatus$1.REJECTED,GatewayStatus$1.ERROR,GatewayStatus$1.LOCATION_NOT_SUPPORTED,GatewayStatus$1.VPN_NOT_SUPPORTED];function createTransition$1(tt,et){return{nextState:tt,compute:et}}var transitions=(_a$3={},_a$3[GatewayStatus$1.UNKNOWN]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[GatewayStatus$1.CHECKING],!1),checkForInProgress$1),_a$3[GatewayStatus$1.CHECKING]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),errorStatuses$1,!0),validationProcessStatuses$1,!0),[GatewayStatus$1.NOT_REQUESTED,ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION,ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_START_NEW_TX,ExtendedGatewayStatus$1.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_START_NEW_TX,ExtendedGatewayStatus$1.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX],!1),computeInitialState$1),_a$3[GatewayStatus$1.NOT_REQUESTED]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),validationProcessStatuses$1,!0),[ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,GatewayStatus$1.NOT_REQUESTED,ExtendedGatewayStatus$1.RESTART,ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION],!1),computeIssuanceStatus$1),_a$3[GatewayStatus$1.COLLECTING_USER_INFORMATION]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),validationProcessStatuses$1,!0),[ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,GatewayStatus$1.NOT_REQUESTED,ExtendedGatewayStatus$1.RESTART,ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION],!1),computeIssuanceStatus$1),_a$3[GatewayStatus$1.USER_INFORMATION_VALIDATED]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[ExtendedGatewayStatus$1.ISSUANCE_CLIENT_PAYER_REQUESTED,GatewayStatus$1.IN_REVIEW],!1),computeIssuanceRequested$1),_a$3[ExtendedGatewayStatus$1.ISSUANCE_CLIENT_PAYER_REQUESTED]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),errorStatuses$1,!0),[ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW],!1),computeIssuanceInReview$1),_a$3[GatewayStatus$1.IN_REVIEW]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),errorStatuses$1,!0),[ExtendedGatewayStatus$1.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW],!1),computeIssuanceInReview$1),_a$3[GatewayStatus$1.REJECTED]=createTransition$1([],function(){return GatewayStatus$1.REJECTED}),_a$3[ExtendedGatewayStatus$1.ISSUANCE_AWAITING_TRANSACTION_SEND]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$1.CONFIRM_OWNER_TRANSACTION,ExtendedGatewayStatus$1.CHAIN_TRANSACTION_ERROR],!1),computeIssuanceInReview$1),_a$3[ExtendedGatewayStatus$1.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$1.CONFIRM_OWNER_TRANSACTION,ExtendedGatewayStatus$1.CHAIN_TRANSACTION_ERROR],!1),computeIssuanceInReview$1),_a$3[ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[ExtendedGatewayStatus$1.CHAIN_TIMEOUT_ERROR],!1),computeIssuanceAwaitingOnChainToken$1),_a$3[ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),validationProcessStatuses$1,!0),[GatewayStatus$1.USER_INFORMATION_VALIDATED,ExtendedGatewayStatus$1.ISSUANCE_CLIENT_PAYER_REQUESTED,GatewayStatus$1.NOT_REQUESTED],!1),computeIssuanceDataCollectionRestart$1),_a$3[GatewayStatus$1.REVOKED]=createTransition$1([],handleGatewayTokenExistsStatus$1),_a$3[GatewayStatus$1.FROZEN]=createTransition$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),handleGatewayTokenExistsStatus$1),_a$3[GatewayStatus$1.ACTIVE]=createTransition$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),handleGatewayTokenExistsStatus$1),_a$3[GatewayStatus$1.ERROR]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[ExtendedGatewayStatus$1.RESTART,ExtendedGatewayStatus$1.RESTART_REFRESH],!1),handleGatekeeperError$1),_a$3[GatewayStatus$1.LOCATION_NOT_SUPPORTED]=createTransition$1([],function(){return GatewayStatus$1.LOCATION_NOT_SUPPORTED}),_a$3[GatewayStatus$1.VPN_NOT_SUPPORTED]=createTransition$1([],function(){return GatewayStatus$1.VPN_NOT_SUPPORTED}),_a$3[GatewayStatus$1.REFRESH_TOKEN_REQUIRED]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[ExtendedGatewayStatus$1.REFRESH_USER_INFORMATION_VALIDATED,ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_START_NEW_TX],!1),computeRefreshStatus$1),_a$3[ExtendedGatewayStatus$1.REFRESH_USER_INFORMATION_VALIDATED]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[ExtendedGatewayStatus$1.REFRESH_CLIENT_PAYER_REQUESTED,ExtendedGatewayStatus$1.REFRESH_IN_REVIEW],!1),computeRefreshRequested$1),_a$3[ExtendedGatewayStatus$1.REFRESH_IN_REVIEW]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),errorStatuses$1,!0),[ExtendedGatewayStatus$1.REFRESH_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$1.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),computeRefreshInReview$1),_a$3[ExtendedGatewayStatus$1.TOKEN_REFRESH_IN_REVIEW]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),errorStatuses$1,!0),[ExtendedGatewayStatus$1.REFRESH_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$1.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),computeRefreshInReview$1),_a$3[ExtendedGatewayStatus$1.REFRESH_CLIENT_PAYER_REQUESTED]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),errorStatuses$1,!0),[ExtendedGatewayStatus$1.REFRESH_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$1.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),computeRefreshInReview$1),_a$3[ExtendedGatewayStatus$1.REFRESH_AWAITING_TRANSACTION_SEND]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$1.CONFIRM_OWNER_TRANSACTION,ExtendedGatewayStatus$1.CHAIN_TRANSACTION_ERROR],!1),computeRefreshInReview$1),_a$3[ExtendedGatewayStatus$1.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$1.CONFIRM_OWNER_TRANSACTION,ExtendedGatewayStatus$1.CHAIN_TRANSACTION_ERROR],!1),computeRefreshInReview$1),_a$3[ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),errorStatuses$1,!0),[ExtendedGatewayStatus$1.CHAIN_TIMEOUT_ERROR],!1),computeRefreshAwaitingOnChainToken$1),_a$3[ExtendedGatewayStatus$1.CHAIN_TIMEOUT_ERROR]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[GatewayStatus$1.USER_INFORMATION_VALIDATED,ExtendedGatewayStatus$1.RESTART,ExtendedGatewayStatus$1.RESTART_REFRESH,ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX],!1),handleChainError$1),_a$3[ExtendedGatewayStatus$1.CHAIN_TRANSACTION_ERROR]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[ExtendedGatewayStatus$1.RESTART,ExtendedGatewayStatus$1.RESTART_REFRESH,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.REFRESH_AWAITING_TRANSACTION_SEND],!1),handleChainError$1),_a$3[ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),errorStatuses$1,!0),[ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN],!1),computeIssuanceInReview$1),_a$3[ExtendedGatewayStatus$1.RESTART]=createTransition$1([ExtendedGatewayStatus$1.RESTART],function(){return ExtendedGatewayStatus$1.RESTART}),_a$3[ExtendedGatewayStatus$1.RESTART_REFRESH]=createTransition$1([ExtendedGatewayStatus$1.RESTART_REFRESH],function(){return ExtendedGatewayStatus$1.RESTART_REFRESH}),_a$3[ExtendedGatewayStatus$1.CHAIN_SIGN_MESSAGE_ERROR]=createTransition$1([ExtendedGatewayStatus$1.RESTART,ExtendedGatewayStatus$1.RESTART_REFRESH,ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX],handleChainError$1),_a$3[GatewayStatus$1.VALIDATING_USER_INFORMATION]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),validationProcessStatuses$1,!0),[ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$1.RESTART,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION,GatewayStatus$1.NOT_REQUESTED],!1),computeIssuanceStatus$1),_a$3[GatewayStatus$1.USER_INFORMATION_REJECTED]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),validationProcessStatuses$1,!0),[ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$1.RESTART,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION,GatewayStatus$1.NOT_REQUESTED],!1),computeIssuanceStatus$1),_a$3[ExtendedGatewayStatus$1.AWAITING_OWNER_TRANSACTION]=createTransition$1([],function(){return ExtendedGatewayStatus$1.AWAITING_OWNER_TRANSACTION}),_a$3[ExtendedGatewayStatus$1.CONFIRM_OWNER_TRANSACTION]=createTransition$1([],function(){return ExtendedGatewayStatus$1.CONFIRM_OWNER_TRANSACTION}),_a$3[ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_START_NEW_TX]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX],!1),computeIssuanceStartPreApprovedTransaction),_a$3[ExtendedGatewayStatus$1.ISSUANCE_CLIENT_SENDS_REQUEST_NEW_TX]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),errorStatuses$1,!0),[ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$1.CHAIN_TRANSACTION_ERROR],!1),computeIssuanceInReview$1),_a$3[ExtendedGatewayStatus$1.ISSUANCE_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),errorStatuses$1,!0),[ExtendedGatewayStatus$1.ISSUANCE_RESTART_DATA_COLLECTION,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$1.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus$1.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus$1.CHAIN_TRANSACTION_ERROR],!1),computeIssuanceInReview$1),_a$3[ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_START_NEW_TX]=createTransition$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),[ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX,ExtendedGatewayStatus$1.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX],!1),computeRefreshStartPreApprovedTransaction),_a$3[ExtendedGatewayStatus$1.REFRESH_CLIENT_SENDS_REQUEST_NEW_TX]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),errorStatuses$1,!0),[ExtendedGatewayStatus$1.REFRESH_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$1.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),computeRefreshInReview$1),_a$3[ExtendedGatewayStatus$1.REFRESH_CLIENT_THIRD_PARTY_SENDS_REQUEST_NEW_TX]=createTransition$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],gatewayTokenStatuses$1,!0),errorStatuses$1,!0),[ExtendedGatewayStatus$1.REFRESH_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus$1.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus$1.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),computeRefreshInReview$1),_a$3),isValidTransition=function(tt,et){var rt;return(rt=transitions[tt])===null||rt===void 0?void 0:rt.nextState.includes(et)},performTransition=function(tt){var et,rt,nt=(et=tt.internal)===null||et===void 0?void 0:et.status,at=(rt=transitions[nt])===null||rt===void 0?void 0:rt.compute;if(!at)throw new Error("No transition function defined for ".concat(nt," status"));var it=at(tt);if(it===nt)return nt;if(!isValidTransition(nt,it))throw logError("Invalid transition, throwing an error...",{currentStatus:nt,computedStatus:it}),new Error("Invalid transition, returning currentStatus currentStatus: ".concat(nt," computedStatus: ").concat(it));return logDebug$4("Transitioning to new status",{currentStatus:nt,computedStatus:it}),it},computeInternalStatus=function(tt){return tt.inputs.civicSign.status===InputStatus$1.ERROR&&!tt.inputs.civicPass.received?ExtendedGatewayStatus$1.CHAIN_SIGN_MESSAGE_ERROR:performTransition(tt)},isEmptyObject=function(tt){return tt==null||Object.keys(tt).length===0},computeFlowParameters=function(tt,et){var rt,nt,at,it,st,dt,pt,mt,yt,Rt,Tt,At,xt,Nt,Ct,Ot,kt,Pt,Dt,Gt,jt,Yt,tr,er,lr,It;if(!(!((rt=tt.inputs.parameters)===null||rt===void 0)&&rt.wallet&&(!((nt=tt.internal.chainDetails)===null||nt===void 0)&&nt.chainType)&&(!((at=tt.internal)===null||at===void 0)&&at.instanceId))||[GatewayStatus$1.UNKNOWN,GatewayStatus$1.CHECKING].includes(et))return null;var ot=((st=(it=tt.internal.errors)===null||it===void 0?void 0:it.expectedTokenGatekeeperRecord)===null||st===void 0?void 0:st.errorCode)||((pt=(dt=tt.internal.chainTransaction)===null||dt===void 0?void 0:dt.error)===null||pt===void 0?void 0:pt.errorCode)||((yt=(mt=tt.inputs.gatekeeperRecord)===null||mt===void 0?void 0:mt.received)===null||yt===void 0?void 0:yt.errorCode)||((At=(Tt=(Rt=tt.inputs.gatekeeperRecord)===null||Rt===void 0?void 0:Rt.received)===null||Tt===void 0?void 0:Tt.payload)===null||At===void 0?void 0:At.errorCode)||((Nt=(xt=tt.inputs.civicSign)===null||xt===void 0?void 0:xt.error)===null||Nt===void 0?void 0:Nt.errorCode),ft=gatewayStatusToCivicPassAction[et],ht=getFlowId(tt,et),vt=isEmptyObject((Ot=(Ct=tt.inputs.gatekeeperRecord)===null||Ct===void 0?void 0:Ct.received)===null||Ot===void 0?void 0:Ot.payload)?void 0:JSON.stringify((Pt=(kt=tt.inputs.gatekeeperRecord)===null||kt===void 0?void 0:kt.received)===null||Pt===void 0?void 0:Pt.payload),wt=!tt.inputs.parameters.gatekeeperSendsTransaction&&payerIsWalletOwner$1(tt);return __assign$1(__assign$1({action:ft,flowId:ht,ownerSigns:wt,errorCode:ot,flowType:flowTypeFromState(tt,et)},vt?{payload:vt}:{}),{redirectUrl:(Dt=tt.inputs.parameters)===null||Dt===void 0?void 0:Dt.redirectUrl,networkAddress:(Gt=tt.inputs.parameters)===null||Gt===void 0?void 0:Gt.gatekeeperNetwork,wallet:tt.inputs.parameters.wallet.address,chain:(jt=tt.internal.chainDetails)===null||jt===void 0?void 0:jt.chainType,chainNetwork:(Yt=tt.internal.chainDetails)===null||Yt===void 0?void 0:Yt.chainNetwork,did:(tr=tt.internal.ownerDids)===null||tr===void 0?void 0:tr[0],gatekeeperSendsTransaction:tt.inputs.parameters.gatekeeperSendsTransaction,partnerAppId:tt.inputs.parameters.partnerAppId,referrer:tt.inputs.parameters.referrer,instanceId:tt.internal.instanceId,hideWalletPrompts:tt.inputs.parameters.payer&&tt.inputs.parameters.payer!==tt.inputs.parameters.wallet.address?(er=tt.inputs.parameters.options)===null||er===void 0?void 0:er.hideWalletPrompts:void 0,signedTx:(It=(lr=tt.internal)===null||lr===void 0?void 0:lr.chainTransaction)===null||It===void 0?void 0:It.sentTxId})},IFRAME_ENDPOINTS={local:"http://localhost:3004",test:"http://localhost:3004",dev:"https://passv2-dev.civic.com",preprod:"https://passv2-preprod.civic.com",prod:"https://passv2.civic.com"},getCivicPassEndpoint=function(tt){var et=IFRAME_ENDPOINTS[tt];if(!et)throw new Error("Invalid stage ".concat(tt));return et},getUrl=function(tt,et){var rt,nt;if(et&&!((nt=(rt=tt.inputs)===null||rt===void 0?void 0:rt.parameters)===null||nt===void 0)&&nt.stage){var at=new URL(getCivicPassEndpoint(tt.inputs.parameters.stage)),it=objectToURLParams$1(et||{}),st=new URLSearchParams(it);return"".concat(at.href,"?").concat(st.toString())}},computeUiState=function(tt,et,rt){var nt,at,it,st,dt,pt,mt,yt,Rt,Tt,At=(nt=tt.inputs.parameters)===null||nt===void 0?void 0:nt.options,xt=!!(!((it=(at=tt.output)===null||at===void 0?void 0:at.ui)===null||it===void 0)&&it.isVisible);et===FlowStatus$1.FINISHED||((dt=(st=tt.internal)===null||st===void 0?void 0:st.userInteraction)===null||dt===void 0?void 0:dt.status)===UserInteractionStatus$1.FINISHED?xt=!1:(((mt=(pt=tt.internal)===null||pt===void 0?void 0:pt.userInteraction)===null||mt===void 0?void 0:mt.status)===UserInteractionStatus$1.STARTED||et===FlowStatus$1.IN_PROGRESS)&&(xt=!0),et===FlowStatus$1.RESULT&&(At!=null&&At.autoShowModal)&&(xt=!0);var Nt=getUrl(tt,rt),Ct=((Rt=(yt=tt.output)===null||yt===void 0?void 0:yt.ui)===null||Rt===void 0?void 0:Rt.url)!==Nt;return __assign$1(__assign$1({},(Tt=tt.output)===null||Tt===void 0?void 0:Tt.ui),{isLoading:Ct,url:Nt,isVisible:!!xt})},initialInternalState={status:GatewayStatus$1.UNKNOWN,userInteraction:{status:null},errors:{},ownerDids:[],chainDetails:void 0},initialOutputState={flowParameters:void 0,flowState:{status:void 0,userInteraction:{status:null,count:0}},gatewayStatus:GatewayStatus$1.UNKNOWN,gatewayToken:void 0,gatewayTokenTransaction:void 0,pendingRequests:void 0,ui:void 0},initialInputState={civicSign:{status:null,received:null},civicPass:{status:null,received:null},gatewayToken:{status:null,received:null},gatekeeperRecord:{status:null,received:null},parameters:null,dynamicParameters:{forceRequireRefresh:!1},gatekeeperNetworkData:{status:null,received:null}},initialState={inputs:initialInputState,internal:initialInternalState,output:initialOutputState},computeState=function(tt){var et,rt,nt,at,it,st,dt=computeInternalStatus(tt),pt=computeFlowParameters(tt,dt)||void 0,mt=flowStatusFromState(tt,dt),yt=__assign$1(__assign$1({},(et=tt.output)===null||et===void 0?void 0:et.ui),computeUiState(tt,mt,pt)),Rt=[FlowStatus$1.RESULT,FlowStatus$1.FINISHED].includes(mt)&&((at=(nt=(rt=tt.inputs.gatekeeperNetworkData)===null||rt===void 0?void 0:rt.received)===null||nt===void 0?void 0:nt.client)===null||at===void 0?void 0:at.tokenActiveDisplay)==="hidden"?null:tt.internal.userInteraction.status;return{internal:__assign$1(__assign$1({},tt.internal),{status:dt,userInteraction:__assign$1(__assign$1({},tt.internal.userInteraction),{status:Rt})}),output:__assign$1(__assign$1({},tt.output),{ui:yt,flowParameters:pt,flowState:{status:mt,userInteraction:__assign$1(__assign$1({},tt.internal.userInteraction),{status:Rt})},gatewayStatus:internalToOutputGatewayStatus(dt),gatewayToken:tt.inputs.gatewayToken.received||void 0,gatewayTokenTransaction:(st=(it=tt.inputs.gatekeeperRecord)===null||it===void 0?void 0:it.received)===null||st===void 0?void 0:st.transaction,pendingRequests:getPendingRequestFromGatekeeperRecord$1(tt.inputs.gatekeeperRecord)})}},combinedMiddleware=function(tt){return function(et){return subscribeWithSelector(computed(immer(devtools(et,tt))))}},createGatewayCoreStore=function(tt){return createStore(combinedMiddleware(tt)(function(et,rt){return __assign$1(__assign$1(__assign$1({},initialState),{functions:{reset:function(){return et(produce(function(nt){var at;nt.inputs=__assign$1(__assign$1({},initialInputState),{dynamicParameters:nt.inputs.dynamicParameters,parameters:nt.inputs.parameters}),nt.internal=__assign$1(__assign$1({},initialInternalState),{userInteraction:{status:nt.internal.userInteraction.status},instanceId:nt.internal.instanceId,ownerDids:[],chainDetails:nt.internal.chainDetails}),nt.output=__assign$1(__assign$1({},initialOutputState),{ui:(at=nt.output)===null||at===void 0?void 0:at.ui})}))}}}),compute(rt,computeState))}))},defaultValues={isVisible:!1,isLoading:!1,url:void 0,isLoaded:!1},UIManager=function(){function tt(et){this.gatewayCoreStore=et,this.log=prefixLogger$1("UIManager")}return tt.prototype.onShow=function(){this.log.debug("onShow"),this.gatewayCoreStore.setState(function(et){var rt;et.output=et.output||{gatewayStatus:GatewayStatus$1.UNKNOWN},et.output.ui=((rt=et.output)===null||rt===void 0?void 0:rt.ui)||__assign$1({},defaultValues),et.output.ui.isVisible=!0,et.internal.userInteraction.status=UserInteractionStatus$1.STARTED})},tt.prototype.onHide=function(){this.log.debug("onHide"),this.gatewayCoreStore.setState(function(et){var rt;et.output=et.output||{gatewayStatus:GatewayStatus$1.UNKNOWN},et.output.ui=((rt=et.output)===null||rt===void 0?void 0:rt.ui)||__assign$1({},defaultValues),et.output.ui.isVisible=!1,et.internal.userInteraction.status=UserInteractionStatus$1.FINISHED})},tt.prototype.onLoad=function(){this.log.debug("onLoad"),this.gatewayCoreStore.setState(function(et){var rt;et.output=et.output||{gatewayStatus:GatewayStatus$1.UNKNOWN},et.output.ui=((rt=et.output)===null||rt===void 0?void 0:rt.ui)||__assign$1({},defaultValues),et.output.ui.isLoading=!1,et.output.ui.isLoaded=!0})},tt}(),_placeholder={"@@functional/placeholder":!0};function _isPlaceholder$6(tt){return tt===_placeholder}function _curry1$X(tt){return function et(rt){return arguments.length===0||_isPlaceholder$6(rt)?et:tt.apply(this,arguments)}}function _curry2$25(tt){return function et(rt,nt){switch(arguments.length){case 0:return et;case 1:return _isPlaceholder$6(rt)?et:_curry1$X(function(at){return tt(rt,at)});default:return _isPlaceholder$6(rt)&&_isPlaceholder$6(nt)?et:_isPlaceholder$6(rt)?_curry1$X(function(at){return tt(at,nt)}):_isPlaceholder$6(nt)?_curry1$X(function(at){return tt(rt,at)}):tt(rt,nt)}}}function _arrayFromIterator$2(tt){for(var et=[],rt;!(rt=tt.next()).done;)et.push(rt.value);return et}function _includesWith$6(tt,et,rt){for(var nt=0,at=rt.length;nt<at;){if(tt(et,rt[nt]))return!0;nt+=1}return!1}function _functionName$2(tt){var et=String(tt).match(/^function (\w*)/);return et==null?"":et[1]}function _has$h(tt,et){return Object.prototype.hasOwnProperty.call(et,tt)}function _objectIs$3(tt,et){return tt===et?tt!==0||1/tt===1/et:tt!==tt&&et!==et}var _objectIs$1$1=typeof Object.is=="function"?Object.is:_objectIs$3,toString$8=Object.prototype.toString,_isArguments$4=function(){return toString$8.call(arguments)==="[object Arguments]"?function(et){return toString$8.call(et)==="[object Arguments]"}:function(et){return _has$h("callee",et)}}(),hasEnumBug$2=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps$2=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],hasArgsEnumBug$2=function(){return arguments.propertyIsEnumerable("length")}(),contains$2=function tt(et,rt){for(var nt=0;nt<et.length;){if(et[nt]===rt)return!0;nt+=1}return!1},keys$c=_curry1$X(typeof Object.keys=="function"&&!hasArgsEnumBug$2?function tt(et){return Object(et)!==et?[]:Object.keys(et)}:function tt(et){if(Object(et)!==et)return[];var rt,nt,at=[],it=hasArgsEnumBug$2&&_isArguments$4(et);for(rt in et)_has$h(rt,et)&&(!it||rt!=="length")&&(at[at.length]=rt);if(hasEnumBug$2)for(nt=nonEnumerableProps$2.length-1;nt>=0;)rt=nonEnumerableProps$2[nt],_has$h(rt,et)&&!contains$2(at,rt)&&(at[at.length]=rt),nt-=1;return at}),type$3=_curry1$X(function tt(et){return et===null?"Null":et===void 0?"Undefined":Object.prototype.toString.call(et).slice(8,-1)});function _uniqContentEquals$1(tt,et,rt,nt){var at=_arrayFromIterator$2(tt),it=_arrayFromIterator$2(et);function st(dt,pt){return _equals$2(dt,pt,rt.slice(),nt.slice())}return!_includesWith$6(function(dt,pt){return!_includesWith$6(st,pt,dt)},it,at)}function _equals$2(tt,et,rt,nt){if(_objectIs$1$1(tt,et))return!0;var at=type$3(tt);if(at!==type$3(et))return!1;if(typeof tt["fantasy-land/equals"]=="function"||typeof et["fantasy-land/equals"]=="function")return typeof tt["fantasy-land/equals"]=="function"&&tt["fantasy-land/equals"](et)&&typeof et["fantasy-land/equals"]=="function"&&et["fantasy-land/equals"](tt);if(typeof tt.equals=="function"||typeof et.equals=="function")return typeof tt.equals=="function"&&tt.equals(et)&&typeof et.equals=="function"&&et.equals(tt);switch(at){case"Arguments":case"Array":case"Object":if(typeof tt.constructor=="function"&&_functionName$2(tt.constructor)==="Promise")return tt===et;break;case"Boolean":case"Number":case"String":if(!(typeof tt==typeof et&&_objectIs$1$1(tt.valueOf(),et.valueOf())))return!1;break;case"Date":if(!_objectIs$1$1(tt.valueOf(),et.valueOf()))return!1;break;case"Error":return tt.name===et.name&&tt.message===et.message;case"RegExp":if(!(tt.source===et.source&&tt.global===et.global&&tt.ignoreCase===et.ignoreCase&&tt.multiline===et.multiline&&tt.sticky===et.sticky&&tt.unicode===et.unicode))return!1;break}for(var it=rt.length-1;it>=0;){if(rt[it]===tt)return nt[it]===et;it-=1}switch(at){case"Map":return tt.size!==et.size?!1:_uniqContentEquals$1(tt.entries(),et.entries(),rt.concat([tt]),nt.concat([et]));case"Set":return tt.size!==et.size?!1:_uniqContentEquals$1(tt.values(),et.values(),rt.concat([tt]),nt.concat([et]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var st=keys$c(tt);if(st.length!==keys$c(et).length)return!1;var dt=rt.concat([tt]),pt=nt.concat([et]);for(it=st.length-1;it>=0;){var mt=st[it];if(!(_has$h(mt,et)&&_equals$2(et[mt],tt[mt],dt,pt)))return!1;it-=1}return!0}var equals$c=_curry2$25(function tt(et,rt){return _equals$2(et,rt,[],[])}),equals$1$1=equals$c;function _cloneRegExp$3(tt){return new RegExp(tt.source,tt.flags?tt.flags:(tt.global?"g":"")+(tt.ignoreCase?"i":"")+(tt.multiline?"m":"")+(tt.sticky?"y":"")+(tt.unicode?"u":"")+(tt.dotAll?"s":""))}function _clone$4(tt,et,rt){if(rt||(rt=new _ObjectMap$1),_isPrimitive$1(tt))return tt;var nt=function(it){var st=rt.get(tt);if(st)return st;rt.set(tt,it);for(var dt in tt)Object.prototype.hasOwnProperty.call(tt,dt)&&(it[dt]=_clone$4(tt[dt],!0,rt));return it};switch(type$3(tt)){case"Object":return nt(Object.create(Object.getPrototypeOf(tt)));case"Array":return nt(Array(tt.length));case"Date":return new Date(tt.valueOf());case"RegExp":return _cloneRegExp$3(tt);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return tt.slice();default:return tt}}function _isPrimitive$1(tt){var et=typeof tt;return tt==null||et!="object"&&et!="function"}var _ObjectMap$1=function(){function tt(){this.map={},this.length=0}return tt.prototype.set=function(et,rt){var nt=this.hash(et),at=this.map[nt];at||(this.map[nt]=at=[]),at.push([et,rt]),this.length+=1},tt.prototype.hash=function(et){var rt=[];for(var nt in et)rt.push(Object.prototype.toString.call(et[nt]));return rt.join()},tt.prototype.get=function(et){if(this.length<=180){for(var rt in this.map)for(var st=this.map[rt],nt=0;nt<st.length;nt+=1){var at=st[nt];if(at[0]===et)return at[1]}return}var it=this.hash(et),st=this.map[it];if(st)for(var nt=0;nt<st.length;nt+=1){var at=st[nt];if(at[0]===et)return at[1]}},tt}(),clone$2=_curry1$X(function tt(et){return et!=null&&typeof et.clone=="function"?et.clone():_clone$4(et)}),getInstanceInputObject=function(tt){var et;return tt?__assign$1(__assign$1({},tt.parameters),(et=tt.chainImplementation)===null||et===void 0?void 0:et.chainDetails):{}},shouldUpdateInstance=function(tt,et){return!et||!equals$1$1(getInstanceInputObject(et.inputs),getInstanceInputObject(tt))},hasRequiredInputs=function(tt){var et;return!!(!((et=tt.parameters.wallet)===null||et===void 0)&&et.address&&tt.chainImplementation)},getInstanceName=function(tt,et){var rt,nt,at,it,st,dt,pt,mt;return"gcc_".concat((nt=(rt=tt.parameters.wallet)===null||rt===void 0?void 0:rt.address)===null||nt===void 0?void 0:nt.substring(0,4),"_").concat((it=(at=tt.parameters)===null||at===void 0?void 0:at.gatekeeperNetwork)===null||it===void 0?void 0:it.substring(0,4),"_").concat((dt=(st=tt.chainImplementation)===null||st===void 0?void 0:st.chainDetails)===null||dt===void 0?void 0:dt.chainType,"_").concat((mt=(pt=tt.chainImplementation)===null||pt===void 0?void 0:pt.chainDetails)===null||mt===void 0?void 0:mt.chainNetwork,"_").concat(et.substring(0,4))};(function(){function tt(et){var rt=this,nt,at,it,st;this.inputs=et,this.instanceId=v4(),this.log=prefixLogger$1("Core instance: ".concat(this.instanceId)),(at=(nt=this.log)===null||nt===void 0?void 0:nt.setLogLevel)===null||at===void 0||at.call(nt,((st=(it=et.parameters)===null||it===void 0?void 0:it.options)===null||st===void 0?void 0:st.logLevel)||DEFAULT_LOG_LEVEL$1),this.log.info("GatewayClientCore created",{inputs:et}),this.gatewayCoreStore=createGatewayCoreStore({name:getInstanceName(et,this.instanceId),store:"gateway-client-core"}),this.log.info("GatewayClientCore gatewayCoreStore created",this.gatewayCoreStore),this.gatewayCoreStore.subscribe(function(dt){return dt.output},function(dt){rt.log.debug("GatewayClientCore output changed",dt),et.onOutputChange(clone$2(dt))}),this.orchestratorInst=new Orchestrator(this.gatewayCoreStore,et.messageEventInterface,this.instanceId,et.parameters,et.fetchConfig,et.postMessageTargetCallback,et.chainImplementation),this.gatewayCoreStore.setState(function(dt){dt.inputs.parameters=clone$2(__assign$1(__assign$1({},et.parameters),{payer:getPayer$1(et.parameters)})),dt.internal.chainDetails=clone$2(et.chainImplementation.chainDetails),dt.inputs.dynamicParameters=clone$2(et.dynamicParameters),dt.internal.instanceId=rt.instanceId}),this.orchestratorInst.orchestrate(),this.orchestratorInst.initialise(),this.uiInst=new UIManager(this.gatewayCoreStore)}return tt.getSingleInstance=function(et){var rt,nt,at=prefixLogger$1("GatewayClientCore.getSingleInstance");if(!hasRequiredInputs(et)){at.debug("Missing wallet address or chain implementation, aborting previous and setting to undefined",et),(rt=tt.currentInstance)===null||rt===void 0||rt.abort(),tt.currentInstance=void 0;return}return shouldUpdateInstance(et,tt.currentInstance)&&(at.debug("Inputs have changed, aborting previous and creating a new instance",et),(nt=tt.currentInstance)===null||nt===void 0||nt.abort(),tt.currentInstance=new tt(et)),tt.currentInstance},tt.prototype.updateDynamicParameters=function(et){this.gatewayCoreStore.setState(function(rt){rt.internal.userInteraction.status=null,rt.inputs.dynamicParameters=clone$2(et)})},tt.prototype.updateGatekeeperNetworkServiceData=function(et){this.gatewayCoreStore.setState(function(rt){rt.inputs.gatekeeperNetworkData=clone$2(et)})},tt.prototype.startOrResumeFlow=function(){this.gatewayCoreStore.setState(function(et){et.internal.userInteraction.status=UserInteractionStatus$1.STARTED})},tt.prototype.abort=function(){this.log.info("GatewayClientCore aborting"),this.orchestratorInst.abort()},Object.defineProperty(tt.prototype,"ui",{get:function(){var et=this;return{onShow:function(){return et.uiInst.onShow()},onHide:function(){return et.uiInst.onHide()},onLoad:function(){return et.uiInst.onLoad()}}},enumerable:!1,configurable:!0}),tt})();var dist={},types={},GatewayTokenData$1={},solanaBorsh={},lib={},_Buffer=safeBufferExports.Buffer;function base$1(tt){if(tt.length>=255)throw new TypeError("Alphabet too long");for(var et=new Uint8Array(256),rt=0;rt<et.length;rt++)et[rt]=255;for(var nt=0;nt<tt.length;nt++){var at=tt.charAt(nt),it=at.charCodeAt(0);if(et[it]!==255)throw new TypeError(at+" is ambiguous");et[it]=nt}var st=tt.length,dt=tt.charAt(0),pt=Math.log(st)/Math.log(256),mt=Math.log(256)/Math.log(st);function yt(At){if((Array.isArray(At)||At instanceof Uint8Array)&&(At=_Buffer.from(At)),!_Buffer.isBuffer(At))throw new TypeError("Expected Buffer");if(At.length===0)return"";for(var xt=0,Nt=0,Ct=0,Ot=At.length;Ct!==Ot&&At[Ct]===0;)Ct++,xt++;for(var kt=(Ot-Ct)*mt+1>>>0,Pt=new Uint8Array(kt);Ct!==Ot;){for(var Dt=At[Ct],Gt=0,jt=kt-1;(Dt!==0||Gt<Nt)&&jt!==-1;jt--,Gt++)Dt+=256*Pt[jt]>>>0,Pt[jt]=Dt%st>>>0,Dt=Dt/st>>>0;if(Dt!==0)throw new Error("Non-zero carry");Nt=Gt,Ct++}for(var Yt=kt-Nt;Yt!==kt&&Pt[Yt]===0;)Yt++;for(var tr=dt.repeat(xt);Yt<kt;++Yt)tr+=tt.charAt(Pt[Yt]);return tr}function Rt(At){if(typeof At!="string")throw new TypeError("Expected String");if(At.length===0)return _Buffer.alloc(0);for(var xt=0,Nt=0,Ct=0;At[xt]===dt;)Nt++,xt++;for(var Ot=(At.length-xt)*pt+1>>>0,kt=new Uint8Array(Ot);At[xt];){var Pt=et[At.charCodeAt(xt)];if(Pt===255)return;for(var Dt=0,Gt=Ot-1;(Pt!==0||Dt<Ct)&&Gt!==-1;Gt--,Dt++)Pt+=st*kt[Gt]>>>0,kt[Gt]=Pt%256>>>0,Pt=Pt/256>>>0;if(Pt!==0)throw new Error("Non-zero carry");Ct=Dt,xt++}for(var jt=Ot-Ct;jt!==Ot&&kt[jt]===0;)jt++;var Yt=_Buffer.allocUnsafe(Nt+(Ot-jt));Yt.fill(0,0,Nt);for(var tr=Nt;jt!==Ot;)Yt[tr++]=kt[jt++];return Yt}function Tt(At){var xt=Rt(At);if(xt)return xt;throw new Error("Non-base"+st+" character")}return{encode:yt,decodeUnsafe:Rt,decode:Tt}}var src$2=base$1,basex$1=src$2,ALPHABET$1="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58$1=basex$1(ALPHABET$1),__createBinding=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(tt,et,rt,nt){nt===void 0&&(nt=rt),Object.defineProperty(tt,nt,{enumerable:!0,get:function(){return et[rt]}})}:function(tt,et,rt,nt){nt===void 0&&(nt=rt),tt[nt]=et[rt]}),__setModuleDefault=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(tt,et){Object.defineProperty(tt,"default",{enumerable:!0,value:et})}:function(tt,et){tt.default=et}),__decorate=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(tt,et,rt,nt){var at=arguments.length,it=at<3?et:nt===null?nt=Object.getOwnPropertyDescriptor(et,rt):nt,st;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")it=Reflect.decorate(tt,et,rt,nt);else for(var dt=tt.length-1;dt>=0;dt--)(st=tt[dt])&&(it=(at<3?st(it):at>3?st(et,rt,it):st(et,rt))||it);return at>3&&it&&Object.defineProperty(et,rt,it),it},__importStar=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(tt){if(tt&&tt.__esModule)return tt;var et={};if(tt!=null)for(var rt in tt)rt!=="default"&&Object.hasOwnProperty.call(tt,rt)&&__createBinding(et,tt,rt);return __setModuleDefault(et,tt),et},__importDefault=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(tt){return tt&&tt.__esModule?tt:{default:tt}};Object.defineProperty(lib,"__esModule",{value:!0});lib.deserializeUnchecked=lib.deserialize=lib.serialize=lib.BinaryReader=lib.BinaryWriter=lib.BorshError=lib.baseDecode=lib.baseEncode=void 0;const bn_js_1=__importDefault(bnExports),bs58_1=__importDefault(bs58$1),encoding=__importStar(require$$2$2),TextDecoder$1=typeof commonjsGlobal$1.TextDecoder!="function"?encoding.TextDecoder:commonjsGlobal$1.TextDecoder,textDecoder=new TextDecoder$1("utf-8",{fatal:!0});function baseEncode(tt){return typeof tt=="string"&&(tt=Buffer.from(tt,"utf8")),bs58_1.default.encode(Buffer.from(tt))}lib.baseEncode=baseEncode;function baseDecode(tt){return Buffer.from(bs58_1.default.decode(tt))}lib.baseDecode=baseDecode;const INITIAL_LENGTH=1024;class BorshError extends Error{constructor(et){super(et),this.fieldPath=[],this.originalMessage=et}addToFieldPath(et){this.fieldPath.splice(0,0,et),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}lib.BorshError=BorshError;class BinaryWriter{constructor(){this.buf=Buffer.alloc(INITIAL_LENGTH),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(INITIAL_LENGTH)]))}writeU8(et){this.maybeResize(),this.buf.writeUInt8(et,this.length),this.length+=1}writeU16(et){this.maybeResize(),this.buf.writeUInt16LE(et,this.length),this.length+=2}writeU32(et){this.maybeResize(),this.buf.writeUInt32LE(et,this.length),this.length+=4}writeU64(et){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1.default(et).toArray("le",8)))}writeU128(et){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1.default(et).toArray("le",16)))}writeU256(et){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1.default(et).toArray("le",32)))}writeU512(et){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1.default(et).toArray("le",64)))}writeBuffer(et){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),et,Buffer.alloc(INITIAL_LENGTH)]),this.length+=et.length}writeString(et){this.maybeResize();const rt=Buffer.from(et,"utf8");this.writeU32(rt.length),this.writeBuffer(rt)}writeFixedArray(et){this.writeBuffer(Buffer.from(et))}writeArray(et,rt){this.maybeResize(),this.writeU32(et.length);for(const nt of et)this.maybeResize(),rt(nt)}toArray(){return this.buf.subarray(0,this.length)}}lib.BinaryWriter=BinaryWriter;function handlingRangeError(tt,et,rt){const nt=rt.value;rt.value=function(...at){try{return nt.apply(this,at)}catch(it){if(it instanceof RangeError){const st=it.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(st)>=0)throw new BorshError("Reached the end of buffer when deserializing")}throw it}}}class BinaryReader{constructor(et){this.buf=et,this.offset=0}readU8(){const et=this.buf.readUInt8(this.offset);return this.offset+=1,et}readU16(){const et=this.buf.readUInt16LE(this.offset);return this.offset+=2,et}readU32(){const et=this.buf.readUInt32LE(this.offset);return this.offset+=4,et}readU64(){const et=this.readBuffer(8);return new bn_js_1.default(et,"le")}readU128(){const et=this.readBuffer(16);return new bn_js_1.default(et,"le")}readU256(){const et=this.readBuffer(32);return new bn_js_1.default(et,"le")}readU512(){const et=this.readBuffer(64);return new bn_js_1.default(et,"le")}readBuffer(et){if(this.offset+et>this.buf.length)throw new BorshError(`Expected buffer length ${et} isn't within bounds`);const rt=this.buf.slice(this.offset,this.offset+et);return this.offset+=et,rt}readString(){const et=this.readU32(),rt=this.readBuffer(et);try{return textDecoder.decode(rt)}catch(nt){throw new BorshError(`Error decoding UTF-8 string: ${nt}`)}}readFixedArray(et){return new Uint8Array(this.readBuffer(et))}readArray(et){const rt=this.readU32(),nt=Array();for(let at=0;at<rt;++at)nt.push(et());return nt}}__decorate([handlingRangeError],BinaryReader.prototype,"readU8",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU16",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU32",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU64",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU128",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU256",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU512",null);__decorate([handlingRangeError],BinaryReader.prototype,"readString",null);__decorate([handlingRangeError],BinaryReader.prototype,"readFixedArray",null);__decorate([handlingRangeError],BinaryReader.prototype,"readArray",null);lib.BinaryReader=BinaryReader;function capitalizeFirstLetter(tt){return tt.charAt(0).toUpperCase()+tt.slice(1)}function serializeField(tt,et,rt,nt,at){try{if(typeof nt=="string")at[`write${capitalizeFirstLetter(nt)}`](rt);else if(nt instanceof Array)if(typeof nt[0]=="number"){if(rt.length!==nt[0])throw new BorshError(`Expecting byte array of length ${nt[0]}, but got ${rt.length} bytes`);at.writeFixedArray(rt)}else at.writeArray(rt,it=>{serializeField(tt,et,it,nt[0],at)});else if(nt.kind!==void 0)switch(nt.kind){case"option":{rt==null?at.writeU8(0):(at.writeU8(1),serializeField(tt,et,rt,nt.type,at));break}default:throw new BorshError(`FieldType ${nt} unrecognized`)}else serializeStruct(tt,rt,at)}catch(it){throw it instanceof BorshError&&it.addToFieldPath(et),it}}function serializeStruct(tt,et,rt){const nt=tt.get(et.constructor);if(!nt)throw new BorshError(`Class ${et.constructor.name} is missing in schema`);if(nt.kind==="struct")nt.fields.map(([at,it])=>{serializeField(tt,at,et[at],it,rt)});else if(nt.kind==="enum"){const at=et[nt.field];for(let it=0;it<nt.values.length;++it){const[st,dt]=nt.values[it];if(st===at){rt.writeU8(it),serializeField(tt,st,et[st],dt,rt);break}}}else throw new BorshError(`Unexpected schema kind: ${nt.kind} for ${et.constructor.name}`)}function serialize(tt,et){const rt=new BinaryWriter;return serializeStruct(tt,et,rt),rt.toArray()}lib.serialize=serialize;function deserializeField(tt,et,rt,nt){try{return typeof rt=="string"?nt[`read${capitalizeFirstLetter(rt)}`]():rt instanceof Array?typeof rt[0]=="number"?nt.readFixedArray(rt[0]):nt.readArray(()=>deserializeField(tt,et,rt[0],nt)):rt.kind==="option"?nt.readU8()?deserializeField(tt,et,rt.type,nt):void 0:deserializeStruct(tt,rt,nt)}catch(at){throw at instanceof BorshError&&at.addToFieldPath(et),at}}function deserializeStruct(tt,et,rt){const nt=tt.get(et);if(!nt)throw new BorshError(`Class ${et.name} is missing in schema`);if(nt.kind==="struct"){const at={};for(const[it,st]of tt.get(et).fields)at[it]=deserializeField(tt,it,st,rt);return new et(at)}if(nt.kind==="enum"){const at=rt.readU8();if(at>=nt.values.length)throw new BorshError(`Enum index: ${at} is out of range`);const[it,st]=nt.values[at],dt=deserializeField(tt,it,st,rt);return new et({[it]:dt})}throw new BorshError(`Unexpected schema kind: ${nt.kind} for ${et.constructor.name}`)}function deserialize(tt,et,rt){const nt=new BinaryReader(rt),at=deserializeStruct(tt,et,nt);if(nt.offset<rt.length)throw new BorshError(`Unexpected ${rt.length-nt.offset} bytes after deserialized data`);return at}lib.deserialize=deserialize;function deserializeUnchecked(tt,et,rt){const nt=new BinaryReader(rt);return deserializeStruct(tt,et,nt)}lib.deserializeUnchecked=deserializeUnchecked;(function(tt){Object.defineProperty(tt,"__esModule",{value:!0}),tt.Enum=tt.Assignable=tt.SCHEMA=void 0;const et=lib;tt.SCHEMA=new Map;class rt{constructor(it){Object.keys(it).forEach(st=>{this[st]=it[st]})}encode(){return Buffer.from((0,et.serialize)(tt.SCHEMA,this))}static decode(it){return(0,et.deserializeUnchecked)(tt.SCHEMA,this,it)}}tt.Assignable=rt;class nt extends rt{constructor(it){if(super(it),Object.keys(it).length!==1)throw new Error("Enum can only take single value");this.enum="",Object.keys(it).forEach(st=>{this.enum=st})}}tt.Enum=nt})(solanaBorsh);var AssignablePublicKey$1={};Object.defineProperty(AssignablePublicKey$1,"__esModule",{value:!0});AssignablePublicKey$1.AssignablePublicKey=void 0;const solanaBorsh_1$3=solanaBorsh,web3_js_1$3=require$$2$1;class AssignablePublicKey extends solanaBorsh_1$3.Assignable{toPublicKey(){return new web3_js_1$3.PublicKey(this.bytes)}toString(){return this.toPublicKey().toBase58()}static parse(et){return AssignablePublicKey.fromPublicKey(new web3_js_1$3.PublicKey(et))}static fromPublicKey(et){return new AssignablePublicKey({bytes:Uint8Array.from(et.toBuffer())})}static empty(){const et=new Array(32);return et.fill(0),new AssignablePublicKey({bytes:et})}}AssignablePublicKey$1.AssignablePublicKey=AssignablePublicKey;solanaBorsh_1$3.SCHEMA.set(AssignablePublicKey,{kind:"struct",fields:[["bytes",[32]]]});Object.defineProperty(GatewayTokenData$1,"__esModule",{value:!0});GatewayTokenData$1.GatewayTokenState=GatewayTokenData$1.Revoked=GatewayTokenData$1.Frozen=GatewayTokenData$1.Active=GatewayTokenData$1.GatewayTokenData=void 0;const web3_js_1$2=require$$2$1,solanaBorsh_1$2=solanaBorsh,AssignablePublicKey_1$1=AssignablePublicKey$1;class GatewayTokenData extends solanaBorsh_1$2.Assignable{static fromAccount(et){return GatewayTokenData.decode(et)}forAuthority(et){return new GatewayTokenData(Object.assign(Object.assign({},this),{authority:AssignablePublicKey_1$1.AssignablePublicKey.fromPublicKey(et)}))}static empty(et){return new GatewayTokenData({owner:AssignablePublicKey_1$1.AssignablePublicKey.fromPublicKey(et||web3_js_1$2.Keypair.generate().publicKey)})}}GatewayTokenData$1.GatewayTokenData=GatewayTokenData;class Active extends solanaBorsh_1$2.Assignable{}GatewayTokenData$1.Active=Active;class Frozen extends solanaBorsh_1$2.Assignable{}GatewayTokenData$1.Frozen=Frozen;class Revoked extends solanaBorsh_1$2.Assignable{}GatewayTokenData$1.Revoked=Revoked;class GatewayTokenState extends solanaBorsh_1$2.Enum{}GatewayTokenData$1.GatewayTokenState=GatewayTokenState;solanaBorsh_1$2.SCHEMA.set(GatewayTokenData,{kind:"struct",fields:[["version",[1]],["parentGatewayToken",{kind:"option",type:AssignablePublicKey_1$1.AssignablePublicKey}],["owner",AssignablePublicKey_1$1.AssignablePublicKey],["ownerIdentity",{kind:"option",type:AssignablePublicKey_1$1.AssignablePublicKey}],["gatekeeperNetwork",AssignablePublicKey_1$1.AssignablePublicKey],["issuingGatekeeper",AssignablePublicKey_1$1.AssignablePublicKey],["state",GatewayTokenState],["expiry",{kind:"option",type:"u64"}]]});solanaBorsh_1$2.SCHEMA.set(GatewayTokenState,{kind:"enum",field:"enum",values:[["active",Active],["frozen",Frozen],["revoked",Revoked]]});solanaBorsh_1$2.SCHEMA.set(Active,{kind:"struct",fields:[]});solanaBorsh_1$2.SCHEMA.set(Frozen,{kind:"struct",fields:[]});solanaBorsh_1$2.SCHEMA.set(Revoked,{kind:"struct",fields:[]});var util={},constants={};Object.defineProperty(constants,"__esModule",{value:!0});constants.DEFAULT_DERIVATION_SEED=constants.SOLANA_TIMEOUT_FINALIZED=constants.SOLANA_TIMEOUT_CONFIRMED=constants.SOLANA_TIMEOUT_PROCESSED=constants.DEFAULT_SOLANA_RETRIES=constants.SOLANA_COMMITMENT=constants.GATEWAY_TOKEN_ADDRESS_SEED=constants.GATEKEEPER_NONCE_SEED_STRING=constants.PROGRAM_ID=void 0;const web3_js_1$1=require$$2$1;constants.PROGRAM_ID=new web3_js_1$1.PublicKey("gatem74V238djXdzWnJf94Wo1DcnuGkfijbf3AuBhfs");constants.GATEKEEPER_NONCE_SEED_STRING="gatekeeper";constants.GATEWAY_TOKEN_ADDRESS_SEED="gateway";constants.SOLANA_COMMITMENT="confirmed";constants.DEFAULT_SOLANA_RETRIES=3;constants.SOLANA_TIMEOUT_PROCESSED=3e3;constants.SOLANA_TIMEOUT_CONFIRMED=7e3;constants.SOLANA_TIMEOUT_FINALIZED=1e4;constants.DEFAULT_DERIVATION_SEED=Buffer.from([0,0,0,0,0,0,0,0]);var GatewayNetworkData={};Object.defineProperty(GatewayNetworkData,"__esModule",{value:!0});GatewayNetworkData.mapEnumToFeatureName=GatewayNetworkData.NetworkFeature=GatewayNetworkData.UserTokenExpiry=void 0;const solanaBorsh_1$1=solanaBorsh;class UserTokenExpiry extends solanaBorsh_1$1.Assignable{}GatewayNetworkData.UserTokenExpiry=UserTokenExpiry;class NetworkFeature extends solanaBorsh_1$1.Enum{}GatewayNetworkData.NetworkFeature=NetworkFeature;solanaBorsh_1$1.SCHEMA.set(NetworkFeature,{kind:"enum",field:"enum",values:[["userTokenExpiry",UserTokenExpiry]]});solanaBorsh_1$1.SCHEMA.set(UserTokenExpiry,{kind:"struct",fields:[]});const mapEnumToFeatureName=tt=>tt==="userTokenExpiry"?"expire":tt;GatewayNetworkData.mapEnumToFeatureName=mapEnumToFeatureName;var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(tt){var et=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(xt,Nt,Ct,Ot){function kt(Pt){return Pt instanceof Ct?Pt:new Ct(function(Dt){Dt(Pt)})}return new(Ct||(Ct=Promise))(function(Pt,Dt){function Gt(tr){try{Yt(Ot.next(tr))}catch(er){Dt(er)}}function jt(tr){try{Yt(Ot.throw(tr))}catch(er){Dt(er)}}function Yt(tr){tr.done?Pt(tr.value):kt(tr.value).then(Gt,jt)}Yt((Ot=Ot.apply(xt,Nt||[])).next())})};Object.defineProperty(tt,"__esModule",{value:!0}),tt.getFeatureAccountAddress=tt.numToBuffer=tt.gatekeeperExists=tt.removeAccountChangeListener=tt.dataToGatewayToken=tt.GATEWAY_TOKEN_ACCOUNT_GATEKEEPER_NETWORK_FIELD_OFFSET=tt.GATEWAY_TOKEN_ACCOUNT_OWNER_FIELD_OFFSET=tt.getGatewayTokenAddressForOwnerAndGatekeeperNetwork=tt.getGatekeeperAccountAddress=void 0;const rt=require$$2$1,nt=constants,at=requireTypes(),it=GatewayNetworkData,st=(xt,Nt)=>rt.PublicKey.findProgramAddressSync([xt.toBuffer(),Nt.toBuffer(),Buffer.from(nt.GATEKEEPER_NONCE_SEED_STRING,"utf8")],nt.PROGRAM_ID)[0];tt.getGatekeeperAccountAddress=st;const dt=(xt,Nt,Ct=0)=>{if(Ct>Math.pow(2,8*8))throw new Error("index must be < max(8 bytes) when calling getGatewayTokenAddressForOwnerAndGatekeeperNetwork.");const Ot=(0,tt.numToBuffer)(Ct),kt=Buffer.concat([Buffer.alloc(8-Ot.length,0),Ot]);if(kt.length>8)throw new Error("Seed has length "+kt.length+" instead of 8 when calling getGatewayTokenAddressForOwnerAndGatekeeperNetwork.");const Pt=[xt.toBuffer(),Buffer.from(nt.GATEWAY_TOKEN_ADDRESS_SEED,"utf8"),kt,Nt.toBuffer()];return rt.PublicKey.findProgramAddressSync(Pt,nt.PROGRAM_ID)[0]};tt.getGatewayTokenAddressForOwnerAndGatekeeperNetwork=dt,tt.GATEWAY_TOKEN_ACCOUNT_OWNER_FIELD_OFFSET=2,tt.GATEWAY_TOKEN_ACCOUNT_GATEKEEPER_NETWORK_FIELD_OFFSET=35;function pt(xt){if(xt.active)return at.State.ACTIVE;if(xt.revoked)return at.State.REVOKED;if(xt.frozen)return at.State.FROZEN;throw new Error("Unrecognised state "+JSON.stringify(xt))}const mt=(xt,Nt)=>{var Ct;return new at.GatewayToken(xt.issuingGatekeeper.toPublicKey(),xt.gatekeeperNetwork.toPublicKey(),xt.owner.toPublicKey(),pt(xt.state),Nt,nt.PROGRAM_ID,(Ct=xt.expiry)===null||Ct===void 0?void 0:Ct.toNumber())};tt.dataToGatewayToken=mt;const yt=(xt,Nt)=>xt.removeAccountChangeListener(Nt);tt.removeAccountChangeListener=yt;const Rt=(xt,Nt,Ct)=>et(void 0,void 0,void 0,function*(){const Ot=(0,tt.getGatekeeperAccountAddress)(Nt,Ct),kt=yield xt.getAccountInfo(Ot,nt.SOLANA_COMMITMENT);return kt!=null&&nt.PROGRAM_ID.equals(kt.owner)});tt.gatekeeperExists=Rt;const Tt=xt=>{const Nt=(Ct,Ot)=>Ct===0?Ot:(Ot.unshift(Ct%256),Nt(Math.floor(Ct/256),Ot));if(xt<0)throw new Error("Cannot convert negative number to buffer");if(Number.isNaN(xt))throw new Error("Cannot convert NaN to buffer");return xt===0?Buffer.from([0]):Buffer.from(Nt(xt,[]))};tt.numToBuffer=Tt;const At=(xt,Nt)=>{const Ct=(0,it.mapEnumToFeatureName)(xt.enum);return rt.PublicKey.findProgramAddressSync([Nt.toBytes(),Buffer.from(Ct,"utf8")],nt.PROGRAM_ID)[0]};tt.getFeatureAccountAddress=At}(util)),util}var hasRequiredTypes;function requireTypes(){if(hasRequiredTypes)return types;hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0}),types.GatewayToken=types.State=void 0;const tt=GatewayTokenData$1,et=requireUtil();var rt;(function(at){at.ACTIVE="ACTIVE",at.REVOKED="REVOKED",at.FROZEN="FROZEN"})(rt||(types.State=rt={}));class nt{constructor(it,st,dt,pt,mt,yt,Rt){this.issuingGatekeeper=it,this.gatekeeperNetwork=st,this.owner=dt,this.state=pt,this.publicKey=mt,this.programId=yt,this.expiryTime=Rt}isValid(){return this.state===rt.ACTIVE&&!this.hasExpired()}hasExpired(){const it=Math.floor(Date.now()/1e3);return!!this.expiryTime&&it>this.expiryTime}static fromAccount(it,st){const dt=tt.GatewayTokenData.fromAccount(it.data);return(0,et.dataToGatewayToken)(dt,st)}update({state:it,expiryTime:st}){return new nt(this.issuingGatekeeper,this.gatekeeperNetwork,this.owner,it,this.publicKey,this.programId,st||this.expiryTime)}}return types.GatewayToken=nt,types}function base(tt){if(tt.length>=255)throw new TypeError("Alphabet too long");for(var et=new Uint8Array(256),rt=0;rt<et.length;rt++)et[rt]=255;for(var nt=0;nt<tt.length;nt++){var at=tt.charAt(nt),it=at.charCodeAt(0);if(et[it]!==255)throw new TypeError(at+" is ambiguous");et[it]=nt}var st=tt.length,dt=tt.charAt(0),pt=Math.log(st)/Math.log(256),mt=Math.log(256)/Math.log(st);function yt(At){if(At instanceof Uint8Array||(ArrayBuffer.isView(At)?At=new Uint8Array(At.buffer,At.byteOffset,At.byteLength):Array.isArray(At)&&(At=Uint8Array.from(At))),!(At instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(At.length===0)return"";for(var xt=0,Nt=0,Ct=0,Ot=At.length;Ct!==Ot&&At[Ct]===0;)Ct++,xt++;for(var kt=(Ot-Ct)*mt+1>>>0,Pt=new Uint8Array(kt);Ct!==Ot;){for(var Dt=At[Ct],Gt=0,jt=kt-1;(Dt!==0||Gt<Nt)&&jt!==-1;jt--,Gt++)Dt+=256*Pt[jt]>>>0,Pt[jt]=Dt%st>>>0,Dt=Dt/st>>>0;if(Dt!==0)throw new Error("Non-zero carry");Nt=Gt,Ct++}for(var Yt=kt-Nt;Yt!==kt&&Pt[Yt]===0;)Yt++;for(var tr=dt.repeat(xt);Yt<kt;++Yt)tr+=tt.charAt(Pt[Yt]);return tr}function Rt(At){if(typeof At!="string")throw new TypeError("Expected String");if(At.length===0)return new Uint8Array;for(var xt=0,Nt=0,Ct=0;At[xt]===dt;)Nt++,xt++;for(var Ot=(At.length-xt)*pt+1>>>0,kt=new Uint8Array(Ot);At[xt];){var Pt=et[At.charCodeAt(xt)];if(Pt===255)return;for(var Dt=0,Gt=Ot-1;(Pt!==0||Dt<Ct)&&Gt!==-1;Gt--,Dt++)Pt+=st*kt[Gt]>>>0,kt[Gt]=Pt%256>>>0,Pt=Pt/256>>>0;if(Pt!==0)throw new Error("Non-zero carry");Ct=Dt,xt++}for(var jt=Ot-Ct;jt!==Ot&&kt[jt]===0;)jt++;for(var Yt=new Uint8Array(Nt+(Ot-jt)),tr=Nt;jt!==Ot;)Yt[tr++]=kt[jt++];return Yt}function Tt(At){var xt=Rt(At);if(xt)return xt;throw new Error("Non-base"+st+" character")}return{encode:yt,decodeUnsafe:Rt,decode:Tt}}var src$1=base;const basex=src$1,ALPHABET="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var bs58=basex(ALPHABET),src={exports:{}},F$1=function(){return!1},F_1=F$1,T$1=function(){return!0},T_1=T$1,__={"@@functional/placeholder":!0};function _isPlaceholder$5(tt){return tt!=null&&typeof tt=="object"&&tt["@@functional/placeholder"]===!0}var _isPlaceholder_1=_isPlaceholder$5,_isPlaceholder$4=_isPlaceholder_1;function _curry1$W(tt){return function et(rt){return arguments.length===0||_isPlaceholder$4(rt)?et:tt.apply(this,arguments)}}var _curry1_1=_curry1$W,_curry1$V=_curry1_1,_isPlaceholder$3=_isPlaceholder_1;function _curry2$24(tt){return function et(rt,nt){switch(arguments.length){case 0:return et;case 1:return _isPlaceholder$3(rt)?et:_curry1$V(function(at){return tt(rt,at)});default:return _isPlaceholder$3(rt)&&_isPlaceholder$3(nt)?et:_isPlaceholder$3(rt)?_curry1$V(function(at){return tt(at,nt)}):_isPlaceholder$3(nt)?_curry1$V(function(at){return tt(rt,at)}):tt(rt,nt)}}}var _curry2_1=_curry2$24,_curry2$23=_curry2_1,add$3=_curry2$23(function tt(et,rt){return Number(et)+Number(rt)}),add_1=add$3;function _concat$d(tt,et){tt=tt||[],et=et||[];var rt,nt=tt.length,at=et.length,it=[];for(rt=0;rt<nt;)it[it.length]=tt[rt],rt+=1;for(rt=0;rt<at;)it[it.length]=et[rt],rt+=1;return it}var _concat_1=_concat$d;function _arity$b(tt,et){switch(tt){case 0:return function(){return et.apply(this,arguments)};case 1:return function(rt){return et.apply(this,arguments)};case 2:return function(rt,nt){return et.apply(this,arguments)};case 3:return function(rt,nt,at){return et.apply(this,arguments)};case 4:return function(rt,nt,at,it){return et.apply(this,arguments)};case 5:return function(rt,nt,at,it,st){return et.apply(this,arguments)};case 6:return function(rt,nt,at,it,st,dt){return et.apply(this,arguments)};case 7:return function(rt,nt,at,it,st,dt,pt){return et.apply(this,arguments)};case 8:return function(rt,nt,at,it,st,dt,pt,mt){return et.apply(this,arguments)};case 9:return function(rt,nt,at,it,st,dt,pt,mt,yt){return et.apply(this,arguments)};case 10:return function(rt,nt,at,it,st,dt,pt,mt,yt,Rt){return et.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var _arity_1=_arity$b,_arity$a=_arity_1,_isPlaceholder$2=_isPlaceholder_1;function _curryN$5(tt,et,rt){return function(){for(var nt=[],at=0,it=tt,st=0,dt=!1;st<et.length||at<arguments.length;){var pt;st<et.length&&(!_isPlaceholder$2(et[st])||at>=arguments.length)?pt=et[st]:(pt=arguments[at],at+=1),nt[st]=pt,_isPlaceholder$2(pt)?dt=!0:it-=1,st+=1}return!dt&&it<=0?rt.apply(this,nt):_arity$a(Math.max(0,it),_curryN$5(tt,nt,rt))}}var _curryN_1=_curryN$5,_arity$9=_arity_1,_curry1$U=_curry1_1,_curry2$22=_curry2_1,_curryN$4=_curryN_1,curryN$j=_curry2$22(function tt(et,rt){return et===1?_curry1$U(rt):_arity$9(et,_curryN$4(et,[],rt))}),curryN_1=curryN$j,_concat$c=_concat_1,_curry1$T=_curry1_1,curryN$i=curryN_1,addIndex=_curry1$T(function tt(et){return curryN$i(et.length,function(){var rt=0,nt=arguments[0],at=arguments[arguments.length-1],it=Array.prototype.slice.call(arguments,0);return it[0]=function(){var st=nt.apply(this,_concat$c(arguments,[rt,at]));return rt+=1,st},et.apply(this,it)})}),addIndex_1=addIndex,_concat$b=_concat_1,_curry1$S=_curry1_1,curryN$h=curryN_1,addIndexRight=_curry1$S(function tt(et){return curryN$h(et.length,function(){var rt=arguments[0],nt=arguments[arguments.length-1],at=nt.length-1,it=Array.prototype.slice.call(arguments,0);return it[0]=function(){var st=rt.apply(this,_concat$b(arguments,[at,nt]));return at-=1,st},et.apply(this,it)})}),addIndexRight_1=addIndexRight,_curry1$R=_curry1_1,_curry2$21=_curry2_1,_isPlaceholder$1=_isPlaceholder_1;function _curry3$Q(tt){return function et(rt,nt,at){switch(arguments.length){case 0:return et;case 1:return _isPlaceholder$1(rt)?et:_curry2$21(function(it,st){return tt(rt,it,st)});case 2:return _isPlaceholder$1(rt)&&_isPlaceholder$1(nt)?et:_isPlaceholder$1(rt)?_curry2$21(function(it,st){return tt(it,nt,st)}):_isPlaceholder$1(nt)?_curry2$21(function(it,st){return tt(rt,it,st)}):_curry1$R(function(it){return tt(rt,nt,it)});default:return _isPlaceholder$1(rt)&&_isPlaceholder$1(nt)&&_isPlaceholder$1(at)?et:_isPlaceholder$1(rt)&&_isPlaceholder$1(nt)?_curry2$21(function(it,st){return tt(it,st,at)}):_isPlaceholder$1(rt)&&_isPlaceholder$1(at)?_curry2$21(function(it,st){return tt(it,nt,st)}):_isPlaceholder$1(nt)&&_isPlaceholder$1(at)?_curry2$21(function(it,st){return tt(rt,it,st)}):_isPlaceholder$1(rt)?_curry1$R(function(it){return tt(it,nt,at)}):_isPlaceholder$1(nt)?_curry1$R(function(it){return tt(rt,it,at)}):_isPlaceholder$1(at)?_curry1$R(function(it){return tt(rt,nt,it)}):tt(rt,nt,at)}}}var _curry3_1=_curry3$Q,_concat$a=_concat_1,_curry3$P=_curry3_1,adjust$1=_curry3$P(function tt(et,rt,nt){var at=nt.length;if(et>=at||et<-at)return nt;var it=(at+et)%at,st=_concat$a(nt);return st[it]=rt(nt[it]),st}),adjust_1=adjust$1,_isArray$h=Array.isArray||function tt(et){return et!=null&&et.length>=0&&Object.prototype.toString.call(et)==="[object Array]"};function _isTransformer$4(tt){return tt!=null&&typeof tt["@@transducer/step"]=="function"}var _isTransformer_1=_isTransformer$4,_isArray$g=_isArray$h,_isTransformer$3=_isTransformer_1;function _dispatchable$q(tt,et,rt){return function(){if(arguments.length===0)return rt();var nt=arguments[arguments.length-1];if(!_isArray$g(nt)){for(var at=0;at<tt.length;){if(typeof nt[tt[at]]=="function")return nt[tt[at]].apply(nt,Array.prototype.slice.call(arguments,0,-1));at+=1}if(_isTransformer$3(nt)){var it=et.apply(null,Array.prototype.slice.call(arguments,0,-1));return it(nt)}}return rt.apply(this,arguments)}}var _dispatchable_1=_dispatchable$q;function _reduced$9(tt){return tt&&tt["@@transducer/reduced"]?tt:{"@@transducer/value":tt,"@@transducer/reduced":!0}}var _reduced_1=_reduced$9,_xfBase$o={init:function(){return this.xf["@@transducer/init"]()},result:function(tt){return this.xf["@@transducer/result"](tt)}},_reduced$8=_reduced_1,_xfBase$n=_xfBase$o,XAll=function(){function tt(et,rt){this.xf=rt,this.f=et,this.all=!0}return tt.prototype["@@transducer/init"]=_xfBase$n.init,tt.prototype["@@transducer/result"]=function(et){return this.all&&(et=this.xf["@@transducer/step"](et,!0)),this.xf["@@transducer/result"](et)},tt.prototype["@@transducer/step"]=function(et,rt){return this.f(rt)||(this.all=!1,et=_reduced$8(this.xf["@@transducer/step"](et,!1))),et},tt}();function _xall$1(tt){return function(et){return new XAll(tt,et)}}var _xall_1=_xall$1,_curry2$20=_curry2_1,_dispatchable$p=_dispatchable_1,_xall=_xall_1,all$1=_curry2$20(_dispatchable$p(["all"],_xall,function tt(et,rt){for(var nt=0;nt<rt.length;){if(!et(rt[nt]))return!1;nt+=1}return!0})),all_1=all$1;function _arrayFromIterator$1(tt){for(var et=[],rt;!(rt=tt.next()).done;)et.push(rt.value);return et}var _arrayFromIterator_1=_arrayFromIterator$1;function _includesWith$5(tt,et,rt){for(var nt=0,at=rt.length;nt<at;){if(tt(et,rt[nt]))return!0;nt+=1}return!1}var _includesWith_1=_includesWith$5;function _functionName$1(tt){var et=String(tt).match(/^function (\w*)/);return et==null?"":et[1]}var _functionName_1=_functionName$1;function _has$g(tt,et){return Object.prototype.hasOwnProperty.call(et,tt)}var _has_1=_has$g;function _objectIs$2(tt,et){return tt===et?tt!==0||1/tt===1/et:tt!==tt&&et!==et}var _objectIs_1=typeof Object.is=="function"?Object.is:_objectIs$2,_has$f=_has_1,toString$7=Object.prototype.toString,_isArguments$3=function(){return toString$7.call(arguments)==="[object Arguments]"?function(et){return toString$7.call(et)==="[object Arguments]"}:function(et){return _has$f("callee",et)}}(),_isArguments_1=_isArguments$3,_curry1$Q=_curry1_1,_has$e=_has_1,_isArguments$2=_isArguments_1,hasEnumBug$1=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps$1=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],hasArgsEnumBug$1=function(){return arguments.propertyIsEnumerable("length")}(),contains$1=function tt(et,rt){for(var nt=0;nt<et.length;){if(et[nt]===rt)return!0;nt+=1}return!1},keys$b=_curry1$Q(typeof Object.keys=="function"&&!hasArgsEnumBug$1?function tt(et){return Object(et)!==et?[]:Object.keys(et)}:function tt(et){if(Object(et)!==et)return[];var rt,nt,at=[],it=hasArgsEnumBug$1&&_isArguments$2(et);for(rt in et)_has$e(rt,et)&&(!it||rt!=="length")&&(at[at.length]=rt);if(hasEnumBug$1)for(nt=nonEnumerableProps$1.length-1;nt>=0;)rt=nonEnumerableProps$1[nt],_has$e(rt,et)&&!contains$1(at,rt)&&(at[at.length]=rt),nt-=1;return at}),keys_1=keys$b,_curry1$P=_curry1_1,type$2=_curry1$P(function tt(et){return et===null?"Null":et===void 0?"Undefined":Object.prototype.toString.call(et).slice(8,-1)}),type_1=type$2,_arrayFromIterator=_arrayFromIterator_1,_includesWith$4=_includesWith_1,_functionName=_functionName_1,_has$d=_has_1,_objectIs$1=_objectIs_1,keys$a=keys_1,type$1=type_1;function _uniqContentEquals(tt,et,rt,nt){var at=_arrayFromIterator(tt),it=_arrayFromIterator(et);function st(dt,pt){return _equals$1(dt,pt,rt.slice(),nt.slice())}return!_includesWith$4(function(dt,pt){return!_includesWith$4(st,pt,dt)},it,at)}function _equals$1(tt,et,rt,nt){if(_objectIs$1(tt,et))return!0;var at=type$1(tt);if(at!==type$1(et))return!1;if(typeof tt["fantasy-land/equals"]=="function"||typeof et["fantasy-land/equals"]=="function")return typeof tt["fantasy-land/equals"]=="function"&&tt["fantasy-land/equals"](et)&&typeof et["fantasy-land/equals"]=="function"&&et["fantasy-land/equals"](tt);if(typeof tt.equals=="function"||typeof et.equals=="function")return typeof tt.equals=="function"&&tt.equals(et)&&typeof et.equals=="function"&&et.equals(tt);switch(at){case"Arguments":case"Array":case"Object":if(typeof tt.constructor=="function"&&_functionName(tt.constructor)==="Promise")return tt===et;break;case"Boolean":case"Number":case"String":if(!(typeof tt==typeof et&&_objectIs$1(tt.valueOf(),et.valueOf())))return!1;break;case"Date":if(!_objectIs$1(tt.valueOf(),et.valueOf()))return!1;break;case"Error":return tt.name===et.name&&tt.message===et.message;case"RegExp":if(!(tt.source===et.source&&tt.global===et.global&&tt.ignoreCase===et.ignoreCase&&tt.multiline===et.multiline&&tt.sticky===et.sticky&&tt.unicode===et.unicode))return!1;break}for(var it=rt.length-1;it>=0;){if(rt[it]===tt)return nt[it]===et;it-=1}switch(at){case"Map":return tt.size!==et.size?!1:_uniqContentEquals(tt.entries(),et.entries(),rt.concat([tt]),nt.concat([et]));case"Set":return tt.size!==et.size?!1:_uniqContentEquals(tt.values(),et.values(),rt.concat([tt]),nt.concat([et]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var st=keys$a(tt);if(st.length!==keys$a(et).length)return!1;var dt=rt.concat([tt]),pt=nt.concat([et]);for(it=st.length-1;it>=0;){var mt=st[it];if(!(_has$d(mt,et)&&_equals$1(et[mt],tt[mt],dt,pt)))return!1;it-=1}return!0}var _equals_1=_equals$1,_curry2$1$=_curry2_1,_equals=_equals_1,equals$b=_curry2$1$(function tt(et,rt){return _equals(et,rt,[],[])}),equals_1=equals$b,equals$a=equals_1;function _indexOf$2(tt,et,rt){var nt,at;if(typeof tt.indexOf=="function")switch(typeof et){case"number":if(et===0){for(nt=1/et;rt<tt.length;){if(at=tt[rt],at===0&&1/at===nt)return rt;rt+=1}return-1}else if(et!==et){for(;rt<tt.length;){if(at=tt[rt],typeof at=="number"&&at!==at)return rt;rt+=1}return-1}return tt.indexOf(et,rt);case"string":case"boolean":case"function":case"undefined":return tt.indexOf(et,rt);case"object":if(et===null)return tt.indexOf(et,rt)}for(;rt<tt.length;){if(equals$a(tt[rt],et))return rt;rt+=1}return-1}var _indexOf_1=_indexOf$2,_indexOf$1=_indexOf_1;function _includes$3(tt,et){return _indexOf$1(et,tt,0)>=0}var _includes_1=_includes$3;function _map$6(tt,et){for(var rt=0,nt=et.length,at=Array(nt);rt<nt;)at[rt]=tt(et[rt]),rt+=1;return at}var _map_1=_map$6;function _quote$1(tt){var et=tt.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+et.replace(/"/g,'\\"')+'"'}var _quote_1=_quote$1,pad=function tt(et){return(et<10?"0":"")+et},_toISOString$1=typeof Date.prototype.toISOString=="function"?function tt(et){return et.toISOString()}:function tt(et){return et.getUTCFullYear()+"-"+pad(et.getUTCMonth()+1)+"-"+pad(et.getUTCDate())+"T"+pad(et.getUTCHours())+":"+pad(et.getUTCMinutes())+":"+pad(et.getUTCSeconds())+"."+(et.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},_toISOString_1=_toISOString$1;function _complement$2(tt){return function(){return!tt.apply(this,arguments)}}var _complement_1=_complement$2;function _arrayReduce$6(tt,et,rt){for(var nt=0,at=rt.length;nt<at;)et=tt(et,rt[nt]),nt+=1;return et}var _arrayReduce_1=_arrayReduce$6;function _filter$3(tt,et){for(var rt=0,nt=et.length,at=[];rt<nt;)tt(et[rt])&&(at[at.length]=et[rt]),rt+=1;return at}var _filter_1=_filter$3;function _isObject$5(tt){return Object.prototype.toString.call(tt)==="[object Object]"}var _isObject_1=_isObject$5,_xfBase$m=_xfBase$o,XFilter=function(){function tt(et,rt){this.xf=rt,this.f=et}return tt.prototype["@@transducer/init"]=_xfBase$m.init,tt.prototype["@@transducer/result"]=_xfBase$m.result,tt.prototype["@@transducer/step"]=function(et,rt){return this.f(rt)?this.xf["@@transducer/step"](et,rt):et},tt}();function _xfilter$1(tt){return function(et){return new XFilter(tt,et)}}var _xfilter_1=_xfilter$1,_arrayReduce$5=_arrayReduce_1,_curry2$1_=_curry2_1,_dispatchable$o=_dispatchable_1,_filter$2=_filter_1,_isObject$4=_isObject_1,_xfilter=_xfilter_1,keys$9=keys_1,filter$2=_curry2$1_(_dispatchable$o(["fantasy-land/filter","filter"],_xfilter,function(tt,et){return _isObject$4(et)?_arrayReduce$5(function(rt,nt){return tt(et[nt])&&(rt[nt]=et[nt]),rt},{},keys$9(et)):_filter$2(tt,et)})),filter_1=filter$2,_complement$1=_complement_1,_curry2$1Z=_curry2_1,filter$1=filter_1,reject$3=_curry2$1Z(function tt(et,rt){return filter$1(_complement$1(et),rt)}),reject_1=reject$3,_includes$2=_includes_1,_map$5=_map_1,_quote=_quote_1,_toISOString=_toISOString_1,keys$8=keys_1,reject$2=reject_1;function _toString$2(tt,et){var rt=function(st){var dt=et.concat([tt]);return _includes$2(st,dt)?"<Circular>":_toString$2(st,dt)},nt=function(it,st){return _map$5(function(dt){return _quote(dt)+": "+rt(it[dt])},st.slice().sort())};switch(Object.prototype.toString.call(tt)){case"[object Arguments]":return"(function() { return arguments; }("+_map$5(rt,tt).join(", ")+"))";case"[object Array]":return"["+_map$5(rt,tt).concat(nt(tt,reject$2(function(it){return/^\d+$/.test(it)},keys$8(tt)))).join(", ")+"]";case"[object Boolean]":return typeof tt=="object"?"new Boolean("+rt(tt.valueOf())+")":tt.toString();case"[object Date]":return"new Date("+(isNaN(tt.valueOf())?rt(NaN):_quote(_toISOString(tt)))+")";case"[object Map]":return"new Map("+rt(Array.from(tt))+")";case"[object Null]":return"null";case"[object Number]":return typeof tt=="object"?"new Number("+rt(tt.valueOf())+")":1/tt===-1/0?"-0":tt.toString(10);case"[object Set]":return"new Set("+rt(Array.from(tt).sort())+")";case"[object String]":return typeof tt=="object"?"new String("+rt(tt.valueOf())+")":_quote(tt);case"[object Undefined]":return"undefined";default:if(typeof tt.toString=="function"){var at=tt.toString();if(at!=="[object Object]")return at}return"{"+nt(tt,keys$8(tt)).join(", ")+"}"}}var _toString_1=_toString$2,_curry1$O=_curry1_1,_toString$1=_toString_1,toString$6=_curry1$O(function tt(et){return _toString$1(et,[])}),toString_1=toString$6,_curry2$1Y=_curry2_1,toString$5=toString_1,max$6=_curry2$1Y(function tt(et,rt){if(et===rt)return rt;function nt(pt,mt){if(pt>mt!=mt>pt)return mt>pt?mt:pt}var at=nt(et,rt);if(at!==void 0)return at;var it=nt(typeof et,typeof rt);if(it!==void 0)return it===typeof et?et:rt;var st=toString$5(et),dt=nt(st,toString$5(rt));return dt!==void 0&&dt===st?et:rt}),max_1=max$6,_xfBase$l=_xfBase$o,XMap$1=function(){function tt(et,rt){this.xf=rt,this.f=et}return tt.prototype["@@transducer/init"]=_xfBase$l.init,tt.prototype["@@transducer/result"]=_xfBase$l.result,tt.prototype["@@transducer/step"]=function(et,rt){return this.xf["@@transducer/step"](et,this.f(rt))},tt}(),_xmap$3=function tt(et){return function(rt){return new XMap$1(et,rt)}},_xmap_1=_xmap$3,_arrayReduce$4=_arrayReduce_1,_curry2$1X=_curry2_1,_dispatchable$n=_dispatchable_1,_map$4=_map_1,_xmap$2=_xmap_1,curryN$g=curryN_1,keys$7=keys_1,map$a=_curry2$1X(_dispatchable$n(["fantasy-land/map","map"],_xmap$2,function tt(et,rt){switch(Object.prototype.toString.call(rt)){case"[object Function]":return curryN$g(rt.length,function(){return et.call(this,rt.apply(this,arguments))});case"[object Object]":return _arrayReduce$4(function(nt,at){return nt[at]=et(rt[at]),nt},{},keys$7(rt));default:return _map$4(et,rt)}})),map_1=map$a,_isInteger$8=Number.isInteger||function tt(et){return et<<0===et};function _isString$7(tt){return Object.prototype.toString.call(tt)==="[object String]"}var _isString_1=_isString$7,_curry2$1W=_curry2_1,_isString$6=_isString_1,nth$6=_curry2$1W(function tt(et,rt){var nt=et<0?rt.length+et:et;return _isString$6(rt)?rt.charAt(nt):rt[nt]}),nth_1=nth$6,_curry2$1V=_curry2_1,_isInteger$7=_isInteger$8,nth$5=nth_1,prop$6=_curry2$1V(function tt(et,rt){if(rt!=null)return _isInteger$7(et)?nth$5(et,rt):rt[et]}),prop_1=prop$6,_curry2$1U=_curry2_1,map$9=map_1,prop$5=prop_1,pluck$4=_curry2$1U(function tt(et,rt){return map$9(prop$5(et),rt)}),pluck_1=pluck$4,_curry1$N=_curry1_1,_isArray$f=_isArray$h,_isString$5=_isString_1,_isArrayLike$5=_curry1$N(function tt(et){return _isArray$f(et)?!0:!et||typeof et!="object"||_isString$5(et)?!1:et.length===0?!0:et.length>0?et.hasOwnProperty(0)&&et.hasOwnProperty(et.length-1):!1}),_isArrayLike_1=_isArrayLike$5,_isArrayLike$4=_isArrayLike_1,symIterator$1=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function _createReduce$3(tt,et,rt){return function(at,it,st){if(_isArrayLike$4(st))return tt(at,it,st);if(st==null)return it;if(typeof st["fantasy-land/reduce"]=="function")return et(at,it,st,"fantasy-land/reduce");if(st[symIterator$1]!=null)return rt(at,it,st[symIterator$1]());if(typeof st.next=="function")return rt(at,it,st);if(typeof st.reduce=="function")return et(at,it,st,"reduce");throw new TypeError("reduce: list must be array or iterable")}}var _createReduce_1=_createReduce$3;function _xArrayReduce$2(tt,et,rt){for(var nt=0,at=rt.length;nt<at;){if(et=tt["@@transducer/step"](et,rt[nt]),et&&et["@@transducer/reduced"]){et=et["@@transducer/value"];break}nt+=1}return tt["@@transducer/result"](et)}var _xArrayReduce_1=_xArrayReduce$2,_arity$8=_arity_1,_curry2$1T=_curry2_1,bind$1=_curry2$1T(function tt(et,rt){return _arity$8(et.length,function(){return et.apply(rt,arguments)})}),bind_1=bind$1,_createReduce$2=_createReduce_1,_xArrayReduce$1=_xArrayReduce_1,bind=bind_1;function _xIterableReduce(tt,et,rt){for(var nt=rt.next();!nt.done;){if(et=tt["@@transducer/step"](et,nt.value),et&&et["@@transducer/reduced"]){et=et["@@transducer/value"];break}nt=rt.next()}return tt["@@transducer/result"](et)}function _xMethodReduce(tt,et,rt,nt){return tt["@@transducer/result"](rt[nt](bind(tt["@@transducer/step"],tt),et))}var _xReduce$7=_createReduce$2(_xArrayReduce$1,_xMethodReduce,_xIterableReduce),_xReduce_1=_xReduce$7,XWrap=function(){function tt(et){this.f=et}return tt.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},tt.prototype["@@transducer/result"]=function(et){return et},tt.prototype["@@transducer/step"]=function(et,rt){return this.f(et,rt)},tt}();function _xwrap$4(tt){return new XWrap(tt)}var _xwrap_1=_xwrap$4,_curry3$O=_curry3_1,_xReduce$6=_xReduce_1,_xwrap$3=_xwrap_1,reduce$8=_curry3$O(function(tt,et,rt){return _xReduce$6(typeof tt=="function"?_xwrap$3(tt):tt,et,rt)}),reduce_1=reduce$8,_curry1$M=_curry1_1,curryN$f=curryN_1,max$5=max_1,pluck$3=pluck_1,reduce$7=reduce_1,allPass=_curry1$M(function tt(et){return curryN$f(reduce$7(max$5,0,pluck$3("length",et)),function(){for(var rt=0,nt=et.length;rt<nt;){if(!et[rt].apply(this,arguments))return!1;rt+=1}return!0})}),allPass_1=allPass,_curry1$L=_curry1_1,always$3=_curry1$L(function tt(et){return function(){return et}}),always_1=always$3,_curry2$1S=_curry2_1,and$1=_curry2$1S(function tt(et,rt){return et&&rt}),and_1=and$1,_reduced$7=_reduced_1,_xfBase$k=_xfBase$o,XAny=function(){function tt(et,rt){this.xf=rt,this.f=et,this.any=!1}return tt.prototype["@@transducer/init"]=_xfBase$k.init,tt.prototype["@@transducer/result"]=function(et){return this.any||(et=this.xf["@@transducer/step"](et,!1)),this.xf["@@transducer/result"](et)},tt.prototype["@@transducer/step"]=function(et,rt){return this.f(rt)&&(this.any=!0,et=_reduced$7(this.xf["@@transducer/step"](et,!0))),et},tt}();function _xany$1(tt){return function(et){return new XAny(tt,et)}}var _xany_1=_xany$1,_curry2$1R=_curry2_1,_dispatchable$m=_dispatchable_1,_xany=_xany_1,any=_curry2$1R(_dispatchable$m(["any"],_xany,function tt(et,rt){for(var nt=0;nt<rt.length;){if(et(rt[nt]))return!0;nt+=1}return!1})),any_1=any,_curry1$K=_curry1_1,curryN$e=curryN_1,max$4=max_1,pluck$2=pluck_1,reduce$6=reduce_1,anyPass=_curry1$K(function tt(et){return curryN$e(reduce$6(max$4,0,pluck$2("length",et)),function(){for(var rt=0,nt=et.length;rt<nt;){if(et[rt].apply(this,arguments))return!0;rt+=1}return!1})}),anyPass_1=anyPass,_arrayReduce$3=_arrayReduce_1,_createReduce$1=_createReduce_1;function _iterableReduce$1(tt,et,rt){for(var nt=rt.next();!nt.done;)et=tt(et,nt.value),nt=rt.next();return et}function _methodReduce$1(tt,et,rt,nt){return rt[nt](tt,et)}var _reduce$5=_createReduce$1(_arrayReduce$3,_methodReduce$1,_iterableReduce$1),_reduce_1=_reduce$5,_concat$9=_concat_1,_curry2$1Q=_curry2_1,_reduce$4=_reduce_1,map$8=map_1,ap$3=_curry2$1Q(function tt(et,rt){return typeof rt["fantasy-land/ap"]=="function"?rt["fantasy-land/ap"](et):typeof et.ap=="function"?et.ap(rt):typeof et=="function"?function(nt){return et(nt)(rt(nt))}:_reduce$4(function(nt,at){return _concat$9(nt,map$8(at,rt))},[],et)}),ap_1=ap$3;function _aperture$1(tt,et){for(var rt=0,nt=et.length-(tt-1),at=new Array(nt>=0?nt:0);rt<nt;)at[rt]=Array.prototype.slice.call(et,rt,rt+tt),rt+=1;return at}var _aperture_1=_aperture$1,_concat$8=_concat_1,_xfBase$j=_xfBase$o,XAperture=function(){function tt(et,rt){this.xf=rt,this.pos=0,this.full=!1,this.acc=new Array(et)}return tt.prototype["@@transducer/init"]=_xfBase$j.init,tt.prototype["@@transducer/result"]=function(et){return this.acc=null,this.xf["@@transducer/result"](et)},tt.prototype["@@transducer/step"]=function(et,rt){return this.store(rt),this.full?this.xf["@@transducer/step"](et,this.getCopy()):et},tt.prototype.store=function(et){this.acc[this.pos]=et,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},tt.prototype.getCopy=function(){return _concat$8(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},tt}();function _xaperture$1(tt){return function(et){return new XAperture(tt,et)}}var _xaperture_1=_xaperture$1,_aperture=_aperture_1,_curry2$1P=_curry2_1,_dispatchable$l=_dispatchable_1,_xaperture=_xaperture_1,aperture=_curry2$1P(_dispatchable$l([],_xaperture,_aperture)),aperture_1=aperture,_concat$7=_concat_1,_curry2$1O=_curry2_1,append=_curry2$1O(function tt(et,rt){return _concat$7(rt,[et])}),append_1=append,_curry2$1N=_curry2_1,apply$1=_curry2$1N(function tt(et,rt){return et.apply(this,rt)}),apply_1=apply$1,_curry1$J=_curry1_1,keys$6=keys_1,values$1=_curry1$J(function tt(et){for(var rt=keys$6(et),nt=rt.length,at=[],it=0;it<nt;)at[it]=et[rt[it]],it+=1;return at}),values_1=values$1,_curry1$I=_curry1_1,_isArray$e=_isArray$h,apply=apply_1,curryN$d=curryN_1,max$3=max_1,pluck$1=pluck_1,reduce$5=reduce_1,keys$5=keys_1,values=values_1;function mapValues(tt,et){return _isArray$e(et)?et.map(tt):keys$5(et).reduce(function(rt,nt){return rt[nt]=tt(et[nt]),rt},{})}var applySpec=_curry1$I(function tt(et){return et=mapValues(function(rt){return typeof rt=="function"?rt:tt(rt)},et),curryN$d(reduce$5(max$3,0,pluck$1("length",values(et))),function(){var rt=arguments;return mapValues(function(nt){return apply(nt,rt)},et)})}),applySpec_1=applySpec,_curry2$1M=_curry2_1,applyTo=_curry2$1M(function tt(et,rt){return rt(et)}),applyTo_1=applyTo,_curry3$N=_curry3_1,ascend=_curry3$N(function tt(et,rt,nt){var at=et(rt),it=et(nt);return at<it?-1:at>it?1:0}),ascend_1=ascend,_isArray$d=_isArray$h,_isInteger$6=_isInteger$8;function _assoc$3(tt,et,rt){if(_isInteger$6(tt)&&_isArray$d(rt)){var nt=[].concat(rt);return nt[tt]=et,nt}var at={};for(var it in rt)at[it]=rt[it];return at[tt]=et,at}var _assoc_1=_assoc$3,_curry1$H=_curry1_1,isNil$5=_curry1$H(function tt(et){return et==null}),isNil_1=isNil$5,_curry3$M=_curry3_1,_has$c=_has_1,_isInteger$5=_isInteger$8,_assoc$2=_assoc_1,isNil$4=isNil_1,assocPath$2=_curry3$M(function tt(et,rt,nt){if(et.length===0)return rt;var at=et[0];if(et.length>1){var it=!isNil$4(nt)&&_has$c(at,nt)&&typeof nt[at]=="object"?nt[at]:_isInteger$5(et[1])?[]:{};rt=tt(Array.prototype.slice.call(et,1),rt,it)}return _assoc$2(at,rt,nt)}),assocPath_1=assocPath$2,_curry3$L=_curry3_1,assocPath$1=assocPath_1,assoc$2=_curry3$L(function tt(et,rt,nt){return assocPath$1([et],rt,nt)}),assoc_1=assoc$2,_curry2$1L=_curry2_1,nAry$3=_curry2$1L(function tt(et,rt){switch(et){case 0:return function(){return rt.call(this)};case 1:return function(nt){return rt.call(this,nt)};case 2:return function(nt,at){return rt.call(this,nt,at)};case 3:return function(nt,at,it){return rt.call(this,nt,at,it)};case 4:return function(nt,at,it,st){return rt.call(this,nt,at,it,st)};case 5:return function(nt,at,it,st,dt){return rt.call(this,nt,at,it,st,dt)};case 6:return function(nt,at,it,st,dt,pt){return rt.call(this,nt,at,it,st,dt,pt)};case 7:return function(nt,at,it,st,dt,pt,mt){return rt.call(this,nt,at,it,st,dt,pt,mt)};case 8:return function(nt,at,it,st,dt,pt,mt,yt){return rt.call(this,nt,at,it,st,dt,pt,mt,yt)};case 9:return function(nt,at,it,st,dt,pt,mt,yt,Rt){return rt.call(this,nt,at,it,st,dt,pt,mt,yt,Rt)};case 10:return function(nt,at,it,st,dt,pt,mt,yt,Rt,Tt){return rt.call(this,nt,at,it,st,dt,pt,mt,yt,Rt,Tt)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),nAry_1=nAry$3,_curry1$G=_curry1_1,nAry$2=nAry_1,binary=_curry1$G(function tt(et){return nAry$2(2,et)}),binary_1=binary;function _isFunction$5(tt){var et=Object.prototype.toString.call(tt);return et==="[object Function]"||et==="[object AsyncFunction]"||et==="[object GeneratorFunction]"||et==="[object AsyncGeneratorFunction]"}var _isFunction_1=_isFunction$5,_curry2$1K=_curry2_1,_arrayReduce$2=_arrayReduce_1,ap$2=ap_1,curryN$c=curryN_1,map$7=map_1,liftN$2=_curry2$1K(function tt(et,rt){var nt=curryN$c(et,rt);return curryN$c(et,function(){return _arrayReduce$2(ap$2,map$7(nt,arguments[0]),Array.prototype.slice.call(arguments,1))})}),liftN_1=liftN$2,_curry1$F=_curry1_1,liftN$1=liftN_1,lift$4=_curry1$F(function tt(et){return liftN$1(et.length,et)}),lift_1=lift$4,_curry2$1J=_curry2_1,_isFunction$4=_isFunction_1,and=and_1,lift$3=lift_1,both=_curry2$1J(function tt(et,rt){return _isFunction$4(et)?function(){return et.apply(this,arguments)&&rt.apply(this,arguments)}:lift$3(and)(et,rt)}),both_1=both,_curry1$E=_curry1_1,call=_curry1$E(function tt(et){return et.apply(this,Array.prototype.slice.call(arguments,1))}),call_1=call,_isArrayLike$3=_isArrayLike_1;function _makeFlat$2(tt){return function et(rt){for(var nt,at,it,st=[],dt=0,pt=rt.length;dt<pt;){if(_isArrayLike$3(rt[dt]))for(nt=tt?et(rt[dt]):rt[dt],it=0,at=nt.length;it<at;)st[st.length]=nt[it],it+=1;else st[st.length]=rt[dt];dt+=1}return st}}var _makeFlat_1=_makeFlat$2;function _forceReduced$1(tt){return{"@@transducer/value":tt,"@@transducer/reduced":!0}}var _forceReduced_1=_forceReduced$1,_forceReduced=_forceReduced_1,_isArrayLike$2=_isArrayLike_1,_xArrayReduce=_xArrayReduce_1,_xReduce$5=_xReduce_1,_xfBase$i=_xfBase$o,tInit$1="@@transducer/init",tStep$1="@@transducer/step",tResult="@@transducer/result",XPreservingReduced=function(){function tt(et){this.xf=et}return tt.prototype[tInit$1]=_xfBase$i.init,tt.prototype[tResult]=_xfBase$i.result,tt.prototype[tStep$1]=function(et,rt){var nt=this.xf[tStep$1](et,rt);return nt["@@transducer/reduced"]?_forceReduced(nt):nt},tt}(),XFlatCat=function(){function tt(et){this.xf=new XPreservingReduced(et)}return tt.prototype[tInit$1]=_xfBase$i.init,tt.prototype[tResult]=_xfBase$i.result,tt.prototype[tStep$1]=function(et,rt){return _isArrayLike$2(rt)?_xReduce$5(this.xf,et,rt):_xArrayReduce(this.xf,et,[rt])},tt}(),_flatCat$1=function tt(et){return new XFlatCat(et)},_flatCat_1=_flatCat$1,_flatCat=_flatCat_1,_xmap$1=_xmap_1;function _xchain$1(tt){return function(et){return _xmap$1(tt)(_flatCat(et))}}var _xchain_1=_xchain$1,_curry2$1I=_curry2_1,_dispatchable$k=_dispatchable_1,_makeFlat$1=_makeFlat_1,_xchain=_xchain_1,map$6=map_1,chain$1=_curry2$1I(_dispatchable$k(["fantasy-land/chain","chain"],_xchain,function tt(et,rt){return typeof rt=="function"?function(nt){return et(rt(nt))(nt)}:_makeFlat$1(!1)(map$6(et,rt))})),chain_1=chain$1,_curry3$K=_curry3_1,clamp=_curry3$K(function tt(et,rt,nt){if(et>rt)throw new Error("min must not be greater than max in clamp(min, max, value)");return nt<et?et:nt>rt?rt:nt}),clamp_1=clamp;function _cloneRegExp$2(tt){return new RegExp(tt.source,tt.flags?tt.flags:(tt.global?"g":"")+(tt.ignoreCase?"i":"")+(tt.multiline?"m":"")+(tt.sticky?"y":"")+(tt.unicode?"u":"")+(tt.dotAll?"s":""))}var _cloneRegExp_1=_cloneRegExp$2,_cloneRegExp$1=_cloneRegExp_1,type=type_1;function _clone$3(tt,et,rt){if(rt||(rt=new _ObjectMap),_isPrimitive(tt))return tt;var nt=function(it){var st=rt.get(tt);if(st)return st;rt.set(tt,it);for(var dt in tt)Object.prototype.hasOwnProperty.call(tt,dt)&&(it[dt]=et?_clone$3(tt[dt],!0,rt):tt[dt]);return it};switch(type(tt)){case"Object":return nt(Object.create(Object.getPrototypeOf(tt)));case"Array":return nt([]);case"Date":return new Date(tt.valueOf());case"RegExp":return _cloneRegExp$1(tt);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return tt.slice();default:return tt}}var _clone_1=_clone$3;function _isPrimitive(tt){var et=typeof tt;return tt==null||et!="object"&&et!="function"}var _ObjectMap=function(){function tt(){this.map={},this.length=0}return tt.prototype.set=function(et,rt){const nt=this.hash(et);let at=this.map[nt];at||(this.map[nt]=at=[]),at.push([et,rt]),this.length+=1},tt.prototype.hash=function(et){let rt=[];for(var nt in et)rt.push(Object.prototype.toString.call(et[nt]));return rt.join()},tt.prototype.get=function(et){if(this.length<=180){for(const at in this.map){const it=this.map[at];for(let st=0;st<it.length;st+=1){const dt=it[st];if(dt[0]===et)return dt[1]}}return}const rt=this.hash(et),nt=this.map[rt];if(nt)for(let at=0;at<nt.length;at+=1){const it=nt[at];if(it[0]===et)return it[1]}},tt}(),_clone$2=_clone_1,_curry1$D=_curry1_1,clone$1=_curry1$D(function tt(et){return et!=null&&typeof et.clone=="function"?et.clone():_clone$2(et,!0)}),clone_1=clone$1,_curry2$1H=_curry2_1,_reduce$3=_reduce_1,collectBy=_curry2$1H(function tt(et,rt){var nt=_reduce$3(function(st,dt){var pt=et(dt);return st[pt]===void 0&&(st[pt]=[]),st[pt].push(dt),st},{},rt),at=[];for(var it in nt)at.push(nt[it]);return at}),collectBy_1=collectBy,_curry1$C=_curry1_1,comparator=_curry1$C(function tt(et){return function(rt,nt){return et(rt,nt)?-1:et(nt,rt)?1:0}}),comparator_1=comparator,_curry1$B=_curry1_1,not$2=_curry1$B(function tt(et){return!et}),not_1=not$2,lift$2=lift_1,not$1=not_1,complement$1=lift$2(not$1),complement_1=complement$1;function _pipe$1(tt,et){return function(){return et.call(this,tt.apply(this,arguments))}}var _pipe_1=_pipe$1,_isArray$c=_isArray$h;function _checkForMethod$5(tt,et){return function(){var rt=arguments.length;if(rt===0)return et();var nt=arguments[rt-1];return _isArray$c(nt)||typeof nt[tt]!="function"?et.apply(this,arguments):nt[tt].apply(nt,Array.prototype.slice.call(arguments,0,rt-1))}}var _checkForMethod_1=_checkForMethod$5,_checkForMethod$4=_checkForMethod_1,_curry3$J=_curry3_1,slice$a=_curry3$J(_checkForMethod$4("slice",function tt(et,rt,nt){return Array.prototype.slice.call(nt,et,rt)})),slice_1=slice$a,_checkForMethod$3=_checkForMethod_1,_curry1$A=_curry1_1,slice$9=slice_1,tail$2=_curry1$A(_checkForMethod$3("tail",slice$9(1,1/0))),tail_1=tail$2,_arity$7=_arity_1,_pipe=_pipe_1,reduce$4=reduce_1,tail$1=tail_1;function pipe$1(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return _arity$7(arguments[0].length,reduce$4(_pipe,arguments[0],tail$1(arguments)))}var pipe_1=pipe$1,_curry1$z=_curry1_1,_isString$4=_isString_1,reverse$2=_curry1$z(function tt(et){return _isString$4(et)?et.split("").reverse().join(""):Array.prototype.slice.call(et,0).reverse()}),reverse_1=reverse$2,pipe=pipe_1,reverse$1=reverse_1;function compose$1(){if(arguments.length===0)throw new Error("compose requires at least one argument");return pipe.apply(this,reverse$1(arguments))}var compose_1=compose$1,nth$4=nth_1,head$1=nth$4(0),head_1=head$1;function _identity$3(tt){return tt}var _identity_1=_identity$3,_curry1$y=_curry1_1,_identity$2=_identity_1,identity$4=_curry1$y(_identity$2),identity_1=identity$4,_arity$6=_arity_1,_curry2$1G=_curry2_1,head=head_1,_reduce$2=_reduce_1,tail=tail_1,identity$3=identity_1,pipeWith$1=_curry2$1G(function tt(et,rt){if(rt.length<=0)return identity$3;var nt=head(rt),at=tail(rt);return _arity$6(nt.length,function(){return _reduce$2(function(it,st){return et.call(this,st,it)},nt.apply(this,arguments),at)})}),pipeWith_1=pipeWith$1,_curry2$1F=_curry2_1,pipeWith=pipeWith_1,reverse=reverse_1,composeWith=_curry2$1F(function tt(et,rt){return pipeWith.apply(this,[et,reverse(rt)])}),composeWith_1=composeWith,_curry2$1E=_curry2_1,_isArray$b=_isArray$h,_isFunction$3=_isFunction_1,_isString$3=_isString_1,toString$4=toString_1,concat$2=_curry2$1E(function tt(et,rt){if(_isArray$b(et)){if(_isArray$b(rt))return et.concat(rt);throw new TypeError(toString$4(rt)+" is not an array")}if(_isString$3(et)){if(_isString$3(rt))return et+rt;throw new TypeError(toString$4(rt)+" is not a string")}if(et!=null&&_isFunction$3(et["fantasy-land/concat"]))return et["fantasy-land/concat"](rt);if(et!=null&&_isFunction$3(et.concat))return et.concat(rt);throw new TypeError(toString$4(et)+' does not have a method named "concat" or "fantasy-land/concat"')}),concat_1=concat$2,_arity$5=_arity_1,_curry1$x=_curry1_1,map$5=map_1,max$2=max_1,reduce$3=reduce_1,cond=_curry1$x(function tt(et){var rt=reduce$3(max$2,0,map$5(function(nt){return nt[0].length},et));return _arity$5(rt,function(){for(var nt=0;nt<et.length;){if(et[nt][0].apply(this,arguments))return et[nt][1].apply(this,arguments);nt+=1}})}),cond_1=cond,_curry1$w=_curry1_1,curryN$b=curryN_1,curry$2=_curry1$w(function tt(et){return curryN$b(et.length,et)}),curry_1=curry$2,_curry2$1D=_curry2_1,curry$1=curry_1,nAry$1=nAry_1,constructN$1=_curry2$1D(function tt(et,rt){if(et>10)throw new Error("Constructor with greater than ten arguments");return et===0?function(){return new rt}:curry$1(nAry$1(et,function(nt,at,it,st,dt,pt,mt,yt,Rt,Tt){switch(et){case 1:return new rt(nt);case 2:return new rt(nt,at);case 3:return new rt(nt,at,it);case 4:return new rt(nt,at,it,st);case 5:return new rt(nt,at,it,st,dt);case 6:return new rt(nt,at,it,st,dt,pt);case 7:return new rt(nt,at,it,st,dt,pt,mt);case 8:return new rt(nt,at,it,st,dt,pt,mt,yt);case 9:return new rt(nt,at,it,st,dt,pt,mt,yt,Rt);case 10:return new rt(nt,at,it,st,dt,pt,mt,yt,Rt,Tt)}}))}),constructN_1=constructN$1,_curry1$v=_curry1_1,constructN=constructN_1,construct=_curry1$v(function tt(et){return constructN(et.length,et)}),construct_1=construct,_curry2$1C=_curry2_1,_map$3=_map_1,curryN$a=curryN_1,max$1=max_1,pluck=pluck_1,reduce$2=reduce_1,converge$1=_curry2$1C(function tt(et,rt){return curryN$a(reduce$2(max$1,0,pluck("length",rt)),function(){var nt=arguments,at=this;return et.apply(at,_map$3(function(it){return it.apply(at,nt)},rt))})}),converge_1=converge$1,_reduce$1=_reduce_1,curry=curry_1,count=curry(function(tt,et){return _reduce$1(function(rt,nt){return tt(nt)?rt+1:rt},0,et)}),count_1=count,_clone$1=_clone_1,_has$b=_has_1,_xfBase$h=_xfBase$o,XReduceBy=function(){function tt(et,rt,nt,at){this.valueFn=et,this.valueAcc=rt,this.keyFn=nt,this.xf=at,this.inputs={}}return tt.prototype["@@transducer/init"]=_xfBase$h.init,tt.prototype["@@transducer/result"]=function(et){var rt;for(rt in this.inputs)if(_has$b(rt,this.inputs)&&(et=this.xf["@@transducer/step"](et,this.inputs[rt]),et["@@transducer/reduced"])){et=et["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](et)},tt.prototype["@@transducer/step"]=function(et,rt){var nt=this.keyFn(rt);return this.inputs[nt]=this.inputs[nt]||[nt,_clone$1(this.valueAcc,!1)],this.inputs[nt][1]=this.valueFn(this.inputs[nt][1],rt),et},tt}();function _xreduceBy$1(tt,et,rt){return function(nt){return new XReduceBy(tt,et,rt,nt)}}var _xreduceBy_1=_xreduceBy$1,_clone=_clone_1,_curryN$3=_curryN_1,_dispatchable$j=_dispatchable_1,_has$a=_has_1,_reduced$6=_reduced_1,_xReduce$4=_xReduce_1,_xreduceBy=_xreduceBy_1,_xwrap$2=_xwrap_1,reduceBy$3=_curryN$3(4,[],_dispatchable$j([],_xreduceBy,function tt(et,rt,nt,at){var it=_xwrap$2(function(st,dt){var pt=nt(dt),mt=et(_has$a(pt,st)?st[pt]:_clone(rt,!1),dt);return mt&&mt["@@transducer/reduced"]?_reduced$6(st):(st[pt]=mt,st)});return _xReduce$4(it,{},at)})),reduceBy_1=reduceBy$3,reduceBy$2=reduceBy_1,countBy=reduceBy$2(function(tt,et){return tt+1},0),countBy_1=countBy,add$2=add_1,dec=add$2(-1),dec_1=dec,_curry2$1B=_curry2_1,defaultTo$2=_curry2$1B(function tt(et,rt){return rt==null||rt!==rt?et:rt}),defaultTo_1=defaultTo$2,_curry3$I=_curry3_1,descend=_curry3$I(function tt(et,rt,nt){var at=et(rt),it=et(nt);return at>it?-1:at<it?1:0}),descend_1=descend,_includes$1=_includes_1,_Set$5=function(){function tt(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return tt.prototype.add=function(et){return!hasOrAdd(et,!0,this)},tt.prototype.has=function(et){return hasOrAdd(et,!1,this)},tt}();function hasOrAdd(tt,et,rt){var nt=typeof tt,at,it;switch(nt){case"string":case"number":return tt===0&&1/tt===-1/0?rt._items["-0"]?!0:(et&&(rt._items["-0"]=!0),!1):rt._nativeSet!==null?et?(at=rt._nativeSet.size,rt._nativeSet.add(tt),it=rt._nativeSet.size,it===at):rt._nativeSet.has(tt):nt in rt._items?tt in rt._items[nt]?!0:(et&&(rt._items[nt][tt]=!0),!1):(et&&(rt._items[nt]={},rt._items[nt][tt]=!0),!1);case"boolean":if(nt in rt._items){var st=tt?1:0;return rt._items[nt][st]?!0:(et&&(rt._items[nt][st]=!0),!1)}else return et&&(rt._items[nt]=tt?[!1,!0]:[!0,!1]),!1;case"function":return rt._nativeSet!==null?et?(at=rt._nativeSet.size,rt._nativeSet.add(tt),it=rt._nativeSet.size,it===at):rt._nativeSet.has(tt):nt in rt._items?_includes$1(tt,rt._items[nt])?!0:(et&&rt._items[nt].push(tt),!1):(et&&(rt._items[nt]=[tt]),!1);case"undefined":return rt._items[nt]?!0:(et&&(rt._items[nt]=!0),!1);case"object":if(tt===null)return rt._items.null?!0:(et&&(rt._items.null=!0),!1);default:return nt=Object.prototype.toString.call(tt),nt in rt._items?_includes$1(tt,rt._items[nt])?!0:(et&&rt._items[nt].push(tt),!1):(et&&(rt._items[nt]=[tt]),!1)}}var _Set_1=_Set$5,_curry2$1A=_curry2_1,_Set$4=_Set_1,difference$1=_curry2$1A(function tt(et,rt){for(var nt=[],at=0,it=et.length,st=rt.length,dt=new _Set$4,pt=0;pt<st;pt+=1)dt.add(rt[pt]);for(;at<it;)dt.add(et[at])&&(nt[nt.length]=et[at]),at+=1;return nt}),difference_1=difference$1,_includesWith$3=_includesWith_1,_curry3$H=_curry3_1,differenceWith$1=_curry3$H(function tt(et,rt,nt){for(var at=[],it=0,st=rt.length;it<st;)!_includesWith$3(et,rt[it],nt)&&!_includesWith$3(et,rt[it],at)&&at.push(rt[it]),it+=1;return at}),differenceWith_1=differenceWith$1,_curry3$G=_curry3_1,remove$1=_curry3$G(function tt(et,rt,nt){var at=Array.prototype.slice.call(nt,0);return at.splice(et,rt),at}),remove_1=remove$1,_isInteger$4=_isInteger$8,_isArray$a=_isArray$h,remove=remove_1;function _dissoc$1(tt,et){if(et==null)return et;if(_isInteger$4(tt)&&_isArray$a(et))return remove(tt,1,et);var rt={};for(var nt in et)rt[nt]=et[nt];return delete rt[tt],rt}var _dissoc_1=_dissoc$1,_curry2$1z=_curry2_1,_dissoc=_dissoc_1,_isInteger$3=_isInteger$8,_isArray$9=_isArray$h,assoc$1=assoc_1;function _shallowCloneObject(tt,et){if(_isInteger$3(tt)&&_isArray$9(et))return[].concat(et);var rt={};for(var nt in et)rt[nt]=et[nt];return rt}var dissocPath$1=_curry2$1z(function tt(et,rt){if(rt==null)return rt;switch(et.length){case 0:return rt;case 1:return _dissoc(et[0],rt);default:var nt=et[0],at=Array.prototype.slice.call(et,1);return rt[nt]==null?_shallowCloneObject(nt,rt):assoc$1(nt,tt(at,rt[nt]),rt)}}),dissocPath_1=dissocPath$1,_curry2$1y=_curry2_1,dissocPath=dissocPath_1,dissoc=_curry2$1y(function tt(et,rt){return dissocPath([et],rt)}),dissoc_1=dissoc,_curry2$1x=_curry2_1,divide=_curry2$1x(function tt(et,rt){return et/rt}),divide_1=divide,_xfBase$g=_xfBase$o,XDrop=function(){function tt(et,rt){this.xf=rt,this.n=et}return tt.prototype["@@transducer/init"]=_xfBase$g.init,tt.prototype["@@transducer/result"]=_xfBase$g.result,tt.prototype["@@transducer/step"]=function(et,rt){return this.n>0?(this.n-=1,et):this.xf["@@transducer/step"](et,rt)},tt}();function _xdrop$1(tt){return function(et){return new XDrop(tt,et)}}var _xdrop_1=_xdrop$1,_curry2$1w=_curry2_1,_dispatchable$i=_dispatchable_1,_xdrop=_xdrop_1,slice$8=slice_1,drop$1=_curry2$1w(_dispatchable$i(["drop"],_xdrop,function tt(et,rt){return slice$8(Math.max(0,et),1/0,rt)})),drop_1=drop$1,_reduced$5=_reduced_1,_xfBase$f=_xfBase$o,XTake=function(){function tt(et,rt){this.xf=rt,this.n=et,this.i=0}return tt.prototype["@@transducer/init"]=_xfBase$f.init,tt.prototype["@@transducer/result"]=_xfBase$f.result,tt.prototype["@@transducer/step"]=function(et,rt){this.i+=1;var nt=this.n===0?et:this.xf["@@transducer/step"](et,rt);return this.n>=0&&this.i>=this.n?_reduced$5(nt):nt},tt}();function _xtake$1(tt){return function(et){return new XTake(tt,et)}}var _xtake_1=_xtake$1,_curry2$1v=_curry2_1,_dispatchable$h=_dispatchable_1,_xtake=_xtake_1,slice$7=slice_1,take$2=_curry2$1v(_dispatchable$h(["take"],_xtake,function tt(et,rt){return slice$7(0,et<0?1/0:et,rt)})),take_1=take$2,take$1=take_1;function dropLast$1(tt,et){return take$1(tt<et.length?et.length-tt:0,et)}var _dropLast$1=dropLast$1,_xfBase$e=_xfBase$o,XDropLast=function(){function tt(et,rt){if(et<=0)return rt;this.xf=rt,this.pos=0,this.full=!1,this.acc=new Array(et)}return tt.prototype["@@transducer/init"]=_xfBase$e.init,tt.prototype["@@transducer/result"]=function(et){return this.acc=null,this.xf["@@transducer/result"](et)},tt.prototype["@@transducer/step"]=function(et,rt){return this.full&&(et=this.xf["@@transducer/step"](et,this.acc[this.pos])),this.store(rt),et},tt.prototype.store=function(et){this.acc[this.pos]=et,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},tt}();function _xdropLast$1(tt){return function(et){return new XDropLast(tt,et)}}var _xdropLast_1=_xdropLast$1,_curry2$1u=_curry2_1,_dispatchable$g=_dispatchable_1,_dropLast=_dropLast$1,_xdropLast=_xdropLast_1,dropLast=_curry2$1u(_dispatchable$g([],_xdropLast,_dropLast)),dropLast_1=dropLast,slice$6=slice_1;function dropLastWhile$1(tt,et){for(var rt=et.length-1;rt>=0&&tt(et[rt]);)rt-=1;return slice$6(0,rt+1,et)}var _dropLastWhile$1=dropLastWhile$1,_xfBase$d=_xfBase$o,_xReduce$3=_xReduce_1,XDropLastWhile=function(){function tt(et,rt){this.f=et,this.retained=[],this.xf=rt}return tt.prototype["@@transducer/init"]=_xfBase$d.init,tt.prototype["@@transducer/result"]=function(et){return this.retained=null,this.xf["@@transducer/result"](et)},tt.prototype["@@transducer/step"]=function(et,rt){return this.f(rt)?this.retain(et,rt):this.flush(et,rt)},tt.prototype.flush=function(et,rt){return et=_xReduce$3(this.xf,et,this.retained),this.retained=[],this.xf["@@transducer/step"](et,rt)},tt.prototype.retain=function(et,rt){return this.retained.push(rt),et},tt}();function _xdropLastWhile$1(tt){return function(et){return new XDropLastWhile(tt,et)}}var _xdropLastWhile_1=_xdropLastWhile$1,_curry2$1t=_curry2_1,_dispatchable$f=_dispatchable_1,_dropLastWhile=_dropLastWhile$1,_xdropLastWhile=_xdropLastWhile_1,dropLastWhile=_curry2$1t(_dispatchable$f([],_xdropLastWhile,_dropLastWhile)),dropLastWhile_1=dropLastWhile,_xfBase$c=_xfBase$o,XDropRepeatsWith=function(){function tt(et,rt){this.xf=rt,this.pred=et,this.lastValue=void 0,this.seenFirstValue=!1}return tt.prototype["@@transducer/init"]=_xfBase$c.init,tt.prototype["@@transducer/result"]=_xfBase$c.result,tt.prototype["@@transducer/step"]=function(et,rt){var nt=!1;return this.seenFirstValue?this.pred(this.lastValue,rt)&&(nt=!0):this.seenFirstValue=!0,this.lastValue=rt,nt?et:this.xf["@@transducer/step"](et,rt)},tt}();function _xdropRepeatsWith$3(tt){return function(et){return new XDropRepeatsWith(tt,et)}}var _xdropRepeatsWith_1=_xdropRepeatsWith$3,nth$3=nth_1,last$1=nth$3(-1),last_1=last$1,_curry2$1s=_curry2_1,_dispatchable$e=_dispatchable_1,_xdropRepeatsWith$2=_xdropRepeatsWith_1,last=last_1,dropRepeatsWith$2=_curry2$1s(_dispatchable$e([],_xdropRepeatsWith$2,function tt(et,rt){var nt=[],at=1,it=rt.length;if(it!==0)for(nt[0]=rt[0];at<it;)et(last(nt),rt[at])||(nt[nt.length]=rt[at]),at+=1;return nt})),dropRepeatsWith_1=dropRepeatsWith$2,_curry1$u=_curry1_1,_dispatchable$d=_dispatchable_1,_xdropRepeatsWith$1=_xdropRepeatsWith_1,dropRepeatsWith$1=dropRepeatsWith_1,equals$9=equals_1,dropRepeats=_curry1$u(_dispatchable$d([],function(){return _xdropRepeatsWith$1(equals$9)},dropRepeatsWith$1(equals$9))),dropRepeats_1=dropRepeats,_curry3$F=_curry3_1,equals$8=equals_1,eqBy$1=_curry3$F(function tt(et,rt,nt){return equals$8(et(rt),et(nt))}),eqBy_1=eqBy$1,_curry2$1r=_curry2_1,_dispatchable$c=_dispatchable_1,_xdropRepeatsWith=_xdropRepeatsWith_1,dropRepeatsWith=dropRepeatsWith_1,eqBy=eqBy_1,dropRepeatsBy=_curry2$1r(function(tt,et){return _dispatchable$c([],function(){return _xdropRepeatsWith(eqBy(tt))},dropRepeatsWith(eqBy(tt)))(et)}),dropRepeatsBy_1=dropRepeatsBy,_xfBase$b=_xfBase$o,XDropWhile=function(){function tt(et,rt){this.xf=rt,this.f=et}return tt.prototype["@@transducer/init"]=_xfBase$b.init,tt.prototype["@@transducer/result"]=_xfBase$b.result,tt.prototype["@@transducer/step"]=function(et,rt){if(this.f){if(this.f(rt))return et;this.f=null}return this.xf["@@transducer/step"](et,rt)},tt}();function _xdropWhile$1(tt){return function(et){return new XDropWhile(tt,et)}}var _xdropWhile_1=_xdropWhile$1,_curry2$1q=_curry2_1,_dispatchable$b=_dispatchable_1,_xdropWhile=_xdropWhile_1,slice$5=slice_1,dropWhile=_curry2$1q(_dispatchable$b(["dropWhile"],_xdropWhile,function tt(et,rt){for(var nt=0,at=rt.length;nt<at&&et(rt[nt]);)nt+=1;return slice$5(nt,1/0,rt)})),dropWhile_1=dropWhile,_curry2$1p=_curry2_1,or$1=_curry2$1p(function tt(et,rt){return et||rt}),or_1=or$1,_curry2$1o=_curry2_1,_isFunction$2=_isFunction_1,lift$1=lift_1,or=or_1,either=_curry2$1o(function tt(et,rt){return _isFunction$2(et)?function(){return et.apply(this,arguments)||rt.apply(this,arguments)}:lift$1(or)(et,rt)}),either_1=either;function _isTypedArray$1(tt){var et=Object.prototype.toString.call(tt);return et==="[object Uint8ClampedArray]"||et==="[object Int8Array]"||et==="[object Uint8Array]"||et==="[object Int16Array]"||et==="[object Uint16Array]"||et==="[object Int32Array]"||et==="[object Uint32Array]"||et==="[object Float32Array]"||et==="[object Float64Array]"||et==="[object BigInt64Array]"||et==="[object BigUint64Array]"}var _isTypedArray_1=_isTypedArray$1,_curry1$t=_curry1_1,_isArguments$1=_isArguments_1,_isArray$8=_isArray$h,_isObject$3=_isObject_1,_isString$2=_isString_1,_isTypedArray=_isTypedArray_1,empty$1=_curry1$t(function tt(et){return et!=null&&typeof et["fantasy-land/empty"]=="function"?et["fantasy-land/empty"]():et!=null&&et.constructor!=null&&typeof et.constructor["fantasy-land/empty"]=="function"?et.constructor["fantasy-land/empty"]():et!=null&&typeof et.empty=="function"?et.empty():et!=null&&et.constructor!=null&&typeof et.constructor.empty=="function"?et.constructor.empty():_isArray$8(et)?[]:_isString$2(et)?"":_isObject$3(et)?{}:_isArguments$1(et)?function(){return arguments}():_isTypedArray(et)?et.constructor.from(""):void 0}),empty_1=empty$1,_curry2$1n=_curry2_1,drop=drop_1,takeLast$1=_curry2$1n(function tt(et,rt){return drop(et>=0?rt.length-et:0,rt)}),takeLast_1=takeLast$1,_curry2$1m=_curry2_1,equals$7=equals_1,takeLast=takeLast_1,endsWith=_curry2$1m(function(tt,et){return equals$7(takeLast(tt.length,et),tt)}),endsWith_1=endsWith,_curry3$E=_curry3_1,equals$6=equals_1,eqProps=_curry3$E(function tt(et,rt,nt){return equals$6(rt[et],nt[et])}),eqProps_1=eqProps,_curry2$1l=_curry2_1,_isArray$7=_isArray$h,_isObject$2=_isObject_1,evolve=_curry2$1l(function tt(et,rt){if(!_isObject$2(rt)&&!_isArray$7(rt))return rt;var nt=rt instanceof Array?[]:{},at,it,st;for(it in rt)at=et[it],st=typeof at,nt[it]=st==="function"?at(rt[it]):at&&st==="object"?tt(at,rt[it]):rt[it];return nt}),evolve_1=evolve,_reduced$4=_reduced_1,_xfBase$a=_xfBase$o,XFind=function(){function tt(et,rt){this.xf=rt,this.f=et,this.found=!1}return tt.prototype["@@transducer/init"]=_xfBase$a.init,tt.prototype["@@transducer/result"]=function(et){return this.found||(et=this.xf["@@transducer/step"](et,void 0)),this.xf["@@transducer/result"](et)},tt.prototype["@@transducer/step"]=function(et,rt){return this.f(rt)&&(this.found=!0,et=_reduced$4(this.xf["@@transducer/step"](et,rt))),et},tt}();function _xfind$1(tt){return function(et){return new XFind(tt,et)}}var _xfind_1=_xfind$1,_curry2$1k=_curry2_1,_dispatchable$a=_dispatchable_1,_xfind=_xfind_1,find=_curry2$1k(_dispatchable$a(["find"],_xfind,function tt(et,rt){for(var nt=0,at=rt.length;nt<at;){if(et(rt[nt]))return rt[nt];nt+=1}})),find_1=find,_reduced$3=_reduced_1,_xfBase$9=_xfBase$o,XFindIndex=function(){function tt(et,rt){this.xf=rt,this.f=et,this.idx=-1,this.found=!1}return tt.prototype["@@transducer/init"]=_xfBase$9.init,tt.prototype["@@transducer/result"]=function(et){return this.found||(et=this.xf["@@transducer/step"](et,-1)),this.xf["@@transducer/result"](et)},tt.prototype["@@transducer/step"]=function(et,rt){return this.idx+=1,this.f(rt)&&(this.found=!0,et=_reduced$3(this.xf["@@transducer/step"](et,this.idx))),et},tt}();function _xfindIndex$1(tt){return function(et){return new XFindIndex(tt,et)}}var _xfindIndex_1=_xfindIndex$1,_curry2$1j=_curry2_1,_dispatchable$9=_dispatchable_1,_xfindIndex=_xfindIndex_1,findIndex=_curry2$1j(_dispatchable$9([],_xfindIndex,function tt(et,rt){for(var nt=0,at=rt.length;nt<at;){if(et(rt[nt]))return nt;nt+=1}return-1})),findIndex_1=findIndex,_xfBase$8=_xfBase$o,XFindLast=function(){function tt(et,rt){this.xf=rt,this.f=et}return tt.prototype["@@transducer/init"]=_xfBase$8.init,tt.prototype["@@transducer/result"]=function(et){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](et,this.last))},tt.prototype["@@transducer/step"]=function(et,rt){return this.f(rt)&&(this.last=rt),et},tt}();function _xfindLast$1(tt){return function(et){return new XFindLast(tt,et)}}var _xfindLast_1=_xfindLast$1,_curry2$1i=_curry2_1,_dispatchable$8=_dispatchable_1,_xfindLast=_xfindLast_1,findLast=_curry2$1i(_dispatchable$8([],_xfindLast,function tt(et,rt){for(var nt=rt.length-1;nt>=0;){if(et(rt[nt]))return rt[nt];nt-=1}})),findLast_1=findLast,_xfBase$7=_xfBase$o,XFindLastIndex=function(){function tt(et,rt){this.xf=rt,this.f=et,this.idx=-1,this.lastIdx=-1}return tt.prototype["@@transducer/init"]=_xfBase$7.init,tt.prototype["@@transducer/result"]=function(et){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](et,this.lastIdx))},tt.prototype["@@transducer/step"]=function(et,rt){return this.idx+=1,this.f(rt)&&(this.lastIdx=this.idx),et},tt}();function _xfindLastIndex$1(tt){return function(et){return new XFindLastIndex(tt,et)}}var _xfindLastIndex_1=_xfindLastIndex$1,_curry2$1h=_curry2_1,_dispatchable$7=_dispatchable_1,_xfindLastIndex=_xfindLastIndex_1,findLastIndex=_curry2$1h(_dispatchable$7([],_xfindLastIndex,function tt(et,rt){for(var nt=rt.length-1;nt>=0;){if(et(rt[nt]))return nt;nt-=1}return-1})),findLastIndex_1=findLastIndex,_curry1$s=_curry1_1,_makeFlat=_makeFlat_1,flatten=_curry1$s(_makeFlat(!0)),flatten_1=flatten,_curry1$r=_curry1_1,curryN$9=curryN_1,flip$1=_curry1$r(function tt(et){return curryN$9(et.length,function(rt,nt){var at=Array.prototype.slice.call(arguments,0);return at[0]=nt,at[1]=rt,et.apply(this,at)})}),flip_1=flip$1,_checkForMethod$2=_checkForMethod_1,_curry2$1g=_curry2_1,forEach=_curry2$1g(_checkForMethod$2("forEach",function tt(et,rt){for(var nt=rt.length,at=0;at<nt;)et(rt[at]),at+=1;return rt})),forEach_1=forEach,_curry2$1f=_curry2_1,keys$4=keys_1,forEachObjIndexed=_curry2$1f(function tt(et,rt){for(var nt=keys$4(rt),at=0;at<nt.length;){var it=nt[at];et(rt[it],it,rt),at+=1}return rt}),forEachObjIndexed_1=forEachObjIndexed,_curry1$q=_curry1_1,fromPairs=_curry1$q(function tt(et){for(var rt={},nt=0;nt<et.length;)rt[et[nt][0]]=et[nt][1],nt+=1;return rt}),fromPairs_1=fromPairs,_checkForMethod$1=_checkForMethod_1,_curry2$1e=_curry2_1,reduceBy$1=reduceBy_1,groupBy=_curry2$1e(_checkForMethod$1("groupBy",reduceBy$1(function(tt,et){return tt.push(et),tt},[]))),groupBy_1=groupBy,_curry2$1d=_curry2_1,groupWith=_curry2$1d(function(tt,et){for(var rt=[],nt=0,at=et.length;nt<at;){for(var it=nt+1;it<at&&tt(et[it-1],et[it]);)it+=1;rt.push(et.slice(nt,it)),nt=it}return rt}),groupWith_1=groupWith,_curry2$1c=_curry2_1,gt=_curry2$1c(function tt(et,rt){return et>rt}),gt_1=gt,_curry2$1b=_curry2_1,gte=_curry2$1b(function tt(et,rt){return et>=rt}),gte_1=gte,_curry2$1a=_curry2_1,_has$9=_has_1,isNil$3=isNil_1,hasPath$1=_curry2$1a(function tt(et,rt){if(et.length===0||isNil$3(rt))return!1;for(var nt=rt,at=0;at<et.length;)if(!isNil$3(nt)&&_has$9(et[at],nt))nt=nt[et[at]],at+=1;else return!1;return!0}),hasPath_1=hasPath$1,_curry2$19=_curry2_1,hasPath=hasPath_1,has$1=_curry2$19(function tt(et,rt){return hasPath([et],rt)}),has_1=has$1,_curry2$18=_curry2_1,isNil$2=isNil_1,hasIn=_curry2$18(function tt(et,rt){return isNil$2(rt)?!1:et in rt}),hasIn_1=hasIn,_objectIs=_objectIs_1,identical=function(tt,et){switch(arguments.length){case 0:return identical;case 1:return function(){return function rt(nt){switch(arguments.length){case 0:return rt;default:return _objectIs(tt,nt)}}}();default:return _objectIs(tt,et)}},identical_1=identical,_curry3$D=_curry3_1,curryN$8=curryN_1,ifElse=_curry3$D(function tt(et,rt,nt){return curryN$8(Math.max(et.length,rt.length,nt.length),function(){return et.apply(this,arguments)?rt.apply(this,arguments):nt.apply(this,arguments)})}),ifElse_1=ifElse,add$1=add_1,inc=add$1(1),inc_1=inc,_includes=_includes_1,_curry2$17=_curry2_1,includes=_curry2$17(_includes),includes_1=includes,reduceBy=reduceBy_1,indexBy=reduceBy(function(tt,et){return et},null),indexBy_1=indexBy,_curry2$16=_curry2_1,_indexOf=_indexOf_1,_isArray$6=_isArray$h,indexOf=_curry2$16(function tt(et,rt){return typeof rt.indexOf=="function"&&!_isArray$6(rt)?rt.indexOf(et):_indexOf(rt,et,0)}),indexOf_1=indexOf,slice$4=slice_1,init=slice$4(0,-1),init_1=init,_includesWith$2=_includesWith_1,_curry3$C=_curry3_1,_filter$1=_filter_1,innerJoin=_curry3$C(function tt(et,rt,nt){return _filter$1(function(at){return _includesWith$2(et,at,nt)},rt)}),innerJoin_1=innerJoin,_curry3$B=_curry3_1,insert=_curry3$B(function tt(et,rt,nt){et=et<nt.length&&et>=0?et:nt.length;var at=Array.prototype.slice.call(nt,0);return at.splice(et,0,rt),at}),insert_1=insert,_curry3$A=_curry3_1,insertAll=_curry3$A(function tt(et,rt,nt){return et=et<nt.length&&et>=0?et:nt.length,[].concat(Array.prototype.slice.call(nt,0,et),rt,Array.prototype.slice.call(nt,et))}),insertAll_1=insertAll,_Set$3=_Set_1,_xfBase$6=_xfBase$o,XUniqBy=function(){function tt(et,rt){this.xf=rt,this.f=et,this.set=new _Set$3}return tt.prototype["@@transducer/init"]=_xfBase$6.init,tt.prototype["@@transducer/result"]=_xfBase$6.result,tt.prototype["@@transducer/step"]=function(et,rt){return this.set.add(this.f(rt))?this.xf["@@transducer/step"](et,rt):et},tt}();function _xuniqBy$1(tt){return function(et){return new XUniqBy(tt,et)}}var _xuniqBy_1=_xuniqBy$1,_Set$2=_Set_1,_curry2$15=_curry2_1,_dispatchable$6=_dispatchable_1,_xuniqBy=_xuniqBy_1,uniqBy$1=_curry2$15(_dispatchable$6([],_xuniqBy,function(tt,et){for(var rt=new _Set$2,nt=[],at=0,it,st;at<et.length;)st=et[at],it=tt(st),rt.add(it)&&nt.push(st),at+=1;return nt})),uniqBy_1=uniqBy$1,identity$2=identity_1,uniqBy=uniqBy_1,uniq$2=uniqBy(identity$2),uniq_1=uniq$2,_curry2$14=_curry2_1,_filter=_filter_1,_Set$1=_Set_1,uniq$1=uniq_1,intersection=_curry2$14(function tt(et,rt){for(var nt=new _Set$1,at=0;at<et.length;at+=1)nt.add(et[at]);return uniq$1(_filter(nt.has.bind(nt),rt))}),intersection_1=intersection,_checkForMethod=_checkForMethod_1,_curry2$13=_curry2_1,intersperse=_curry2$13(_checkForMethod("intersperse",function tt(et,rt){for(var nt=[],at=0,it=rt.length;at<it;)at===it-1?nt.push(rt[at]):nt.push(rt[at],et),at+=1;return nt})),intersperse_1=intersperse,_has$8=_has_1;function _objectAssign$4(tt){if(tt==null)throw new TypeError("Cannot convert undefined or null to object");for(var et=Object(tt),rt=1,nt=arguments.length;rt<nt;){var at=arguments[rt];if(at!=null)for(var it in at)_has$8(it,at)&&(et[it]=at[it]);rt+=1}return et}var _objectAssign_1=typeof Object.assign=="function"?Object.assign:_objectAssign$4,_curry2$12=_curry2_1,objOf$1=_curry2$12(function tt(et,rt){var nt={};return nt[et]=rt,nt}),objOf_1=objOf$1,_objectAssign$3=_objectAssign_1,_identity$1=_identity_1,_isArrayLike$1=_isArrayLike_1,_isTransformer$2=_isTransformer_1,objOf=objOf_1,_stepCatArray={"@@transducer/init":Array,"@@transducer/step":function(tt,et){return tt.push(et),tt},"@@transducer/result":_identity$1},_stepCatString={"@@transducer/init":String,"@@transducer/step":function(tt,et){return tt+et},"@@transducer/result":_identity$1},_stepCatObject={"@@transducer/init":Object,"@@transducer/step":function(tt,et){return _objectAssign$3(tt,_isArrayLike$1(et)?objOf(et[0],et[1]):et)},"@@transducer/result":_identity$1};function _stepCat$1(tt){if(_isTransformer$2(tt))return tt;if(_isArrayLike$1(tt))return _stepCatArray;if(typeof tt=="string")return _stepCatString;if(typeof tt=="object")return _stepCatObject;throw new Error("Cannot create transformer for "+tt)}var _stepCat_1=_stepCat$1,_curry3$z=_curry3_1,_isTransformer$1=_isTransformer_1,_xReduce$2=_xReduce_1,_stepCat=_stepCat_1,into=_curry3$z(function tt(et,rt,nt){var at=rt(_isTransformer$1(et)?et:_stepCat(et));return _xReduce$2(at,at["@@transducer/init"](),nt)}),into_1=into,_curry1$p=_curry1_1,_has$7=_has_1,keys$3=keys_1,invert=_curry1$p(function tt(et){for(var rt=keys$3(et),nt=rt.length,at=0,it={};at<nt;){var st=rt[at],dt=et[st],pt=_has$7(dt,it)?it[dt]:it[dt]=[];pt[pt.length]=st,at+=1}return it}),invert_1=invert,_curry1$o=_curry1_1,keys$2=keys_1,invertObj=_curry1$o(function tt(et){for(var rt=keys$2(et),nt=rt.length,at=0,it={};at<nt;){var st=rt[at];it[et[st]]=st,at+=1}return it}),invertObj_1=invertObj,_curry2$11=_curry2_1,_isFunction$1=_isFunction_1,curryN$7=curryN_1,toString$3=toString_1,invoker$4=_curry2$11(function tt(et,rt){return curryN$7(et+1,function(){var nt=arguments[et];if(nt!=null&&_isFunction$1(nt[rt]))return nt[rt].apply(nt,Array.prototype.slice.call(arguments,0,et));throw new TypeError(toString$3(nt)+' does not have a method named "'+rt+'"')})}),invoker_1=invoker$4,_curry2$10=_curry2_1,is$2=_curry2$10(function tt(et,rt){return rt instanceof et||rt!=null&&(rt.constructor===et||et.name==="Object"&&typeof rt=="object")}),is_1=is$2,_curry1$n=_curry1_1,empty=empty_1,equals$5=equals_1,isEmpty=_curry1$n(function tt(et){return et!=null&&equals$5(et,empty(et))}),isEmpty_1=isEmpty,isNil$1=isNil_1,_curry1$m=_curry1_1,isNotNil=_curry1$m(function tt(et){return!isNil$1(et)}),isNotNil_1=isNotNil,invoker$3=invoker_1,join=invoker$3(1,"join"),join_1=join,_curry1$l=_curry1_1,converge=converge_1,juxt$1=_curry1$l(function tt(et){return converge(function(){return Array.prototype.slice.call(arguments,0)},et)}),juxt_1=juxt$1,_curry1$k=_curry1_1,keysIn=_curry1$k(function tt(et){var rt,nt=[];for(rt in et)nt[nt.length]=rt;return nt}),keysIn_1=keysIn,_curry2$$=_curry2_1,_isArray$5=_isArray$h,equals$4=equals_1,lastIndexOf=_curry2$$(function tt(et,rt){if(typeof rt.lastIndexOf=="function"&&!_isArray$5(rt))return rt.lastIndexOf(et);for(var nt=rt.length-1;nt>=0;){if(equals$4(rt[nt],et))return nt;nt-=1}return-1}),lastIndexOf_1=lastIndexOf;function _isNumber$2(tt){return Object.prototype.toString.call(tt)==="[object Number]"}var _isNumber_1=_isNumber$2,_curry1$j=_curry1_1,_isNumber$1=_isNumber_1,length$1=_curry1$j(function tt(et){return et!=null&&_isNumber$1(et.length)?et.length:NaN}),length_1=length$1,_curry2$_=_curry2_1,map$4=map_1,lens$3=_curry2$_(function tt(et,rt){return function(nt){return function(at){return map$4(function(it){return rt(it,at)},nt(et(at)))}}}),lens_1=lens$3,_curry3$y=_curry3_1,adjust=adjust_1,always$2=always_1,update$1=_curry3$y(function tt(et,rt,nt){return adjust(et,always$2(rt),nt)}),update_1=update$1,_curry1$i=_curry1_1,lens$2=lens_1,nth$2=nth_1,update=update_1,lensIndex=_curry1$i(function tt(et){return lens$2(nth$2(et),update(et))}),lensIndex_1=lensIndex,_curry2$Z=_curry2_1,_isInteger$2=_isInteger$8,nth$1=nth_1,paths$1=_curry2$Z(function tt(et,rt){return et.map(function(nt){for(var at=rt,it=0,st;it<nt.length;){if(at==null)return;st=nt[it],at=_isInteger$2(st)?nth$1(st,at):at[st],it+=1}return at})}),paths_1=paths$1,_curry2$Y=_curry2_1,paths=paths_1,path$5=_curry2$Y(function tt(et,rt){return paths([et],rt)[0]}),path_1=path$5,_curry1$h=_curry1_1,assocPath=assocPath_1,lens$1=lens_1,path$4=path_1,lensPath=_curry1$h(function tt(et){return lens$1(path$4(et),assocPath(et))}),lensPath_1=lensPath,_curry1$g=_curry1_1,assoc=assoc_1,lens=lens_1,prop$4=prop_1,lensProp=_curry1$g(function tt(et){return lens(prop$4(et),assoc(et))}),lensProp_1=lensProp,_curry2$X=_curry2_1,lt=_curry2$X(function tt(et,rt){return et<rt}),lt_1=lt,_curry2$W=_curry2_1,lte=_curry2$W(function tt(et,rt){return et<=rt}),lte_1=lte,_curry3$x=_curry3_1,mapAccum=_curry3$x(function tt(et,rt,nt){for(var at=0,it=nt.length,st=[],dt=[rt];at<it;)dt=et(dt[0],nt[at]),st[at]=dt[1],at+=1;return[dt[0],st]}),mapAccum_1=mapAccum,_curry3$w=_curry3_1,mapAccumRight=_curry3$w(function tt(et,rt,nt){for(var at=nt.length-1,it=[],st=[rt];at>=0;)st=et(st[0],nt[at]),it[at]=st[1],at-=1;return[st[0],it]}),mapAccumRight_1=mapAccumRight,_arrayReduce$1=_arrayReduce_1,_curry2$V=_curry2_1,keys$1=keys_1,mapObjIndexed=_curry2$V(function tt(et,rt){return _arrayReduce$1(function(nt,at){return nt[at]=et(rt[at],at,rt),nt},{},keys$1(rt))}),mapObjIndexed_1=mapObjIndexed,_curry2$U=_curry2_1,match=_curry2$U(function tt(et,rt){return rt.match(et)||[]}),match_1=match,_curry2$T=_curry2_1,_isInteger$1=_isInteger$8,mathMod=_curry2$T(function tt(et,rt){return _isInteger$1(et)?!_isInteger$1(rt)||rt<1?NaN:(et%rt+rt)%rt:NaN}),mathMod_1=mathMod,_curry3$v=_curry3_1,max=max_1,maxBy=_curry3$v(function tt(et,rt,nt){var at=et(nt);return max(et(rt),at)===at?nt:rt}),maxBy_1=maxBy,add=add_1,reduce$1=reduce_1,sum$1=reduce$1(add,0),sum_1=sum$1,_curry1$f=_curry1_1,sum=sum_1,mean$1=_curry1$f(function tt(et){return sum(et)/et.length}),mean_1=mean$1,_curry1$e=_curry1_1,mean=mean_1,median=_curry1$e(function tt(et){var rt=et.length;if(rt===0)return NaN;var nt=2-rt%2,at=(rt-nt)/2;return mean(Array.prototype.slice.call(et,0).sort(function(it,st){return it<st?-1:it>st?1:0}).slice(at,at+nt))}),median_1=median,_arity$4=_arity_1,_curry2$S=_curry2_1,_has$6=_has_1,memoizeWith=_curry2$S(function tt(et,rt){var nt={};return _arity$4(rt.length,function(){var at=et.apply(this,arguments);return _has$6(at,nt)||(nt[at]=rt.apply(this,arguments)),nt[at]})}),memoizeWith_1=memoizeWith,_objectAssign$2=_objectAssign_1,_curry1$d=_curry1_1,mergeAll=_curry1$d(function tt(et){return _objectAssign$2.apply(null,[{}].concat(et))}),mergeAll_1=mergeAll,_curry3$u=_curry3_1,_has$5=_has_1,mergeWithKey$2=_curry3$u(function tt(et,rt,nt){var at={},it;rt=rt||{},nt=nt||{};for(it in rt)_has$5(it,rt)&&(at[it]=_has$5(it,nt)?et(it,rt[it],nt[it]):rt[it]);for(it in nt)_has$5(it,nt)&&!_has$5(it,at)&&(at[it]=nt[it]);return at}),mergeWithKey_1=mergeWithKey$2,_curry3$t=_curry3_1,_isObject$1=_isObject_1,mergeWithKey$1=mergeWithKey_1,mergeDeepWithKey$3=_curry3$t(function tt(et,rt,nt){return mergeWithKey$1(function(at,it,st){return _isObject$1(it)&&_isObject$1(st)?tt(et,it,st):et(at,it,st)},rt,nt)}),mergeDeepWithKey_1=mergeDeepWithKey$3,_curry2$R=_curry2_1,mergeDeepWithKey$2=mergeDeepWithKey_1,mergeDeepLeft=_curry2$R(function tt(et,rt){return mergeDeepWithKey$2(function(nt,at,it){return at},et,rt)}),mergeDeepLeft_1=mergeDeepLeft,_curry2$Q=_curry2_1,mergeDeepWithKey$1=mergeDeepWithKey_1,mergeDeepRight$1=_curry2$Q(function tt(et,rt){return mergeDeepWithKey$1(function(nt,at,it){return it},et,rt)}),mergeDeepRight_1=mergeDeepRight$1,_curry3$s=_curry3_1,mergeDeepWithKey=mergeDeepWithKey_1,mergeDeepWith=_curry3$s(function tt(et,rt,nt){return mergeDeepWithKey(function(at,it,st){return et(it,st)},rt,nt)}),mergeDeepWith_1=mergeDeepWith,_objectAssign$1=_objectAssign_1,_curry2$P=_curry2_1,mergeLeft=_curry2$P(function tt(et,rt){return _objectAssign$1({},rt,et)}),mergeLeft_1=mergeLeft,_objectAssign=_objectAssign_1,_curry2$O=_curry2_1,mergeRight=_curry2$O(function tt(et,rt){return _objectAssign({},et,rt)}),mergeRight_1=mergeRight,_curry3$r=_curry3_1,mergeWithKey=mergeWithKey_1,mergeWith=_curry3$r(function tt(et,rt,nt){return mergeWithKey(function(at,it,st){return et(it,st)},rt,nt)}),mergeWith_1=mergeWith,_curry2$N=_curry2_1,toString$2=toString_1,min$1=_curry2$N(function tt(et,rt){if(et===rt)return et;function nt(pt,mt){if(pt<mt!=mt<pt)return mt<pt?mt:pt}var at=nt(et,rt);if(at!==void 0)return at;var it=nt(typeof et,typeof rt);if(it!==void 0)return it===typeof et?et:rt;var st=toString$2(et),dt=nt(st,toString$2(rt));return dt!==void 0?dt===st?et:rt:et}),min_1=min$1,_curry3$q=_curry3_1,min=min_1,minBy=_curry3$q(function tt(et,rt,nt){var at=et(nt);return min(et(rt),at)===at?nt:rt}),minBy_1=minBy,_isArray$4=_isArray$h,_isInteger=_isInteger$8;function _modify$1(tt,et,rt){if(_isInteger(tt)&&_isArray$4(rt)){var nt=[].concat(rt);return nt[tt]=et(nt[tt]),nt}var at={};for(var it in rt)at[it]=rt[it];return at[tt]=et(at[tt]),at}var _modify_1=_modify$1,_curry3$p=_curry3_1,_isArray$3=_isArray$h,_isObject=_isObject_1,_has$4=_has_1,_assoc$1=_assoc_1,_modify=_modify_1,modifyPath$1=_curry3$p(function tt(et,rt,nt){if(!_isObject(nt)&&!_isArray$3(nt))return nt;if(et.length===0)return rt(nt);var at=et[0];if(!_has$4(at,nt))return nt;if(et.length===1)return _modify(at,rt,nt);var it=tt(Array.prototype.slice.call(et,1),rt,nt[at]);return it===nt[at]?nt:_assoc$1(at,it,nt)}),modifyPath_1=modifyPath$1,_curry3$o=_curry3_1,modifyPath=modifyPath_1,modify=_curry3$o(function tt(et,rt,nt){return modifyPath([et],rt,nt)}),modify_1=modify,_curry2$M=_curry2_1,modulo=_curry2$M(function tt(et,rt){return et%rt}),modulo_1=modulo,_curry3$n=_curry3_1,move=_curry3$n(function(tt,et,rt){var nt=rt.length,at=rt.slice(),it=tt<0?nt+tt:tt,st=et<0?nt+et:et,dt=at.splice(it,1);return it<0||it>=rt.length||st<0||st>=rt.length?rt:[].concat(at.slice(0,st)).concat(dt).concat(at.slice(st,rt.length))}),move_1=move,_curry2$L=_curry2_1,multiply$1=_curry2$L(function tt(et,rt){return et*rt}),multiply_1=multiply$1,mergeDeepRight=mergeDeepRight_1,_curry2$K=_curry2_1,partialObject=_curry2$K((tt,et)=>rt=>tt.call(void 0,mergeDeepRight(et,rt))),partialObject_1=partialObject,_curry1$c=_curry1_1,negate=_curry1$c(function tt(et){return-et}),negate_1=negate,_complement=_complement_1,_curry2$J=_curry2_1,all=all_1,none=_curry2$J(function tt(et,rt){return all(_complement(et),rt)}),none_1=none,_curry1$b=_curry1_1,curryN$6=curryN_1,nth=nth_1,nthArg=_curry1$b(function tt(et){var rt=et<0?1:et+1;return curryN$6(rt,function(){return nth(et,arguments)})}),nthArg_1=nthArg,_curry3$m=_curry3_1,o$1=_curry3$m(function tt(et,rt,nt){return et(rt(nt))}),o_1=o$1,_curry2$I=_curry2_1,of=_curry2$I(function tt(et,rt){return typeof et["fantasy-land/of"]=="function"?et["fantasy-land/of"](rt):typeof et.of=="function"?et.of(rt):[rt]}),of_1=of,_curry2$H=_curry2_1,omit=_curry2$H(function tt(et,rt){for(var nt={},at={},it=0,st=et.length;it<st;)at[et[it]]=1,it+=1;for(var dt in rt)at.hasOwnProperty(dt)||(nt[dt]=rt[dt]);return nt}),omit_1=omit,curryN$5=_curryN_1,on=curryN$5(4,[],function tt(et,rt,nt,at){return et(rt(nt),rt(at))}),on_1=on,_arity$3=_arity_1,_curry1$a=_curry1_1,once=_curry1$a(function tt(et){var rt=!1,nt;return _arity$3(et.length,function(){return rt||(rt=!0,nt=et.apply(this,arguments)),nt})}),once_1=once,_isFunction=_isFunction_1,_toString=_toString_1;function _assertPromise$2(tt,et){if(et==null||!_isFunction(et.then))throw new TypeError("`"+tt+"` expected a Promise, received "+_toString(et,[]))}var _assertPromise_1=_assertPromise$2,_curry2$G=_curry2_1,_assertPromise$1=_assertPromise_1,otherwise=_curry2$G(function tt(et,rt){return _assertPromise$1("otherwise",rt),rt.then(null,et)}),otherwise_1=otherwise,_curry3$l=_curry3_1,Identity=function(tt){return{value:tt,map:function(et){return Identity(et(tt))}}},over$1=_curry3$l(function tt(et,rt,nt){return et(function(at){return Identity(rt(at))})(nt).value}),over_1=over$1,_curry2$F=_curry2_1,pair=_curry2$F(function tt(et,rt){return[et,rt]}),pair_1=pair,_arity$2=_arity_1,_curry2$E=_curry2_1;function _createPartialApplicator$2(tt){return _curry2$E(function(et,rt){return _arity$2(Math.max(0,et.length-rt.length),function(){return et.apply(this,tt(rt,arguments))})})}var _createPartialApplicator_1=_createPartialApplicator$2,_concat$6=_concat_1,_createPartialApplicator$1=_createPartialApplicator_1,partial=_createPartialApplicator$1(_concat$6),partial_1=partial,_concat$5=_concat_1,_createPartialApplicator=_createPartialApplicator_1,flip=flip_1,partialRight=_createPartialApplicator(flip(_concat$5)),partialRight_1=partialRight,filter=filter_1,juxt=juxt_1,reject$1=reject_1,partition=juxt([filter,reject$1]),partition_1=partition,_curry3$k=_curry3_1,equals$3=equals_1,path$3=path_1,pathEq=_curry3$k(function tt(et,rt,nt){return equals$3(path$3(rt,nt),et)}),pathEq_1=pathEq,_curry3$j=_curry3_1,defaultTo$1=defaultTo_1,path$2=path_1,pathOr=_curry3$j(function tt(et,rt,nt){return defaultTo$1(et,path$2(rt,nt))}),pathOr_1=pathOr,_curry3$i=_curry3_1,path$1=path_1,pathSatisfies=_curry3$i(function tt(et,rt,nt){return et(path$1(rt,nt))}),pathSatisfies_1=pathSatisfies,_curry2$D=_curry2_1,pick=_curry2$D(function tt(et,rt){for(var nt={},at=0;at<et.length;)et[at]in rt&&(nt[et[at]]=rt[et[at]]),at+=1;return nt}),pick_1=pick,_curry2$C=_curry2_1,pickAll$1=_curry2$C(function tt(et,rt){for(var nt={},at=0,it=et.length;at<it;){var st=et[at];nt[st]=rt[st],at+=1}return nt}),pickAll_1=pickAll$1,_curry2$B=_curry2_1,pickBy=_curry2$B(function tt(et,rt){var nt={};for(var at in rt)et(rt[at],at,rt)&&(nt[at]=rt[at]);return nt}),pickBy_1=pickBy,_concat$4=_concat_1,_curry2$A=_curry2_1,prepend$1=_curry2$A(function tt(et,rt){return _concat$4([et],rt)}),prepend_1=prepend$1,multiply=multiply_1,reduce=reduce_1,product=reduce(multiply,1),product_1=product,_curry2$z=_curry2_1,curryN$4=curryN_1,useWith$1=_curry2$z(function tt(et,rt){return curryN$4(rt.length,function(){for(var nt=[],at=0;at<rt.length;)nt.push(rt[at].call(this,arguments[at])),at+=1;return et.apply(this,nt.concat(Array.prototype.slice.call(arguments,rt.length)))})}),useWith_1=useWith$1,_map$2=_map_1,identity$1=identity_1,pickAll=pickAll_1,useWith=useWith_1,project=useWith(_map$2,[pickAll,identity$1]),project_1=project;function _promap$2(tt,et,rt){return function(nt){return et(rt(tt(nt)))}}var _promap_1=_promap$2,_xfBase$5=_xfBase$o,_promap$1=_promap_1,XPromap=function(){function tt(et,rt,nt){this.xf=nt,this.f=et,this.g=rt}return tt.prototype["@@transducer/init"]=_xfBase$5.init,tt.prototype["@@transducer/result"]=_xfBase$5.result,tt.prototype["@@transducer/step"]=function(et,rt){return this.xf["@@transducer/step"](et,_promap$1(this.f,this.g,rt))},tt}();function _xpromap$1(tt,et){return function(rt){return new XPromap(tt,et,rt)}}var _xpromap_1=_xpromap$1,_curry3$h=_curry3_1,_dispatchable$5=_dispatchable_1,_promap=_promap_1,_xpromap=_xpromap_1,promap=_curry3$h(_dispatchable$5(["fantasy-land/promap","promap"],_xpromap,_promap)),promap_1=promap,_curry3$g=_curry3_1,prop$3=prop_1,equals$2=equals_1,propEq=_curry3$g(function tt(et,rt,nt){return equals$2(et,prop$3(rt,nt))}),propEq_1=propEq,_curry3$f=_curry3_1,prop$2=prop_1,is$1=is_1,propIs=_curry3$f(function tt(et,rt,nt){return is$1(et,prop$2(rt,nt))}),propIs_1=propIs,_curry3$e=_curry3_1,defaultTo=defaultTo_1,prop$1=prop_1,propOr=_curry3$e(function tt(et,rt,nt){return defaultTo(et,prop$1(rt,nt))}),propOr_1=propOr,_curry3$d=_curry3_1,prop=prop_1,propSatisfies=_curry3$d(function tt(et,rt,nt){return et(prop(rt,nt))}),propSatisfies_1=propSatisfies,_curry2$y=_curry2_1,path=path_1,props=_curry2$y(function tt(et,rt){return et.map(function(nt){return path([nt],rt)})}),props_1=props,_curry2$x=_curry2_1,_isNumber=_isNumber_1,range=_curry2$x(function tt(et,rt){if(!(_isNumber(et)&&_isNumber(rt)))throw new TypeError("Both arguments to range must be numbers");for(var nt=[],at=et;at<rt;)nt.push(at),at+=1;return nt}),range_1=range,_curry3$c=_curry3_1,reduceRight$1=_curry3$c(function tt(et,rt,nt){for(var at=nt.length-1;at>=0;){if(rt=et(nt[at],rt),rt&&rt["@@transducer/reduced"]){rt=rt["@@transducer/value"];break}at-=1}return rt}),reduceRight_1=reduceRight$1,_curryN$2=_curryN_1,_xReduce$1=_xReduce_1,_xwrap$1=_xwrap_1,_reduced$2=_reduced_1,reduceWhile=_curryN$2(4,[],function tt(et,rt,nt,at){var it=_xwrap$1(function(st,dt){return et(st,dt)?rt(st,dt):_reduced$2(st)});return _xReduce$1(it,nt,at)}),reduceWhile_1=reduceWhile,_curry1$9=_curry1_1,_reduced$1=_reduced_1,reduced=_curry1$9(_reduced$1),reduced_1=reduced,_curry2$w=_curry2_1,times$1=_curry2$w(function tt(et,rt){var nt=Number(rt),at=0,it;if(nt<0||isNaN(nt))throw new RangeError("n must be a non-negative number");for(it=[];at<nt;)it.push(et(at)),at+=1;return it}),times_1=times$1,_curry2$v=_curry2_1,always$1=always_1,times=times_1,repeat=_curry2$v(function tt(et,rt){return times(always$1(et),rt)}),repeat_1=repeat,_curry3$b=_curry3_1,replace=_curry3$b(function tt(et,rt,nt){return nt.replace(et,rt)}),replace_1=replace,_curry3$a=_curry3_1,_xfBase$4=_xfBase$o,tInit="@@transducer/init",tStep="@@transducer/step",XScan=function(){function tt(et,rt,nt){this.xf=nt,this.f=et,this.acc=rt}return tt.prototype[tInit]=function(){return this.xf[tStep](this.xf[tInit](),this.acc)},tt.prototype["@@transducer/result"]=_xfBase$4.result,tt.prototype[tStep]=function(et,rt){return et["@@transducer/reduced"]?et:(this.acc=this.f(this.acc,rt),this.xf[tStep](et,this.acc))},tt}(),_xscan$1=_curry3$a(function tt(et,rt,nt){return new XScan(et,rt,nt)}),_xscan_1=_xscan$1,_curry3$9=_curry3_1,_dispatchable$4=_dispatchable_1,_xscan=_xscan_1,scan=_curry3$9(_dispatchable$4([],_xscan,function tt(et,rt,nt){for(var at=0,it=nt.length,st=[rt];at<it;)rt=et(rt,nt[at]),st[at+1]=rt,at+=1;return st})),scan_1=scan,_curry2$u=_curry2_1,ap$1=ap_1,map$3=map_1,prepend=prepend_1,reduceRight=reduceRight_1,identity=_identity_1,sequence$1=_curry2$u(function tt(et,rt){var nt=typeof et["fantasy-land/of"]=="function"?et["fantasy-land/of"]:typeof et.of=="function"?et.of:et,at={"fantasy-land/of":nt};return typeof rt["fantasy-land/traverse"]=="function"?rt["fantasy-land/traverse"](at,identity):typeof rt.traverse=="function"?rt.traverse(at,identity):reduceRight(function(it,st){return ap$1(map$3(prepend,it),st)},nt([]),rt)}),sequence_1=sequence$1,_curry3$8=_curry3_1,always=always_1,over=over_1,set$1=_curry3$8(function tt(et,rt,nt){return over(et,always(rt),nt)}),set_1=set$1,_curry2$t=_curry2_1,sort=_curry2$t(function tt(et,rt){return Array.prototype.slice.call(rt,0).sort(et)}),sort_1=sort,_curry2$s=_curry2_1,sortBy=_curry2$s(function tt(et,rt){return Array.prototype.slice.call(rt,0).sort(function(nt,at){var it=et(nt),st=et(at);return it<st?-1:it>st?1:0})}),sortBy_1=sortBy,_curry2$r=_curry2_1,sortWith=_curry2$r(function tt(et,rt){return Array.prototype.slice.call(rt,0).sort(function(nt,at){for(var it=0,st=0;it===0&&st<et.length;)it=et[st](nt,at),st+=1;return it})}),sortWith_1=sortWith,invoker$2=invoker_1,split=invoker$2(1,"split"),split_1=split,_curry2$q=_curry2_1,length=length_1,slice$3=slice_1,splitAt=_curry2$q(function tt(et,rt){return[slice$3(0,et,rt),slice$3(et,length(rt),rt)]}),splitAt_1=splitAt,_curry2$p=_curry2_1,slice$2=slice_1,splitEvery=_curry2$p(function tt(et,rt){if(et<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var nt=[],at=0;at<rt.length;)nt.push(slice$2(at,at+=et,rt));return nt}),splitEvery_1=splitEvery,_curry2$o=_curry2_1,splitWhen=_curry2$o(function tt(et,rt){for(var nt=0,at=rt.length,it=[];nt<at&&!et(rt[nt]);)it.push(rt[nt]),nt+=1;return[it,Array.prototype.slice.call(rt,nt)]}),splitWhen_1=splitWhen,_curryN$1=_curryN_1,splitWhenever=_curryN$1(2,[],function tt(et,rt){for(var nt=[],at=[],it=0;it<rt.length;it=it+1)et(rt[it])||at.push(rt[it]),(it<rt.length-1&&et(rt[it+1])||it===rt.length-1)&&at.length>0&&(nt.push(at),at=[]);return nt}),splitWhenever_1=splitWhenever,_curry2$n=_curry2_1,equals$1=equals_1,take=take_1,startsWith=_curry2$n(function(tt,et){return equals$1(take(tt.length,et),tt)}),startsWith_1=startsWith,_curry2$m=_curry2_1,subtract=_curry2$m(function tt(et,rt){return Number(et)-Number(rt)}),subtract_1=subtract,_curry3$7=_curry3_1,_isArray$2=_isArray$h,_isString$1=_isString_1,clone=clone_1,swapObject=function(tt,et,rt){var nt=clone(rt),at=Object.getOwnPropertyNames(nt);if(at.includes(tt)&&at.includes(et)){var it=nt[tt];nt[tt]=nt[et],nt[et]=it}return nt},swapList=function(tt,et,rt){var nt=rt.length,at=rt.slice(),it=tt<0?nt+tt:tt,st=et<0?nt+et:et,dt=Math.min(it,st),pt=Math.max(it,st);return it<0||it>nt||st<0||st>nt||it===st||(at=[].concat(at.slice(0,dt)).concat([at[pt]]).concat(at.slice(dt+1,pt)).concat([at[dt]]).concat(at.slice(pt+1,nt))),at},swapString=function(tt,et,rt){var nt=swapList(tt,et,rt);return _isArray$2(nt)?nt.join(""):nt},swap=_curry3$7(function(tt,et,rt){return _isArray$2(rt)?swapList(tt,et,rt):_isString$1(rt)?swapString(tt,et,rt):swapObject(tt,et,rt)}),swap_1=swap,_curry2$l=_curry2_1,concat$1=concat_1,difference=difference_1,symmetricDifference=_curry2$l(function tt(et,rt){return concat$1(difference(et,rt),difference(rt,et))}),symmetricDifference_1=symmetricDifference,_curry3$6=_curry3_1,concat=concat_1,differenceWith=differenceWith_1,symmetricDifferenceWith=_curry3$6(function tt(et,rt,nt){return concat(differenceWith(et,rt,nt),differenceWith(et,nt,rt))}),symmetricDifferenceWith_1=symmetricDifferenceWith,_curry2$k=_curry2_1,slice$1=slice_1,takeLastWhile=_curry2$k(function tt(et,rt){for(var nt=rt.length-1;nt>=0&&et(rt[nt]);)nt-=1;return slice$1(nt+1,1/0,rt)}),takeLastWhile_1=takeLastWhile,_reduced=_reduced_1,_xfBase$3=_xfBase$o,XTakeWhile=function(){function tt(et,rt){this.xf=rt,this.f=et}return tt.prototype["@@transducer/init"]=_xfBase$3.init,tt.prototype["@@transducer/result"]=_xfBase$3.result,tt.prototype["@@transducer/step"]=function(et,rt){return this.f(rt)?this.xf["@@transducer/step"](et,rt):_reduced(et)},tt}();function _xtakeWhile$1(tt){return function(et){return new XTakeWhile(tt,et)}}var _xtakeWhile_1=_xtakeWhile$1,_curry2$j=_curry2_1,_dispatchable$3=_dispatchable_1,_xtakeWhile=_xtakeWhile_1,slice=slice_1,takeWhile=_curry2$j(_dispatchable$3(["takeWhile"],_xtakeWhile,function tt(et,rt){for(var nt=0,at=rt.length;nt<at&&et(rt[nt]);)nt+=1;return slice(0,nt,rt)})),takeWhile_1=takeWhile,_xfBase$2=_xfBase$o,XTap=function(){function tt(et,rt){this.xf=rt,this.f=et}return tt.prototype["@@transducer/init"]=_xfBase$2.init,tt.prototype["@@transducer/result"]=_xfBase$2.result,tt.prototype["@@transducer/step"]=function(et,rt){return this.f(rt),this.xf["@@transducer/step"](et,rt)},tt}();function _xtap$1(tt){return function(et){return new XTap(tt,et)}}var _xtap_1=_xtap$1,_curry2$i=_curry2_1,_dispatchable$2=_dispatchable_1,_xtap=_xtap_1,tap=_curry2$i(_dispatchable$2([],_xtap,function tt(et,rt){return et(rt),rt})),tap_1=tap;function _isRegExp$1(tt){return Object.prototype.toString.call(tt)==="[object RegExp]"}var _isRegExp_1=_isRegExp$1,_cloneRegExp=_cloneRegExp_1,_curry2$h=_curry2_1,_isRegExp=_isRegExp_1,toString$1=toString_1,test=_curry2$h(function tt(et,rt){if(!_isRegExp(et))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+toString$1(et));return _cloneRegExp(et).test(rt)}),test_1=test,_curry2$g=_curry2_1,_assertPromise=_assertPromise_1,andThen=_curry2$g(function tt(et,rt){return _assertPromise("andThen",rt),rt.then(et)}),andThen_1=andThen,invoker$1=invoker_1,toLower=invoker$1(0,"toLowerCase"),toLower_1=toLower,_curry1$8=_curry1_1,_has$3=_has_1,toPairs=_curry1$8(function tt(et){var rt=[];for(var nt in et)_has$3(nt,et)&&(rt[rt.length]=[nt,et[nt]]);return rt}),toPairs_1=toPairs,_curry1$7=_curry1_1,toPairsIn=_curry1$7(function tt(et){var rt=[];for(var nt in et)rt[rt.length]=[nt,et[nt]];return rt}),toPairsIn_1=toPairsIn,invoker=invoker_1,toUpper=invoker(0,"toUpperCase"),toUpper_1=toUpper,_xReduce=_xReduce_1,_xwrap=_xwrap_1,curryN$3=curryN_1,transduce=curryN$3(4,function tt(et,rt,nt,at){return _xReduce(et(typeof rt=="function"?_xwrap(rt):rt),nt,at)}),transduce_1=transduce,_curry1$6=_curry1_1,transpose=_curry1$6(function tt(et){for(var rt=0,nt=[];rt<et.length;){for(var at=et[rt],it=0;it<at.length;)typeof nt[it]>"u"&&(nt[it]=[]),nt[it].push(at[it]),it+=1;rt+=1}return nt}),transpose_1=transpose,_curry3$5=_curry3_1,map$2=map_1,sequence=sequence_1,traverse=_curry3$5(function tt(et,rt,nt){var at=typeof et["fantasy-land/of"]=="function"?et["fantasy-land/of"]:typeof et.of=="function"?et.of:et,it={"fantasy-land/of":at};return typeof nt["fantasy-land/traverse"]=="function"?nt["fantasy-land/traverse"](it,rt):typeof nt.traverse=="function"?nt.traverse(it,rt):sequence(it,map$2(rt,nt))}),traverse_1=traverse,_curry1$5=_curry1_1,ws=`	
\v\f\r                　\u2028\u2029\uFEFF`,zeroWidth="​",hasProtoTrim=typeof String.prototype.trim=="function",trim=_curry1$5(!hasProtoTrim||ws.trim()||!zeroWidth.trim()?function tt(et){var rt=new RegExp("^["+ws+"]["+ws+"]*"),nt=new RegExp("["+ws+"]["+ws+"]*$");return et.replace(rt,"").replace(nt,"")}:function tt(et){return et.trim()}),trim_1=trim,_arity$1=_arity_1,_concat$3=_concat_1,_curry2$f=_curry2_1,tryCatch=_curry2$f(function tt(et,rt){return _arity$1(et.length,function(){try{return et.apply(this,arguments)}catch(nt){return rt.apply(this,_concat$3([nt],arguments))}})}),tryCatch_1=tryCatch,_curry1$4=_curry1_1,unapply=_curry1$4(function tt(et){return function(){return et(Array.prototype.slice.call(arguments,0))}}),unapply_1=unapply,_curry1$3=_curry1_1,nAry=nAry_1,unary=_curry1$3(function tt(et){return nAry(1,et)}),unary_1=unary,_curry2$e=_curry2_1,curryN$2=curryN_1,uncurryN=_curry2$e(function tt(et,rt){return curryN$2(et,function(){for(var nt=1,at=rt,it=0,st;nt<=et&&typeof at=="function";)st=nt===et?arguments.length:it+at.length,at=at.apply(this,Array.prototype.slice.call(arguments,it,st)),nt+=1,it=st;return at})}),uncurryN_1=uncurryN,_curry2$d=_curry2_1,unfold=_curry2$d(function tt(et,rt){for(var nt=et(rt),at=[];nt&&nt.length;)at[at.length]=nt[0],nt=et(nt[1]);return at}),unfold_1=unfold,_concat$2=_concat_1,_curry2$c=_curry2_1,compose=compose_1,uniq=uniq_1,union=_curry2$c(compose(uniq,_concat$2)),union_1=union,_includesWith$1=_includesWith_1,_xfBase$1=_xfBase$o,XUniqWith=function(){function tt(et,rt){this.xf=rt,this.pred=et,this.items=[]}return tt.prototype["@@transducer/init"]=_xfBase$1.init,tt.prototype["@@transducer/result"]=_xfBase$1.result,tt.prototype["@@transducer/step"]=function(et,rt){return _includesWith$1(this.pred,rt,this.items)?et:(this.items.push(rt),this.xf["@@transducer/step"](et,rt))},tt}();function _xuniqWith$1(tt){return function(et){return new XUniqWith(tt,et)}}var _xuniqWith_1=_xuniqWith$1,_curry2$b=_curry2_1,_dispatchable$1=_dispatchable_1,_includesWith=_includesWith_1,_xuniqWith=_xuniqWith_1,uniqWith$1=_curry2$b(_dispatchable$1([],_xuniqWith,function(tt,et){for(var rt=0,nt=et.length,at=[],it;rt<nt;)it=et[rt],_includesWith(tt,it,at)||(at[at.length]=it),rt+=1;return at})),uniqWith_1=uniqWith$1,_concat$1=_concat_1,_curry3$4=_curry3_1,uniqWith=uniqWith_1,unionWith=_curry3$4(function tt(et,rt,nt){return uniqWith(et,_concat$1(rt,nt))}),unionWith_1=unionWith,_curry3$3=_curry3_1,unless=_curry3$3(function tt(et,rt,nt){return et(nt)?nt:rt(nt)}),unless_1=unless,_identity=_identity_1,chain=chain_1,unnest=chain(_identity),unnest_1=unnest,_curry3$2=_curry3_1,until=_curry3$2(function tt(et,rt,nt){for(var at=nt;!et(at);)at=rt(at);return at}),until_1=until,_curry2$a=_curry2_1,_isArray$1=_isArray$h,_map$1=_map_1,_assoc=_assoc_1,unwind=_curry2$a(function(tt,et){return tt in et&&_isArray$1(et[tt])?_map$1(function(rt){return _assoc(tt,rt,et)},et[tt]):[et]}),unwind_1=unwind,_curry1$2=_curry1_1,valuesIn=_curry1$2(function tt(et){var rt,nt=[];for(rt in et)nt[nt.length]=et[rt];return nt}),valuesIn_1=valuesIn,_curry2$9=_curry2_1,Const=function(tt){return{value:tt,"fantasy-land/map":function(){return this}}},view=_curry2$9(function tt(et,rt){return et(Const)(rt).value}),view_1=view,_curry3$1=_curry3_1,when=_curry3$1(function tt(et,rt,nt){return et(nt)?rt(nt):nt}),when_1=when,_curry2$8=_curry2_1,_has$2=_has_1,where$1=_curry2$8(function tt(et,rt){for(var nt in et)if(_has$2(nt,et)&&!et[nt](rt[nt]))return!1;return!0}),where_1=where$1,_curry2$7=_curry2_1,_has$1=_has_1,whereAny=_curry2$7(function tt(et,rt){for(var nt in et)if(_has$1(nt,et)&&et[nt](rt[nt]))return!0;return!1}),whereAny_1=whereAny,_curry2$6=_curry2_1,equals=equals_1,map$1=map_1,where=where_1,whereEq=_curry2$6(function tt(et,rt){return where(map$1(equals,et),rt)}),whereEq_1=whereEq,_curry2$5=_curry2_1,_Set=_Set_1,reject=reject_1,without=_curry2$5(function tt(et,rt){for(var nt=new _Set,at=0;at<et.length;at+=1)nt.add(et[at]);return reject(nt.has.bind(nt),rt)}),without_1=without,_curry2$4=_curry2_1,xor=_curry2$4(function tt(et,rt){return!!(!et^!rt)}),xor_1=xor,_curry2$3=_curry2_1,xprod=_curry2$3(function tt(et,rt){for(var nt=0,at=et.length,it,st=rt.length,dt=[];nt<at;){for(it=0;it<st;)dt[dt.length]=[et[nt],rt[it]],it+=1;nt+=1}return dt}),xprod_1=xprod,_curry2$2=_curry2_1,zip=_curry2$2(function tt(et,rt){for(var nt=[],at=0,it=Math.min(et.length,rt.length);at<it;)nt[at]=[et[at],rt[at]],at+=1;return nt}),zip_1=zip,_curry2$1=_curry2_1,zipObj=_curry2$1(function tt(et,rt){for(var nt=0,at=Math.min(et.length,rt.length),it={};nt<at;)it[et[nt]]=rt[nt],nt+=1;return it}),zipObj_1=zipObj,_curry3=_curry3_1,zipWith=_curry3(function tt(et,rt,nt){for(var at=[],it=0,st=Math.min(rt.length,nt.length);it<st;)at[it]=et(rt[it],nt[it]),it+=1;return at}),zipWith_1=zipWith,curryN$1=curryN_1,_curry1$1=_curry1_1,thunkify=_curry1$1(function tt(et){return curryN$1(et.length,function(){var nt=arguments;return function(){return et.apply(this,nt)}})}),thunkify_1=thunkify;src.exports={};src.exports.F=F_1;src.exports.T=T_1;src.exports.__=__;src.exports.add=add_1;src.exports.addIndex=addIndex_1;src.exports.addIndexRight=addIndexRight_1;src.exports.adjust=adjust_1;src.exports.all=all_1;src.exports.allPass=allPass_1;src.exports.always=always_1;src.exports.and=and_1;src.exports.any=any_1;src.exports.anyPass=anyPass_1;src.exports.ap=ap_1;src.exports.aperture=aperture_1;src.exports.append=append_1;src.exports.apply=apply_1;src.exports.applySpec=applySpec_1;src.exports.applyTo=applyTo_1;src.exports.ascend=ascend_1;src.exports.assoc=assoc_1;src.exports.assocPath=assocPath_1;src.exports.binary=binary_1;src.exports.bind=bind_1;src.exports.both=both_1;src.exports.call=call_1;src.exports.chain=chain_1;src.exports.clamp=clamp_1;src.exports.clone=clone_1;src.exports.collectBy=collectBy_1;src.exports.comparator=comparator_1;src.exports.complement=complement_1;src.exports.compose=compose_1;src.exports.composeWith=composeWith_1;src.exports.concat=concat_1;src.exports.cond=cond_1;src.exports.construct=construct_1;src.exports.constructN=constructN_1;src.exports.converge=converge_1;src.exports.count=count_1;src.exports.countBy=countBy_1;src.exports.curry=curry_1;src.exports.curryN=curryN_1;src.exports.dec=dec_1;src.exports.defaultTo=defaultTo_1;src.exports.descend=descend_1;src.exports.difference=difference_1;src.exports.differenceWith=differenceWith_1;src.exports.dissoc=dissoc_1;src.exports.dissocPath=dissocPath_1;src.exports.divide=divide_1;src.exports.drop=drop_1;src.exports.dropLast=dropLast_1;src.exports.dropLastWhile=dropLastWhile_1;src.exports.dropRepeats=dropRepeats_1;src.exports.dropRepeatsBy=dropRepeatsBy_1;src.exports.dropRepeatsWith=dropRepeatsWith_1;src.exports.dropWhile=dropWhile_1;src.exports.either=either_1;src.exports.empty=empty_1;src.exports.endsWith=endsWith_1;src.exports.eqBy=eqBy_1;src.exports.eqProps=eqProps_1;src.exports.equals=equals_1;src.exports.evolve=evolve_1;src.exports.filter=filter_1;src.exports.find=find_1;src.exports.findIndex=findIndex_1;src.exports.findLast=findLast_1;src.exports.findLastIndex=findLastIndex_1;src.exports.flatten=flatten_1;src.exports.flip=flip_1;src.exports.forEach=forEach_1;src.exports.forEachObjIndexed=forEachObjIndexed_1;src.exports.fromPairs=fromPairs_1;src.exports.groupBy=groupBy_1;src.exports.groupWith=groupWith_1;src.exports.gt=gt_1;src.exports.gte=gte_1;src.exports.has=has_1;src.exports.hasIn=hasIn_1;src.exports.hasPath=hasPath_1;src.exports.head=head_1;src.exports.identical=identical_1;src.exports.identity=identity_1;src.exports.ifElse=ifElse_1;src.exports.inc=inc_1;src.exports.includes=includes_1;src.exports.indexBy=indexBy_1;src.exports.indexOf=indexOf_1;src.exports.init=init_1;src.exports.innerJoin=innerJoin_1;src.exports.insert=insert_1;src.exports.insertAll=insertAll_1;src.exports.intersection=intersection_1;src.exports.intersperse=intersperse_1;src.exports.into=into_1;src.exports.invert=invert_1;src.exports.invertObj=invertObj_1;src.exports.invoker=invoker_1;src.exports.is=is_1;src.exports.isEmpty=isEmpty_1;src.exports.isNil=isNil_1;src.exports.isNotNil=isNotNil_1;src.exports.join=join_1;src.exports.juxt=juxt_1;src.exports.keys=keys_1;src.exports.keysIn=keysIn_1;src.exports.last=last_1;src.exports.lastIndexOf=lastIndexOf_1;src.exports.length=length_1;src.exports.lens=lens_1;src.exports.lensIndex=lensIndex_1;src.exports.lensPath=lensPath_1;src.exports.lensProp=lensProp_1;src.exports.lift=lift_1;src.exports.liftN=liftN_1;src.exports.lt=lt_1;src.exports.lte=lte_1;src.exports.map=map_1;src.exports.mapAccum=mapAccum_1;src.exports.mapAccumRight=mapAccumRight_1;src.exports.mapObjIndexed=mapObjIndexed_1;src.exports.match=match_1;src.exports.mathMod=mathMod_1;src.exports.max=max_1;src.exports.maxBy=maxBy_1;src.exports.mean=mean_1;src.exports.median=median_1;src.exports.memoizeWith=memoizeWith_1;src.exports.mergeAll=mergeAll_1;src.exports.mergeDeepLeft=mergeDeepLeft_1;src.exports.mergeDeepRight=mergeDeepRight_1;src.exports.mergeDeepWith=mergeDeepWith_1;src.exports.mergeDeepWithKey=mergeDeepWithKey_1;src.exports.mergeLeft=mergeLeft_1;src.exports.mergeRight=mergeRight_1;src.exports.mergeWith=mergeWith_1;src.exports.mergeWithKey=mergeWithKey_1;src.exports.min=min_1;src.exports.minBy=minBy_1;src.exports.modify=modify_1;src.exports.modifyPath=modifyPath_1;src.exports.modulo=modulo_1;src.exports.move=move_1;src.exports.multiply=multiply_1;src.exports.nAry=nAry_1;src.exports.partialObject=partialObject_1;src.exports.negate=negate_1;src.exports.none=none_1;src.exports.not=not_1;src.exports.nth=nth_1;src.exports.nthArg=nthArg_1;src.exports.o=o_1;src.exports.objOf=objOf_1;src.exports.of=of_1;src.exports.omit=omit_1;src.exports.on=on_1;src.exports.once=once_1;src.exports.or=or_1;src.exports.otherwise=otherwise_1;src.exports.over=over_1;src.exports.pair=pair_1;src.exports.partial=partial_1;src.exports.partialRight=partialRight_1;src.exports.partition=partition_1;src.exports.path=path_1;src.exports.paths=paths_1;src.exports.pathEq=pathEq_1;src.exports.pathOr=pathOr_1;src.exports.pathSatisfies=pathSatisfies_1;src.exports.pick=pick_1;src.exports.pickAll=pickAll_1;src.exports.pickBy=pickBy_1;src.exports.pipe=pipe_1;src.exports.pipeWith=pipeWith_1;src.exports.pluck=pluck_1;src.exports.prepend=prepend_1;src.exports.product=product_1;src.exports.project=project_1;src.exports.promap=promap_1;src.exports.prop=prop_1;src.exports.propEq=propEq_1;src.exports.propIs=propIs_1;src.exports.propOr=propOr_1;src.exports.propSatisfies=propSatisfies_1;src.exports.props=props_1;src.exports.range=range_1;src.exports.reduce=reduce_1;src.exports.reduceBy=reduceBy_1;src.exports.reduceRight=reduceRight_1;src.exports.reduceWhile=reduceWhile_1;src.exports.reduced=reduced_1;src.exports.reject=reject_1;src.exports.remove=remove_1;src.exports.repeat=repeat_1;src.exports.replace=replace_1;src.exports.reverse=reverse_1;src.exports.scan=scan_1;src.exports.sequence=sequence_1;src.exports.set=set_1;src.exports.slice=slice_1;src.exports.sort=sort_1;src.exports.sortBy=sortBy_1;src.exports.sortWith=sortWith_1;src.exports.split=split_1;src.exports.splitAt=splitAt_1;src.exports.splitEvery=splitEvery_1;src.exports.splitWhen=splitWhen_1;src.exports.splitWhenever=splitWhenever_1;src.exports.startsWith=startsWith_1;src.exports.subtract=subtract_1;src.exports.sum=sum_1;src.exports.swap=swap_1;src.exports.symmetricDifference=symmetricDifference_1;src.exports.symmetricDifferenceWith=symmetricDifferenceWith_1;src.exports.tail=tail_1;src.exports.take=take_1;src.exports.takeLast=takeLast_1;src.exports.takeLastWhile=takeLastWhile_1;src.exports.takeWhile=takeWhile_1;src.exports.tap=tap_1;src.exports.test=test_1;src.exports.andThen=andThen_1;src.exports.times=times_1;src.exports.toLower=toLower_1;src.exports.toPairs=toPairs_1;src.exports.toPairsIn=toPairsIn_1;src.exports.toString=toString_1;src.exports.toUpper=toUpper_1;src.exports.transduce=transduce_1;src.exports.transpose=transpose_1;src.exports.traverse=traverse_1;src.exports.trim=trim_1;src.exports.tryCatch=tryCatch_1;src.exports.type=type_1;src.exports.unapply=unapply_1;src.exports.unary=unary_1;src.exports.uncurryN=uncurryN_1;src.exports.unfold=unfold_1;src.exports.union=union_1;src.exports.unionWith=unionWith_1;src.exports.uniq=uniq_1;src.exports.uniqBy=uniqBy_1;src.exports.uniqWith=uniqWith_1;src.exports.unless=unless_1;src.exports.unnest=unnest_1;src.exports.until=until_1;src.exports.unwind=unwind_1;src.exports.update=update_1;src.exports.useWith=useWith_1;src.exports.values=values_1;src.exports.valuesIn=valuesIn_1;src.exports.view=view_1;src.exports.when=when_1;src.exports.where=where_1;src.exports.whereAny=whereAny_1;src.exports.whereEq=whereEq_1;src.exports.without=without_1;src.exports.xor=xor_1;src.exports.xprod=xprod_1;src.exports.zip=zip_1;src.exports.zipObj=zipObj_1;src.exports.zipWith=zipWith_1;src.exports.thunkify=thunkify_1;var srcExports=src.exports,instruction={},__awaiter$1=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(tt,et,rt,nt){function at(it){return it instanceof rt?it:new rt(function(st){st(it)})}return new(rt||(rt=Promise))(function(it,st){function dt(yt){try{mt(nt.next(yt))}catch(Rt){st(Rt)}}function pt(yt){try{mt(nt.throw(yt))}catch(Rt){st(Rt)}}function mt(yt){yt.done?it(yt.value):at(yt.value).then(dt,pt)}mt((nt=nt.apply(tt,et||[])).next())})};Object.defineProperty(instruction,"__esModule",{value:!0});instruction.burn=instruction.expireToken=instruction.removeFeatureFromNetwork=instruction.addFeatureToNetwork=instruction.updateExpiry=instruction.unfreeze=instruction.freeze=instruction.revoke=instruction.issue=instruction.revokeGatekeeper=instruction.addGatekeeper=instruction.GatewayInstruction=void 0;const solanaBorsh_1=solanaBorsh,constants_1=constants,web3_js_1=require$$2$1,GatewayTokenData_1=GatewayTokenData$1,GatewayNetworkData_1=GatewayNetworkData,util_1=requireUtil(),AssignablePublicKey_1=AssignablePublicKey$1;class AddGatekeeper extends solanaBorsh_1.Assignable{}class Issue extends solanaBorsh_1.Assignable{}class SetState extends solanaBorsh_1.Assignable{}class UpdateExpiry extends solanaBorsh_1.Assignable{}class RevokeGatekeeper extends solanaBorsh_1.Assignable{}class AddFeatureToNetwork extends solanaBorsh_1.Assignable{}class RemoveFeatureFromNetwork extends solanaBorsh_1.Assignable{}class ExpireToken extends solanaBorsh_1.Assignable{}class BurnToken extends solanaBorsh_1.Assignable{}class GatewayInstruction extends solanaBorsh_1.Enum{static addGatekeeper(){return new GatewayInstruction({addGatekeeper:new AddGatekeeper({})})}static issue(et,rt){return new GatewayInstruction({issue:new Issue({seed:et,expireTime:rt})})}static revoke(){return new GatewayInstruction({setState:new SetState({state:new GatewayTokenData_1.GatewayTokenState({revoked:new GatewayTokenData_1.Revoked({})})})})}static freeze(){return new GatewayInstruction({setState:new SetState({state:new GatewayTokenData_1.GatewayTokenState({frozen:new GatewayTokenData_1.Frozen({})})})})}static unfreeze(){return new GatewayInstruction({setState:new SetState({state:new GatewayTokenData_1.GatewayTokenState({active:new GatewayTokenData_1.Active({})})})})}static updateExpiry(et){return new GatewayInstruction({updateExpiry:new UpdateExpiry({expireTime:et})})}static revokeGatekeeper(){return new GatewayInstruction({revokeGatekeeper:new RevokeGatekeeper({})})}static addFeatureToNetwork(et){return new GatewayInstruction({addFeatureToNetwork:new AddFeatureToNetwork({feature:et})})}static removeFeatureFromNetwork(et){return new GatewayInstruction({removeFeatureFromNetwork:new RemoveFeatureFromNetwork({feature:et})})}static expireToken(et){return new GatewayInstruction({expireToken:new ExpireToken({gatekeeperNetwork:AssignablePublicKey_1.AssignablePublicKey.fromPublicKey(et)})})}static burnToken(){return new GatewayInstruction({burnToken:new BurnToken({})})}}instruction.GatewayInstruction=GatewayInstruction;function addGatekeeper(tt,et,rt,nt){const at=[{pubkey:tt,isSigner:!0,isWritable:!0},{pubkey:et,isSigner:!1,isWritable:!0},{pubkey:rt,isSigner:!1,isWritable:!1},{pubkey:nt,isSigner:!0,isWritable:!1},{pubkey:web3_js_1.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:web3_js_1.SystemProgram.programId,isSigner:!1,isWritable:!1}],it=GatewayInstruction.addGatekeeper().encode();return new web3_js_1.TransactionInstruction({keys:at,programId:constants_1.PROGRAM_ID,data:it})}instruction.addGatekeeper=addGatekeeper;function revokeGatekeeper(tt,et,rt,nt){const at=[{pubkey:tt,isSigner:!1,isWritable:!0},{pubkey:et,isSigner:!1,isWritable:!0},{pubkey:rt,isSigner:!1,isWritable:!1},{pubkey:nt,isSigner:!0,isWritable:!1}],it=GatewayInstruction.revokeGatekeeper().encode();return new web3_js_1.TransactionInstruction({keys:at,programId:constants_1.PROGRAM_ID,data:it})}instruction.revokeGatekeeper=revokeGatekeeper;function issue(tt,et,rt,nt,at,it,st,dt){const pt=[{pubkey:et,isSigner:!0,isWritable:!0},{pubkey:tt,isSigner:!1,isWritable:!0},{pubkey:nt,isSigner:!1,isWritable:!1},{pubkey:rt,isSigner:!1,isWritable:!1},{pubkey:at,isSigner:!0,isWritable:!1},{pubkey:it,isSigner:!1,isWritable:!1},{pubkey:web3_js_1.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:web3_js_1.SystemProgram.programId,isSigner:!1,isWritable:!1}],mt=GatewayInstruction.issue(st,dt).encode();return new web3_js_1.TransactionInstruction({keys:pt,programId:constants_1.PROGRAM_ID,data:mt})}instruction.issue=issue;const getStateChangeAccountMeta=(tt,et,rt)=>[{pubkey:tt,isSigner:!1,isWritable:!0},{pubkey:et,isSigner:!0,isWritable:!1},{pubkey:rt,isSigner:!1,isWritable:!1}];function revoke(tt,et,rt){const nt=getStateChangeAccountMeta(tt,et,rt),at=GatewayInstruction.revoke().encode();return new web3_js_1.TransactionInstruction({keys:nt,programId:constants_1.PROGRAM_ID,data:at})}instruction.revoke=revoke;function freeze$1(tt,et,rt){const nt=getStateChangeAccountMeta(tt,et,rt),at=GatewayInstruction.freeze().encode();return new web3_js_1.TransactionInstruction({keys:nt,programId:constants_1.PROGRAM_ID,data:at})}instruction.freeze=freeze$1;function unfreeze(tt,et,rt){const nt=getStateChangeAccountMeta(tt,et,rt),at=GatewayInstruction.unfreeze().encode();return new web3_js_1.TransactionInstruction({keys:nt,programId:constants_1.PROGRAM_ID,data:at})}instruction.unfreeze=unfreeze;function updateExpiry(tt,et,rt,nt){const at=[{pubkey:tt,isSigner:!1,isWritable:!0},{pubkey:et,isSigner:!0,isWritable:!1},{pubkey:rt,isSigner:!1,isWritable:!1}],it=GatewayInstruction.updateExpiry(nt).encode();return new web3_js_1.TransactionInstruction({keys:at,programId:constants_1.PROGRAM_ID,data:it})}instruction.updateExpiry=updateExpiry;function addFeatureToNetwork(tt,et,rt){return __awaiter$1(this,void 0,void 0,function*(){const nt=(0,util_1.getFeatureAccountAddress)(rt,et),at=[{pubkey:tt,isSigner:!0,isWritable:!0},{pubkey:et,isSigner:!0,isWritable:!1},{pubkey:nt,isSigner:!1,isWritable:!0},{pubkey:web3_js_1.SystemProgram.programId,isSigner:!1,isWritable:!1}],it=GatewayInstruction.addFeatureToNetwork(rt).encode();return new web3_js_1.TransactionInstruction({keys:at,programId:constants_1.PROGRAM_ID,data:it})})}instruction.addFeatureToNetwork=addFeatureToNetwork;function removeFeatureFromNetwork(tt,et,rt){return __awaiter$1(this,void 0,void 0,function*(){const nt=(0,util_1.getFeatureAccountAddress)(rt,et),at=[{pubkey:tt,isSigner:!0,isWritable:!0},{pubkey:et,isSigner:!0,isWritable:!1},{pubkey:nt,isSigner:!1,isWritable:!0},{pubkey:web3_js_1.SystemProgram.programId,isSigner:!1,isWritable:!1}],it=GatewayInstruction.removeFeatureFromNetwork(rt).encode();return new web3_js_1.TransactionInstruction({keys:at,programId:constants_1.PROGRAM_ID,data:it})})}instruction.removeFeatureFromNetwork=removeFeatureFromNetwork;function expireToken(tt,et,rt){const nt=new GatewayNetworkData_1.NetworkFeature({userTokenExpiry:new GatewayNetworkData_1.UserTokenExpiry({})}),at=(0,util_1.getFeatureAccountAddress)(nt,rt);console.log("featureAccount",at.toBase58());const it=[{pubkey:tt,isSigner:!1,isWritable:!0},{pubkey:et,isSigner:!0,isWritable:!0},{pubkey:at,isSigner:!1,isWritable:!1}],st=GatewayInstruction.expireToken(rt).encode();return new web3_js_1.TransactionInstruction({keys:it,programId:constants_1.PROGRAM_ID,data:st})}instruction.expireToken=expireToken;function burn(tt,et,rt,nt){const at=[...getStateChangeAccountMeta(tt,et,rt),{pubkey:nt,isSigner:!1,isWritable:!0}],it=GatewayInstruction.burnToken().encode();return new web3_js_1.TransactionInstruction({keys:at,programId:constants_1.PROGRAM_ID,data:it})}instruction.burn=burn;solanaBorsh_1.SCHEMA.set(GatewayInstruction,{kind:"enum",field:"enum",values:[["addGatekeeper",AddGatekeeper],["issue",Issue],["setState",SetState],["updateExpiry",UpdateExpiry],["revokeGatekeeper",RevokeGatekeeper],["addFeatureToNetwork",AddFeatureToNetwork],["removeFeatureFromNetwork",RemoveFeatureFromNetwork],["expireToken",ExpireToken],["burnToken",BurnToken]]});solanaBorsh_1.SCHEMA.set(AddGatekeeper,{kind:"struct",fields:[]});solanaBorsh_1.SCHEMA.set(Issue,{kind:"struct",fields:[["seed",{kind:"option",type:[8]}],["expireTime",{kind:"option",type:"u64"}]]});solanaBorsh_1.SCHEMA.set(SetState,{kind:"struct",fields:[["state",GatewayTokenData_1.GatewayTokenState]]});solanaBorsh_1.SCHEMA.set(UpdateExpiry,{kind:"struct",fields:[["expireTime","u64"]]});solanaBorsh_1.SCHEMA.set(RevokeGatekeeper,{kind:"struct",fields:[]});solanaBorsh_1.SCHEMA.set(AddFeatureToNetwork,{kind:"struct",fields:[["feature",GatewayNetworkData_1.NetworkFeature]]});solanaBorsh_1.SCHEMA.set(RemoveFeatureFromNetwork,{kind:"struct",fields:[["feature",GatewayNetworkData_1.NetworkFeature]]});solanaBorsh_1.SCHEMA.set(ExpireToken,{kind:"struct",fields:[["padding",{kind:"option",type:[8]}],["gatekeeperNetwork",AssignablePublicKey_1.AssignablePublicKey]]});solanaBorsh_1.SCHEMA.set(BurnToken,{kind:"struct",fields:[]});(function(tt){var et=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(Pt,Dt,Gt,jt){jt===void 0&&(jt=Gt);var Yt=Object.getOwnPropertyDescriptor(Dt,Gt);(!Yt||("get"in Yt?!Dt.__esModule:Yt.writable||Yt.configurable))&&(Yt={enumerable:!0,get:function(){return Dt[Gt]}}),Object.defineProperty(Pt,jt,Yt)}:function(Pt,Dt,Gt,jt){jt===void 0&&(jt=Gt),Pt[jt]=Dt[Gt]}),rt=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(Pt,Dt){Object.defineProperty(Pt,"default",{enumerable:!0,value:Dt})}:function(Pt,Dt){Pt.default=Dt}),nt=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(Pt){if(Pt&&Pt.__esModule)return Pt;var Dt={};if(Pt!=null)for(var Gt in Pt)Gt!=="default"&&Object.prototype.hasOwnProperty.call(Pt,Gt)&&et(Dt,Pt,Gt);return rt(Dt,Pt),Dt},at=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(Pt,Dt){for(var Gt in Pt)Gt!=="default"&&!Object.prototype.hasOwnProperty.call(Dt,Gt)&&et(Dt,Pt,Gt)},it=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(Pt,Dt,Gt,jt){function Yt(tr){return tr instanceof Gt?tr:new Gt(function(er){er(tr)})}return new(Gt||(Gt=Promise))(function(tr,er){function lr(ft){try{ot(jt.next(ft))}catch(ht){er(ht)}}function It(ft){try{ot(jt.throw(ft))}catch(ht){er(ht)}}function ot(ft){ft.done?tr(ft.value):Yt(ft.value).then(lr,It)}ot((jt=jt.apply(Pt,Dt||[])).next())})};Object.defineProperty(tt,"__esModule",{value:!0}),tt.featureExists=tt.getGatewayToken=tt.onGatewayToken=tt.onGatewayTokenChange=tt.findGatewayToken=tt.findGatewayTokensForOwnerAndNetwork=tt.findGatewayTokens=void 0;const st=requireTypes(),dt=bs58,pt=constants,mt=GatewayTokenData$1,yt=nt(srcExports),Rt=requireUtil();at(instruction,tt),at(requireUtil(),tt),at(GatewayTokenData$1,tt),at(GatewayNetworkData,tt),at(requireTypes(),tt),at(constants,tt),at(AssignablePublicKey$1,tt);const Tt=(Pt,Dt,Gt,...jt)=>it(void 0,[Pt,Dt,Gt,...jt],void 0,function*(Yt,tr,er,lr=!1,It){const ot=tr?{memcmp:{offset:Rt.GATEWAY_TOKEN_ACCOUNT_OWNER_FIELD_OFFSET,bytes:tr.toBase58()}}:void 0,ft={memcmp:{offset:Rt.GATEWAY_TOKEN_ACCOUNT_GATEKEEPER_NETWORK_FIELD_OFFSET,bytes:er.toBase58()}},ht=It!==void 0?{memcmp:{offset:Rt.GATEWAY_TOKEN_ACCOUNT_OWNER_FIELD_OFFSET,bytes:(0,dt.encode)([It])}}:void 0,vt=[ot,ft,ht].filter(Boolean),wt=yield Yt.getProgramAccounts(pt.PROGRAM_ID,{filters:vt});if(!wt)return[];const bt=({pubkey:$t,account:Et})=>(0,Rt.dataToGatewayToken)(mt.GatewayTokenData.fromAccount(Et.data),$t);return wt.map(bt).filter($t=>$t.state!==st.State.REVOKED||lr)});tt.findGatewayTokens=Tt;const At=(Pt,Dt,Gt,...jt)=>it(void 0,[Pt,Dt,Gt,...jt],void 0,function*(Yt,tr,er,lr=!1,It=0,ot=5){const ft=yield Promise.all(yt.range(It,It+ot).map(vt=>(0,Rt.getGatewayTokenAddressForOwnerAndGatekeeperNetwork)(tr,er,vt)));return(yield Yt.getMultipleAccountsInfo(ft,pt.SOLANA_COMMITMENT)).map((vt,wt)=>[vt,ft[wt]]).filter(vt=>vt[0]!==null).map(([vt,wt])=>(0,Rt.dataToGatewayToken)(mt.GatewayTokenData.fromAccount(vt.data),wt)).filter(vt=>vt.state!==st.State.REVOKED||lr).sort((vt,wt)=>vt.isValid()===wt.isValid()?0:vt.isValid()?-1:1)});tt.findGatewayTokensForOwnerAndNetwork=At;const xt=(Pt,Dt,Gt,...jt)=>it(void 0,[Pt,Dt,Gt,...jt],void 0,function*(Yt,tr,er,lr=!1){const It=yield(0,tt.findGatewayTokensForOwnerAndNetwork)(Yt,tr,er,lr);return It.length>0?It[0]:null});tt.findGatewayToken=xt;const Nt=(Pt,Dt,Gt,jt=pt.SOLANA_COMMITMENT)=>{const Yt=tr=>{const er=(0,Rt.dataToGatewayToken)(mt.GatewayTokenData.fromAccount(tr.data),Dt);Gt(er)};return Pt.onAccountChange(Dt,Yt,jt)};tt.onGatewayTokenChange=Nt;const Ct=(Pt,Dt,Gt,jt,Yt=pt.SOLANA_COMMITMENT,tr=0)=>{const er=(0,Rt.getGatewayTokenAddressForOwnerAndGatekeeperNetwork)(Dt,Gt,tr);return(0,tt.onGatewayTokenChange)(Pt,er,jt,Yt)};tt.onGatewayToken=Ct;const Ot=(Pt,Dt)=>it(void 0,void 0,void 0,function*(){const Gt=yield Pt.getAccountInfo(Dt,pt.SOLANA_COMMITMENT);return Gt?(0,Rt.dataToGatewayToken)(mt.GatewayTokenData.fromAccount(Gt.data),Dt):null});tt.getGatewayToken=Ot;const kt=(Pt,Dt,Gt)=>it(void 0,void 0,void 0,function*(){const jt=(0,Rt.getFeatureAccountAddress)(Dt,Gt),Yt=yield Pt.getAccountInfo(jt,pt.SOLANA_COMMITMENT);return Yt!=null&&pt.PROGRAM_ID.equals(Yt.owner)});tt.featureExists=kt})(dist);const createSolanaTransactionFromBase64$1=tt=>Transaction.from(Buffer.from(tt,"base64")),useSolanaGateway=()=>{const{gatewayToken:tt,gatewayTokenTransaction:et}=useGateway(),rt=tt?{issuingGatekeeper:new PublicKey(tt.issuingGatekeeper),gatekeeperNetworkAddress:new PublicKey(tt.gatekeeperNetworkAddress),owner:new PublicKey(tt.owner),state:tt.state,publicKey:new PublicKey(tt.identifier),expiryTime:tt.expiryTime}:void 0,nt=et?createSolanaTransactionFromBase64$1(et):void 0;return Object.assign(Object.assign({},useGateway()),{gatewayToken:rt,gatewayTokenTransaction:nt})};function _isPlaceholder(tt){return tt!=null&&typeof tt=="object"&&tt["@@functional/placeholder"]===!0}function _curry1(tt){return function et(rt){return arguments.length===0||_isPlaceholder(rt)?et:tt.apply(this,arguments)}}function _curry2(tt){return function et(rt,nt){switch(arguments.length){case 0:return et;case 1:return _isPlaceholder(rt)?et:_curry1(function(at){return tt(rt,at)});default:return _isPlaceholder(rt)&&_isPlaceholder(nt)?et:_isPlaceholder(rt)?_curry1(function(at){return tt(at,nt)}):_isPlaceholder(nt)?_curry1(function(at){return tt(rt,at)}):tt(rt,nt)}}}function _concat(tt,et){tt=tt||[],et=et||[];var rt,nt=tt.length,at=et.length,it=[];for(rt=0;rt<nt;)it[it.length]=tt[rt],rt+=1;for(rt=0;rt<at;)it[it.length]=et[rt],rt+=1;return it}function _arity(tt,et){switch(tt){case 0:return function(){return et.apply(this,arguments)};case 1:return function(rt){return et.apply(this,arguments)};case 2:return function(rt,nt){return et.apply(this,arguments)};case 3:return function(rt,nt,at){return et.apply(this,arguments)};case 4:return function(rt,nt,at,it){return et.apply(this,arguments)};case 5:return function(rt,nt,at,it,st){return et.apply(this,arguments)};case 6:return function(rt,nt,at,it,st,dt){return et.apply(this,arguments)};case 7:return function(rt,nt,at,it,st,dt,pt){return et.apply(this,arguments)};case 8:return function(rt,nt,at,it,st,dt,pt,mt){return et.apply(this,arguments)};case 9:return function(rt,nt,at,it,st,dt,pt,mt,yt){return et.apply(this,arguments)};case 10:return function(rt,nt,at,it,st,dt,pt,mt,yt,Rt){return et.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function _curryN(tt,et,rt){return function(){for(var nt=[],at=0,it=tt,st=0,dt=!1;st<et.length||at<arguments.length;){var pt;st<et.length&&(!_isPlaceholder(et[st])||at>=arguments.length)?pt=et[st]:(pt=arguments[at],at+=1),nt[st]=pt,_isPlaceholder(pt)?dt=!0:it-=1,st+=1}return!dt&&it<=0?rt.apply(this,nt):_arity(Math.max(0,it),_curryN(tt,nt,rt))}}var curryN=_curry2(function tt(et,rt){return et===1?_curry1(rt):_arity(et,_curryN(et,[],rt))});const _isArray=Array.isArray||function tt(et){return et!=null&&et.length>=0&&Object.prototype.toString.call(et)==="[object Array]"};function _isTransformer(tt){return tt!=null&&typeof tt["@@transducer/step"]=="function"}function _dispatchable(tt,et,rt){return function(){if(arguments.length===0)return rt();var nt=arguments[arguments.length-1];if(!_isArray(nt)){for(var at=0;at<tt.length;){if(typeof nt[tt[at]]=="function")return nt[tt[at]].apply(nt,Array.prototype.slice.call(arguments,0,-1));at+=1}if(_isTransformer(nt)){var it=et.apply(null,Array.prototype.slice.call(arguments,0,-1));return it(nt)}}return rt.apply(this,arguments)}}const _xfBase={init:function(){return this.xf["@@transducer/init"]()},result:function(tt){return this.xf["@@transducer/result"](tt)}};function _has(tt,et){return Object.prototype.hasOwnProperty.call(et,tt)}var toString=Object.prototype.toString,_isArguments=function(){return toString.call(arguments)==="[object Arguments]"?function(et){return toString.call(et)==="[object Arguments]"}:function(et){return _has("callee",et)}}(),hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],hasArgsEnumBug=function(){return arguments.propertyIsEnumerable("length")}(),contains=function tt(et,rt){for(var nt=0;nt<et.length;){if(et[nt]===rt)return!0;nt+=1}return!1},keys=_curry1(typeof Object.keys=="function"&&!hasArgsEnumBug?function tt(et){return Object(et)!==et?[]:Object.keys(et)}:function tt(et){if(Object(et)!==et)return[];var rt,nt,at=[],it=hasArgsEnumBug&&_isArguments(et);for(rt in et)_has(rt,et)&&(!it||rt!=="length")&&(at[at.length]=rt);if(hasEnumBug)for(nt=nonEnumerableProps.length-1;nt>=0;)rt=nonEnumerableProps[nt],_has(rt,et)&&!contains(at,rt)&&(at[at.length]=rt),nt-=1;return at});function _map(tt,et){for(var rt=0,nt=et.length,at=Array(nt);rt<nt;)at[rt]=tt(et[rt]),rt+=1;return at}function _arrayReduce(tt,et,rt){for(var nt=0,at=rt.length;nt<at;)et=tt(et,rt[nt]),nt+=1;return et}var XMap=function(){function tt(et,rt){this.xf=rt,this.f=et}return tt.prototype["@@transducer/init"]=_xfBase.init,tt.prototype["@@transducer/result"]=_xfBase.result,tt.prototype["@@transducer/step"]=function(et,rt){return this.xf["@@transducer/step"](et,this.f(rt))},tt}(),_xmap=function tt(et){return function(rt){return new XMap(et,rt)}},map=_curry2(_dispatchable(["fantasy-land/map","map"],_xmap,function tt(et,rt){switch(Object.prototype.toString.call(rt)){case"[object Function]":return curryN(rt.length,function(){return et.call(this,rt.apply(this,arguments))});case"[object Object]":return _arrayReduce(function(nt,at){return nt[at]=et(rt[at]),nt},{},keys(rt));default:return _map(et,rt)}}));function _isString(tt){return Object.prototype.toString.call(tt)==="[object String]"}var _isArrayLike=_curry1(function tt(et){return _isArray(et)?!0:!et||typeof et!="object"||_isString(et)?!1:et.length===0?!0:et.length>0?et.hasOwnProperty(0)&&et.hasOwnProperty(et.length-1):!1}),symIterator=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function _createReduce(tt,et,rt){return function(at,it,st){if(_isArrayLike(st))return tt(at,it,st);if(st==null)return it;if(typeof st["fantasy-land/reduce"]=="function")return et(at,it,st,"fantasy-land/reduce");if(st[symIterator]!=null)return rt(at,it,st[symIterator]());if(typeof st.next=="function")return rt(at,it,st);if(typeof st.reduce=="function")return et(at,it,st,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function _iterableReduce(tt,et,rt){for(var nt=rt.next();!nt.done;)et=tt(et,nt.value),nt=rt.next();return et}function _methodReduce(tt,et,rt,nt){return rt[nt](tt,et)}var _reduce=_createReduce(_arrayReduce,_methodReduce,_iterableReduce),ap=_curry2(function tt(et,rt){return typeof rt["fantasy-land/ap"]=="function"?rt["fantasy-land/ap"](et):typeof et.ap=="function"?et.ap(rt):typeof et=="function"?function(nt){return et(nt)(rt(nt))}:_reduce(function(nt,at){return _concat(nt,map(at,rt))},[],et)}),isNil=_curry1(function tt(et){return et==null}),liftN=_curry2(function tt(et,rt){var nt=curryN(et,rt);return curryN(et,function(){return _arrayReduce(ap,map(nt,arguments[0]),Array.prototype.slice.call(arguments,1))})}),lift=_curry1(function tt(et){return liftN(et.length,et)}),not=_curry1(function tt(et){return!et}),complement=lift(not);function commonjsRequire(tt){throw new Error('Could not dynamically require "'+tt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var naclFast={exports:{}};(function(tt){(function(et){var rt=function(Zt){var Qt,Jt=new Float64Array(16);if(Zt)for(Qt=0;Qt<Zt.length;Qt++)Jt[Qt]=Zt[Qt];return Jt},nt=function(){throw new Error("no PRNG")},at=new Uint8Array(16),it=new Uint8Array(32);it[0]=9;var st=rt(),dt=rt([1]),pt=rt([56129,1]),mt=rt([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),yt=rt([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Rt=rt([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Tt=rt([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),At=rt([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function xt(Zt,Qt,Jt,qt){Zt[Qt]=Jt>>24&255,Zt[Qt+1]=Jt>>16&255,Zt[Qt+2]=Jt>>8&255,Zt[Qt+3]=Jt&255,Zt[Qt+4]=qt>>24&255,Zt[Qt+5]=qt>>16&255,Zt[Qt+6]=qt>>8&255,Zt[Qt+7]=qt&255}function Nt(Zt,Qt,Jt,qt,rr){var dr,Rr=0;for(dr=0;dr<rr;dr++)Rr|=Zt[Qt+dr]^Jt[qt+dr];return(1&Rr-1>>>8)-1}function Ct(Zt,Qt,Jt,qt){return Nt(Zt,Qt,Jt,qt,16)}function Ot(Zt,Qt,Jt,qt){return Nt(Zt,Qt,Jt,qt,32)}function kt(Zt,Qt,Jt,qt){for(var rr=qt[0]&255|(qt[1]&255)<<8|(qt[2]&255)<<16|(qt[3]&255)<<24,dr=Jt[0]&255|(Jt[1]&255)<<8|(Jt[2]&255)<<16|(Jt[3]&255)<<24,Rr=Jt[4]&255|(Jt[5]&255)<<8|(Jt[6]&255)<<16|(Jt[7]&255)<<24,vr=Jt[8]&255|(Jt[9]&255)<<8|(Jt[10]&255)<<16|(Jt[11]&255)<<24,wr=Jt[12]&255|(Jt[13]&255)<<8|(Jt[14]&255)<<16|(Jt[15]&255)<<24,Yr=qt[4]&255|(qt[5]&255)<<8|(qt[6]&255)<<16|(qt[7]&255)<<24,jr=Qt[0]&255|(Qt[1]&255)<<8|(Qt[2]&255)<<16|(Qt[3]&255)<<24,mn=Qt[4]&255|(Qt[5]&255)<<8|(Qt[6]&255)<<16|(Qt[7]&255)<<24,Jr=Qt[8]&255|(Qt[9]&255)<<8|(Qt[10]&255)<<16|(Qt[11]&255)<<24,cn=Qt[12]&255|(Qt[13]&255)<<8|(Qt[14]&255)<<16|(Qt[15]&255)<<24,ln=qt[8]&255|(qt[9]&255)<<8|(qt[10]&255)<<16|(qt[11]&255)<<24,vn=Jt[16]&255|(Jt[17]&255)<<8|(Jt[18]&255)<<16|(Jt[19]&255)<<24,_n=Jt[20]&255|(Jt[21]&255)<<8|(Jt[22]&255)<<16|(Jt[23]&255)<<24,fn=Jt[24]&255|(Jt[25]&255)<<8|(Jt[26]&255)<<16|(Jt[27]&255)<<24,hn=Jt[28]&255|(Jt[29]&255)<<8|(Jt[30]&255)<<16|(Jt[31]&255)<<24,dn=qt[12]&255|(qt[13]&255)<<8|(qt[14]&255)<<16|(qt[15]&255)<<24,tn=rr,sn=dr,Qr=Rr,rn=vr,nn=wr,Xr=Yr,kr=jr,Pr=mn,Zr=Jr,Kr=cn,Vr=ln,en=vn,En=_n,Rn=fn,An=hn,$n=dn,gr,In=0;In<20;In+=2)gr=tn+En|0,nn^=gr<<7|gr>>>25,gr=nn+tn|0,Zr^=gr<<9|gr>>>23,gr=Zr+nn|0,En^=gr<<13|gr>>>19,gr=En+Zr|0,tn^=gr<<18|gr>>>14,gr=Xr+sn|0,Kr^=gr<<7|gr>>>25,gr=Kr+Xr|0,Rn^=gr<<9|gr>>>23,gr=Rn+Kr|0,sn^=gr<<13|gr>>>19,gr=sn+Rn|0,Xr^=gr<<18|gr>>>14,gr=Vr+kr|0,An^=gr<<7|gr>>>25,gr=An+Vr|0,Qr^=gr<<9|gr>>>23,gr=Qr+An|0,kr^=gr<<13|gr>>>19,gr=kr+Qr|0,Vr^=gr<<18|gr>>>14,gr=$n+en|0,rn^=gr<<7|gr>>>25,gr=rn+$n|0,Pr^=gr<<9|gr>>>23,gr=Pr+rn|0,en^=gr<<13|gr>>>19,gr=en+Pr|0,$n^=gr<<18|gr>>>14,gr=tn+rn|0,sn^=gr<<7|gr>>>25,gr=sn+tn|0,Qr^=gr<<9|gr>>>23,gr=Qr+sn|0,rn^=gr<<13|gr>>>19,gr=rn+Qr|0,tn^=gr<<18|gr>>>14,gr=Xr+nn|0,kr^=gr<<7|gr>>>25,gr=kr+Xr|0,Pr^=gr<<9|gr>>>23,gr=Pr+kr|0,nn^=gr<<13|gr>>>19,gr=nn+Pr|0,Xr^=gr<<18|gr>>>14,gr=Vr+Kr|0,en^=gr<<7|gr>>>25,gr=en+Vr|0,Zr^=gr<<9|gr>>>23,gr=Zr+en|0,Kr^=gr<<13|gr>>>19,gr=Kr+Zr|0,Vr^=gr<<18|gr>>>14,gr=$n+An|0,En^=gr<<7|gr>>>25,gr=En+$n|0,Rn^=gr<<9|gr>>>23,gr=Rn+En|0,An^=gr<<13|gr>>>19,gr=An+Rn|0,$n^=gr<<18|gr>>>14;tn=tn+rr|0,sn=sn+dr|0,Qr=Qr+Rr|0,rn=rn+vr|0,nn=nn+wr|0,Xr=Xr+Yr|0,kr=kr+jr|0,Pr=Pr+mn|0,Zr=Zr+Jr|0,Kr=Kr+cn|0,Vr=Vr+ln|0,en=en+vn|0,En=En+_n|0,Rn=Rn+fn|0,An=An+hn|0,$n=$n+dn|0,Zt[0]=tn>>>0&255,Zt[1]=tn>>>8&255,Zt[2]=tn>>>16&255,Zt[3]=tn>>>24&255,Zt[4]=sn>>>0&255,Zt[5]=sn>>>8&255,Zt[6]=sn>>>16&255,Zt[7]=sn>>>24&255,Zt[8]=Qr>>>0&255,Zt[9]=Qr>>>8&255,Zt[10]=Qr>>>16&255,Zt[11]=Qr>>>24&255,Zt[12]=rn>>>0&255,Zt[13]=rn>>>8&255,Zt[14]=rn>>>16&255,Zt[15]=rn>>>24&255,Zt[16]=nn>>>0&255,Zt[17]=nn>>>8&255,Zt[18]=nn>>>16&255,Zt[19]=nn>>>24&255,Zt[20]=Xr>>>0&255,Zt[21]=Xr>>>8&255,Zt[22]=Xr>>>16&255,Zt[23]=Xr>>>24&255,Zt[24]=kr>>>0&255,Zt[25]=kr>>>8&255,Zt[26]=kr>>>16&255,Zt[27]=kr>>>24&255,Zt[28]=Pr>>>0&255,Zt[29]=Pr>>>8&255,Zt[30]=Pr>>>16&255,Zt[31]=Pr>>>24&255,Zt[32]=Zr>>>0&255,Zt[33]=Zr>>>8&255,Zt[34]=Zr>>>16&255,Zt[35]=Zr>>>24&255,Zt[36]=Kr>>>0&255,Zt[37]=Kr>>>8&255,Zt[38]=Kr>>>16&255,Zt[39]=Kr>>>24&255,Zt[40]=Vr>>>0&255,Zt[41]=Vr>>>8&255,Zt[42]=Vr>>>16&255,Zt[43]=Vr>>>24&255,Zt[44]=en>>>0&255,Zt[45]=en>>>8&255,Zt[46]=en>>>16&255,Zt[47]=en>>>24&255,Zt[48]=En>>>0&255,Zt[49]=En>>>8&255,Zt[50]=En>>>16&255,Zt[51]=En>>>24&255,Zt[52]=Rn>>>0&255,Zt[53]=Rn>>>8&255,Zt[54]=Rn>>>16&255,Zt[55]=Rn>>>24&255,Zt[56]=An>>>0&255,Zt[57]=An>>>8&255,Zt[58]=An>>>16&255,Zt[59]=An>>>24&255,Zt[60]=$n>>>0&255,Zt[61]=$n>>>8&255,Zt[62]=$n>>>16&255,Zt[63]=$n>>>24&255}function Pt(Zt,Qt,Jt,qt){for(var rr=qt[0]&255|(qt[1]&255)<<8|(qt[2]&255)<<16|(qt[3]&255)<<24,dr=Jt[0]&255|(Jt[1]&255)<<8|(Jt[2]&255)<<16|(Jt[3]&255)<<24,Rr=Jt[4]&255|(Jt[5]&255)<<8|(Jt[6]&255)<<16|(Jt[7]&255)<<24,vr=Jt[8]&255|(Jt[9]&255)<<8|(Jt[10]&255)<<16|(Jt[11]&255)<<24,wr=Jt[12]&255|(Jt[13]&255)<<8|(Jt[14]&255)<<16|(Jt[15]&255)<<24,Yr=qt[4]&255|(qt[5]&255)<<8|(qt[6]&255)<<16|(qt[7]&255)<<24,jr=Qt[0]&255|(Qt[1]&255)<<8|(Qt[2]&255)<<16|(Qt[3]&255)<<24,mn=Qt[4]&255|(Qt[5]&255)<<8|(Qt[6]&255)<<16|(Qt[7]&255)<<24,Jr=Qt[8]&255|(Qt[9]&255)<<8|(Qt[10]&255)<<16|(Qt[11]&255)<<24,cn=Qt[12]&255|(Qt[13]&255)<<8|(Qt[14]&255)<<16|(Qt[15]&255)<<24,ln=qt[8]&255|(qt[9]&255)<<8|(qt[10]&255)<<16|(qt[11]&255)<<24,vn=Jt[16]&255|(Jt[17]&255)<<8|(Jt[18]&255)<<16|(Jt[19]&255)<<24,_n=Jt[20]&255|(Jt[21]&255)<<8|(Jt[22]&255)<<16|(Jt[23]&255)<<24,fn=Jt[24]&255|(Jt[25]&255)<<8|(Jt[26]&255)<<16|(Jt[27]&255)<<24,hn=Jt[28]&255|(Jt[29]&255)<<8|(Jt[30]&255)<<16|(Jt[31]&255)<<24,dn=qt[12]&255|(qt[13]&255)<<8|(qt[14]&255)<<16|(qt[15]&255)<<24,tn=rr,sn=dr,Qr=Rr,rn=vr,nn=wr,Xr=Yr,kr=jr,Pr=mn,Zr=Jr,Kr=cn,Vr=ln,en=vn,En=_n,Rn=fn,An=hn,$n=dn,gr,In=0;In<20;In+=2)gr=tn+En|0,nn^=gr<<7|gr>>>25,gr=nn+tn|0,Zr^=gr<<9|gr>>>23,gr=Zr+nn|0,En^=gr<<13|gr>>>19,gr=En+Zr|0,tn^=gr<<18|gr>>>14,gr=Xr+sn|0,Kr^=gr<<7|gr>>>25,gr=Kr+Xr|0,Rn^=gr<<9|gr>>>23,gr=Rn+Kr|0,sn^=gr<<13|gr>>>19,gr=sn+Rn|0,Xr^=gr<<18|gr>>>14,gr=Vr+kr|0,An^=gr<<7|gr>>>25,gr=An+Vr|0,Qr^=gr<<9|gr>>>23,gr=Qr+An|0,kr^=gr<<13|gr>>>19,gr=kr+Qr|0,Vr^=gr<<18|gr>>>14,gr=$n+en|0,rn^=gr<<7|gr>>>25,gr=rn+$n|0,Pr^=gr<<9|gr>>>23,gr=Pr+rn|0,en^=gr<<13|gr>>>19,gr=en+Pr|0,$n^=gr<<18|gr>>>14,gr=tn+rn|0,sn^=gr<<7|gr>>>25,gr=sn+tn|0,Qr^=gr<<9|gr>>>23,gr=Qr+sn|0,rn^=gr<<13|gr>>>19,gr=rn+Qr|0,tn^=gr<<18|gr>>>14,gr=Xr+nn|0,kr^=gr<<7|gr>>>25,gr=kr+Xr|0,Pr^=gr<<9|gr>>>23,gr=Pr+kr|0,nn^=gr<<13|gr>>>19,gr=nn+Pr|0,Xr^=gr<<18|gr>>>14,gr=Vr+Kr|0,en^=gr<<7|gr>>>25,gr=en+Vr|0,Zr^=gr<<9|gr>>>23,gr=Zr+en|0,Kr^=gr<<13|gr>>>19,gr=Kr+Zr|0,Vr^=gr<<18|gr>>>14,gr=$n+An|0,En^=gr<<7|gr>>>25,gr=En+$n|0,Rn^=gr<<9|gr>>>23,gr=Rn+En|0,An^=gr<<13|gr>>>19,gr=An+Rn|0,$n^=gr<<18|gr>>>14;Zt[0]=tn>>>0&255,Zt[1]=tn>>>8&255,Zt[2]=tn>>>16&255,Zt[3]=tn>>>24&255,Zt[4]=Xr>>>0&255,Zt[5]=Xr>>>8&255,Zt[6]=Xr>>>16&255,Zt[7]=Xr>>>24&255,Zt[8]=Vr>>>0&255,Zt[9]=Vr>>>8&255,Zt[10]=Vr>>>16&255,Zt[11]=Vr>>>24&255,Zt[12]=$n>>>0&255,Zt[13]=$n>>>8&255,Zt[14]=$n>>>16&255,Zt[15]=$n>>>24&255,Zt[16]=kr>>>0&255,Zt[17]=kr>>>8&255,Zt[18]=kr>>>16&255,Zt[19]=kr>>>24&255,Zt[20]=Pr>>>0&255,Zt[21]=Pr>>>8&255,Zt[22]=Pr>>>16&255,Zt[23]=Pr>>>24&255,Zt[24]=Zr>>>0&255,Zt[25]=Zr>>>8&255,Zt[26]=Zr>>>16&255,Zt[27]=Zr>>>24&255,Zt[28]=Kr>>>0&255,Zt[29]=Kr>>>8&255,Zt[30]=Kr>>>16&255,Zt[31]=Kr>>>24&255}function Dt(Zt,Qt,Jt,qt){kt(Zt,Qt,Jt,qt)}function Gt(Zt,Qt,Jt,qt){Pt(Zt,Qt,Jt,qt)}var jt=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Yt(Zt,Qt,Jt,qt,rr,dr,Rr){var vr=new Uint8Array(16),wr=new Uint8Array(64),Yr,jr;for(jr=0;jr<16;jr++)vr[jr]=0;for(jr=0;jr<8;jr++)vr[jr]=dr[jr];for(;rr>=64;){for(Dt(wr,vr,Rr,jt),jr=0;jr<64;jr++)Zt[Qt+jr]=Jt[qt+jr]^wr[jr];for(Yr=1,jr=8;jr<16;jr++)Yr=Yr+(vr[jr]&255)|0,vr[jr]=Yr&255,Yr>>>=8;rr-=64,Qt+=64,qt+=64}if(rr>0)for(Dt(wr,vr,Rr,jt),jr=0;jr<rr;jr++)Zt[Qt+jr]=Jt[qt+jr]^wr[jr];return 0}function tr(Zt,Qt,Jt,qt,rr){var dr=new Uint8Array(16),Rr=new Uint8Array(64),vr,wr;for(wr=0;wr<16;wr++)dr[wr]=0;for(wr=0;wr<8;wr++)dr[wr]=qt[wr];for(;Jt>=64;){for(Dt(Rr,dr,rr,jt),wr=0;wr<64;wr++)Zt[Qt+wr]=Rr[wr];for(vr=1,wr=8;wr<16;wr++)vr=vr+(dr[wr]&255)|0,dr[wr]=vr&255,vr>>>=8;Jt-=64,Qt+=64}if(Jt>0)for(Dt(Rr,dr,rr,jt),wr=0;wr<Jt;wr++)Zt[Qt+wr]=Rr[wr];return 0}function er(Zt,Qt,Jt,qt,rr){var dr=new Uint8Array(32);Gt(dr,qt,rr,jt);for(var Rr=new Uint8Array(8),vr=0;vr<8;vr++)Rr[vr]=qt[vr+16];return tr(Zt,Qt,Jt,Rr,dr)}function lr(Zt,Qt,Jt,qt,rr,dr,Rr){var vr=new Uint8Array(32);Gt(vr,dr,Rr,jt);for(var wr=new Uint8Array(8),Yr=0;Yr<8;Yr++)wr[Yr]=dr[Yr+16];return Yt(Zt,Qt,Jt,qt,rr,wr,vr)}var It=function(Zt){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var Qt,Jt,qt,rr,dr,Rr,vr,wr;Qt=Zt[0]&255|(Zt[1]&255)<<8,this.r[0]=Qt&8191,Jt=Zt[2]&255|(Zt[3]&255)<<8,this.r[1]=(Qt>>>13|Jt<<3)&8191,qt=Zt[4]&255|(Zt[5]&255)<<8,this.r[2]=(Jt>>>10|qt<<6)&7939,rr=Zt[6]&255|(Zt[7]&255)<<8,this.r[3]=(qt>>>7|rr<<9)&8191,dr=Zt[8]&255|(Zt[9]&255)<<8,this.r[4]=(rr>>>4|dr<<12)&255,this.r[5]=dr>>>1&8190,Rr=Zt[10]&255|(Zt[11]&255)<<8,this.r[6]=(dr>>>14|Rr<<2)&8191,vr=Zt[12]&255|(Zt[13]&255)<<8,this.r[7]=(Rr>>>11|vr<<5)&8065,wr=Zt[14]&255|(Zt[15]&255)<<8,this.r[8]=(vr>>>8|wr<<8)&8191,this.r[9]=wr>>>5&127,this.pad[0]=Zt[16]&255|(Zt[17]&255)<<8,this.pad[1]=Zt[18]&255|(Zt[19]&255)<<8,this.pad[2]=Zt[20]&255|(Zt[21]&255)<<8,this.pad[3]=Zt[22]&255|(Zt[23]&255)<<8,this.pad[4]=Zt[24]&255|(Zt[25]&255)<<8,this.pad[5]=Zt[26]&255|(Zt[27]&255)<<8,this.pad[6]=Zt[28]&255|(Zt[29]&255)<<8,this.pad[7]=Zt[30]&255|(Zt[31]&255)<<8};It.prototype.blocks=function(Zt,Qt,Jt){for(var qt=this.fin?0:2048,rr,dr,Rr,vr,wr,Yr,jr,mn,Jr,cn,ln,vn,_n,fn,hn,dn,tn,sn,Qr,rn=this.h[0],nn=this.h[1],Xr=this.h[2],kr=this.h[3],Pr=this.h[4],Zr=this.h[5],Kr=this.h[6],Vr=this.h[7],en=this.h[8],En=this.h[9],Rn=this.r[0],An=this.r[1],$n=this.r[2],gr=this.r[3],In=this.r[4],On=this.r[5],Cn=this.r[6],Tn=this.r[7],xn=this.r[8],Nn=this.r[9];Jt>=16;)rr=Zt[Qt+0]&255|(Zt[Qt+1]&255)<<8,rn+=rr&8191,dr=Zt[Qt+2]&255|(Zt[Qt+3]&255)<<8,nn+=(rr>>>13|dr<<3)&8191,Rr=Zt[Qt+4]&255|(Zt[Qt+5]&255)<<8,Xr+=(dr>>>10|Rr<<6)&8191,vr=Zt[Qt+6]&255|(Zt[Qt+7]&255)<<8,kr+=(Rr>>>7|vr<<9)&8191,wr=Zt[Qt+8]&255|(Zt[Qt+9]&255)<<8,Pr+=(vr>>>4|wr<<12)&8191,Zr+=wr>>>1&8191,Yr=Zt[Qt+10]&255|(Zt[Qt+11]&255)<<8,Kr+=(wr>>>14|Yr<<2)&8191,jr=Zt[Qt+12]&255|(Zt[Qt+13]&255)<<8,Vr+=(Yr>>>11|jr<<5)&8191,mn=Zt[Qt+14]&255|(Zt[Qt+15]&255)<<8,en+=(jr>>>8|mn<<8)&8191,En+=mn>>>5|qt,Jr=0,cn=Jr,cn+=rn*Rn,cn+=nn*(5*Nn),cn+=Xr*(5*xn),cn+=kr*(5*Tn),cn+=Pr*(5*Cn),Jr=cn>>>13,cn&=8191,cn+=Zr*(5*On),cn+=Kr*(5*In),cn+=Vr*(5*gr),cn+=en*(5*$n),cn+=En*(5*An),Jr+=cn>>>13,cn&=8191,ln=Jr,ln+=rn*An,ln+=nn*Rn,ln+=Xr*(5*Nn),ln+=kr*(5*xn),ln+=Pr*(5*Tn),Jr=ln>>>13,ln&=8191,ln+=Zr*(5*Cn),ln+=Kr*(5*On),ln+=Vr*(5*In),ln+=en*(5*gr),ln+=En*(5*$n),Jr+=ln>>>13,ln&=8191,vn=Jr,vn+=rn*$n,vn+=nn*An,vn+=Xr*Rn,vn+=kr*(5*Nn),vn+=Pr*(5*xn),Jr=vn>>>13,vn&=8191,vn+=Zr*(5*Tn),vn+=Kr*(5*Cn),vn+=Vr*(5*On),vn+=en*(5*In),vn+=En*(5*gr),Jr+=vn>>>13,vn&=8191,_n=Jr,_n+=rn*gr,_n+=nn*$n,_n+=Xr*An,_n+=kr*Rn,_n+=Pr*(5*Nn),Jr=_n>>>13,_n&=8191,_n+=Zr*(5*xn),_n+=Kr*(5*Tn),_n+=Vr*(5*Cn),_n+=en*(5*On),_n+=En*(5*In),Jr+=_n>>>13,_n&=8191,fn=Jr,fn+=rn*In,fn+=nn*gr,fn+=Xr*$n,fn+=kr*An,fn+=Pr*Rn,Jr=fn>>>13,fn&=8191,fn+=Zr*(5*Nn),fn+=Kr*(5*xn),fn+=Vr*(5*Tn),fn+=en*(5*Cn),fn+=En*(5*On),Jr+=fn>>>13,fn&=8191,hn=Jr,hn+=rn*On,hn+=nn*In,hn+=Xr*gr,hn+=kr*$n,hn+=Pr*An,Jr=hn>>>13,hn&=8191,hn+=Zr*Rn,hn+=Kr*(5*Nn),hn+=Vr*(5*xn),hn+=en*(5*Tn),hn+=En*(5*Cn),Jr+=hn>>>13,hn&=8191,dn=Jr,dn+=rn*Cn,dn+=nn*On,dn+=Xr*In,dn+=kr*gr,dn+=Pr*$n,Jr=dn>>>13,dn&=8191,dn+=Zr*An,dn+=Kr*Rn,dn+=Vr*(5*Nn),dn+=en*(5*xn),dn+=En*(5*Tn),Jr+=dn>>>13,dn&=8191,tn=Jr,tn+=rn*Tn,tn+=nn*Cn,tn+=Xr*On,tn+=kr*In,tn+=Pr*gr,Jr=tn>>>13,tn&=8191,tn+=Zr*$n,tn+=Kr*An,tn+=Vr*Rn,tn+=en*(5*Nn),tn+=En*(5*xn),Jr+=tn>>>13,tn&=8191,sn=Jr,sn+=rn*xn,sn+=nn*Tn,sn+=Xr*Cn,sn+=kr*On,sn+=Pr*In,Jr=sn>>>13,sn&=8191,sn+=Zr*gr,sn+=Kr*$n,sn+=Vr*An,sn+=en*Rn,sn+=En*(5*Nn),Jr+=sn>>>13,sn&=8191,Qr=Jr,Qr+=rn*Nn,Qr+=nn*xn,Qr+=Xr*Tn,Qr+=kr*Cn,Qr+=Pr*On,Jr=Qr>>>13,Qr&=8191,Qr+=Zr*In,Qr+=Kr*gr,Qr+=Vr*$n,Qr+=en*An,Qr+=En*Rn,Jr+=Qr>>>13,Qr&=8191,Jr=(Jr<<2)+Jr|0,Jr=Jr+cn|0,cn=Jr&8191,Jr=Jr>>>13,ln+=Jr,rn=cn,nn=ln,Xr=vn,kr=_n,Pr=fn,Zr=hn,Kr=dn,Vr=tn,en=sn,En=Qr,Qt+=16,Jt-=16;this.h[0]=rn,this.h[1]=nn,this.h[2]=Xr,this.h[3]=kr,this.h[4]=Pr,this.h[5]=Zr,this.h[6]=Kr,this.h[7]=Vr,this.h[8]=en,this.h[9]=En},It.prototype.finish=function(Zt,Qt){var Jt=new Uint16Array(10),qt,rr,dr,Rr;if(this.leftover){for(Rr=this.leftover,this.buffer[Rr++]=1;Rr<16;Rr++)this.buffer[Rr]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(qt=this.h[1]>>>13,this.h[1]&=8191,Rr=2;Rr<10;Rr++)this.h[Rr]+=qt,qt=this.h[Rr]>>>13,this.h[Rr]&=8191;for(this.h[0]+=qt*5,qt=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=qt,qt=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=qt,Jt[0]=this.h[0]+5,qt=Jt[0]>>>13,Jt[0]&=8191,Rr=1;Rr<10;Rr++)Jt[Rr]=this.h[Rr]+qt,qt=Jt[Rr]>>>13,Jt[Rr]&=8191;for(Jt[9]-=8192,rr=(qt^1)-1,Rr=0;Rr<10;Rr++)Jt[Rr]&=rr;for(rr=~rr,Rr=0;Rr<10;Rr++)this.h[Rr]=this.h[Rr]&rr|Jt[Rr];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,dr=this.h[0]+this.pad[0],this.h[0]=dr&65535,Rr=1;Rr<8;Rr++)dr=(this.h[Rr]+this.pad[Rr]|0)+(dr>>>16)|0,this.h[Rr]=dr&65535;Zt[Qt+0]=this.h[0]>>>0&255,Zt[Qt+1]=this.h[0]>>>8&255,Zt[Qt+2]=this.h[1]>>>0&255,Zt[Qt+3]=this.h[1]>>>8&255,Zt[Qt+4]=this.h[2]>>>0&255,Zt[Qt+5]=this.h[2]>>>8&255,Zt[Qt+6]=this.h[3]>>>0&255,Zt[Qt+7]=this.h[3]>>>8&255,Zt[Qt+8]=this.h[4]>>>0&255,Zt[Qt+9]=this.h[4]>>>8&255,Zt[Qt+10]=this.h[5]>>>0&255,Zt[Qt+11]=this.h[5]>>>8&255,Zt[Qt+12]=this.h[6]>>>0&255,Zt[Qt+13]=this.h[6]>>>8&255,Zt[Qt+14]=this.h[7]>>>0&255,Zt[Qt+15]=this.h[7]>>>8&255},It.prototype.update=function(Zt,Qt,Jt){var qt,rr;if(this.leftover){for(rr=16-this.leftover,rr>Jt&&(rr=Jt),qt=0;qt<rr;qt++)this.buffer[this.leftover+qt]=Zt[Qt+qt];if(Jt-=rr,Qt+=rr,this.leftover+=rr,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(Jt>=16&&(rr=Jt-Jt%16,this.blocks(Zt,Qt,rr),Qt+=rr,Jt-=rr),Jt){for(qt=0;qt<Jt;qt++)this.buffer[this.leftover+qt]=Zt[Qt+qt];this.leftover+=Jt}};function ot(Zt,Qt,Jt,qt,rr,dr){var Rr=new It(dr);return Rr.update(Jt,qt,rr),Rr.finish(Zt,Qt),0}function ft(Zt,Qt,Jt,qt,rr,dr){var Rr=new Uint8Array(16);return ot(Rr,0,Jt,qt,rr,dr),Ct(Zt,Qt,Rr,0)}function ht(Zt,Qt,Jt,qt,rr){var dr;if(Jt<32)return-1;for(lr(Zt,0,Qt,0,Jt,qt,rr),ot(Zt,16,Zt,32,Jt-32,Zt),dr=0;dr<16;dr++)Zt[dr]=0;return 0}function vt(Zt,Qt,Jt,qt,rr){var dr,Rr=new Uint8Array(32);if(Jt<32||(er(Rr,0,32,qt,rr),ft(Qt,16,Qt,32,Jt-32,Rr)!==0))return-1;for(lr(Zt,0,Qt,0,Jt,qt,rr),dr=0;dr<32;dr++)Zt[dr]=0;return 0}function wt(Zt,Qt){var Jt;for(Jt=0;Jt<16;Jt++)Zt[Jt]=Qt[Jt]|0}function bt(Zt){var Qt,Jt,qt=1;for(Qt=0;Qt<16;Qt++)Jt=Zt[Qt]+qt+65535,qt=Math.floor(Jt/65536),Zt[Qt]=Jt-qt*65536;Zt[0]+=qt-1+37*(qt-1)}function $t(Zt,Qt,Jt){for(var qt,rr=~(Jt-1),dr=0;dr<16;dr++)qt=rr&(Zt[dr]^Qt[dr]),Zt[dr]^=qt,Qt[dr]^=qt}function Et(Zt,Qt){var Jt,qt,rr,dr=rt(),Rr=rt();for(Jt=0;Jt<16;Jt++)Rr[Jt]=Qt[Jt];for(bt(Rr),bt(Rr),bt(Rr),qt=0;qt<2;qt++){for(dr[0]=Rr[0]-65517,Jt=1;Jt<15;Jt++)dr[Jt]=Rr[Jt]-65535-(dr[Jt-1]>>16&1),dr[Jt-1]&=65535;dr[15]=Rr[15]-32767-(dr[14]>>16&1),rr=dr[15]>>16&1,dr[14]&=65535,$t(Rr,dr,1-rr)}for(Jt=0;Jt<16;Jt++)Zt[2*Jt]=Rr[Jt]&255,Zt[2*Jt+1]=Rr[Jt]>>8}function ct(Zt,Qt){var Jt=new Uint8Array(32),qt=new Uint8Array(32);return Et(Jt,Zt),Et(qt,Qt),Ot(Jt,0,qt,0)}function St(Zt){var Qt=new Uint8Array(32);return Et(Qt,Zt),Qt[0]&1}function Mt(Zt,Qt){var Jt;for(Jt=0;Jt<16;Jt++)Zt[Jt]=Qt[2*Jt]+(Qt[2*Jt+1]<<8);Zt[15]&=32767}function Lt(Zt,Qt,Jt){for(var qt=0;qt<16;qt++)Zt[qt]=Qt[qt]+Jt[qt]}function Ut(Zt,Qt,Jt){for(var qt=0;qt<16;qt++)Zt[qt]=Qt[qt]-Jt[qt]}function Kt(Zt,Qt,Jt){var qt,rr,dr=0,Rr=0,vr=0,wr=0,Yr=0,jr=0,mn=0,Jr=0,cn=0,ln=0,vn=0,_n=0,fn=0,hn=0,dn=0,tn=0,sn=0,Qr=0,rn=0,nn=0,Xr=0,kr=0,Pr=0,Zr=0,Kr=0,Vr=0,en=0,En=0,Rn=0,An=0,$n=0,gr=Jt[0],In=Jt[1],On=Jt[2],Cn=Jt[3],Tn=Jt[4],xn=Jt[5],Nn=Jt[6],Dn=Jt[7],Mn=Jt[8],kn=Jt[9],Pn=Jt[10],Ln=Jt[11],Bn=Jt[12],Fn=Jt[13],Gn=Jt[14],qn=Jt[15];qt=Qt[0],dr+=qt*gr,Rr+=qt*In,vr+=qt*On,wr+=qt*Cn,Yr+=qt*Tn,jr+=qt*xn,mn+=qt*Nn,Jr+=qt*Dn,cn+=qt*Mn,ln+=qt*kn,vn+=qt*Pn,_n+=qt*Ln,fn+=qt*Bn,hn+=qt*Fn,dn+=qt*Gn,tn+=qt*qn,qt=Qt[1],Rr+=qt*gr,vr+=qt*In,wr+=qt*On,Yr+=qt*Cn,jr+=qt*Tn,mn+=qt*xn,Jr+=qt*Nn,cn+=qt*Dn,ln+=qt*Mn,vn+=qt*kn,_n+=qt*Pn,fn+=qt*Ln,hn+=qt*Bn,dn+=qt*Fn,tn+=qt*Gn,sn+=qt*qn,qt=Qt[2],vr+=qt*gr,wr+=qt*In,Yr+=qt*On,jr+=qt*Cn,mn+=qt*Tn,Jr+=qt*xn,cn+=qt*Nn,ln+=qt*Dn,vn+=qt*Mn,_n+=qt*kn,fn+=qt*Pn,hn+=qt*Ln,dn+=qt*Bn,tn+=qt*Fn,sn+=qt*Gn,Qr+=qt*qn,qt=Qt[3],wr+=qt*gr,Yr+=qt*In,jr+=qt*On,mn+=qt*Cn,Jr+=qt*Tn,cn+=qt*xn,ln+=qt*Nn,vn+=qt*Dn,_n+=qt*Mn,fn+=qt*kn,hn+=qt*Pn,dn+=qt*Ln,tn+=qt*Bn,sn+=qt*Fn,Qr+=qt*Gn,rn+=qt*qn,qt=Qt[4],Yr+=qt*gr,jr+=qt*In,mn+=qt*On,Jr+=qt*Cn,cn+=qt*Tn,ln+=qt*xn,vn+=qt*Nn,_n+=qt*Dn,fn+=qt*Mn,hn+=qt*kn,dn+=qt*Pn,tn+=qt*Ln,sn+=qt*Bn,Qr+=qt*Fn,rn+=qt*Gn,nn+=qt*qn,qt=Qt[5],jr+=qt*gr,mn+=qt*In,Jr+=qt*On,cn+=qt*Cn,ln+=qt*Tn,vn+=qt*xn,_n+=qt*Nn,fn+=qt*Dn,hn+=qt*Mn,dn+=qt*kn,tn+=qt*Pn,sn+=qt*Ln,Qr+=qt*Bn,rn+=qt*Fn,nn+=qt*Gn,Xr+=qt*qn,qt=Qt[6],mn+=qt*gr,Jr+=qt*In,cn+=qt*On,ln+=qt*Cn,vn+=qt*Tn,_n+=qt*xn,fn+=qt*Nn,hn+=qt*Dn,dn+=qt*Mn,tn+=qt*kn,sn+=qt*Pn,Qr+=qt*Ln,rn+=qt*Bn,nn+=qt*Fn,Xr+=qt*Gn,kr+=qt*qn,qt=Qt[7],Jr+=qt*gr,cn+=qt*In,ln+=qt*On,vn+=qt*Cn,_n+=qt*Tn,fn+=qt*xn,hn+=qt*Nn,dn+=qt*Dn,tn+=qt*Mn,sn+=qt*kn,Qr+=qt*Pn,rn+=qt*Ln,nn+=qt*Bn,Xr+=qt*Fn,kr+=qt*Gn,Pr+=qt*qn,qt=Qt[8],cn+=qt*gr,ln+=qt*In,vn+=qt*On,_n+=qt*Cn,fn+=qt*Tn,hn+=qt*xn,dn+=qt*Nn,tn+=qt*Dn,sn+=qt*Mn,Qr+=qt*kn,rn+=qt*Pn,nn+=qt*Ln,Xr+=qt*Bn,kr+=qt*Fn,Pr+=qt*Gn,Zr+=qt*qn,qt=Qt[9],ln+=qt*gr,vn+=qt*In,_n+=qt*On,fn+=qt*Cn,hn+=qt*Tn,dn+=qt*xn,tn+=qt*Nn,sn+=qt*Dn,Qr+=qt*Mn,rn+=qt*kn,nn+=qt*Pn,Xr+=qt*Ln,kr+=qt*Bn,Pr+=qt*Fn,Zr+=qt*Gn,Kr+=qt*qn,qt=Qt[10],vn+=qt*gr,_n+=qt*In,fn+=qt*On,hn+=qt*Cn,dn+=qt*Tn,tn+=qt*xn,sn+=qt*Nn,Qr+=qt*Dn,rn+=qt*Mn,nn+=qt*kn,Xr+=qt*Pn,kr+=qt*Ln,Pr+=qt*Bn,Zr+=qt*Fn,Kr+=qt*Gn,Vr+=qt*qn,qt=Qt[11],_n+=qt*gr,fn+=qt*In,hn+=qt*On,dn+=qt*Cn,tn+=qt*Tn,sn+=qt*xn,Qr+=qt*Nn,rn+=qt*Dn,nn+=qt*Mn,Xr+=qt*kn,kr+=qt*Pn,Pr+=qt*Ln,Zr+=qt*Bn,Kr+=qt*Fn,Vr+=qt*Gn,en+=qt*qn,qt=Qt[12],fn+=qt*gr,hn+=qt*In,dn+=qt*On,tn+=qt*Cn,sn+=qt*Tn,Qr+=qt*xn,rn+=qt*Nn,nn+=qt*Dn,Xr+=qt*Mn,kr+=qt*kn,Pr+=qt*Pn,Zr+=qt*Ln,Kr+=qt*Bn,Vr+=qt*Fn,en+=qt*Gn,En+=qt*qn,qt=Qt[13],hn+=qt*gr,dn+=qt*In,tn+=qt*On,sn+=qt*Cn,Qr+=qt*Tn,rn+=qt*xn,nn+=qt*Nn,Xr+=qt*Dn,kr+=qt*Mn,Pr+=qt*kn,Zr+=qt*Pn,Kr+=qt*Ln,Vr+=qt*Bn,en+=qt*Fn,En+=qt*Gn,Rn+=qt*qn,qt=Qt[14],dn+=qt*gr,tn+=qt*In,sn+=qt*On,Qr+=qt*Cn,rn+=qt*Tn,nn+=qt*xn,Xr+=qt*Nn,kr+=qt*Dn,Pr+=qt*Mn,Zr+=qt*kn,Kr+=qt*Pn,Vr+=qt*Ln,en+=qt*Bn,En+=qt*Fn,Rn+=qt*Gn,An+=qt*qn,qt=Qt[15],tn+=qt*gr,sn+=qt*In,Qr+=qt*On,rn+=qt*Cn,nn+=qt*Tn,Xr+=qt*xn,kr+=qt*Nn,Pr+=qt*Dn,Zr+=qt*Mn,Kr+=qt*kn,Vr+=qt*Pn,en+=qt*Ln,En+=qt*Bn,Rn+=qt*Fn,An+=qt*Gn,$n+=qt*qn,dr+=38*sn,Rr+=38*Qr,vr+=38*rn,wr+=38*nn,Yr+=38*Xr,jr+=38*kr,mn+=38*Pr,Jr+=38*Zr,cn+=38*Kr,ln+=38*Vr,vn+=38*en,_n+=38*En,fn+=38*Rn,hn+=38*An,dn+=38*$n,rr=1,qt=dr+rr+65535,rr=Math.floor(qt/65536),dr=qt-rr*65536,qt=Rr+rr+65535,rr=Math.floor(qt/65536),Rr=qt-rr*65536,qt=vr+rr+65535,rr=Math.floor(qt/65536),vr=qt-rr*65536,qt=wr+rr+65535,rr=Math.floor(qt/65536),wr=qt-rr*65536,qt=Yr+rr+65535,rr=Math.floor(qt/65536),Yr=qt-rr*65536,qt=jr+rr+65535,rr=Math.floor(qt/65536),jr=qt-rr*65536,qt=mn+rr+65535,rr=Math.floor(qt/65536),mn=qt-rr*65536,qt=Jr+rr+65535,rr=Math.floor(qt/65536),Jr=qt-rr*65536,qt=cn+rr+65535,rr=Math.floor(qt/65536),cn=qt-rr*65536,qt=ln+rr+65535,rr=Math.floor(qt/65536),ln=qt-rr*65536,qt=vn+rr+65535,rr=Math.floor(qt/65536),vn=qt-rr*65536,qt=_n+rr+65535,rr=Math.floor(qt/65536),_n=qt-rr*65536,qt=fn+rr+65535,rr=Math.floor(qt/65536),fn=qt-rr*65536,qt=hn+rr+65535,rr=Math.floor(qt/65536),hn=qt-rr*65536,qt=dn+rr+65535,rr=Math.floor(qt/65536),dn=qt-rr*65536,qt=tn+rr+65535,rr=Math.floor(qt/65536),tn=qt-rr*65536,dr+=rr-1+37*(rr-1),rr=1,qt=dr+rr+65535,rr=Math.floor(qt/65536),dr=qt-rr*65536,qt=Rr+rr+65535,rr=Math.floor(qt/65536),Rr=qt-rr*65536,qt=vr+rr+65535,rr=Math.floor(qt/65536),vr=qt-rr*65536,qt=wr+rr+65535,rr=Math.floor(qt/65536),wr=qt-rr*65536,qt=Yr+rr+65535,rr=Math.floor(qt/65536),Yr=qt-rr*65536,qt=jr+rr+65535,rr=Math.floor(qt/65536),jr=qt-rr*65536,qt=mn+rr+65535,rr=Math.floor(qt/65536),mn=qt-rr*65536,qt=Jr+rr+65535,rr=Math.floor(qt/65536),Jr=qt-rr*65536,qt=cn+rr+65535,rr=Math.floor(qt/65536),cn=qt-rr*65536,qt=ln+rr+65535,rr=Math.floor(qt/65536),ln=qt-rr*65536,qt=vn+rr+65535,rr=Math.floor(qt/65536),vn=qt-rr*65536,qt=_n+rr+65535,rr=Math.floor(qt/65536),_n=qt-rr*65536,qt=fn+rr+65535,rr=Math.floor(qt/65536),fn=qt-rr*65536,qt=hn+rr+65535,rr=Math.floor(qt/65536),hn=qt-rr*65536,qt=dn+rr+65535,rr=Math.floor(qt/65536),dn=qt-rr*65536,qt=tn+rr+65535,rr=Math.floor(qt/65536),tn=qt-rr*65536,dr+=rr-1+37*(rr-1),Zt[0]=dr,Zt[1]=Rr,Zt[2]=vr,Zt[3]=wr,Zt[4]=Yr,Zt[5]=jr,Zt[6]=mn,Zt[7]=Jr,Zt[8]=cn,Zt[9]=ln,Zt[10]=vn,Zt[11]=_n,Zt[12]=fn,Zt[13]=hn,Zt[14]=dn,Zt[15]=tn}function Ht(Zt,Qt){Kt(Zt,Qt,Qt)}function Ft(Zt,Qt){var Jt=rt(),qt;for(qt=0;qt<16;qt++)Jt[qt]=Qt[qt];for(qt=253;qt>=0;qt--)Ht(Jt,Jt),qt!==2&&qt!==4&&Kt(Jt,Jt,Qt);for(qt=0;qt<16;qt++)Zt[qt]=Jt[qt]}function zt(Zt,Qt){var Jt=rt(),qt;for(qt=0;qt<16;qt++)Jt[qt]=Qt[qt];for(qt=250;qt>=0;qt--)Ht(Jt,Jt),qt!==1&&Kt(Jt,Jt,Qt);for(qt=0;qt<16;qt++)Zt[qt]=Jt[qt]}function ir(Zt,Qt,Jt){var qt=new Uint8Array(32),rr=new Float64Array(80),dr,Rr,vr=rt(),wr=rt(),Yr=rt(),jr=rt(),mn=rt(),Jr=rt();for(Rr=0;Rr<31;Rr++)qt[Rr]=Qt[Rr];for(qt[31]=Qt[31]&127|64,qt[0]&=248,Mt(rr,Jt),Rr=0;Rr<16;Rr++)wr[Rr]=rr[Rr],jr[Rr]=vr[Rr]=Yr[Rr]=0;for(vr[0]=jr[0]=1,Rr=254;Rr>=0;--Rr)dr=qt[Rr>>>3]>>>(Rr&7)&1,$t(vr,wr,dr),$t(Yr,jr,dr),Lt(mn,vr,Yr),Ut(vr,vr,Yr),Lt(Yr,wr,jr),Ut(wr,wr,jr),Ht(jr,mn),Ht(Jr,vr),Kt(vr,Yr,vr),Kt(Yr,wr,mn),Lt(mn,vr,Yr),Ut(vr,vr,Yr),Ht(wr,vr),Ut(Yr,jr,Jr),Kt(vr,Yr,pt),Lt(vr,vr,jr),Kt(Yr,Yr,vr),Kt(vr,jr,Jr),Kt(jr,wr,rr),Ht(wr,mn),$t(vr,wr,dr),$t(Yr,jr,dr);for(Rr=0;Rr<16;Rr++)rr[Rr+16]=vr[Rr],rr[Rr+32]=Yr[Rr],rr[Rr+48]=wr[Rr],rr[Rr+64]=jr[Rr];var cn=rr.subarray(32),ln=rr.subarray(16);return Ft(cn,cn),Kt(ln,ln,cn),Et(Zt,ln),0}function sr(Zt,Qt){return ir(Zt,Qt,it)}function ar(Zt,Qt){return nt(Qt,32),sr(Zt,Qt)}function Vt(Zt,Qt,Jt){var qt=new Uint8Array(32);return ir(qt,Jt,Qt),Gt(Zt,at,qt,jt)}var fr=ht,Gr=vt;function ur(Zt,Qt,Jt,qt,rr,dr){var Rr=new Uint8Array(32);return Vt(Rr,rr,dr),fr(Zt,Qt,Jt,qt,Rr)}function pr(Zt,Qt,Jt,qt,rr,dr){var Rr=new Uint8Array(32);return Vt(Rr,rr,dr),Gr(Zt,Qt,Jt,qt,Rr)}var Fr=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function yr(Zt,Qt,Jt,qt){for(var rr=new Int32Array(16),dr=new Int32Array(16),Rr,vr,wr,Yr,jr,mn,Jr,cn,ln,vn,_n,fn,hn,dn,tn,sn,Qr,rn,nn,Xr,kr,Pr,Zr,Kr,Vr,en,En=Zt[0],Rn=Zt[1],An=Zt[2],$n=Zt[3],gr=Zt[4],In=Zt[5],On=Zt[6],Cn=Zt[7],Tn=Qt[0],xn=Qt[1],Nn=Qt[2],Dn=Qt[3],Mn=Qt[4],kn=Qt[5],Pn=Qt[6],Ln=Qt[7],Bn=0;qt>=128;){for(nn=0;nn<16;nn++)Xr=8*nn+Bn,rr[nn]=Jt[Xr+0]<<24|Jt[Xr+1]<<16|Jt[Xr+2]<<8|Jt[Xr+3],dr[nn]=Jt[Xr+4]<<24|Jt[Xr+5]<<16|Jt[Xr+6]<<8|Jt[Xr+7];for(nn=0;nn<80;nn++)if(Rr=En,vr=Rn,wr=An,Yr=$n,jr=gr,mn=In,Jr=On,cn=Cn,ln=Tn,vn=xn,_n=Nn,fn=Dn,hn=Mn,dn=kn,tn=Pn,sn=Ln,kr=Cn,Pr=Ln,Zr=Pr&65535,Kr=Pr>>>16,Vr=kr&65535,en=kr>>>16,kr=(gr>>>14|Mn<<18)^(gr>>>18|Mn<<14)^(Mn>>>9|gr<<23),Pr=(Mn>>>14|gr<<18)^(Mn>>>18|gr<<14)^(gr>>>9|Mn<<23),Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,kr=gr&In^~gr&On,Pr=Mn&kn^~Mn&Pn,Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,kr=Fr[nn*2],Pr=Fr[nn*2+1],Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,kr=rr[nn%16],Pr=dr[nn%16],Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Kr+=Zr>>>16,Vr+=Kr>>>16,en+=Vr>>>16,Qr=Vr&65535|en<<16,rn=Zr&65535|Kr<<16,kr=Qr,Pr=rn,Zr=Pr&65535,Kr=Pr>>>16,Vr=kr&65535,en=kr>>>16,kr=(En>>>28|Tn<<4)^(Tn>>>2|En<<30)^(Tn>>>7|En<<25),Pr=(Tn>>>28|En<<4)^(En>>>2|Tn<<30)^(En>>>7|Tn<<25),Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,kr=En&Rn^En&An^Rn&An,Pr=Tn&xn^Tn&Nn^xn&Nn,Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Kr+=Zr>>>16,Vr+=Kr>>>16,en+=Vr>>>16,cn=Vr&65535|en<<16,sn=Zr&65535|Kr<<16,kr=Yr,Pr=fn,Zr=Pr&65535,Kr=Pr>>>16,Vr=kr&65535,en=kr>>>16,kr=Qr,Pr=rn,Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Kr+=Zr>>>16,Vr+=Kr>>>16,en+=Vr>>>16,Yr=Vr&65535|en<<16,fn=Zr&65535|Kr<<16,Rn=Rr,An=vr,$n=wr,gr=Yr,In=jr,On=mn,Cn=Jr,En=cn,xn=ln,Nn=vn,Dn=_n,Mn=fn,kn=hn,Pn=dn,Ln=tn,Tn=sn,nn%16===15)for(Xr=0;Xr<16;Xr++)kr=rr[Xr],Pr=dr[Xr],Zr=Pr&65535,Kr=Pr>>>16,Vr=kr&65535,en=kr>>>16,kr=rr[(Xr+9)%16],Pr=dr[(Xr+9)%16],Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Qr=rr[(Xr+1)%16],rn=dr[(Xr+1)%16],kr=(Qr>>>1|rn<<31)^(Qr>>>8|rn<<24)^Qr>>>7,Pr=(rn>>>1|Qr<<31)^(rn>>>8|Qr<<24)^(rn>>>7|Qr<<25),Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Qr=rr[(Xr+14)%16],rn=dr[(Xr+14)%16],kr=(Qr>>>19|rn<<13)^(rn>>>29|Qr<<3)^Qr>>>6,Pr=(rn>>>19|Qr<<13)^(Qr>>>29|rn<<3)^(rn>>>6|Qr<<26),Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Kr+=Zr>>>16,Vr+=Kr>>>16,en+=Vr>>>16,rr[Xr]=Vr&65535|en<<16,dr[Xr]=Zr&65535|Kr<<16;kr=En,Pr=Tn,Zr=Pr&65535,Kr=Pr>>>16,Vr=kr&65535,en=kr>>>16,kr=Zt[0],Pr=Qt[0],Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Kr+=Zr>>>16,Vr+=Kr>>>16,en+=Vr>>>16,Zt[0]=En=Vr&65535|en<<16,Qt[0]=Tn=Zr&65535|Kr<<16,kr=Rn,Pr=xn,Zr=Pr&65535,Kr=Pr>>>16,Vr=kr&65535,en=kr>>>16,kr=Zt[1],Pr=Qt[1],Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Kr+=Zr>>>16,Vr+=Kr>>>16,en+=Vr>>>16,Zt[1]=Rn=Vr&65535|en<<16,Qt[1]=xn=Zr&65535|Kr<<16,kr=An,Pr=Nn,Zr=Pr&65535,Kr=Pr>>>16,Vr=kr&65535,en=kr>>>16,kr=Zt[2],Pr=Qt[2],Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Kr+=Zr>>>16,Vr+=Kr>>>16,en+=Vr>>>16,Zt[2]=An=Vr&65535|en<<16,Qt[2]=Nn=Zr&65535|Kr<<16,kr=$n,Pr=Dn,Zr=Pr&65535,Kr=Pr>>>16,Vr=kr&65535,en=kr>>>16,kr=Zt[3],Pr=Qt[3],Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Kr+=Zr>>>16,Vr+=Kr>>>16,en+=Vr>>>16,Zt[3]=$n=Vr&65535|en<<16,Qt[3]=Dn=Zr&65535|Kr<<16,kr=gr,Pr=Mn,Zr=Pr&65535,Kr=Pr>>>16,Vr=kr&65535,en=kr>>>16,kr=Zt[4],Pr=Qt[4],Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Kr+=Zr>>>16,Vr+=Kr>>>16,en+=Vr>>>16,Zt[4]=gr=Vr&65535|en<<16,Qt[4]=Mn=Zr&65535|Kr<<16,kr=In,Pr=kn,Zr=Pr&65535,Kr=Pr>>>16,Vr=kr&65535,en=kr>>>16,kr=Zt[5],Pr=Qt[5],Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Kr+=Zr>>>16,Vr+=Kr>>>16,en+=Vr>>>16,Zt[5]=In=Vr&65535|en<<16,Qt[5]=kn=Zr&65535|Kr<<16,kr=On,Pr=Pn,Zr=Pr&65535,Kr=Pr>>>16,Vr=kr&65535,en=kr>>>16,kr=Zt[6],Pr=Qt[6],Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Kr+=Zr>>>16,Vr+=Kr>>>16,en+=Vr>>>16,Zt[6]=On=Vr&65535|en<<16,Qt[6]=Pn=Zr&65535|Kr<<16,kr=Cn,Pr=Ln,Zr=Pr&65535,Kr=Pr>>>16,Vr=kr&65535,en=kr>>>16,kr=Zt[7],Pr=Qt[7],Zr+=Pr&65535,Kr+=Pr>>>16,Vr+=kr&65535,en+=kr>>>16,Kr+=Zr>>>16,Vr+=Kr>>>16,en+=Vr>>>16,Zt[7]=Cn=Vr&65535|en<<16,Qt[7]=Ln=Zr&65535|Kr<<16,Bn+=128,qt-=128}return qt}function hr(Zt,Qt,Jt){var qt=new Int32Array(8),rr=new Int32Array(8),dr=new Uint8Array(256),Rr,vr=Jt;for(qt[0]=1779033703,qt[1]=3144134277,qt[2]=1013904242,qt[3]=2773480762,qt[4]=1359893119,qt[5]=2600822924,qt[6]=528734635,qt[7]=1541459225,rr[0]=4089235720,rr[1]=2227873595,rr[2]=4271175723,rr[3]=1595750129,rr[4]=2917565137,rr[5]=725511199,rr[6]=4215389547,rr[7]=327033209,yr(qt,rr,Qt,Jt),Jt%=128,Rr=0;Rr<Jt;Rr++)dr[Rr]=Qt[vr-Jt+Rr];for(dr[Jt]=128,Jt=256-128*(Jt<112?1:0),dr[Jt-9]=0,xt(dr,Jt-8,vr/536870912|0,vr<<3),yr(qt,rr,dr,Jt),Rr=0;Rr<8;Rr++)xt(Zt,8*Rr,qt[Rr],rr[Rr]);return 0}function Wr(Zt,Qt){var Jt=rt(),qt=rt(),rr=rt(),dr=rt(),Rr=rt(),vr=rt(),wr=rt(),Yr=rt(),jr=rt();Ut(Jt,Zt[1],Zt[0]),Ut(jr,Qt[1],Qt[0]),Kt(Jt,Jt,jr),Lt(qt,Zt[0],Zt[1]),Lt(jr,Qt[0],Qt[1]),Kt(qt,qt,jr),Kt(rr,Zt[3],Qt[3]),Kt(rr,rr,yt),Kt(dr,Zt[2],Qt[2]),Lt(dr,dr,dr),Ut(Rr,qt,Jt),Ut(vr,dr,rr),Lt(wr,dr,rr),Lt(Yr,qt,Jt),Kt(Zt[0],Rr,vr),Kt(Zt[1],Yr,wr),Kt(Zt[2],wr,vr),Kt(Zt[3],Rr,Yr)}function $r(Zt,Qt,Jt){var qt;for(qt=0;qt<4;qt++)$t(Zt[qt],Qt[qt],Jt)}function Cr(Zt,Qt){var Jt=rt(),qt=rt(),rr=rt();Ft(rr,Qt[2]),Kt(Jt,Qt[0],rr),Kt(qt,Qt[1],rr),Et(Zt,qt),Zt[31]^=St(Jt)<<7}function an(Zt,Qt,Jt){var qt,rr;for(wt(Zt[0],st),wt(Zt[1],dt),wt(Zt[2],dt),wt(Zt[3],st),rr=255;rr>=0;--rr)qt=Jt[rr/8|0]>>(rr&7)&1,$r(Zt,Qt,qt),Wr(Qt,Zt),Wr(Zt,Zt),$r(Zt,Qt,qt)}function Er(Zt,Qt){var Jt=[rt(),rt(),rt(),rt()];wt(Jt[0],Rt),wt(Jt[1],Tt),wt(Jt[2],dt),Kt(Jt[3],Rt,Tt),an(Zt,Jt,Qt)}function Ar(Zt,Qt,Jt){var qt=new Uint8Array(64),rr=[rt(),rt(),rt(),rt()],dr;for(Jt||nt(Qt,32),hr(qt,Qt,32),qt[0]&=248,qt[31]&=127,qt[31]|=64,Er(rr,qt),Cr(Zt,rr),dr=0;dr<32;dr++)Qt[dr+32]=Zt[dr];return 0}var gn=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Or(Zt,Qt){var Jt,qt,rr,dr;for(qt=63;qt>=32;--qt){for(Jt=0,rr=qt-32,dr=qt-12;rr<dr;++rr)Qt[rr]+=Jt-16*Qt[qt]*gn[rr-(qt-32)],Jt=Math.floor((Qt[rr]+128)/256),Qt[rr]-=Jt*256;Qt[rr]+=Jt,Qt[qt]=0}for(Jt=0,rr=0;rr<32;rr++)Qt[rr]+=Jt-(Qt[31]>>4)*gn[rr],Jt=Qt[rr]>>8,Qt[rr]&=255;for(rr=0;rr<32;rr++)Qt[rr]-=Jt*gn[rr];for(qt=0;qt<32;qt++)Qt[qt+1]+=Qt[qt]>>8,Zt[qt]=Qt[qt]&255}function Lr(Zt){var Qt=new Float64Array(64),Jt;for(Jt=0;Jt<64;Jt++)Qt[Jt]=Zt[Jt];for(Jt=0;Jt<64;Jt++)Zt[Jt]=0;Or(Zt,Qt)}function wn(Zt,Qt,Jt,qt){var rr=new Uint8Array(64),dr=new Uint8Array(64),Rr=new Uint8Array(64),vr,wr,Yr=new Float64Array(64),jr=[rt(),rt(),rt(),rt()];hr(rr,qt,32),rr[0]&=248,rr[31]&=127,rr[31]|=64;var mn=Jt+64;for(vr=0;vr<Jt;vr++)Zt[64+vr]=Qt[vr];for(vr=0;vr<32;vr++)Zt[32+vr]=rr[32+vr];for(hr(Rr,Zt.subarray(32),Jt+32),Lr(Rr),Er(jr,Rr),Cr(Zt,jr),vr=32;vr<64;vr++)Zt[vr]=qt[vr];for(hr(dr,Zt,Jt+64),Lr(dr),vr=0;vr<64;vr++)Yr[vr]=0;for(vr=0;vr<32;vr++)Yr[vr]=Rr[vr];for(vr=0;vr<32;vr++)for(wr=0;wr<32;wr++)Yr[vr+wr]+=dr[vr]*rr[wr];return Or(Zt.subarray(32),Yr),mn}function Xt(Zt,Qt){var Jt=rt(),qt=rt(),rr=rt(),dr=rt(),Rr=rt(),vr=rt(),wr=rt();return wt(Zt[2],dt),Mt(Zt[1],Qt),Ht(rr,Zt[1]),Kt(dr,rr,mt),Ut(rr,rr,Zt[2]),Lt(dr,Zt[2],dr),Ht(Rr,dr),Ht(vr,Rr),Kt(wr,vr,Rr),Kt(Jt,wr,rr),Kt(Jt,Jt,dr),zt(Jt,Jt),Kt(Jt,Jt,rr),Kt(Jt,Jt,dr),Kt(Jt,Jt,dr),Kt(Zt[0],Jt,dr),Ht(qt,Zt[0]),Kt(qt,qt,dr),ct(qt,rr)&&Kt(Zt[0],Zt[0],At),Ht(qt,Zt[0]),Kt(qt,qt,dr),ct(qt,rr)?-1:(St(Zt[0])===Qt[31]>>7&&Ut(Zt[0],st,Zt[0]),Kt(Zt[3],Zt[0],Zt[1]),0)}function Bt(Zt,Qt,Jt,qt){var rr,dr=new Uint8Array(32),Rr=new Uint8Array(64),vr=[rt(),rt(),rt(),rt()],wr=[rt(),rt(),rt(),rt()];if(Jt<64||Xt(wr,qt))return-1;for(rr=0;rr<Jt;rr++)Zt[rr]=Qt[rr];for(rr=0;rr<32;rr++)Zt[rr+32]=qt[rr];if(hr(Rr,Zt,Jt),Lr(Rr),an(vr,wr,Rr),Er(wr,Qt.subarray(32)),Wr(vr,wr),Cr(dr,vr),Jt-=64,Ot(Qt,0,dr,0)){for(rr=0;rr<Jt;rr++)Zt[rr]=0;return-1}for(rr=0;rr<Jt;rr++)Zt[rr]=Qt[rr+64];return Jt}var Wt=32,nr=24,cr=32,Sr=16,_r=32,xr=32,pn=32,Tr=32,Ur=32,un=nr,Ir=cr,Nr=Sr,zr=64,br=32,Dr=64,yn=32,Mr=64;et.lowlevel={crypto_core_hsalsa20:Gt,crypto_stream_xor:lr,crypto_stream:er,crypto_stream_salsa20_xor:Yt,crypto_stream_salsa20:tr,crypto_onetimeauth:ot,crypto_onetimeauth_verify:ft,crypto_verify_16:Ct,crypto_verify_32:Ot,crypto_secretbox:ht,crypto_secretbox_open:vt,crypto_scalarmult:ir,crypto_scalarmult_base:sr,crypto_box_beforenm:Vt,crypto_box_afternm:fr,crypto_box:ur,crypto_box_open:pr,crypto_box_keypair:ar,crypto_hash:hr,crypto_sign:wn,crypto_sign_keypair:Ar,crypto_sign_open:Bt,crypto_secretbox_KEYBYTES:Wt,crypto_secretbox_NONCEBYTES:nr,crypto_secretbox_ZEROBYTES:cr,crypto_secretbox_BOXZEROBYTES:Sr,crypto_scalarmult_BYTES:_r,crypto_scalarmult_SCALARBYTES:xr,crypto_box_PUBLICKEYBYTES:pn,crypto_box_SECRETKEYBYTES:Tr,crypto_box_BEFORENMBYTES:Ur,crypto_box_NONCEBYTES:un,crypto_box_ZEROBYTES:Ir,crypto_box_BOXZEROBYTES:Nr,crypto_sign_BYTES:zr,crypto_sign_PUBLICKEYBYTES:br,crypto_sign_SECRETKEYBYTES:Dr,crypto_sign_SEEDBYTES:yn,crypto_hash_BYTES:Mr,gf:rt,D:mt,L:gn,pack25519:Et,unpack25519:Mt,M:Kt,A:Lt,S:Ht,Z:Ut,pow2523:zt,add:Wr,set25519:wt,modL:Or,scalarmult:an,scalarbase:Er};function qr(Zt,Qt){if(Zt.length!==Wt)throw new Error("bad key size");if(Qt.length!==nr)throw new Error("bad nonce size")}function Sn(Zt,Qt){if(Zt.length!==pn)throw new Error("bad public key size");if(Qt.length!==Tr)throw new Error("bad secret key size")}function Br(){for(var Zt=0;Zt<arguments.length;Zt++)if(!(arguments[Zt]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Hr(Zt){for(var Qt=0;Qt<Zt.length;Qt++)Zt[Qt]=0}et.randomBytes=function(Zt){var Qt=new Uint8Array(Zt);return nt(Qt,Zt),Qt},et.secretbox=function(Zt,Qt,Jt){Br(Zt,Qt,Jt),qr(Jt,Qt);for(var qt=new Uint8Array(cr+Zt.length),rr=new Uint8Array(qt.length),dr=0;dr<Zt.length;dr++)qt[dr+cr]=Zt[dr];return ht(rr,qt,qt.length,Qt,Jt),rr.subarray(Sr)},et.secretbox.open=function(Zt,Qt,Jt){Br(Zt,Qt,Jt),qr(Jt,Qt);for(var qt=new Uint8Array(Sr+Zt.length),rr=new Uint8Array(qt.length),dr=0;dr<Zt.length;dr++)qt[dr+Sr]=Zt[dr];return qt.length<32||vt(rr,qt,qt.length,Qt,Jt)!==0?null:rr.subarray(cr)},et.secretbox.keyLength=Wt,et.secretbox.nonceLength=nr,et.secretbox.overheadLength=Sr,et.scalarMult=function(Zt,Qt){if(Br(Zt,Qt),Zt.length!==xr)throw new Error("bad n size");if(Qt.length!==_r)throw new Error("bad p size");var Jt=new Uint8Array(_r);return ir(Jt,Zt,Qt),Jt},et.scalarMult.base=function(Zt){if(Br(Zt),Zt.length!==xr)throw new Error("bad n size");var Qt=new Uint8Array(_r);return sr(Qt,Zt),Qt},et.scalarMult.scalarLength=xr,et.scalarMult.groupElementLength=_r,et.box=function(Zt,Qt,Jt,qt){var rr=et.box.before(Jt,qt);return et.secretbox(Zt,Qt,rr)},et.box.before=function(Zt,Qt){Br(Zt,Qt),Sn(Zt,Qt);var Jt=new Uint8Array(Ur);return Vt(Jt,Zt,Qt),Jt},et.box.after=et.secretbox,et.box.open=function(Zt,Qt,Jt,qt){var rr=et.box.before(Jt,qt);return et.secretbox.open(Zt,Qt,rr)},et.box.open.after=et.secretbox.open,et.box.keyPair=function(){var Zt=new Uint8Array(pn),Qt=new Uint8Array(Tr);return ar(Zt,Qt),{publicKey:Zt,secretKey:Qt}},et.box.keyPair.fromSecretKey=function(Zt){if(Br(Zt),Zt.length!==Tr)throw new Error("bad secret key size");var Qt=new Uint8Array(pn);return sr(Qt,Zt),{publicKey:Qt,secretKey:new Uint8Array(Zt)}},et.box.publicKeyLength=pn,et.box.secretKeyLength=Tr,et.box.sharedKeyLength=Ur,et.box.nonceLength=un,et.box.overheadLength=et.secretbox.overheadLength,et.sign=function(Zt,Qt){if(Br(Zt,Qt),Qt.length!==Dr)throw new Error("bad secret key size");var Jt=new Uint8Array(zr+Zt.length);return wn(Jt,Zt,Zt.length,Qt),Jt},et.sign.open=function(Zt,Qt){if(Br(Zt,Qt),Qt.length!==br)throw new Error("bad public key size");var Jt=new Uint8Array(Zt.length),qt=Bt(Jt,Zt,Zt.length,Qt);if(qt<0)return null;for(var rr=new Uint8Array(qt),dr=0;dr<rr.length;dr++)rr[dr]=Jt[dr];return rr},et.sign.detached=function(Zt,Qt){for(var Jt=et.sign(Zt,Qt),qt=new Uint8Array(zr),rr=0;rr<qt.length;rr++)qt[rr]=Jt[rr];return qt},et.sign.detached.verify=function(Zt,Qt,Jt){if(Br(Zt,Qt,Jt),Qt.length!==zr)throw new Error("bad signature size");if(Jt.length!==br)throw new Error("bad public key size");var qt=new Uint8Array(zr+Zt.length),rr=new Uint8Array(zr+Zt.length),dr;for(dr=0;dr<zr;dr++)qt[dr]=Qt[dr];for(dr=0;dr<Zt.length;dr++)qt[dr+zr]=Zt[dr];return Bt(rr,qt,qt.length,Jt)>=0},et.sign.keyPair=function(){var Zt=new Uint8Array(br),Qt=new Uint8Array(Dr);return Ar(Zt,Qt),{publicKey:Zt,secretKey:Qt}},et.sign.keyPair.fromSecretKey=function(Zt){if(Br(Zt),Zt.length!==Dr)throw new Error("bad secret key size");for(var Qt=new Uint8Array(br),Jt=0;Jt<Qt.length;Jt++)Qt[Jt]=Zt[32+Jt];return{publicKey:Qt,secretKey:new Uint8Array(Zt)}},et.sign.keyPair.fromSeed=function(Zt){if(Br(Zt),Zt.length!==yn)throw new Error("bad seed size");for(var Qt=new Uint8Array(br),Jt=new Uint8Array(Dr),qt=0;qt<32;qt++)Jt[qt]=Zt[qt];return Ar(Qt,Jt,!0),{publicKey:Qt,secretKey:Jt}},et.sign.publicKeyLength=br,et.sign.secretKeyLength=Dr,et.sign.seedLength=yn,et.sign.signatureLength=zr,et.hash=function(Zt){Br(Zt);var Qt=new Uint8Array(Mr);return hr(Qt,Zt,Zt.length),Qt},et.hash.hashLength=Mr,et.verify=function(Zt,Qt){return Br(Zt,Qt),Zt.length===0||Qt.length===0||Zt.length!==Qt.length?!1:Nt(Zt,0,Qt,0,Zt.length)===0},et.setPRNG=function(Zt){nt=Zt},function(){var Zt=typeof self<"u"?self.crypto||self.msCrypto:null;if(Zt&&Zt.getRandomValues){var Qt=65536;et.setPRNG(function(Jt,qt){var rr,dr=new Uint8Array(qt);for(rr=0;rr<qt;rr+=Qt)Zt.getRandomValues(dr.subarray(rr,rr+Math.min(qt-rr,Qt)));for(rr=0;rr<qt;rr++)Jt[rr]=dr[rr];Hr(dr)})}else typeof commonjsRequire<"u"&&(Zt=requireCryptoBrowserify(),Zt&&Zt.randomBytes&&et.setPRNG(function(Jt,qt){var rr,dr=Zt.randomBytes(qt);for(rr=0;rr<qt;rr++)Jt[rr]=dr[rr];Hr(dr)}))}()})(tt.exports?tt.exports:self.nacl=self.nacl||{})})(naclFast);function asyncGeneratorStep(tt,et,rt,nt,at,it,st){try{var dt=tt[it](st),pt=dt.value}catch(mt){rt(mt);return}dt.done?et(pt):Promise.resolve(pt).then(nt,at)}function _asyncToGenerator(tt){return function(){var et=this,rt=arguments;return new Promise(function(nt,at){var it=tt.apply(et,rt);function st(pt){asyncGeneratorStep(it,nt,at,st,dt,"next",pt)}function dt(pt){asyncGeneratorStep(it,nt,at,st,dt,"throw",pt)}st(void 0)})}}function createCommonjsModule(tt,et){return et={exports:{}},tt(et,et.exports),et.exports}var runtime_1=createCommonjsModule(function(tt){var et=function(rt){var nt=Object.prototype,at=nt.hasOwnProperty,it,st=typeof Symbol=="function"?Symbol:{},dt=st.iterator||"@@iterator",pt=st.asyncIterator||"@@asyncIterator",mt=st.toStringTag||"@@toStringTag";function yt($t,Et,ct){return Object.defineProperty($t,Et,{value:ct,enumerable:!0,configurable:!0,writable:!0}),$t[Et]}try{yt({},"")}catch{yt=function(Et,ct,St){return Et[ct]=St}}function Rt($t,Et,ct,St){var Mt=Et&&Et.prototype instanceof kt?Et:kt,Lt=Object.create(Mt.prototype),Ut=new vt(St||[]);return Lt._invoke=It($t,ct,Ut),Lt}rt.wrap=Rt;function Tt($t,Et,ct){try{return{type:"normal",arg:$t.call(Et,ct)}}catch(St){return{type:"throw",arg:St}}}var At="suspendedStart",xt="suspendedYield",Nt="executing",Ct="completed",Ot={};function kt(){}function Pt(){}function Dt(){}var Gt={};Gt[dt]=function(){return this};var jt=Object.getPrototypeOf,Yt=jt&&jt(jt(wt([])));Yt&&Yt!==nt&&at.call(Yt,dt)&&(Gt=Yt);var tr=Dt.prototype=kt.prototype=Object.create(Gt);Pt.prototype=tr.constructor=Dt,Dt.constructor=Pt,Pt.displayName=yt(Dt,mt,"GeneratorFunction");function er($t){["next","throw","return"].forEach(function(Et){yt($t,Et,function(ct){return this._invoke(Et,ct)})})}rt.isGeneratorFunction=function($t){var Et=typeof $t=="function"&&$t.constructor;return Et?Et===Pt||(Et.displayName||Et.name)==="GeneratorFunction":!1},rt.mark=function($t){return Object.setPrototypeOf?Object.setPrototypeOf($t,Dt):($t.__proto__=Dt,yt($t,mt,"GeneratorFunction")),$t.prototype=Object.create(tr),$t},rt.awrap=function($t){return{__await:$t}};function lr($t,Et){function ct(Lt,Ut,Kt,Ht){var Ft=Tt($t[Lt],$t,Ut);if(Ft.type==="throw")Ht(Ft.arg);else{var zt=Ft.arg,ir=zt.value;return ir&&typeof ir=="object"&&at.call(ir,"__await")?Et.resolve(ir.__await).then(function(sr){ct("next",sr,Kt,Ht)},function(sr){ct("throw",sr,Kt,Ht)}):Et.resolve(ir).then(function(sr){zt.value=sr,Kt(zt)},function(sr){return ct("throw",sr,Kt,Ht)})}}var St;function Mt(Lt,Ut){function Kt(){return new Et(function(Ht,Ft){ct(Lt,Ut,Ht,Ft)})}return St=St?St.then(Kt,Kt):Kt()}this._invoke=Mt}er(lr.prototype),lr.prototype[pt]=function(){return this},rt.AsyncIterator=lr,rt.async=function($t,Et,ct,St,Mt){Mt===void 0&&(Mt=Promise);var Lt=new lr(Rt($t,Et,ct,St),Mt);return rt.isGeneratorFunction(Et)?Lt:Lt.next().then(function(Ut){return Ut.done?Ut.value:Lt.next()})};function It($t,Et,ct){var St=At;return function(Lt,Ut){if(St===Nt)throw new Error("Generator is already running");if(St===Ct){if(Lt==="throw")throw Ut;return bt()}for(ct.method=Lt,ct.arg=Ut;;){var Kt=ct.delegate;if(Kt){var Ht=ot(Kt,ct);if(Ht){if(Ht===Ot)continue;return Ht}}if(ct.method==="next")ct.sent=ct._sent=ct.arg;else if(ct.method==="throw"){if(St===At)throw St=Ct,ct.arg;ct.dispatchException(ct.arg)}else ct.method==="return"&&ct.abrupt("return",ct.arg);St=Nt;var Ft=Tt($t,Et,ct);if(Ft.type==="normal"){if(St=ct.done?Ct:xt,Ft.arg===Ot)continue;return{value:Ft.arg,done:ct.done}}else Ft.type==="throw"&&(St=Ct,ct.method="throw",ct.arg=Ft.arg)}}}function ot($t,Et){var ct=$t.iterator[Et.method];if(ct===it){if(Et.delegate=null,Et.method==="throw"){if($t.iterator.return&&(Et.method="return",Et.arg=it,ot($t,Et),Et.method==="throw"))return Ot;Et.method="throw",Et.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ot}var St=Tt(ct,$t.iterator,Et.arg);if(St.type==="throw")return Et.method="throw",Et.arg=St.arg,Et.delegate=null,Ot;var Mt=St.arg;if(!Mt)return Et.method="throw",Et.arg=new TypeError("iterator result is not an object"),Et.delegate=null,Ot;if(Mt.done)Et[$t.resultName]=Mt.value,Et.next=$t.nextLoc,Et.method!=="return"&&(Et.method="next",Et.arg=it);else return Mt;return Et.delegate=null,Ot}er(tr),yt(tr,mt,"Generator"),tr[dt]=function(){return this},tr.toString=function(){return"[object Generator]"};function ft($t){var Et={tryLoc:$t[0]};1 in $t&&(Et.catchLoc=$t[1]),2 in $t&&(Et.finallyLoc=$t[2],Et.afterLoc=$t[3]),this.tryEntries.push(Et)}function ht($t){var Et=$t.completion||{};Et.type="normal",delete Et.arg,$t.completion=Et}function vt($t){this.tryEntries=[{tryLoc:"root"}],$t.forEach(ft,this),this.reset(!0)}rt.keys=function($t){var Et=[];for(var ct in $t)Et.push(ct);return Et.reverse(),function St(){for(;Et.length;){var Mt=Et.pop();if(Mt in $t)return St.value=Mt,St.done=!1,St}return St.done=!0,St}};function wt($t){if($t){var Et=$t[dt];if(Et)return Et.call($t);if(typeof $t.next=="function")return $t;if(!isNaN($t.length)){var ct=-1,St=function Mt(){for(;++ct<$t.length;)if(at.call($t,ct))return Mt.value=$t[ct],Mt.done=!1,Mt;return Mt.value=it,Mt.done=!0,Mt};return St.next=St}}return{next:bt}}rt.values=wt;function bt(){return{value:it,done:!0}}return vt.prototype={constructor:vt,reset:function($t){if(this.prev=0,this.next=0,this.sent=this._sent=it,this.done=!1,this.delegate=null,this.method="next",this.arg=it,this.tryEntries.forEach(ht),!$t)for(var Et in this)Et.charAt(0)==="t"&&at.call(this,Et)&&!isNaN(+Et.slice(1))&&(this[Et]=it)},stop:function(){this.done=!0;var $t=this.tryEntries[0],Et=$t.completion;if(Et.type==="throw")throw Et.arg;return this.rval},dispatchException:function($t){if(this.done)throw $t;var Et=this;function ct(Ht,Ft){return Lt.type="throw",Lt.arg=$t,Et.next=Ht,Ft&&(Et.method="next",Et.arg=it),!!Ft}for(var St=this.tryEntries.length-1;St>=0;--St){var Mt=this.tryEntries[St],Lt=Mt.completion;if(Mt.tryLoc==="root")return ct("end");if(Mt.tryLoc<=this.prev){var Ut=at.call(Mt,"catchLoc"),Kt=at.call(Mt,"finallyLoc");if(Ut&&Kt){if(this.prev<Mt.catchLoc)return ct(Mt.catchLoc,!0);if(this.prev<Mt.finallyLoc)return ct(Mt.finallyLoc)}else if(Ut){if(this.prev<Mt.catchLoc)return ct(Mt.catchLoc,!0)}else if(Kt){if(this.prev<Mt.finallyLoc)return ct(Mt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function($t,Et){for(var ct=this.tryEntries.length-1;ct>=0;--ct){var St=this.tryEntries[ct];if(St.tryLoc<=this.prev&&at.call(St,"finallyLoc")&&this.prev<St.finallyLoc){var Mt=St;break}}Mt&&($t==="break"||$t==="continue")&&Mt.tryLoc<=Et&&Et<=Mt.finallyLoc&&(Mt=null);var Lt=Mt?Mt.completion:{};return Lt.type=$t,Lt.arg=Et,Mt?(this.method="next",this.next=Mt.finallyLoc,Ot):this.complete(Lt)},complete:function($t,Et){if($t.type==="throw")throw $t.arg;return $t.type==="break"||$t.type==="continue"?this.next=$t.arg:$t.type==="return"?(this.rval=this.arg=$t.arg,this.method="return",this.next="end"):$t.type==="normal"&&Et&&(this.next=Et),Ot},finish:function($t){for(var Et=this.tryEntries.length-1;Et>=0;--Et){var ct=this.tryEntries[Et];if(ct.finallyLoc===$t)return this.complete(ct.completion,ct.afterLoc),ht(ct),Ot}},catch:function($t){for(var Et=this.tryEntries.length-1;Et>=0;--Et){var ct=this.tryEntries[Et];if(ct.tryLoc===$t){var St=ct.completion;if(St.type==="throw"){var Mt=St.arg;ht(ct)}return Mt}}throw new Error("illegal catch attempt")},delegateYield:function($t,Et,ct){return this.delegate={iterator:wt($t),resultName:Et,nextLoc:ct},this.method==="next"&&(this.arg=it),Ot}},rt}(tt.exports);try{regeneratorRuntime=et}catch{Function("r","regeneratorRuntime = r")(et)}}),defaultSigner=function tt(et){return function(){var rt=_asyncToGenerator(runtime_1.mark(function nt(at){return runtime_1.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return at.sign(et),st.abrupt("return",at);case 2:case"end":return st.stop()}},nt)}));return function(nt){return rt.apply(this,arguments)}}()},isKeypair=function tt(et){return et.constructor.name==="Keypair"},pubkeyOf=function tt(et){return isKeypair(et)?et.publicKey:et},DEFAULT_CONFIG={cluster:"mainnet-beta",commitment:"confirmed",supportedClusterUrls:{},recentBlockCheck:!0,broadcastCheck:!0},getClusterUrl=function tt(et){return et.supportedClusterUrls&&et.supportedClusterUrls[et.cluster]?et.supportedClusterUrls[et.cluster]:clusterApiUrl(et.cluster)},makeTransaction=function(){var tt=_asyncToGenerator(runtime_1.mark(function et(rt,nt,at,it){var st,dt,pt,mt;return runtime_1.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return st=SystemProgram.transfer({fromPubkey:nt,lamports:it,toPubkey:at}),Rt.next=3,rt.getLatestBlockhash();case 3:return dt=Rt.sent,pt=dt.blockhash,mt=new Transaction({recentBlockhash:pt,feePayer:nt}).add(st),Rt.abrupt("return",mt);case 7:case"end":return Rt.stop()}},et)}));return function(rt,nt,at,it){return tt.apply(this,arguments)}}(),create=function(){var tt=_asyncToGenerator(runtime_1.mark(function et(rt,nt){var at,it;return runtime_1.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return dt.next=2,rt(nt);case 2:if(at=dt.sent,at){dt.next=5;break}throw new Error("Error creating signature");case 5:return it=Buffer.from(at).toString("base64"),dt.abrupt("return",""+it);case 7:case"end":return dt.stop()}},et)}));return function(rt,nt){return tt.apply(this,arguments)}}(),proveTransaction=function(){var tt=_asyncToGenerator(runtime_1.mark(function et(rt,nt,at){var it,st,dt,pt,mt;return runtime_1.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:if(at===void 0&&(at=DEFAULT_CONFIG),!(isKeypair(rt)&&nt)){Rt.next=3;break}throw new Error("Provide a keypair or a signer, not both");case 3:if(!(!isKeypair(rt)&&!nt)){Rt.next=5;break}throw new Error("Provide either a keypair or a signer");case 5:return it=nt||defaultSigner(rt),st=at.connection||new Connection(getClusterUrl(at),at.commitment),dt=pubkeyOf(rt),Rt.next=10,makeTransaction(st,dt,dt,0);case 10:return pt=Rt.sent,Rt.next=13,it(pt);case 13:return mt=Rt.sent,Rt.abrupt("return",mt.serialize());case 15:case"end":return Rt.stop()}},et)}));return function(rt,nt,at){return tt.apply(this,arguments)}}(),extendStatics=function(tt,et){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rt,nt){rt.__proto__=nt}||function(rt,nt){for(var at in nt)Object.prototype.hasOwnProperty.call(nt,at)&&(rt[at]=nt[at])},extendStatics(tt,et)};function __extends(tt,et){if(typeof et!="function"&&et!==null)throw new TypeError("Class extends value "+String(et)+" is not a constructor or null");extendStatics(tt,et);function rt(){this.constructor=tt}tt.prototype=et===null?Object.create(et):(rt.prototype=et.prototype,new rt)}var __assign=function(){return __assign=Object.assign||function(et){for(var rt,nt=1,at=arguments.length;nt<at;nt++){rt=arguments[nt];for(var it in rt)Object.prototype.hasOwnProperty.call(rt,it)&&(et[it]=rt[it])}return et},__assign.apply(this,arguments)};function __awaiter(tt,et,rt,nt){function at(it){return it instanceof rt?it:new rt(function(st){st(it)})}return new(rt||(rt=Promise))(function(it,st){function dt(yt){try{mt(nt.next(yt))}catch(Rt){st(Rt)}}function pt(yt){try{mt(nt.throw(yt))}catch(Rt){st(Rt)}}function mt(yt){yt.done?it(yt.value):at(yt.value).then(dt,pt)}mt((nt=nt.apply(tt,et||[])).next())})}function __generator(tt,et){var rt={label:0,sent:function(){if(it[0]&1)throw it[1];return it[1]},trys:[],ops:[]},nt,at,it,st;return st={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(st[Symbol.iterator]=function(){return this}),st;function dt(mt){return function(yt){return pt([mt,yt])}}function pt(mt){if(nt)throw new TypeError("Generator is already executing.");for(;st&&(st=0,mt[0]&&(rt=0)),rt;)try{if(nt=1,at&&(it=mt[0]&2?at.return:mt[0]?at.throw||((it=at.return)&&it.call(at),0):at.next)&&!(it=it.call(at,mt[1])).done)return it;switch(at=0,it&&(mt=[mt[0]&2,it.value]),mt[0]){case 0:case 1:it=mt;break;case 4:return rt.label++,{value:mt[1],done:!1};case 5:rt.label++,at=mt[1],mt=[0];continue;case 7:mt=rt.ops.pop(),rt.trys.pop();continue;default:if(it=rt.trys,!(it=it.length>0&&it[it.length-1])&&(mt[0]===6||mt[0]===2)){rt=0;continue}if(mt[0]===3&&(!it||mt[1]>it[0]&&mt[1]<it[3])){rt.label=mt[1];break}if(mt[0]===6&&rt.label<it[1]){rt.label=it[1],it=mt;break}if(it&&rt.label<it[2]){rt.label=it[2],rt.ops.push(mt);break}it[2]&&rt.ops.pop(),rt.trys.pop();continue}mt=et.call(tt,rt)}catch(yt){mt=[6,yt],at=0}finally{nt=it=0}if(mt[0]&5)throw mt[1];return{value:mt[0]?mt[1]:void 0,done:!0}}}function __spreadArray(tt,et,rt){if(rt||arguments.length===2)for(var nt=0,at=et.length,it;nt<at;nt++)(it||!(nt in et))&&(it||(it=Array.prototype.slice.call(et,0,nt)),it[nt]=et[nt]);return tt.concat(it||Array.prototype.slice.call(et))}typeof SuppressedError=="function"&&SuppressedError;const byteToHex=[];for(let tt=0;tt<256;++tt)byteToHex.push((tt+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var logLevels=["debug","info","warn","error"],allowLogging=function(tt,et){return logLevels.indexOf(tt)>=logLevels.indexOf(et)},DEFAULT_LOG_LEVEL="debug",LoggingProvider=function(){function tt(et,rt){if(rt===void 0&&(rt=DEFAULT_LOG_LEVEL),this.logger=et,typeof window<"u"){var nt=new URLSearchParams(window.location.search),at=nt.get("logLevel");this.logLevel=at||rt}else this.logLevel=rt}return tt.prototype.setLogLevel=function(et){this.logLevel=et},tt.prototype.debug=function(et,rt){allowLogging(this.logLevel,"debug")&&this.logger.debug(et,rt)},tt.prototype.info=function(et,rt){allowLogging(this.logLevel,"info")&&this.logger.info(et,rt)},tt.prototype.warn=function(et,rt){allowLogging(this.logLevel,"warn")&&this.logger.warn(et,rt)},tt.prototype.error=function(et,rt){allowLogging(this.logLevel,"error")&&this.logger.error(et,rt)},tt}(),consoleWithOptionalObject=function(tt,et,rt){rt?tt(et,rt):tt(et)},LogLocal=function(tt){__extends(et,tt);function et(rt){return rt===void 0&&(rt=DEFAULT_LOG_LEVEL),tt.call(this,console,rt)||this}return et.prototype.setLogLevel=function(rt){this.logLevel=rt},et.prototype.debug=function(rt,nt){consoleWithOptionalObject(this.logger.debug,rt,nt)},et.prototype.info=function(rt,nt){consoleWithOptionalObject(this.logger.info,rt,nt)},et.prototype.warn=function(rt,nt){consoleWithOptionalObject(this.logger.warn,rt,nt)},et.prototype.error=function(rt,nt){consoleWithOptionalObject(this.logger.error,rt,nt)},et}(LoggingProvider),localLogger=new LoggingProvider(new LogLocal),prefixDebug=function(tt,et){return function(rt,nt){return nt===void 0&&(nt=null),localLogger.debug("[".concat(et,"][").concat(tt,"] ").concat(rt),nt)}},prefixError=function(tt,et){return function(rt,nt){return nt===void 0&&(nt=null),localLogger.error("[".concat(et,"][").concat(tt,"] ").concat(rt),nt)}},prefixWarn=function(tt,et){return function(rt,nt){return nt===void 0&&(nt=null),localLogger.warn("[".concat(et,"][").concat(tt,"] ").concat(rt),nt)}},prefixInfo=function(tt,et){return function(rt,nt){return nt===void 0&&(nt=null),localLogger.info("[".concat(et,"][").concat(tt,"] ").concat(rt),nt)}},prefixLogger=function(tt,et){return et===void 0&&(et="GatewayClientCore"),{setLogLevel:localLogger.setLogLevel,debug:prefixDebug(tt,et),error:prefixError(tt,et),warn:prefixWarn(tt,et),info:prefixInfo(tt,et)}};function getDefaultExportFromCjs(tt){return tt&&tt.__esModule&&Object.prototype.hasOwnProperty.call(tt,"default")?tt.default:tt}var fetchRetry=function(tt,et){if(et=et||{},typeof tt!="function")throw new ArgumentError("fetch must be a function");if(typeof et!="object")throw new ArgumentError("defaults must be an object");if(et.retries!==void 0&&!isPositiveInteger(et.retries))throw new ArgumentError("retries must be a positive integer");if(et.retryDelay!==void 0&&!isPositiveInteger(et.retryDelay)&&typeof et.retryDelay!="function")throw new ArgumentError("retryDelay must be a positive integer or a function returning a positive integer");if(et.retryOn!==void 0&&!Array.isArray(et.retryOn)&&typeof et.retryOn!="function")throw new ArgumentError("retryOn property expects an array or function");var rt={retries:3,retryDelay:1e3,retryOn:[]};return et=Object.assign(rt,et),function(at,it){var st=et.retries,dt=et.retryDelay,pt=et.retryOn;if(it&&it.retries!==void 0)if(isPositiveInteger(it.retries))st=it.retries;else throw new ArgumentError("retries must be a positive integer");if(it&&it.retryDelay!==void 0)if(isPositiveInteger(it.retryDelay)||typeof it.retryDelay=="function")dt=it.retryDelay;else throw new ArgumentError("retryDelay must be a positive integer or a function returning a positive integer");if(it&&it.retryOn)if(Array.isArray(it.retryOn)||typeof it.retryOn=="function")pt=it.retryOn;else throw new ArgumentError("retryOn property expects an array or function");return new Promise(function(mt,yt){var Rt=function(At){var xt=typeof Request<"u"&&at instanceof Request?at.clone():at;tt(xt,it).then(function(Nt){if(Array.isArray(pt)&&pt.indexOf(Nt.status)===-1)mt(Nt);else if(typeof pt=="function")try{return Promise.resolve(pt(At,null,Nt)).then(function(Ct){Ct?Tt(At,null,Nt):mt(Nt)}).catch(yt)}catch(Ct){yt(Ct)}else At<st?Tt(At,null,Nt):mt(Nt)}).catch(function(Nt){if(typeof pt=="function")try{Promise.resolve(pt(At,Nt,null)).then(function(Ct){Ct?Tt(At,Nt,null):yt(Nt)}).catch(function(Ct){yt(Ct)})}catch(Ct){yt(Ct)}else At<st?Tt(At,Nt,null):yt(Nt)})};function Tt(At,xt,Nt){var Ct=typeof dt=="function"?dt(At,xt,Nt):dt;setTimeout(function(){Rt(++At)},Ct)}Rt(0)})}};function isPositiveInteger(tt){return Number.isInteger(tt)&&tt>=0}function ArgumentError(tt){this.name="ArgumentError",this.message=tt}var fetchBuilder=getDefaultExportFromCjs(fetchRetry),objectToURLParams=function(tt){return tt?Object.entries(tt).reduce(function(et,rt){var nt,at=rt[0],it=rt[1];return it==null||it instanceof Array&&it.length===0||it instanceof Object&&Object.keys(it).length===0||it===""?et:__assign(__assign({},et),(nt={},nt[at]=it.toString(),nt))},{}):{}},GatekeeperAPIStatus;(function(tt){tt[tt.REQUESTING=0]="REQUESTING",tt[tt.NOT_REQUESTED=404]="NOT_REQUESTED",tt[tt.REQUESTED=202]="REQUESTED",tt[tt.ISSUED=200]="ISSUED",tt[tt.ISSUED_EXPIRY_APPROACHING=205]="ISSUED_EXPIRY_APPROACHING",tt[tt.ISSUED_EXPIRED=426]="ISSUED_EXPIRED",tt[tt.LOCATION_NOT_SUPPORTED=401]="LOCATION_NOT_SUPPORTED",tt[tt.REJECTED=403]="REJECTED",tt[tt.VPN_NOT_SUPPORTED=421]="VPN_NOT_SUPPORTED",tt[tt.ISSUED_LOCATION_NOT_SUPPORTED=412]="ISSUED_LOCATION_NOT_SUPPORTED",tt[tt.ISSUED_VPN_NOT_SUPPORTED=451]="ISSUED_VPN_NOT_SUPPORTED",tt[tt.SERVER_FAILURE=500]="SERVER_FAILURE",tt[tt.REQUESTED_RETRIES_EXHAUSTED=408]="REQUESTED_RETRIES_EXHAUSTED"})(GatekeeperAPIStatus||(GatekeeperAPIStatus={}));var GATEKEEPER_BASE_ENDPOINTS={local:"http://localhost:3001/local",test:"https://dev-gatekeeper-api.civic.com",dev:"https://dev-gatekeeper-api.civic.com",preprod:"https://preprod-gatekeeper-api.civic.com",prod:"https://gatekeeper-api.civic.com"},logDebug$3=prefixLogger("GatekeeperClient").debug,logWarn$1=prefixLogger("GatekeeperClient").warn,logError$3=prefixLogger("GatekeeperClient").error,getGatekeeperEndpoint=function(tt,et){var rt=GATEKEEPER_BASE_ENDPOINTS[tt];return rt||(logWarn$1("No Gatekeeper endpoint for stage ".concat(tt," . Using dev endpoint.")),rt=GATEKEEPER_BASE_ENDPOINTS.dev),"".concat(rt,"/v1/token/").concat(et)},withoutUndefined=function(tt){return Object.fromEntries(Object.entries(tt).filter(function(et){var rt=et[1];return rt!==void 0}))},GatekeeperClient=function(){function tt(et,rt){var nt=this;this.initConfig=et,this.abortController=et.abortController,this.baseUrl=et.baseUrl||getGatekeeperEndpoint(et.stage,et.chainType),this.queryParams=et.queryParams,this.headers=objectToURLParams(__assign(__assign({},et.headers),{"x-civic-flowid":rt})),this.fetchImplementation=et.fetchImplementation;var at=et.numRetries;this.defaultRetryParams={retries:at,retryOn:function(it,st,dt){return __awaiter(nt,void 0,void 0,function(){var pt,mt,yt;return __generator(this,function(Rt){switch(Rt.label){case 0:return dt?[4,dt.clone().json()]:[3,2];case 1:return mt=Rt.sent(),[3,3];case 2:mt={},Rt.label=3;case 3:if(pt=mt,dt&&dt.status>=500){if(!((yt=pt==null?void 0:pt.message)===null||yt===void 0)&&yt.includes("NO_AUTO_RETRY"))return[2,!1];if(it>=at)throw logError$3("retryOn error run out of retries",{error:st,attempt:it,retries:at,response:dt,body:pt}),st;return logDebug$3("retrying on 5xx error",{error:st,attempt:it,retries:at,response:dt,body:pt}),[2,!0]}return logDebug$3("retryOn returning false as error was not a 5xx error"),[2,!1]}})})},retryDelay:function(it){var st=10+Math.pow(2,it)*1e3;return logDebug$3("retryDelay",{attempt:it+1,retryDelay:st}),st}},this.fetchWithRetry=fetchBuilder(this.fetchImplementation,this.defaultRetryParams)}return tt.prototype.instanceName=function(){var et,rt;return(rt=(et=this.queryParams)===null||et===void 0?void 0:et.gatekeeperNetworkAddress)===null||rt===void 0?void 0:rt.substring(0,6)},tt.prototype.abort=function(){var et,rt;logDebug$3("abort ".concat((rt=(et=this.queryParams)===null||et===void 0?void 0:et.gatekeeperNetworkAddress)===null||rt===void 0?void 0:rt.substring(0,6))),this.abortController.abort()},tt.prototype.addQueryParams=function(et){this.queryParams&&Object.entries(this.queryParams).forEach(function(rt){var nt=rt[0],at=rt[1];et.searchParams.append(nt,at)})},tt.prototype.continueIfNotAborted=function(et){return logDebug$3("continueIfNotAborted ".concat(this.instanceName()," this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted),this.queryParams),this.abortController.signal.aborted?null:et()},tt.prototype.urlForWallet=function(et){et===void 0&&(et=this.initConfig.walletAddress);var rt=new URL("".concat(this.baseUrl,"/").concat(et));return this.addQueryParams(rt),rt.toString()},tt.prototype.getGatekeeperRecordWithPayload=function(){return __awaiter(this,arguments,void 0,function(et){var rt=this;return et===void 0&&(et=this.initConfig.walletAddress),__generator(this,function(nt){return logDebug$3("getGatekeeperRecordWithPayload: ".concat(this.instanceName(),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted)),[2,this.fetchWithRetry(this.urlForWallet(et),{method:"GET",headers:this.headers,signal:this.abortController.signal}).then(this.continueIfNotAborted(function(){return function(at){return __awaiter(rt,void 0,void 0,function(){var it;return __generator(this,function(st){switch(st.label){case 0:return it={state:GatekeeperAPIStatus[GatekeeperAPIStatus[at.status]]},[4,at.json()];case 1:return[2,(it.payload=st.sent(),it)]}})})}})).catch(function(at){if(at.name==="AbortError")return logDebug$3("error due to abort controller signal aborted"),null;throw at})]})})},tt.prototype.getGatekeeperStatus=function(){return __awaiter(this,arguments,void 0,function(et){return et===void 0&&(et=this.initConfig.walletAddress),__generator(this,function(rt){return logDebug$3("getGatekeeperStatus: ".concat(this.instanceName(),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted)),[2,this.fetchWithRetry(this.urlForWallet(et),{method:"HEAD",headers:this.headers,signal:this.abortController.signal}).then(this.continueIfNotAborted(function(){return function(nt){var at=nt.status;return at}})).catch(function(nt){if(logError$3("getGatekeeperStatus",nt),nt.name==="AbortError")return logDebug$3("error due to abort controller signal aborted"),GatekeeperAPIStatus.SERVER_FAILURE;throw nt})]})})},tt.prototype.requestGatewayTokenFromGatekeeper=function(et){return __awaiter(this,arguments,void 0,function(rt){var nt,at,it=this,st=rt.payload,dt=rt.proof,pt=rt.payer;return __generator(this,function(mt){return logDebug$3("requestGatewayTokenFromGatekeeper: ".concat(this.instanceName(),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted),__assign(__assign({},st),{proof:dt})),nt=withoutUndefined(__assign(__assign({},st),{proof:dt,address:this.initConfig.walletAddress,payer:pt})),logDebug$3("requestGatewayTokenFromGatekeeper Requesting a new gatekeeper token...",nt),at=new URL(this.baseUrl),this.addQueryParams(at),[2,this.fetchWithRetry(at.toString(),{method:"POST",headers:__assign(__assign({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(nt),signal:this.abortController.signal}).then(this.continueIfNotAborted(function(){return function(yt){return __awaiter(it,void 0,void 0,function(){var Rt,Tt;return __generator(this,function(At){switch(At.label){case 0:return Rt=yt.status,[4,yt.json()];case 1:return Tt=At.sent(),[2,__assign(__assign({},Tt),{state:GatekeeperAPIStatus[GatekeeperAPIStatus[Rt]],status:Rt})]}})})}})).catch(function(yt){return logError$3("requestGatewayTokenFromGatekeeper",yt),yt.name==="AbortError"&&logDebug$3("error due to abort controller signal aborted"),null})]})})},tt.prototype.refreshToken=function(et){return __awaiter(this,arguments,void 0,function(rt){var nt,at=this,it,st,dt=rt.payload,pt=rt.proof,mt=rt.payer;return __generator(this,function(yt){return logDebug$3("refreshToken: ".concat(this.urlForWallet(this.initConfig.walletAddress)).concat((st=(it=this.queryParams)===null||it===void 0?void 0:it.gatekeeperNetworkAddress)===null||st===void 0?void 0:st.substring(0,6),"  this.abortController.signal.aborted: ").concat(this.abortController.signal.aborted),{payload:dt}),nt=withoutUndefined(__assign(__assign({},dt),{proof:pt,request:"refresh",payer:mt})),[2,this.fetchWithRetry(this.urlForWallet(this.initConfig.walletAddress),{method:"PATCH",headers:__assign(__assign({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(nt),signal:this.abortController.signal}).then(function(Rt){return __awaiter(at,void 0,void 0,function(){var Tt,At;return __generator(this,function(xt){switch(xt.label){case 0:return Tt=Rt.status,[4,Rt.json()];case 1:return At=xt.sent(),[2,__assign(__assign({},At),{state:GatekeeperAPIStatus[GatekeeperAPIStatus[Tt]],status:Tt})]}})})}).catch(function(Rt){return logError$3("refreshToken",Rt),Rt.name==="AbortError"&&logDebug$3("error due to abort controller signal aborted"),null})]})})},tt}(),State;(function(tt){tt.ACTIVE="ACTIVE",tt.REVOKED="REVOKED",tt.FROZEN="FROZEN"})(State||(State={}));var TokenState;(function(tt){tt.REQUESTED="REQUESTED",tt.ACTIVE="ACTIVE",tt.REVOKED="REVOKED",tt.FROZEN="FROZEN",tt.REJECTED="REJECTED"})(TokenState||(TokenState={}));var ChainType;(function(tt){tt.SOLANA="solana",tt.ETHEREUM="ethereum",tt.CASPER="casper"})(ChainType||(ChainType={}));var SignatureMethod;(function(tt){tt[tt.TRANSACTION=0]="TRANSACTION",tt[tt.MESSAGE=1]="MESSAGE"})(SignatureMethod||(SignatureMethod={}));var ErrorCode={INSUFFICIENT_FUNDS:"0x1",SIGN_TRANSACTION_ERROR:"0x2",SEND_TRANSACTION_ERROR:"0x3",CUSTOM_HANDLE_TRANSACTION_ERROR:"0x4",POWO_ERROR:"0x5",CHAIN_CONFIRMATION_TIMEOUT_ERROR:"0x6",EXPECTED_GATEKEEPER_RECORD:"0x7"},ChainError=function(tt){__extends(et,tt);function et(rt,nt,at){at===void 0&&(at=localLogger);var it=tt.call(this,rt)||this;return it.errorCode=nt,at==null||at.error("ChainError: ".concat(rt," throwing code ").concat(nt)),Object.setPrototypeOf(it,et.prototype),it}return et}(Error),ChainConfirmationTimeout=function(tt){__extends(et,tt);function et(rt,nt){nt===void 0&&(nt=ErrorCode.CHAIN_CONFIRMATION_TIMEOUT_ERROR);var at=tt.call(this,rt)||this;return at.errorCode=nt,localLogger.error("ChainConfirmationTimeout: ".concat(rt," throwing code ").concat(nt)),Object.setPrototypeOf(at,et.prototype),at}return et}(Error),GatewayStatus;(function(tt){tt.UNKNOWN="UNKNOWN",tt.CHECKING="CHECKING",tt.NOT_REQUESTED="NOT_REQUESTED",tt.COLLECTING_USER_INFORMATION="COLLECTING_USER_INFORMATION",tt.IN_REVIEW="IN_REVIEW",tt.REJECTED="REJECTED",tt.REVOKED="REVOKED",tt.FROZEN="FROZEN",tt.ACTIVE="ACTIVE",tt.ERROR="ERROR",tt.LOCATION_NOT_SUPPORTED="LOCATION_NOT_SUPPORTED",tt.VPN_NOT_SUPPORTED="VPN_NOT_SUPPORTED",tt.REFRESH_TOKEN_REQUIRED="REFRESH_TOKEN_REQUIRED",tt.VALIDATING_USER_INFORMATION="VALIDATING_USER_INFORMATION",tt.USER_INFORMATION_VALIDATED="USER_INFORMATION_VALIDATED",tt.USER_INFORMATION_REJECTED="USER_INFORMATION_REJECTED"})(GatewayStatus||(GatewayStatus={}));var ExtendedGatewayStatus;(function(tt){tt.AWAITING_OWNER_TRANSACTION="AWAITING_OWNER_TRANSACTION",tt.CHAIN_TIMEOUT_ERROR="CHAIN_TIMEOUT_ERROR",tt.CONFIRM_OWNER_TRANSACTION="CONFIRM_OWNER_TRANSACTION",tt.CHAIN_TRANSACTION_ERROR="CHAIN_TRANSACTION_ERROR",tt.TOKEN_IN_PARTNER_REVIEW="TOKEN_IN_PARTNER_REVIEW",tt.TOKEN_REFRESH_IN_REVIEW="TOKEN_REFRESH_IN_REVIEW",tt.RESTART="RESTART",tt.CHAIN_SIGN_MESSAGE_ERROR="CHAIN_SIGN_MESSAGE_ERROR",tt.ISSUANCE_CLIENT_PAYER_REQUESTED="ISSUANCE_CLIENT_PAYER_REQUESTED",tt.ISSUANCE_AWAITING_TRANSACTION_SEND="ISSUANCE_AWAITING_TRANSACTION_SEND",tt.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND="ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND",tt.ISSUANCE_AWAITING_ON_CHAIN_TOKEN="ISSUANCE_AWAITING_ON_CHAIN_TOKEN",tt.ISSUANCE_RESTART_DATA_COLLECTION="ISSUANCE_RESTART_DATA_COLLECTION",tt.REFRESH_USER_INFORMATION_VALIDATED="REFRESH_USER_INFORMATION_VALIDATED",tt.REFRESH_CLIENT_PAYER_REQUESTED="REFRESH_CLIENT_PAYER_REQUESTED",tt.REFRESH_IN_REVIEW="REFRESH_IN_REVIEW",tt.REFRESH_AWAITING_TRANSACTION_SEND="REFRESH_AWAITING_TRANSACTION_SEND",tt.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND="REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND",tt.REFRESH_AWAITING_ON_CHAIN_TOKEN="REFRESH_AWAITING_ON_CHAIN_TOKEN",tt.RESTART_REFRESH="RESTART_REFRESH"})(ExtendedGatewayStatus||(ExtendedGatewayStatus={}));var FlowType;(function(tt){tt.ISSUANCE="issuance",tt.REFRESH="refresh",tt.STATUS="status",tt.REVOCATION="revocation",tt.UNFREEZE="unfreeze"})(FlowType||(FlowType={}));var FlowStatus;(function(tt){tt.IN_PROGRESS="in-progress",tt.RESULT="result",tt.FINISHED="finished"})(FlowStatus||(FlowStatus={}));var CivicPassMessageEventResult;(function(tt){tt.SUCCESS="success",tt.FAILURE="failure",tt.CANCELLED="cancelled",tt.IN_PROGRESS="inProgress",tt.ERROR="error"})(CivicPassMessageEventResult||(CivicPassMessageEventResult={}));var CivicPassMessageAction;(function(tt){tt.ISSUANCE="issuance",tt.CONFIRM_TRANSACTION="confirmTransaction",tt.TOKEN_FROZEN="tokenFrozen",tt.TOKEN_ACTIVE="tokenActive",tt.TOKEN_REVOKED="tokenRevoked",tt.TOKEN_REJECTED="tokenRejected",tt.TOKEN_IN_REVIEW="tokenInReview",tt.TOKEN_REFRESH_IN_REVIEW="tokenRefreshInReview",tt.TOKEN_IN_PARTNER_REVIEW="tokenInPartnerReview",tt.FAILED_IP_CHECK="failedIpCheck",tt.FAILED_VPN_CHECK="failedVpnCheck",tt.REFRESH="refresh",tt.STATUS="status",tt.ERROR="error",tt.CHAIN_ERROR="chainError",tt.SIGN_TRANSACTION="signTransaction",tt.AWAITING_TRANSACTION_CONFIRMATION="awaitingTransactionConfirmation"})(CivicPassMessageAction||(CivicPassMessageAction={}));var ValidationStatus;(function(tt){tt.COLLECTING="COLLECTING",tt.PROCESSING="PROCESSING",tt.IN_REVIEW="IN_REVIEW",tt.COMPLETED="COMPLETED",tt.FAILED="FAILED",tt.NOT_FOUND="NOT_FOUND"})(ValidationStatus||(ValidationStatus={}));var CivicSignEventTypeResponse;(function(tt){tt.RESPONSE_PUBLIC_KEY="RESPONSE_PUBLIC_KEY",tt.RESPONSE_DID="RESPONSE_DID",tt.RESPONSE_SIGNED_PROOF="RESPONSE_SIGNED_PROOF",tt.RESPONSE_SIGNED_MESSAGE="RESPONSE_SIGNED_MESSAGE"})(CivicSignEventTypeResponse||(CivicSignEventTypeResponse={}));var CivicSignEventTypeRequest;(function(tt){tt.REQUEST_PUBLIC_KEY="REQUEST_PUBLIC_KEY",tt.REQUEST_DID="REQUEST_DID",tt.REQUEST_SIGNED_PROOF="REQUEST_SIGNED_PROOF",tt.REQUEST_SIGNED_MESSAGE="REQUEST_SIGNED_MESSAGE"})(CivicSignEventTypeRequest||(CivicSignEventTypeRequest={}));var ListenerManager=function(){function tt(et,rt,nt,at){at===void 0&&(at=prefixLogger("ListenerManager")),this.messageEventInterface=et,this.chainImplementation=rt,this.instanceId=nt,this.log=at,this.messageListeners={}}return tt.prototype.registerCivicPassListener=function(et){var rt=this,nt=function(at){var it,st;if(!at.data){rt.log.error("No data in response");return}if(((it=at.data)===null||it===void 0?void 0:it.instanceId)!==rt.instanceId){!((st=at.data)===null||st===void 0)&&st.instanceId&&at.data.source!=="@devtools-page"&&rt.log.debug("instanceId for different instance",{event:at.data,instanceId:rt.instanceId});return}Object.values(CivicPassMessageAction).includes(at.data.action)&&(rt.log.debug("received CivicPassListener postMessage",at.data),et(at.data))};this.log.debug("Adding event listener for civic-pass events"),this.messageEventInterface.addMessageEventListener(nt),this.messageListeners.civicPass=nt},tt.prototype.registerCivicSignListener=function(et){var rt=this,nt=function(at){var it,st;if(!at.data){rt.log.error("No data in response");return}if(((it=at.data)===null||it===void 0?void 0:it.instanceId)!==rt.instanceId){!((st=at.data)===null||st===void 0)&&st.instanceId&&at.data.source!=="@devtools-page"&&rt.log.debug("instanceId for different instance",{event:at.data,instanceId:rt.instanceId});return}Object.values(CivicSignEventTypeRequest).includes(at.data.request)&&(rt.log.debug("received CivicSignListener postMessage",at.data),et(at.data))};this.log.debug("Adding event listener for civic-sign events"),this.messageEventInterface.addMessageEventListener(nt),this.messageListeners.civicSign=nt},tt.prototype.registerOnChainListeners=function(et){this.chainImplementation.on("TOKEN_CREATED",et),this.chainImplementation.on("TOKEN_CHANGED",et)},tt.prototype.unregisterAllListeners=function(){var et=this;Object.entries(this.messageListeners).forEach(function(rt){var nt=rt[0],at=rt[1];et.log.debug("Removing message event listener",nt),et.messageEventInterface.removeMessageEventListener(at),delete et.messageListeners[nt]})},tt}(),InputStatus;(function(tt){tt.IN_PROGRESS="IN_PROGRESS",tt.COMPLETE="COMPLETE",tt.ERROR="ERROR",tt.RECEIVED="RECEIVED",tt.RESPONDED="RESPONDED"})(InputStatus||(InputStatus={}));var getPayer=function(tt){var et=tt.gatekeeperSendsTransaction,rt=tt.payer,nt=tt.wallet;if(!et)return rt||(nt==null?void 0:nt.address)},logDebug$2=prefixLogger("remoteSign").debug,logError$2=prefixLogger("remoteSign").error,eventEmitter=function(tt){return{postMessage:function(et,rt){tt.postMessage(et,rt)}}},RemoteSignWindowEventEmitter=function(){function tt(et,rt){this.instanceId=rt,this.postMessageTarget=et}return tt.prototype.sendPublicKey=function(et){this.emit({event:CivicSignEventTypeResponse.RESPONSE_PUBLIC_KEY,data:et})},tt.prototype.sendDid=function(et){this.emit({event:CivicSignEventTypeResponse.RESPONSE_DID,data:et})},tt.prototype.sendSignedProof=function(et,rt){this.emit({event:CivicSignEventTypeResponse.RESPONSE_SIGNED_PROOF,data:{proof:et,signatureMethod:rt}})},tt.prototype.sendSignedMessage=function(et){this.emit({event:CivicSignEventTypeResponse.RESPONSE_SIGNED_MESSAGE,data:et})},tt.prototype.emit=function(et){this.postMessageTarget.postMessage(__assign(__assign({},et),{instanceId:this.instanceId}),"*")},tt}(),handleRemoteSignEvent=function(tt,et,rt){return __awaiter(void 0,void 0,void 0,function(){var nt,at,it,st,dt,pt;return __generator(this,function(mt){switch(mt.label){case 0:return nt=rt.wallet,at=rt.chainImplementation,st=rt.ownerDids,st?[3,2]:[4,at.ownerDids()];case 1:st=mt.sent(),mt.label=2;case 2:return it=st,logDebug$2("handleRemoteSignEvent ".concat(tt.request),{remoteSignerInst:et,wallet:nt,chainImplDids:it}),Object.values(CivicSignEventTypeRequest).includes(tt.request)?tt.request===CivicSignEventTypeRequest.REQUEST_PUBLIC_KEY?(et==null||et.sendPublicKey(nt.address),[2,nt.address]):tt.request===CivicSignEventTypeRequest.REQUEST_DID?(et==null||et.sendDid(it==null?void 0:it[0]),[2,it==null?void 0:it[0]]):tt.request!==CivicSignEventTypeRequest.REQUEST_SIGNED_PROOF?[3,4]:[4,at.proveWalletOwnership(tt.payload)]:(logError$2("No result from remote sign event"),[2]);case 3:return dt=mt.sent(),et==null||et.sendSignedProof(dt.proof,dt.signatureMethod),[2,{proof:dt.proof,signatureMethod:dt.signatureMethod}];case 4:return tt.request!==CivicSignEventTypeRequest.REQUEST_SIGNED_MESSAGE?[3,6]:tt.payload?[4,at.proveWalletOwnership(tt.payload)]:[3,6];case 5:return pt=mt.sent(),et==null||et.sendSignedMessage(Buffer.from(pt.proof)),[2,pt];case 6:return[2]}})})},DEFAULT_EXPECT_TOKEN_TIMEOUT_SECONDS=120,DEFAULT_MAX_CLIENT_SENDS_RETRIES=3,isApproachingExpiry=function(tt,et){var rt=Math.floor(Date.now()/1e3);return tt-rt<=et},hasExpired=function(tt){if(!tt)return!1;var et=Math.floor(Date.now()/1e3);return et>=tt},isTokenRefreshRequired=function(tt){var et=tt.gatewayToken,rt=tt.tokenExpirationMarginSeconds,nt=tt.forceRequireRefresh,at=et||{},it=at.expiryTime,st=at.state,dt=st===State.ACTIVE;return!it||!dt?!1:!!nt||hasExpired(it)||isApproachingExpiry(it,rt)},MAX_ALLOWED_TIMEOUT=2147483647,nowSeconds=function(){return Math.floor(Date.now()/1e3)},getTokenRefreshIntervalMilliseconds=function(tt,et){var rt=tt-nowSeconds()-et,nt=rt>0?rt*1e3:0;return nt>=MAX_ALLOWED_TIMEOUT?MAX_ALLOWED_TIMEOUT-1:nt},Issuance=function(){function tt(et,rt,nt,at,it){it===void 0&&(it=DEFAULT_EXPECT_TOKEN_TIMEOUT_SECONDS);var st=this;this.gatewayCoreStore=et,this.chainImplementation=rt,this.gatekeeperClient=nt,this.abortController=at,this.expectTokenTimeoutSeconds=it,this.timers={},this.makeGatekeeperRequest=function(dt){var pt,mt=st.gatewayCoreStore.getState();if(!(!((pt=mt.inputs.civicPass.received)===null||pt===void 0)&&pt.payload))throw st.log.error("Missing civicPass payload",mt),new Error("Missing civicPass payload");st.log.debug("makeGatekeeperRequest",mt),st.abortExpectedTokenTimer(),st.clearStateBeforeGatekeeperRequest(),st.gatekeeperRequest(dt,mt).then(function(yt){st.abortController.signal.aborted||st.gatewayCoreStore.setState(function(Rt){Rt.inputs.gatekeeperRecord.status=InputStatus.COMPLETE,Rt.inputs.gatekeeperRecord.received=yt})})},this.log=prefixLogger("Issuance instance with expectTokenTimeoutSeconds ".concat(it))}return tt.prototype.sendTransaction=function(){var et=this,rt,nt=this.gatewayCoreStore.getState();if(!(!((rt=nt.inputs.gatekeeperRecord.received)===null||rt===void 0)&&rt.transaction))throw this.log.error("Missing civicPass payload"),new Error("Missing civicPass payload");if(this.gatewayCoreStore.setState(function(at){at.internal.chainTransaction||(at.internal.chainTransaction={attempts:0}),at.internal.chainTransaction.attempts!==void 0&&(at.internal.chainTransaction.attempts+=1),at.internal.chainTransaction.sentTxId=void 0,at.internal.errors.expectedOnChainToken=null,at.inputs.gatewayToken.status=InputStatus.COMPLETE,at.internal.chainTransaction.error=void 0,at.inputs.civicPass.received=null}),this.abortExpectedTokenTimer(),!this.chainImplementation.handleTransaction){this.log.error("No handleTransaction defined on chainImplementation.");return}this.chainImplementation.handleTransaction(nt.inputs.gatekeeperRecord.received.transaction).then(function(at){et.abortController.signal.aborted||et.gatewayCoreStore.setState(function(it){it.internal.chainTransaction||(it.internal.chainTransaction={}),it.internal.chainTransaction.sentTxId=at})}).catch(function(at){et.gatewayCoreStore.setState(function(it){it.internal.chainTransaction||(it.internal.chainTransaction={}),it.internal.chainTransaction.error=at})})},tt.prototype.gatekeeperRequest=function(et,rt){var nt,at;if(!(!((nt=rt.inputs.civicPass.received)===null||nt===void 0)&&nt.payload))throw this.log.error("Missing civicPass payload",rt),new Error("Missing civicPass payload");return this.gatekeeperClient.requestGatewayTokenFromGatekeeper({payload:(at=rt.inputs.civicPass.received)===null||at===void 0?void 0:at.payload,payer:et})},tt.prototype.clearStateBeforeGatekeeperRequest=function(){this.gatewayCoreStore.setState(function(et){et.internal.errors.expectedOnChainToken=null,et.inputs.gatewayToken.status=InputStatus.COMPLETE,et.inputs.gatekeeperRecord.received=null,et.inputs.gatekeeperRecord.status=InputStatus.IN_PROGRESS})},tt.prototype.statusHasValidToken=function(){var et=this.gatewayCoreStore.getState();return!!et.inputs.gatewayToken.received},tt.prototype.expectOnChainToken=function(){var et=this,rt=this.gatewayCoreStore.getState();rt.inputs.gatewayToken.received||this.timers.expectOnChainToken||(this.timers.expectOnChainToken=setTimeout(function(){et.gatewayCoreStore.setState(function(nt){et.statusHasValidToken()||(nt.internal.errors.expectedOnChainToken=new ChainConfirmationTimeout("No on-chain token found within interval"))})},this.expectTokenTimeoutSeconds*1e3),this.log.debug("Started expected token timer",this.timers.expectOnChainToken))},tt.prototype.abort=function(){this.abortExpectedTokenTimer(),this.abortRefreshCountdownTimer()},tt.prototype.abortExpectedTokenTimer=function(){this.timers.expectOnChainToken&&(this.log.debug("Aborting expected token timer",this.timers.expectOnChainToken),clearTimeout(this.timers.expectOnChainToken))},tt.prototype.onActiveTokenFound=function(){this.abortExpectedTokenTimer(),this.gatewayCoreStore.setState(function(et){var rt;((rt=et.inputs.dynamicParameters)===null||rt===void 0?void 0:rt.forceRequireRefresh)!==void 0&&(et.inputs.gatekeeperRecord.received=null,et.internal.chainTransaction=void 0,et.inputs.dynamicParameters.forceRequireRefresh=!1)}),this.startRefreshCountdownTimer()},tt.prototype.startRefreshCountdownTimer=function(){var et=this,rt=this.gatewayCoreStore.getState(),nt=rt.inputs.gatewayToken.received;if(nt!=null&&nt.expiryTime){this.abortRefreshCountdownTimer();var at=getTokenRefreshIntervalMilliseconds(nt.expiryTime,0);this.timers.refreshCountdownTimer=setTimeout(function(){et.abortRefreshCountdownTimer()},at),this.log.debug("Started refresh countdown timer",{gatewayToken:nt,refreshCountdownTimer:this.timers.refreshCountdownTimer}),this.gatewayCoreStore.setState(function(it){it.internal.refreshInterval=et.timers.refreshCountdownTimer})}},tt.prototype.abortRefreshCountdownTimer=function(){this.log.debug("abortRefreshCountdownTimer",{refreshCountdownTimer:this.timers.refreshCountdownTimer}),this.timers.refreshCountdownTimer&&(clearTimeout(this.timers.refreshCountdownTimer),this.timers.refreshCountdownTimer=void 0,this.gatewayCoreStore.setState(function(et){et.internal.refreshInterval=void 0}))},tt}(),Refresh=function(tt){__extends(et,tt);function et(rt,nt,at,it,st){st===void 0&&(st=DEFAULT_EXPECT_TOKEN_TIMEOUT_SECONDS);var dt=tt.call(this,rt,nt,at,it,st)||this;return dt.gatewayCoreStore=rt,dt.chainImplementation=nt,dt.gatekeeperClient=at,dt.abortController=it,dt.expectTokenTimeoutSeconds=st,dt}return et.prototype.clearStateBeforeGatekeeperRequest=function(){this.gatewayCoreStore.setState(function(rt){rt.inputs.gatekeeperRecord.received=null,rt.internal.chainTransaction=void 0,rt.inputs.gatekeeperRecord.status=InputStatus.IN_PROGRESS})},et.prototype.gatekeeperRequest=function(rt,nt){var at,it;if(!(!((at=nt.inputs.civicPass.received)===null||at===void 0)&&at.payload))throw this.log.error("Missing civicPass payload",nt),new Error("Missing civicPass payload");return this.gatekeeperClient.refreshToken({payload:(it=nt.inputs.civicPass.received)===null||it===void 0?void 0:it.payload,payer:rt})},et.prototype.statusHasValidToken=function(){var rt=this.gatewayCoreStore.getState(),nt=rt.inputs.gatewayToken.received;return nt!=null&&nt.expiryTime?!!(nt&&!isTokenRefreshRequired({gatewayToken:nt,tokenExpirationMarginSeconds:0})):!1},et}(Issuance),UserInteractionStatus;(function(tt){tt.STARTED="started",tt.FINISHED="finished"})(UserInteractionStatus||(UserInteractionStatus={}));var getUserInteractionStatusFromAction=function(tt,et){var rt,nt;return[CivicPassMessageAction.TOKEN_ACTIVE,CivicPassMessageAction.TOKEN_REVOKED,CivicPassMessageAction.TOKEN_FROZEN,CivicPassMessageAction.TOKEN_REJECTED,CivicPassMessageAction.FAILED_IP_CHECK,CivicPassMessageAction.FAILED_VPN_CHECK,CivicPassMessageAction.ERROR].includes(et)?UserInteractionStatus.FINISHED:(nt=(rt=tt.internal)===null||rt===void 0?void 0:rt.userInteraction)===null||nt===void 0?void 0:nt.status},PartnerReview=function(){function tt(et,rt,nt){this.gatewayCoreStore=et,this.gatekeeperClient=rt,this.abortController=nt,this.timers={},this.log=prefixLogger("PartnerReview instance")}return tt.prototype.pollForReviewFinished=function(){return __awaiter(this,void 0,void 0,function(){var et,rt=this;return __generator(this,function(nt){return et=function(){return __awaiter(rt,void 0,void 0,function(){var at=this,it;return __generator(this,function(st){return!((it=this.abortController)===null||it===void 0)&&it.signal.aborted?(clearInterval(this.timers.pollForReviewFinishedTimer),[2]):(this.gatekeeperClient.getGatekeeperRecordWithPayload().then(function(dt){if(!dt||!(dt!=null&&dt.state)||(dt==null?void 0:dt.state)===GatekeeperAPIStatus.SERVER_FAILURE)throw at.log.error("Error polling gatekeeper, no state returned",dt),clearInterval(at.timers.pollForReviewFinishedTimer),new Error("Error polling gatekeeper, no state returned");at.log.debug("pollUntilNotRequested record.state",dt.state),dt.state!==GatekeeperAPIStatus.REQUESTED&&(at.gatewayCoreStore.setState(function(pt){pt.inputs.gatekeeperRecord.status=InputStatus.COMPLETE,pt.inputs.gatekeeperRecord.received=dt}),clearInterval(at.timers.pollForReviewFinishedTimer))}),[2])})})},et(),this.timers.pollForReviewFinishedTimer=setInterval(et,2e3),[2]})})},tt.prototype.abort=function(){clearInterval(this.timers.pollForReviewFinishedTimer)},tt}(),_a$2,logError$1=prefixLogger("common").error,validationProcessToGatewayStatus=(_a$2={},_a$2[ValidationStatus.COLLECTING]=GatewayStatus.COLLECTING_USER_INFORMATION,_a$2[ValidationStatus.PROCESSING]=GatewayStatus.VALIDATING_USER_INFORMATION,_a$2[ValidationStatus.IN_REVIEW]=GatewayStatus.VALIDATING_USER_INFORMATION,_a$2[ValidationStatus.FAILED]=GatewayStatus.USER_INFORMATION_REJECTED,_a$2[ValidationStatus.COMPLETED]=GatewayStatus.USER_INFORMATION_VALIDATED,_a$2),payerIsWalletOwner=function(tt){var et,rt,nt;return((et=tt.inputs.parameters)===null||et===void 0?void 0:et.payer)===((nt=(rt=tt.inputs.parameters)===null||rt===void 0?void 0:rt.wallet)===null||nt===void 0?void 0:nt.address)},tokenNoGatekeeperRecordError=function(tt){var et,rt,nt;return!!(!((et=tt.inputs.gatewayToken)===null||et===void 0)&&et.received&&((nt=(rt=tt.inputs.gatekeeperRecord)===null||rt===void 0?void 0:rt.received)===null||nt===void 0?void 0:nt.state)===GatekeeperAPIStatus.NOT_REQUESTED)},statusFromGatewayTokenIfExists=function(tt){var et,rt=tt.inputs.gatewayToken.received;if(tokenNoGatekeeperRecordError(tt))return GatewayStatus.ERROR;if(rt){var nt=isTokenRefreshRequired({gatewayToken:rt,tokenExpirationMarginSeconds:0,forceRequireRefresh:(et=tt.inputs.dynamicParameters)===null||et===void 0?void 0:et.forceRequireRefresh});switch(rt.state){case"ACTIVE":return nt?GatewayStatus.REFRESH_TOKEN_REQUIRED:GatewayStatus.ACTIVE;case"FROZEN":return GatewayStatus.FROZEN;case"REVOKED":return GatewayStatus.REVOKED;default:return logError$1("Unexpected token state: ".concat(rt.state)),GatewayStatus.ERROR}}},handleGatewayTokenExistsStatus=function(tt){var et=statusFromGatewayTokenIfExists(tt);return et||(logError$1("The gateway status indicated an existing token but no status could be derived"),GatewayStatus.ERROR)},statusIfGatekeeperRecordRejected=function(tt){var et,rt=tt.inputs.gatekeeperRecord,nt=tt.inputs.gatewayToken,at=(et=rt==null?void 0:rt.received)===null||et===void 0?void 0:et.state;switch(at){case GatekeeperAPIStatus.ISSUED_EXPIRED:return nt!=null&&nt.received?void 0:GatewayStatus.ERROR;case GatekeeperAPIStatus.REJECTED:return GatewayStatus.REJECTED;case GatekeeperAPIStatus.ISSUED_LOCATION_NOT_SUPPORTED:case GatekeeperAPIStatus.LOCATION_NOT_SUPPORTED:return GatewayStatus.LOCATION_NOT_SUPPORTED;case GatekeeperAPIStatus.ISSUED_VPN_NOT_SUPPORTED:case GatekeeperAPIStatus.VPN_NOT_SUPPORTED:return GatewayStatus.VPN_NOT_SUPPORTED;case GatekeeperAPIStatus.REQUESTED_RETRIES_EXHAUSTED:return GatewayStatus.ERROR;default:return}};(function(){function tt(et,rt,nt,at,it,st,dt){var pt,mt,yt,Rt,Tt,At,xt,Nt;if(this.gatewayCoreStore=et,this.messageEventInterface=rt,this.instanceId=nt,this.inputs=at,this.postMessageTargetCallback=st,this.chainImplementation=dt,this.abortController=new AbortController,!this.chainImplementation||!(!((pt=at.wallet)===null||pt===void 0)&&pt.address)||!at.stage)throw new Error("chainImplementation wallet and stage are required");this.wallet=at.wallet,this.payer=getPayer(at),this.log=prefixLogger("Orchestrator[".concat(this.instanceId,"]")),this.listenerManager=new ListenerManager(this.messageEventInterface,this.chainImplementation,this.instanceId);var Ct=(yt=(mt=this.chainImplementation)===null||mt===void 0?void 0:mt.chainDetails)===null||yt===void 0?void 0:yt.chainNetwork;this.gatekeeperClient=new GatekeeperClient({abortController:this.abortController,baseUrl:(Rt=at.gatekeeperConfig)===null||Rt===void 0?void 0:Rt.baseUrl,queryParams:at.gatekeeperNetwork?{network:Ct,gatekeeperNetworkAddress:at.gatekeeperNetwork}:void 0,headers:__assign(__assign({},((Tt=at.gatekeeperConfig)===null||Tt===void 0?void 0:Tt.headers)||{}),at.xCivicClientHeader?{"x-civic-client":at.xCivicClientHeader}:{}),stage:at.stage,fetchImplementation:it.fetchImplementation,numRetries:it.numRetries,walletAddress:(At=at.wallet)===null||At===void 0?void 0:At.address,chainType:(Nt=(xt=this.chainImplementation)===null||xt===void 0?void 0:xt.chainDetails)===null||Nt===void 0?void 0:Nt.chainType}),this.log.debug("Orchestrator created")}return Object.defineProperty(tt.prototype,"issuance",{get:function(){return this._issuance||(this._issuance=new Issuance(this.gatewayCoreStore,this.chainImplementation,this.gatekeeperClient,this.abortController,this.inputs.expectTokenTimeoutSeconds)),this._issuance},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"refresh",{get:function(){return this._refresh||(this._refresh=new Refresh(this.gatewayCoreStore,this.chainImplementation,this.gatekeeperClient,this.abortController,this.inputs.expectTokenTimeoutSeconds)),this._refresh},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"partnerReview",{get:function(){return this._partnerReview||(this._partnerReview=new PartnerReview(this.gatewayCoreStore,this.gatekeeperClient,this.abortController)),this._partnerReview},enumerable:!1,configurable:!0}),tt.prototype.getRemoteSignInstance=function(){return this.remoteSignInstance||(this.remoteSignInstance=new RemoteSignWindowEventEmitter(eventEmitter(this.postMessageTargetCallback(this.instanceId)),this.instanceId)),this.remoteSignInstance},tt.prototype.getOwnerDids=function(){return __awaiter(this,void 0,void 0,function(){var et;return __generator(this,function(rt){switch(rt.label){case 0:return[4,this.chainImplementation.ownerDids()];case 1:return et=rt.sent(),this.gatewayCoreStore.setState(function(nt){nt.internal.ownerDids=et}),[2]}})})},tt.prototype.lookupTokenState=function(){return __awaiter(this,void 0,void 0,function(){var et,rt,nt,at=this;return __generator(this,function(it){switch(it.label){case 0:return et=function(){return __awaiter(at,void 0,void 0,function(){var st=this;return __generator(this,function(dt){return this.gatewayCoreStore.setState(function(pt){pt.inputs.gatekeeperRecord.status=InputStatus.IN_PROGRESS}),[2,this.gatekeeperClient.getGatekeeperRecordWithPayload().then(function(pt){st.log.debug("getGatekeeperRecordWithPayload record",pt),!st.abortController.signal.aborted&&st.gatewayCoreStore.setState(function(mt){mt.inputs.gatekeeperRecord.status=InputStatus.COMPLETE,mt.inputs.gatekeeperRecord.received=pt})}).catch(function(pt){st.log.error("Error retrieving gatekeeper record",pt),!st.abortController.signal.aborted&&st.gatewayCoreStore.setState(function(mt){mt.inputs.gatekeeperRecord.status=InputStatus.ERROR,mt.inputs.gatekeeperRecord.error=pt})})]})})},rt=function(){return __awaiter(at,void 0,void 0,function(){var st=this;return __generator(this,function(dt){return this.gatewayCoreStore.setState(function(pt){pt.inputs.gatewayToken.status=InputStatus.IN_PROGRESS}),[2,this.chainImplementation.findGatewayToken().then(function(pt){st.abortController.signal.aborted||st.gatewayCoreStore.setState(function(mt){mt.inputs.gatewayToken.status=InputStatus.COMPLETE,pt&&(mt.inputs.gatewayToken.received=pt)})}).catch(function(pt){st.abortController.signal.aborted||(st.log.error("Error retrieving gateway token",pt),st.gatewayCoreStore.setState(function(mt){mt.inputs.gatewayToken.status=InputStatus.ERROR,mt.inputs.gatewayToken.error=pt}))})]})})},nt=[rt()],this.inputs.disableInitialGatekeeperLookup||nt.push(et()),[4,Promise.allSettled(nt)];case 1:return it.sent(),[2]}})})},tt.prototype.initialise=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(et){switch(et.label){case 0:return this.log.debug("Initialising orchestrator"),this.abortController=new AbortController,this.gatewayCoreStore.getState().functions.reset(),[4,Promise.allSettled([this.getOwnerDids(),this.lookupTokenState()])];case 1:return et.sent(),[2]}})})},tt.prototype.reset=function(){this.log.debug("resetting orchestrator"),this.initialise()},tt.prototype.onInternalStatusChange=function(et,rt){var nt,at;if(et===GatewayStatus.ERROR){var it=this.gatewayCoreStore.getState();tokenNoGatekeeperRecordError(it)&&this.gatewayCoreStore.setState(function(st){st.internal.errors||(st.internal.errors={}),st.internal.errors.expectedTokenGatekeeperRecord=new ChainError("Token has no gatekeeper record",ErrorCode.EXPECTED_GATEKEEPER_RECORD)});return}if(et===GatewayStatus.ACTIVE){rt!==GatewayStatus.ACTIVE&&((nt=this._refresh)===null||nt===void 0||nt.onActiveTokenFound(),this._refresh||(at=this._issuance)===null||at===void 0||at.onActiveTokenFound());return}if(et===GatewayStatus.USER_INFORMATION_VALIDATED)return this.issuance.makeGatekeeperRequest(this.payer);if([ExtendedGatewayStatus.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND].includes(et))return this.issuance.sendTransaction();if(et===ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN)return this.issuance.expectOnChainToken();if(et===ExtendedGatewayStatus.REFRESH_USER_INFORMATION_VALIDATED)return this.refresh.makeGatekeeperRequest(this.payer);if(et===ExtendedGatewayStatus.REFRESH_AWAITING_TRANSACTION_SEND)return this.refresh.sendTransaction();if(et===ExtendedGatewayStatus.REFRESH_AWAITING_ON_CHAIN_TOKEN)return this.refresh.expectOnChainToken();if(et===ExtendedGatewayStatus.TOKEN_IN_PARTNER_REVIEW)return this.partnerReview.pollForReviewFinished();if([ExtendedGatewayStatus.RESTART,ExtendedGatewayStatus.RESTART_REFRESH].includes(et))return this.reset()},tt.prototype.orchestrate=function(){var et=this;this.log.debug("running orchestrate()"),this.gatewayCoreStore.subscribe(function(rt){return rt.internal.status},function(rt,nt){return et.onInternalStatusChange(rt,nt)}),this.gatewayCoreStore.subscribe(function(rt){var nt;return(nt=rt.inputs.gatewayToken.received)===null||nt===void 0?void 0:nt.expiryTime},function(rt,nt){rt&&nt&&rt>nt&&et.gatewayCoreStore.setState(function(at){var it;((it=at.inputs.dynamicParameters)===null||it===void 0?void 0:it.forceRequireRefresh)!==void 0&&(at.inputs.dynamicParameters.forceRequireRefresh=!1)})}),this.gatewayCoreStore.subscribe(function(rt){return rt.inputs.civicPass.received},function(rt){return et.gatewayCoreStore.setState(function(nt){var at=getUserInteractionStatusFromAction(nt,rt==null?void 0:rt.action);nt.internal.userInteraction.status=at})}),this.listenerManager.registerCivicPassListener(function(rt){et.gatewayCoreStore.setState(function(nt){nt.inputs.civicPass.status=InputStatus.COMPLETE,nt.inputs.civicPass.received=rt})}),this.listenerManager.registerCivicSignListener(function(rt){et.gatewayCoreStore.setState(function(at){at.inputs.civicSign.status=InputStatus.RECEIVED,at.inputs.civicSign.received=rt});var nt=et.gatewayCoreStore.getState().internal.ownerDids;handleRemoteSignEvent(rt,et.getRemoteSignInstance(),{chainImplementation:et.chainImplementation,wallet:et.wallet,ownerDids:nt}).then(function(at){at&&et.log.error("No result from remote sign event"),et.gatewayCoreStore.setState(function(it){it.inputs.civicSign.received=null,it.inputs.civicSign.sent=at,it.inputs.civicSign.error=null,it.inputs.civicSign.status=InputStatus.RESPONDED})}).catch(function(at){et.gatewayCoreStore.setState(function(it){it.inputs.civicSign.error=at,it.inputs.civicSign.status=InputStatus.ERROR})})}),this.listenerManager.registerOnChainListeners(function(rt){et.gatewayCoreStore.setState(function(nt){nt.inputs.gatewayToken.received=rt})})},tt.prototype.abort=function(){var et,rt,nt;this.log.debug("Aborting orchestration"),this.chainImplementation.onDestroy(),(et=this._issuance)===null||et===void 0||et.abort(),(rt=this._refresh)===null||rt===void 0||rt.abort(),(nt=this._partnerReview)===null||nt===void 0||nt.abort(),this.abortController.abort(),this.gatekeeperClient.abort(),this.listenerManager.unregisterAllListeners()},tt})();var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(tt,...et){throw new Error(`[Immer] minified error nr: ${tt}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf=Object.getPrototypeOf;function isDraft(tt){return!!tt&&!!tt[DRAFT_STATE]}function isDraftable(tt){var et;return tt?isPlainObject(tt)||Array.isArray(tt)||!!tt[DRAFTABLE]||!!((et=tt.constructor)!=null&&et[DRAFTABLE])||isMap(tt)||isSet(tt):!1}var objectCtorString=Object.prototype.constructor.toString();function isPlainObject(tt){if(!tt||typeof tt!="object")return!1;const et=getPrototypeOf(tt);if(et===null)return!0;const rt=Object.hasOwnProperty.call(et,"constructor")&&et.constructor;return rt===Object?!0:typeof rt=="function"&&Function.toString.call(rt)===objectCtorString}function each(tt,et){getArchtype(tt)===0?Reflect.ownKeys(tt).forEach(rt=>{et(rt,tt[rt],tt)}):tt.forEach((rt,nt)=>et(nt,rt,tt))}function getArchtype(tt){const et=tt[DRAFT_STATE];return et?et.type_:Array.isArray(tt)?1:isMap(tt)?2:isSet(tt)?3:0}function has(tt,et){return getArchtype(tt)===2?tt.has(et):Object.prototype.hasOwnProperty.call(tt,et)}function set(tt,et,rt){const nt=getArchtype(tt);nt===2?tt.set(et,rt):nt===3?tt.add(rt):tt[et]=rt}function is(tt,et){return tt===et?tt!==0||1/tt===1/et:tt!==tt&&et!==et}function isMap(tt){return tt instanceof Map}function isSet(tt){return tt instanceof Set}function latest(tt){return tt.copy_||tt.base_}function shallowCopy(tt,et){if(isMap(tt))return new Map(tt);if(isSet(tt))return new Set(tt);if(Array.isArray(tt))return Array.prototype.slice.call(tt);if(!et&&isPlainObject(tt))return getPrototypeOf(tt)?{...tt}:Object.assign(Object.create(null),tt);const rt=Object.getOwnPropertyDescriptors(tt);delete rt[DRAFT_STATE];let nt=Reflect.ownKeys(rt);for(let at=0;at<nt.length;at++){const it=nt[at],st=rt[it];st.writable===!1&&(st.writable=!0,st.configurable=!0),(st.get||st.set)&&(rt[it]={configurable:!0,writable:!0,enumerable:st.enumerable,value:tt[it]})}return Object.create(getPrototypeOf(tt),rt)}function freeze(tt,et=!1){return isFrozen(tt)||isDraft(tt)||!isDraftable(tt)||(getArchtype(tt)>1&&(tt.set=tt.add=tt.clear=tt.delete=dontMutateFrozenCollections),Object.freeze(tt),et&&Object.entries(tt).forEach(([rt,nt])=>freeze(nt,!0))),tt}function dontMutateFrozenCollections(){die(2)}function isFrozen(tt){return Object.isFrozen(tt)}var plugins={};function getPlugin(tt){const et=plugins[tt];return et||die(0,tt),et}var currentScope;function getCurrentScope(){return currentScope}function createScope(tt,et){return{drafts_:[],parent_:tt,immer_:et,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(tt,et){et&&(getPlugin("Patches"),tt.patches_=[],tt.inversePatches_=[],tt.patchListener_=et)}function revokeScope(tt){leaveScope(tt),tt.drafts_.forEach(revokeDraft),tt.drafts_=null}function leaveScope(tt){tt===currentScope&&(currentScope=tt.parent_)}function enterScope(tt){return currentScope=createScope(currentScope,tt)}function revokeDraft(tt){const et=tt[DRAFT_STATE];et.type_===0||et.type_===1?et.revoke_():et.revoked_=!0}function processResult(tt,et){et.unfinalizedDrafts_=et.drafts_.length;const rt=et.drafts_[0];return tt!==void 0&&tt!==rt?(rt[DRAFT_STATE].modified_&&(revokeScope(et),die(4)),isDraftable(tt)&&(tt=finalize(et,tt),et.parent_||maybeFreeze(et,tt)),et.patches_&&getPlugin("Patches").generateReplacementPatches_(rt[DRAFT_STATE].base_,tt,et.patches_,et.inversePatches_)):tt=finalize(et,rt,[]),revokeScope(et),et.patches_&&et.patchListener_(et.patches_,et.inversePatches_),tt!==NOTHING?tt:void 0}function finalize(tt,et,rt){if(isFrozen(et))return et;const nt=et[DRAFT_STATE];if(!nt)return each(et,(at,it)=>finalizeProperty(tt,nt,et,at,it,rt)),et;if(nt.scope_!==tt)return et;if(!nt.modified_)return maybeFreeze(tt,nt.base_,!0),nt.base_;if(!nt.finalized_){nt.finalized_=!0,nt.scope_.unfinalizedDrafts_--;const at=nt.copy_;let it=at,st=!1;nt.type_===3&&(it=new Set(at),at.clear(),st=!0),each(it,(dt,pt)=>finalizeProperty(tt,nt,at,dt,pt,rt,st)),maybeFreeze(tt,at,!1),rt&&tt.patches_&&getPlugin("Patches").generatePatches_(nt,rt,tt.patches_,tt.inversePatches_)}return nt.copy_}function finalizeProperty(tt,et,rt,nt,at,it,st){if(isDraft(at)){const dt=it&&et&&et.type_!==3&&!has(et.assigned_,nt)?it.concat(nt):void 0,pt=finalize(tt,at,dt);if(set(rt,nt,pt),isDraft(pt))tt.canAutoFreeze_=!1;else return}else st&&rt.add(at);if(isDraftable(at)&&!isFrozen(at)){if(!tt.immer_.autoFreeze_&&tt.unfinalizedDrafts_<1)return;finalize(tt,at),(!et||!et.scope_.parent_)&&typeof nt!="symbol"&&Object.prototype.propertyIsEnumerable.call(rt,nt)&&maybeFreeze(tt,at)}}function maybeFreeze(tt,et,rt=!1){!tt.parent_&&tt.immer_.autoFreeze_&&tt.canAutoFreeze_&&freeze(et,rt)}function createProxyProxy(tt,et){const rt=Array.isArray(tt),nt={type_:rt?1:0,scope_:et?et.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:et,base_:tt,draft_:null,copy_:null,revoke_:null,isManual_:!1};let at=nt,it=objectTraps;rt&&(at=[nt],it=arrayTraps);const{revoke:st,proxy:dt}=Proxy.revocable(at,it);return nt.draft_=dt,nt.revoke_=st,dt}var objectTraps={get(tt,et){if(et===DRAFT_STATE)return tt;const rt=latest(tt);if(!has(rt,et))return readPropFromProto(tt,rt,et);const nt=rt[et];return tt.finalized_||!isDraftable(nt)?nt:nt===peek(tt.base_,et)?(prepareCopy(tt),tt.copy_[et]=createProxy(nt,tt)):nt},has(tt,et){return et in latest(tt)},ownKeys(tt){return Reflect.ownKeys(latest(tt))},set(tt,et,rt){const nt=getDescriptorFromProto(latest(tt),et);if(nt!=null&&nt.set)return nt.set.call(tt.draft_,rt),!0;if(!tt.modified_){const at=peek(latest(tt),et),it=at==null?void 0:at[DRAFT_STATE];if(it&&it.base_===rt)return tt.copy_[et]=rt,tt.assigned_[et]=!1,!0;if(is(rt,at)&&(rt!==void 0||has(tt.base_,et)))return!0;prepareCopy(tt),markChanged(tt)}return tt.copy_[et]===rt&&(rt!==void 0||et in tt.copy_)||Number.isNaN(rt)&&Number.isNaN(tt.copy_[et])||(tt.copy_[et]=rt,tt.assigned_[et]=!0),!0},deleteProperty(tt,et){return peek(tt.base_,et)!==void 0||et in tt.base_?(tt.assigned_[et]=!1,prepareCopy(tt),markChanged(tt)):delete tt.assigned_[et],tt.copy_&&delete tt.copy_[et],!0},getOwnPropertyDescriptor(tt,et){const rt=latest(tt),nt=Reflect.getOwnPropertyDescriptor(rt,et);return nt&&{writable:!0,configurable:tt.type_!==1||et!=="length",enumerable:nt.enumerable,value:rt[et]}},defineProperty(){die(11)},getPrototypeOf(tt){return getPrototypeOf(tt.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(tt,et)=>{arrayTraps[tt]=function(){return arguments[0]=arguments[0][0],et.apply(this,arguments)}});arrayTraps.deleteProperty=function(tt,et){return arrayTraps.set.call(this,tt,et,void 0)};arrayTraps.set=function(tt,et,rt){return objectTraps.set.call(this,tt[0],et,rt,tt[0])};function peek(tt,et){const rt=tt[DRAFT_STATE];return(rt?latest(rt):tt)[et]}function readPropFromProto(tt,et,rt){var at;const nt=getDescriptorFromProto(et,rt);return nt?"value"in nt?nt.value:(at=nt.get)==null?void 0:at.call(tt.draft_):void 0}function getDescriptorFromProto(tt,et){if(!(et in tt))return;let rt=getPrototypeOf(tt);for(;rt;){const nt=Object.getOwnPropertyDescriptor(rt,et);if(nt)return nt;rt=getPrototypeOf(rt)}}function markChanged(tt){tt.modified_||(tt.modified_=!0,tt.parent_&&markChanged(tt.parent_))}function prepareCopy(tt){tt.copy_||(tt.copy_=shallowCopy(tt.base_,tt.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(tt){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(et,rt,nt)=>{if(typeof et=="function"&&typeof rt!="function"){const it=rt;rt=et;const st=this;return function(pt=it,...mt){return st.produce(pt,yt=>rt.call(this,yt,...mt))}}typeof rt!="function"&&die(6),nt!==void 0&&typeof nt!="function"&&die(7);let at;if(isDraftable(et)){const it=enterScope(this),st=createProxy(et,void 0);let dt=!0;try{at=rt(st),dt=!1}finally{dt?revokeScope(it):leaveScope(it)}return usePatchesInScope(it,nt),processResult(at,it)}else if(!et||typeof et!="object"){if(at=rt(et),at===void 0&&(at=et),at===NOTHING&&(at=void 0),this.autoFreeze_&&freeze(at,!0),nt){const it=[],st=[];getPlugin("Patches").generateReplacementPatches_(et,at,it,st),nt(it,st)}return at}else die(1,et)},this.produceWithPatches=(et,rt)=>{if(typeof et=="function")return(st,...dt)=>this.produceWithPatches(st,pt=>et(pt,...dt));let nt,at;return[this.produce(et,rt,(st,dt)=>{nt=st,at=dt}),nt,at]},typeof(tt==null?void 0:tt.autoFreeze)=="boolean"&&this.setAutoFreeze(tt.autoFreeze),typeof(tt==null?void 0:tt.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(tt.useStrictShallowCopy)}createDraft(tt){isDraftable(tt)||die(8),isDraft(tt)&&(tt=current(tt));const et=enterScope(this),rt=createProxy(tt,void 0);return rt[DRAFT_STATE].isManual_=!0,leaveScope(et),rt}finishDraft(tt,et){const rt=tt&&tt[DRAFT_STATE];(!rt||!rt.isManual_)&&die(9);const{scope_:nt}=rt;return usePatchesInScope(nt,et),processResult(void 0,nt)}setAutoFreeze(tt){this.autoFreeze_=tt}setUseStrictShallowCopy(tt){this.useStrictShallowCopy_=tt}applyPatches(tt,et){let rt;for(rt=et.length-1;rt>=0;rt--){const at=et[rt];if(at.path.length===0&&at.op==="replace"){tt=at.value;break}}rt>-1&&(et=et.slice(rt+1));const nt=getPlugin("Patches").applyPatches_;return isDraft(tt)?nt(tt,et):this.produce(tt,at=>nt(at,et))}};function createProxy(tt,et){const rt=isMap(tt)?getPlugin("MapSet").proxyMap_(tt,et):isSet(tt)?getPlugin("MapSet").proxySet_(tt,et):createProxyProxy(tt,et);return(et?et.scope_:getCurrentScope()).drafts_.push(rt),rt}function current(tt){return isDraft(tt)||die(10,tt),currentImpl(tt)}function currentImpl(tt){if(!isDraftable(tt)||isFrozen(tt))return tt;const et=tt[DRAFT_STATE];let rt;if(et){if(!et.modified_)return et.base_;et.finalized_=!0,rt=shallowCopy(tt,et.scope_.immer_.useStrictShallowCopy_)}else rt=shallowCopy(tt,!0);return each(rt,(nt,at)=>{set(rt,nt,currentImpl(at))}),et&&(et.finalized_=!1),rt}var immer$1=new Immer2;immer$1.produce;immer$1.produceWithPatches.bind(immer$1);immer$1.setAutoFreeze.bind(immer$1);immer$1.setUseStrictShallowCopy.bind(immer$1);immer$1.applyPatches.bind(immer$1);immer$1.createDraft.bind(immer$1);immer$1.finishDraft.bind(immer$1);var _a$1;_a$1={},_a$1[GatewayStatus.IN_REVIEW]=CivicPassMessageAction.TOKEN_IN_REVIEW,_a$1[GatewayStatus.ERROR]=CivicPassMessageAction.ERROR,_a$1[GatewayStatus.ACTIVE]=CivicPassMessageAction.TOKEN_ACTIVE,_a$1[GatewayStatus.REVOKED]=CivicPassMessageAction.TOKEN_REVOKED,_a$1[GatewayStatus.FROZEN]=CivicPassMessageAction.TOKEN_FROZEN,_a$1[GatewayStatus.REJECTED]=CivicPassMessageAction.TOKEN_REJECTED,_a$1[GatewayStatus.LOCATION_NOT_SUPPORTED]=CivicPassMessageAction.FAILED_IP_CHECK,_a$1[GatewayStatus.VPN_NOT_SUPPORTED]=CivicPassMessageAction.FAILED_VPN_CHECK,_a$1[GatewayStatus.REFRESH_TOKEN_REQUIRED]=CivicPassMessageAction.REFRESH,_a$1[GatewayStatus.CHECKING]=CivicPassMessageAction.STATUS,_a$1[GatewayStatus.UNKNOWN]=CivicPassMessageAction.ISSUANCE,_a$1[GatewayStatus.NOT_REQUESTED]=CivicPassMessageAction.ISSUANCE,_a$1[GatewayStatus.COLLECTING_USER_INFORMATION]=CivicPassMessageAction.ISSUANCE,_a$1[GatewayStatus.VALIDATING_USER_INFORMATION]=CivicPassMessageAction.ISSUANCE,_a$1[GatewayStatus.USER_INFORMATION_VALIDATED]=CivicPassMessageAction.ISSUANCE,_a$1[GatewayStatus.USER_INFORMATION_REJECTED]=CivicPassMessageAction.ISSUANCE,_a$1[ExtendedGatewayStatus.ISSUANCE_RESTART_DATA_COLLECTION]=CivicPassMessageAction.ISSUANCE,_a$1[ExtendedGatewayStatus.ISSUANCE_AWAITING_TRANSACTION_SEND]=CivicPassMessageAction.SIGN_TRANSACTION,_a$1[ExtendedGatewayStatus.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND]=CivicPassMessageAction.TOKEN_IN_REVIEW,_a$1[ExtendedGatewayStatus.ISSUANCE_CLIENT_PAYER_REQUESTED]=CivicPassMessageAction.SIGN_TRANSACTION,_a$1[ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN]=CivicPassMessageAction.AWAITING_TRANSACTION_CONFIRMATION,_a$1[ExtendedGatewayStatus.CONFIRM_OWNER_TRANSACTION]=CivicPassMessageAction.SIGN_TRANSACTION,_a$1[ExtendedGatewayStatus.AWAITING_OWNER_TRANSACTION]=CivicPassMessageAction.AWAITING_TRANSACTION_CONFIRMATION,_a$1[ExtendedGatewayStatus.CHAIN_TIMEOUT_ERROR]=CivicPassMessageAction.CHAIN_ERROR,_a$1[ExtendedGatewayStatus.CHAIN_TRANSACTION_ERROR]=CivicPassMessageAction.CHAIN_ERROR,_a$1[ExtendedGatewayStatus.CHAIN_SIGN_MESSAGE_ERROR]=CivicPassMessageAction.CHAIN_ERROR,_a$1[ExtendedGatewayStatus.TOKEN_IN_PARTNER_REVIEW]=CivicPassMessageAction.TOKEN_IN_PARTNER_REVIEW,_a$1[ExtendedGatewayStatus.TOKEN_REFRESH_IN_REVIEW]=CivicPassMessageAction.TOKEN_REFRESH_IN_REVIEW,_a$1[ExtendedGatewayStatus.REFRESH_AWAITING_TRANSACTION_SEND]=CivicPassMessageAction.SIGN_TRANSACTION,_a$1[ExtendedGatewayStatus.REFRESH_CLIENT_PAYER_REQUESTED]=CivicPassMessageAction.SIGN_TRANSACTION,_a$1[ExtendedGatewayStatus.REFRESH_AWAITING_ON_CHAIN_TOKEN]=CivicPassMessageAction.AWAITING_TRANSACTION_CONFIRMATION,_a$1[ExtendedGatewayStatus.REFRESH_USER_INFORMATION_VALIDATED]=CivicPassMessageAction.REFRESH,_a$1[ExtendedGatewayStatus.RESTART]=CivicPassMessageAction.ISSUANCE,_a$1[ExtendedGatewayStatus.REFRESH_IN_REVIEW]=CivicPassMessageAction.REFRESH,_a$1[ExtendedGatewayStatus.RESTART_REFRESH]=CivicPassMessageAction.REFRESH,_a$1[ExtendedGatewayStatus.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND]=CivicPassMessageAction.TOKEN_REFRESH_IN_REVIEW;GatewayStatus.REFRESH_TOKEN_REQUIRED,GatewayStatus.FROZEN,GatewayStatus.REVOKED,GatewayStatus.ERROR;GatewayStatus.ACTIVE,GatewayStatus.REFRESH_TOKEN_REQUIRED,GatewayStatus.FROZEN,GatewayStatus.REVOKED,GatewayStatus.ERROR;var handleChainError=function(tt){var et,rt,nt,at,it,st,dt=!!(!((et=tt.inputs.gatewayToken)===null||et===void 0)&&et.received);return((rt=tt.inputs.civicPass.received)===null||rt===void 0?void 0:rt.event)===CivicPassMessageEventResult.FAILURE&&((nt=tt.inputs.civicPass.received)===null||nt===void 0?void 0:nt.action)===CivicPassMessageAction.CHAIN_ERROR?!((at=tt.internal.chainTransaction)===null||at===void 0)&&at.error&&(tt.internal.chainTransaction.attempts||0)<=(((it=tt.inputs.parameters)===null||it===void 0?void 0:it.clientSendMaxRetries)||DEFAULT_MAX_CLIENT_SENDS_RETRIES)?dt?payerIsWalletOwner(tt)?ExtendedGatewayStatus.REFRESH_AWAITING_TRANSACTION_SEND:ExtendedGatewayStatus.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND:payerIsWalletOwner(tt)?ExtendedGatewayStatus.ISSUANCE_AWAITING_TRANSACTION_SEND:ExtendedGatewayStatus.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND:dt?ExtendedGatewayStatus.RESTART_REFRESH:ExtendedGatewayStatus.RESTART:(st=tt.internal)===null||st===void 0?void 0:st.status},handleGatekeeperError=function(tt){var et,rt,nt,at=!!tt.inputs.gatewayToken.received;return((et=tt.inputs.civicPass.received)===null||et===void 0?void 0:et.event)===CivicPassMessageEventResult.FAILURE&&((rt=tt.inputs.civicPass.received)===null||rt===void 0?void 0:rt.action)===CivicPassMessageAction.ERROR?at?ExtendedGatewayStatus.RESTART_REFRESH:ExtendedGatewayStatus.RESTART:(nt=tt.internal)===null||nt===void 0?void 0:nt.status},getPendingRequestFromGatekeeperRecord=function(tt){var et,rt,nt;return((rt=(et=tt==null?void 0:tt.received)===null||et===void 0?void 0:et.payload)===null||rt===void 0?void 0:rt.pending)||((nt=tt==null?void 0:tt.received)===null||nt===void 0?void 0:nt.pending)},isInPartnerReview=function(tt){return!!getPendingRequestFromGatekeeperRecord(tt)},calculateFromIssuanceAwaitingOnChain=function(tt){var et,rt;if(((rt=(et=tt.internal.errors)===null||et===void 0?void 0:et.expectedOnChainToken)===null||rt===void 0?void 0:rt.errorCode)===ErrorCode.CHAIN_CONFIRMATION_TIMEOUT_ERROR)return ExtendedGatewayStatus.CHAIN_TIMEOUT_ERROR},calculateFromIssuanceInReview=function(tt){var et,rt,nt,at,it,st,dt,pt,mt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received,yt=tt.inputs.gatekeeperRecord;return(yt==null?void 0:yt.status)===InputStatus.IN_PROGRESS?tt.internal.status:isInPartnerReview(yt)?ExtendedGatewayStatus.TOKEN_IN_PARTNER_REVIEW:!((rt=tt.inputs.parameters)===null||rt===void 0)&&rt.payer?(yt==null?void 0:yt.status)===InputStatus.COMPLETE&&(mt==null?void 0:mt.action)!==CivicPassMessageAction.ISSUANCE&&!(!((nt=yt.received)===null||nt===void 0)&&nt.transaction)?ExtendedGatewayStatus.ISSUANCE_RESTART_DATA_COLLECTION:!((it=(at=tt.internal)===null||at===void 0?void 0:at.chainTransaction)===null||it===void 0)&&it.sentTxId?ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN:!((dt=(st=tt.internal)===null||st===void 0?void 0:st.chainTransaction)===null||dt===void 0)&&dt.error?ExtendedGatewayStatus.CHAIN_TRANSACTION_ERROR:!((pt=yt.received)===null||pt===void 0)&&pt.transaction?payerIsWalletOwner(tt)?ExtendedGatewayStatus.ISSUANCE_AWAITING_TRANSACTION_SEND:ExtendedGatewayStatus.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND:void 0:ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN},calculateFromGatekeeperIssuanceRequested=function(tt){var et,rt,nt,at=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received,it=tt.inputs.gatekeeperRecord;if(at&&(((rt=it==null?void 0:it.received)===null||rt===void 0?void 0:rt.state)===GatekeeperAPIStatus.REQUESTED||(it==null?void 0:it.status)===InputStatus.IN_PROGRESS))return!((nt=tt.inputs.parameters)===null||nt===void 0)&&nt.payer&&payerIsWalletOwner(tt)?ExtendedGatewayStatus.ISSUANCE_CLIENT_PAYER_REQUESTED:GatewayStatus.IN_REVIEW},calculateIssuanceRequestedDataCollectionRestart=function(tt){var et,rt,nt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received;if((nt==null?void 0:nt.event)===CivicPassMessageEventResult.FAILURE)return ExtendedGatewayStatus.RESTART;var at=validationProcessToGatewayStatus[(rt=nt==null?void 0:nt.payload)===null||rt===void 0?void 0:rt.status];if((nt==null?void 0:nt.action)===CivicPassMessageAction.STATUS&&(nt==null?void 0:nt.event)===CivicPassMessageEventResult.SUCCESS&&at)return at;if((nt==null?void 0:nt.action)===CivicPassMessageAction.ISSUANCE&&(nt==null?void 0:nt.event)===CivicPassMessageEventResult.SUCCESS)return GatewayStatus.USER_INFORMATION_VALIDATED;if((nt==null?void 0:nt.action)===CivicPassMessageAction.STATUS&&(nt==null?void 0:nt.event)===CivicPassMessageEventResult.SUCCESS||(nt==null?void 0:nt.action)===CivicPassMessageAction.ISSUANCE&&(nt==null?void 0:nt.event)===CivicPassMessageEventResult.IN_PROGRESS)return at||GatewayStatus.COLLECTING_USER_INFORMATION},computeIssuanceDataCollectionRestart=function(tt){var et;return statusFromGatewayTokenIfExists(tt)||calculateIssuanceRequestedDataCollectionRestart(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeIssuanceRequested=function(tt){var et;return statusFromGatewayTokenIfExists(tt)||calculateFromGatekeeperIssuanceRequested(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeIssuanceAwaitingOnChainToken=function(tt){var et;return statusFromGatewayTokenIfExists(tt)||calculateFromIssuanceAwaitingOnChain(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeIssuanceInReview=function(tt){var et;return statusFromGatewayTokenIfExists(tt)||statusIfGatekeeperRecordRejected(tt)||calculateFromIssuanceInReview(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},calculateIssuanceStatus=function(tt){var et,rt,nt,at,it,st,dt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received,pt=tt.inputs.gatekeeperRecord;if((dt==null?void 0:dt.event)===CivicPassMessageEventResult.FAILURE)return ExtendedGatewayStatus.RESTART;var mt=validationProcessToGatewayStatus[(rt=dt==null?void 0:dt.payload)===null||rt===void 0?void 0:rt.status];if((dt==null?void 0:dt.action)===CivicPassMessageAction.ISSUANCE&&(dt==null?void 0:dt.event)===CivicPassMessageEventResult.SUCCESS)return GatewayStatus.USER_INFORMATION_VALIDATED;if(!(pt!=null&&pt.received)||((nt=pt==null?void 0:pt.received)===null||nt===void 0?void 0:nt.state)===GatekeeperAPIStatus.NOT_REQUESTED)return(dt==null?void 0:dt.action)===CivicPassMessageAction.STATUS&&(dt==null?void 0:dt.event)===CivicPassMessageEventResult.SUCCESS||(dt==null?void 0:dt.action)===CivicPassMessageAction.ISSUANCE&&(dt==null?void 0:dt.event)===CivicPassMessageEventResult.IN_PROGRESS?mt||GatewayStatus.COLLECTING_USER_INFORMATION:GatewayStatus.NOT_REQUESTED;if(((at=pt==null?void 0:pt.received)===null||at===void 0?void 0:at.state)===GatekeeperAPIStatus.REQUESTED){if(isInPartnerReview(pt))return ExtendedGatewayStatus.TOKEN_IN_PARTNER_REVIEW;if(!((it=tt.inputs.parameters)===null||it===void 0)&&it.payer){if((pt==null?void 0:pt.status)===InputStatus.COMPLETE&&(dt==null?void 0:dt.action)!==CivicPassMessageAction.ISSUANCE&&!(!((st=pt.received)===null||st===void 0)&&st.transaction))return ExtendedGatewayStatus.ISSUANCE_RESTART_DATA_COLLECTION}else return ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN}},computeIssuanceStatus=function(tt){var et;return statusFromGatewayTokenIfExists(tt)||calculateIssuanceStatus(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeChecking=function(tt){if(!tt.inputs.civicPass.status){if(tt.inputs.gatekeeperRecord.status===InputStatus.ERROR||tt.inputs.gatewayToken.status===InputStatus.ERROR)return GatewayStatus.ERROR;if(tt.inputs.gatekeeperRecord.status===InputStatus.IN_PROGRESS||tt.inputs.gatewayToken.status===InputStatus.IN_PROGRESS)return GatewayStatus.CHECKING}},checkForInProgress=function(tt){var et;return statusFromGatewayTokenIfExists(tt)||computeChecking(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeInitialState=function(tt){var et;return computeChecking(tt)||statusIfGatekeeperRecordRejected(tt)||statusFromGatewayTokenIfExists(tt)||computeIssuanceStatus(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},calculateFromRefreshInReview=function(tt){var et,rt,nt,at,it,st,dt=tt.inputs.gatekeeperRecord;if(!((et=tt.inputs.parameters)===null||et===void 0)&&et.payer){if(!((nt=(rt=tt.internal)===null||rt===void 0?void 0:rt.chainTransaction)===null||nt===void 0)&&nt.sentTxId)return ExtendedGatewayStatus.REFRESH_AWAITING_ON_CHAIN_TOKEN;if(!((it=(at=tt.internal)===null||at===void 0?void 0:at.chainTransaction)===null||it===void 0)&&it.error)return ExtendedGatewayStatus.CHAIN_TRANSACTION_ERROR;if(!((st=dt.received)===null||st===void 0)&&st.transaction)return payerIsWalletOwner(tt)?ExtendedGatewayStatus.REFRESH_AWAITING_TRANSACTION_SEND:ExtendedGatewayStatus.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND}else return ExtendedGatewayStatus.REFRESH_AWAITING_ON_CHAIN_TOKEN},calculateFromGatekeeperRefreshRequested=function(tt){var et,rt,nt=tt.inputs.gatekeeperRecord;if(((et=nt==null?void 0:nt.received)===null||et===void 0?void 0:et.state)===GatekeeperAPIStatus.REQUESTED||(nt==null?void 0:nt.status)===InputStatus.IN_PROGRESS)return!((rt=tt.inputs.parameters)===null||rt===void 0)&&rt.payer&&payerIsWalletOwner(tt)?ExtendedGatewayStatus.REFRESH_CLIENT_PAYER_REQUESTED:ExtendedGatewayStatus.REFRESH_IN_REVIEW},tokenNotRefreshRequired=function(tt){var et=statusFromGatewayTokenIfExists(tt);return et&&![ExtendedGatewayStatus.REFRESH_AWAITING_ON_CHAIN_TOKEN,GatewayStatus.REFRESH_TOKEN_REQUIRED].includes(et)?et:void 0},computeRefreshRequested=function(tt){var et;return tokenNotRefreshRequired(tt)||calculateFromGatekeeperRefreshRequested(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},computeRefreshInReview=function(tt){var et;return tokenNotRefreshRequired(tt)||statusIfGatekeeperRecordRejected(tt)||calculateFromRefreshInReview(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},calculateRefreshStatus=function(tt){var et,rt=(et=tt.inputs.civicPass)===null||et===void 0?void 0:et.received;if((rt==null?void 0:rt.action)===CivicPassMessageAction.REFRESH&&(rt==null?void 0:rt.event)===CivicPassMessageEventResult.SUCCESS)return ExtendedGatewayStatus.REFRESH_USER_INFORMATION_VALIDATED},computeRefreshStatus=function(tt){var et;return tokenNotRefreshRequired(tt)||statusIfGatekeeperRecordRejected(tt)||calculateRefreshStatus(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},calculateFromRefreshAwaitingOnChain=function(tt){var et,rt;if(((rt=(et=tt.internal.errors)===null||et===void 0?void 0:et.expectedOnChainToken)===null||rt===void 0?void 0:rt.errorCode)===ErrorCode.CHAIN_CONFIRMATION_TIMEOUT_ERROR)return ExtendedGatewayStatus.CHAIN_TIMEOUT_ERROR},computeRefreshAwaitingOnChainToken=function(tt){var et;return tokenNotRefreshRequired(tt)||statusIfGatekeeperRecordRejected(tt)||calculateFromRefreshAwaitingOnChain(tt)||((et=tt.internal)===null||et===void 0?void 0:et.status)},_a;prefixLogger("gatewayStatus").debug;prefixLogger("gatewayStatus").error;var gatewayTokenStatuses=[GatewayStatus.ACTIVE,GatewayStatus.FROZEN,GatewayStatus.REVOKED,GatewayStatus.REFRESH_TOKEN_REQUIRED],validationProcessStatuses=[GatewayStatus.COLLECTING_USER_INFORMATION,GatewayStatus.VALIDATING_USER_INFORMATION,GatewayStatus.USER_INFORMATION_REJECTED,GatewayStatus.USER_INFORMATION_VALIDATED],errorStatuses=[GatewayStatus.REJECTED,GatewayStatus.ERROR,GatewayStatus.LOCATION_NOT_SUPPORTED,GatewayStatus.VPN_NOT_SUPPORTED];function createTransition(tt,et){return{nextState:tt,compute:et}}_a={},_a[GatewayStatus.UNKNOWN]=createTransition(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),[GatewayStatus.CHECKING],!1),checkForInProgress),_a[GatewayStatus.CHECKING]=createTransition(__spreadArray(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),errorStatuses,!0),[GatewayStatus.NOT_REQUESTED,ExtendedGatewayStatus.ISSUANCE_RESTART_DATA_COLLECTION,ExtendedGatewayStatus.TOKEN_IN_PARTNER_REVIEW],!1),computeInitialState),_a[GatewayStatus.NOT_REQUESTED]=createTransition(__spreadArray(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),validationProcessStatuses,!0),[ExtendedGatewayStatus.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,GatewayStatus.NOT_REQUESTED,ExtendedGatewayStatus.RESTART,ExtendedGatewayStatus.ISSUANCE_RESTART_DATA_COLLECTION],!1),computeIssuanceStatus),_a[GatewayStatus.COLLECTING_USER_INFORMATION]=createTransition(__spreadArray(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),validationProcessStatuses,!0),[ExtendedGatewayStatus.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,GatewayStatus.NOT_REQUESTED,ExtendedGatewayStatus.RESTART,ExtendedGatewayStatus.ISSUANCE_RESTART_DATA_COLLECTION],!1),computeIssuanceStatus),_a[GatewayStatus.USER_INFORMATION_VALIDATED]=createTransition(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),[ExtendedGatewayStatus.ISSUANCE_CLIENT_PAYER_REQUESTED,GatewayStatus.IN_REVIEW],!1),computeIssuanceRequested),_a[ExtendedGatewayStatus.ISSUANCE_CLIENT_PAYER_REQUESTED]=createTransition(__spreadArray(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),errorStatuses,!0),[ExtendedGatewayStatus.ISSUANCE_RESTART_DATA_COLLECTION,ExtendedGatewayStatus.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus.TOKEN_IN_PARTNER_REVIEW],!1),computeIssuanceInReview),_a[GatewayStatus.IN_REVIEW]=createTransition(__spreadArray(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),errorStatuses,!0),[ExtendedGatewayStatus.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus.TOKEN_IN_PARTNER_REVIEW],!1),computeIssuanceInReview),_a[GatewayStatus.REJECTED]=createTransition([],function(){return GatewayStatus.REJECTED}),_a[ExtendedGatewayStatus.ISSUANCE_AWAITING_TRANSACTION_SEND]=createTransition(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),[ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus.CONFIRM_OWNER_TRANSACTION,ExtendedGatewayStatus.CHAIN_TRANSACTION_ERROR],!1),computeIssuanceInReview),_a[ExtendedGatewayStatus.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND]=createTransition(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),[ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus.CONFIRM_OWNER_TRANSACTION,ExtendedGatewayStatus.CHAIN_TRANSACTION_ERROR],!1),computeIssuanceInReview),_a[ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN]=createTransition(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),[ExtendedGatewayStatus.CHAIN_TIMEOUT_ERROR],!1),computeIssuanceAwaitingOnChainToken),_a[ExtendedGatewayStatus.ISSUANCE_RESTART_DATA_COLLECTION]=createTransition(__spreadArray(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),validationProcessStatuses,!0),[GatewayStatus.USER_INFORMATION_VALIDATED,ExtendedGatewayStatus.ISSUANCE_CLIENT_PAYER_REQUESTED,GatewayStatus.NOT_REQUESTED],!1),computeIssuanceDataCollectionRestart),_a[GatewayStatus.REVOKED]=createTransition([],handleGatewayTokenExistsStatus),_a[GatewayStatus.FROZEN]=createTransition(__spreadArray([],gatewayTokenStatuses,!0),handleGatewayTokenExistsStatus),_a[GatewayStatus.ACTIVE]=createTransition(__spreadArray([],gatewayTokenStatuses,!0),handleGatewayTokenExistsStatus),_a[GatewayStatus.ERROR]=createTransition(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),[ExtendedGatewayStatus.RESTART,ExtendedGatewayStatus.RESTART_REFRESH],!1),handleGatekeeperError),_a[GatewayStatus.LOCATION_NOT_SUPPORTED]=createTransition([],function(){return GatewayStatus.LOCATION_NOT_SUPPORTED}),_a[GatewayStatus.VPN_NOT_SUPPORTED]=createTransition([],function(){return GatewayStatus.VPN_NOT_SUPPORTED}),_a[GatewayStatus.REFRESH_TOKEN_REQUIRED]=createTransition(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),[ExtendedGatewayStatus.REFRESH_USER_INFORMATION_VALIDATED],!1),computeRefreshStatus),_a[ExtendedGatewayStatus.REFRESH_USER_INFORMATION_VALIDATED]=createTransition(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),[ExtendedGatewayStatus.REFRESH_CLIENT_PAYER_REQUESTED,ExtendedGatewayStatus.REFRESH_IN_REVIEW],!1),computeRefreshRequested),_a[ExtendedGatewayStatus.REFRESH_IN_REVIEW]=createTransition(__spreadArray(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),errorStatuses,!0),[ExtendedGatewayStatus.REFRESH_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),computeRefreshInReview),_a[ExtendedGatewayStatus.TOKEN_REFRESH_IN_REVIEW]=createTransition(__spreadArray(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),errorStatuses,!0),[ExtendedGatewayStatus.REFRESH_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),computeRefreshInReview),_a[ExtendedGatewayStatus.REFRESH_CLIENT_PAYER_REQUESTED]=createTransition(__spreadArray(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),errorStatuses,!0),[ExtendedGatewayStatus.REFRESH_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),computeRefreshInReview),_a[ExtendedGatewayStatus.REFRESH_AWAITING_TRANSACTION_SEND]=createTransition(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),[ExtendedGatewayStatus.REFRESH_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus.CONFIRM_OWNER_TRANSACTION,ExtendedGatewayStatus.CHAIN_TRANSACTION_ERROR],!1),computeRefreshInReview),_a[ExtendedGatewayStatus.REFRESH_AWAITING_THIRD_PARTY_TRANSACTION_SEND]=createTransition(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),[ExtendedGatewayStatus.REFRESH_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus.CONFIRM_OWNER_TRANSACTION,ExtendedGatewayStatus.CHAIN_TRANSACTION_ERROR],!1),computeRefreshInReview),_a[ExtendedGatewayStatus.REFRESH_AWAITING_ON_CHAIN_TOKEN]=createTransition(__spreadArray(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),errorStatuses,!0),[ExtendedGatewayStatus.CHAIN_TIMEOUT_ERROR],!1),computeRefreshAwaitingOnChainToken),_a[ExtendedGatewayStatus.CHAIN_TIMEOUT_ERROR]=createTransition(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),[GatewayStatus.USER_INFORMATION_VALIDATED,ExtendedGatewayStatus.RESTART,ExtendedGatewayStatus.RESTART_REFRESH],!1),handleChainError),_a[ExtendedGatewayStatus.CHAIN_TRANSACTION_ERROR]=createTransition(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),[ExtendedGatewayStatus.RESTART,ExtendedGatewayStatus.RESTART_REFRESH,ExtendedGatewayStatus.ISSUANCE_AWAITING_TRANSACTION_SEND,ExtendedGatewayStatus.ISSUANCE_AWAITING_THIRD_PARTY_TRANSACTION_SEND,ExtendedGatewayStatus.REFRESH_AWAITING_ON_CHAIN_TOKEN],!1),handleChainError),_a[ExtendedGatewayStatus.TOKEN_IN_PARTNER_REVIEW]=createTransition(__spreadArray(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),errorStatuses,!0),[ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN],!1),computeIssuanceInReview),_a[ExtendedGatewayStatus.RESTART]=createTransition([ExtendedGatewayStatus.RESTART],function(){return ExtendedGatewayStatus.RESTART}),_a[ExtendedGatewayStatus.RESTART_REFRESH]=createTransition([ExtendedGatewayStatus.RESTART_REFRESH],function(){return ExtendedGatewayStatus.RESTART_REFRESH}),_a[ExtendedGatewayStatus.CHAIN_SIGN_MESSAGE_ERROR]=createTransition([ExtendedGatewayStatus.RESTART,ExtendedGatewayStatus.RESTART_REFRESH],handleChainError),_a[GatewayStatus.VALIDATING_USER_INFORMATION]=createTransition(__spreadArray(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),validationProcessStatuses,!0),[ExtendedGatewayStatus.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus.RESTART,ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus.ISSUANCE_RESTART_DATA_COLLECTION,GatewayStatus.NOT_REQUESTED],!1),computeIssuanceStatus),_a[GatewayStatus.USER_INFORMATION_REJECTED]=createTransition(__spreadArray(__spreadArray(__spreadArray([],gatewayTokenStatuses,!0),validationProcessStatuses,!0),[ExtendedGatewayStatus.TOKEN_IN_PARTNER_REVIEW,ExtendedGatewayStatus.RESTART,ExtendedGatewayStatus.ISSUANCE_AWAITING_ON_CHAIN_TOKEN,ExtendedGatewayStatus.ISSUANCE_RESTART_DATA_COLLECTION,GatewayStatus.NOT_REQUESTED],!1),computeIssuanceStatus),_a[ExtendedGatewayStatus.AWAITING_OWNER_TRANSACTION]=createTransition([],function(){return ExtendedGatewayStatus.AWAITING_OWNER_TRANSACTION}),_a[ExtendedGatewayStatus.CONFIRM_OWNER_TRANSACTION]=createTransition([],function(){return ExtendedGatewayStatus.CONFIRM_OWNER_TRANSACTION});GatewayStatus.UNKNOWN;GatewayStatus.UNKNOWN;prefixLogger("main").debug;const makeConfig=(tt,et)=>({cluster:et,commitment:"confirmed",supportedClusterUrls:{[et]:tt},recentBlockCheck:!1,broadcastCheck:!1}),logger=prefixLogger("SolanaChainImplementation"),createSolanaTransactionFromBase64=tt=>Transaction.from(Buffer.from(tt,"base64")),insufficientFundsMessages=["insufficient funds","custom program error: 0x1"],isClientWalletFundsError=tt=>!!insufficientFundsMessages.map(et=>{var rt;return(rt=tt==null?void 0:tt.message)===null||rt===void 0?void 0:rt.toLowerCase().includes(et)}).includes(!0),isUserRejectedError=tt=>{var et,rt,nt;return!!(!((et=tt.name)===null||et===void 0)&&et.toLowerCase().includes("walletsignmessageerror")||!((rt=tt.message)===null||rt===void 0)&&rt.toLowerCase().includes("walletsignmessageerror")||!((nt=tt.message)===null||nt===void 0)&&nt.toLowerCase().includes("user rejected"))},parseTransactionErrorCode=tt=>{if(isClientWalletFundsError(tt))return logger.warn("parseTransactionErrorCode - INSUFFICIENT_FUNDS error detected",tt),ErrorCode.INSUFFICIENT_FUNDS;if(isUserRejectedError(tt))return logger.warn("parseTransactionErrorCode - SIGN_TRANSACTION_ERROR error detected",tt),ErrorCode.SIGN_TRANSACTION_ERROR},logDebug=prefixLogger("SolanaChainImplementation").debug,logWarn=prefixLogger("SolanaChainImplementation").warn,isUnsupportedOperationError=tt=>{var et;return tt.code===-32603||((et=tt.message)===null||et===void 0?void 0:et.toLowerCase().includes("unsupportedoperation"))},createSignMessageProofIfSupported=async(tt,et)=>{try{if(!et){logDebug("createSignMessageProofIfSupported no signMessageFn passed, using proveTransactionFn...");const nt=await tt();return logDebug("createSignMessageProofIfSupported proveTransactionFn successful",{proof:nt,signatureMethod:SignatureMethod.TRANSACTION}),{proof:nt,signatureMethod:SignatureMethod.TRANSACTION}}logDebug("createSignMessageProofIfSupported signMessageFn exists, calling proveSignMessageFn...");const rt=await et();return logDebug("createSignMessageProofIfSupported proveSignMessageFn successful",{proof:rt,signatureMethod:SignatureMethod.MESSAGE}),{proof:rt,signatureMethod:SignatureMethod.MESSAGE}}catch(rt){const nt=rt;if(logWarn("createSignMessageProofIfSupported error",{error:rt,useError:nt}),isUnsupportedOperationError(nt)){logDebug("error is an unsupported operation error, trying proveTransaction");const at=await tt();return logDebug("createSignMessageProofIfSupported proveTransactionFn successful",{proof:at,signatureMethod:SignatureMethod.TRANSACTION}),{proof:at,signatureMethod:SignatureMethod.TRANSACTION}}throw rt}};class SolanaChainImplementation{constructor(et){this.inputs=et,this.listeners=[],this.chainDetails={chainType:ChainType.SOLANA,chainNetwork:et.cluster}}async ownerDids(){return[`did:sol:${this.inputs.publicKey.toBase58()}`]}on(et,rt){var nt;if(et==="TOKEN_CREATED"){const at=dist.onGatewayToken(this.inputs.connection,this.inputs.publicKey,this.inputs.gatekeeperNetworkAddress,it=>{this.gatewayToken||(this.gatewayToken=it,rt({issuingGatekeeper:it.issuingGatekeeper.toBase58(),gatekeeperNetworkAddress:it.gatekeeperNetwork.toBase58(),owner:it.owner.toBase58(),state:State[it.state],identifier:it.publicKey.toBase58(),expiryTime:it.expiryTime}))});return this.listeners.push(at),this}if(et==="TOKEN_CHANGED"){const at=((nt=this.gatewayToken)===null||nt===void 0?void 0:nt.publicKey.toBase58())||dist.getGatewayTokenAddressForOwnerAndGatekeeperNetwork(this.inputs.publicKey,this.inputs.gatekeeperNetworkAddress),it=dist.onGatewayTokenChange(this.inputs.connection,new PublicKey(at),st=>{rt({issuingGatekeeper:st.issuingGatekeeper.toBase58(),gatekeeperNetworkAddress:st.gatekeeperNetwork.toBase58(),owner:st.owner.toBase58(),state:State[st.state],identifier:st.publicKey.toBase58(),expiryTime:st.expiryTime})});return this.listeners.push(it),this}return this}async findGatewayToken(){const{connection:et,publicKey:rt,gatekeeperNetworkAddress:nt}=this.inputs,at=await dist.findGatewayToken(et,rt,new PublicKey(nt),!0);if(at)return this.gatewayToken=at,{issuingGatekeeper:at.issuingGatekeeper.toBase58(),gatekeeperNetworkAddress:at.gatekeeperNetwork.toBase58(),owner:at.owner.toBase58(),state:State[at.state],identifier:at.publicKey.toBase58(),expiryTime:at.expiryTime}}async proveWalletOwnership(et){const{publicKey:rt,signMessage:nt,signTransaction:at,connection:it,cluster:st}=this.inputs;try{logDebug("proveWalletOwnership",{message:et});const mt=await createSignMessageProofIfSupported(()=>proveTransaction(rt,at,makeConfig(it.rpcEndpoint,st)).then(yt=>yt.toString("base64")),nt&&et?()=>create(yt=>nt(Buffer.from(yt)),et):void 0);return logDebug("proveWalletOwnership",mt),mt}catch(dt){const pt=dt,mt=parseTransactionErrorCode(pt)===ErrorCode.SIGN_TRANSACTION_ERROR?ErrorCode.POWO_ERROR:void 0;throw logDebug("proveWalletOwnership",{error:dt,errorMessage:pt.message,parsedErrorCode:parseTransactionErrorCode(pt),useErrorCode:mt}),new ChainError(pt.message,mt)}}async handleTransaction(et){const{handleTransaction:rt,signTransaction:nt}=this.inputs;logDebug("handleUserSignedTransaction, user-provided handleTransaction",!!rt);const at=createSolanaTransactionFromBase64(et);if(rt)return logDebug("custom handleTransaction function present, calling now..."),rt(at).catch(st=>{throw new ChainError(st.message,ErrorCode.CUSTOM_HANDLE_TRANSACTION_ERROR,prefixLogger("SolanaChainImplementation"))});let it=at;return this.requiresSignature(at)&&(it=await nt(at).catch(st=>{throw new ChainError(st.message,ErrorCode.SIGN_TRANSACTION_ERROR,prefixLogger("SolanaChainImplementation"))})),this.submitTransaction(it).catch(st=>{const dt=st;throw dt instanceof SendTransactionError||parseTransactionErrorCode(dt)?(logDebug("error is instance of SendTransactionError",st),new ChainError(dt.message,parseTransactionErrorCode(dt),prefixLogger("SolanaChainImplementation"))):new ChainError(dt.message,ErrorCode.SEND_TRANSACTION_ERROR,prefixLogger("SolanaChainImplementation"))})}requiresSignature(et){return et.signatures.find(rt=>rt.publicKey.equals(this.inputs.publicKey))!==void 0}async submitTransaction(et){const{connection:rt}=this.inputs,nt=await rt.sendRawTransaction(et.serialize()),at=await rt.getLatestBlockhash("processed");return await rt.confirmTransaction(Object.assign(Object.assign({},at),{signature:nt}),"processed"),nt}removeGatewayAccountTokenChangeListener(et){logDebug(`removeGatewayAccountTokenChangeListener listenerId: ${et} calling removeAccountChangeListener`),this.listeners[this.listeners.findIndex(rt=>rt===et)]=void 0}async onDestroy(){const et=this.listeners.filter(complement(isNil)).map(rt=>dist.removeAccountChangeListener(this.inputs.connection,rt));await Promise.all(et)}}const logInfo=prefixLogger$1("SolanaGatewayProvider").info,SolanaGatewayProvider=({children:tt=null,wallet:et,connection:rt,cluster:nt="mainnet-beta",gatekeeperNetwork:at,wrapper:it,logo:st,stage:dt="prod",redirectUrl:pt,gatekeeperSendsTransaction:mt,payer:yt,handleTransaction:Rt,expiryMarginSeconds:Tt,options:At,partnerAppId:xt,forceRequireRefresh:Nt,hideWalletPrompts:Ct})=>{var Ot;if(yt&&mt)throw Error("Cannot set payer when gatekeeperSendsTransaction is true");const kt=reactExports.useMemo(()=>{var Pt;return{walletAddress:(Pt=et==null?void 0:et.publicKey)===null||Pt===void 0?void 0:Pt.toBase58(),chainImplementation:et!=null&&et.publicKey&&(et!=null&&et.signTransaction)&&dt&&(at!=null&&at.toBase58())?new SolanaChainImplementation({connection:rt,cluster:nt,publicKey:et.publicKey,signTransaction:et.signTransaction,signMessage:et.signMessage,gatekeeperNetworkAddress:at,stage:dt,handleTransaction:Rt}):void 0,stage:dt,gatekeeperNetwork:at==null?void 0:at.toBase58(),options:Object.assign(Object.assign({},At),{clientSendsMaxRetries:(At==null?void 0:At.clientSendsMaxRetries)||1}),gatekeeperSendsTransaction:mt,expiryMarginSeconds:Tt,partnerAppId:xt,disableInitialGatekeeperLookup:["tigoYhp9SpCDoCQmXGj2im5xa3mnjR1zuXrpCJ5ZRmi","ignREusXmGrscGNUesoU9mxfds9AiYTezUKex2PsZV6"].includes((at==null?void 0:at.toBase58())||""),payer:yt==null?void 0:yt.toBase58(),hideWalletPrompts:Ct}},[(Ot=et==null?void 0:et.publicKey)===null||Ot===void 0?void 0:Ot.toBase58(),rt==null?void 0:rt.rpcEndpoint,nt,dt,at==null?void 0:at.toBase58(),Rt,JSON.stringify(At),mt,Tt,xt,yt,Ct]);return reactExports.useEffect(()=>{logInfo("Client Options",Object.assign(Object.assign({},kt),{forceRequireRefresh:Nt}))},[kt,Nt]),jsxRuntimeExports.jsx(GatewayProvider,Object.assign({walletAddress:kt.walletAddress,chainImplementation:kt.chainImplementation,stage:kt.stage,gatekeeperNetwork:kt.gatekeeperNetwork,options:kt.options,gatekeeperSendsTransaction:!!kt.gatekeeperSendsTransaction,expiryMarginSeconds:kt.expiryMarginSeconds,partnerAppId:kt.partnerAppId,disableInitialGatekeeperLookup:kt.disableInitialGatekeeperLookup,payer:kt.payer,redirectUrl:pt,logo:st,reactComponentVersion:VERSION$1,wrapper:it,forceRequireRefresh:Nt,expectTokenTimeoutSeconds:30},{children:tt}))};console.log(VERSION$1);let e={data:""},t=tt=>typeof window=="object"?((tt?tt.querySelector("#_goober"):window._goober)||Object.assign((tt||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:tt||e,l=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,a=/\/\*[^]*?\*\/|  +/g,n$1=/\n+/g,o=(tt,et)=>{let rt="",nt="",at="";for(let it in tt){let st=tt[it];it[0]=="@"?it[1]=="i"?rt=it+" "+st+";":nt+=it[1]=="f"?o(st,it):it+"{"+o(st,it[1]=="k"?"":et)+"}":typeof st=="object"?nt+=o(st,et?et.replace(/([^,])+/g,dt=>it.replace(/(^:.*)|([^,])+/g,pt=>/&/.test(pt)?pt.replace(/&/g,dt):dt?dt+" "+pt:pt)):it):st!=null&&(it=/^--/.test(it)?it:it.replace(/[A-Z]/g,"-$&").toLowerCase(),at+=o.p?o.p(it,st):it+":"+st+";")}return rt+(et&&at?et+"{"+at+"}":at)+nt},c={},s=tt=>{if(typeof tt=="object"){let et="";for(let rt in tt)et+=rt+s(tt[rt]);return et}return tt},i=(tt,et,rt,nt,at)=>{let it=s(tt),st=c[it]||(c[it]=(pt=>{let mt=0,yt=11;for(;mt<pt.length;)yt=101*yt+pt.charCodeAt(mt++)>>>0;return"go"+yt})(it));if(!c[st]){let pt=it!==tt?tt:(mt=>{let yt,Rt,Tt=[{}];for(;yt=l.exec(mt.replace(a,""));)yt[4]?Tt.shift():yt[3]?(Rt=yt[3].replace(n$1," ").trim(),Tt.unshift(Tt[0][Rt]=Tt[0][Rt]||{})):Tt[0][yt[1]]=yt[2].replace(n$1," ").trim();return Tt[0]})(tt);c[st]=o(at?{["@keyframes "+st]:pt}:pt,rt?"":"."+st)}let dt=rt&&c.g?c.g:null;return rt&&(c.g=c[st]),((pt,mt,yt,Rt)=>{Rt?mt.data=mt.data.replace(Rt,pt):mt.data.indexOf(pt)===-1&&(mt.data=yt?pt+mt.data:mt.data+pt)})(c[st],et,nt,dt),st},p=(tt,et,rt)=>tt.reduce((nt,at,it)=>{let st=et[it];if(st&&st.call){let dt=st(rt),pt=dt&&dt.props&&dt.props.className||/^go/.test(dt)&&dt;st=pt?"."+pt:dt&&typeof dt=="object"?dt.props?"":o(dt,""):dt===!1?"":dt}return nt+at+(st??"")},"");function u$1(tt){let et=this||{},rt=tt.call?tt(et.p):tt;return i(rt.unshift?rt.raw?p(rt,[].slice.call(arguments,1),et.p):rt.reduce((nt,at)=>Object.assign(nt,at&&at.call?at(et.p):at),{}):rt,t(et.target),et.g,et.o,et.k)}let d,f,g;u$1.bind({g:1});let h$1=u$1.bind({k:1});function m(tt,et,rt,nt){o.p=et,d=tt,f=rt,g=nt}function j(tt,et){let rt=this||{};return function(){let nt=arguments;function at(it,st){let dt=Object.assign({},it),pt=dt.className||at.className;rt.p=Object.assign({theme:f&&f()},dt),rt.o=/ *go\d+/.test(pt),dt.className=u$1.apply(rt,nt)+(pt?" "+pt:"");let mt=tt;return tt[0]&&(mt=dt.as||tt,delete dt.as),g&&mt[0]&&g(dt),d(mt,dt)}return at}}var W=tt=>typeof tt=="function",T=(tt,et)=>W(tt)?tt(et):tt,U=(()=>{let tt=0;return()=>(++tt).toString()})(),b=(()=>{let tt;return()=>{if(tt===void 0&&typeof window<"u"){let et=matchMedia("(prefers-reduced-motion: reduce)");tt=!et||et.matches}return tt}})(),Q=20,S=new Map,X=1e3,$=tt=>{if(S.has(tt))return;let et=setTimeout(()=>{S.delete(tt),u({type:4,toastId:tt})},X);S.set(tt,et)},J=tt=>{let et=S.get(tt);et&&clearTimeout(et)},v=(tt,et)=>{switch(et.type){case 0:return{...tt,toasts:[et.toast,...tt.toasts].slice(0,Q)};case 1:return et.toast.id&&J(et.toast.id),{...tt,toasts:tt.toasts.map(it=>it.id===et.toast.id?{...it,...et.toast}:it)};case 2:let{toast:rt}=et;return tt.toasts.find(it=>it.id===rt.id)?v(tt,{type:1,toast:rt}):v(tt,{type:0,toast:rt});case 3:let{toastId:nt}=et;return nt?$(nt):tt.toasts.forEach(it=>{$(it.id)}),{...tt,toasts:tt.toasts.map(it=>it.id===nt||nt===void 0?{...it,visible:!1}:it)};case 4:return et.toastId===void 0?{...tt,toasts:[]}:{...tt,toasts:tt.toasts.filter(it=>it.id!==et.toastId)};case 5:return{...tt,pausedAt:et.time};case 6:let at=et.time-(tt.pausedAt||0);return{...tt,pausedAt:void 0,toasts:tt.toasts.map(it=>({...it,pauseDuration:it.pauseDuration+at}))}}},A=[],P={toasts:[],pausedAt:void 0},u=tt=>{P=v(P,tt),A.forEach(et=>{et(P)})},Y={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},I=(tt={})=>{let[et,rt]=reactExports.useState(P);reactExports.useEffect(()=>(A.push(rt),()=>{let at=A.indexOf(rt);at>-1&&A.splice(at,1)}),[et]);let nt=et.toasts.map(at=>{var it,st;return{...tt,...tt[at.type],...at,duration:at.duration||((it=tt[at.type])==null?void 0:it.duration)||(tt==null?void 0:tt.duration)||Y[at.type],style:{...tt.style,...(st=tt[at.type])==null?void 0:st.style,...at.style}}});return{...et,toasts:nt}},G=(tt,et="blank",rt)=>({createdAt:Date.now(),visible:!0,type:et,ariaProps:{role:"status","aria-live":"polite"},message:tt,pauseDuration:0,...rt,id:(rt==null?void 0:rt.id)||U()}),h=tt=>(et,rt)=>{let nt=G(et,tt,rt);return u({type:2,toast:nt}),nt.id},n=(tt,et)=>h("blank")(tt,et);n.error=h("error");n.success=h("success");n.loading=h("loading");n.custom=h("custom");n.dismiss=tt=>{u({type:3,toastId:tt})};n.remove=tt=>u({type:4,toastId:tt});n.promise=(tt,et,rt)=>{let nt=n.loading(et.loading,{...rt,...rt==null?void 0:rt.loading});return tt.then(at=>(n.success(T(et.success,at),{id:nt,...rt,...rt==null?void 0:rt.success}),at)).catch(at=>{n.error(T(et.error,at),{id:nt,...rt,...rt==null?void 0:rt.error})}),tt};var Z=(tt,et)=>{u({type:1,toast:{id:tt,height:et}})},ee=()=>{u({type:5,time:Date.now()})},D=tt=>{let{toasts:et,pausedAt:rt}=I(tt);reactExports.useEffect(()=>{if(rt)return;let it=Date.now(),st=et.map(dt=>{if(dt.duration===1/0)return;let pt=(dt.duration||0)+dt.pauseDuration-(it-dt.createdAt);if(pt<0){dt.visible&&n.dismiss(dt.id);return}return setTimeout(()=>n.dismiss(dt.id),pt)});return()=>{st.forEach(dt=>dt&&clearTimeout(dt))}},[et,rt]);let nt=reactExports.useCallback(()=>{rt&&u({type:6,time:Date.now()})},[rt]),at=reactExports.useCallback((it,st)=>{let{reverseOrder:dt=!1,gutter:pt=8,defaultPosition:mt}=st||{},yt=et.filter(At=>(At.position||mt)===(it.position||mt)&&At.height),Rt=yt.findIndex(At=>At.id===it.id),Tt=yt.filter((At,xt)=>xt<Rt&&At.visible).length;return yt.filter(At=>At.visible).slice(...dt?[Tt+1]:[0,Tt]).reduce((At,xt)=>At+(xt.height||0)+pt,0)},[et]);return{toasts:et,handlers:{updateHeight:Z,startPause:ee,endPause:nt,calculateOffset:at}}},oe=h$1`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,re=h$1`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,se=h$1`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,_=j("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${tt=>tt.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${oe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${re} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${tt=>tt.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${se} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ne=h$1`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,V=j("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${tt=>tt.secondary||"#e0e0e0"};
  border-right-color: ${tt=>tt.primary||"#616161"};
  animation: ${ne} 1s linear infinite;
`,pe=h$1`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,de=h$1`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,w=j("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${tt=>tt.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${de} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${tt=>tt.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ue=j("div")`
  position: absolute;
`,le=j("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Te=h$1`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fe=j("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Te} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,M=({toast:tt})=>{let{icon:et,type:rt,iconTheme:nt}=tt;return et!==void 0?typeof et=="string"?reactExports.createElement(fe,null,et):et:rt==="blank"?null:reactExports.createElement(le,null,reactExports.createElement(V,{...nt}),rt!=="loading"&&reactExports.createElement(ue,null,rt==="error"?reactExports.createElement(_,{...nt}):reactExports.createElement(w,{...nt})))},ye=tt=>`
0% {transform: translate3d(0,${tt*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ge=tt=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${tt*-150}%,-1px) scale(.6); opacity:0;}
`,he="0%{opacity:0;} 100%{opacity:1;}",xe="0%{opacity:1;} 100%{opacity:0;}",be=j("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Se=j("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Ae=(tt,et)=>{let rt=tt.includes("top")?1:-1,[nt,at]=b()?[he,xe]:[ye(rt),ge(rt)];return{animation:et?`${h$1(nt)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${h$1(at)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},F=reactExports.memo(({toast:tt,position:et,style:rt,children:nt})=>{let at=tt.height?Ae(tt.position||et||"top-center",tt.visible):{opacity:0},it=reactExports.createElement(M,{toast:tt}),st=reactExports.createElement(Se,{...tt.ariaProps},T(tt.message,tt));return reactExports.createElement(be,{className:tt.className,style:{...at,...rt,...tt.style}},typeof nt=="function"?nt({icon:it,message:st}):reactExports.createElement(reactExports.Fragment,null,it,st))});m(reactExports.createElement);var Ee=({id:tt,className:et,style:rt,onHeightUpdate:nt,children:at})=>{let it=reactExports.useCallback(st=>{if(st){let dt=()=>{let pt=st.getBoundingClientRect().height;nt(tt,pt)};dt(),new MutationObserver(dt).observe(st,{subtree:!0,childList:!0,characterData:!0})}},[tt,nt]);return reactExports.createElement("div",{ref:it,className:et,style:rt},at)},Re=(tt,et)=>{let rt=tt.includes("top"),nt=rt?{top:0}:{bottom:0},at=tt.includes("center")?{justifyContent:"center"}:tt.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:b()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${et*(rt?1:-1)}px)`,...nt,...at}},ve=u$1`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,O=16,Ie=({reverseOrder:tt,position:et="top-center",toastOptions:rt,gutter:nt,children:at,containerStyle:it,containerClassName:st})=>{let{toasts:dt,handlers:pt}=D(rt);return reactExports.createElement("div",{style:{position:"fixed",zIndex:9999,top:O,left:O,right:O,bottom:O,pointerEvents:"none",...it},className:st,onMouseEnter:pt.startPause,onMouseLeave:pt.endPause},dt.map(mt=>{let yt=mt.position||et,Rt=pt.calculateOffset(mt,{reverseOrder:tt,gutter:nt,defaultPosition:et}),Tt=Re(yt,Rt);return reactExports.createElement(Ee,{id:mt.id,key:mt.id,onHeightUpdate:pt.updateHeight,className:mt.visible?ve:"",style:Tt},mt.type==="custom"?T(mt.message,mt):at?at(mt):reactExports.createElement(F,{toast:mt,position:yt}))}))},_t=n;const AirdropContext=reactExports.createContext({client:void 0,claim:async()=>{},isConfirming:!1,balance:null,error:void 0,txHash:void 0}),safeParsePublicKey=tt=>{try{return new PublicKey(tt)}catch{return null}},AirdropProvider=({children:tt})=>{const et=useAnchorWallet(),{connection:rt}=useConnection(),{gatewayToken:nt}=useSolanaGateway(),[at,it]=reactExports.useState(),[st,dt]=reactExports.useState(null),pt=reactExports.useMemo(()=>safeParsePublicKey("6BVf7qroiW1PzSZGK4zUKSruK6xCqepHXVdtW1P4iDn1"),[window.location.href]),[mt,yt]=reactExports.useState(!1),[Rt,Tt]=reactExports.useState(),[At,xt]=reactExports.useState(),Nt=reactExports.useMemo(()=>{if(et)return new AnchorProvider(rt,et,{})},[et]);reactExports.useEffect(()=>{!Nt||!pt||at||AirdropClient.get(Nt,pt).then(Ot=>{it(Ot),Ot&&Ot.getBalance().then(dt)})},[pt,Nt,at]);const Ct=async()=>{if(!nt||!at)throw new Error("No gateway token");try{const Ot=await at.claim(nt.publicKey);console.log("Airdrop tx sig:",Ot),_t.success(jsxRuntimeExports.jsx("a",{href:`https://explorer.solana.com/tx/${Ot}?cluster=devnet`,target:"_blank",children:"Airdrop complete. Explorer"})),yt(!0),at.getBalance().then(dt),Tt(Ot)}catch(Ot){_t.error("Airdrop failed: "+Ot.message),xt(Ot)}finally{yt(!1)}};return jsxRuntimeExports.jsx(AirdropContext.Provider,{value:{client:at,balance:st,claim:Ct,isConfirming:mt,error:At,txHash:Rt},children:tt})},useAirdrop=()=>reactExports.useContext(AirdropContext),SvgBalloon=tt=>reactExports.createElement("svg",{fill:"none",height:304,viewBox:"0 0 269 304",width:269,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",...tt},reactExports.createElement("filter",{id:"a",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:36.0741,width:271.794,x:-2.09212,y:107.18},reactExports.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),reactExports.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),reactExports.createElement("feOffset",{dy:2.80208}),reactExports.createElement("feGaussianBlur",{stdDeviation:1.40104}),reactExports.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),reactExports.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.0121875 0 0 0 0 0.116756 0 0 0 0 0.4875 0 0 0 0.25 0"}),reactExports.createElement("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_73_3411"}),reactExports.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_73_3411",mode:"normal",result:"shape"})),reactExports.createElement("filter",{id:"b",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:74.3601,width:74.3602,x:97.4332,y:228.73},reactExports.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),reactExports.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),reactExports.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),reactExports.createElement("feOffset",{dx:-.84858,dy:-.84858}),reactExports.createElement("feGaussianBlur",{stdDeviation:.42429}),reactExports.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),reactExports.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),reactExports.createElement("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_73_3411"})),reactExports.createElement("filter",{id:"c",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:78.4632,width:77.0142,x:96.3724,y:227.669},reactExports.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),reactExports.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),reactExports.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),reactExports.createElement("feOffset",{dx:3.5026,dy:4.90365}),reactExports.createElement("feGaussianBlur",{stdDeviation:5.60417}),reactExports.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),reactExports.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.325 0 0 0 0 0.132708 0 0 0 0 0.132708 0 0 0 0.25 0"}),reactExports.createElement("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_73_3411"}),reactExports.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),reactExports.createElement("feOffset",{dx:.700521,dy:1.40104}),reactExports.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),reactExports.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.2875 0 0 0 0 0.0934375 0 0 0 0 0.0934375 0 0 0 0.25 0"}),reactExports.createElement("feBlend",{in2:"effect1_innerShadow_73_3411",mode:"normal",result:"effect2_innerShadow_73_3411"})),reactExports.createElement("filter",{id:"d",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:72.422,width:73.5542,x:96.373,y:229.491},reactExports.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),reactExports.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),reactExports.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),reactExports.createElement("feOffset",{dy:1.40104}),reactExports.createElement("feGaussianBlur",{stdDeviation:.35026}),reactExports.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),reactExports.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.179167 0 0 0 0 0.0604687 0 0 0 0 0.0604687 0 0 0 0.25 0"}),reactExports.createElement("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_73_3411"})),reactExports.createElement("filter",{id:"e",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:12.9441,width:31.5026,x:118.48,y:247.056},reactExports.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),reactExports.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),reactExports.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),reactExports.createElement("feOffset",{dx:-1.11578,dy:-1.11578}),reactExports.createElement("feGaussianBlur",{stdDeviation:.55789}),reactExports.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),reactExports.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),reactExports.createElement("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_73_3411"})),reactExports.createElement("filter",{id:"f",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:17.5564,width:58.6051,x:105.068,y:261.73},reactExports.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),reactExports.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),reactExports.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),reactExports.createElement("feOffset",{dx:-1.53032,dy:-1.53032}),reactExports.createElement("feGaussianBlur",{stdDeviation:.765158}),reactExports.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),reactExports.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),reactExports.createElement("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_73_3411"})),reactExports.createElement("linearGradient",{id:"g"},reactExports.createElement("stop",{offset:0,stopColor:"#005491"}),reactExports.createElement("stop",{offset:1,stopColor:"#e1edf5"})),reactExports.createElement("linearGradient",{id:"h",gradientUnits:"userSpaceOnUse",x1:128.334,x2:136.928,xlinkHref:"#g",y1:109.476,y2:152.783}),reactExports.createElement("linearGradient",{id:"i",gradientUnits:"userSpaceOnUse",x1:218.199,x2:226.644,xlinkHref:"#g",y1:109.476,y2:152.844}),reactExports.createElement("linearGradient",{id:"j",gradientUnits:"userSpaceOnUse",x1:39.514,x2:48.2209,xlinkHref:"#g",y1:108.626,y2:151.887}),reactExports.createElement("radialGradient",{id:"k",cx:0,cy:0,gradientTransform:"matrix(-.42432808 118.07723756 -232.65549771 -.83608206 134.505 12.6462)",gradientUnits:"userSpaceOnUse",r:1},reactExports.createElement("stop",{offset:0,stopColor:"#8acdfd"}),reactExports.createElement("stop",{offset:1,stopColor:"#006ebe"})),reactExports.createElement("linearGradient",{id:"l"},reactExports.createElement("stop",{offset:0,stopColor:"#aadbff"}),reactExports.createElement("stop",{offset:.95,stopColor:"#0073c8"})),reactExports.createElement("linearGradient",{id:"m",gradientUnits:"userSpaceOnUse",x1:60.88,x2:77.55,xlinkHref:"#l",y1:221.85,y2:144.06}),reactExports.createElement("linearGradient",{id:"n",gradientUnits:"userSpaceOnUse",x1:195.26,x2:211.34,xlinkHref:"#l",y1:222.73,y2:146.39}),reactExports.createElement("linearGradient",{id:"o",gradientUnits:"userSpaceOnUse",x1:141.32,x2:177.55,xlinkHref:"#l",y1:212.73,y2:156.8}),reactExports.createElement("linearGradient",{id:"p",gradientUnits:"userSpaceOnUse",x1:171.23,x2:188.81,xlinkHref:"#l",y1:222.7,y2:158.62}),reactExports.createElement("linearGradient",{id:"q",gradientUnits:"userSpaceOnUse",x1:97.03,x2:132.65,xlinkHref:"#l",y1:213.81,y2:155.52}),reactExports.createElement("linearGradient",{id:"r",gradientUnits:"userSpaceOnUse",x1:132.02,x2:135.62,xlinkHref:"#l",y1:197.37,y2:197.18}),reactExports.createElement("linearGradient",{id:"s",gradientUnits:"userSpaceOnUse",x1:81.96,x2:99.94,xlinkHref:"#l",y1:222.8,y2:157.55}),reactExports.createElement("radialGradient",{id:"t",cx:0,cy:0,gradientTransform:"matrix(28.06389866 33.37645938 -33.37645938 28.06389866 138.101 268.127)",gradientUnits:"userSpaceOnUse",r:1},reactExports.createElement("stop",{offset:.713403,stopColor:"#879356"}),reactExports.createElement("stop",{offset:.764119,stopColor:"#b3c56a"}),reactExports.createElement("stop",{offset:.826727,stopColor:"#879356"})),reactExports.createElement("linearGradient",{id:"u",gradientUnits:"userSpaceOnUse",x1:106.634,x2:164.298,y1:233.803,y2:299.604},reactExports.createElement("stop",{offset:.359375,stopColor:"#e5fd85"}),reactExports.createElement("stop",{offset:.442708,stopColor:"#f5ffce"}),reactExports.createElement("stop",{offset:.572917,stopColor:"#e5fd85"})),reactExports.createElement("clipPath",{id:"v"},reactExports.createElement("path",{d:"m0 0h269.01v303.09h-269.01z"})),reactExports.createElement("g",{clipPath:"url(#v)"},reactExports.createElement("path",{clipRule:"evenodd",d:"m133.02 116.26-44.76 10.18v12.73c1.55.19 3.1.36 4.65.53 6.4.69 13.04 1.41 21.63 4.14 5.44 1.73 11.3 4.79 15.12 6.79 1.47.77 2.64 1.38 3.36 1.69.72-.31 1.89-.92 3.36-1.69 3.82-2 9.68-5.06 15.12-6.79 8.59-2.73 15.23-3.45 21.63-4.14 1.56-.17 3.1-.34 4.65-.53v-12.73z",fill:"url(#h)",fillRule:"evenodd"}),reactExports.createElement("path",{clipRule:"evenodd",d:"m268.16 126.44-45.4-10.18-45.4 10.18v12.73c1.57.19 3.14.36 4.72.53 6.49.69 13.23 1.41 21.94 4.14 5.51 1.73 11.46 4.79 15.34 6.79 1.49.77 2.67 1.38 3.41 1.69.73-.31 1.92-.92 3.41-1.69 3.87-2 9.82-5.06 15.33-6.79 8.86-2.78 15.67-3 22.51-3.22 1.52-.05 3.03-.1 4.57-.17l-.42-14z",fill:"url(#i)",fillRule:"evenodd"}),reactExports.createElement("path",{d:"m44.13 115.41-41.15 10.18-2.98 12.73c1.53.19 3.05.36 4.59.53 6.31.69 12.86 1.41 21.32 4.14 5.36 1.73 11.14 4.8 14.91 6.79 1.45.77 2.6 1.38 3.31 1.69.71-.32 1.86-.92 3.31-1.69 3.76-2 9.55-5.06 14.91-6.79 7.86-2.53 14.07-3.1 19.97-3.63 2-.18 3.63-.05 5.61-.3l.34-13.46-44.13-10.18z",fill:"url(#j)"}),reactExports.createElement("g",{filter:"url(#a)"},reactExports.createElement("path",{d:"m40.29 122.24c-19.61-.28-34.56004 10.16-39.580039 15.41l4.549999-7.35 15.06004-13.66 108.23-9.46 73.9 1.05 63.05 15.06 1.4 14.36c-3.04-3.62-14.78-11.77-37.48-15.41s-44.02 7.82-51.84 14.01c-7.82-4.2-27.67-12.96-44.48-14.36s-36.89 8.99-44.83 14.36c-7.82-4.55-28.37-13.73-47.99-14.01z",fill:"#c4c4c4"})),reactExports.createElement("path",{clipRule:"evenodd",d:"m268.85 141.12c.11-2.19.16-4.4.16-6.62 0-74.28-60.22-134.5-134.5-134.5s-134.51 60.22-134.51 134.5c0 1.33.02 2.66.06 3.98 12.15-9.16 27.26-14.59 43.64-14.59s32.25 5.71 44.55 15.28c12.3-9.58 27.76-15.28 44.55-15.28s32.26 5.71 44.55 15.28c12.3-9.58 27.76-15.28 44.55-15.28 17.9 0 34.28 6.48 46.94 17.22z",fill:"url(#k)",fillRule:"evenodd"}),reactExports.createElement("g",{strokeLinecap:"round",strokeWidth:.99},reactExports.createElement("path",{d:"m.5 138.35 134.01 105.19",stroke:"url(#m)"}),reactExports.createElement("path",{d:"m268.3 141.15-133.38 102.81",stroke:"url(#n)"}),reactExports.createElement("path",{d:"m177.36 139.17-43.28 102.68",stroke:"url(#o)"}),reactExports.createElement("path",{d:"m222.42 152.36-88.34 89.48",stroke:"url(#p)"}),reactExports.createElement("path",{d:"m88.27 139.05 45.81 103.22",stroke:"url(#q)"}),reactExports.createElement("path",{d:"m132.81 152.32 1.27 89.95",stroke:"url(#r)"}),reactExports.createElement("path",{d:"m44.13 151.47 89.95 90.8",stroke:"url(#s)"})),reactExports.createElement("path",{d:"m139.51 60.27c0-2.92-2.37-5.29-5.29-5.29s-5.29 2.37-5.29 5.29c0 2.04 1.16 3.81 2.86 4.69l-1.96 8.48h8.78l-1.96-8.48c1.7-.88 2.86-2.65 2.86-4.69z",fill:"#fff"}),reactExports.createElement("path",{d:"m154.9 70.88c-1.03 7.97-7.86 14.16-16.1 14.16h-9.16c-8.96 0-16.24-7.29-16.24-16.24v-9.16c0-8.96 7.29-16.24 16.24-16.24h9.16c8.25 0 15.08 6.18 16.1 14.16h5.43c-1.05-10.95-10.31-19.55-21.53-19.55h-9.16c-11.93 0-21.63 9.71-21.63 21.63v9.16c0 11.93 9.71 21.63 21.63 21.63h9.16c11.22 0 20.48-8.59 21.53-19.55z",fill:"#fff"}),reactExports.createElement("path",{d:"m120.6 260 4.26-11.83h3l4.26 11.83h-2.63l-.87-2.52h-4.55l-.87 2.52h-2.62zm4.2-4.6h3.13l-1.57-4.56-1.57 4.56zm10.32-7.23h2.53v11.83h-2.53zm11.5 0c2.45 0 4.25 1.27 4.25 3.55 0 1.5-.87 2.52-2.15 2.85 1.27.15 1.87.75 1.97 2.03l.3 3.4h-2.55l-.23-2.96c-.08-1.03-.63-1.37-2.02-1.37h-2.22v4.33h-2.53v-11.83zm-2.65 5.38h2.28c1.3 0 2.02-.58 2.02-1.62s-.7-1.63-2.02-1.63h-2.28z",fill:"#727b4e"}),reactExports.createElement("path",{d:"m112.9 263.61c4.97 0 7.75 2.77 7.75 7.69s-2.74 7.65-7.62 7.65h-5.42v-15.34zm-2.01 12.57h2.01c2.98 0 4.41-1.58 4.41-4.9s-1.42-4.9-4.41-4.9h-2.01v9.81zm18.64-12.57c3.18 0 5.51 1.64 5.51 4.6 0 1.94-1.12 3.26-2.79 3.69 1.64.19 2.42.97 2.55 2.64l.39 4.41h-3.3l-.3-3.84c-.11-1.34-.82-1.77-2.61-1.77h-2.87v5.62h-3.28v-15.34h6.72zm-3.44 6.97h2.96c1.68 0 2.61-.76 2.61-2.1s-.91-2.12-2.61-2.12h-2.96v4.21zm17.12 8.71c-4.67 0-7.45-3.07-7.45-7.99s2.79-8.04 7.45-8.04 7.47 3.07 7.47 8.04-2.81 7.99-7.47 7.99zm-4.06-7.99c0 3.28 1.51 5.23 4.06 5.23s4.08-1.94 4.08-5.23-1.49-5.27-4.08-5.27-4.06 1.97-4.06 5.27zm19.63-7.69c3.67 0 5.9 1.9 5.9 5.01s-2.22 5.03-5.9 5.03h-2.85v5.29h-3.28v-15.34h6.13zm-2.85 7.28h2.66c1.73 0 2.72-.78 2.72-2.27s-.99-2.25-2.72-2.25h-2.66v4.51z",fill:"#7c75ff"}),reactExports.createElement("g",{filter:"url(#b)"},reactExports.createElement("circle",{cx:135.038,cy:266.334,fill:"url(#t)",r:36.7558})),reactExports.createElement("g",{filter:"url(#c)"},reactExports.createElement("ellipse",{cx:133.128,cy:264.449,fill:"url(#u)",rx:36.7558,ry:36.7798})),reactExports.createElement("g",{filter:"url(#d)",opacity:.3},reactExports.createElement("path",{clipRule:"evenodd",d:"m106.215 240.582.865.858c-.128.27-.08.595.145.817.28.278.736.278 1.024 0 .289-.277.281-.73 0-1.015-.224-.222-.552-.27-.824-.143l-.874-.866c-.113.116-.225.232-.336.349zm-8.4072 14.551c.051-.173.1033-.346.1569-.519l3.2953 3.266h6.261c.096-.277.368-.476.68-.476.401 0 .721.318.721.714 0 .397-.32.714-.721.714-.312 0-.584-.198-.68-.476h-6.461zm-.6581 2.601c.0398-.187.0811-.374.1239-.56l3.4264 3.396h4.467l3.347 3.317v8.378l5.992 5.939c.577-.51 1.339-.821 2.174-.821.075 0 .149.003.223.008l-5.82-5.768v-8.236c-.28-.095-.48-.365-.48-.675 0-.396.32-.714.721-.714.4 0 .72.318.72.714 0 .31-.2.58-.48.675v8.037l6.203 6.143c.928.325 1.664 1.054 1.993 1.973l1.467 1.453v4.737l5.988 5.935c.577-.508 1.337-.817 2.17-.817 1.804 0 3.266 1.449 3.266 3.237s-1.462 3.237-3.266 3.237c-.509 0-.992-.115-1.422-.321l4.251 4.212c-.236-.006-.471-.014-.705-.024l-26.078-25.845h-3.883l-3.8505-3.817h-.7517c-.0288-.158-.0565-.317-.0832-.476h1.027l3.8504 3.817h3.891l20.812 20.626c-.208-.426-.324-.904-.324-1.409 0-.789.284-1.512.757-2.073l-6.129-6.075v-4.737l-.809-.801c.005.073.008.147.008.222 0 1.787-1.462 3.237-3.266 3.237s-3.267-1.45-3.267-3.237c0-.787.283-1.509.755-2.07l-6.143-6.087v-8.379l-3.066-3.039h-4.467zm-.7767 7.224c.0008-.159.0027-.318.0056-.476h5.7784c.096-.278.368-.476.68-.476.401 0 .721.317.721.714s-.32.714-.721.714c-.32 0-.584-.198-.688-.476zm.0551 2.19c-.0089-.159-.0166-.317-.0234-.476h3.8303c.096-.278.369-.476.681-.476.4 0 .72.317.72.714 0 .396-.32.714-.72.714-.32 0-.585-.199-.681-.476zm.1898 2.19c-.0187-.159-.0363-.317-.0529-.476h1.7489c.0961-.278.3603-.477.6805-.477.4003 0 .7206.318.7206.715 0 .396-.3203.714-.7206.714-.3122 0-.5844-.199-.6805-.476zm1.4415 6.642c-.1015-.316-.1986-.635-.2913-.955l3.3079 3.279h4.499l17.661 17.495c.273-.127.601-.079.825.143.28.285.288.738 0 1.015-.288.278-.744.278-1.025 0-.224-.222-.264-.547-.136-.817l-17.517-17.36h-4.499zm12.3046 17.488c-1.47-1.14-2.849-2.388-4.125-3.731h.361zm6.94 4.245c-.161-.075-.321-.152-.48-.23v-3.699l-11.857-11.751h-4.326c-.085-.158-.17-.317-.253-.476h4.779l12.137 12.028zm-14.977-12.877c.13-.124.309-.201.502-.201.401 0 .721.318.721.714 0 .289-.17.536-.417.649-.276-.382-.545-.769-.806-1.162zm34.629 16.197c-.204.021-.409.04-.615.057l-1.608-1.594 3.186-3.158v-1.674h-.128v-1.587h.737v1.587h-.128v1.865l-2.994 2.967zm3.253-.473c-.157.03-.314.059-.472.087v-5.983h-.128v-1.587h.728v1.587h-.128zm2.999-.702c-.176.049-.352.097-.529.143l-1.141-1.131v-4.206h-.128v-1.587h.729v1.587h-.121v4.015zm2.145-.667c-.167.057-.334.114-.502.169l-1.496-1.482v-3.214h-.128v-1.587h.729v1.587h-.128v3.015zm1.966-.742c-.159.066-.319.13-.479.193l-1.691-1.677v-2.301h-.128v-1.587h.736v1.587h-.128v2.111zm2.906-1.341c-.316.163-.636.322-.958.476h-1.052l-1.257-1.254v-1.666h-.128v-1.587h.729v1.587h-.121v1.476l.977.968zm7.826-5.411c-.178.16-.357.319-.538.476h-1.38l-6.837-6.776v-3.872l5.172-5.126h13.635c-.053.16-.107.318-.163.477h-13.272l-4.9 4.847v3.476l6.557 6.498zm6.255-7.371c-.103.16-.206.318-.311.476h-5.588l-3.003-2.975c-.272.127-.6.079-.824-.143-.28-.286-.28-.738 0-1.016.288-.277.744-.277 1.025 0 .224.222.272.548.144.818l2.858 2.832v.008zm4.935-12.209c-.037.187-.076.374-.116.56l-3.065-3.038h-9.006l-9.616 9.529h-14.739c-.096.278-.368.476-.68.476-.4 0-.721-.317-.721-.714 0-.396.321-.714.721-.714.312 0 .584.199.68.476h14.539l9.615-9.529h9.407zm.525-3.566c-.02.204-.041.408-.064.611l-1.72-1.705h-4.509c-.533.375-1.185.595-1.888.595s-1.355-.22-1.888-.595h-.922l-15.7-15.559h-15.999c1.475.312 2.581 1.611 2.581 3.166 0 .663-.201 1.28-.546 1.793h14.164l7.038 6.974c.272-.127.6-.079.824.143.28.286.28.738 0 1.016-.288.277-.744.277-1.025 0-.224-.222-.272-.548-.144-.818l-6.901-6.839h-14.347c-.592.597-1.417.968-2.329.968-1.804 0-3.267-1.449-3.267-3.237 0-1.555 1.106-2.854 2.581-3.166h-4.182l-13.35-13.231c.118-.108.237-.215.357-.321l13.185 13.068h21.56l15.7 15.567h.183c-.522-.574-.839-1.333-.839-2.166 0-1.637 1.225-2.99 2.816-3.207l-2.368-2.347h-3.891l-18.637-18.475c-1.239-.27-2.215-1.237-2.487-2.466l-8.491-8.418c.185-.039.37-.078.556-.114l7.86 7.788c.025-1.766 1.478-3.19 3.266-3.19 1.804 0 3.266 1.45 3.266 3.238 0 .815-.304 1.56-.806 2.129l15.729 15.596h4.5l5.107 5.062h4.874c.021.159.041.317.061.477h-5.135l-5.108-5.063h-4.499l-15.875-15.733c-.559.47-1.279.757-2.067.769l18.086 17.924h3.891l2.824 2.799c.858.053 1.625.434 2.177 1.017h5.869c.011.159.022.317.031.476h-5.527c.318.494.504 1.079.51 1.706h5.074c.002.121.002.243.002.364v.136l-.024-.024h-5.082c-.091.658-.381 1.252-.809 1.722h4.17zm-.516-10.329c.032.158.062.317.091.476h-2.88l-6.181-6.126h-4.932l-12.137-12.028v-6.665l-4.427-4.388c.273.041.544.085.814.132l4.094 4.057v6.665l11.848 11.751h4.94l6.181 6.126zm-.778-3.157c.092.31.179.622.263.935l-3.86-3.825c-.272.127-.6.08-.824-.142-.28-.286-.28-.738 0-1.016.288-.278.744-.278 1.025 0 .224.222.272.547.144.825zm-2.916-6.992c.251.459.493.923.725 1.393l-3.383-3.352h-10.496l-6.757-6.697v-4.475c-.28-.095-.48-.365-.48-.674 0-.397.32-.715.72-.715.401 0 .721.318.721.715 0 .309-.2.579-.481.674v4.285l6.477 6.411h10.496zm-3.971-5.807c.132.157.262.316.392.476h-2.249c-.104.277-.369.476-.681.476-.4 0-.72-.318-.72-.714 0-.397.32-.715.72-.715.312 0 .585.199.681.477zm-3.049-3.222c.168.157.335.316.499.476h-1.773l-5.607-5.557c.601.344 1.192.705 1.771 1.081l4.036 4zm-42.481-5.848c.16-.082.32-.163.48-.243v2.513l2.266 2.245h7.918l10.208 10.108c.272-.126.6-.079.824.143.28.286.288.738 0 1.016s-.744.278-1.025 0c-.224-.222-.272-.548-.144-.817l-10.063-9.974h-7.918l-2.546-2.523zm-4.806 2.966 6.744 6.683.08.071h5.484l2.706 2.682c-.128.27-.08.595.144.817.28.278.736.278 1.025 0 .288-.278.28-.73 0-1.016-.225-.222-.553-.269-.825-.142l-2.85-2.825h-5.484l-6.624-6.557c-.134.095-.267.19-.4.287zm-11.945 14.847c.0681-.157.1372-.313.2075-.468h.8435v-.127h1.602v.722h-1.602v-.127zm.844-1.801c.1-.199.202-.398.306-.595h1.503v.722h-1.602v-.127zm.893-1.666c.139-.243.28-.483.424-.722h.492v.722zm26.671 38.474-14.851-14.719v-12.473l-4.283-4.244h-2.714v.127h-1.602v-.723h1.602v.119h2.914l4.563 4.523v12.481l14.715 14.568c.272-.127.601-.08.825.142.28.286.288.738 0 1.016-.289.278-.745.278-1.025 0-.224-.222-.272-.547-.144-.817zm-27.357-33.825h1.602v.722h-1.602zm0 1.793h1.602v.723h-1.602zm50.166 15.655h.576c.096.278.368.476.681.476.4 0 .72-.317.72-.714s-.32-.714-.72-.714c-.313 0-.585.198-.681.476h-.776l-5.949 5.895h-15.788l-8.198-8.117v-6.157l-9.583-9.497c.128-.27.08-.595-.144-.817-.28-.278-.736-.278-1.025 0-.288.277-.28.73 0 1.015.225.222.553.27.825.143l9.447 9.363v6.157l8.478 8.402h16.188zm-46.259-22.819h1.602v.722h-1.602zm1.602 1.793h-1.602v.722h1.602zm0 1.793h-1.602v.722h1.602zm-1.602 1.785h1.602v.722h-1.602zm7.83-7.053h-6.228v-.104h-1.602v.722h1.602v-.142h6.028l9.255 9.172v3.983l4.251 4.213h17.693c.096.278.368.476.681.476.4 0 .72-.317.72-.714s-.32-.714-.72-.714c-.313 0-.585.198-.681.476h-17.501l-3.971-3.935v-3.984zm26.436 45.646v-1.578h-.601c-.128-.119-.296-.191-.488-.191-.216 0-.416.095-.544.246l-2.69-2.666h-1.506c-.096-.278-.368-.476-.68-.476-.4 0-.721.317-.721.714s.321.714.721.714c.312 0 .584-.198.68-.476h1.297l2.714 2.69c.016.381.337.682.721.682.128 0 .248-.031.36-.095v.436zm4.691-1.578h.729v1.587h-.729zm-1.409-7.149c.096-.278.369-.476.681-.476.4 0 .728.317.728.722 0 .396-.32.714-.72.714-.312 0-.585-.198-.681-.476h-11.792l-13.739-13.616v-5.268c-.28-.095-.48-.365-.48-.675 0-.396.32-.714.72-.714.401 0 .721.318.721.714 0 .31-.2.58-.48.675v5.07l13.45 13.33zm.329 7.149h-.729v1.587h.729zm-1.81 0h-.728v1.587h.728zm7.23 0h-.729v1.587h.729zm-2.538 0h.728v1.587h-.728z",fill:"#5b2727",fillOpacity:.2,fillRule:"evenodd"})),reactExports.createElement("g",{filter:"url(#e)"},reactExports.createElement("path",{d:"m119.596 260 4.265-11.828h2.999l4.265 11.828h-2.633l-.866-2.515h-4.548l-.866 2.515zm4.198-4.598h3.132l-1.566-4.564zm10.316-7.23h2.532v11.828h-2.532zm11.508 0c2.449 0 4.248 1.266 4.248 3.548 0 1.5-.866 2.516-2.149 2.849 1.266.15 1.866.75 1.966 2.033l.3 3.398h-2.549l-.233-2.965c-.083-1.033-.633-1.366-2.016-1.366h-2.216v4.331h-2.532v-11.828zm-2.649 5.381h2.283c1.299 0 2.016-.583 2.016-1.616 0-1.05-.7-1.633-2.016-1.633h-2.283z",fill:"#727b4e"})),reactExports.createElement("g",{filter:"url(#f)"},reactExports.createElement("path",{d:"m111.89 263.606c4.968 0 7.754 2.765 7.754 7.689 0 4.903-2.743 7.646-7.624 7.646h-5.422v-15.335zm-2.009 12.571h2.009c2.981 0 4.406-1.577 4.406-4.903s-1.425-4.903-4.406-4.903h-2.009zm18.642-12.571c3.175 0 5.508 1.642 5.508 4.601 0 1.944-1.123 3.261-2.786 3.693 1.641.195 2.419.972 2.548 2.635l.389 4.406h-3.304l-.303-3.844c-.108-1.339-.821-1.771-2.613-1.771h-2.873v5.615h-3.283v-15.335zm-3.434 6.977h2.959c1.685 0 2.614-.756 2.614-2.095 0-1.361-.908-2.117-2.614-2.117h-2.959zm17.12 8.704c-4.666 0-7.452-3.067-7.452-7.992 0-4.967 2.786-8.034 7.452-8.034 4.665 0 7.473 3.067 7.473 8.034 0 4.925-2.808 7.992-7.473 7.992zm-4.061-7.992c0 3.283 1.512 5.227 4.061 5.227 2.591 0 4.082-1.944 4.082-5.227 0-3.304-1.491-5.27-4.082-5.27-2.549 0-4.061 1.966-4.061 5.27zm19.629-7.689c3.672 0 5.896 1.901 5.896 5.011s-2.224 5.033-5.896 5.033h-2.851v5.291h-3.283v-15.335zm-2.851 7.279h2.656c1.728 0 2.722-.777 2.722-2.268 0-1.49-.994-2.246-2.722-2.246h-2.656z",fill:"#7c75ff"})))),DEFAULT_CONTEXT={setVisible(tt){console.error(constructMissingProviderErrorMessage("call","setVisible"))},visible:!1};Object.defineProperty(DEFAULT_CONTEXT,"visible",{get(){return console.error(constructMissingProviderErrorMessage("read","visible")),!1}});function constructMissingProviderErrorMessage(tt,et){return`You have tried to  ${tt} "${et}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const WalletModalContext=reactExports.createContext(DEFAULT_CONTEXT);function useWalletModal(){return reactExports.useContext(WalletModalContext)}function useWalletMultiButton({onSelectWallet:tt}){const{connect:et,connected:rt,connecting:nt,disconnect:at,disconnecting:it,publicKey:st,select:dt,wallet:pt,wallets:mt}=useWallet();let yt;nt?yt="connecting":rt?yt="connected":it?yt="disconnecting":pt?yt="has-wallet":yt="no-wallet";const Rt=reactExports.useCallback(()=>{et().catch(()=>{})},[et]),Tt=reactExports.useCallback(()=>{at().catch(()=>{})},[at]),At=reactExports.useCallback(()=>{tt({onSelectWallet:dt,wallets:mt})},[tt,dt,mt]);return{buttonState:yt,onConnect:yt==="has-wallet"?Rt:void 0,onDisconnect:yt!=="disconnecting"&&yt!=="no-wallet"?Tt:void 0,onSelectWallet:At,publicKey:st??void 0,walletIcon:pt==null?void 0:pt.adapter.icon,walletName:pt==null?void 0:pt.adapter.name}}const Button=tt=>React.createElement("button",{className:`wallet-adapter-button ${tt.className||""}`,disabled:tt.disabled,style:tt.style,onClick:tt.onClick,tabIndex:tt.tabIndex||0,type:"button"},tt.startIcon&&React.createElement("i",{className:"wallet-adapter-button-start-icon"},tt.startIcon),tt.children,tt.endIcon&&React.createElement("i",{className:"wallet-adapter-button-end-icon"},tt.endIcon)),WalletIcon=({wallet:tt,...et})=>tt&&React.createElement("img",{src:tt.adapter.icon,alt:`${tt.adapter.name} icon`,...et});function BaseWalletConnectionButton({walletIcon:tt,walletName:et,...rt}){return React.createElement(Button,{...rt,className:"wallet-adapter-button-trigger",startIcon:tt&&et?React.createElement(WalletIcon,{wallet:{adapter:{icon:tt,name:et}}}):void 0})}function BaseWalletMultiButton({children:tt,labels:et,...rt}){const{setVisible:nt}=useWalletModal(),{buttonState:at,onConnect:it,onDisconnect:st,publicKey:dt,walletIcon:pt,walletName:mt}=useWalletMultiButton({onSelectWallet(){nt(!0)}}),[yt,Rt]=reactExports.useState(!1),[Tt,At]=reactExports.useState(!1),xt=reactExports.useRef(null);reactExports.useEffect(()=>{const Ct=Ot=>{const kt=xt.current;!kt||kt.contains(Ot.target)||At(!1)};return document.addEventListener("mousedown",Ct),document.addEventListener("touchstart",Ct),()=>{document.removeEventListener("mousedown",Ct),document.removeEventListener("touchstart",Ct)}},[]);const Nt=reactExports.useMemo(()=>{if(tt)return tt;if(dt){const Ct=dt.toBase58();return Ct.slice(0,4)+".."+Ct.slice(-4)}else return at==="connecting"||at==="has-wallet"?et[at]:et["no-wallet"]},[at,tt,et,dt]);return React.createElement("div",{className:"wallet-adapter-dropdown"},React.createElement(BaseWalletConnectionButton,{...rt,"aria-expanded":Tt,style:{pointerEvents:Tt?"none":"auto",...rt.style},onClick:()=>{switch(at){case"no-wallet":nt(!0);break;case"has-wallet":it&&it();break;case"connected":At(!0);break}},walletIcon:pt,walletName:mt},Nt),React.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${Tt&&"wallet-adapter-dropdown-list-active"}`,ref:xt,role:"menu"},dt?React.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(dt.toBase58()),Rt(!0),setTimeout(()=>Rt(!1),400)},role:"menuitem"},yt?et.copied:et["copy-address"]):null,React.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{nt(!0),At(!1)},role:"menuitem"},et["change-wallet"]),st?React.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{st(),At(!1)},role:"menuitem"},et.disconnect):null))}const Collapse=({id:tt,children:et,expanded:rt=!1})=>{const nt=reactExports.useRef(null),at=reactExports.useRef(!0),it="height 250ms ease-out",st=()=>{const pt=nt.current;pt&&requestAnimationFrame(()=>{pt.style.height=pt.scrollHeight+"px"})},dt=()=>{const pt=nt.current;pt&&requestAnimationFrame(()=>{pt.style.height=pt.offsetHeight+"px",pt.style.overflow="hidden",requestAnimationFrame(()=>{pt.style.height="0"})})};return reactExports.useLayoutEffect(()=>{rt?st():dt()},[rt]),reactExports.useLayoutEffect(()=>{const pt=nt.current;if(!pt)return;function mt(){pt&&(pt.style.overflow=rt?"initial":"hidden",rt&&(pt.style.height="auto"))}function yt(Rt){pt&&Rt.target===pt&&Rt.propertyName==="height"&&mt()}return at.current&&(mt(),at.current=!1),pt.addEventListener("transitionend",yt),()=>pt.removeEventListener("transitionend",yt)},[rt]),React.createElement("div",{className:"wallet-adapter-collapse",id:tt,ref:nt,role:"region",style:{height:0,transition:at.current?void 0:it}},et)},WalletListItem=({handleClick:tt,tabIndex:et,wallet:rt})=>React.createElement("li",null,React.createElement(Button,{onClick:tt,startIcon:React.createElement(WalletIcon,{wallet:rt}),tabIndex:et},rt.adapter.name,rt.readyState===WalletReadyState.Installed&&React.createElement("span",null,"Detected"))),WalletSVG=()=>React.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),React.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),React.createElement("g",{clipPath:"url(#clip0_880_5115)"},React.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),React.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),React.createElement("defs",null,React.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},React.createElement("stop",{stopColor:"#9945FF"}),React.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),React.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),React.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),React.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),React.createElement("stop",{offset:"1",stopColor:"#00D18C"})),React.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},React.createElement("stop",{stopColor:"#9945FF"}),React.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),React.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),React.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),React.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),React.createElement("stop",{offset:"1",stopColor:"#00D18C"})),React.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},React.createElement("stop",{stopColor:"#9945FF"}),React.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),React.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),React.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),React.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),React.createElement("stop",{offset:"1",stopColor:"#00D18C"})),React.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},React.createElement("stop",{stopColor:"#9945FF"}),React.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),React.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),React.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),React.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),React.createElement("stop",{offset:"1",stopColor:"#00D18C"})),React.createElement("clipPath",{id:"clip0_880_5115"},React.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),WalletModal=({className:tt="",container:et="body"})=>{const rt=reactExports.useRef(null),{wallets:nt,select:at}=useWallet(),{setVisible:it}=useWalletModal(),[st,dt]=reactExports.useState(!1),[pt,mt]=reactExports.useState(!1),[yt,Rt]=reactExports.useState(null),[Tt,At]=reactExports.useMemo(()=>{const Pt=[],Dt=[];for(const Gt of nt)Gt.readyState===WalletReadyState.Installed?Pt.push(Gt):Dt.push(Gt);return Pt.length?[Pt,Dt]:[Dt,[]]},[nt]),xt=reactExports.useCallback(()=>{mt(!1),setTimeout(()=>it(!1),150)},[it]),Nt=reactExports.useCallback(Pt=>{Pt.preventDefault(),xt()},[xt]),Ct=reactExports.useCallback((Pt,Dt)=>{at(Dt),Nt(Pt)},[at,Nt]),Ot=reactExports.useCallback(()=>dt(!st),[st]),kt=reactExports.useCallback(Pt=>{const Dt=rt.current;if(!Dt)return;const Gt=Dt.querySelectorAll("button"),jt=Gt[0],Yt=Gt[Gt.length-1];Pt.shiftKey?document.activeElement===jt&&(Yt.focus(),Pt.preventDefault()):document.activeElement===Yt&&(jt.focus(),Pt.preventDefault())},[rt]);return reactExports.useLayoutEffect(()=>{const Pt=Gt=>{Gt.key==="Escape"?xt():Gt.key==="Tab"&&kt(Gt)},{overflow:Dt}=window.getComputedStyle(document.body);return setTimeout(()=>mt(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",Pt,!1),()=>{document.body.style.overflow=Dt,window.removeEventListener("keydown",Pt,!1)}},[xt,kt]),reactExports.useLayoutEffect(()=>Rt(document.querySelector(et)),[et]),yt&&reactDomExports.createPortal(React.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${pt&&"wallet-adapter-modal-fade-in"} ${tt}`,ref:rt,role:"dialog"},React.createElement("div",{className:"wallet-adapter-modal-container"},React.createElement("div",{className:"wallet-adapter-modal-wrapper"},React.createElement("button",{onClick:Nt,className:"wallet-adapter-modal-button-close"},React.createElement("svg",{width:"14",height:"14"},React.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),Tt.length?React.createElement(React.Fragment,null,React.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),React.createElement("ul",{className:"wallet-adapter-modal-list"},Tt.map(Pt=>React.createElement(WalletListItem,{key:Pt.adapter.name,handleClick:Dt=>Ct(Dt,Pt.adapter.name),wallet:Pt})),At.length?React.createElement(Collapse,{expanded:st,id:"wallet-adapter-modal-collapse"},At.map(Pt=>React.createElement(WalletListItem,{key:Pt.adapter.name,handleClick:Dt=>Ct(Dt,Pt.adapter.name),tabIndex:st?0:-1,wallet:Pt}))):null),At.length?React.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:Ot,tabIndex:0},React.createElement("span",null,st?"Less ":"More ","options"),React.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${st?"wallet-adapter-modal-list-more-icon-rotate":""}`},React.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):React.createElement(React.Fragment,null,React.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),React.createElement("div",{className:"wallet-adapter-modal-middle"},React.createElement(WalletSVG,null)),At.length?React.createElement(React.Fragment,null,React.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:Ot,tabIndex:0},React.createElement("span",null,st?"Hide ":"Already have a wallet? View ","options"),React.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${st?"wallet-adapter-modal-list-more-icon-rotate":""}`},React.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),React.createElement(Collapse,{expanded:st,id:"wallet-adapter-modal-collapse"},React.createElement("ul",{className:"wallet-adapter-modal-list"},At.map(Pt=>React.createElement(WalletListItem,{key:Pt.adapter.name,handleClick:Dt=>Ct(Dt,Pt.adapter.name),tabIndex:st?0:-1,wallet:Pt}))))):null))),React.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:Nt})),yt)},WalletModalProvider=({children:tt,...et})=>{const[rt,nt]=reactExports.useState(!1);return React.createElement(WalletModalContext.Provider,{value:{visible:rt,setVisible:nt}},tt,rt&&React.createElement(WalletModal,{...et}))},LABELS={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function WalletMultiButton(tt){return React.createElement(BaseWalletMultiButton,{...tt,labels:LABELS})}const Notification=({children:tt})=>jsxRuntimeExports.jsx("div",{className:"notification",children:tt}),Dashboard=()=>{const{balance:tt,claim:et,isConfirming:rt,error:nt,txHash:at}=useAirdrop(),{gatewayStatus:it}=useSolanaGateway(),st=it===GatewayStatus$2.ACTIVE;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(IdentityButton,{className:"civic-button app-button"}),!tt&&jsxRuntimeExports.jsx("button",{className:"app-button",disabled:!st,onClick:et,children:st?"Claim Airdrop":"Verify first!"}),(!!tt||!st)&&jsxRuntimeExports.jsx("a",{onClick:()=>et(),children:"Attempt to get Airdrop without Civic Pass"}),rt&&jsxRuntimeExports.jsx(Notification,{children:"Claiming"}),!!tt&&jsxRuntimeExports.jsx(Notification,{children:"Congratulations, you have a token!"}),at&&jsxRuntimeExports.jsx(Notification,{children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Transaction: ",at]})}),nt&&jsxRuntimeExports.jsx(Notification,{children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Error: ",nt.message]})})]})};function App(){return jsxRuntimeExports.jsxs("div",{className:"App",children:[jsxRuntimeExports.jsx(SvgBalloon,{}),jsxRuntimeExports.jsx("h1",{children:"Claim Airdrop"}),jsxRuntimeExports.jsxs("p",{children:["Get a ",jsxRuntimeExports.jsx("a",{href:"https://support.civic.com/hc/en-us/articles/4409219336599-What-is-Civic-Pass-and-how-does-it-work",children:"Civic Pass"})," to verify you are a unique person and get the airdrop."]}),jsxRuntimeExports.jsx(WalletMultiButton,{}),jsxRuntimeExports.jsx(Dashboard,{})]})}const CivicPassProvider=({children:tt})=>{const et=useAnchorWallet(),{connection:rt}=useConnection();return jsxRuntimeExports.jsx(SolanaGatewayProvider,{wallet:et,connection:rt,gatekeeperNetwork:UNIQUENESS_PASS,cluster:"devnet",children:tt})},endpoint=clusterApiUrl(WalletAdapterNetwork.Devnet),container=document.getElementById("root"),root=createRoot(container);root.render(jsxRuntimeExports.jsxs(reactExports.StrictMode,{children:[jsxRuntimeExports.jsx(Ie,{position:"bottom-right",toastOptions:{duration:5e3},reverseOrder:!1}),jsxRuntimeExports.jsx(ConnectionProvider,{endpoint,children:jsxRuntimeExports.jsx(WalletProvider,{wallets:[],autoConnect:!0,children:jsxRuntimeExports.jsx(WalletModalProvider,{children:jsxRuntimeExports.jsx(CivicPassProvider,{children:jsxRuntimeExports.jsx(AirdropProvider,{children:jsxRuntimeExports.jsx(App,{})})})})})})]}));
